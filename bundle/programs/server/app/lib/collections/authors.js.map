{"version":3,"sources":["meteor://ðŸ’»app/lib/collections/authors.js"],"names":[],"mappings":";;;;;;;;AAAA,OAAO,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;;;;AAI1C,OAAO,CAAC,KAAK,CAAC;;AAEb,OAAM,EAAE,YAAW;AAAC,SAAO,IAAI;EAAC;;AAEhC,OAAM,EAAE,YAAW;AAAC,SAAO,IAAI;EAAC;;AAEhC,OAAM,EAAE,YAAW;AAAC,SAAO,IAAI;EAAC;CAChC,CAAC,CAAC;;AAEH,MAAM,CAAC,OAAO,CAAC;;AAEd,aAAY,EAAE,UAAS,IAAI,EAAE,OAAO,EAAE;AACrC,SAAO,CAAC,MAAM,CAAC,EAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAC,CAAC,CAAC;EACzD;AACD,WAAU,EAAE,UAAS,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE;AAC/C,MAAI,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,EAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAC,CAAC,CAAC;AAChE,SAAO,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,EAAC,IAAI,EAAE,EAAC,IAAI,EAAC,OAAO,EAAC,EAAC,EAAE,UAAS,KAAK,EAAE;AAClE,OAAI,KAAK,EAAE;AACV,WAAO,CAAC,GAAG,CAAC,oCAAoC,GAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IAChE,MACI;AACJ,SAAK,CAAC,MAAM,CAAC,EAAC,OAAO,EAAC,OAAO,EAAE,MAAM,EAAE,OAAO,EAAC,EAAC,EAAC,IAAI,EAAE,EAAC,MAAM,EAAE,OAAO,EAAC,EAAC,EAAE,EAAC,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC;IAC1F;GACD,CAAC,CAAC;EACH;CACD,CAAC,CAAC,sE","file":"/lib/collections/authors.js","sourcesContent":["Authors = new Mongo.Collection('authors'); // Store author list\n\n// TODO : add server-side security\n\nAuthors.allow({\n\n\tinsert: function() {return true},\n\n\tremove: function() {return true},\n\n\tupdate: function() {return true}\n});\n\nMeteor.methods({\n\n\tauthorInsert: function(name, spaceId) {\n\t\tAuthors.insert({name: name, spaceId: spaceId, nRefs: 0});\n\t},\n\tauthorEdit: function(spaceId, oldName, newName) {\n\t\tvar author = Authors.findOne({name: oldName, spaceId: spaceId});\n\t\tAuthors.update(author._id, {$set: {name:newName}}, function(error) {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(\"Error when changing author name : \"+error.message);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tPosts.update({spaceId:spaceId, author: oldName},{$set: {author: newName}}, {multi: true}); // Update all author posts with new name\n\t\t\t}\n\t\t});\n\t}\n});"]}