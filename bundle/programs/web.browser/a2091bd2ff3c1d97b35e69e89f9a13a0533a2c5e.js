!function(){var n,t;(function(){n={}}).call(this),function(){(function(){var t=this,r=t._,e={},u=Array.prototype,i=Object.prototype,a=Function.prototype,o=u.push,c=u.slice,l=u.concat,f=i.toString,s=i.hasOwnProperty,p=u.forEach,v=u.map,h=u.reduce,d=u.reduceRight,g=u.filter,m=u.every,y=u.some,b=u.indexOf,_=u.lastIndexOf,w=Array.isArray,x=Object.keys,j=a.bind,A=function(n){return n instanceof A?n:this instanceof A?void(this._wrapped=n):new A(n)};"undefined"!=typeof n?("undefined"!=typeof module&&module.exports&&(n=module.exports=A),n._=A):t._=A,A.VERSION="1.5.2";var k=function(n){return"[object Arguments]"===f.call(n)};k(arguments)||(k=function(n){return!(!n||!s.call(n,"callee")||"function"!=typeof n.callee)});var O=function(n){return n.length===+n.length&&(k(n)||n.constructor!==Object)},E=A.each=A.forEach=function(n,t,r){if(null!=n)if(p&&n.forEach===p)n.forEach(t,r);else if(O(n)){for(var u=0,i=n.length;i>u;u++)if(t.call(r,n[u],u,n)===e)return}else for(var a=A.keys(n),u=0,i=a.length;i>u;u++)if(t.call(r,n[a[u]],a[u],n)===e)return};A.map=A.collect=function(n,t,r){var e=[];return null==n?e:v&&n.map===v?n.map(t,r):(E(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var F="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=A.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(E(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(F);return r},A.reduceRight=A.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),d&&n.reduceRight===d)return e&&(t=A.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(!O(n)){var a=A.keys(n);i=a.length}if(E(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(F);return r},A.find=A.detect=function(n,t,r){var e;return M(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},A.filter=A.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(E(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},A.reject=function(n,t,r){return A.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},A.every=A.all=function(n,t,r){t||(t=A.identity);var u=!0;return null==n?u:m&&n.every===m?n.every(t,r):(E(n,function(n,i,a){return(u=u&&t.call(r,n,i,a))?void 0:e}),!!u)};var M=A.some=A.any=function(n,t,r){t||(t=A.identity);var u=!1;return null==n?u:y&&n.some===y?n.some(t,r):(E(n,function(n,i,a){return u||(u=t.call(r,n,i,a))?e:void 0}),!!u)};A.contains=A.include=function(n,t){return null==n?!1:b&&n.indexOf===b?-1!=n.indexOf(t):M(n,function(n){return n===t})},A.invoke=function(n,t){var r=c.call(arguments,2),e=A.isFunction(t);return A.map(n,function(n){return(e?t:n[t]).apply(n,r)})},A.pluck=function(n,t){return A.map(n,function(n){return n[t]})},A.where=function(n,t,r){return A.isEmpty(t)?r?void 0:[]:A[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},A.findWhere=function(n,t){return A.where(n,t,!0)},A.max=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&A.isEmpty(n))return-(1/0);var e={computed:-(1/0),value:-(1/0)};return E(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>e.computed&&(e={value:n,computed:a})}),e.value},A.min=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&A.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return E(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},A.shuffle=function(n){var t,r=0,e=[];return E(n,function(n){t=A.random(r++),e[r-1]=e[t],e[t]=n}),e},A.sample=function(n,t,r){return arguments.length<2||r?n[A.random(n.length-1)]:A.shuffle(n).slice(0,Math.max(0,t))};var R=function(n){return A.isFunction(n)?n:function(t){return t[n]}};A.sortBy=function(n,t,r){var e=R(t);return A.pluck(A.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var S=function(n){return function(t,r,e){var u={},i=null==r?A.identity:R(r);return E(t,function(r,a){var o=i.call(e,r,a,t);n(u,o,r)}),u}};A.groupBy=S(function(n,t,r){(A.has(n,t)?n[t]:n[t]=[]).push(r)}),A.indexBy=S(function(n,t,r){n[t]=r}),A.countBy=S(function(n,t){A.has(n,t)?n[t]++:n[t]=1}),A.sortedIndex=function(n,t,r,e){r=null==r?A.identity:R(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},A.toArray=function(n){return n?A.isArray(n)?c.call(n):O(n)?A.map(n,A.identity):A.values(n):[]},A.size=function(n){return null==n?0:O(n)?n.length:A.keys(n).length},A.first=A.head=A.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:c.call(n,0,t)},A.initial=function(n,t,r){return c.call(n,0,n.length-(null==t||r?1:t))},A.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:c.call(n,Math.max(n.length-t,0))},A.rest=A.tail=A.drop=function(n,t,r){return c.call(n,null==t||r?1:t)},A.compact=function(n){return A.filter(n,A.identity)};var I=function(n,t,r){return t&&A.every(n,A.isArray)?l.apply(r,n):(E(n,function(n){A.isArray(n)||A.isArguments(n)?t?o.apply(r,n):I(n,t,r):r.push(n)}),r)};A.flatten=function(n,t){return I(n,t,[])},A.without=function(n){return A.difference(n,c.call(arguments,1))},A.uniq=A.unique=function(n,t,r,e){A.isFunction(t)&&(e=r,r=t,t=!1);var u=r?A.map(n,r,e):n,i=[],a=[];return E(u,function(r,e){(t?e&&a[a.length-1]===r:A.contains(a,r))||(a.push(r),i.push(n[e]))}),i},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(n){var t=c.call(arguments,1);return A.filter(A.uniq(n),function(n){return A.every(t,function(t){return A.indexOf(t,n)>=0})})},A.difference=function(n){var t=l.apply(u,c.call(arguments,1));return A.filter(n,function(n){return!A.contains(t,n)})},A.zip=function(){for(var n=A.max(A.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=A.pluck(arguments,""+r);return t},A.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},A.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=A.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(b&&n.indexOf===b)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},A.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(_&&n.lastIndexOf===_)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},A.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var T=function(){};A.bind=function(n,t){var r,e;if(j&&n.bind===j)return j.apply(n,c.call(arguments,1));if(!A.isFunction(n))throw new TypeError;return r=c.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(c.call(arguments)));T.prototype=n.prototype;var u=new T;T.prototype=null;var i=n.apply(u,r.concat(c.call(arguments)));return Object(i)===i?i:u}},A.partial=function(n){var t=c.call(arguments,1);return function(){return n.apply(this,t.concat(c.call(arguments)))}},A.bindAll=function(n){var t=c.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return E(t,function(t){n[t]=A.bind(n[t],n)}),n},A.memoize=function(n,t){var r={};return t||(t=A.identity),function(){var e=t.apply(this,arguments);return A.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},A.delay=function(n,t){var r=c.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},A.defer=function(n){return A.delay.apply(A,[n,1].concat(c.call(arguments,1)))},A.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:new Date,a=null,i=n.apply(e,u)};return function(){var l=new Date;o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u)):a||r.trailing===!1||(a=setTimeout(c,f)),i}},A.debounce=function(n,t,r){var e,u,i,a,o;return function(){i=this,u=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u)))},l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u)),o}},A.once=function(n){var t=!1,r;return function(){return t?r:(t=!0,r=n.apply(this,arguments),n=null,r)}},A.wrap=function(n,t){return function(){var r=[n];return o.apply(r,arguments),t.apply(this,r)}},A.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},A.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},A.keys=x||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)A.has(n,r)&&t.push(r);return t},A.values=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},A.pairs=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},A.invert=function(n){for(var t={},r=A.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},A.functions=A.methods=function(n){var t=[];for(var r in n)A.isFunction(n[r])&&t.push(r);return t.sort()},A.extend=function(n){return E(c.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},A.pick=function(n){var t={},r=l.apply(u,c.call(arguments,1));return E(r,function(r){r in n&&(t[r]=n[r])}),t},A.omit=function(n){var t={},r=l.apply(u,c.call(arguments,1));for(var e in n)A.contains(r,e)||(t[e]=n[e]);return t},A.defaults=function(n){return E(c.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},A.clone=function(n){return A.isObject(n)?A.isArray(n)?n.slice():A.extend({},n):n},A.tap=function(n,t){return t(n),n};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof A&&(n=n._wrapped),t instanceof A&&(t=t._wrapped);var u=f.call(n);if(u!=f.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(A.isFunction(a)&&a instanceof a&&A.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c=0,l=!0;if("[object Array]"==u){if(c=n.length,l=c==t.length)for(;c--&&(l=N(n[c],t[c],r,e)););}else{for(var s in n)if(A.has(n,s)&&(c++,!(l=A.has(t,s)&&N(n[s],t[s],r,e))))break;if(l){for(s in t)if(A.has(t,s)&&!c--)break;l=!c}}return r.pop(),e.pop(),l};A.isEqual=function(n,t){return N(n,t,[],[])},A.isEmpty=function(n){if(null==n)return!0;if(A.isArray(n)||A.isString(n))return 0===n.length;for(var t in n)if(A.has(n,t))return!1;return!0},A.isElement=function(n){return!(!n||1!==n.nodeType)},A.isArray=w||function(n){return"[object Array]"==f.call(n)},A.isObject=function(n){return n===Object(n)},E(["Arguments","Function","String","Number","Date","RegExp"],function(n){A["is"+n]=function(t){return f.call(t)=="[object "+n+"]"}}),A.isArguments(arguments)||(A.isArguments=function(n){return!(!n||!A.has(n,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(n){return"function"==typeof n}),A.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},A.isNaN=function(n){return A.isNumber(n)&&n!=+n},A.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==f.call(n)},A.isNull=function(n){return null===n},A.isUndefined=function(n){return void 0===n},A.has=function(n,t){return s.call(n,t)},A.noConflict=function(){return t._=r,this},A.identity=function(n){return n},A.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},A.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var q={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};q.unescape=A.invert(q.escape);var B={escape:new RegExp("["+A.keys(q.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(q.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(n){A[n]=function(t){return null==t?"":(""+t).replace(B[n],function(t){return q[n][t]})}}),A.result=function(n,t){if(null==n)return void 0;var r=n[t];return A.isFunction(r)?r.call(n):r},A.mixin=function(n){E(A.functions(n),function(t){var r=A[t]=n[t];A.prototype[t]=function(){var n=[this._wrapped];return o.apply(n,arguments),U.call(this,r.apply(A,n))}})};var D=0;A.uniqueId=function(n){var t=++D+"";return n?n+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(n,t,r){var e;r=A.defaults({},r,A.templateSettings);var u=new RegExp([(r.escape||P).source,(r.interpolate||P).source,(r.evaluate||P).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(C,function(n){return"\\"+z[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,A);var c=function(n){return e.call(this,n,A)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},A.chain=function(n){return A(n).chain()};var U=function(n){return this._chain?A(n).chain():n};A.mixin(A),E(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=u[n];A.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],U.call(this,r)}}),E(["concat","join","slice"],function(n){var t=u[n];A.prototype[n]=function(){return U.call(this,t.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}.call(this),function(){t=n._}.call(this),"undefined"==typeof Package&&(Package={}),Package.underscore={_:t}}();

!function(){var t=Package.underscore._,e;(function(){e={isClient:!0,isServer:!1,isCordova:!1},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(e.settings={"public":__meteor_runtime_config__.PUBLIC_SETTINGS})}).call(this),function(){function n(t){return t?e._debug("Exception in callback of async function",t.stack?t.stack:t):void 0}if(e.isServer)var r=Npm.require("fibers/future");"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.meteorRelease&&(e.release=__meteor_runtime_config__.meteorRelease),t.extend(e,{_get:function(t){for(var e=1;e<arguments.length;e++){if(!(arguments[e]in t))return void 0;t=t[arguments[e]]}return t},_ensure:function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];n in t||(t[n]={}),t=t[n]}return t},_delete:function(t){for(var e=[t],n=!0,r=1;r<arguments.length-1;r++){var o=arguments[r];if(!(o in t)){n=!1;break}if(t=t[o],"object"!=typeof t)break;e.push(t)}for(var r=e.length-1;r>=0;r--){var o=arguments[r+1];if(n)n=!1;else for(var i in e[r][o])return;delete e[r][o]}},wrapAsync:function(o,i){return function(){for(var a=i||this,s=t.toArray(arguments),u,c=s.length-1;c>=0;--c){var l=s[c],f=typeof l;if("undefined"!==f){"function"===f&&(u=l);break}}if(!u){if(e.isClient)u=n;else{var _=new r;u=_.resolver()}++c}s[c]=e.bindEnvironment(u);var p=o.apply(a,s);return _?_.wait():p}},_inherits:function(e,n){for(var r in n)t.has(n,r)&&(e[r]=n[r]);var o=function(){this.constructor=e};return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e}});var o=!1;e._wrapAsync=function(t,n){return o||(e._debug("Meteor._wrapAsync has been renamed to Meteor.wrapAsync"),o=!0),e.wrapAsync.apply(e,arguments)}}.call(this),function(){"use strict";function t(){if(o.setImmediate){var t=function(t){o.setImmediate(t)};return t.implementation="setImmediate",t}return null}function n(){function t(t,e){return"string"==typeof t&&t.substring(0,e.length)===e}function e(e){if(e.source===o&&t(e.data,s)){var n=e.data.substring(s.length);try{a[n]&&a[n]()}finally{delete a[n]}}}if(!o.postMessage||o.importScripts)return null;var n=!0,r=o.onmessage;if(o.onmessage=function(){n=!1},o.postMessage("","*"),o.onmessage=r,!n)return null;var i=0,a={},s="Meteor._setImmediate."+Math.random()+".";o.addEventListener?o.addEventListener("message",e,!1):o.attachEvent("onmessage",e);var u=function(t){++i,a[i]=t,o.postMessage(s+i,"*")};return u.implementation="postMessage",u}function r(){var t=function(t){o.setTimeout(t,0)};return t.implementation="setTimeout",t}var o=this;e._setImmediate=t()||n()||r()}.call(this),function(){var n=function(t){if(Package.ddp){var e=Package.ddp.DDP._CurrentInvocation;if(e.get()&&e.get().isSimulation)throw new Error("Can't set timers inside simulations");return function(){e.withValue(null,t)}}return t},r=function(t,r){return e.bindEnvironment(n(r),t)};t.extend(e,{setTimeout:function(t,e){return setTimeout(r("setTimeout callback",t),e)},setInterval:function(t,e){return setInterval(r("setInterval callback",t),e)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},defer:function(t){e._setImmediate(r("defer callback",t))}})}.call(this),function(){e.makeErrorType=function(t,n){var r=function(){var e=this;if(Error.captureStackTrace)Error.captureStackTrace(e,r);else{var o=new Error;o.__proto__=r.prototype,o instanceof r&&(e=o)}return n.apply(e,arguments),e.errorType=t,e};return e._inherits(r,Error),r},e.Error=e.makeErrorType("Meteor.Error",function(t,e,n){var r=this;r.error=t,r.reason=e,r.details=n,r.reason?r.message=r.reason+" ["+r.error+"]":r.message="["+r.error+"]"}),e.Error.prototype.clone=function(){var t=this;return new e.Error(t.error,t.reason,t.details)}}.call(this),function(){e._noYieldsAllowed=function(t){return t()},e._SynchronousQueue=function(){var t=this;t._tasks=[],t._running=!1,t._runTimeout=null},t.extend(e._SynchronousQueue.prototype,{runTask:function(n){var r=this;if(!r.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");r._tasks.push(n);var o=r._tasks;r._tasks=[],r._running=!0,r._runTimeout&&(clearTimeout(r._runTimeout),r._runTimeout=null);try{for(;!t.isEmpty(o);){var i=o.shift();try{i()}catch(a){if(t.isEmpty(o))throw a;e._debug("Exception in queued task: "+(a.stack||a))}}}finally{r._running=!1}},queueTask:function(e){var n=this;n._tasks.push(e),n._runTimeout||(n._runTimeout=setTimeout(t.bind(n.flush,n),0))},flush:function(){var t=this;t.runTask(function(){})},drain:function(){var e=this;if(e.safeToRunTask())for(;!t.isEmpty(e._tasks);)e.flush()},safeToRunTask:function(){var t=this;return!t._running}})}.call(this),function(){var t=[],n=!e.isCordova&&("loaded"===document.readyState||"complete"==document.readyState),r=1,o=function(){if(r--,!(r>0)){n=!0;var o=function(){if(e.isCordova&&(!cordova.plugins||!cordova.plugins.CordovaUpdate))return void e.setTimeout(o,20);for(;t.length;)t.shift()()};o()}};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),e.isCordova&&(r++,document.addEventListener("deviceready",o,!1)),window.addEventListener("load",o,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&o()}),window.attachEvent("load",o)),e.startup=function(r){var o=!document.addEventListener&&document.documentElement.doScroll;if(o&&window===top){try{o("left")}catch(i){return void setTimeout(function(){e.startup(r)},50)}r()}else n?r():t.push(r)}}.call(this),function(){var t=0;e._debug=function(){if(t)return void t--;if("undefined"!=typeof console&&"undefined"!=typeof console.log)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var e=!0,n=0;n<arguments.length;n++)"string"!=typeof arguments[n]&&(e=!1);e?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var r=Function.prototype.bind.call(console.log,console);r.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},e._suppress_log=function(e){t+=e},e._suppressed_log_expected=function(){return 0!==t}}.call(this),function(){e._escapeRegExp=function(t){return String(t).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}.call(this),function(){var n=0,r=[];e.EnvironmentVariable=function(){this.slot=n++},t.extend(e.EnvironmentVariable.prototype,{get:function(){return r[this.slot]},getOrNullIfOutsideFiber:function(){return this.get()},withValue:function(t,e){var n=r[this.slot];try{r[this.slot]=t;var o=e()}finally{r[this.slot]=n}return o}}),e.bindEnvironment=function(n,o,i){var a=t.clone(r);if(!o||"string"==typeof o){var s=o||"callback of async function";o=function(t){e._debug("Exception in "+s+":",t&&t.stack||t)}}return function(){var e=r;try{r=a;var s=n.apply(i,t.toArray(arguments))}catch(u){o(u)}finally{r=e}return s}},e._nodeCodeMustBeInFiber=function(){}}.call(this),function(){e.absoluteUrl=function(n,r){r||"object"!=typeof n||(r=n,n=void 0),r=t.extend({},e.absoluteUrl.defaultOptions,r||{});var o=r.rootUrl;if(!o)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/^http[s]?:\/\//i.test(o)||(o="http://"+o),/\/$/.test(o)||(o+="/"),n&&(o+=n),r.secure&&/^http:/.test(o)&&!/http:\/\/localhost[:\/]/.test(o)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(o)&&(o=o.replace(/^http:/,"https:")),r.replaceLocalhost&&(o=o.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),o},e.absoluteUrl.defaultOptions={},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(e.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL),e._relativeToSiteRootUrl=function(t){return"object"==typeof __meteor_runtime_config__&&"/"===t.substr(0,1)&&(t=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+t),t}}.call(this),"undefined"==typeof Package&&(Package={}),Package.meteor={Meteor:e}}();

!function(){var n=Package.meteor.Meteor,t,e;(function(){t={},t.active=!1,t.currentComputation=null,t._computations={};var e=function(n){t.currentComputation=n,t.active=!!n},o=function(){return"undefined"!=typeof n?n._debug:"undefined"!=typeof console&&console.error?function(){console.error.apply(console,arguments)}:function(){}},r=function(t){"undefined"!=typeof n&&n._suppressed_log_expected()&&n._suppress_log(t-1)},i=function(n,t){if(l)throw t;var e=["Exception from Tracker "+n+" function:"];if(t.stack&&t.message&&t.name){var i=t.stack.indexOf(t.message);if(0>i||i>t.name.length+2){var a=t.name+": "+t.message;e.push(a)}}e.push(t.stack),r(e.length);for(var u=0;u<e.length;u++)o()(e[u])},a=function(t){return"undefined"==typeof n||n.isClient?t:function(){var e=arguments;n._noYieldsAllowed(function(){t.apply(null,e)})}},u=1,c=[],s=!1,p=!1,f=!1,l=!1,d=[],h=function(){s||("undefined"!=typeof n?n._setImmediate(t._runFlush):setTimeout(t._runFlush,0),s=!0)},v=!1;t.Computation=function(n,e,o){if(!v)throw new Error("Tracker.Computation constructor is private; use Tracker.autorun");v=!1;var r=this;r.stopped=!1,r.invalidated=!1,r.firstRun=!0,r._id=u++,r._onInvalidateCallbacks=[],r._onStopCallbacks=[],r._parent=e,r._func=n,r._onError=o,r._recomputing=!1,t._computations[r._id]=r;var i=!0;try{r._compute(),i=!1}finally{r.firstRun=!1,i&&r.stop()}},t.Computation.prototype.onInvalidate=function(n){var e=this;if("function"!=typeof n)throw new Error("onInvalidate requires a function");e.invalidated?t.nonreactive(function(){a(n)(e)}):e._onInvalidateCallbacks.push(n)},t.Computation.prototype.onStop=function(n){var e=this;if("function"!=typeof n)throw new Error("onStop requires a function");e.stopped?t.nonreactive(function(){a(n)(e)}):e._onStopCallbacks.push(n)},t.Computation.prototype.invalidate=function(){var n=this;if(!n.invalidated){n._recomputing||n.stopped||(h(),c.push(this)),n.invalidated=!0;for(var e=0,o;o=n._onInvalidateCallbacks[e];e++)t.nonreactive(function(){a(o)(n)});n._onInvalidateCallbacks=[]}},t.Computation.prototype.stop=function(){var n=this;if(!n.stopped){n.stopped=!0,n.invalidate(),delete t._computations[n._id];for(var e=0,o;o=n._onStopCallbacks[e];e++)t.nonreactive(function(){a(o)(n)});n._onStopCallbacks=[]}},t.Computation.prototype._compute=function(){var n=this;n.invalidated=!1;var o=t.currentComputation;e(n);var r=f;f=!0;try{a(n._func)(n)}finally{e(o),f=r}},t.Computation.prototype._needsRecompute=function(){var n=this;return n.invalidated&&!n.stopped},t.Computation.prototype._recompute=function(){var n=this;n._recomputing=!0;try{if(n._needsRecompute())try{n._compute()}catch(t){n._onError?n._onError(t):i("recompute",t)}}finally{n._recomputing=!1}},t.Dependency=function(){this._dependentsById={}},t.Dependency.prototype.depend=function(n){if(!n){if(!t.active)return!1;n=t.currentComputation}var e=this,o=n._id;return o in e._dependentsById?!1:(e._dependentsById[o]=n,n.onInvalidate(function(){delete e._dependentsById[o]}),!0)},t.Dependency.prototype.changed=function(){var n=this;for(var t in n._dependentsById)n._dependentsById[t].invalidate()},t.Dependency.prototype.hasDependents=function(){var n=this;for(var t in n._dependentsById)return!0;return!1},t.flush=function(n){t._runFlush({finishSynchronously:!0,throwFirstError:n&&n._throwFirstError})},t._runFlush=function(n){if(p)throw new Error("Can't call Tracker.flush while flushing");if(f)throw new Error("Can't flush inside Tracker.autorun");n=n||{},p=!0,s=!0,l=!!n.throwFirstError;var e=0,o=!1;try{for(;c.length||d.length;){for(;c.length;){var r=c.shift();if(r._recompute(),r._needsRecompute()&&c.unshift(r),!n.finishSynchronously&&++e>1e3)return void(o=!0)}if(d.length){var a=d.shift();try{a()}catch(u){i("afterFlush",u)}}}o=!0}finally{if(o||(p=!1,t._runFlush({finishSynchronously:n.finishSynchronously,throwFirstError:!1})),s=!1,p=!1,c.length||d.length){if(n.finishSynchronously)throw new Error("still have more to do?");setTimeout(h,10)}}},t.autorun=function(n,e){if("function"!=typeof n)throw new Error("Tracker.autorun requires a function argument");e=e||{},v=!0;var o=new t.Computation(n,t.currentComputation,e.onError);return t.active&&t.onInvalidate(function(){o.stop()}),o},t.nonreactive=function(n){var o=t.currentComputation;e(null);try{return n()}finally{e(o)}},t.onInvalidate=function(n){if(!t.active)throw new Error("Tracker.onInvalidate requires a currentComputation");t.currentComputation.onInvalidate(n)},t.afterFlush=function(n){d.push(n),h()}}).call(this),function(){n.flush=t.flush,n.autorun=t.autorun,n.autosubscribe=t.autorun,t.depend=function(n){return n.depend()},e=t}.call(this),"undefined"==typeof Package&&(Package={}),Package.tracker={Tracker:t,Deps:e}}();

!function(){var e=Package.meteor.Meteor,a=Package.tracker.Tracker,c=Package.tracker.Deps,a,c;"undefined"==typeof Package&&(Package={}),Package.deps={Tracker:a,Deps:c}}();

!function(){var e=Package.meteor.Meteor,t,n;(function(){!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=ie.type(e);return"function"===n||ie.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(ie.isFunction(t))return ie.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ie.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return ie.filter(t,e,n);t=ie.filter(t,e)}return ie.grep(e,function(e){return ie.inArray(e,t)>=0!==n})}function i(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=xe[e]={};return ie.each(e.match(be)||[],function(e,n){t[n]=!0}),t}function a(){he.addEventListener?(he.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(he.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(he.addEventListener||"load"===event.type||"complete"===he.readyState)&&(a(),ie.ready())}function u(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(Ee,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Ne.test(n)?ie.parseJSON(n):n}catch(i){}ie.data(e,t,n)}else n=void 0}return n}function l(e){var t;for(t in e)if(("data"!==t||!ie.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,n,r){if(ie.acceptData(e)){var i,o,a=ie.expando,s=e.nodeType,u=s?ie.cache:e,l=s?e[a]:e[a]&&a;if(l&&u[l]&&(r||u[l].data)||void 0!==n||"string"!=typeof t)return l||(l=s?e[a]=J.pop()||ie.guid++:a),u[l]||(u[l]=s?{}:{toJSON:ie.noop}),("object"==typeof t||"function"==typeof t)&&(r?u[l]=ie.extend(u[l],t):u[l].data=ie.extend(u[l].data,t)),o=u[l],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[ie.camelCase(t)]=n),"string"==typeof t?(i=o[t],null==i&&(i=o[ie.camelCase(t)])):i=o,i}}function d(e,t,n){if(ie.acceptData(e)){var r,i,o=e.nodeType,a=o?ie.cache:e,s=o?e[ie.expando]:ie.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){ie.isArray(t)?t=t.concat(ie.map(t,ie.camelCase)):t in r?t=[t]:(t=ie.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!l(r):!ie.isEmptyObject(r))return}(n||(delete a[s].data,l(a[s])))&&(o?ie.cleanData([e],!0):ne.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function f(){return!0}function p(){return!1}function h(){try{return he.activeElement}catch(e){}}function m(e){var t=Fe.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,r,i=0,o=typeof e.getElementsByTagName!==Te?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Te?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||ie.nodeName(r,t)?o.push(r):ie.merge(o,g(r,t));return void 0===t||t&&ie.nodeName(e,t)?ie.merge([e],o):o}function v(e){je.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return ie.nodeName(e,"table")&&ie.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==ie.find.attr(e,"type"))+"/"+e.type,e}function x(e){var t=Ve.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,r=0;null!=(n=e[r]);r++)ie._data(n,"globalEval",!t||ie._data(t[r],"globalEval"))}function T(e,t){if(1===t.nodeType&&ie.hasData(e)){var n,r,i,o=ie._data(e),a=ie._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)ie.event.add(t,n,s[n][r])}a.data&&(a.data=ie.extend({},a.data))}}function C(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ne.noCloneEvent&&t[ie.expando]){i=ie._data(t);for(r in i.events)ie.removeEvent(t,r,i.handle);t.removeAttribute(ie.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,x(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ne.html5Clone&&e.innerHTML&&!ie.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&je.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function N(t,n){var r,i=ie(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:ie.css(i[0],"display");return i.detach(),o}function E(e){var t=he,n=Ze[e];return n||(n=N(e,t),"none"!==n&&n||(Ke=(Ke||ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Ke[0].contentWindow||Ke[0].contentDocument).document,t.write(),t.close(),n=N(e,t),Ke.detach()),Ze[e]=n),n}function k(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=ft.length;i--;)if(t=ft[i]+n,t in e)return t;return r}function A(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=ie._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Ae(r)&&(o[a]=ie._data(r,"olddisplay",E(r.nodeName)))):(i=Ae(r),(n&&"none"!==n||!i)&&ie._data(r,"olddisplay",i?n:ie.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function D(e,t,n){var r=ut.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function j(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=ie.css(e,n+Se[o],!0,i)),r?("content"===n&&(a-=ie.css(e,"padding"+Se[o],!0,i)),"margin"!==n&&(a-=ie.css(e,"border"+Se[o]+"Width",!0,i))):(a+=ie.css(e,"padding"+Se[o],!0,i),"padding"!==n&&(a+=ie.css(e,"border"+Se[o]+"Width",!0,i)));return a}function L(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=nt(e),a=ne.boxSizing&&"border-box"===ie.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=rt(e,t,o),(0>i||null==i)&&(i=e.style[t]),tt.test(i))return i;r=a&&(ne.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+j(e,t,n||(a?"border":"content"),r,o)+"px"}function H(e,t,n,r,i){return new H.prototype.init(e,t,n,r,i)}function q(){return setTimeout(function(){pt=void 0}),pt=ie.now()}function _(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Se[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function M(e,t,n){for(var r,i=(bt[t]||[]).concat(bt["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function F(e,t,n){var r,i,o,a,s,u,l,c,d=this,f={},p=e.style,h=e.nodeType&&Ae(e),m=ie._data(e,"fxshow");n.queue||(s=ie._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,ie.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=ie.css(e,"display"),c="none"===l?ie._data(e,"olddisplay")||E(e.nodeName):l,"inline"===c&&"none"===ie.css(e,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==E(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",ne.shrinkWrapBlocks()||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],mt.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;h=!0}f[r]=m&&m[r]||ie.style(e,r)}else l=void 0;if(ie.isEmptyObject(f))"inline"===("none"===l?E(e.nodeName):l)&&(p.display=l);else{m?"hidden"in m&&(h=m.hidden):m=ie._data(e,"fxshow",{}),o&&(m.hidden=!h),h?ie(e).show():d.done(function(){ie(e).hide()}),d.done(function(){var t;ie._removeData(e,"fxshow");for(t in f)ie.style(e,t,f[t])});for(r in f)a=M(h?m[r]:0,r,d),r in m||(m[r]=a.start,h&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function O(e,t){var n,r,i,o,a;for(n in e)if(r=ie.camelCase(n),i=t[r],o=e[n],ie.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=ie.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function B(e,t,n){var r,i,o=0,a=yt.length,s=ie.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=pt||q(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:ie.extend({},t),opts:ie.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:pt||q(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ie.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(O(c,l.opts.specialEasing);a>o;o++)if(r=yt[o].call(l,e,c,l.opts))return r;return ie.map(c,M,l),ie.isFunction(l.opts.start)&&l.opts.start.call(e,l),ie.fx.timer(ie.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function P(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(be)||[];if(ie.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function R(e,t,n,r){function i(s){var u;return o[s]=!0,ie.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=e===zt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function W(e,t){var n,r,i=ie.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&ie.extend(!0,e,n),e}function $(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){u.unshift(a);break}if(u[0]in n)o=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){o=a;break}r||(r=a)}o=o||r}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function z(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=l[u+" "+o]||l["* "+o],!a)for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[i]:l[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function I(e,t,n,r){var i;if(ie.isArray(t))ie.each(t,function(t,i){n||Vt.test(e)?r(e,i):I(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==ie.type(t))r(e,t);else for(i in t)I(e+"["+i+"]",t[i],n,r)}function X(){try{return new e.XMLHttpRequest}catch(t){}}function U(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function V(e){return ie.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var J=[],Y=J.slice,Q=J.concat,G=J.push,K=J.indexOf,Z={},ee=Z.toString,te=Z.hasOwnProperty,ne={},re="1.11.2",ie=function(e,t){return new ie.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,se=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};ie.fn=ie.prototype={jquery:re,constructor:ie,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Y.call(this)},pushStack:function(e){var t=ie.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ie.each(this,e,t)},map:function(e){return this.pushStack(ie.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:J.sort,splice:J.splice},ie.extend=ie.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||ie.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(i=arguments[s]))for(r in i)e=a[r],n=i[r],a!==n&&(l&&n&&(ie.isPlainObject(n)||(t=ie.isArray(n)))?(t?(t=!1,o=e&&ie.isArray(e)?e:[]):o=e&&ie.isPlainObject(e)?e:{},a[r]=ie.extend(l,o,n)):void 0!==n&&(a[r]=n));return a},ie.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ie.type(e)},isArray:Array.isArray||function(e){return"array"===ie.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!ie.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ie.type(e)||e.nodeType||ie.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&ie.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ae,"ms-").replace(se,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;a>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(s)for(;a>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ie.merge(r,"string"==typeof e?[e]:e):G.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(K)return K.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;a>o;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),u=[];if(s)for(;a>o;o++)i=t(e[o],o,r),null!=i&&u.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&u.push(i);return Q.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(i=e[t],t=e,e=i),ie.isFunction(e)?(n=Y.call(arguments,2),r=function(){return e.apply(t||this,n.concat(Y.call(arguments)))},r.guid=e.guid=e.guid||ie.guid++,r):void 0},now:function(){return+new Date},support:ne}),ie.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var le=function(e){function t(e,t,n,r){var i,o,a,s,u,l,d,p,h,m;if((t?t.ownerDocument||t:R)!==H&&L(t),t=t||H,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!r&&_){if(11!==s&&(i=ye.exec(e)))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&B(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return K.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&w.getElementsByClassName)return K.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!M||!M.test(e))){if(p=d=P,h=t,m=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=E(e),(d=t.getAttribute("id"))?p=d.replace(xe,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",u=l.length;u--;)l[u]=p+f(l[u]);h=be.test(e)&&c(t.parentNode)||t,m=l.join(",")}if(m)try{return K.apply(n,h.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return S(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[P]=!0,e}function i(e){var t=H.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)T.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=$++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,l=[W,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[P]||(t[P]={}),(s=u[r])&&s[0]===W&&s[1]===o)return l[2]=s[2];if(u[r]=l,l[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function v(e,t,n,i,o,a){return i&&!i[P]&&(i=v(i)),o&&!o[P]&&(o=v(o,a)),r(function(r,a,s,u){var l,c,d,f=[],p=[],h=a.length,v=r||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:g(v,f,e,s,u),b=n?o||(r?e:h||i)?[]:a:y;if(n&&n(y,b,s,u),i)for(l=g(b,p),i(l,[],s,u),c=l.length;c--;)(d=l[c])&&(b[p[c]]=!(y[p[c]]=d));if(r){if(o||e){if(o){for(l=[],c=b.length;c--;)(d=b[c])&&l.push(y[c]=d);o(null,b=[],l,u)}for(c=b.length;c--;)(d=b[c])&&(l=o?ee(r,d):f[c])>-1&&(r[l]=!(a[l]=d))}}else b=g(b===a?b.splice(h,b.length):b),o?o(null,a,b,u):K.apply(a,b)})}function y(e){for(var t,n,r,i=e.length,o=T.relative[e[0].type],a=o||T.relative[" "],s=o?1:0,u=p(function(e){return e===t},a,!0),l=p(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,r){var i=!o&&(r||n!==A)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];i>s;s++)if(n=T.relative[e[s].type])c=[p(h(c),n)];else{if(n=T.filter[e[s].type].apply(null,e[s].matches),n[P]){for(r=++s;i>r&&!T.relative[e[r].type];r++);return v(s>1&&h(c),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ue,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&f(e))}c.push(n)}return h(c)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,u,l){var c,d,f,p=0,h="0",m=r&&[],v=[],y=A,b=r||o&&T.find.TAG("*",l),x=W+=null==y?1:Math.random()||.1,w=b.length;for(l&&(A=a!==H&&a);h!==w&&null!=(c=b[h]);h++){if(o&&c){for(d=0;f=e[d++];)if(f(c,a,s)){u.push(c);break}l&&(W=x)}i&&((c=!f&&c)&&p--,r&&m.push(c))}if(p+=h,i&&h!==p){for(d=0;f=n[d++];)f(m,v,a,s);if(r){if(p>0)for(;h--;)m[h]||v[h]||(v[h]=Q.call(u));v=g(v)}K.apply(u,v),l&&!r&&v.length>0&&p+n.length>1&&t.uniqueSort(u)}return l&&(W=x,A=y),m};return i?r(a):a}var x,w,T,C,N,E,k,S,A,D,j,L,H,q,_,M,F,O,B,P="sizzle"+1*new Date,R=e.document,W=0,$=0,z=n(),I=n(),X=n(),U=function(e,t){return e===t&&(j=!0),0},V=1<<31,J={}.hasOwnProperty,Y=[],Q=Y.pop,G=Y.push,K=Y.push,Z=Y.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ue=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(ae),pe=new RegExp("^"+ie+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,xe=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Te=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ce=function(){L()};try{K.apply(Y=Z.call(R.childNodes),R.childNodes),Y[R.childNodes.length].nodeType}catch(Ne){K={apply:Y.length?function(e,t){G.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},N=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:R;return r!==H&&9===r.nodeType&&r.documentElement?(H=r,q=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),_=!N(r),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(r.getElementsByClassName),w.getById=i(function(e){return q.appendChild(e).id=P,!r.getElementsByName||!r.getElementsByName(P).length}),w.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&_){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=w.getElementsByClassName&&function(e,t){return _?t.getElementsByClassName(e):void 0},F=[],M=[],(w.qsa=ve.test(r.querySelectorAll))&&(i(function(e){q.appendChild(e).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+P+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+P+"+*").length||M.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(w.matchesSelector=ve.test(O=q.matches||q.webkitMatchesSelector||q.mozMatchesSelector||q.oMatchesSelector||q.msMatchesSelector))&&i(function(e){w.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),F.push("!=",ae)}),M=M.length&&new RegExp(M.join("|")),F=F.length&&new RegExp(F.join("|")),t=ve.test(q.compareDocumentPosition),B=t||ve.test(q.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return j=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===R&&B(R,e)?-1:t===r||t.ownerDocument===R&&B(R,t)?1:D?ee(D,e)-ee(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return j=!0,0;var n,i=0,o=e.parentNode,s=t.parentNode,u=[e],l=[t];if(!o||!s)return e===r?-1:t===r?1:o?-1:s?1:D?ee(D,e)-ee(D,t):0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?a(u[i],l[i]):u[i]===R?-1:l[i]===R?1:0},r):H},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==H&&L(e),n=n.replace(de,"='$1']"),!(!w.matchesSelector||!_||F&&F.test(n)||M&&M.test(n)))try{var r=O.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,H,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==H&&L(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==H&&L(e);var n=T.attrHandle[t.toLowerCase()],r=n&&J.call(T.attrHandle,t.toLowerCase())?n(e,t,!_):void 0;return void 0!==r?r:w.attributes||!_?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(j=!w.detectDuplicates,D=!w.sortStable&&e.slice(0),e.sort(U),j){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return D=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},T=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(c=g[P]||(g[P]={}),l=c[e]||[],p=l[0]===W&&l[1],f=l[0]===W&&l[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===t){c[e]=[W,p,f];break}}else if(y&&(l=(t[P]||(t[P]={}))[e])&&l[0]===W)f=l[1];else for(;(d=++p&&d&&d[m]||(f=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[P]||(d[P]={}))[e]=[W,f]),d!==t)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(e,n){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[P]?o(n):o.length>1?(i=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=ee(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=k(e.replace(ue,"$1"));return i[P]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,Te),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Te).toLowerCase(),function(t){var n;do if(n=_?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===q},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},T.pseudos.nth=T.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})T.pseudos[x]=u(x);return d.prototype=T.filters=T.pseudos,T.setFilters=new d,E=t.tokenize=function(e,n){var r,i,o,a,s,u,l,c=I[e+" "];if(c)return n?0:c.slice(0);for(s=e,u=[],l=T.preFilter;s;){(!r||(i=le.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ue," ")}),s=s.slice(r.length));

for(a in T.filter)!(i=he[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):I(e,u).slice(0)},k=t.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=E(e)),n=t.length;n--;)o=y(t[n]),o[P]?r.push(o):i.push(o);o=X(e,b(i,r)),o.selector=e}return o},S=t.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,d=!r&&E(e=l.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&_&&T.relative[o[1].type]){if(t=(T.find.ID(a.matches[0].replace(we,Te),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(a=o[i],!T.relative[s=a.type]);)if((u=T.find[s])&&(r=u(a.matches[0].replace(we,Te),be.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&f(o),!e)return K.apply(n,r),n;break}}return(l||k(e,d))(r,t,!_,n,be.test(e)&&c(t.parentNode)||t),n},w.sortStable=P.split("").sort(U).join("")===P,w.detectDuplicates=!!j,L(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(H.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ie.find=le,ie.expr=le.selectors,ie.expr[":"]=ie.expr.pseudos,ie.unique=le.uniqueSort,ie.text=le.getText,ie.isXMLDoc=le.isXML,ie.contains=le.contains;var ce=ie.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;ie.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ie.find.matchesSelector(r,e)?[r]:[]:ie.find.matches(e,ie.grep(t,function(e){return 1===e.nodeType}))},ie.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(ie(e).filter(function(){for(t=0;i>t;t++)if(ie.contains(r[t],this))return!0}));for(t=0;i>t;t++)ie.find(e,r[t],n);return n=this.pushStack(i>1?ie.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ce.test(e)?ie(e):e||[],!1).length}});var pe,he=e.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=ie.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:me.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||pe).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ie?t[0]:t,ie.merge(this,ie.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:he,!0)),de.test(n[1])&&ie.isPlainObject(t))for(n in t)ie.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=he.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return pe.find(e);this.length=1,this[0]=r}return this.context=he,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ie.isFunction(e)?"undefined"!=typeof pe.ready?pe.ready(e):e(ie):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ie.makeArray(e,this))};ge.prototype=ie.fn,pe=ie(he);var ve=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};ie.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!ie(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),ie.fn.extend({has:function(e){var t,n=ie(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(ie.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ce.test(e)||"string"!=typeof e?ie(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ie.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ie.unique(o):o)},index:function(e){return e?"string"==typeof e?ie.inArray(this[0],ie(e)):ie.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ie.unique(ie.merge(this.get(),ie(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ie.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ie.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ie.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return ie.dir(e,"nextSibling")},prevAll:function(e){return ie.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ie.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ie.dir(e,"previousSibling",n)},siblings:function(e){return ie.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ie.sibling(e.firstChild)},contents:function(e){return ie.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ie.merge([],e.childNodes)}},function(e,t){ie.fn[e]=function(n,r){var i=ie.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ie.filter(r,i)),this.length>1&&(ye[e]||(i=ie.unique(i)),ve.test(e)&&(i=i.reverse())),this.pushStack(i)}});var be=/\S+/g,xe={};ie.Callbacks=function(e){e="string"==typeof e?xe[e]||o(e):ie.extend({},e);var t,n,r,i,a,s,u=[],l=!e.once&&[],c=function(o){for(n=e.memory&&o,r=!0,a=s||0,s=0,i=u.length,t=!0;u&&i>a;a++)if(u[a].apply(o[0],o[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(l?l.length&&c(l.shift()):n?u=[]:d.disable())},d={add:function(){if(u){var r=u.length;!function o(t){ie.each(t,function(t,n){var r=ie.type(n);"function"===r?e.unique&&d.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),t?i=u.length:n&&(s=r,c(n))}return this},remove:function(){return u&&ie.each(arguments,function(e,n){for(var r;(r=ie.inArray(n,u,r))>-1;)u.splice(r,1),t&&(i>=r&&i--,a>=r&&a--)}),this},has:function(e){return e?ie.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],i=0,this},disable:function(){return u=l=n=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,n||d.disable(),this},locked:function(){return!l},fireWith:function(e,n){return!u||r&&!l||(n=n||[],n=[e,n.slice?n.slice():n],t?l.push(n):c(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},ie.extend({Deferred:function(e){var t=[["resolve","done",ie.Callbacks("once memory"),"resolved"],["reject","fail",ie.Callbacks("once memory"),"rejected"],["notify","progress",ie.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ie.Deferred(function(n){ie.each(t,function(t,o){var a=ie.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&ie.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ie.extend(e,r):r}},i={};return r.pipe=r.then,ie.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=Y.call(arguments),r=n.length,i=1!==r||e&&ie.isFunction(e.promise)?r:0,o=1===i?e:ie.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?Y.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=new Array(r),u=new Array(r),l=new Array(r);r>t;t++)n[t]&&ie.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}});var we;ie.fn.ready=function(e){return ie.ready.promise().done(e),this},ie.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ie.readyWait++:ie.ready(!0)},ready:function(e){if(e===!0?!--ie.readyWait:!ie.isReady){if(!he.body)return setTimeout(ie.ready);ie.isReady=!0,e!==!0&&--ie.readyWait>0||(we.resolveWith(he,[ie]),ie.fn.triggerHandler&&(ie(he).triggerHandler("ready"),ie(he).off("ready")))}}}),ie.ready.promise=function(t){if(!we)if(we=ie.Deferred(),"complete"===he.readyState)setTimeout(ie.ready);else if(he.addEventListener)he.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{he.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&he.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!ie.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}a(),ie.ready()}}()}return we.promise(t)};var Te="undefined",Ce;for(Ce in ie(ne))break;ne.ownLast="0"!==Ce,ne.inlineBlockNeedsLayout=!1,ie(function(){var e,t,n,r;n=he.getElementsByTagName("body")[0],n&&n.style&&(t=he.createElement("div"),r=he.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Te&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=he.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(t){ne.deleteExpando=!1}}e=null}(),ie.acceptData=function(e){var t=ie.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ee=/([A-Z])/g;ie.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ie.cache[e[ie.expando]]:e[ie.expando],!!e&&!l(e)},data:function(e,t,n){return c(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return c(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),ie.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=ie.data(o),1===o.nodeType&&!ie._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=ie.camelCase(r.slice(5)),u(o,r,i[r])));ie._data(o,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ie.data(this,e)}):arguments.length>1?this.each(function(){ie.data(this,e,t)}):o?u(o,e,ie.data(o,e)):void 0},removeData:function(e){return this.each(function(){ie.removeData(this,e)})}}),ie.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ie._data(e,t),n&&(!r||ie.isArray(n)?r=ie._data(e,t,ie.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ie.queue(e,t),r=n.length,i=n.shift(),o=ie._queueHooks(e,t),a=function(){ie.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ie._data(e,n)||ie._data(e,n,{empty:ie.Callbacks("once memory").add(function(){ie._removeData(e,t+"queue"),ie._removeData(e,n)})})}}),ie.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ie.queue(this[0],e):void 0===t?this:this.each(function(){var n=ie.queue(this,e,t);ie._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ie.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ie.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ie.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=ie._data(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ke=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Se=["Top","Right","Bottom","Left"],Ae=function(e,t){return e=t||e,"none"===ie.css(e,"display")||!ie.contains(e.ownerDocument,e)},De=ie.access=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===ie.type(n)){i=!0;for(s in n)ie.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,ie.isFunction(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ie(e),n)})),t))for(;u>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},je=/^(?:checkbox|radio)$/i;!function(){var e=he.createElement("input"),t=he.createElement("div"),n=he.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===t.firstChild.nodeType,ne.tbody=!t.getElementsByTagName("tbody").length,ne.htmlSerialize=!!t.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==he.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ne.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ne.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(r){ne.deleteExpando=!1}}}(),function(){var t,n,r=he.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ne[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),ne[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var Le=/^(?:input|select|textarea)$/i,He=/^key/,qe=/^(?:mouse|pointer|contextmenu)|click/,_e=/^(?:focusinfocus|focusoutblur)$/,Me=/^([^.]*)(?:\.(.+)|)$/;ie.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,d,f,p,h,m,g=ie._data(e);if(g){for(n.handler&&(u=n,n=u.handler,i=u.selector),n.guid||(n.guid=ie.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||(c=g.handle=function(e){return typeof ie===Te||e&&ie.event.triggered===e.type?void 0:ie.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(be)||[""],s=t.length;s--;)o=Me.exec(t[s])||[],p=m=o[1],h=(o[2]||"").split(".").sort(),p&&(l=ie.event.special[p]||{},p=(i?l.delegateType:l.bindType)||p,l=ie.event.special[p]||{},d=ie.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ie.expr.match.needsContext.test(i),namespace:h.join(".")},u),(f=a[p])||(f=a[p]=[],f.delegateCount=0,l.setup&&l.setup.call(e,r,h,c)!==!1||(e.addEventListener?e.addEventListener(p,c,!1):e.attachEvent&&e.attachEvent("on"+p,c))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),ie.event.global[p]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,d,f,p,h,m,g=ie.hasData(e)&&ie._data(e);if(g&&(c=g.events)){for(t=(t||"").match(be)||[""],l=t.length;l--;)if(s=Me.exec(t[l])||[],p=m=s[1],h=(s[2]||"").split(".").sort(),p){for(d=ie.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,f=c[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;o--;)a=f[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,d.remove&&d.remove.call(e,a));u&&!f.length&&(d.teardown&&d.teardown.call(e,h,g.handle)!==!1||ie.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)ie.event.remove(e,p+t[l],n,r,!0);ie.isEmptyObject(c)&&(delete g.handle,ie._removeData(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,u,l,c,d,f=[r||he],p=te.call(t,"type")?t.type:t,h=te.call(t,"namespace")?t.namespace.split("."):[];if(s=c=r=r||he,3!==r.nodeType&&8!==r.nodeType&&!_e.test(p+ie.event.triggered)&&(p.indexOf(".")>=0&&(h=p.split("."),p=h.shift(),h.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[ie.expando]?t:new ie.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ie.makeArray(n,[t]),l=ie.event.special[p]||{},i||!l.trigger||l.trigger.apply(r,n)!==!1)){if(!i&&!l.noBubble&&!ie.isWindow(r)){for(u=l.delegateType||p,_e.test(u+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),c=s;c===(r.ownerDocument||he)&&f.push(c.defaultView||c.parentWindow||e)}for(d=0;(s=f[d++])&&!t.isPropagationStopped();)t.type=d>1?u:l.bindType||p,o=(ie._data(s,"events")||{})[t.type]&&ie._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&ie.acceptData(s)&&(t.result=o.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=p,!i&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(f.pop(),n)===!1)&&ie.acceptData(r)&&a&&r[p]&&!ie.isWindow(r)){c=r[a],c&&(r[a]=null),ie.event.triggered=p;try{r[p]()}catch(m){}ie.event.triggered=void 0,c&&(r[a]=c)}return t.result}},dispatch:function(e){e=ie.event.fix(e);var t,n,r,i,o,a=[],s=Y.call(arguments),u=(ie._data(this,"events")||{})[e.type]||[],l=ie.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(a=ie.event.handlers.call(this,e,u),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,o=0;(r=i.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=((ie.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(i=[],o=0;s>o;o++)r=t[o],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?ie(n,this).index(u)>=0:ie.find(n,this,null,[u]).length),i[n]&&i.push(r);i.length&&a.push({elem:u,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[ie.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=qe.test(i)?this.mouseHooks:He.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new ie.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||he),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||he,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ie.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ie.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=ie.extend(new ie.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ie.event.trigger(i,null,t):ie.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},ie.removeEvent=he.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===Te&&(e[r]=null),e.detachEvent(r,n))},ie.Event=function(e,t){return this instanceof ie.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:p):this.type=e,t&&ie.extend(this,t),this.timeStamp=e&&e.timeStamp||ie.now(),void(this[ie.expando]=!0)):new ie.Event(e,t)},ie.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ie.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!ie.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ne.submitBubbles||(ie.event.special.submit={setup:function(){return ie.nodeName(this,"form")?!1:void ie.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ie.nodeName(t,"input")||ie.nodeName(t,"button")?t.form:void 0;n&&!ie._data(n,"submitBubbles")&&(ie.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ie._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ie.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ie.nodeName(this,"form")?!1:void ie.event.remove(this,"._submit")}}),ne.changeBubbles||(ie.event.special.change={setup:function(){return Le.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ie.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ie.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ie.event.simulate("change",this,e,!0)})),!1):void ie.event.add(this,"beforeactivate._change",function(e){var t=e.target;Le.test(t.nodeName)&&!ie._data(t,"changeBubbles")&&(ie.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ie.event.simulate("change",this.parentNode,e,!0)}),ie._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ie.event.remove(this,"._change"),!Le.test(this.nodeName)}}),ne.focusinBubbles||ie.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ie.event.simulate(t,e.target,ie.event.fix(e),!0)};ie.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ie._data(r,t);i||r.addEventListener(e,n,!0),ie._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ie._data(r,t)-1;i?ie._data(r,t,i):(r.removeEventListener(e,n,!0),ie._removeData(r,t))}}}),ie.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=p;else if(!r)return this;return 1===i&&(a=r,r=function(e){return ie().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ie.guid++)),this.each(function(){ie.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ie(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=p),this.each(function(){ie.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ie.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ie.event.trigger(e,t,n,!0):void 0}});var Fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Oe=/ jQuery\d+="(?:null|\d+)"/g,Be=new RegExp("<(?:"+Fe+")[\\s/>]","i"),Pe=/^\s+/,Re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,We=/<([\w:]+)/,$e=/<tbody/i,ze=/<|&#?\w+;/,Ie=/<(?:script|style|link)/i,Xe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^$|\/(?:java|ecma)script/i,Ve=/^true\/(.*)/,Je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ye={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Qe=m(he),Ge=Qe.appendChild(he.createElement("div"));Ye.optgroup=Ye.option,Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,ie.extend({clone:function(e,t,n){var r,i,o,a,s,u=ie.contains(e.ownerDocument,e);if(ne.html5Clone||ie.isXMLDoc(e)||!Be.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Ge.innerHTML=e.outerHTML,Ge.removeChild(o=Ge.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ie.isXMLDoc(e)))for(r=g(o),s=g(e),a=0;null!=(i=s[a]);++a)r[a]&&C(i,r[a]);if(t)if(n)for(s=s||g(e),r=r||g(o),a=0;null!=(i=s[a]);a++)T(i,r[a]);else T(e,o);return r=g(o,"script"),r.length>0&&w(r,!u&&g(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c,d=e.length,f=m(t),p=[],h=0;d>h;h++)if(o=e[h],o||0===o)if("object"===ie.type(o))ie.merge(p,o.nodeType?[o]:o);else if(ze.test(o)){for(s=s||f.appendChild(t.createElement("div")),u=(We.exec(o)||["",""])[1].toLowerCase(),c=Ye[u]||Ye._default,s.innerHTML=c[1]+o.replace(Re,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!ne.leadingWhitespace&&Pe.test(o)&&p.push(t.createTextNode(Pe.exec(o)[0])),!ne.tbody)for(o="table"!==u||$e.test(o)?"<table>"!==c[1]||$e.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)ie.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(ie.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else p.push(t.createTextNode(o));for(s&&f.removeChild(s),ne.appendChecked||ie.grep(g(p,"input"),v),h=0;o=p[h++];)if((!r||-1===ie.inArray(o,r))&&(a=ie.contains(o.ownerDocument,o),s=g(f.appendChild(o),"script"),a&&w(s),n))for(i=0;o=s[i++];)Ue.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,r,i,o,a=0,s=ie.expando,u=ie.cache,l=ne.deleteExpando,c=ie.event.special;null!=(n=e[a]);a++)if((t||ie.acceptData(n))&&(i=n[s],o=i&&u[i])){if(o.events)for(r in o.events)c[r]?ie.event.remove(n,r):ie.removeEvent(n,r,o.handle);u[i]&&(delete u[i],l?delete n[s]:typeof n.removeAttribute!==Te?n.removeAttribute(s):n[s]=null,J.push(i))}}}),ie.fn.extend({text:function(e){return De(this,function(e){return void 0===e?ie.text(this):this.empty().append((this[0]&&this[0].ownerDocument||he).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?ie.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||ie.cleanData(g(n)),n.parentNode&&(t&&ie.contains(n.ownerDocument,n)&&w(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ie.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ie.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ie.clone(this,e,t)})},html:function(e){return De(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Oe,""):void 0;if(!("string"!=typeof e||Ie.test(e)||!ne.htmlSerialize&&Be.test(e)||!ne.leadingWhitespace&&Pe.test(e)||Ye[(We.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Re,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(ie.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ie.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Q.apply([],e);var n,r,i,o,a,s,u=0,l=this.length,c=this,d=l-1,f=e[0],p=ie.isFunction(f);if(p||l>1&&"string"==typeof f&&!ne.checkClone&&Xe.test(f))return this.each(function(n){var r=c.eq(n);p&&(e[0]=f.call(this,n,r.html())),r.domManip(e,t)});if(l&&(s=ie.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=ie.map(g(s,"script"),b),i=o.length;l>u;u++)r=s,u!==d&&(r=ie.clone(r,!0,!0),i&&ie.merge(o,g(r,"script"))),t.call(this[u],r,u);if(i)for(a=o[o.length-1].ownerDocument,ie.map(o,x),u=0;i>u;u++)r=o[u],Ue.test(r.type||"")&&!ie._data(r,"globalEval")&&ie.contains(a,r)&&(r.src?ie._evalUrl&&ie._evalUrl(r.src):ie.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Je,"")));s=n=null}return this}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ie.fn[e]=function(e){for(var n,r=0,i=[],o=ie(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),ie(o[r])[t](n),G.apply(i,n.get());return this.pushStack(i)}});var Ke,Ze={};!function(){var e;ne.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=he.getElementsByTagName("body")[0],n&&n.style?(t=he.createElement("div"),r=he.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Te&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(he.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var et=/^margin/,tt=new RegExp("^("+ke+")(?!px)[a-z%]+$","i"),nt,rt,it=/^(top|right|bottom|left)$/;e.getComputedStyle?(nt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},rt=function(e,t,n){var r,i,o,a,s=e.style;return n=n||nt(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||ie.contains(e.ownerDocument,e)||(a=ie.style(e,t)),
tt.test(a)&&et.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0===a?a:a+""}):he.documentElement.currentStyle&&(nt=function(e){return e.currentStyle},rt=function(e,t,n){var r,i,o,a,s=e.style;return n=n||nt(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),tt.test(a)&&!it.test(t)&&(r=s.left,i=e.runtimeStyle,o=i&&i.left,o&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,n,r,i;n=he.getElementsByTagName("body")[0],n&&n.style&&(t=he.createElement("div"),r=he.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,u=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,i=t.appendChild(he.createElement("div")),i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",u=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight),t.removeChild(i)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=t.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===i[0].offsetHeight,s&&(i[0].style.display="",i[1].style.display="none",s=0===i[0].offsetHeight),n.removeChild(r))}var n,r,i,o,a,s,u;n=he.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=n.getElementsByTagName("a")[0],r=i&&i.style,r&&(r.cssText="float:left;opacity:.5",ne.opacity="0.5"===r.opacity,ne.cssFloat=!!r.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===r.boxSizing||""===r.MozBoxSizing||""===r.WebkitBoxSizing,ie.extend(ne,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==u&&t(),u}}))}(),ie.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var ot=/alpha\([^)]*\)/i,at=/opacity\s*=\s*([^)]*)/,st=/^(none|table(?!-c[ea]).+)/,ut=new RegExp("^("+ke+")(.*)$","i"),lt=new RegExp("^([+-])=("+ke+")","i"),ct={position:"absolute",visibility:"hidden",display:"block"},dt={letterSpacing:"0",fontWeight:"400"},ft=["Webkit","O","Moz","ms"];ie.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=ie.camelCase(t),u=e.style;if(t=ie.cssProps[s]||(ie.cssProps[s]=S(u,s)),a=ie.cssHooks[t]||ie.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];if(o=typeof n,"string"===o&&(i=lt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(ie.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||ie.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,r)))))try{u[t]=n}catch(l){}}},css:function(e,t,n,r){var i,o,a,s=ie.camelCase(t);return t=ie.cssProps[s]||(ie.cssProps[s]=S(e.style,s)),a=ie.cssHooks[t]||ie.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=rt(e,t,r)),"normal"===o&&t in dt&&(o=dt[t]),""===n||n?(i=parseFloat(o),n===!0||ie.isNumeric(i)?i||0:o):o}}),ie.each(["height","width"],function(e,t){ie.cssHooks[t]={get:function(e,n,r){return n?st.test(ie.css(e,"display"))&&0===e.offsetWidth?ie.swap(e,ct,function(){return L(e,t,r)}):L(e,t,r):void 0},set:function(e,n,r){var i=r&&nt(e);return D(e,n,r?j(e,t,r,ne.boxSizing&&"border-box"===ie.css(e,"boxSizing",!1,i),i):0)}}}),ne.opacity||(ie.cssHooks.opacity={get:function(e,t){return at.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=ie.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ie.trim(o.replace(ot,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=ot.test(o)?o.replace(ot,i):o+" "+i)}}),ie.cssHooks.marginRight=k(ne.reliableMarginRight,function(e,t){return t?ie.swap(e,{display:"inline-block"},rt,[e,"marginRight"]):void 0}),ie.each({margin:"",padding:"",border:"Width"},function(e,t){ie.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Se[r]+t]=o[r]||o[r-2]||o[0];return i}},et.test(e)||(ie.cssHooks[e+t].set=D)}),ie.fn.extend({css:function(e,t){return De(this,function(e,t,n){var r,i,o={},a=0;if(ie.isArray(t)){for(r=nt(e),i=t.length;i>a;a++)o[t[a]]=ie.css(e,t[a],!1,r);return o}return void 0!==n?ie.style(e,t,n):ie.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ae(this)?ie(this).show():ie(this).hide()})}}),ie.Tween=H,H.prototype={constructor:H,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ie.cssNumber[n]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,n=H.propHooks[this.prop];return this.options.duration?this.pos=t=ie.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ie.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ie.fx.step[e.prop]?ie.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ie.cssProps[e.prop]]||ie.cssHooks[e.prop])?ie.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ie.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ie.fx=H.prototype.init,ie.fx.step={};var pt,ht,mt=/^(?:toggle|show|hide)$/,gt=new RegExp("^(?:([+-])=|)("+ke+")([a-z%]*)$","i"),vt=/queueHooks$/,yt=[F],bt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=gt.exec(t),o=i&&i[3]||(ie.cssNumber[e]?"":"px"),a=(ie.cssNumber[e]||"px"!==o&&+r)&&gt.exec(ie.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,ie.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};ie.Animation=ie.extend(B,{tweener:function(e,t){ie.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],bt[n]=bt[n]||[],bt[n].unshift(t)},prefilter:function(e,t){t?yt.unshift(e):yt.push(e)}}),ie.speed=function(e,t,n){var r=e&&"object"==typeof e?ie.extend({},e):{complete:n||!n&&t||ie.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ie.isFunction(t)&&t};return r.duration=ie.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ie.fx.speeds?ie.fx.speeds[r.duration]:ie.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){ie.isFunction(r.old)&&r.old.call(this),r.queue&&ie.dequeue(this,r.queue)},r},ie.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ie.isEmptyObject(e),o=ie.speed(t,n,r),a=function(){var t=B(this,ie.extend({},e),o);(i||ie._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ie.timers,a=ie._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&vt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&ie.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ie._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ie.timers,a=r?r.length:0;for(n.finish=!0,ie.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ie.each(["toggle","show","hide"],function(e,t){var n=ie.fn[t];ie.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(_(t,!0),e,r,i)}}),ie.each({slideDown:_("show"),slideUp:_("hide"),slideToggle:_("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ie.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ie.timers=[],ie.fx.tick=function(){var e,t=ie.timers,n=0;for(pt=ie.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||ie.fx.stop(),pt=void 0},ie.fx.timer=function(e){ie.timers.push(e),e()?ie.fx.start():ie.timers.pop()},ie.fx.interval=13,ie.fx.start=function(){ht||(ht=setInterval(ie.fx.tick,ie.fx.interval))},ie.fx.stop=function(){clearInterval(ht),ht=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(e,t){return e=ie.fx?ie.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=he.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=he.createElement("select"),i=n.appendChild(he.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",ne.getSetAttribute="t"!==t.className,ne.style=/top/.test(r.getAttribute("style")),ne.hrefNormalized="/a"===r.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=i.selected,ne.enctype=!!he.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!i.disabled,e=he.createElement("input"),e.setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value}();var xt=/\r/g;ie.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=ie.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,ie(this).val()):e,null==i?i="":"number"==typeof i?i+="":ie.isArray(i)&&(i=ie.map(i,function(e){return null==e?"":e+""})),t=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=ie.valHooks[i.type]||ie.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(xt,""):null==n?"":n)}}}),ie.extend({valHooks:{option:{get:function(e){var t=ie.find.attr(e,"value");return null!=t?t:ie.trim(ie.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ie.nodeName(n.parentNode,"optgroup"))){if(t=ie(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=ie.makeArray(t),a=i.length;a--;)if(r=i[a],ie.inArray(ie.valHooks.option.get(r),o)>=0)try{r.selected=n=!0}catch(s){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(e,t){return ie.isArray(t)?e.checked=ie.inArray(ie(e).val(),t)>=0:void 0}},ne.checkOn||(ie.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var wt,Tt,Ct=ie.expr.attrHandle,Nt=/^(?:checked|selected)$/i,Et=ne.getSetAttribute,kt=ne.input;ie.fn.extend({attr:function(e,t){return De(this,ie.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ie.removeAttr(this,e)})}}),ie.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Te?ie.prop(e,t,n):(1===o&&ie.isXMLDoc(e)||(t=t.toLowerCase(),r=ie.attrHooks[t]||(ie.expr.match.bool.test(t)?Tt:wt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=ie.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void ie.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(be);if(o&&1===e.nodeType)for(;n=o[i++];)r=ie.propFix[n]||n,ie.expr.match.bool.test(n)?kt&&Et||!Nt.test(n)?e[r]=!1:e[ie.camelCase("default-"+n)]=e[r]=!1:ie.attr(e,n,""),e.removeAttribute(Et?n:r)},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&ie.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Tt={set:function(e,t,n){return t===!1?ie.removeAttr(e,n):kt&&Et||!Nt.test(n)?e.setAttribute(!Et&&ie.propFix[n]||n,n):e[ie.camelCase("default-"+n)]=e[n]=!0,n}},ie.each(ie.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Ct[t]||ie.find.attr;Ct[t]=kt&&Et||!Nt.test(t)?function(e,t,r){var i,o;return r||(o=Ct[t],Ct[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,Ct[t]=o),i}:function(e,t,n){return n?void 0:e[ie.camelCase("default-"+t)]?t.toLowerCase():null}}),kt&&Et||(ie.attrHooks.value={set:function(e,t,n){return ie.nodeName(e,"input")?void(e.defaultValue=t):wt&&wt.set(e,t,n)}}),Et||(wt={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Ct.id=Ct.name=Ct.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},ie.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:wt.set},ie.attrHooks.contenteditable={set:function(e,t,n){wt.set(e,""===t?!1:t,n)}},ie.each(["width","height"],function(e,t){ie.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ne.style||(ie.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var St=/^(?:input|select|textarea|button|object)$/i,At=/^(?:a|area)$/i;ie.fn.extend({prop:function(e,t){return De(this,ie.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ie.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),ie.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!ie.isXMLDoc(e),o&&(t=ie.propFix[t]||t,i=ie.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ie.find.attr(e,"tabindex");return t?parseInt(t,10):St.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}}}),ne.hrefNormalized||ie.each(["href","src"],function(e,t){ie.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ne.optSelected||(ie.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ie.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ie.propFix[this.toLowerCase()]=this}),ne.enctype||(ie.propFix.enctype="encoding");var Dt=/[\t\r\n\f]/g;ie.fn.extend({addClass:function(e){var t,n,r,i,o,a,s=0,u=this.length,l="string"==typeof e&&e;if(ie.isFunction(e))return this.each(function(t){ie(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(be)||[];u>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dt," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=ie.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0,u=this.length,l=0===arguments.length||"string"==typeof e&&e;if(ie.isFunction(e))return this.each(function(t){ie(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(be)||[];u>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dt," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?ie.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(ie.isFunction(e)?function(n){ie(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=ie(this),o=e.match(be)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Te||"boolean"===n)&&(this.className&&ie._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ie._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Dt," ").indexOf(t)>=0)return!0;return!1}}),ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ie.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ie.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var jt=ie.now(),Lt=/\?/,Ht=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ie.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=ie.trim(t+"");return i&&!ie.trim(i.replace(Ht,function(e,t,i,o){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!o-!i,"")}))?Function("return "+i)():ie.error("Invalid JSON: "+t)},ie.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+t),n};var qt,_t,Mt=/#.*$/,Ft=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pt=/^(?:GET|HEAD)$/,Rt=/^\/\//,Wt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,$t={},zt={},It="*/".concat("*");try{_t=location.href}catch(Xt){_t=he.createElement("a"),_t.href="",_t=_t.href}qt=Wt.exec(_t.toLowerCase())||[],ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t,type:"GET",isLocal:Bt.test(qt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ie.parseJSON,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?W(W(e,ie.ajaxSettings),t):W(ie.ajaxSettings,e)},ajaxPrefilter:P($t),ajaxTransport:P(zt),ajax:function(e,t){function n(e,t,n,r){var i,c,v,y,x,T=t;2!==b&&(b=2,s&&clearTimeout(s),l=void 0,a=r||"",w.readyState=e>0?4:0,i=e>=200&&300>e||304===e,n&&(y=$(d,w,n)),y=z(d,y,w,i),i?(d.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(ie.lastModified[o]=x),x=w.getResponseHeader("etag"),x&&(ie.etag[o]=x)),204===e||"HEAD"===d.type?T="nocontent":304===e?T="notmodified":(T=y.state,c=y.data,v=y.error,i=!v)):(v=T,(e||!T)&&(T="error",0>e&&(e=0))),w.status=e,w.statusText=(t||T)+"",i?h.resolveWith(f,[c,T,w]):h.rejectWith(f,[w,T,v]),w.statusCode(g),g=void 0,u&&p.trigger(i?"ajaxSuccess":"ajaxError",[w,d,i?c:v]),m.fireWith(f,[w,T]),u&&(p.trigger("ajaxComplete",[w,d]),--ie.active||ie.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,u,l,c,d=ie.ajaxSetup({},t),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?ie(f):ie.event,h=ie.Deferred(),m=ie.Callbacks("once memory"),g=d.statusCode||{},v={},y={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=Ot.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return l&&l.abort(t),n(0,t),this}};if(h.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||_t)+"").replace(Mt,"").replace(Rt,qt[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=ie.trim(d.dataType||"*").toLowerCase().match(be)||[""],null==d.crossDomain&&(r=Wt.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]===qt[1]&&r[2]===qt[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(qt[3]||("http:"===qt[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ie.param(d.data,d.traditional)),R($t,d,t,w),2===b)return w;u=ie.event&&d.global,u&&0===ie.active++&&ie.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Pt.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(Lt.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Ft.test(o)?o.replace(Ft,"$1_="+jt++):o+(Lt.test(o)?"&":"?")+"_="+jt++)),d.ifModified&&(ie.lastModified[o]&&w.setRequestHeader("If-Modified-Since",ie.lastModified[o]),ie.etag[o]&&w.setRequestHeader("If-None-Match",ie.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+It+"; q=0.01":""):d.accepts["*"]);for(i in d.headers)w.setRequestHeader(i,d.headers[i]);if(d.beforeSend&&(d.beforeSend.call(f,w,d)===!1||2===b))return w.abort();x="abort";for(i in{success:1,error:1,complete:1})w[i](d[i]);if(l=R(zt,d,t,w)){w.readyState=1,u&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,l.send(v,n)}catch(T){if(!(2>b))throw T;n(-1,T)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return ie.get(e,t,n,"json")},getScript:function(e,t){return ie.get(e,void 0,t,"script")}}),ie.each(["get","post"],function(e,t){ie[t]=function(e,n,r,i){return ie.isFunction(n)&&(i=i||r,r=n,n=void 0),ie.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),ie._evalUrl=function(e){return ie.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ie.fn.extend({wrapAll:function(e){if(ie.isFunction(e))return this.each(function(t){ie(this).wrapAll(e.call(this,t))});if(this[0]){var t=ie(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(ie.isFunction(e)?function(t){ie(this).wrapInner(e.call(this,t))}:function(){var t=ie(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ie.isFunction(e);return this.each(function(n){ie(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ie.nodeName(this,"body")||ie(this).replaceWith(this.childNodes)}).end()}}),ie.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ie.css(e,"display"))},ie.expr.filters.visible=function(e){return!ie.expr.filters.hidden(e)};var Ut=/%20/g,Vt=/\[\]$/,Jt=/\r?\n/g,Yt=/^(?:submit|button|image|reset|file)$/i,Qt=/^(?:input|select|textarea|keygen)/i;ie.param=function(e,t){var n,r=[],i=function(e,t){t=ie.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ie.ajaxSettings&&ie.ajaxSettings.traditional),ie.isArray(e)||e.jquery&&!ie.isPlainObject(e))ie.each(e,function(){i(this.name,this.value)});else for(n in e)I(n,e[n],t,i);return r.join("&").replace(Ut,"+")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ie.prop(this,"elements");return e?ie.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ie(this).is(":disabled")&&Qt.test(this.nodeName)&&!Yt.test(e)&&(this.checked||!je.test(e))}).map(function(e,t){var n=ie(this).val();return null==n?null:ie.isArray(n)?ie.map(n,function(e){return{name:t.name,value:e.replace(Jt,"\r\n")}}):{name:t.name,value:n.replace(Jt,"\r\n")}}).get()}}),ie.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&X()||U()}:X;var Gt=0,Kt={},Zt=ie.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Kt)Kt[e](void 0,!0)}),ne.cors=!!Zt&&"withCredentials"in Zt,Zt=ne.ajax=!!Zt,Zt&&ie.ajaxTransport(function(e){if(!e.crossDomain||ne.cors){var t;return{send:function(n,r){var i,o=e.xhr(),a=++Gt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&o.setRequestHeader(i,n[i]+"");o.send(e.hasContent&&e.data||null),t=function(n,i){var s,u,l;if(t&&(i||4===o.readyState))if(delete Kt[a],t=void 0,o.onreadystatechange=ie.noop,i)4!==o.readyState&&o.abort();else{l={},s=o.status,"string"==typeof o.responseText&&(l.text=o.responseText);try{u=o.statusText}catch(c){u=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=l.text?200:404}l&&r(s,u,l,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Kt[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ie.globalEval(e),e}}}),ie.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ie.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=he.head||ie("head")[0]||he.documentElement;return{send:function(r,i){t=he.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||ie.expando+"_"+jt++;return this[e]=!0,e}}),ie.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(tn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=ie.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(tn,"$1"+i):t.jsonp!==!1&&(t.url+=(Lt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||ie.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,en.push(i)),a&&ie.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),ie.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||he;var r=de.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ie.buildFragment([e],t,i),i&&i.length&&ie(i).remove(),ie.merge([],r.childNodes))};var nn=ie.fn.load;ie.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=ie.trim(e.slice(s,e.length)),e=e.slice(0,s)),ie.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&ie.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?ie("<div>").append(ie.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,i||[e.responseText,t,e])}),this},ie.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ie.fn[t]=function(e){return this.on(t,e)}}),ie.expr.filters.animated=function(e){return ie.grep(ie.timers,function(t){return e===t.elem}).length};var rn=e.document.documentElement;ie.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=ie.css(e,"position"),d=ie(e),f={};"static"===c&&(e.style.position="relative"),s=d.offset(),o=ie.css(e,"top"),u=ie.css(e,"left"),l=("absolute"===c||"fixed"===c)&&ie.inArray("auto",[o,u])>-1,l?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),ie.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):d.css(f)}},ie.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ie.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;if(o)return t=o.documentElement,ie.contains(t,i)?(typeof i.getBoundingClientRect!==Te&&(r=i.getBoundingClientRect()),n=V(o),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ie.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ie.nodeName(e[0],"html")||(n=e.offset()),n.top+=ie.css(e[0],"borderTopWidth",!0),n.left+=ie.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ie.css(r,"marginTop",!0),left:t.left-n.left-ie.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||rn;e&&!ie.nodeName(e,"html")&&"static"===ie.css(e,"position");)e=e.offsetParent;return e||rn})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ie.fn[e]=function(r){return De(this,function(e,r,i){var o=V(e);return void 0===i?o?t in o?o[t]:o.document.documentElement[r]:e[r]:void(o?o.scrollTo(n?ie(o).scrollLeft():i,n?i:ie(o).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),ie.each(["top","left"],function(e,t){ie.cssHooks[t]=k(ne.pixelPosition,function(e,n){return n?(n=rt(e,t),tt.test(n)?ie(e).position()[t]+"px":n):void 0})}),ie.each({Height:"height",Width:"width"},function(e,t){ie.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ie.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");

return De(this,function(t,n,r){var i;return ie.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?ie.css(t,n,a):ie.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),ie.fn.size=function(){return this.length},ie.fn.andSelf=ie.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ie});var on=e.jQuery,an=e.$;return ie.noConflict=function(t){return e.$===ie&&(e.$=an),t&&e.jQuery===ie&&(e.jQuery=on),ie},typeof t===Te&&(e.jQuery=e.$=ie),ie})}).call(this),function(){t=n=window.jQuery.noConflict()}.call(this),"undefined"==typeof Package&&(Package={}),Package.jquery={$:t,jQuery:n}}();

!function(){var n=Package.meteor.Meteor,r;(function(){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={},a=0;a<n.length;a++)e[n.charAt(a)]=a;r={},r.encode=function(n){if("string"==typeof n){var e=n;n=r.newBinary(e.length);for(var a=0;a<e.length;a++){var l=e.charCodeAt(a);if(l>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");n[a]=l}}for(var u=[],i=null,o=null,c=null,s=null,a=0;a<n.length;a++)switch(a%3){case 0:i=n[a]>>2&63,o=(3&n[a])<<4;break;case 1:o|=n[a]>>4&15,c=(15&n[a])<<2;break;case 2:c|=n[a]>>6&3,s=63&n[a],u.push(t(i)),u.push(t(o)),u.push(t(c)),u.push(t(s)),i=null,o=null,c=null,s=null}return null!=i&&(u.push(t(i)),u.push(t(o)),u.push(null==c?"=":t(c)),null==s&&u.push("=")),u.join("")};var t=function(r){return n.charAt(r)},l=function(n){return"="===n?-1:e[n]};r.newBinary=function(n){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var r=[],e=0;n>e;e++)r.push(0);return r.$Uint8ArrayPolyfill=!0,r}return new Uint8Array(new ArrayBuffer(n))},r.decode=function(n){var e=Math.floor(3*n.length/4);"="==n.charAt(n.length-1)&&(e--,"="==n.charAt(n.length-2)&&e--);for(var a=r.newBinary(e),t=null,u=null,i=null,o=0,c=0;c<n.length;c++){var s=n.charAt(c),f=l(s);switch(c%4){case 0:if(0>f)throw new Error("invalid base64 string");t=f<<2;break;case 1:if(0>f)throw new Error("invalid base64 string");t|=f>>4,a[o++]=t,u=(15&f)<<4;break;case 2:f>=0&&(u|=f>>2,a[o++]=u,i=(3&f)<<6);break;case 3:f>=0&&(a[o++]=i|f)}}return a}}).call(this),"undefined"==typeof Package&&(Package={}),Package.base64={Base64:r}}();

!function(){var n=Package.meteor.Meteor,e=Package.underscore._,t=Package.base64.Base64,r,u;(function(){r={},u={};var a={};r.addType=function(n,t){if(e.has(a,n))throw new Error("Type "+n+" already present");a[n]=t};var i=function(n){return e.isNaN(n)||n===1/0||n===-(1/0)},o=[{matchJSONValue:function(n){return e.has(n,"$date")&&1===e.size(n)},matchObject:function(n){return n instanceof Date},toJSONValue:function(n){return{$date:n.getTime()}},fromJSONValue:function(n){return new Date(n.$date)}},{matchJSONValue:function(n){return e.has(n,"$InfNaN")&&1===e.size(n)},matchObject:i,toJSONValue:function(n){var t;return t=e.isNaN(n)?0:n===1/0?1:-1,{$InfNaN:t}},fromJSONValue:function(n){return n.$InfNaN/0}},{matchJSONValue:function(n){return e.has(n,"$binary")&&1===e.size(n)},matchObject:function(n){return"undefined"!=typeof Uint8Array&&n instanceof Uint8Array||n&&e.has(n,"$Uint8ArrayPolyfill")},toJSONValue:function(n){return{$binary:t.encode(n)}},fromJSONValue:function(n){return t.decode(n.$binary)}},{matchJSONValue:function(n){return e.has(n,"$escape")&&1===e.size(n)},matchObject:function(n){return e.isEmpty(n)||e.size(n)>2?!1:e.any(o,function(e){return e.matchJSONValue(n)})},toJSONValue:function(n){var t={};return e.each(n,function(n,e){t[e]=r.toJSONValue(n)}),{$escape:t}},fromJSONValue:function(n){var t={};return e.each(n.$escape,function(n,e){t[e]=r.fromJSONValue(n)}),t}},{matchJSONValue:function(n){return e.has(n,"$type")&&e.has(n,"$value")&&2===e.size(n)},matchObject:function(n){return r._isCustomType(n)},toJSONValue:function(e){var t=n._noYieldsAllowed(function(){return e.toJSONValue()});return{$type:e.typeName(),$value:t}},fromJSONValue:function(t){var r=t.$type;if(!e.has(a,r))throw new Error("Custom EJSON type "+r+" is not defined");var u=a[r];return n._noYieldsAllowed(function(){return u(t.$value)})}}];r._isCustomType=function(n){return n&&"function"==typeof n.toJSONValue&&"function"==typeof n.typeName&&e.has(a,n.typeName())},r._getTypes=function(){return a},r._getConverters=function(){return o};var f=r._adjustTypesToJSONValue=function(n){if(null===n)return null;var t=c(n);return void 0!==t?t:"object"!=typeof n?n:(e.each(n,function(e,t){if("object"==typeof e||void 0===e||i(e)){var r=c(e);return r?void(n[t]=r):void f(e)}}),n)},c=function(n){for(var e=0;e<o.length;e++){var t=o[e];if(t.matchObject(n))return t.toJSONValue(n)}return void 0};r.toJSONValue=function(n){var e=c(n);return void 0!==e?e:("object"==typeof n&&(n=r.clone(n),f(n)),n)};var l=r._adjustTypesFromJSONValue=function(n){if(null===n)return null;var t=s(n);return t!==n?t:"object"!=typeof n?n:(e.each(n,function(e,t){if("object"==typeof e){var r=s(e);if(e!==r)return void(n[t]=r);l(e)}}),n)},s=function(n){if("object"==typeof n&&null!==n&&e.size(n)<=2&&e.all(n,function(n,e){return"string"==typeof e&&"$"===e.substr(0,1)}))for(var t=0;t<o.length;t++){var r=o[t];if(r.matchJSONValue(n))return r.fromJSONValue(n)}return n};r.fromJSONValue=function(n){var e=s(n);return e===n&&"object"==typeof n?(n=r.clone(n),l(n),n):e},r.stringify=function(n,e){var t=r.toJSONValue(n);return e&&(e.canonical||e.indent)?r._canonicalStringify(t,e):JSON.stringify(t)},r.parse=function(n){if("string"!=typeof n)throw new Error("EJSON.parse argument should be a string");return r.fromJSONValue(JSON.parse(n))},r.isBinary=function(n){return!!("undefined"!=typeof Uint8Array&&n instanceof Uint8Array||n&&n.$Uint8ArrayPolyfill)},r.equals=function(n,t,u){var a,i=!(!u||!u.keyOrderSensitive);if(n===t)return!0;if(e.isNaN(n)&&e.isNaN(t))return!0;if(!n||!t)return!1;if("object"!=typeof n||"object"!=typeof t)return!1;if(n instanceof Date&&t instanceof Date)return n.valueOf()===t.valueOf();if(r.isBinary(n)&&r.isBinary(t)){if(n.length!==t.length)return!1;for(a=0;a<n.length;a++)if(n[a]!==t[a])return!1;return!0}if("function"==typeof n.equals)return n.equals(t,u);if("function"==typeof t.equals)return t.equals(n,u);if(n instanceof Array){if(!(t instanceof Array))return!1;if(n.length!==t.length)return!1;for(a=0;a<n.length;a++)if(!r.equals(n[a],t[a],u))return!1;return!0}switch(r._isCustomType(n)+r._isCustomType(t)){case 1:return!1;case 2:return r.equals(r.toJSONValue(n),r.toJSONValue(t))}var o;if(i){var f=[];return e.each(t,function(n,e){f.push(e)}),a=0,o=e.all(n,function(n,e){return a>=f.length?!1:e!==f[a]?!1:r.equals(n,t[f[a]],u)?(a++,!0):!1}),o&&a===f.length}return a=0,o=e.all(n,function(n,i){return e.has(t,i)&&r.equals(n,t[i],u)?(a++,!0):!1}),o&&e.size(t)===a},r.clone=function(n){var t;if("object"!=typeof n)return n;if(null===n)return null;if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp)return n;if(r.isBinary(n)){t=r.newBinary(n.length);for(var u=0;u<n.length;u++)t[u]=n[u];return t}if(e.isArray(n)||e.isArguments(n)){for(t=[],u=0;u<n.length;u++)t[u]=r.clone(n[u]);return t}return"function"==typeof n.clone?n.clone():r._isCustomType(n)?r.fromJSONValue(r.clone(r.toJSONValue(n)),!0):(t={},e.each(n,function(n,e){t[e]=r.clone(n)}),t)},r.newBinary=t.newBinary}).call(this),function(){function n(n){return JSON.stringify(n)}var t=function(r,u,a,i,o){var f,c,l,s,y=i,h,N=u[r];switch(typeof N){case"string":return n(N);case"number":return isFinite(N)?String(N):"null";case"boolean":return String(N);case"object":if(!N)return"null";if(y=i+a,h=[],e.isArray(N)||e.isArguments(N)){for(s=N.length,f=0;s>f;f+=1)h[f]=t(f,N,a,y,o)||"null";return l=0===h.length?"[]":y?"[\n"+y+h.join(",\n"+y)+"\n"+i+"]":"["+h.join(",")+"]"}var p=e.keys(N);return o&&(p=p.sort()),e.each(p,function(e){l=t(e,N,a,y,o),l&&h.push(n(e)+(y?": ":":")+l)}),l=0===h.length?"{}":y?"{\n"+y+h.join(",\n"+y)+"\n"+i+"}":"{"+h.join(",")+"}"}};r._canonicalStringify=function(n,r){if(r=e.extend({indent:"",canonical:!1},r),r.indent===!0)r.indent="  ";else if("number"==typeof r.indent){for(var u="",a=0;a<r.indent;a++)u+=" ";r.indent=u}return t("",{"":n},r.indent,"",r.canonical)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.ejson={EJSON:r,EJSONTest:u}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=Package.ejson.EJSON,r,a;(function(){var i=new e.EnvironmentVariable;r=function(e,t){var n=i.getOrNullIfOutsideFiber();n&&n.checking(e);var r=p(e,t);if(r){var o=new a.Error(r.message);throw r.path&&(o.message+=" in field "+r.path,o.path=r.path),o}},a={Optional:function(e){return new o(e)},OneOf:function(){return new s(t.toArray(arguments))},Any:["__any__"],Where:function(e){return new c(e)},ObjectIncluding:function(e){return new f(e)},ObjectWithValues:function(e){return new u(e)},Integer:["__integer__"],Error:e.makeErrorType("Match.Error",function(t){this.message="Match error: "+t,this.path="",this.sanitizedError=new e.Error(400,"Match failed")}),test:function(e,t){return!p(e,t)},_failIfArgumentsAreNotAllChecked:function(e,t,n,r){var a=new g(n,r),o=i.withValue(a,function(){return e.apply(t,n)});return a.throwUnlessAllArgumentsHaveBeenChecked(),o}};var o=function(e){this.pattern=e},s=function(e){if(t.isEmpty(e))throw new Error("Must provide at least one choice to Match.OneOf");this.choices=e},c=function(e){this.condition=e},f=function(e){this.pattern=e},u=function(e){this.pattern=e},h=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[void 0,"undefined"]],p=function(e,r){if(r===a.Any)return!1;for(var i=0;i<h.length;++i)if(r===h[i][0])return typeof e===h[i][1]?!1:{message:"Expected "+h[i][1]+", got "+typeof e,path:""};if(null===r)return null===e?!1:{message:"Expected null, got "+n.stringify(e),path:""};if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)return e===r?!1:{message:"Expected "+r+", got "+n.stringify(e),path:""};if(r===a.Integer)return"number"==typeof e&&(0|e)===e?!1:{message:"Expected Integer, got "+(e instanceof Object?n.stringify(e):e),path:""};if(r===Object&&(r=a.ObjectIncluding({})),r instanceof Array){if(1!==r.length)return{message:"Bad pattern: arrays must have one type element"+n.stringify(r),path:""};if(!t.isArray(e)&&!t.isArguments(e))return{message:"Expected array, got "+n.stringify(e),path:""};for(var i=0,g=e.length;g>i;i++){var l=p(e[i],r[0]);if(l)return l.path=d(i,l.path),l}return!1}if(r instanceof c){var l;try{l=r.condition(e)}catch(m){if(!(m instanceof a.Error))throw m;return{message:m.message,path:m.path}}return r.condition(e)?!1:{message:"Failed Match.Where validation",path:""}}if(r instanceof o&&(r=a.OneOf(void 0,r.pattern)),r instanceof s){for(var i=0;i<r.choices.length;++i){var l=p(e,r.choices[i]);if(!l)return!1}return{message:"Failed Match.OneOf or Match.Optional validation",path:""}}if(r instanceof Function)return e instanceof r?!1:{message:"Expected "+(r.name||"particular constructor"),path:""};var y=!1,v;if(r instanceof f&&(y=!0,r=r.pattern),r instanceof u&&(y=!0,v=[r.pattern],r={}),"object"!=typeof r)return{message:"Bad pattern: unknown pattern type",path:""};if("object"!=typeof e)return{message:"Expected object, got "+typeof e,path:""};if(null===e)return{message:"Expected object, got null",path:""};if(e.constructor!==Object)return{message:"Expected plain object",path:""};var k={},w={};t.each(r,function(e,t){e instanceof o?w[t]=e.pattern:k[t]=e});for(var b=t.keys(e),i=0,g=b.length;g>i;i++){var O=b[i],E=e[O];if(t.has(k,O)){var l=p(E,k[O]);if(l)return l.path=d(O,l.path),l;delete k[O]}else if(t.has(w,O)){var l=p(E,w[O]);if(l)return l.path=d(O,l.path),l}else{if(!y)return{message:"Unknown key",path:O};if(v){var l=p(E,v[0]);if(l)return l.path=d(O,l.path),l}}}var b=t.keys(k);return b.length?{message:"Missing key '"+b[0]+"'",path:""}:void 0},g=function(e,n){var r=this;r.args=t.clone(e),r.args.reverse(),r.description=n};t.extend(g.prototype,{checking:function(e){var n=this;n._checkingOneValue(e)||(t.isArray(e)||t.isArguments(e))&&t.each(e,t.bind(n._checkingOneValue,n))},_checkingOneValue:function(e){for(var n=this,r=0;r<n.args.length;++r)if(e===n.args[r]||t.isNaN(e)&&t.isNaN(n.args[r]))return n.args.splice(r,1),!0;return!1},throwUnlessAllArgumentsHaveBeenChecked:function(){var e=this;if(!t.isEmpty(e.args))throw new Error("Did not check() all arguments during "+e.description)}});var l=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"],d=function(e,n){return"number"==typeof e||e.match(/^[0-9]+$/)?e="["+e+"]":(!e.match(/^[a-z_$][0-9a-z_$]*$/i)||t.contains(l,e))&&(e=JSON.stringify([e])),n&&"["!==n[0]?e+"."+n:e+n}}).call(this),"undefined"==typeof Package&&(Package={}),Package.check={check:r,Match:a}}();

!function(){var t=Package.meteor.Meteor,e=Package.tracker.Tracker,r=Package.tracker.Deps,i,n,o;(function(){i={},n=function(t){return t},o=Array.prototype.slice}).call(this),function(){var t=Object.prototype.hasOwnProperty,e=function(e,r){for(var i in r)t.call(r,i)&&(e[i]=r[i]);return e};i.Visitor=function(t){e(this,t)},i.Visitor.def=function(t){e(this.prototype,t)},i.Visitor.extend=function(t){var r=this,n=function o(){i.Visitor.apply(this,arguments)};return n.prototype=new r,n.extend=r.extend,n.def=r.def,t&&e(n.prototype,t),n},i.Visitor.def({visit:function(t){if(null==t)return this.visitNull.apply(this,arguments);if("object"==typeof t){if(t.htmljsType)switch(t.htmljsType){case i.Tag.htmljsType:return this.visitTag.apply(this,arguments);case i.CharRef.htmljsType:return this.visitCharRef.apply(this,arguments);case i.Comment.htmljsType:return this.visitComment.apply(this,arguments);case i.Raw.htmljsType:return this.visitRaw.apply(this,arguments);default:throw new Error("Unknown htmljs type: "+t.htmljsType)}return i.isArray(t)?this.visitArray.apply(this,arguments):this.visitObject.apply(this,arguments)}if("string"==typeof t||"boolean"==typeof t||"number"==typeof t)return this.visitPrimitive.apply(this,arguments);if("function"==typeof t)return this.visitFunction.apply(this,arguments);throw new Error("Unexpected object in htmljs: "+t)},visitNull:function(t){},visitPrimitive:function(t){},visitArray:function(t){},visitComment:function(t){},visitCharRef:function(t){},visitRaw:function(t){},visitTag:function(t){},visitObject:function(t){throw new Error("Unexpected object in htmljs: "+t)},visitFunction:function(t){throw new Error("Unexpected function in htmljs: "+obj)}}),i.TransformingVisitor=i.Visitor.extend(),i.TransformingVisitor.def({visitNull:n,visitPrimitive:n,visitArray:function(t){for(var e=o.call(arguments),r=t,i=0;i<t.length;i++){var n=t[i];e[0]=n;var a=this.visit.apply(this,e);a!==n&&(r===t&&(r=t.slice()),r[i]=a)}return r},visitComment:n,visitCharRef:n,visitRaw:n,visitObject:n,visitFunction:n,visitTag:function(t){var e=t.children,r=o.call(arguments);r[0]=e;var n=this.visitChildren.apply(this,r),a=t.attrs;r[0]=a;var s=this.visitAttributes.apply(this,r);if(s===a&&n===e)return t;var u=i.getTag(t.tagName).apply(null,n);return u.attrs=s,u},visitChildren:function(t){return this.visitArray.apply(this,arguments)},visitAttributes:function(t){if(i.isArray(t)){for(var r=o.call(arguments),n=t,a=0;a<t.length;a++){var s=t[a];r[0]=s;var u=this.visitAttributes.apply(this,r);u!==s&&(n===t&&(n=t.slice()),n[a]=u)}return n}if(t&&i.isConstructedObject(t))throw new Error("The basic HTML.TransformingVisitor does not support foreign objects in attributes.  Define a custom visitAttributes for this case.");var l=t,f=l;if(l){var c=[null,null];c.push.apply(c,arguments);for(var h in l){var p=l[h];c[0]=h,c[1]=p;var m=this.visitAttribute.apply(this,c);m!==p&&(f===l&&(f=e({},l)),f[h]=m)}}return f},visitAttribute:function(t,e,r){var i=o.call(arguments,2);return i[0]=e,this.visit.apply(this,i)}}),i.ToTextVisitor=i.Visitor.extend(),i.ToTextVisitor.def({visitNull:function(t){return""},visitPrimitive:function(t){var e=String(t);return this.textMode===i.TEXTMODE.RCDATA?e.replace(/&/g,"&amp;").replace(/</g,"&lt;"):this.textMode===i.TEXTMODE.ATTRIBUTE?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;"):e},visitArray:function(t){for(var e=[],r=0;r<t.length;r++)e.push(this.visit(t[r]));return e.join("")},visitComment:function(t){throw new Error("Can't have a comment here")},visitCharRef:function(t){return this.textMode===i.TEXTMODE.RCDATA||this.textMode===i.TEXTMODE.ATTRIBUTE?t.html:t.str},visitRaw:function(t){return t.value},visitTag:function(t){return this.visit(this.toHTML(t))},visitObject:function(t){throw new Error("Unexpected object in htmljs in toText: "+t)},toHTML:function(t){return i.toHTML(t)}}),i.ToHTMLVisitor=i.Visitor.extend(),i.ToHTMLVisitor.def({visitNull:function(t){return""},visitPrimitive:function(t){var e=String(t);return e.replace(/&/g,"&amp;").replace(/</g,"&lt;")},visitArray:function(t){for(var e=[],r=0;r<t.length;r++)e.push(this.visit(t[r]));return e.join("")},visitComment:function(t){return"<!--"+t.sanitizedValue+"-->"},visitCharRef:function(t){return t.html},visitRaw:function(t){return t.value},visitTag:function(t){var e=[],r=t.tagName,n=t.children,o=t.attrs;if(o){o=i.flattenAttributes(o);for(var a in o)if("value"===a&&"textarea"===r)n=[o[a],n];else{var s=this.toText(o[a],i.TEXTMODE.ATTRIBUTE);e.push(" "+a+'="'+s+'"')}}var u="<"+r+e.join("")+">",l=[],f;if("textarea"===r){for(var c=0;c<n.length;c++)l.push(this.toText(n[c],i.TEXTMODE.RCDATA));f=l.join(""),"\n"===f.slice(0,1)&&(f="\n"+f)}else{for(var c=0;c<n.length;c++)l.push(this.visit(n[c]));f=l.join("")}var h=u+f;return(n.length||!i.isVoidElement(r))&&(h+="</"+r+">"),h},visitObject:function(t){throw new Error("Unexpected object in htmljs in toHTML: "+t)},toText:function(t,e){return i.toText(t,e)}})}.call(this),function(){i.Tag=function(){},i.Tag.prototype.tagName="",i.Tag.prototype.attrs=null,i.Tag.prototype.children=Object.freeze?Object.freeze([]):[],i.Tag.prototype.htmljsType=i.Tag.htmljsType=["Tag"];var t=function(t){var e=function(){var t=this instanceof i.Tag?this:new e,r=0,n=arguments.length&&arguments[0];if(n&&"object"==typeof n)if(i.isConstructedObject(n)){if(n instanceof i.Attrs){var a=n.value;1===a.length?t.attrs=a[0]:a.length>1&&(t.attrs=a),r++}}else t.attrs=n,r++;return r<arguments.length&&(t.children=o.call(arguments,r)),t};return e.prototype=new i.Tag,e.prototype.constructor=e,e.prototype.tagName=t,e},e=i.Attrs=function(){var t=this instanceof e?this:new e;return t.value=o.call(arguments),t};i.getTag=function(e){var r=i.getSymbolName(e);if(r===e)throw new Error("Use the lowercase or camelCase form of '"+e+"' here");return i[r]||(i[r]=t(e)),i[r]},i.ensureTag=function(t){i.getTag(t)},i.isTagEnsured=function(t){return i.isKnownElement(t)},i.getSymbolName=function(t){return t.toUpperCase().replace(/-/g,"_")},i.knownElementNames="a abbr acronym address applet area article aside audio b base basefont bdi bdo big blockquote body br button canvas caption center cite code col colgroup command data datagrid datalist dd del details dfn dir div dl dt em embed eventsource fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins isindex kbd keygen label legend li link main map mark menu meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr".split(" "),i.knownSVGElementNames="altGlyph altGlyphDef altGlyphItem animate animateColor animateMotion animateTransform circle clipPath color-profile cursor defs desc ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font font-face font-face-format font-face-name font-face-src font-face-uri foreignObject g glyph glyphRef hkern image line linearGradient marker mask metadata missing-glyph path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view vkern".split(" "),i.knownElementNames=i.knownElementNames.concat(i.knownSVGElementNames),i.voidElementNames="area base br col command embed hr img input keygen link meta param source track wbr".split(" ");var r={yes:!0},n=function(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=r;return e},a=n(i.voidElementNames),s=n(i.knownElementNames),u=n(i.knownSVGElementNames);i.isKnownElement=function(t){return s[t]===r},i.isKnownSVGElement=function(t){return u[t]===r},i.isVoidElement=function(t){return a[t]===r};for(var l=0;l<i.knownElementNames.length;l++)i.ensureTag(i.knownElementNames[l]);var f=i.CharRef=function(t){if(!(this instanceof f))return new f(t);if(!(t&&t.html&&t.str))throw new Error("HTML.CharRef must be constructed with ({html:..., str:...})");this.html=t.html,this.str=t.str};f.prototype.htmljsType=f.htmljsType=["CharRef"];var c=i.Comment=function(t){if(!(this instanceof c))return new c(t);if("string"!=typeof t)throw new Error("HTML.Comment must be constructed with a string");this.value=t,this.sanitizedValue=t.replace(/^-|--+|-$/g,"")};c.prototype.htmljsType=c.htmljsType=["Comment"];var h=i.Raw=function(t){if(!(this instanceof h))return new h(t);if("string"!=typeof t)throw new Error("HTML.Raw must be constructed with a string");this.value=t};h.prototype.htmljsType=h.htmljsType=["Raw"],i.isArray=function(t){return t instanceof Array},i.isConstructedObject=function(t){return t&&"object"==typeof t&&t.constructor!==Object&&"function"==typeof t.constructor&&t instanceof t.constructor},i.isNully=function(t){if(null==t)return!0;if(i.isArray(t)){for(var e=0;e<t.length;e++)if(!i.isNully(t[e]))return!1;return!0}return!1},i.isValidAttributeName=function(t){return/^[:_A-Za-z][:_A-Za-z0-9.\-]*/.test(t)},i.flattenAttributes=function(t){if(!t)return t;var e=i.isArray(t);if(e&&0===t.length)return null;for(var r={},n=0,o=e?t.length:1;o>n;n++){var a=e?t[n]:t;if("object"!=typeof a||i.isConstructedObject(a))throw new Error("Expected plain JS object as attrs, found: "+a);for(var s in a){if(!i.isValidAttributeName(s))throw new Error("Illegal HTML attribute name: "+s);var u=a[s];i.isNully(u)||(r[s]=u)}}return r},i.toHTML=function(t){return(new i.ToHTMLVisitor).visit(t)},i.TEXTMODE={STRING:1,RCDATA:2,ATTRIBUTE:3},i.toText=function(t,e){if(!e)throw new Error("textMode required for HTML.toText");if(e!==i.TEXTMODE.STRING&&e!==i.TEXTMODE.RCDATA&&e!==i.TEXTMODE.ATTRIBUTE)throw new Error("Unknown textMode: "+e);var r=new i.ToTextVisitor({textMode:e});return r.visit(t)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.htmljs={HTML:i}}();

!function(){var i=Package.meteor.Meteor,t=Package.underscore._,a=Package.ejson.EJSON,n;(function(){n=function(i,t){var a=this;a._map={},a._idStringify=i||JSON.stringify,a._idParse=t||JSON.parse},t.extend(n.prototype,{get:function(i){var t=this,a=t._idStringify(i);return t._map[a]},set:function(i,t){var a=this,n=a._idStringify(i);a._map[n]=t},remove:function(i){var t=this,a=t._idStringify(i);delete t._map[a]},has:function(i){var a=this,n=a._idStringify(i);return t.has(a._map,n)},empty:function(){var i=this;return t.isEmpty(i._map)},clear:function(){var i=this;i._map={}},forEach:function(i){for(var a=this,n=t.keys(a._map),e=0;e<n.length;e++){var r=i.call(null,a._map[n[e]],a._idParse(n[e]));if(r===!1)return}},size:function(){var i=this;return t.size(i._map)},setDefault:function(i,a){var n=this,e=n._idStringify(i);return t.has(n._map,e)?n._map[e]:(n._map[e]=a,a)},clone:function(){var i=this,t=new n(i._idStringify,i._idParse);return i.forEach(function(i,n){t.set(n,a.clone(i))}),t}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["id-map"]={IdMap:n}}();

!function(){var e=Package.meteor.Meteor,a=Package.check.check,c=Package.check.Match;"undefined"==typeof Package&&(Package={}),Package["babel-compiler"]={}}();

!function(){var e=Package.meteor.Meteor,a;"undefined"==typeof Package&&(Package={}),Package.ecmascript={ECMAScript:a}}();

!function(){var t=Package.meteor.Meteor,r;(function(){function t(){var t={},r="t";try{Object.defineProperty(t,r,{enumerable:!1,value:t});for(var e in t)if(e===r)return!1}catch(n){return!1}return t[r]===t}var e=Object.prototype.hasOwnProperty;r={sanitizeForInObject:t()?function(t){return t}:function(t){if(Array.isArray(t)){for(var r={},e=Object.keys(t),n=e.length,o=0;n>o;++o){var a=e[o];r[a]=t[a]}return r}return t},taggedTemplateLiteralLoose:function(t,r){return t.raw=r,t},classCallCheck:function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},inherits:function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);if(r){if(Object.create)t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{var n=function(){this.constructor=t};n.prototype=r.prototype,t.prototype=new n}for(var o in r)e.call(r,o)&&(t[o]=r[o])}},createClass:function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=!1;try{Object.defineProperty({},"x",{}),r=!0}catch(e){}return function(e,n,o){if(!r)throw new Error("Your browser does not support this type of class property.  For example, Internet Explorer 8 does not support getters and setters.");return n&&t(e.prototype,n),o&&t(e,o),e}}(),_extends:Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)e.call(n,o)&&(t[o]=n[o])}return t},objectWithoutProperties:function(t,r){var n={};t:for(var o in t)if(e.call(t,o)){for(var a=0;a<r.length;a++)if(r[a]===o)continue t;n[o]=t[o]}return n},objectDestructuringEmpty:function(t){if(null==t)throw new TypeError("Cannot destructure undefined")},bind:Function.prototype.bind||function(){var t=function(t){return"function"==typeof t},r=Object,e=Object.prototype.toString,n=Array.prototype.slice,o=Array.prototype.concat,a=Array.prototype.push,i=Math.max,c=function u(){};return function p(e){var u=this;if(!t(u))throw new TypeError("Function.prototype.bind called on incompatible "+u);for(var p=n.call(arguments,1),l,f=function(){if(this instanceof l){var t=u.apply(this,o.call(p,n.call(arguments)));return r(t)===t?t:this}return u.apply(e,o.call(p,n.call(arguments)))},s=i(0,u.length-p.length),y=[],b=0;s>b;b++)a.call(y,"$"+b);return l=Function("binder","return function ("+y.join(",")+"){ return binder.apply(this, arguments); }")(f),u.prototype&&(c.prototype=u.prototype,l.prototype=new c,c.prototype=null),l}}(),slice:Array.prototype.slice}}).call(this),"undefined"==typeof Package&&(Package={}),Package["babel-runtime"]={babelHelpers:r}}();

!function(){var t=Package.meteor.Meteor,n,r,e,o,i;!function(t){function n(e){if(r[e])return r[e].exports;var o=r[e]={exports:{},id:e,loaded:!1};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=t,n.c=r,n.p="",n(0)}([function(t,o,i){i(1),i(50),i(77),i(96),n=o.Symbol=i(99),r=o.Map=i(100),e=o.Set=i(108)},function(t,n,r){r(2),r(28),r(31),r(33),r(37),r(39),r(41),r(42),r(43),r(44),r(45),r(46),r(47),r(48),r(49),t.exports=r(9).Object},function(t,n,r){"use strict";var e=r(3),o=r(4),i=r(5),u=r(6),c=r(8),f=r(12),s=r(7),a=r(14),p=r(15),l=r(13),v=r(16),h=r(17),g=r(22),y=r(23),d=r(24),m=r(25),x=r(26),S=r(18),b=r(11),_=e.getDesc,w=e.setDesc,O=e.create,P=g.get,j=o.Symbol,A=o.JSON,E=A&&A.stringify,F=!1,k=v("_hidden"),M=e.isEnum,D=a("symbol-registry"),N=a("symbols"),T="function"==typeof j,C=Object.prototype,W=u&&s(function(){return 7!=O(w({},"a",{get:function(){return w(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=_(C,n);e&&delete C[n],w(t,n,r),e&&t!==C&&w(C,n,e)}:w,I=function(t){var n=N[t]=O(j.prototype);return n._k=t,u&&F&&W(C,t,{configurable:!0,set:function(n){i(this,k)&&i(this[k],t)&&(this[k][t]=!1),W(this,t,b(1,n))}}),n},R=function(t){return"symbol"==typeof t},z=function Q(t,n,r){return r&&i(N,n)?(r.enumerable?(i(t,k)&&t[k][n]&&(t[k][n]=!1),r=O(r,{enumerable:b(0,!1)})):(i(t,k)||w(t,k,b(1,{})),t[k][n]=!0),W(t,n,r)):w(t,n,r)},G=function V(t,n){x(t);for(var r=y(n=S(n)),e=0,o=r.length,i;o>e;)z(t,i=r[e++],n[i]);return t},J=function X(t,n){return void 0===n?O(t):G(O(t),n)},L=function Y(t){var n=M.call(this,t);return n||!i(this,t)||!i(N,t)||i(this,k)&&this[k][t]?n:!0},K=function Z(t,n){var r=_(t=S(t),n);return!r||!i(N,n)||i(t,k)&&t[k][n]||(r.enumerable=!0),r},B=function tt(t){for(var n=P(S(t)),r=[],e=0,o;n.length>e;)i(N,o=n[e++])||o==k||r.push(o);return r},H=function nt(t){for(var n=P(S(t)),r=[],e=0,o;n.length>e;)i(N,o=n[e++])&&r.push(N[o]);return r},q=function rt(t){for(var n=[t],r=1,e,o;arguments.length>r;)n.push(arguments[r++]);return e=n[1],"function"==typeof e&&(o=e),(o||!d(e))&&(e=function(t,n){return o&&(n=o.call(this,t,n)),R(n)?void 0:n}),n[1]=e,E.apply(A,n)},U=s(function(){var t=j();return"[null]"!=E([t])||"{}"!=E({a:t})||"{}"!=E(Object(t))});T||(j=function et(){if(R(this))throw TypeError("Symbol is not a constructor");return I(l(arguments[0]))},f(j.prototype,"toString",function ot(){return this._k}),R=function(t){return t instanceof j},e.create=J,e.isEnum=L,e.getDesc=K,e.setDesc=z,e.setDescs=G,e.getNames=g.get=B,e.getSymbols=H,u&&!r(27)&&f(C,"propertyIsEnumerable",L,!0));var $={"for":function(t){return i(D,t+="")?D[t]:D[t]=j(t)},keyFor:function it(t){return h(D,t)},useSetter:function(){F=!0},useSimple:function(){F=!1}};e.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var n=v(t);$[t]=T?n:I(n)}),F=!0,c(c.G+c.W,{Symbol:j}),c(c.S,"Symbol",$),c(c.S+c.F*!T,"Object",{create:J,defineProperty:z,defineProperties:G,getOwnPropertyDescriptor:K,getOwnPropertyNames:B,getOwnPropertySymbols:H}),A&&c(c.S+c.F*(!T||U),"JSON",{stringify:q}),p(j,"Symbol"),p(Math,"Math",!0),p(o.JSON,"JSON",!0)},function(t,n){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(t,n){var r="undefined",e=t.exports=typeof window!=r&&window.Math==Math?window:typeof self!=r&&self.Math==Math?self:Function("return this")();"number"==typeof o&&(o=e)},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){t.exports=!r(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t){try{return!!t()}catch(n){return!0}}},function(t,n,r){var e=r(4),o=r(9),i=r(10),u=r(12),c="prototype",f=function(t,n){return function(){return t.apply(n,arguments)}},s=function(t,n,r){var a,p,l,v,h=t&s.G,g=t&s.P,y=h?e:t&s.S?e[n]||(e[n]={}):(e[n]||{})[c],d=h?o:o[n]||(o[n]={});h&&(r=n);for(a in r)p=!(t&s.F)&&y&&a in y,l=(p?y:r)[a],v=t&s.B&&p?f(l,e):g&&"function"==typeof l?f(Function.call,l):l,y&&!p&&u(y,a,l),d[a]!=l&&i(d,a,v),g&&((d[c]||(d[c]={}))[a]=l)};e.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},function(t,n){var r=t.exports={version:"1.2.1"};"number"==typeof i&&(i=r)},function(t,n,r){var e=r(3),o=r(11);t.exports=r(6)?function(t,n,r){return e.setDesc(t,n,o(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var e=r(4),o=r(10),i=r(13)("src"),u="toString",c=Function[u],f=(""+c).split(u);r(9).inspectSource=function(t){return c.call(t)},(t.exports=function(t,n,r,u){"function"==typeof r&&(o(r,i,t[n]?""+t[n]:f.join(String(n))),"name"in r||(r.name=n)),t===e?t[n]=r:(u||delete t[n],o(t,n,r))})(Function.prototype,u,function s(){return"function"==typeof this&&this[i]||c.call(this)})},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(4),o="__core-js_shared__",i=e[o]||(e[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n,r){var e=r(5),o=r(10),i=r(16)("toStringTag");t.exports=function(t,n,r){t&&!e(t=r?t:t.prototype,i)&&o(t,i,n)}},function(t,n,r){var e=r(14)("wks"),o=r(4).Symbol;t.exports=function(t){return e[t]||(e[t]=o&&o[t]||(o||r(13))("Symbol."+t))}},function(t,n,r){var e=r(3),o=r(18);t.exports=function(t,n){for(var r=o(t),i=e.getKeys(r),u=i.length,c=0,f;u>c;)if(r[f=i[c++]]===n)return f}},function(t,n,r){var e=r(19),o=r(21);t.exports=function(t){return e(o(t))}},function(t,n,r){var e=r(20);t.exports=0 in Object("z")?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var e={}.toString,o=r(18),i=r(3).getNames,u="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(n){return u.slice()}};t.exports.get=function f(t){return u&&"[object Window]"==e.call(t)?c(t):i(o(t))}},function(t,n,r){var e=r(3);t.exports=function(t){var n=e.getKeys(t),r=e.getSymbols;if(r)for(var o=r(t),i=e.isEnum,u=0,c;o.length>u;)i.call(t,c=o[u++])&&n.push(c);return n}},function(t,n,r){var e=r(20);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(25);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=!1},function(t,n,r){var e=r(8);e(e.S+e.F,"Object",{assign:r(29)})},function(t,r,e){var o=e(30),i=e(19),u=e(23),c=e(5);t.exports=e(7)(function(){var t=Object.assign,r={},e={},o=n(),i="abcdefghijklmnopqrst";return r[o]=7,i.split("").forEach(function(t){e[t]=t}),7!=t({},r)[o]||Object.keys(t({},e)).join("")!=i})?function f(t,n){for(var r=o(t),e=arguments.length,f=1;e>f;)for(var s=i(arguments[f++]),a=u(s),p=a.length,l=0,v;p>l;)c(s,v=a[l++])&&(r[v]=s[v]);return r}:Object.assign},function(t,n,r){var e=r(21);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(8);e(e.S,"Object",{is:r(32)})},function(t,n){t.exports=Object.is||function r(t,n){return t===n?0!==t||1/t===1/n:t!=t&&n!=n}},function(t,n,r){var e=r(8);e(e.S,"Object",{setPrototypeOf:r(34).set})},function(t,n,r){var e=r(3).getDesc,o=r(25),i=r(26),u=function(t,n){if(i(t),!o(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,o){try{o=r(35)(Function.call,e(Object.prototype,"__proto__").set,2),o(t,[]),n=!(t instanceof Array)}catch(i){n=!0}return function c(t,r){return u(t,r),n?t.__proto__=r:o(t,r),t}}({},!1):void 0),check:u}},function(t,n,r){var e=r(36);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,o){return t.call(n,r,e,o)}}return function(){return t.apply(n,arguments)}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){"use strict";var e=r(38),o={};o[r(16)("toStringTag")]="z",o+""!="[object z]"&&r(12)(Object.prototype,"toString",function i(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(20),o=r(16)("toStringTag"),i="Arguments"==e(function(){return arguments}());t.exports=function(t){var n,r,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=(n=Object(t))[o])?r:i?e(n):"Object"==(u=e(n))&&"function"==typeof n.callee?"Arguments":u}},function(t,n,r){var e=r(25);r(40)("freeze",function(t){return function n(r){return t&&e(r)?t(r):r}})},function(t,n,r){t.exports=function(t,n){var e=r(8),o=(r(9).Object||{})[t]||Object[t],i={};i[t]=n(o),e(e.S+e.F*r(7)(function(){o(1)}),"Object",i)}},function(t,n,r){var e=r(25);r(40)("seal",function(t){return function n(r){return t&&e(r)?t(r):r}})},function(t,n,r){var e=r(25);r(40)("preventExtensions",function(t){return function n(r){return t&&e(r)?t(r):r}})},function(t,n,r){var e=r(25);r(40)("isFrozen",function(t){return function n(r){return e(r)?t?t(r):!1:!0}})},function(t,n,r){var e=r(25);r(40)("isSealed",function(t){return function n(r){return e(r)?t?t(r):!1:!0}})},function(t,n,r){var e=r(25);r(40)("isExtensible",function(t){return function n(r){return e(r)?t?t(r):!0:!1}})},function(t,n,r){var e=r(18);r(40)("getOwnPropertyDescriptor",function(t){return function n(r,o){return t(e(r),o)}})},function(t,n,r){var e=r(30);r(40)("getPrototypeOf",function(t){return function n(r){return t(e(r))}})},function(t,n,r){var e=r(30);r(40)("keys",function(t){return function n(r){return t(e(r))}})},function(t,n,r){r(40)("getOwnPropertyNames",function(){return r(22).get})},function(t,n,r){r(51),r(57),r(63),r(64),r(66),r(69),r(72),r(74),r(76),t.exports=r(9).Array},function(t,n,r){"use strict";var e=r(52)(!0);r(54)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,n=this._i,r;return n>=t.length?{value:void 0,done:!0}:(r=e(t,n),this._i+=r.length,{value:r,done:!1})})},function(t,n,r){var e=r(53),o=r(21);t.exports=function(t){return function(n,r){var i=String(o(n)),u=e(r),c=i.length,f,s;return 0>u||u>=c?t?"":void 0:(f=i.charCodeAt(u),55296>f||f>56319||u+1===c||(s=i.charCodeAt(u+1))<56320||s>57343?t?i.charAt(u):f:t?i.slice(u,u+2):(f-55296<<10)+(s-56320)+65536)}}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){"use strict";var e=r(27),o=r(8),i=r(12),u=r(10),c=r(5),f=r(16)("iterator"),s=r(55),a=!([].keys&&"next"in[].keys()),p="@@iterator",l="keys",v="values",h=function(){return this};t.exports=function(t,n,g,y,d,m,x){r(56)(g,n,y);var S=function(t){switch(t){case l:return function n(){return new g(this,t)};case v:return function r(){return new g(this,t)}}return function e(){return new g(this,t)}},b=n+" Iterator",_=t.prototype,w=_[f]||_[p]||d&&_[d],O=w||S(d),P,j;if(w){var A=r(3).getProto(O.call(new t));r(15)(A,b,!0),!e&&c(_,p)&&u(A,f,h)}if((!e||x)&&u(_,f,O),s[n]=O,s[b]=h,d)if(P={keys:m?O:S(l),values:d==v?O:S(v),entries:d!=v?O:S("entries")},x)for(j in P)j in _||i(_,j,P[j]);else o(o.P+o.F*a,n,P)}},function(t,n){t.exports={}},function(t,n,r){"use strict";var e=r(3),o={};r(10)(o,r(16)("iterator"),function(){return this}),t.exports=function(t,n,i){t.prototype=e.create(o,{next:r(11)(1,i)}),r(15)(t,n+" Iterator")}},function(t,n,r){"use strict";var e=r(35),o=r(8),i=r(30),u=r(58),c=r(59),f=r(60),s=r(61);o(o.S+o.F*!r(62)(function(t){Array.from(t)}),"Array",{from:function a(t){var n=i(t),r="function"==typeof this?this:Array,o=arguments[1],a=void 0!==o,p=0,l=s(n),v,h,g,y;if(a&&(o=e(o,arguments[2],2)),void 0==l||r==Array&&c(l))for(v=f(n.length),h=new r(v);v>p;p++)h[p]=a?o(n[p],p):n[p];else for(y=l.call(n),h=new r;!(g=y.next()).done;p++)h[p]=a?u(y,o,[g.value,p],!0):g.value;return h.length=p,h}})},function(t,n,r){var e=r(26);t.exports=function(t,n,r,o){try{return o?n(e(r)[0],r[1]):n(r)}catch(i){var u=t["return"];throw void 0!==u&&e(u.call(t)),i}}},function(t,n,r){var e=r(55),o=r(16)("iterator");t.exports=function(t){return(e.Array||Array.prototype[o])===t}},function(t,n,r){var e=r(53),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},function(t,n,r){var e=r(38),o=r(16)("iterator"),i=r(55);t.exports=r(9).getIteratorMethod=function(t){return void 0!=t?t[o]||t["@@iterator"]||i[e(t)]:void 0}},function(t,n,r){var e=r(16)("iterator"),o=!1;try{var i=[7][e]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(u){}t.exports=function(t){if(!o)return!1;var n=!1;try{var r=[7],i=r[e]();i.next=function(){n=!0},r[e]=function(){return i},t(r)}catch(u){}return n}},function(t,n,r){"use strict";var e=r(8);e(e.S+e.F*r(7)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function o(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)r[t]=arguments[t++];return r.length=n,r}})},function(t,n,r){r(65)(Array)},function(t,n,r){"use strict";var e=r(3),o=r(16)("species");t.exports=function(t){!r(6)||o in t||e.setDesc(t,o,{configurable:!0,get:function(){return this}})}},function(t,n,r){"use strict";var e=r(67),o=r(68),i=r(55),u=r(18);r(54)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,r):"values"==n?o(0,t[r]):o(0,[r,t[r]])},"values"),i.Arguments=i.Array,e("keys"),e("values"),e("entries")},function(t,n,r){var e=r(16)("unscopables");void 0==[][e]&&r(10)(Array.prototype,e,{}),t.exports=function(t){[][e][t]=!0}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){"use strict";var e=r(8);e(e.P,"Array",{copyWithin:r(70)}),r(67)("copyWithin")},function(t,n,r){"use strict";var e=r(30),o=r(71),i=r(60);t.exports=[].copyWithin||function u(t,n){var r=e(this),u=i(r.length),c=o(t,u),f=o(n,u),s=arguments[2],a=Math.min((void 0===s?u:o(s,u))-f,u-c),p=1;for(c>f&&f+a>c&&(p=-1,f+=a-1,c+=a-1);a-->0;)f in r?r[c]=r[f]:delete r[c],c+=p,f+=p;return r}},function(t,n,r){var e=r(53),o=Math.max,i=Math.min;t.exports=function(t,n){return t=e(t),0>t?o(t+n,0):i(t,n)}},function(t,n,r){var e=r(8);e(e.P,"Array",{fill:r(73)}),r(67)("fill")},function(t,n,r){"use strict";var e=r(30),o=r(71),i=r(60);t.exports=[].fill||function u(t){for(var n=e(this,!0),r=i(n.length),u=o(arguments[1],r),c=arguments[2],f=void 0===c?r:o(c,r);f>u;)n[u++]=t;return n}},function(t,n,r){"use strict";var e="find",o=r(8),i=!0,u=r(75)(5);e in[]&&Array(1)[e](function(){i=!1}),o(o.P+o.F*i,"Array",{find:function c(t){return u(this,t,arguments[1])}}),r(67)(e)},function(t,n,r){var e=r(35),o=r(25),i=r(19),u=r(30),c=r(60),f=r(24),s=r(16)("species"),a=function(t,n){var r;return f(t)&&o(r=t.constructor)&&(r=r[s],null===r&&(r=void 0)),new(void 0===r?Array:r)(n)};t.exports=function(t){var n=1==t,r=2==t,o=3==t,f=4==t,s=6==t,p=5==t||s;return function(l,v,h){for(var g=u(l),y=i(g),d=e(v,h,3),m=c(y.length),x=0,S=n?a(l,m):r?a(l,0):void 0,b,_;m>x;x++)if((p||x in y)&&(b=y[x],_=d(b,x,g),t))if(n)S[x]=_;else if(_)switch(t){case 3:return!0;case 5:return b;case 6:return x;case 2:S.push(b)}else if(f)return!1;return s?-1:o||f?f:S}}},function(t,n,r){"use strict";var e="findIndex",o=r(8),i=!0,u=r(75)(6);e in[]&&Array(1)[e](function(){i=!1}),o(o.P+o.F*i,"Array",{findIndex:function c(t){return u(this,t,arguments[1])}}),r(67)(e)},function(t,n,r){r(78),r(79),r(80),r(51),r(82),r(83),r(87),r(88),r(90),r(91),r(93),r(94),r(95),t.exports=r(9).String},function(t,n,r){var e=r(8),o=r(71),i=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function c(t){for(var n=[],r=arguments.length,e=0,u;r>e;){if(u=+arguments[e++],o(u,1114111)!==u)throw RangeError(u+" is not a valid code point");n.push(65536>u?i(u):i(((u-=65536)>>10)+55296,u%1024+56320))}return n.join("")}})},function(t,n,r){var e=r(8),o=r(18),i=r(60);e(e.S,"String",{raw:function u(t){for(var n=o(t.raw),r=i(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),e>c&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){"use strict";r(81)("trim",function(t){return function n(){return t(this,3)}})},function(t,n,r){var e=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(s,"")),2&n&&(t=t.replace(a,"")),t},o=r(8),i=r(21),u="	\n\f\r \u2028\u2029\ufeff",c="["+u+"]",f="",s=RegExp("^"+c+c+"*"),a=RegExp(c+c+"*$");t.exports=function(t,n){var i={};i[t]=n(e),o(o.P+o.F*r(7)(function(){return!!u[t]()||f[t]()!=f}),"String",i)}},function(t,n,r){"use strict";var e=r(8),o=r(52)(!1);e(e.P,"String",{codePointAt:function i(t){return o(this,t)}})},function(t,n,r){"use strict";var e=r(8),o=r(60),i=r(84),u="endsWith",c=""[u];e(e.P+e.F*r(86)(u),"String",{endsWith:function f(t){var n=i(this,t,u),r=arguments[1],e=o(n.length),f=void 0===r?e:Math.min(o(r),e),s=String(t);return c?c.call(n,s,f):n.slice(f-s.length,f)===s}})},function(t,n,r){var e=r(85),o=r(21);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(t))}},function(t,n,r){var e=r(25),o=r(20),i=r(16)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[i])?!!n:"RegExp"==o(t))}},function(t,n,r){t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[r(16)("match")]=!1,!"/./"[t](n)}catch(e){}}return!0}},function(t,n,r){"use strict";var e=r(8),o=r(84),i="includes";e(e.P+e.F*r(86)(i),"String",{includes:function u(t){return!!~o(this,t,i).indexOf(t,arguments[1])}})},function(t,n,r){var e=r(8);e(e.P,"String",{repeat:r(89)})},function(t,n,r){"use strict";var e=r(53),o=r(21);t.exports=function i(t){var n=String(o(this)),r="",i=e(t);if(0>i||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(n+=n))1&i&&(r+=n);return r}},function(t,n,r){"use strict";var e=r(8),o=r(60),i=r(84),u="startsWith",c=""[u];e(e.P+e.F*r(86)(u),"String",{startsWith:function f(t){var n=i(this,t,u),r=o(Math.min(arguments[1],n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){r(92)("match",1,function(t,n){return function r(e){"use strict";var o=t(this),i=void 0==e?void 0:e[n];return void 0!==i?i.call(e,o):new RegExp(e)[n](String(o))}})},function(t,n,r){"use strict";t.exports=function(t,n,e){var o=r(21),i=r(16)(t),u=""[t];r(7)(function(){var n={};return n[i]=function(){return 7},7!=""[t](n)})&&(r(12)(String.prototype,t,e(o,i,u)),r(10)(RegExp.prototype,i,2==n?function(t,n){return u.call(t,this,n)}:function(t){return u.call(t,this)}))}},function(t,n,r){r(92)("replace",2,function(t,n,r){return function e(o,i){"use strict";var u=t(this),c=void 0==o?void 0:o[n];return void 0!==c?c.call(o,u,i):r.call(String(u),o,i)}})},function(t,n,r){r(92)("search",1,function(t,n){return function r(e){"use strict";var o=t(this),i=void 0==e?void 0:e[n];return void 0!==i?i.call(e,o):new RegExp(e)[n](String(o))}})},function(t,n,r){r(92)("split",2,function(t,n,r){return function e(o,i){"use strict";var u=t(this),c=void 0==o?void 0:o[n];return void 0!==c?c.call(o,u,i):r.call(String(u),o,i)}})},function(t,n,r){r(97),r(98),t.exports=r(9).Function},function(t,n,r){var e=r(3).setDesc,o=r(11),i=r(5),u=Function.prototype,c=/^\s*function ([^ (]*)/,f="name";f in u||r(6)&&e(u,f,{configurable:!0,get:function(){var t=(""+this).match(c),n=t?t[1]:"";return i(this,f)||e(this,f,o(5,n)),n}})},function(t,n,r){"use strict";var e=r(3),o=r(25),i=r(16)("hasInstance"),u=Function.prototype;i in u||e.setDesc(u,i,{value:function(t){if("function"!=typeof this||!o(t))return!1;if(!o(this.prototype))return t instanceof this;for(;t=e.getProto(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){r(2),t.exports=r(9).Symbol},function(t,n,r){r(37),r(51),r(101),r(102),t.exports=r(9).Map},function(t,n,r){r(66);var e=r(4),o=r(10),i=r(55),u=r(16)("iterator"),c=e.NodeList,f=e.HTMLCollection,s=c&&c.prototype,a=f&&f.prototype,p=i.NodeList=i.HTMLCollection=i.Array;!c||u in s||o(s,u,p),!f||u in a||o(a,u,p)},function(t,n,r){"use strict";var e=r(103);r(107)("Map",function(t){return function n(){return t(this,arguments[0])}},{get:function o(t){var n=e.getEntry(this,t);return n&&n.v},set:function i(t,n){return e.def(this,0===t?0:t,n)}},e,!0)},function(t,n,r){"use strict";var e=r(3),o=r(10),i=r(35),u=r(65),c=r(104),f=r(21),s=r(105),a=r(68),p=r(13)("id"),l=r(5),v=r(25),h=Object.isExtensible||v,g=r(6),y=g?"_s":"size",d=0,m=function(t,n){if(!v(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,p)){if(!h(t))return"F";if(!n)return"E";o(t,p,++d)}return"O"+t[p]},x=function(t,n){var r=m(n),e;if("F"!==r)return t._i[r];for(e=t._f;e;e=e.n)if(e.k==n)return e};t.exports={getConstructor:function(t,n,o,u){var a=t(function(t,r){c(t,a,n),t._i=e.create(null),t._f=void 0,t._l=void 0,t[y]=0,void 0!=r&&s(r,o,t[u],t)});return r(106)(a.prototype,{clear:function p(){for(var t=this,n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[y]=0},"delete":function(t){var n=this,r=x(n,t);if(r){var e=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=e),e&&(e.p=o),n._f==r&&(n._f=e),n._l==r&&(n._l=o),n[y]--}return!!r},forEach:function l(t){for(var n=i(t,arguments[1],3),r;r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function v(t){return!!x(this,t)}}),g&&e.setDesc(a.prototype,"size",{get:function(){return f(this[y])}}),a},def:function(t,n,r){var e=x(t,n),o,i;return e?e.v=r:(t._l=e={i:i=m(n,!0),k:n,v:r,p:o=t._l,n:void 0,r:!1},t._f||(t._f=e),o&&(o.n=e),t[y]++,"F"!==i&&(t._i[i]=e)),t},getEntry:x,setStrong:function(t,n,e){r(54)(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?a(0,r.k):"values"==n?a(0,r.v):a(0,[r.k,r.v]):(t._t=void 0,a(1))},e?"entries":"values",!e,!0),u(t),u(r(9)[n])}}},function(t,n){t.exports=function(t,n,r){if(!(t instanceof n))throw TypeError(r+": use the 'new' operator!");return t}},function(t,n,r){var e=r(35),o=r(58),i=r(59),u=r(26),c=r(60),f=r(61);t.exports=function(t,n,r,s){var a=f(t),p=e(r,s,n?2:1),l=0,v,h,g;if("function"!=typeof a)throw TypeError(t+" is not iterable!");if(i(a))for(v=c(t.length);v>l;l++)n?p(u(h=t[l])[0],h[1]):p(t[l]);else for(g=a.call(t);!(h=g.next()).done;)o(g,p,h.value,n)}},function(t,n,r){var e=r(12);t.exports=function(t,n){for(var r in n)e(t,r,n[r]);return t}},function(t,n,r){"use strict";var e=r(4),o=r(8),i=r(105),u=r(104);t.exports=function(t,n,c,f,s,a){var p=e[t],l=p,v=s?"set":"add",h=l&&l.prototype,g={},y=function(t){var n=h[t];r(12)(h,t,"delete"==t?function(t){return n.call(this,0===t?0:t)}:"has"==t?function e(t){return n.call(this,0===t?0:t)}:"get"==t?function o(t){return n.call(this,0===t?0:t)}:"add"==t?function i(t){return n.call(this,0===t?0:t),this}:function u(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof l&&(a||h.forEach&&!r(7)(function(){(new l).entries().next()}))){var d=new l,m=d[v](a?{}:-0,1),x;r(62)(function(t){new l(t)})||(l=n(function(n,r){u(n,l,t);var e=new p;return void 0!=r&&i(r,s,e[v],e),e}),l.prototype=h,h.constructor=l),a||d.forEach(function(t,n){x=1/n===-(1/0)}),x&&(y("delete"),y("has"),s&&y("get")),(x||m!==d)&&y(v),a&&h.clear&&delete h.clear}else l=f.getConstructor(n,t,s,v),r(106)(l.prototype,c);return r(15)(l,t),g[t]=l,o(o.G+o.W+o.F*(l!=p),g),a||f.setStrong(l,t,s),l}},function(t,n,r){r(37),r(51),r(101),r(109),t.exports=r(9).Set},function(t,n,r){"use strict";var e=r(103);r(107)("Set",function(t){return function n(){return t(this,arguments[0])}},{add:function o(t){return e.def(this,t=0===t?0:t,t)}},e)}]),"undefined"==typeof Package&&(Package={}),Package["ecmascript-runtime"]={Symbol:n,Map:r,Set:e}}();

!function(){var t=Package.meteor.Meteor,n;(function(){!function(t){function n(o){if(e[o])return e[o].exports;var r=e[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(e,o,r){function i(t){throw t}var u=r(1),c=u.prototype.then;u.prototype.then=function(n,e){return"object"==typeof t&&"function"==typeof t.bindEnvironment?c.call(this,n&&t.bindEnvironment(n,i),e&&t.bindEnvironment(e,i)):c.call(this,n,e)},n=u},function(t,n,e){(function(n){function o(t,n){Object.keys(n).forEach(function(e){var o=n[e];"function"!=typeof o||r.call(t,e)||(t[e]=o)})}var r=Object.prototype.hasOwnProperty,i="object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this,u=i.Promise,c=e(2);"function"==typeof u?(o(u,c),o(u.prototype,c.prototype),t.exports=u):t.exports=c}).call(n,function(){return this}())},function(t,n,e){"use strict";t.exports=e(3)},function(t,n,e){"use strict";t.exports=e(4),e(6),e(7),e(8),e(9)},function(t,n,e){"use strict";function o(){}function r(t){try{return t.then}catch(n){return d=n,w}}function i(t,n){try{return t(n)}catch(e){return d=e,w}}function u(t,n,e){try{t(n,e)}catch(o){return d=o,w}}function c(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],t!==o&&y(t,this)}function f(t,n,e){return new t.constructor(function(r,i){var u=new c(o);u.then(r,i),s(t,new h(n,e,u))})}function s(t,n){for(;3===t._37;)t=t._12;return 0===t._37?void t._59.push(n):void v(function(){var e=1===t._37?n.onFulfilled:n.onRejected;if(null===e)return void(1===t._37?a(n.promise,t._12):l(n.promise,t._12));var o=i(e,t._12);o===w?l(n.promise,d):a(n.promise,o)})}function a(t,n){if(n===t)return l(t,new TypeError("A promise cannot be resolved with itself."));if(n&&("object"==typeof n||"function"==typeof n)){var e=r(n);if(e===w)return l(t,d);if(e===t.then&&n instanceof c)return t._37=3,t._12=n,void p(t);if("function"==typeof e)return void y(e.bind(n),t)}t._37=1,t._12=n,p(t)}function l(t,n){t._37=2,t._12=n,p(t)}function p(t){for(var n=0;n<t._59.length;n++)s(t,t._59[n]);t._59=null}function h(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function y(t,n){var e=!1,o=u(t,function(t){e||(e=!0,a(n,t))},function(t){e||(e=!0,l(n,t))});e||o!==w||(e=!0,l(n,d))}var v=e(5),d=null,w={};t.exports=c,c._99=o,c.prototype.then=function(t,n){if(this.constructor!==c)return f(this,t,n);var e=new c(o);return s(this,new h(t,n,e)),e}},function(t,n){(function(n){"use strict";function e(t){u.length||(f(),c=!0),u[u.length]=t}function o(){for(;s<u.length;){var t=s;if(s+=1,u[t].call(),s>a){for(var n=0,e=u.length-s;e>n;n++)u[n]=u[n+s];u.length-=s,s=0}}u.length=0,s=0,c=!1}function r(t){var n=1,e=new l(t),o=document.createTextNode("");return e.observe(o,{characterData:!0}),function r(){n=-n,o.data=n}}function i(t){return function n(){function n(){clearTimeout(e),clearInterval(o),t()}var e=setTimeout(n,0),o=setInterval(n,50)}}t.exports=e;var u=[],c=!1,f,s=0,a=1024,l=n.MutationObserver||n.WebKitMutationObserver;f="function"==typeof l?r(o):i(o),e.requestFlush=f,e.makeRequestCallFromTimer=i}).call(n,function(){return this}())},function(t,n,e){"use strict";var o=e(4);t.exports=o,o.prototype.done=function(t,n){var e=arguments.length?this.then.apply(this,arguments):this;e.then(null,function(t){setTimeout(function(){throw t},0)})}},function(t,n,e){"use strict";var o=e(4);t.exports=o,o.prototype["finally"]=function(t){return this.then(function(n){return o.resolve(t()).then(function(){return n})},function(n){return o.resolve(t()).then(function(){throw n})})}},function(t,n,e){"use strict";function o(t){var n=new r(r._99);return n._37=1,n._12=t,n}var r=e(4);t.exports=r;var i=o(!0),u=o(!1),c=o(null),f=o(void 0),s=o(0),a=o("");r.resolve=function(t){if(t instanceof r)return t;if(null===t)return c;if(void 0===t)return f;if(t===!0)return i;if(t===!1)return u;if(0===t)return s;if(""===t)return a;if("object"==typeof t||"function"==typeof t)try{var n=t.then;if("function"==typeof n)return new r(n.bind(t))}catch(e){return new r(function(t,n){n(e)})}return o(t)},r.all=function(t){var n=Array.prototype.slice.call(t);return new r(function(t,e){function o(u,c){if(c&&("object"==typeof c||"function"==typeof c)){if(c instanceof r&&c.then===r.prototype.then){for(;3===c._37;)c=c._12;return 1===c._37?o(u,c._12):(2===c._37&&e(c._12),void c.then(function(t){o(u,t)},e))}var f=c.then;if("function"==typeof f){var s=new r(f.bind(c));return void s.then(function(t){o(u,t)},e)}}n[u]=c,0===--i&&t(n)}if(0===n.length)return t([]);for(var i=n.length,u=0;u<n.length;u++)o(u,n[u])})},r.reject=function(t){return new r(function(n,e){e(t)})},r.race=function(t){return new r(function(n,e){t.forEach(function(t){r.resolve(t).then(n,e)})})},r.prototype["catch"]=function(t){return this.then(null,t)}},function(t,n,e){"use strict";var o=e(4),r=e(10);t.exports=o,o.denodeify=function(t,n){return n=n||1/0,function(){var e=this,r=Array.prototype.slice.call(arguments,0,n>0?n:0);return new o(function(n,o){r.push(function(t,e){t?o(t):n(e)});var i=t.apply(e,r);!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then||n(i)})}},o.nodeify=function(t){return function(){var n=Array.prototype.slice.call(arguments),e="function"==typeof n[n.length-1]?n.pop():null,i=this;try{return t.apply(this,arguments).nodeify(e,i)}catch(u){if(null===e||"undefined"==typeof e)return new o(function(t,n){n(u)});r(function(){e.call(i,u)})}}},o.prototype.nodeify=function(t,n){return"function"!=typeof t?this:void this.then(function(e){r(function(){t.call(n,null,e)})},function(e){r(function(){t.call(n,e)})})}},function(t,n,e){"use strict";function o(){if(f.length)throw f.shift()}function r(t){var n;n=c.length?c.pop():new i,n.task=t,u(n)}function i(){this.task=null}var u=e(5),c=[],f=[],s=u.makeRequestCallFromTimer(o);t.exports=r,i.prototype.call=function(){try{this.task.call()}catch(t){r.onerror?r.onerror(t):(f.push(t),s())}finally{this.task=null,c[c.length]=this}}}])}).call(this),"undefined"==typeof Package&&(Package={}),Package.promise={Promise:n}}();

!function(){var e=Package.meteor.Meteor,n=Package.underscore._,t=Package.ecmascript.ECMAScript,r=Package["babel-runtime"].babelHelpers,o=Package["ecmascript-runtime"].Symbol,i=Package["ecmascript-runtime"].Map,a=Package["ecmascript-runtime"].Set,c=Package.promise.Promise,u;(function(){function n(){return new a(a.Type.ALEA,{seeds:[new Date,c,d,p,Math.random()]})}if(e.isServer)var t=Npm.require("crypto");var r=function(){function e(){var e=4022871197,n=function(n){n=n.toString();for(var t=0;t<n.length;t++){e+=n.charCodeAt(t);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)};return n.version="Mash 0.9",n}return function(n){var t=0,r=0,o=0,i=1;0==n.length&&(n=[+new Date]);var a=e();t=a(" "),r=a(" "),o=a(" ");for(var c=0;c<n.length;c++)t-=a(n[c]),0>t&&(t+=1),r-=a(n[c]),0>r&&(r+=1),o-=a(n[c]),0>o&&(o+=1);a=null;var u=function(){var e=2091639*t+2.3283064365386963e-10*i;return t=r,r=o,o=e-(i=0|e)};return u.uint32=function(){return 4294967296*u()},u.fract53=function(){return u()+1.1102230246251565e-16*(2097152*u()|0)},u.version="Alea 0.9",u.args=n,u}(Array.prototype.slice.call(arguments))},o="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_",a=function(e,n){var t=this;if(t.type=e,!a.Type[e])throw new Error("Unknown random generator type: "+e);if(e===a.Type.ALEA){if(!n.seeds)throw new Error("No seeds were provided for Alea PRNG");t.alea=r.apply(null,n.seeds)}};a.Type={NODE_CRYPTO:"NODE_CRYPTO",BROWSER_CRYPTO:"BROWSER_CRYPTO",ALEA:"ALEA"},a.prototype.fraction=function(){var e=this;if(e.type===a.Type.ALEA)return e.alea();if(e.type===a.Type.NODE_CRYPTO){var n=parseInt(e.hexString(8),16);return 2.3283064365386963e-10*n}if(e.type===a.Type.BROWSER_CRYPTO){var t=new Uint32Array(1);return window.crypto.getRandomValues(t),2.3283064365386963e-10*t[0]}throw new Error("Unknown random generator type: "+e.type)},a.prototype.hexString=function(e){var n=this;if(n.type===a.Type.NODE_CRYPTO){var r=Math.ceil(e/2),o;try{o=t.randomBytes(r)}catch(i){o=t.pseudoRandomBytes(r)}var c=o.toString("hex");return c.substring(0,e)}return this._randomString(e,"0123456789abcdef")},a.prototype._randomString=function(e,n){for(var t=this,r=[],o=0;e>o;o++)r[o]=t.choice(n);return r.join("")},a.prototype.id=function(e){var n=this;return void 0===e&&(e=17),n._randomString(e,o)},a.prototype.secret=function(e){var n=this;return void 0===e&&(e=43),n._randomString(e,i)},a.prototype.choice=function(e){var n=Math.floor(this.fraction()*e.length);return"string"==typeof e?e.substr(n,1):e[n]};var c="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,d="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,p="undefined"!=typeof navigator&&navigator.userAgent||"";u=e.isServer?new a(a.Type.NODE_CRYPTO):"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?new a(a.Type.BROWSER_CRYPTO):n(),u.createWithSeeds=function(){for(var e=arguments.length,n=Array(e),t=0;e>t;t++)n[t]=arguments[t];if(0===n.length)throw new Error("No seeds were provided");return new a(a.Type.ALEA,{seeds:n})},u.insecure=n()}).call(this),function(){e.uuid=function(){for(var e="0123456789abcdef",n=[],t=0;36>t;t++)n[t]=u.choice(e);n[14]="4",n[19]=e.substr(3&parseInt(n[19],16)|8,1),n[8]=n[13]=n[18]=n[23]="-";var r=n.join("");return r}}.call(this),"undefined"==typeof Package&&(Package={}),Package.random={Random:u}}();

!function(){var t=Package.meteor.Meteor,e=Package.ejson.EJSON,r=Package["id-map"].IdMap,o=Package.random.Random,n;(function(){n={},n._looksLikeObjectID=function(t){return 24===t.length&&t.match(/^[0-9a-f]*$/)},n.ObjectID=function(t){var e=this;if(t){if(t=t.toLowerCase(),!n._looksLikeObjectID(t))throw new Error("Invalid hexadecimal string for creating an ObjectID");e._str=t}else e._str=o.hexString(24)},n.ObjectID.prototype.toString=function(){var t=this;return'ObjectID("'+t._str+'")'},n.ObjectID.prototype.equals=function(t){var e=this;return t instanceof n.ObjectID&&e.valueOf()===t.valueOf()},n.ObjectID.prototype.clone=function(){var t=this;return new n.ObjectID(t._str)},n.ObjectID.prototype.typeName=function(){return"oid"},n.ObjectID.prototype.getTimestamp=function(){var t=this;return parseInt(t._str.substr(0,8),16)},n.ObjectID.prototype.valueOf=n.ObjectID.prototype.toJSONValue=n.ObjectID.prototype.toHexString=function(){return this._str},e.addType("oid",function(t){return new n.ObjectID(t)}),n.idStringify=function(t){if(t instanceof n.ObjectID)return t.valueOf();if("string"==typeof t)return""===t?t:"-"===t.substr(0,1)||"~"===t.substr(0,1)||n._looksLikeObjectID(t)||"{"===t.substr(0,1)?"-"+t:t;if(void 0===t)return"-";if("object"==typeof t&&null!==t)throw new Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+JSON.stringify(t)},n.idParse=function(t){return""===t?t:"-"===t?void 0:"-"===t.substr(0,1)?t.substr(1):"~"===t.substr(0,1)?JSON.parse(t.substr(1)):n._looksLikeObjectID(t)?new n.ObjectID(t):t}}).call(this),"undefined"==typeof Package&&(Package={}),Package["mongo-id"]={MongoID:n}}();

!function(){var e=Package.meteor.Meteor,d=Package.underscore._,n=Package.ejson.EJSON,i;(function(){i={},i.diffQueryChanges=function(e,d,n,a,r){e?i.diffQueryOrderedChanges(d,n,a,r):i.diffQueryUnorderedChanges(d,n,a,r)},i.diffQueryUnorderedChanges=function(e,a,r,o){o=o||{};var f=o.projectionFn||n.clone;if(r.movedBefore)throw new Error("_diffQueryUnordered called with a movedBefore observer!");a.forEach(function(a,o){var c=e.get(o);if(c){if(r.changed&&!n.equals(c,a)){var t=f(a),u=f(c),h=i.makeChangedFields(t,u);d.isEmpty(h)||r.changed(o,h)}}else if(r.added){var l=f(a);delete l._id,r.added(a._id,l)}}),r.removed&&e.forEach(function(e,d){a.has(d)||r.removed(d)})},i.diffQueryOrderedChanges=function(a,r,o,f){f=f||{};var c=f.projectionFn||n.clone,t={};d.each(r,function(d){t[d._id]&&e._debug("Duplicate _id in new_results"),t[d._id]=!0});var u={};d.each(a,function(d,n){d._id in u&&e._debug("Duplicate _id in old_results"),u[d._id]=n});for(var h=[],l=0,s=r.length,g=new Array(s),_=new Array(s),v=function(e){return u[r[e]._id]},y=0;s>y;y++)if(void 0!==u[r[y]._id]){for(var m=l;m>0&&!(v(g[m-1])<v(y));)m--;_[y]=0===m?-1:g[m-1],g[m]=y,m+1>l&&(l=m+1)}for(var p=0===l?-1:g[l-1];p>=0;)h.push(p),p=_[p];h.reverse(),h.push(r.length),d.each(a,function(e){t[e._id]||o.removed&&o.removed(e._id)});var O=0;d.each(h,function(e){for(var n=r[e]?r[e]._id:null,f,t,h,l,s,g=O;e>g;g++)t=r[g],d.has(u,t._id)?(f=a[u[t._id]],l=c(t),s=c(f),h=i.makeChangedFields(l,s),d.isEmpty(h)||o.changed&&o.changed(t._id,h),o.movedBefore&&o.movedBefore(t._id,n)):(h=c(t),delete h._id,o.addedBefore&&o.addedBefore(t._id,h,n),o.added&&o.added(t._id,h));n&&(t=r[e],f=a[u[t._id]],l=c(t),s=c(f),h=i.makeChangedFields(l,s),d.isEmpty(h)||o.changed&&o.changed(t._id,h)),O=e+1})},i.diffObjects=function(e,n,i){d.each(e,function(e,a){d.has(n,a)?i.both&&i.both(a,e,n[a]):i.leftOnly&&i.leftOnly(a,e)}),i.rightOnly&&d.each(n,function(n,a){d.has(e,a)||i.rightOnly(a,n)})},i.makeChangedFields=function(e,d){var a={};return i.diffObjects(d,e,{leftOnly:function(e,d){a[e]=void 0},rightOnly:function(e,d){a[e]=d},both:function(e,d,i){n.equals(d,i)||(a[e]=i)}}),a},i.applyChanges=function(e,n){d.each(n,function(d,n){void 0===d?delete e[n]:e[n]=d})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["diff-sequence"]={DiffSequence:i}}();

!function(){var e=Package.meteor.Meteor,n=Package.tracker.Tracker,r=Package.tracker.Deps,t=Package["mongo-id"].MongoID,i=Package["diff-sequence"].DiffSequence,o=Package.underscore._,a=Package.random.Random,c,f,u,d;(function(){var e=function(){c._suppressWarnings?c._suppressWarnings--:("undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments),c._loggedWarnings++)},r=t.idStringify,i=t.idParse;c={_suppressWarnings:0,_loggedWarnings:0,observe:function(e,r){var t=null,i=null,a=[],c=n.autorun(function(){var c=e();n.nonreactive(function(){var e;if(i&&(a=o.map(t.fetch(),function(e){return{_id:e._id,item:e}}),i.stop(),i=null),c)if(c instanceof Array)e=u(a,c,r);else{if(!v(c))throw s();var n=d(a,c,r);e=n[0],i=n[1]}else e=f(a,r);p(a,e,r),t=c,a=e})});return{stop:function(){c.stop(),i&&i.stop()}}},fetch:function(e){if(e){if(e instanceof Array)return e;if(v(e))return e.fetch();throw s()}return[]}};var s=function(){return new Error("{{#each}} currently only accepts arrays, cursors or falsey values.")},v=function(e){return e&&o.isObject(e)&&o.isFunction(e.observe)&&o.isFunction(e.fetch)},p=function(e,n,t){var a=Package["diff-sequence"].DiffSequence.diffQueryOrderedChanges,c=[],f=[],u={},d={},s={},v=e.length;o.each(n,function(e,n){f.push({_id:e._id}),d[r(e._id)]=n}),o.each(e,function(e,n){c.push({_id:e._id}),u[r(e._id)]=n,s[r(e._id)]=n}),a(c,f,{addedBefore:function(e,i,a){var c=a?s[r(a)]:v;a&&o.each(s,function(e,n){e>=c&&s[n]++}),v++,s[r(e)]=c,t.addedAt(e,n[d[r(e)]].item,c,a)},movedBefore:function(e,i){if(e!==i){var a=s[r(e)],c=i?s[r(i)]:v;c>a&&c--,o.each(s,function(e,n){e>a&&c>e?s[n]--:e>=c&&a>e&&s[n]++}),s[r(e)]=c,t.movedTo(e,n[d[r(e)]].item,a,c,i)}},removed:function(n){var i=s[r(n)];o.each(s,function(e,n){e>=i&&s[n]--}),delete s[r(n)],v--,t.removedAt(n,e[u[r(n)]].item,i)}}),o.each(d,function(r,a){var c=i(a);if(o.has(u,a)){var f=n[r].item,d=e[u[a]].item;("object"==typeof f||f!==d)&&t.changedAt(c,f,d,r)}})};f=function(e,n){return[]},u=function(n,t,i){var c={},f=o.map(t,function(n,i){var f;if("string"==typeof n)f="-"+n;else if("number"==typeof n||"boolean"==typeof n||void 0===n)f=n;else{if("object"!=typeof n)throw new Error("{{#each}} doesn't support arrays with elements of type "+typeof n);f=n&&o.has(n,"_id")?n._id:i}var u=r(f);return c[u]?("object"==typeof n&&"_id"in n&&e("duplicate id "+f+" in",t),f=a.id()):c[u]=!0,{_id:f,item:n}});return f},d=function(e,n,r){var t=!0,i=[],o=n.observe({addedAt:function(e,n,o){if(t){if(null!==o)throw new Error("Expected initial data from observe in order");i.push({_id:e._id,item:e})}else r.addedAt(e._id,e,n,o)},changedAt:function(e,n,t){r.changedAt(e._id,e,n,t)},removedAt:function(e,n){r.removedAt(e._id,e,n)},movedTo:function(e,n,t,i){r.movedTo(e._id,e,n,t,i)}});return t=!1,[i,o]}}).call(this),"undefined"==typeof Package&&(Package={}),Package["observe-sequence"]={ObserveSequence:c}}();

!function(){var e=Package.meteor.Meteor,t=Package.tracker.Tracker,n=Package.tracker.Deps,r;(function(){r=function(e,n){return this instanceof r?(this.curValue=e,this.equalsFunc=n,void(this.dep=new t.Dependency)):new r(e,n)},r._isEqual=function(e,t){var n=e,r=t;return n!==r?!1:!n||"number"==typeof n||"boolean"==typeof n||"string"==typeof n},r.prototype.get=function(){return t.active&&this.dep.depend(),this.curValue},r.prototype.set=function(e){var t=this.curValue;(this.equalsFunc||r._isEqual)(t,e)||(this.curValue=e,this.dep.changed())},r.prototype.toString=function(){return"ReactiveVar{"+this.get()+"}"},r.prototype._numListeners=function(){var e=0;for(var t in this.dep._dependentsById)e++;return e}}).call(this),"undefined"==typeof Package&&(Package={}),Package["reactive-var"]={ReactiveVar:r}}();

!function(){var e=Package.meteor.Meteor,t=Package.jquery.$,n=Package.jquery.jQuery,r=Package.tracker.Tracker,a=Package.tracker.Deps,i=Package.check.check,o=Package.check.Match,s=Package.underscore._,u=Package.htmljs.HTML,l=Package["observe-sequence"].ObserveSequence,c=Package["reactive-var"].ReactiveVar,d,p,h,f,m,w;(function(){d={},d._escape=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"},t=function(t){return e[t]};return function(e){return e.replace(/[&<>"'`]/g,t)}}(),d._warn=function(e){e="Warning: "+e,"undefined"!=typeof console&&console.warn&&console.warn(e)}}).call(this),function(){var e={};d._DOMBackend=e;var t="undefined"!=typeof n?n:"undefined"!=typeof Package?Package.jquery&&Package.jquery.jQuery:null;if(!t)throw new Error("jQuery not found");e._$jq=t,e.parseHTML=function(e){return t.parseHTML(e)||[]},e.Events={delegateEvents:function(e,n,r,a){t(e).on(n,r,a)},undelegateEvents:function(e,n,r){t(e).off(n,"**",r)},bindEventCapturer:function(n,r,a,i){var o=t(n),s=function(e){e=t.event.fix(e),e.currentTarget=e.target;var r=t(e.currentTarget);r.is(o.find(a))&&i.call(n,e)};i._meteorui_wrapper=s,r=e.Events.parseEventType(r),n.addEventListener(r,s,!0)},unbindEventCapturer:function(t,n,r){n=e.Events.parseEventType(n),t.removeEventListener(n,r._meteorui_wrapper,!0)},parseEventType:function(e){var t=e.indexOf(".");return t>=0?e.slice(0,t):e}};var r=function(){},a=function(e){this.next=this,this.prev=this,this.func=e};a.prototype.linkBefore=function(e){this.prev=e.prev,this.next=e,e.prev.next=this,e.prev=this},a.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},a.prototype.go=function(){var e=this.func;e&&e()},a.prototype.stop=a.prototype.unlink,e.Teardown={_JQUERY_EVENT_NAME:"blaze_teardown_watcher",_CB_PROP:"$blaze_teardown_callbacks",onElementTeardown:function(n,i){var o=new a(i),s=e.Teardown._CB_PROP;return n[s]||(n[s]=new a,t(n).on(e.Teardown._JQUERY_EVENT_NAME,r)),o.linkBefore(n[s]),o},tearDownElement:function(e){for(var n=[],r=e.getElementsByTagName("*"),a=0;a<r.length;a++)n.push(r[a]);n.push(e),t.cleanData(n)}},t.event.special[e.Teardown._JQUERY_EVENT_NAME]={setup:function(){},teardown:function(){var t=this,n=t[e.Teardown._CB_PROP];if(n){for(var r=n.next;r!==n;)r.go(),r=r.next;n.go(),t[e.Teardown._CB_PROP]=null}}},e.findBySelector=function(e,n){return t(e,n)}}.call(this),function(){var e=Object.freeze?Object.freeze([]):[];d._DOMRange=function(n){if(!(this instanceof t))return new t(n);var r=n||e;if(!r||"number"!=typeof r.length)throw new Error("Expected array");for(var a=0;a<r.length;a++)this._memberIn(r[a]);this.members=r,this.emptyRangePlaceholder=null,this.attached=!1,this.parentElement=null,this.parentRange=null,this.attachedCallbacks=e};var t=d._DOMRange;t._USE_COMMENT_PLACEHOLDERS=function(){var e=!1,t=document.createTextNode("");try{t.someProp=!0}catch(n){e=!0}return e}(),t._insert=function(e,n,r,a){var i=e;i instanceof t?i.attach(n,r,a):a?t._moveNodeWithHooks(i,n,r):t._insertNodeWithHooks(i,n,r)},t._remove=function(e){var n=e;n instanceof t?n.detach():t._removeNodeWithHooks(n)},t._removeNodeWithHooks=function(e){e.parentNode&&(1===e.nodeType&&e.parentNode._uihooks&&e.parentNode._uihooks.removeElement?e.parentNode._uihooks.removeElement(e):e.parentNode.removeChild(e))},t._insertNodeWithHooks=function(e,t,n){n=n||null,1===e.nodeType&&t._uihooks&&t._uihooks.insertElement?t._uihooks.insertElement(e,n):t.insertBefore(e,n)},t._moveNodeWithHooks=function(e,t,n){e.parentNode===t&&(n=n||null,1===e.nodeType&&t._uihooks&&t._uihooks.moveElement?t._uihooks.moveElement(e,n):t.insertBefore(e,n))},t.forElement=function(e){if(1!==e.nodeType)throw new Error("Expected element, found: "+e);for(var t=null;e&&!t;)t=e.$blaze_range||null,t||(e=e.parentNode);return t},t.prototype.attach=function(e,n,r,a){if((r||a)&&(this.parentElement!==e||!this.attached))throw new Error("Can only move or replace an attached DOMRange, and only under the same parent element");var i=this.members;if(i.length){this.emptyRangePlaceholder=null;for(var o=0;o<i.length;o++)t._insert(i[o],e,n,r)}else{var s=t._USE_COMMENT_PLACEHOLDERS?document.createComment(""):document.createTextNode("");this.emptyRangePlaceholder=s,e.insertBefore(s,n||null)}if(this.attached=!0,this.parentElement=e,!r&&!a)for(var o=0;o<this.attachedCallbacks.length;o++){var u=this.attachedCallbacks[o];u.attached&&u.attached(this,e)}},t.prototype.setMembers=function(e){var t=e;if(!t||"number"!=typeof t.length)throw new Error("Expected array");for(var n=this.members,r=0;r<n.length;r++)this._memberOut(n[r]);for(var r=0;r<t.length;r++)this._memberIn(t[r]);if(this.attached){if(t.length||n.length){var a=this.lastNode().nextSibling,i=this.parentElement;this.detach(!0),this.members=t,this.attach(i,a,!1,!0)}}else this.members=t},t.prototype.firstNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var e=this.members[0];return e instanceof t?e.firstNode():e},t.prototype.lastNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var e=this.members[this.members.length-1];return e instanceof t?e.lastNode():e},t.prototype.detach=function(e){if(!this.attached)throw new Error("Must be attached");var n=this.parentElement,r=this.members;if(r.length)for(var a=0;a<r.length;a++)t._remove(r[a]);else{var i=this.emptyRangePlaceholder;this.parentElement.removeChild(i),this.emptyRangePlaceholder=null}if(!e){this.attached=!1,this.parentElement=null;for(var a=0;a<this.attachedCallbacks.length;a++){var o=this.attachedCallbacks[a];o.detached&&o.detached(this,n)}}},t.prototype.addMember=function(e,n,r){var a=this.members;if(!(n>=0&&n<=a.length))throw new Error("Bad index in range.addMember: "+n);if(r||this._memberIn(e),this.attached)if(0===a.length)this.setMembers([e]);else{var i;if(n===a.length)i=this.lastNode().nextSibling;else{var o=a[n];i=o instanceof t?o.firstNode():o}a.splice(n,0,e),t._insert(e,this.parentElement,i,r)}else a.splice(n,0,e)},t.prototype.removeMember=function(n,r){var a=this.members;if(!(n>=0&&n<a.length))throw new Error("Bad index in range.removeMember: "+n);if(r)a.splice(n,1);else{var i=a[n];this._memberOut(i),1===a.length?this.setMembers(e):(a.splice(n,1),this.attached&&t._remove(i))}},t.prototype.moveMember=function(e,t){var n=this.members[e];this.removeMember(e,!0),this.addMember(n,t,!0)},t.prototype.getMember=function(e){var t=this.members;if(!(e>=0&&e<t.length))throw new Error("Bad index in range.getMember: "+e);return this.members[e]},t.prototype._memberIn=function(e){e instanceof t?e.parentRange=this:1===e.nodeType&&(e.$blaze_range=this)},t._destroy=function(e,n){e instanceof t?e.view&&d._destroyView(e.view,n):n||1!==e.nodeType||e.$blaze_range&&(d._destroyNode(e),e.$blaze_range=null)},t.prototype._memberOut=t._destroy,t.prototype.destroyMembers=function(e){for(var t=this.members,n=0;n<t.length;n++)this._memberOut(t[n],e)},t.prototype.destroy=function(e){t._destroy(this,e)},t.prototype.containsElement=function(e){if(!this.attached)throw new Error("Must be attached");if(!d._elementContains(this.parentElement,e))return!1;for(;e.parentNode!==this.parentElement;)e=e.parentNode;for(var t=e.$blaze_range;t&&t!==this;)t=t.parentRange;return t===this},t.prototype.containsRange=function(e){if(!this.attached)throw new Error("Must be attached");if(!e.attached)return!1;if(e.parentElement!==this.parentElement)return this.containsElement(e.parentElement);if(e===this)return!1;for(;e&&e!==this;)e=e.parentRange;return e===this},t.prototype.onAttached=function(e){this.onAttachedDetached({attached:e})},t.prototype.onAttachedDetached=function(t){this.attachedCallbacks===e&&(this.attachedCallbacks=[]),this.attachedCallbacks.push(t)},t.prototype.$=function(e){var t=this,n=this.parentElement;if(!n)throw new Error("Can't select in removed DomRange");if(11===n.nodeType)throw new Error("Can't use $ on an offscreen range");var r=d._DOMBackend.findBySelector(e,n),a=function(e){return"number"==typeof e&&(e=this),t.containsElement(e)};if(r.filter)r=r.filter(a);else{for(var i=[],o=0;o<r.length;o++){var s=r[o];a(s)&&i.push(s)}r=i}return r},d._elementContains=function(e,t){return 1!==e.nodeType?!1:e===t?!1:e.compareDocumentPosition?16&e.compareDocumentPosition(t):(t=t.parentNode,t&&1===t.nodeType?e===t?!0:e.contains(t):!1)}}.call(this),function(){var e=d._EventSupport={},t=d._DOMBackend,n=e.eventsToDelegate={blur:1,change:1,click:1,focus:1,focusin:1,focusout:1,reset:1,submit:1},r=e.EVENT_MODE={TBD:0,BUBBLING:1,CAPTURING:2},a=1,i=function(e,i,o,u,l){this.elem=e,this.type=i,this.selector=o,this.handler=u,this.recipient=l,this.id=a++,this.mode=r.TBD,this.delegatedHandler=function(e){return function(t){return e.selector||t.currentTarget===t.target?e.handler.apply(e.recipient,arguments):void 0}}(this);var c=e.addEventListener&&!s.has(n,t.Events.parseEventType(i));c?this.capturingHandler=function(e){return function(n){if(e.mode===r.TBD){if(n.bubbles)return e.mode=r.BUBBLING,void t.Events.unbindEventCapturer(e.elem,e.type,e.capturingHandler);e.mode=r.CAPTURING,t.Events.undelegateEvents(e.elem,e.type,e.delegatedHandler)}e.delegatedHandler(n)}}(this):this.mode=r.BUBBLING};e.HandlerRec=i,i.prototype.bind=function(){this.mode!==r.BUBBLING&&t.Events.bindEventCapturer(this.elem,this.type,this.selector||"*",this.capturingHandler),this.mode!==r.CAPTURING&&t.Events.delegateEvents(this.elem,this.type,this.selector||"*",this.delegatedHandler)},i.prototype.unbind=function(){this.mode!==r.BUBBLING&&t.Events.unbindEventCapturer(this.elem,this.type,this.capturingHandler),this.mode!==r.CAPTURING&&t.Events.undelegateEvents(this.elem,this.type,this.delegatedHandler)},e.listen=function(e,t,n,r,a,o){try{e=e}finally{}var s=[];t.replace(/[^ /]+/g,function(e){s.push(e)});for(var u=[],l=0,c=s.length;c>l;l++){var d=s[l],p=e.$blaze_events;p||(p=e.$blaze_events={});var h=p[d];h||(h=p[d]={},h.handlers=[]);var f=h.handlers,m=new i(e,d,n,r,a);if(u.push(m),m.bind(),f.push(m),o)for(var w=o(a);w;w=o(w))for(var v=0,_=f.length;_>v;v++){var g=f[v];g.recipient===w&&(g.unbind(),g.bind(),f.splice(v,1),f.push(g),v--,_--)}}return{stop:function(){var t=e.$blaze_events;if(t){for(var n=0;n<u.length;n++){var r=u[n],a=t[r.type];if(a)for(var i=a.handlers,o=i.length-1;o>=0;o--)i[o]===r&&(r.unbind(),i.splice(o,1))}u.length=0}}}}}.call(this),function(){var n=!1;d._allowJavascriptUrls=function(){n=!0},d._javascriptUrlsAllowed=function(){return n},p=function(e,t){this.name=e,this.value=t},d._AttributeHandler=p,p.prototype.update=function(e,t,n){null===n?null!==t&&e.removeAttribute(this.name):e.setAttribute(this.name,n)},p.extend=function(e){var t=this,n=function r(){p.apply(this,arguments)};return n.prototype=new t,n.extend=t.extend,e&&s.extend(n.prototype,e),n};var r=p.extend({update:function(e,t,n){if(!this.getCurrentValue||!this.setValue||!this.parseValue)throw new Error("Missing methods in subclass of 'DiffingAttributeHandler'");var r=t?this.parseValue(t):{},a=n?this.parseValue(n):{},i=this.getCurrentValue(e),o=i?this.parseValue(i):{};s.each(s.keys(r),function(e){e in a||delete o[e]}),s.each(s.keys(a),function(e){o[e]=a[e]}),this.setValue(e,s.values(o).join(" "))}}),a=r.extend({getCurrentValue:function(e){return e.className},setValue:function(e,t){e.className=t},parseValue:function(e){var t={};return s.each(e.split(" "),function(e){e&&(t[e]=e)}),t}}),i=a.extend({getCurrentValue:function(e){return e.className.baseVal},setValue:function(e,t){e.setAttribute("class",t)}}),o=r.extend({getCurrentValue:function(e){return e.getAttribute("style")},setValue:function(e,t){""===t?e.removeAttribute("style"):e.setAttribute("style",t)},parseValue:function(e){for(var n={},r=/(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*(?:\'(?:\\\'|.)*?\'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+[;\s]*/g,a=r.exec(e);a;)n[" "+a[1]]=a[0].trim?a[0].trim():t.trim(a[0]),a=r.exec(e);return n}}),u=p.extend({update:function(e,t,n){var r=this.name;null==n?null!=t&&(e[r]=!1):e[r]=!0}}),l=p.extend({update:function(e,t,n){var r=this.name;n!==e[r]&&(e[r]=n)}}),c=p.extend({update:function(e,t,n){var r="http://www.w3.org/1999/xlink";null===n?null!==t&&e.removeAttributeNS(r,this.name):e.setAttributeNS(r,this.name,this.value)}}),m=function(e){return"ownerSVGElement"in e},w=function(e,t){var n={FORM:["action"],BODY:["background"],BLOCKQUOTE:["cite"],Q:["cite"],DEL:["cite"],INS:["cite"],OBJECT:["classid","codebase","data","usemap"],APPLET:["codebase"],A:["href"],AREA:["href"],LINK:["href"],BASE:["href"],IMG:["longdesc","src","usemap"],FRAME:["longdesc","src"],IFRAME:["longdesc","src"],HEAD:["profile"],SCRIPT:["src"],INPUT:["src","usemap","formaction"],BUTTON:["formaction"],BASE:["href"],MENUITEM:["icon"],HTML:["manifest"],VIDEO:["poster"]};if("itemid"===t)return!0;var r=n[e]||[];return s.contains(r,t)};if(e.isClient)var v=document.createElement("A");var _=function(t){if(e.isClient)return v.href=t,(v.protocol||"").toLowerCase();throw new Error("getUrlProtocol not implemented on the server")},g=p.prototype.update,y=p.extend({update:function(e,t,n){var r=this,a=arguments;if(d._javascriptUrlsAllowed())g.apply(r,a);else{var i="javascript:"===_(n);i?(d._warn("URLs that use the 'javascript:' protocol are not allowed in URL attribute values. Call Blaze._allowJavascriptUrls() to enable them."),g.apply(r,[e,t,null])):g.apply(r,a)}}});h=function(e,t,n){return"class"===t?m(e)?new i(t,n):new a(t,n):"style"===t?new o(t,n):"OPTION"===e.tagName&&"selected"===t||"INPUT"===e.tagName&&"checked"===t?new u(t,n):"TEXTAREA"!==e.tagName&&"INPUT"!==e.tagName||"value"!==t?"xlink:"===t.substring(0,6)?new c(t.substring(6),n):w(e.tagName,t)?new y(t,n):new p(t,n):new l(t,n)},f=function(e){this.elem=e,this.handlers={}},f.prototype.update=function(e){var t=this.elem,n=this.handlers;for(var r in n)if(!s.has(e,r)){var a=n[r],i=a.value;a.value=null,a.update(t,i,null),delete n[r]}for(var r in e){var a=null,i,o=e[r];s.has(n,r)?(a=n[r],i=a.value):null!==o&&(a=h(t,r,o),n[r]=a,i=null),i!==o&&(a.value=o,a.update(t,i,o),null===o&&delete n[r])}}}.call(this),function(){d._materializeDOM=function(t,n,r,a){var i=a||[];if(e(t,n,r,i),!a)for(;i.length;){var o=i.pop();o()}return n};var e=function(e,n,r,a){if(null!=e){switch(typeof e){case"string":case"boolean":case"number":return void n.push(document.createTextNode(String(e)));case"object":if(e.htmljsType)switch(e.htmljsType){case u.Tag.htmljsType:return void n.push(t(e,r,a));case u.CharRef.htmljsType:return void n.push(document.createTextNode(e.str));case u.Comment.htmljsType:return void n.push(document.createComment(e.sanitizedValue));case u.Raw.htmljsType:for(var i=d._DOMBackend.parseHTML(e.value),o=0;o<i.length;o++)n.push(i[o]);return}else{if(u.isArray(e)){for(var o=e.length-1;o>=0;o--)a.push(s.bind(d._materializeDOM,null,e[o],n,r,a));return}if(e instanceof d.Template&&(e=e.constructView()),e instanceof d.View)return void d._materializeView(e,r,a,n)}}throw new Error("Unexpected object in htmljs: "+e)}},t=function(e,t,a){var i=e.tagName,o;o=(u.isKnownSVGElement(i)||n(e))&&document.createElementNS?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i);var l=e.attrs,c=e.children;if("textarea"===i&&e.children.length&&!(l&&"value"in l)){if("function"==typeof l||u.isArray(l))throw new Error("Can't have reactive children of TEXTAREA node; use the 'value' attribute instead.");l=s.extend({},l||null),l.value=d._expand(c,t),c=[]}if(l){var p=new f(o),h=function(){var e=d._expandAttributes(l,t),n=u.flattenAttributes(e),r={};for(var a in n)r[a]=d._toText(n[a],t,u.TEXTMODE.STRING);p.update(r)},m;m=t?t.autorun(h,void 0,"updater"):r.nonreactive(function(){return r.autorun(function(){r._withCurrentView(t,h)})}),d._DOMBackend.Teardown.onElementTeardown(o,function v(){m.stop()})}if(c.length){var w=[];a.push(function(){for(var e=0;e<w.length;e++){var t=w[e];t instanceof d._DOMRange?t.attach(o):o.appendChild(t)}}),a.push(s.bind(d._materializeDOM,null,c,w,t,a))}return o},n=function(e){return"a"===e.tagName&&e.attrs&&void 0!==e.attrs["xlink:href"]}}.call(this),function(){var t;d._throwNextException=!1,d._reportException=function(n,r){if(d._throwNextException)throw d._throwNextException=!1,n;t||(t=function(){return"undefined"!=typeof e?e._debug:"undefined"!=typeof console&&console.log?console.log:function(){}}),t()(r||"Exception caught in template:",n.stack||n.message||n)},d._wrapCatchingExceptions=function(e,t){return"function"!=typeof e?e:function(){try{return e.apply(this,arguments)}catch(n){d._reportException(n,"Exception in "+t+":")}}}}.call(this),function(){d.View=function(e,t){return this instanceof d.View?("function"==typeof e&&(t=e,e=""),this.name=e,this._render=t,this._callbacks={created:null,rendered:null,destroyed:null},this.isCreated=!1,this._isCreatedForExpansion=!1,this.isRendered=!1,this._isAttached=!1,this.isDestroyed=!1,this._isInRender=!1,this.parentView=null,this._domrange=null,this._hasGeneratedParent=!1,this._scopeBindings={},void(this.renderCount=0)):new d.View(e,t)},d.View.prototype._render=function(){return null},d.View.prototype.onViewCreated=function(e){this._callbacks.created=this._callbacks.created||[],this._callbacks.created.push(e)},d.View.prototype._onViewRendered=function(e){this._callbacks.rendered=this._callbacks.rendered||[],this._callbacks.rendered.push(e)},d.View.prototype.onViewReady=function(e){var t=this,n=function(){r.afterFlush(function(){t.isDestroyed||d._withCurrentView(t,function(){e.call(t)})})};t._onViewRendered(function a(){t.isDestroyed||(t._domrange.attached?n():t._domrange.onAttached(n))})},d.View.prototype.onViewDestroyed=function(e){this._callbacks.destroyed=this._callbacks.destroyed||[],this._callbacks.destroyed.push(e)},d.View.prototype.removeViewDestroyedListener=function(e){var t=this._callbacks.destroyed;if(t){var n=s.lastIndexOf(t,e);-1!==n&&(t[n]=null)}},d.View.prototype.autorun=function(e,t,n){var a=this;if(!a.isCreated)throw new Error("View#autorun must be called from the created callback at the earliest");if(this._isInRender)throw new Error("Can't call View#autorun from inside render(); try calling it from the created or rendered callback");if(r.active)throw new Error("Can't call View#autorun from a Tracker Computation; try calling it from the created or rendered callback");var i=d.Template._currentTemplateInstanceFunc,o=function l(n){return d._withCurrentView(t||a,function(){return d.Template._withTemplateInstanceFunc(i,function(){return e.call(a,n)})})};o.displayName=(a.name||"anonymous")+":"+(n||"anonymous");var s=r.autorun(o),u=function(){s.stop()};return a.onViewDestroyed(u),s.onStop(function(){a.removeViewDestroyedListener(u)}),s},d.View.prototype._errorIfShouldntCallSubscribe=function(){var e=this;if(!e.isCreated)throw new Error("View#subscribe must be called from the created callback at the earliest");if(e._isInRender)throw new Error("Can't call View#subscribe from inside render(); try calling it from the created or rendered callback");if(e.isDestroyed)throw new Error("Can't call View#subscribe from inside the destroyed callback, try calling it inside created or rendered.")},d.View.prototype.subscribe=function(t,n){var r=this;n=n||{},r._errorIfShouldntCallSubscribe();var a;return a=n.connection?n.connection.subscribe.apply(n.connection,t):e.subscribe.apply(e,t),r.onViewDestroyed(function(){a.stop()}),a},d.View.prototype.firstNode=function(){if(!this._isAttached)throw new Error("View must be attached before accessing its DOM");return this._domrange.firstNode()},d.View.prototype.lastNode=function(){if(!this._isAttached)throw new Error("View must be attached before accessing its DOM");return this._domrange.lastNode()},d._fireCallbacks=function(e,t){d._withCurrentView(e,function(){r.nonreactive(function n(){for(var n=e._callbacks[t],r=0,a=n&&n.length;a>r;r++)n[r]&&n[r].call(e)})})},d._createView=function(e,t,n){if(e.isCreated)throw new Error("Can't render the same View twice");e.parentView=t||null,e.isCreated=!0,n&&(e._isCreatedForExpansion=!0),d._fireCallbacks(e,"created")};var t=function(e,t){var n=new d._DOMRange(t);e._domrange=n,n.view=e,e.isRendered=!0,d._fireCallbacks(e,"rendered");var r=null;return n.onAttached(function a(t,n){e._isAttached=!0,r=d._DOMBackend.Teardown.onElementTeardown(n,function a(){d._destroyView(e,!0)})}),e.onViewDestroyed(function(){r&&r.stop(),r=null}),n};d._materializeView=function(e,n,a,i){d._createView(e,n);var o,u;return r.nonreactive(function(){e.autorun(function l(t){e.renderCount++,e._isInRender=!0;var n=e._render();e._isInRender=!1,t.firstRun||r.nonreactive(function a(){var t=d._materializeDOM(n,[],e);d._isContentEqual(u,n)||(o.setMembers(t),d._fireCallbacks(e,"rendered"))}),u=n,r.onInvalidate(function(){o&&o.destroyMembers()})},void 0,"materialize");var n;a?(n=[],a.push(function(){o=t(e,n),n=null,i.push(o)}),a.push(s.bind(d._materializeDOM,null,u,n,e,a))):(n=d._materializeDOM(u,[],e),o=t(e,n),n=null)}),a?null:o},d._expandView=function(e,t){d._createView(e,t,!0),e._isInRender=!0;var n=d._withCurrentView(e,function(){return e._render()});e._isInRender=!1;var a=d._expand(n,e);return r.active?r.onInvalidate(function(){d._destroyView(e)}):d._destroyView(e),a},d._HTMLJSExpander=u.TransformingVisitor.extend(),d._HTMLJSExpander.def({visitObject:function(e){return e instanceof d.Template&&(e=e.constructView()),e instanceof d.View?d._expandView(e,this.parentView):u.TransformingVisitor.prototype.visitObject.call(this,e)},visitAttributes:function(e){return"function"==typeof e&&(e=d._withCurrentView(this.parentView,e)),u.TransformingVisitor.prototype.visitAttributes.call(this,e)},visitAttribute:function(e,t,n){return"function"==typeof t&&(t=d._withCurrentView(this.parentView,t)),u.TransformingVisitor.prototype.visitAttribute.call(this,e,t,n)}});var n=function(){var e=d.currentView;return e&&e._isInRender?e:null};d._expand=function(e,t){return t=t||n(),new d._HTMLJSExpander({parentView:t}).visit(e)},d._expandAttributes=function(e,t){return t=t||n(),new d._HTMLJSExpander({parentView:t}).visitAttributes(e)},d._destroyView=function(e,t){e.isDestroyed||(e.isDestroyed=!0,d._fireCallbacks(e,"destroyed"),e._domrange&&e._domrange.destroyMembers(t))},d._destroyNode=function(e){1===e.nodeType&&d._DOMBackend.Teardown.tearDownElement(e)},d._isContentEqual=function(e,t){return e instanceof u.Raw?t instanceof u.Raw&&e.value===t.value:null==e?null==t:e===t&&("number"==typeof e||"boolean"==typeof e||"string"==typeof e)},d.currentView=null,d._withCurrentView=function(e,t){var n=d.currentView;try{return d.currentView=e,t()}finally{d.currentView=n}};var a=function(e){if(null===e)throw new Error("Can't render null");if("undefined"==typeof e)throw new Error("Can't render undefined");if(!(e instanceof d.View||e instanceof d.Template||"function"==typeof e))try{(new u.Visitor).visit(e)}catch(t){throw new Error("Expected Template or View")}},i=function(e){if(a(e),e instanceof d.Template)return e.constructView();if(e instanceof d.View)return e;var t=e;return"function"!=typeof t&&(t=function(){return e}),d.View("render",t)},o=function(e){return a(e),"function"!=typeof e?function(){return e}:e};d.render=function(e,t,r,a){if(t||d._warn("Blaze.render without a parent element is deprecated. You must specify where to insert the rendered content."),r instanceof d.View&&(a=r,r=null),t&&"number"!=typeof t.nodeType)throw new Error("'parentElement' must be a DOM node");if(r&&"number"!=typeof r.nodeType)throw new Error("'nextNode' must be a DOM node");a=a||n();var o=i(e);return d._materializeView(o,a),t&&o._domrange.attach(t,r),o},d.insert=function(e,t,n){if(d._warn("Blaze.insert has been deprecated.  Specify where to insert the rendered content in the call to Blaze.render."),!(e&&e._domrange instanceof d._DOMRange))throw new Error("Expected template rendered with Blaze.render");e._domrange.attach(t,n)},d.renderWithData=function(e,t,n,r,a){return d.render(d._TemplateWith(t,o(e)),n,r,a)},d.remove=function(e){if(!(e&&e._domrange instanceof d._DOMRange))throw new Error("Expected template rendered with Blaze.render");for(;e;){if(!e.isDestroyed){var t=e._domrange;t.attached&&!t.parentRange&&t.detach(),t.destroy()}e=e._hasGeneratedParent&&e.parentView}},d.toHTML=function(e,t){return t=t||n(),u.toHTML(d._expandView(i(e),t))},d.toHTMLWithData=function(e,t,r){return r=r||n(),u.toHTML(d._expandView(d._TemplateWith(t,o(e)),r))},d._toText=function(e,t,r){if("function"==typeof e)throw new Error("Blaze._toText doesn't take a function, just HTMLjs");if(null==t||t instanceof d.View||(r=t,t=null),t=t||n(),!r)throw new Error("textMode required");if(r!==u.TEXTMODE.STRING&&r!==u.TEXTMODE.RCDATA&&r!==u.TEXTMODE.ATTRIBUTE)throw new Error("Unknown textMode: "+r);return u.toText(d._expand(e,t),r)},d.getData=function(e){var t;if(e)if(e instanceof d.View){var n=e;t="with"===n.name?n:d.getView(n,"with")}else{if("number"!=typeof e.nodeType)throw new Error("Expected DOM element or View");if(1!==e.nodeType)throw new Error("Expected DOM element");t=d.getView(e,"with")}else t=d.getView("with");return t?t.dataVar.get():null},d.getElementData=function(e){if(d._warn("Blaze.getElementData has been deprecated.  Use Blaze.getData(element) instead."),1!==e.nodeType)throw new Error("Expected DOM element");return d.getData(e)},d.getView=function(e,t){var n=t;if("string"==typeof e&&(n=e,e=null),e){if(e instanceof d.View)return d._getParentView(e,n);if("number"==typeof e.nodeType)return d._getElementView(e,n);throw new Error("Expected DOM element or View")}return d._getCurrentView(n)},d._getCurrentView=function(e){var t=d.currentView;if(!t)throw new Error("There is no current view");if(e){for(;t&&t.name!==e;)t=t.parentView;return t||null}return t},d._getParentView=function(e,t){var n=e.parentView;if(t)for(;n&&n.name!==t;)n=n.parentView;return n||null},d._getElementView=function(e,t){for(var n=d._DOMRange.forElement(e),r=null;n&&!r;)r=n.view||null,r||(n=n.parentRange?n.parentRange:d._DOMRange.forElement(n.parentElement));if(t){for(;r&&r.name!==t;)r=r.parentView;return r||null}return r},d._addEventMap=function(e,t,n){n=n||null;var r=[];if(!e._domrange)throw new Error("View must have a DOMRange");e._domrange.onAttached(function a(i,o){s.each(t,function(t,a){var u=a.split(/,\s+/);s.each(u,function(a){var s=a.split(/\s+/);if(0!==s.length){var u=s.shift(),l=s.join(" ");r.push(d._EventSupport.listen(o,u,l,function(r){if(!i.containsElement(r.currentTarget))return null;var a=n||this,o=arguments;return d._withCurrentView(e,function(){return t.apply(a,o)})},i,function(e){return e.parentRange}))}})})}),e.onViewDestroyed(function(){s.each(r,function(e){e.stop()}),r.length=0})}}.call(this),function(){d._calculateCondition=function(e){return e instanceof Array&&0===e.length&&(e=!1),!!e},d.With=function(e,t){var n=d.View("with",t);return n.dataVar=new c,n.onViewCreated(function(){"function"==typeof e?n.autorun(function(){n.dataVar.set(e())},n.parentView,"setData"):n.dataVar.set(e)}),n},d._attachBindingsToView=function(e,t){t.onViewCreated(function(){s.each(e,function(e,n){t._scopeBindings[n]=new c,"function"==typeof e?t.autorun(function(){t._scopeBindings[n].set(e())},t.parentView):t._scopeBindings[n].set(e)})})},d.Let=function(e,t){var n=d.View("let",t);return d._attachBindingsToView(e,n),n},d.If=function(e,t,n,r){var a=new c,i=d.View(r?"unless":"if",function(){return a.get()?t():n?n():null});return i.__conditionVar=a,i.onViewCreated(function(){this.autorun(function(){var t=d._calculateCondition(e());a.set(r?!t:t)},this.parentView,"condition")}),i},d.Unless=function(e,t,n){return d.If(e,t,n,!0)},d.Each=function(e,t,n){var a=d.View("each",function(){var e=this.initialSubviews;return this.initialSubviews=null,this._isCreatedForExpansion&&(this.expandedValueDep=new r.Dependency,this.expandedValueDep.depend()),e});a.initialSubviews=[],a.numItems=0,a.inElseMode=!1,a.stopHandle=null,a.contentFunc=t,a.elseFunc=n,a.argVar=new c,a.variableName=null;var i=function(e,t){void 0===t&&(t=a.numItems-1);for(var n=e;t>=n;n++){var r=a._domrange.members[n].view;r._scopeBindings["@index"].set(n)}};return a.onViewCreated(function(){a.autorun(function(){var t=e();s.isObject(t)&&s.has(t,"_sequence")&&(a.variableName=t._variable||null,t=t._sequence),a.argVar.set(t)},a.parentView,"collection"),a.stopHandle=l.observe(function(){return a.argVar.get()},{addedAt:function(e,t,n){r.nonreactive(function(){var e;e=a.variableName?d.View("item",a.contentFunc):d.With(t,a.contentFunc),a.numItems++;var r={};if(r["@index"]=n,a.variableName&&(r[a.variableName]=t),d._attachBindingsToView(r,e),a.expandedValueDep)a.expandedValueDep.changed();else if(a._domrange){a.inElseMode&&(a._domrange.removeMember(0),a.inElseMode=!1);var o=d._materializeView(e,a);a._domrange.addMember(o,n),i(n)}else a.initialSubviews.splice(n,0,e)})},removedAt:function(e,t,n){r.nonreactive(function(){a.numItems--,a.expandedValueDep?a.expandedValueDep.changed():a._domrange?(a._domrange.removeMember(n),i(n),a.elseFunc&&0===a.numItems&&(a.inElseMode=!0,a._domrange.addMember(d._materializeView(d.View("each_else",a.elseFunc),a),0))):a.initialSubviews.splice(n,1)})},changedAt:function(e,t,n,i){r.nonreactive(function(){if(a.expandedValueDep)a.expandedValueDep.changed();else{var e;e=a._domrange?a._domrange.getMember(i).view:a.initialSubviews[i],a.variableName?e._scopeBindings[a.variableName].set(t):e.dataVar.set(t)}})},movedTo:function(e,t,n,o){r.nonreactive(function(){if(a.expandedValueDep)a.expandedValueDep.changed();else if(a._domrange)a._domrange.moveMember(n,o),i(Math.min(n,o),Math.max(n,o));else{var e=a.initialSubviews,t=e[n];e.splice(n,1),e.splice(o,0,t)}})}}),a.elseFunc&&0===a.numItems&&(a.inElseMode=!0,a.initialSubviews[0]=d.View("each_else",a.elseFunc))}),a.onViewDestroyed(function(){a.stopHandle&&a.stopHandle.stop()}),a},d._TemplateWith=function(e,t){var n,r=e;"function"!=typeof e&&(r=function(){return e});var a=function(){var e=null;return n.parentView&&"InOuterTemplateScope"===n.parentView.name&&(e=n.parentView.originalParentView),e?d._withCurrentView(e,r):r()},i=function(){var e=t.call(this);return e instanceof d.Template&&(e=e.constructView()),e instanceof d.View&&(e._hasGeneratedParent=!0),e};return n=d.With(a,i),n.__isTemplateWith=!0,n},d._InOuterTemplateScope=function(e,t){var n=d.View("InOuterTemplateScope",t),r=e.parentView;return r.__isTemplateWith&&(r=r.parentView),n.onViewCreated(function(){this.originalParentView=this.parentView,this.parentView=r,this.__childDoesntStartNewLexicalScope=!0}),n},d.InOuterTemplateScope=d._InOuterTemplateScope}.call(this),function(){d._globalHelpers={},d.registerHelper=function(e,t){d._globalHelpers[e]=t};var e=function(e,t){return"function"!=typeof e?e:s.bind(e,t)},t=function(e){return"function"==typeof e?function(){var t=d.getData();return null==t&&(t={}),e.apply(t,arguments)}:e};d._OLDSTYLE_HELPER={},d._getTemplateHelper=function(e,r,a){var i=!1;if(e.__helpers.has(r)){var o=e.__helpers.get(r);if(o!==d._OLDSTYLE_HELPER)return null!=o?n(t(o),a):null;i=!0}return r in e&&(i||(e.__helpers.set(r,d._OLDSTYLE_HELPER),e._NOWARN_OLDSTYLE_HELPERS||d._warn("Assigning helper with `"+e.viewName+"."+r+" = ...` is deprecated.  Use `"+e.viewName+".helpers(...)` instead.")),null!=e[r])?n(t(e[r]),a):null};var n=function(e,t){return"function"!=typeof e?e:function(){var n=this,r=arguments;return d.Template._withTemplateInstanceFunc(t,function(){return d._wrapCatchingExceptions(e,"template helper").apply(n,r)})}};d._lexicalBindingLookup=function(e,t){var n=e,r=[];do if(s.has(n._scopeBindings,t)){var a=n._scopeBindings[t];return function(){return a.get()}}while((!n.__startsNewLexicalScope||n.parentView&&n.parentView.__childDoesntStartNewLexicalScope)&&(n=n.parentView));return null},d._getTemplate=function(e,t){return e in d.Template&&d.Template[e]instanceof d.Template?d.Template[e]:null},d._getGlobalHelper=function(e,r){return null!=d._globalHelpers[e]?n(t(d._globalHelpers[e]),r):null},d.View.prototype.lookup=function(e,t){var n=this.template,r=t&&t.template,a,i,o,u;if(this.templateInstance&&(o=s.bind(this.templateInstance,this)),
/^\./.test(e)){if(!/^(\.)+$/.test(e))throw new Error("id starting with dot must be a series of dots");return d._parentData(e.length-1,!0)}return n&&null!=(a=d._getTemplateHelper(n,e,o))?a:n&&null!=(i=d._lexicalBindingLookup(d.currentView,e))?i:r&&null!=(u=d._getTemplate(e,o))?u:null!=(a=d._getGlobalHelper(e,o))?a:function(){var t=arguments.length>0,n=d.getData(),a=n&&n[e];if(!a){if(r)throw new Error("No such template: "+e);if(t)throw new Error("No such function: "+e);if("@"===e.charAt(0)&&(null===a||void 0===a))throw new Error("Unsupported directive: "+e)}if(!n)return null;if("function"!=typeof a){if(t)throw new Error("Can't call non-function: "+a);return a}return a.apply(n,arguments)}},d._parentData=function(e,t){null==e&&(e=1);for(var n=d.getView("with"),r=0;e>r&&n;r++)n=d.getView(n,"with");return n?t?function(){return n.dataVar.get()}:n.dataVar.get():null},d.View.prototype.lookupTemplate=function(e){return this.lookup(e,{template:!0})}}.call(this),function(){d.Template=function(e,n){if(!(this instanceof d.Template))return new d.Template(e,n);if("function"==typeof e&&(n=e,e=""),"string"!=typeof e)throw new Error("viewName must be a String (or omitted)");if("function"!=typeof n)throw new Error("renderFunction must be a function");this.viewName=e,this.renderFunction=n,this.__helpers=new t,this.__eventMaps=[],this._callbacks={created:[],rendered:[],destroyed:[]}};var e=d.Template,t=function(){};t.prototype.get=function(e){return this[" "+e]},t.prototype.set=function(e,t){this[" "+e]=t},t.prototype.has=function(e){return" "+e in this},d.isTemplate=function(e){return e instanceof d.Template},e.prototype.onCreated=function(e){this._callbacks.created.push(e)},e.prototype.onRendered=function(e){this._callbacks.rendered.push(e)},e.prototype.onDestroyed=function(e){this._callbacks.destroyed.push(e)},e.prototype._getCallbacks=function(e){var t=this,n=t[e]?[t[e]]:[];return n=n.concat(t._callbacks[e])};var n=function(t,n){e._withTemplateInstanceFunc(function(){return n},function(){for(var e=0,r=t.length;r>e;e++)t[e].call(n)})};e.prototype.constructView=function(t,r){var a=this,i=d.View(a.viewName,a.renderFunction);i.template=a,i.templateContentBlock=t?new e("(contentBlock)",t):null,i.templateElseBlock=r?new e("(elseBlock)",r):null,(a.__eventMaps||"object"==typeof a.events)&&i._onViewRendered(function(){1===i.renderCount&&(a.__eventMaps.length||"object"!=typeof a.events||e.prototype.events.call(a,a.events),s.each(a.__eventMaps,function(e){d._addEventMap(i,e,i)}))}),i._templateInstance=new d.TemplateInstance(i),i.templateInstance=function(){var e=i._templateInstance;return e.data=d.getData(i),i._domrange&&!i.isDestroyed?(e.firstNode=i._domrange.firstNode(),e.lastNode=i._domrange.lastNode()):(e.firstNode=null,e.lastNode=null),e};var o=a._getCallbacks("created");i.onViewCreated(function(){n(o,i.templateInstance())});var u=a._getCallbacks("rendered");i.onViewReady(function(){n(u,i.templateInstance())});var l=a._getCallbacks("destroyed");return i.onViewDestroyed(function(){n(l,i.templateInstance())}),i},d.TemplateInstance=function(e){if(!(this instanceof d.TemplateInstance))return new d.TemplateInstance(e);if(!(e instanceof d.View))throw new Error("View required");e._templateInstance=this,this.view=e,this.data=null,this.firstNode=null,this.lastNode=null,this._allSubsReadyDep=new r.Dependency,this._allSubsReady=!1,this._subscriptionHandles={}},d.TemplateInstance.prototype.$=function(e){var t=this.view;if(!t._domrange)throw new Error("Can't use $ on template instance with no DOM");return t._domrange.$(e)},d.TemplateInstance.prototype.findAll=function(e){return Array.prototype.slice.call(this.$(e))},d.TemplateInstance.prototype.find=function(e){var t=this.$(e);return t[0]||null},d.TemplateInstance.prototype.autorun=function(e){return this.view.autorun(e)},d.TemplateInstance.prototype.subscribe=function(){var e=this,t=e._subscriptionHandles,n=s.toArray(arguments),r={};if(n.length){var a=s.last(n),i={onReady:o.Optional(Function),onError:o.Optional(Function),onStop:o.Optional(Function),connection:o.Optional(o.Any)};s.isFunction(a)?r.onReady=n.pop():a&&o.test(a,i)&&(r=n.pop())}var u,l=r.onStop;r.onStop=function(n){delete t[u.subscriptionId],e._allSubsReady||e._allSubsReadyDep.changed(),l&&l(n)};var c=r.connection,d=s.pick(r,["onReady","onError","onStop"]);return n.push(d),u=e.view.subscribe.call(e.view,n,{connection:c}),s.has(t,u.subscriptionId)||(t[u.subscriptionId]=u,e._allSubsReady&&e._allSubsReadyDep.changed()),u},d.TemplateInstance.prototype.subscriptionsReady=function(){return this._allSubsReadyDep.depend(),this._allSubsReady=s.all(this._subscriptionHandles,function(e){return e.ready()}),this._allSubsReady},e.prototype.helpers=function(e){for(var t in e)this.__helpers.set(t,e[t])},e._currentTemplateInstanceFunc=null,e._withTemplateInstanceFunc=function(t,n){if("function"!=typeof n)throw new Error("Expected function, got: "+n);var r=e._currentTemplateInstanceFunc;try{return e._currentTemplateInstanceFunc=t,n()}finally{e._currentTemplateInstanceFunc=r}},e.prototype.events=function(t){var n=this,r={};for(var a in t)r[a]=function(t,n){return function(t){var r=this,a=d.getData(t.currentTarget);null==a&&(a={});var i=Array.prototype.slice.call(arguments),o=s.bind(r.templateInstance,r);return i.splice(1,0,o()),e._withTemplateInstanceFunc(o,function(){return n.apply(a,i)})}}(a,t[a]);n.__eventMaps.push(r)},e.instance=function(){return e._currentTemplateInstanceFunc&&e._currentTemplateInstanceFunc()},e.currentData=d.getData,e.parentData=d._parentData,e.registerHelper=d.registerHelper}.call(this),function(){m=d,d.ReactiveVar=c,m._templateInstance=d.Template.instance,w={},w.registerHelper=d.registerHelper,w._escape=d._escape,w.SafeString=function(e){this.string=e},w.SafeString.prototype.toString=function(){return this.string.toString()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.blaze={Blaze:d,UI:m,Handlebars:w}}();

!function(){var a=Package.meteor.Meteor,e=Package.blaze.Blaze,c=Package.blaze.UI,g=Package.blaze.Handlebars,k=Package.htmljs.HTML,e,c,g;"undefined"==typeof Package&&(Package={}),Package.ui={Blaze:e,UI:c,Handlebars:g}}();

!function(){var e=Package.meteor.Meteor,t=Package.htmljs.HTML,n=Package.tracker.Tracker,r=Package.tracker.Deps,a=Package.blaze.Blaze,u=Package.blaze.UI,i=Package.blaze.Handlebars,c=Package["observe-sequence"].ObserveSequence,l=Package.underscore._,o;(function(){o={};var e=function(e,t){return e===t};o.include=function(t,n,r){if(!t)return null;if("function"!=typeof t){var u=t;if(!a.isTemplate(u))throw new Error("Expected template or null, found: "+u);var i=t.constructView(n,r);return i.__startsNewLexicalScope=!0,i}var c=a.ReactiveVar(null,e),i=a.View("Spacebars.include",function(){var e=c.get();if(null===e)return null;if(!a.isTemplate(e))throw new Error("Expected template or null, found: "+e);return e.constructView(n,r)});return i.__templateVar=c,i.onViewCreated(function(){this.autorun(function(){c.set(t())})}),i.__startsNewLexicalScope=!0,i},o.mustacheImpl=function(e){var t=arguments;if(t.length>1){var n=t[t.length-1];if(n instanceof o.kw){var r={};for(var a in n.hash){var u=n.hash[a];r[a]="function"==typeof u?u():u}t[t.length-1]=o.kw(r)}else n=o.kw(),t=Array.prototype.slice.call(arguments),t.push(n)}return o.call.apply(null,t)},o.mustache=function(e){var n=o.mustacheImpl.apply(null,arguments);return n instanceof o.SafeString?t.Raw(n.toString()):null==n||n===!1?null:String(n)},o.attrMustache=function(e){var n=o.mustacheImpl.apply(null,arguments);if(null==n||""===n)return null;if("object"==typeof n)return n;if("string"==typeof n&&t.isValidAttributeName(n)){var r={};return r[n]="",r}throw new Error("Expected valid attribute name, '', null, or object")},o.dataMustache=function(e){var t=o.mustacheImpl.apply(null,arguments);return t},o.makeRaw=function(e){return null==e?null:e instanceof t.Raw?e:t.Raw(e)},o.call=function(e){if("function"==typeof e){for(var t=[],n=1;n<arguments.length;n++){var r=arguments[n];t[n-1]="function"==typeof r?r():r}return e.apply(null,t)}if(arguments.length>1)throw new Error("Can't call non-function: "+e);return e},o.kw=function(e){return this instanceof o.kw?void(this.hash=e||{}):new o.kw(e)},o.SafeString=function(e){return this instanceof o.SafeString?new i.SafeString(e):new o.SafeString(e)},o.SafeString.prototype=i.SafeString.prototype,o.dot=function(e,t){if(arguments.length>2){var n=[];return n.push(o.dot(e,t)),n.push.apply(n,Array.prototype.slice.call(arguments,2)),o.dot.apply(null,n)}if("function"==typeof e&&(e=e()),!e)return e;var r=e[t];return"function"!=typeof r?r:function(){return r.apply(e,arguments)}},o.With=function(e,t,r){var u=new a.ReactiveVar,i=a.View("Spacebars_with",function(){return a.If(function(){return u.get()},function(){return a.With(function(){return u.get()},t)},r)});return i.onViewCreated(function(){this.autorun(function(){u.set(e()),n.onInvalidate(function(){u.dep.changed()})})}),i},o.TemplateWith=a._TemplateWith}).call(this),"undefined"==typeof Package&&(Package={}),Package.spacebars={Spacebars:o}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=Package.blaze.Blaze,a=Package.blaze.UI,o=Package.blaze.Handlebars,c=Package.spacebars.Spacebars,r=Package.htmljs.HTML,u;(function(){u=n.Template;var e="__proto__ name".split(" ");u.__checkName=function(n){if(n in u||t.contains(e,n)){if(u[n]instanceof u&&"body"!==n)throw new Error("There are multiple templates named '"+n+"'. Each template needs a unique name.");throw new Error("This template name is reserved: "+n)}},u.__define__=function(e,t){u.__checkName(e),u[e]=new u("Template."+e,t),u[e]._NOWARN_OLDSTYLE_HELPERS=!0},u.body=new u("body",function(){var e=this;return t.map(u.body.contentRenderFuncs,function(t){return t.apply(e)})}),u.body.contentRenderFuncs=[],u.body.view=null,u.body.addContent=function(e){u.body.contentRenderFuncs.push(e)},u.body.renderToDocument=function(){if(!u.body.view){var e=n.render(u.body,document.body);u.body.view=e}},a.body=u.body,u.__body__=u.body,u.__body__.__contentParts=u.body.contentViews,u.__body__.__instantiate=u.body.renderToDocument}).call(this),function(){u.__checkName("__dynamic"),u.__dynamic=new u("Template.__dynamic",function(){var e=this;return[n.View("lookup:checkContext",function(){return c.mustache(e.lookup("checkContext"))}),"\n  ",n.If(function(){return c.call(e.lookup("dataContextPresent"))},function(){return["\n    ",c.include(e.lookupTemplate("__dynamicWithDataContext"),function(){return n._InOuterTemplateScope(e,function(){return c.include(function(){return c.call(e.templateContentBlock)})})}),"\n  "]},function(){return["\n    \n    ",n._TemplateWith(function(){return{template:c.call(e.lookup("template")),data:c.call(e.lookup(".."))}},function(){return c.include(e.lookupTemplate("__dynamicWithDataContext"),function(){return n._InOuterTemplateScope(e,function(){return c.include(function(){return c.call(e.templateContentBlock)})})})}),"\n  "]})]}),u.__checkName("__dynamicWithDataContext"),u.__dynamicWithDataContext=new u("Template.__dynamicWithDataContext",function(){var e=this;return c.With(function(){return c.dataMustache(e.lookup("chooseTemplate"),e.lookup("template"))},function(){return["\n    \n    ",n._TemplateWith(function(){return c.call(c.dot(e.lookup(".."),"data"))},function(){return c.include(e.lookupTemplate(".."),function(){return n._InOuterTemplateScope(e,function(){return c.include(function(){return c.call(e.templateContentBlock)})})})}),"\n  "]})})}.call(this),function(){var e=n.Template;e.__dynamicWithDataContext.helpers({chooseTemplate:function(t){return n._getTemplate(t,function(){return e.instance()})}}),e.__dynamic.helpers({dataContextPresent:function(){return t.has(this,"data")},checkContext:function(){if(!t.has(this,"template"))throw new Error("Must specify name in the 'template' argument to {{> Template.dynamic}}.");t.each(this,function(e,t){if("template"!==t&&"data"!==t)throw new Error("Invalid argument to {{> Template.dynamic}}: "+t)})}})}.call(this),"undefined"==typeof Package&&(Package={}),Package.templating={Template:u}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=Package.ejson.EJSON,r;(function(){if(Package["cmather:iron-core"])throw new Error("\n\n    Sorry! The cmather:iron-{x} packages were migrated to the new package system with the wrong name, and you have duplicate copies.\n    You can see which cmather:iron-{x} packages have been installed by using this command:\n\n    > meteor list\n\n    Can you remove any installed cmather:iron-{x} packages like this:    \n\n    > meteor remove cmather:iron-core\n    > meteor remove cmather:iron-router\n    > meteor remove cmather:iron-dynamic-template\n    > meteor remove cmather:iron-dynamic-layout\n    \n    The new packages are named iron:{x}. For example:\n\n    > meteor add iron:router\n\n    Sorry for the hassle, but thank you!    \n\n  ")}).call(this),function(){r={},r.utils={},r.utils.assert=function(e,t){if(!e)throw new Error(t)},r.utils.warn=function(e,t){e||console&&console.warn&&console.warn(t)},r.utils.defaultValue=function(e,t,n){return"undefined"==typeof e[t]?(e[t]=n,n):e[t]},r.utils.inherits=function(e,o,i){r.utils.assert("undefined"!=typeof e,"Child is undefined in inherits function"),r.utils.assert("undefined"!=typeof o,"Parent is undefined in inherits function");for(var a in o)t.has(o,a)&&(e[a]=n.clone(o[a]));var s=function(){this.constructor=e};return s.prototype=o.prototype,e.prototype=new s,e.__super__=o.prototype,t.isObject(i)&&t.extend(e.prototype,i),e},r.utils.extend=function(e,n){n=n||{};var o=function(){var e;e=t.has(n,"constructor")?n.constructor:o.__super__.constructor,e.apply(this,arguments)};return r.utils.inherits(o,e,n)},r.utils.global=function(){return e.isClient?window:global}(),r.utils.namespace=function(e,t){var n=r.utils.global,o,i,a,s;r.utils.assert("string"==typeof e,"namespace must be a string"),o=e.split("."),a=o.pop(),s=n;for(var u=0;u<o.length;u++)i=o[u],s=s[i]=s[i]||{};return 2===arguments.length?(s[a]=t,t):s[a]},r.utils.resolve=function(e){var t=r.utils.global,n,o;if("string"==typeof e){n=e.split("."),o=t;for(var i=0;i<n.length;i++)if(o=o[n[i]],!o)return void 0}else o=e;return o},r.utils.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1,e.length)},r.utils.classCase=function(e){var n=/_|-|\.|\//;return e?t.map(e.split(n),function(e){return r.utils.capitalize(e)}).join(""):""},r.utils.camelCase=function(e){var t=r.utils.classCase(e);return t=t.charAt(0).toLowerCase()+t.slice(1,t.length)},r.utils.notifyDeprecated=function(e){var n,r,o,i,a="[:where] ':name' is deprecated. Please use ':instead' instead.";t.isObject(e)?(n=e.name,r=e.instead,o=e.message||a,i=e.where||"IronRouter"):(o=e,n="",r="",i=""),"undefined"!=typeof console&&console.warn&&console.warn("<deprecated> "+o.replace(":name",n).replace(":instead",r).replace(":where",i)+" "+(new Error).stack)},r.utils.withDeprecatedNotice=function(e,t,n){return function(){return Utils.notifyDeprecated(e),t&&t.apply(n||this,arguments)}},Function.prototype.deprecate=function(e){var t=this;return r.utils.withDeprecatedNotice(e,t)},r.utils.debug=function(e){return r.utils.assert("string"==typeof e,"debug requires a package name"),function n(){if(console&&console.log&&r.debug===!0){var n=t.toArray(arguments).join(" ");console.log("%c<"+e+"> %c"+n,"color: #999;","color: #000;")}}},r.utils.get=function(e){for(var t=1;t<arguments.length;t++){if(!(e&&arguments[t]in e))return void 0;e=e[arguments[t]]}return e},r.utils.global.Iron=r}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:core"]={Iron:r}}();

!function(){var e=Package.meteor.Meteor,t=Package.ui.Blaze,n=Package.ui.UI,a=Package.ui.Handlebars,r=Package.underscore._,i=Package.jquery.$,o=Package.jquery.jQuery,s=Package.tracker.Tracker,u=Package.tracker.Deps,c=Package["reactive-var"].ReactiveVar,l=Package.templating.Template,p=Package.random.Random,h=Package["iron:core"].Iron,d=Package.htmljs.HTML,m=Package.spacebars.Spacebars,f;(function(){if(Package["cmather:iron-dynamic-template"])throw new Error("\n\n    Sorry! The cmather:iron-{x} packages were migrated to the new package system with the wrong name, and you have duplicate copies.\n    You can see which cmather:iron-{x} packages have been installed by using this command:\n\n    > meteor list\n\n    Can you remove any installed cmather:iron-{x} packages like this:    \n\n    > meteor remove cmather:iron-core\n    > meteor remove cmather:iron-router\n    > meteor remove cmather:iron-dynamic-template\n    > meteor remove cmather:iron-dynamic-layout\n    \n    The new packages are named iron:{x}. For example:\n\n    > meteor add iron:router\n\n    Sorry for the hassle, but thank you!    \n\n  ")}).call(this),function(){l.__checkName("__DynamicTemplateError__"),l.__DynamicTemplateError__=new l("Template.__DynamicTemplateError__",function(){var e=this;return d.DIV({style:"margin: 0 auto; color: red;"},"\n    ",t.View("lookup:msg",function(){return m.mustache(e.lookup("msg"))}),"\n  ")})}.call(this),function(){var e=h.utils.debug("iron:dynamic-template"),a=h.utils.assert,o=h.utils.get,d=h.utils.camelCase,m=function(e){return Object.prototype.toString.call(e)};f=function(e){this._id=p.id(),this.options=e=e||{},this._template=e.template,this._defaultTemplate=e.defaultTemplate,this._content=e.content,this._data=e.data,this._templateDep=new s.Dependency,this._dataDep=new s.Dependency,this._lookupHostDep=new s.Dependency,this._lookupHostValue=null,this._hooks={},this._eventMap=null,this._eventHandles=null,this._eventThisArg=null,this.name=e.name||this.constructor.prototype.name||"DynamicTemplate",this.isCreated=!1,this.isDestroyed=!1},f.prototype.template=function(e){if(1===arguments.length&&e!==this._template)return this._template=e,void this._templateDep.changed();if(!(arguments.length>0))return this._templateDep.depend(),this._template?"function"==typeof this._template?this._template():this._template:this._defaultTemplate?"function"==typeof this._defaultTemplate?this._defaultTemplate():this._defaultTemplate:void 0},f.prototype.defaultTemplate=function(e){return 1!==arguments.length?this._defaultTemplate:void(this._defaultTemplate=e)},f.prototype.clear=function(){this._template=void 0,this._data=void 0,this._templateDep.changed()},f.prototype.data=function(e){return 1===arguments.length&&e!==this._data?(this._data=e,void this._dataDep.changed()):(this._dataDep.depend(),"function"==typeof this._data?this._data():this._data)},f.prototype.create=function(e){var n=this;if(this.isCreated)throw new Error("DynamicTemplate view is already created");this.isCreated=!0,this.isDestroyed=!1;var a=c(null),i=t.View("DynamicTemplate",function(){var e=this,r=a.get();return t.With(function(){var t=n.data();return"undefined"!=typeof t?t:f.getParentDataContext(e)},function(){return n.renderView(r)})});return i.onViewCreated(function(){this.autorun(function(){a.set(n.template())})}),r.each(["onViewCreated","onViewReady","_onViewRendered","onViewDestroyed"],function(e){i[e](function(){n._runHooks(e,this)})}),i._onViewRendered(function(){n.isInserted=!0,1===i.renderCount&&n._attachEvents()}),i.onViewDestroyed(function(){n._detachEvents()}),i._templateInstance=new t.TemplateInstance(i),i.templateInstance=function(){var e=i._templateInstance;return e.data=t.getData(i),i._domrange&&!i.isDestroyed?(e.firstNode=i._domrange.firstNode(),e.lastNode=i._domrange.lastNode()):(e.firstNode=null,e.lastNode=null),e},this.view=i,i.__dynamicTemplate__=this,i.name=this.name,i},f.prototype.renderView=function(e){var n=this,a=null;return"string"==typeof e?(a=l[e],a||(a=l[d(e)]),a||(a=t.With({msg:"Couldn't find a template named "+JSON.stringify(e)+" or "+JSON.stringify(d(e))+". Are you sure you defined it?"},function(){return l.__DynamicTemplateError__}))):"[object Object]"===m(e)?a=e:"undefined"!=typeof n._content&&(a=n._content),a},f.prototype.destroy=function(){this.isCreated&&(t.remove(this.view),this.view=null,this.isDestroyed=!0,this.isCreated=!1)},r.each(["onViewCreated","onViewReady","_onViewRendered","onViewDestroyed"],function(e){f.prototype[e]=function(t){var n=this._hooks[e]=this._hooks[e]||[];return n.push(t),this}}),f.prototype._runHooks=function(e,t){for(var n=this._hooks[e]||[],a,r=0;r<n.length;r++)a=n[r],a.call(t,this)},f.prototype.events=function(e,n){var a=this;this._detachEvents(),this._eventThisArg=n;var r=this._eventMap={};for(var i in e)r[i]=function(e,r){return function(e){var i=t.getData(e.currentTarget);null==i&&(i={});var o=a.view.templateInstance();return r.call(n||this,e,o,i)}}(i,e[i]);this._attachEvents()},f.prototype._attachEvents=function(){var e=this,n=e._eventThisArg,a=e._eventMap,i=e.view,o=e._eventHandles;if(i){var s=i._domrange;if(!s)throw new Error("no domrange");var u=function(n,s){r.each(a,function(a,u){var c=u.split(/,\s+/);r.each(c,function(r){var u=r.split(/\s+/);if(0!==u.length){var c=u.shift(),l=u.join(" ");o.push(t._EventSupport.listen(s,c,l,function(r){if(!n.containsElement(r.currentTarget))return null;var o=e._eventThisArg||this,s=arguments;return t._withCurrentView(i,function(){return a.apply(o,s)})},n,function(e){return e.parentRange}))}})})};s.attached?u(s,s.parentElement):s.onAttached(u)}},f.prototype._detachEvents=function(){r.each(this._eventHandles,function(e){e.stop()}),this._eventHandles=[]};var _=function(e,n,a,i){r.each(a,function(a,o){var s=o.split(/,\s+/);r.each(s,function(r){var o=r.split(/\s+/);if(0!==o.length){var s=o.shift(),u=o.join(" ");handles.push(t._EventSupport.listen(n,s,u,function(n){if(!e.containsElement(n.currentTarget))return null;var r=i||this,o=arguments;return t._withCurrentView(view,function(){return a.apply(r,o)})},e,function(e){return e.parentRange}))}})})};f.prototype.insert=function(e){if(e=e||{},!this.isInserted){this.isInserted=!0;var n=e.el||document.body,a=i(n);if(0===a.length)throw new Error("No element to insert layout into. Is your element defined? Try a Meteor.startup callback.");return this.view||this.create(e),t.render(this.view,a[0],e.nextNode,e.parentView),this}},f.prototype._getLookupHost=function(){return this._lookupHostValue},f.prototype._setLookupHost=function(e){var t=this;return t._lookupHostValue!==e&&(t._lookupHostValue=e,u.afterFlush(function(){t._lookupHostDep.changed()})),this},f.getParentDataContext=function(e){return f.getDataContext(e&&e.parentView)},f.getDataContext=function(e){for(;e;){if("with"===e.name&&!e.__isTemplateWith)return e.dataVar.get();e=e.parentView}return null},f.getInclusionArguments=function(e){var t=e&&e.parentView;return t&&t.__isTemplateWith?t.dataVar.get():null},f.args=function(e){return function(t){var n=f.getInclusionArguments(e);return n?t?n[t]:n:null}},f.extend=function(e){return h.utils.extend(this,e)},f.findFirstLookupHost=function(e){var n,r;for(a(e instanceof t.View,"view must be a Blaze.View");e;)if(e.__dynamicTemplate__){var n=e.__dynamicTemplate__._getLookupHost();if(n)return n}else e=e.parentView;return void 0},f.findLookupHostWithProperty=function(e,n){var r,i;for(a(e instanceof t.View,"view must be a Blaze.View");e;){if(e.__dynamicTemplate__){var r=e.__dynamicTemplate__._getLookupHost();if(r&&o(r,n))return r}e=e.parentView}return void 0},f.findLookupHostWithHelper=function(e,n){var r,i;for(a(e instanceof t.View,"view must be a Blaze.View");e;){if(e.__dynamicTemplate__){var r=e.__dynamicTemplate__._getLookupHost();if(r&&o(r,"constructor","_helpers",n))return r}e=e.parentView}return void 0},"undefined"!=typeof l&&n.registerHelper("DynamicTemplate",new l("DynamicTemplateHelper",function(){var e=f.args(this);return new f({data:function(){return e("data")},template:function(){return e("template")},content:this.templateContentBlock}).create()})),h.DynamicTemplate=f}.call(this),function(){var e=h.utils.assert,n=h.utils.get,a=t.View.prototype.lookup;t.View.prototype.lookup=function(e){var r;return r=f.findLookupHostWithHelper(t.getView(),e),r?function i(){var t=n(r,"constructor","_helpers",e),a=[].slice.call(arguments);return"function"==typeof t?t.apply(r,a):t}:a.apply(this,arguments)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:dynamic-template"]={}}();

!function(){var e=Package.meteor.Meteor,n=Package.templating.Template,t=Package.blaze.Blaze,r=Package.blaze.UI,o=Package.blaze.Handlebars,i=Package.underscore._,a=Package.tracker.Tracker,s=Package.tracker.Deps,c=Package["iron:core"].Iron,u=Package.spacebars.Spacebars,h=Package.htmljs.HTML,l,g,d;(function(){var e=[];if(Package["cmather:iron-layout"]&&e.push("\n\n    The cmather:iron-{x} packages were migrated to the new package system with the wrong name, and you have duplicate copies.\n    You can see which cmather:iron-{x} packages have been installed by using this command:\n\n    > meteor list\n\n    Can you remove any installed cmather:iron-{x} packages like this:    \n\n    > meteor remove cmather:iron-core\n    > meteor remove cmather:iron-router\n    > meteor remove cmather:iron-dynamic-template\n    > meteor remove cmather:iron-dynamic-layout\n    \n    The new packages are named iron:{x}. For example:\n\n    > meteor add iron:router\n\n    Sorry for the hassle, but thank you!    \n\n  "),Package["cmather:blaze-layout"]&&e.push("The blaze-layout package has been replaced by iron-layout. Please remove the package like this:\n> meteor remove cmather:blaze-layout\n"),e.length>0)throw new Error("Sorry! Looks like there's a few errors related to iron:layout\n\n"+e.join("\n\n"))}).call(this),function(){n.__checkName("__IronDefaultLayout__"),n.__IronDefaultLayout__=new n("Template.__IronDefaultLayout__",function(){var e=this;return u.include(e.lookupTemplate("yield"))})}.call(this),function(){var e=c.DynamicTemplate,o=c.utils.inherits;l=function(e){for(;e;){if("Iron.Layout"===e.name)return e.__dynamicTemplate__;e=e.parentView}return null},g=function(e){var n=this;g.__super__.constructor.apply(this,arguments),e=e||{},this.name="Iron.Layout",this._regions={},this._regionHooks={},this.defaultTemplate("__IronDefaultLayout__"),e.content&&this.render(e.content)},d=g.DEFAULT_REGION="main",o(g,c.DynamicTemplate),g.prototype.region=function(e,n){return this._ensureRegion(e,n)},g.prototype.destroyRegions=function(){i.each(this._regions,function(e){e.destroy()}),this._regions={}},g.prototype.render=function(e,n){n=n||{};var t=n.to||n.region||d,r=this.region(t);this._trackRenderedRegion(t),r.template(e),r.data(n.data)},g.prototype.has=function(e){return e=e||g.DEFAULT_REGION,!!this._regions[e]},g.prototype.regionKeys=function(){return i.keys(this._regions)},g.prototype.clear=function(e){return e=e||g.DEFAULT_REGION,this.has(e)&&this.region(e).template(null),this},g.prototype.clearAll=function(){return i.each(this._regions,function(e){e.template(null)}),this},g.prototype.beginRendering=function(e){var n=this;if(this._finishRenderingTransaction&&this._finishRenderingTransaction(),this._finishRenderingTransaction=i.once(function(){var t=n._endRendering({flush:!1});e&&e(t)}),s.afterFlush(this._finishRenderingTransaction),this._renderedRegions)throw new Error("You called beginRendering again before calling endRendering");this._renderedRegions={}},g.prototype._trackRenderedRegion=function(e){this._renderedRegions&&(this._renderedRegions[e]=!0)},g.prototype._endRendering=function(e){e=e||{},e.flush!==!1&&s.flush();var n=this._renderedRegions||{};return this._renderedRegions=null,i.keys(n)},i.each(["onRegionCreated","onRegionRendered","onRegionDestroyed"],function(e){g.prototype[e]=function(n){var t=this._regionHooks[e]=this._regionHooks[e]||[];return t.push(n),this}}),g.prototype._ensureRegion=function(e,n){return this._regions[e]=this._regions[e]||this._createDynamicTemplate(e,n)},g.prototype._createDynamicTemplate=function(e,n){var t=this,r=new c.DynamicTemplate(n),o=c.utils.capitalize;return r._region=e,i.each(["viewCreated","viewReady","viewDestroyed"],function(e){e=o(e),r["on"+e](function(n){var r=this,o={viewCreated:"regionCreated",viewReady:"regionRendered",viewDestroyed:"regionDestroyed"}[e];t._runRegionHooks("on"+o,r,n)})}),r},g.prototype._runRegionHooks=function(e,n,t){for(var r=this,o=this._regionHooks[e]||[],i,a=0;a<o.length;a++)i=o[a],i.call(n,t.region,t,this)},"undefined"!=typeof n&&(r.registerHelper("yield",new n("yield",function(){var n=l(this);if(!n)throw new Error("No Iron.Layout found so you can't use yield!");var t=e.getInclusionArguments(this),r,o;return i.isString(t)?r=t:i.isObject(t)&&(r=t.region),r=r||d,o=n.region(r),o.isCreated&&o.destroy(),o.create()})),r.registerHelper("contentFor",new n("contentFor",function(){var n=l(this);if(!n)throw new Error("No Iron.Layout found so you can't use contentFor!");var t=e.getInclusionArguments(this)||{},r=this.templateContentBlock,o=t.template,a=t.data,s;if(i.isString(t))s=t;else{if(!i.isObject(t))throw new Error("Which region is this contentFor block supposed to be for?");s=t.region}return n.region(s).template(o||r),n._trackRenderedRegion(s),a&&n.region(s).data(a),null})),r.registerHelper("hasRegion",function(e){var n=l(t.getView());if(!n)throw new Error("No Iron.Layout found so you can't use hasRegion!");if(!i.isString(e))throw new Error("You need to provide an region argument to hasRegion");return!!n.region(e).template()}),r.registerHelper("Layout",new n("layout",function(){var e=c.DynamicTemplate.args(this),n=new g({template:function(){return e("template")},data:function(){return e("data")},content:this.templateContentBlock});return n.create()}))),c.Layout=g}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:layout"]={}}();

!function(){var e=Package.meteor.Meteor,r=Package.underscore._,n=Package["iron:core"].Iron,t,i;(function(){function e(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function r(t,a,s){a&&"[object Array]"!==n(a)&&(s=a,a=null),a=a||[],s=s||{};var c=s.strict,u=s.end!==!1,p=s.sensitive?"":"i",h=0;if(t instanceof RegExp){var l=t.source.match(/\((?!\?)/g)||[];return a.push.apply(a,l.map(function(e,r){return{name:r,delimiter:null,optional:!1,repeat:!1}})),o(t,a)}if("[object Array]"===n(t))return t=t.map(function(e){return r(e,a,s).source}),o(new RegExp("(?:"+t.join("|")+")",p),a);t=t.replace(i,function(r,n,t,i,o,s,c,u){if(n)return n;if(u)return"\\"+u;var p="+"===c||"*"===c,l="?"===c||"*"===c;return a.push({name:i||h++,delimiter:t||"/",optional:l,repeat:p}),t=t?"\\"+t:"",o=e(o||s||"[^"+(t||"\\/")+"]+?"),p&&(o=o+"(?:"+t+o+")*"),l?"(?:"+t+"("+o+"))?":t+"("+o+")"});var f="/"===t[t.length-1];return c||(t=(f?t.slice(0,-2):t)+"(?:\\/(?=$))?"),u||(t+=c&&f?"":"(?=\\/|$)"),o(new RegExp("^"+t+(u?"$":""),p),a)}var n=function(e){return Object.prototype.toString.call(e)},i=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g"),o=function(e,r){return e.keys=r,e};t=r}).call(this),function(){function e(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(r){return void(r.constructor==URIError&&a("Tried to decode an invalid URI component: "+JSON.stringify(e)+" "+r.stack))}}function o(e){try{return decodeURI(e.replace(/\+/g," "))}catch(r){return void(r.constructor==URIError&&a("Tried to decode an invalid URI: "+JSON.stringify(e)+" "+r.stack))}}var a=n.utils.warn;i=function(e,n){n=n||{},this.options=n,this.keys=[],this.regexp=t(e,this.keys,n),this._originalPath=e,r.extend(this,i.parse(e))},i.normalize=function(e){if(e instanceof RegExp)return e;if("string"!=typeof e)return"/";var r=i.parse(e),n=r.pathname;return"/"!==n.charAt(0)&&(n="/"+n),n.length>1&&"/"===n.charAt(n.length-1)&&(n=n.slice(0,n.length-1)),n},i.isSameOrigin=function(e,r){var n=i.parse(e),t=i.parse(r),o=n.origin===t.origin;return o},i.fromQueryString=function(n){if(!n)return{};if("string"!=typeof n)throw new Error("expected string");"?"===n.charAt(0)&&(n=n.slice(1));var t=n.split("&"),i={},o;return r.each(t,function(r){var n=r.split("="),t=n[0],o=e(n[1]);"[]"===t.slice(-2)?(t=t.slice(0,-2),i[t]=i[t]||[],i[t].push(o)):i[t]=o}),i},i.toQueryString=function(e){var n=[];return"string"==typeof e?"?"!==e.charAt(0)?"?"+e:e:(r.each(e,function(e,t){r.isArray(e)?r.each(e,function(e){n.push(encodeURIComponent(t)+"[]="+encodeURIComponent(e))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),n.length>0?"?"+n.join("&"):"")},i.parse=function(e){if("string"!=typeof e)return{};var r=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,n=e.match(r),t=n[1]?n[1].toLowerCase():void 0,o=n[3],a=!!o,s=n[4]?n[4].toLowerCase():void 0,c=s?s.split("@"):[],u,p;2==c.length?(p=c[0],u=c[1]):1==c.length?(u=c[0],p=void 0):(u=void 0,p=void 0);var h=u&&u.split(":")||[],l=h[0],f=h[1],g=t&&u?t+"//"+u:void 0,d=n[5],m=n[8],y=e,v=n[6],w,R=m&&m.indexOf("?")||-1;~R&&!v?(v=m.slice(R),m=m.substr(0,R),w=v.slice(1)):w=n[7];var x=d+(v||""),U=i.fromQueryString(w),S=[t||"",a?"//":"",s||""].join(""),I=[t||"",a?"//":"",s||"",d||"",v||"",m||""].join("");return{rootUrl:S||"",originalUrl:e||"",href:I||"",protocol:t||"",auth:p||"",host:u||"",hostname:l||"",port:f||"",origin:g||"",path:x||"",pathname:d||"",search:v||"",query:w||"",queryObject:U||"",hash:m||"",slashes:a}},i.prototype.test=function(e){return this.regexp.test(i.normalize(e))},i.prototype.exec=function(e){return this.regexp.exec(i.normalize(e))},i.prototype.params=function(r){if(!r)return[];var n=[],t=this.exec(r),a,s=this.keys,c,u;if(!t)throw new Error('The route named "'+this.name+'" does not match the path "'+r+'"');for(var p=1,h=t.length;h>p;++p)c=s[p-1],u="string"==typeof t[p]?e(t[p]):t[p],c?n[c.name]=void 0!==n[c.name]?n[c.name]:u:n.push(u);return r=o(r),"undefined"!=typeof r&&(a=r.split("?")[1],a&&(a=a.split("#")[0]),n.hash=r.split("#")[1]||null,n.query=i.fromQueryString(a)),n},i.prototype.resolve=function(e,n){var t,o,a,s=0,c=this._originalPath,u,p,h=[],l=e;if(n=n||{},e=e||[],p=n.query,u=n.hash&&n.hash.toString(),c instanceof RegExp)throw new Error("Cannot currently resolve a regular expression path");if(c=c.replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(n,i,a,s,c,u,p){if(i=i||"",a=a||"",t=e[s],o="undefined"!=typeof t,u&&!o)t="";else if(!o)return void h.push(s);t=r.isFunction(t)?t.call(e):t;var l=r.map(String(t).split("/"),function(e){return encodeURIComponent(e)}).join("/");return i+a+l}).replace(/\*/g,function(n){if("undefined"==typeof e[s])throw new Error("You are trying to access a wild card parameter at index "+s+" but the value of params at that index is undefined");var t=String(e[s++]);return r.map(t.split("/"),function(e){return encodeURIComponent(e)}).join("/")}),p=i.toQueryString(p),c+=p,u&&(u=encodeURI(u.replace("#","")),c=c+"#"+u),c=c.replace(/\/+/g,"/"),c=c.replace(/^(.+)\/$/g,"$1"),0==h.length)return c;if(n.throwOnMissingParams===!0)throw new Error("Missing required parameters on path "+JSON.stringify(this._originalPath)+". The missing params are: "+JSON.stringify(h)+". The params object passed in was: "+JSON.stringify(l)+".");return null},n.Url=i}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:url"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.underscore._,n=Package.ejson.EJSON,r=Package["iron:core"].Iron,i,o,r;(function(){var t=r.Url;i=function(n,r,i){e.isFunction(n)&&(i=i||r||{},r=n,n="/",this.middleware=!0,"undefined"==typeof i.mount&&(i.mount=!0)),"object"==typeof r&&(i=r,r=i.action||"action"),i=i||{},this.options=i,this.mount=i.mount,this.method=i.method&&i.method.toLowerCase()||!1,this.where=i.where||"client",this.mount&&(i.end=!1),i.name?this.name=i.name:"string"==typeof n&&"/"!==n.charAt(0)?this.name=n:"string"==typeof n&&"/"!==n&&(this.name=n.split("/").slice(1).join(".")),n=i.path||n,"string"==typeof n&&"/"!==n.charAt(0)&&(n="/"+n),this.path=n,this.compiledUrl=new t(n,i),e.isString(r)?this.handle=function o(){var t=this[r];if("function"!=typeof t)throw new Error("No method named "+JSON.stringify(r)+" found on handler.");return t.apply(this,arguments)}:e.isFunction(r)&&(this.handle=r)},i.prototype.test=function(t,e){e=e||{};var n=this.compiledUrl.test(t),r=!0,i=!0;return this.method&&e.method&&(r=this.method==e.method.toLowerCase()),e.where&&(i=this.where==e.where),n&&r&&i},i.prototype.params=function(t){return this.compiledUrl.params(t)},i.prototype.resolve=function(t,e){return this.compiledUrl.resolve(t,e)},i.prototype.clone=function(){var t=new i(this.path,this.handle,this.options);return t.name=this.name,t}}).call(this),function(){var a=r.Url,s=r.utils.assert,h=r.utils.defaultValue;o=function(){this._stack=[],this.length=0},o.prototype._create=function(t,n,r){var o=new i(t,n,r),a=o.name;if(a){if(e.has(this._stack,a))throw new Error("Handler with name '"+a+"' already exists.");this._stack[a]=o}return o},o.prototype.findByName=function(t){return this._stack[t]},o.prototype.push=function(t,e,n){var r=this._create(t,e,n);return this._stack.push(r),this.length++,r},o.prototype.append=function(){var t=this,n=e.toArray(arguments),r={};return"object"==typeof n[n.length-1]&&(r=n.pop()),e.each(n,function(n){if("undefined"!=typeof n)if("function"==typeof n)t.push(n,r);else{if(!e.isArray(n))throw new Error("Can only append functions or arrays to the MiddlewareStack");t.append.apply(t,n.concat([r]))}}),this},o.prototype.insertAt=function(t,e,n,r){var i=this._create(e,n,r);return this._stack.splice(t,0,i),this.length=this._stack.length,this},o.prototype.insertBefore=function(t,n,r,i){var o,a;if(!(o=this._stack[t]))throw new Error("Couldn't find a handler named '"+t+"' on the path stack");return a=e.indexOf(this._stack,o),this.insertAt(a,n,r,i),this},o.prototype.insertAfter=function(t,n,r,i){var o,a;if(!(o=this._stack[t]))throw new Error("Couldn't find a handler named '"+t+"' on the path stack");return a=e.indexOf(this._stack,o),this.insertAt(a+1,n,r,i),this},o.prototype.concat=function(){var t=new o,r=Array.prototype.concat,i=n.clone(this._stack),a=e.map(e.toArray(arguments),function(t){return n.clone(t._stack)});return t._stack=r.apply(i,a),t.length=t._stack.length,t},o.prototype.dispatch=function l(e,n,r){var i=this,o=e;s("string"==typeof e,"Requires url"),s("object"==typeof n,"Requires context object"),e=a.normalize(e||"/"),h(n,"request",{}),h(n,"response",{}),h(n,"originalUrl",e),h(n,"_method",n.method),h(n,"_handlersForEnv",{client:!1,server:!1}),h(n,"_handled",!1),h(n,"isHandled",function(){return n._handled}),h(n,"willBeHandledOnClient",function(){return n._handlersForEnv.client}),h(n,"willBeHandledOnServer",function(){return n._handlersForEnv.server});var l=function(){if(r)try{r.apply(this,arguments)}catch(t){throw t._punt=!0,t}},c=0,u=t.bindEnvironment(function p(r){var o=i._stack[c++];if(n.url=n.request.url=n.originalUrl,!o)return l.call(n,r);if(!o.test(e,{method:n._method}))return u(r);var s=t.isClient?"client":"server";if(o.middleware||(n._handlersForEnv[o.where]=!0),o.where!==s)return u(r);if(n.next=u,o.mount){var h=a.normalize(o.compiledUrl.pathname),p=e.substr(h.length,e.length);p=a.normalize(p),n.url=n.request.url=p}try{var d=o.handle.length,f=n.request,m=n.response;return r&&4===d?o.handle.call(n,r,f,m,u):!r&&4>d?o.handle.call(n,f,m,u):u(r)}catch(r){if(r._punt)throw r;u(r)}finally{n._handled=!0,n.next=null}});return u(),n.next=null,n},r=r||{},r.MiddlewareStack=o}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:middleware-stack"]={Handler:i}}();

!function(){var t=Package.meteor.Meteor,e=Package.underscore._,n=Package.tracker.Tracker,a=Package.tracker.Deps,r=Package.jquery.$,o=Package.jquery.jQuery,i=Package["iron:core"].Iron,c,s,h,u,l;(function(){var t=i.Url,n="__hash__";c=function(e){var a=t.parse(e),r=a.hash&&a.hash.replace("#",""),o=a.search,i=a.pathname,c=a.rootUrl;if(r&&"!"!==r.charAt(0)){var s=n+"="+r;o=o?o+"&":"?",o+=s,r=""}return!r&&i?r="#!"+i.substring(1):r&&(r="#"+r),[c,r,o].join("")},s=function(a){var r=t.parse(a),o=r.hash&&r.hash.replace("#!","/"),i=r.search,c=r.rootUrl,s;return e.has(r.queryObject,n)?(s="#"+r.queryObject[n],delete r.queryObject[n]):s="",[c,o,t.toQueryString(r.queryObject),s].join("")},h=function(e){var a=t.parse(e),r=a.queryObject;return a.hash&&(r[n]=a.hash.replace("#","")),["!",a.pathname.substring(1),t.toQueryString(r)].join("")}}).call(this),function(){var t=i.Url;u=function(n,a){e.extend(this,t.parse(n),{options:a||{}})},u.prototype.equals=function(t){return t&&t instanceof u&&t.pathname==this.pathname&&t.search==this.search&&t.hash==this.hash&&t.options.historyState===this.options.historyState?!0:!1},u.prototype.isCancelled=function(){return!!this._isCancelled},u.prototype.cancelUrlChange=function(){this._isCancelled=!0}}.call(this),function(){var n=i.Url,o=null,f=new a.Dependency,p={go:[],popState:[]},y=function(){return/MSIE 9/.test(navigator.appVersion)},g=function(){return/MSIE 8/.test(navigator.appVersion)},d=function(){return!!Package.appcache},S=function(){return"undefined"==typeof history||"function"!=typeof history.pushState},v=function(){return l.options.useHashPaths||g()||y()||d()||S()},k=function(){return!!l.options.useHashPaths},w=function(t,n){e.each(p[t],function(t){t.call(n)})},P=function(t){if(!(t instanceof u))throw new Error("Expected a State instance");return t.equals(o)?!1:(o=t,f.changed(),!0)},m=function(){var t=location.href,e;e=k()?new u(s(t)):new u(t,{historyState:history.state}),w("popState",e),P(e)},j=function(t){var e=q;e&&e(t)},_=function(t,e){e=e||{};var n=new u(t,e);w("go",n),P(n)&&a.afterFlush(function(){n.isCancelled()||(k()?location.hash=h(t):e.replaceState===!0?history.replaceState(e.historyState,null,t):history.pushState(e.historyState,null,t))})},q=function(t){try{var e=t.currentTarget,a=e.href,r=e.pathname+e.search+e.hash;if(r=r.replace(/(^\/?)/,"/"),t.isDefaultPrevented())return void t.preventDefault();if(t.metaKey||t.ctrlKey||t.shiftKey)return;if(e.target)return;if(!n.isSameOrigin(a,location.href))return;t.preventDefault(),_(r)}catch(o){throw t.preventDefault(),o}};l={},l.options={linkSelector:"a[href]",useHashPaths:!1},l.configure=function(t){e.extend(this.options,t||{})},l.get=function(){return f.depend(),o},l.start=function(){if(!this._isStarted){var e=n.parse(location.href);if(v()){if(e.pathname.length>1){var a=c(location.href);window.location=a}this.configure({useHashPaths:!0})}var o=location.href;if(k()){var i=new u(s(o));P(i)}else{if("!"===e.hash.replace("#","")[0])var o=s(o);var h={initial:!0};history.replaceState(h,null,o);var i=new u(o,{historyState:h});P(i)}r(window).on("popstate.iron-location",m),r(window).on("hashchange.iron-location",m),t.startup(function(){r(document).on("click.iron-location",l.options.linkSelector,j)}),this._isStarted=!0}},l.stop=function(){this._isStarted&&(r(window).on("popstate.iron-location"),r(window).on("hashchange.iron-location"),r(document).off("click.iron-location"),this._isStarted=!1)},l.onClick=function(t){q=t},l.go=function(t,e){return _(t,e)},l.onGo=function(t){p.go.push(t)},l.onPopState=function(t){p.popState.push(t)},l.start(),i.Location=l}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:location"]={urlToHashStyle:c,urlFromHashStyle:s}}();

!function(){var t=Package.meteor.Meteor,e=Package.underscore._,r;(function(){var t=function(t,e,r,n){return{key:t,value:e,next:r,prev:n}};r=function(){var t=this;t._dict={},t._first=null,t._last=null,t._size=0;var r=e.toArray(arguments);t._stringify=function(t){return t},"function"==typeof r[0]&&(t._stringify=r.shift()),e.each(r,function(e){t.putBefore(e[0],e[1],null)})},e.extend(r.prototype,{_k:function(t){return" "+this._stringify(t)},empty:function(){var t=this;return!t._first},size:function(){var t=this;return t._size},_linkEltIn:function(t){var e=this;t.next?(t.prev=t.next.prev,t.next.prev=t,t.prev&&(t.prev.next=t)):(t.prev=e._last,e._last&&(e._last.next=t),e._last=t),(null===e._first||e._first===t.next)&&(e._first=t)},_linkEltOut:function(t){var e=this;t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===e._last&&(e._last=t.prev),t===e._first&&(e._first=t.next)},putBefore:function(e,r,n){var i=this;if(i._dict[i._k(e)])throw new Error("Item "+e+" already present in OrderedDict");var o=n?t(e,r,i._dict[i._k(n)]):t(e,r,null);if(void 0===o.next)throw new Error("could not find item to put this one before");i._linkEltIn(o),i._dict[i._k(e)]=o,i._size++},append:function(t,e){var r=this;r.putBefore(t,e,null)},remove:function(t){var e=this,r=e._dict[e._k(t)];if(void 0===r)throw new Error("Item "+t+" not present in OrderedDict");return e._linkEltOut(r),e._size--,delete e._dict[e._k(t)],r.value},get:function(t){var e=this;return e.has(t)?e._dict[e._k(t)].value:void 0},has:function(t){var r=this;return e.has(r._dict,r._k(t))},forEach:function(t){for(var e=this,n=0,i=e._first;null!==i;){var o=t(i.value,i.key,n);if(o===r.BREAK)return;i=i.next,n++}},first:function(){var t=this;return t.empty()?void 0:t._first.key},firstValue:function(){var t=this;return t.empty()?void 0:t._first.value},last:function(){var t=this;return t.empty()?void 0:t._last.key},lastValue:function(){var t=this;return t.empty()?void 0:t._last.value},prev:function(t){var e=this;if(e.has(t)){var r=e._dict[e._k(t)];if(r.prev)return r.prev.key}return null},next:function(t){var e=this;if(e.has(t)){var r=e._dict[e._k(t)];if(r.next)return r.next.key}return null},moveBefore:function(t,e){var r=this,n=r._dict[r._k(t)],i=e?r._dict[r._k(e)]:null;if(void 0===n)throw new Error("Item to move is not present");if(void 0===i)throw new Error("Could not find element to move this one before");i!==n.next&&(r._linkEltOut(n),n.next=i,r._linkEltIn(n))},indexOf:function(t){var e=this,n=null;return e.forEach(function(i,o,u){return e._k(o)===e._k(t)?(n=u,r.BREAK):void 0}),n},_checkRep:function(){var t=this;e.each(t._dict,function(t,e){if(e.next===e)throw new Error("Next is a loop");if(e.prev===e)throw new Error("Prev is a loop")})}}),r.BREAK={"break":!0}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ordered-dict"]={OrderedDict:r}}();

!function(){var t=Package.meteor.Meteor,n,o;(function(){n={exports:{}}}).call(this),function(){!function(){function t(t){for(var n=[],o=[],a=0;a<t[0].length;a++)n.push(t[0][a][1]),o.push(t[0][a][0]);return n=n.sort(function(t,n){return t-n}),o=o.sort(function(t,n){return t-n}),[[n[0],o[0]],[n[n.length-1],o[o.length-1]]]}function o(t,n,o){for(var a=[[0,0]],r=0;r<o.length;r++){for(var e=0;e<o[r].length;e++)a.push(o[r][e]);a.push([0,0])}for(var i=!1,r=0,e=a.length-1;r<a.length;e=r++)a[r][0]>n!=a[e][0]>n&&t<(a[e][1]-a[r][1])*(n-a[r][0])/(a[e][0]-a[r][0])+a[r][1]&&(i=!i);return i}var a={};"undefined"!=typeof n&&n.exports&&(n.exports=a),a.lineStringsIntersect=function(t,n){for(var o=[],a=0;a<=t.coordinates.length-2;++a)for(var r=0;r<=n.coordinates.length-2;++r){var e={x:t.coordinates[a][1],y:t.coordinates[a][0]},i={x:t.coordinates[a+1][1],y:t.coordinates[a+1][0]},s={x:n.coordinates[r][1],y:n.coordinates[r][0]},c={x:n.coordinates[r+1][1],y:n.coordinates[r+1][0]},u=(c.x-s.x)*(e.y-s.y)-(c.y-s.y)*(e.x-s.x),h=(i.x-e.x)*(e.y-s.y)-(i.y-e.y)*(e.x-s.x),d=(c.y-s.y)*(i.x-e.x)-(c.x-s.x)*(i.y-e.y);if(0!=d){var l=u/d,y=h/d;l>=0&&1>=l&&y>=0&&1>=y&&o.push({type:"Point",coordinates:[e.x+l*(i.x-e.x),e.y+l*(i.y-e.y)]})}}return 0==o.length&&(o=!1),o},a.pointInBoundingBox=function(t,n){return!(t.coordinates[1]<n[0][0]||t.coordinates[1]>n[1][0]||t.coordinates[0]<n[0][1]||t.coordinates[0]>n[1][1])},a.pointInPolygon=function(n,r){for(var e="Polygon"==r.type?[r.coordinates]:r.coordinates,i=!1,s=0;s<e.length;s++)a.pointInBoundingBox(n,t(e[s]))&&(i=!0);if(!i)return!1;for(var c=!1,s=0;s<e.length;s++)o(n.coordinates[1],n.coordinates[0],e[s])&&(c=!0);return c},a.numberToRadius=function(t){return t*Math.PI/180},a.numberToDegree=function(t){return 180*t/Math.PI},a.drawCircle=function(t,n,o){for(var r=[n.coordinates[1],n.coordinates[0]],e=t/1e3/6371,i=[a.numberToRadius(r[0]),a.numberToRadius(r[1])],o=o||15,s=[[r[0],r[1]]],c=0;o>c;c++){var u=2*Math.PI*c/o,h=Math.asin(Math.sin(i[0])*Math.cos(e)+Math.cos(i[0])*Math.sin(e)*Math.cos(u)),d=i[1]+Math.atan2(Math.sin(u)*Math.sin(e)*Math.cos(i[0]),Math.cos(e)-Math.sin(i[0])*Math.sin(h));s[c]=[],s[c][1]=a.numberToDegree(h),s[c][0]=a.numberToDegree(d)}return{type:"Polygon",coordinates:[s]}},a.rectangleCentroid=function(t){var n=t.coordinates[0],o=n[0][0],a=n[0][1],r=n[2][0],e=n[2][1],i=r-o,s=e-a;return{type:"Point",coordinates:[o+i/2,a+s/2]}},a.pointDistance=function(t,n){var o=t.coordinates[0],r=t.coordinates[1],e=n.coordinates[0],i=n.coordinates[1],s=a.numberToRadius(i-r),c=a.numberToRadius(e-o),u=Math.pow(Math.sin(s/2),2)+Math.cos(a.numberToRadius(r))*Math.cos(a.numberToRadius(i))*Math.pow(Math.sin(c/2),2),h=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));return 6371*h*1e3},a.geometryWithinRadius=function(t,n,o){if("Point"==t.type)return a.pointDistance(t,n)<=o;if("LineString"==t.type||"Polygon"==t.type){var r={},e;e="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var i in e)if(r.coordinates=e[i],a.pointDistance(r,n)>o)return!1}return!0},a.area=function(t){for(var n=0,o=t.coordinates[0],a=o.length-1,r,e,i=0;i<o.length;a=i++){var r={x:o[i][1],y:o[i][0]},e={x:o[a][1],y:o[a][0]};n+=r.x*e.y,n-=r.y*e.x}return n/=2},a.centroid=function(t){for(var n,o=0,r=0,e=t.coordinates[0],i=e.length-1,s,c,u=0;u<e.length;i=u++){var s={x:e[u][1],y:e[u][0]},c={x:e[i][1],y:e[i][0]};n=s.x*c.y-c.x*s.y,o+=(s.x+c.x)*n,r+=(s.y+c.y)*n}return n=6*a.area(t),{type:"Point",coordinates:[r/n,o/n]}},a.simplify=function(t,n){n=n||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var o,a,r,e,i,s,c,u,h,d,l,y,M,f,g,x,p,v,P,b=Math.PI/180*.5,m=new Array,T=new Array,I=new Array;if(t.length<3)return t;for(o=t.length,d=360*n/(2*Math.PI*6378137),d*=d,r=0,T[0]=0,I[0]=o-1,a=1;a>0;)if(e=T[a-1],i=I[a-1],a--,i-e>1){for(l=t[i].lng()-t[e].lng(),y=t[i].lat()-t[e].lat(),Math.abs(l)>180&&(l=360-Math.abs(l)),l*=Math.cos(b*(t[i].lat()+t[e].lat())),M=l*l+y*y,s=e+1,c=e,h=-1;i>s;s++)f=t[s].lng()-t[e].lng(),g=t[s].lat()-t[e].lat(),Math.abs(f)>180&&(f=360-Math.abs(f)),f*=Math.cos(b*(t[s].lat()+t[e].lat())),x=f*f+g*g,p=t[s].lng()-t[i].lng(),v=t[s].lat()-t[i].lat(),Math.abs(p)>180&&(p=360-Math.abs(p)),p*=Math.cos(b*(t[s].lat()+t[i].lat())),P=p*p+v*v,u=x>=M+P?P:P>=M+x?x:(f*y-g*l)*(f*y-g*l)/M,u>h&&(c=s,h=u);d>h?(m[r]=e,r++):(a++,T[a-1]=c,I[a-1]=i,a++,T[a-1]=e,I[a-1]=c)}else m[r]=e,r++;m[r]=o-1,r++;for(var R=new Array,s=0;r>s;s++)R.push(t[m[s]]);return R.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},a.destinationPoint=function(t,n,o){o/=6371,n=a.numberToRadius(n);var r=a.numberToRadius(t.coordinates[0]),e=a.numberToRadius(t.coordinates[1]),i=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(n)),s=e+Math.atan2(Math.sin(n)*Math.sin(o)*Math.cos(r),Math.cos(o)-Math.sin(r)*Math.sin(i));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[a.numberToDegree(i),a.numberToDegree(s)]}}}()}.call(this),function(){o=n.exports}.call(this),"undefined"==typeof Package&&(Package={}),Package["geojson-utils"]={GeoJSON:o}}();

!function(){var e=Package.meteor.Meteor,r=Package.underscore._,t=Package.ejson.EJSON,n=Package["id-map"].IdMap,o=Package["ordered-dict"].OrderedDict,i=Package.tracker.Tracker,a=Package.tracker.Deps,s=Package["mongo-id"].MongoID,c=Package.random.Random,u=Package["diff-sequence"].DiffSequence,d=Package["geojson-utils"].GeoJSON,f,l,h,p,v,_,m,y,g,w,$,b,E,I,C,O;(function(){f=function(r){var t=this;t.name=r,t._docs=new f._IdMap,t._observeQueue=new e._SynchronousQueue,t.next_qid=1,t.queries={},t._savedOriginals=null,t.paused=!1},l={},h={},p=function(e){var r=new Error(e);return r.name="MinimongoError",r},f.prototype.find=function(e,r){return 0===arguments.length&&(e={}),new f.Cursor(this,e,r)},f.Cursor=function(e,r,t){var n=this;t||(t={}),n.collection=e,n.sorter=null,n.matcher=new l.Matcher(r),f._selectorIsId(r)?n._selectorId=r:f._selectorIsIdPerhapsAsObject(r)?n._selectorId=r._id:(n._selectorId=void 0,(n.matcher.hasGeoQuery()||t.sort)&&(n.sorter=new l.Sorter(t.sort||[],{matcher:n.matcher}))),n.skip=t.skip,n.limit=t.limit,n.fields=t.fields,n._projectionFn=f._compileProjection(n.fields||{}),n._transform=f.wrapTransform(t.transform),"undefined"!=typeof i&&(n.reactive=void 0===t.reactive?!0:t.reactive)},f.Cursor.prototype.rewind=function(){},f.prototype.findOne=function(e,r){return 0===arguments.length&&(e={}),r=r||{},r.limit=1,this.find(e,r).fetch()[0]},f.Cursor.prototype.forEach=function(e,t){var n=this,o=n._getRawObjects({ordered:!0});n.reactive&&n._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0}),r.each(o,function(r,o){r=n._projectionFn(r),n._transform&&(r=n._transform(r)),e.call(t,r,o,n)})},f.Cursor.prototype.getTransform=function(){return this._transform},f.Cursor.prototype.map=function(e,r){var t=this,n=[];return t.forEach(function(o,i){n.push(e.call(r,o,i,t))}),n},f.Cursor.prototype.fetch=function(){var e=this,r=[];return e.forEach(function(e){r.push(e)}),r},f.Cursor.prototype.count=function(){var e=this;return e.reactive&&e._depend({added:!0,removed:!0},!0),e._getRawObjects({ordered:!0}).length},f.Cursor.prototype._publishCursor=function(e){var r=this;if(!r.collection.name)throw new Error("Can't publish a cursor from a collection without a name.");var t=r.collection.name;if(!Package.mongo)throw new Error("Can't publish from Minimongo without the `mongo` package.");return Package.mongo.Mongo.Collection._publishCursor(r,e,t)},f.Cursor.prototype._getCollectionName=function(){var e=this;return e.collection.name},f._observeChangesCallbacksAreOrdered=function(e){if(e.added&&e.addedBefore)throw new Error("Please specify only one of added() and addedBefore()");return!(!e.addedBefore&&!e.movedBefore)},f._observeCallbacksAreOrdered=function(e){if(e.addedAt&&e.added)throw new Error("Please specify only one of added() and addedAt()");if(e.changedAt&&e.changed)throw new Error("Please specify only one of changed() and changedAt()");if(e.removed&&e.removedAt)throw new Error("Please specify only one of removed() and removedAt()");return!!(e.addedAt||e.movedTo||e.changedAt||e.removedAt)},f.ObserveHandle=function(){},r.extend(f.Cursor.prototype,{observe:function(e){var r=this;return f._observeFromObserveChanges(r,e)},observeChanges:function(e){var n=this,o=f._observeChangesCallbacksAreOrdered(e);if(!e._allow_unordered&&!o&&(n.skip||n.limit))throw new Error("must use ordered observe (ie, 'addedBefore' instead of 'added') with skip or limit");if(n.fields&&(0===n.fields._id||n.fields._id===!1))throw Error("You may not observe a cursor with {fields: {_id: 0}}");var a={matcher:n.matcher,sorter:o&&n.sorter,distances:n.matcher.hasGeoQuery()&&o&&new f._IdMap,resultsSnapshot:null,ordered:o,cursor:n,projectionFn:n._projectionFn},s;n.reactive&&(s=n.collection.next_qid++,n.collection.queries[s]=a),a.results=n._getRawObjects({ordered:o,distances:a.distances}),n.collection.paused&&(a.resultsSnapshot=o?[]:new f._IdMap);var c=function(e){return e?function(){var r=this,t=arguments;n.collection.paused||n.collection._observeQueue.queueTask(function(){e.apply(r,t)})}:function(){}};if(a.added=c(e.added),a.changed=c(e.changed),a.removed=c(e.removed),o&&(a.addedBefore=c(e.addedBefore),a.movedBefore=c(e.movedBefore)),!e._suppress_initial&&!n.collection.paused){var u=o?r.bind(r.each,null,a.results):r.bind(a.results.forEach,a.results);u(function(e){var r=t.clone(e);delete r._id,o&&a.addedBefore(e._id,n._projectionFn(r),null),a.added(e._id,n._projectionFn(r))})}var d=new f.ObserveHandle;return r.extend(d,{collection:n.collection,stop:function(){n.reactive&&delete n.collection.queries[s]}}),n.reactive&&i.active&&i.onInvalidate(function(){d.stop()}),n.collection._observeQueue.drain(),d}}),f.Cursor.prototype._getRawObjects=function(e){var r=this;e=e||{};var t=e.ordered?[]:new f._IdMap;if(void 0!==r._selectorId){if(r.skip)return t;var n=r.collection._docs.get(r._selectorId);return n&&(e.ordered?t.push(n):t.set(r._selectorId,n)),t}var o;if(r.matcher.hasGeoQuery()&&e.ordered&&(e.distances?(o=e.distances,o.clear()):o=new f._IdMap),r.collection._docs.forEach(function(n,i){var a=r.matcher.documentMatches(n);return a.result&&(e.ordered?(t.push(n),o&&void 0!==a.distance&&o.set(i,a.distance)):t.set(i,n)),!r.limit||r.skip||r.sorter||t.length!==r.limit?!0:!1}),!e.ordered)return t;if(r.sorter){var i=r.sorter.getComparator({distances:o});t.sort(i)}var a=r.skip||0,s=r.limit?r.limit+a:t.length;return t.slice(a,s)},f.Cursor.prototype._depend=function(e,t){var n=this;if(i.active){var o=new i.Dependency;o.depend();var a=r.bind(o.changed,o),s={_suppress_initial:!0,_allow_unordered:t};r.each(["added","changed","removed","addedBefore","movedBefore"],function(r){e[r]&&(s[r]=a)}),n.observeChanges(s)}},f.prototype.insert=function(n,o){var i=this;n=t.clone(n),r.has(n,"_id")||(n._id=f._useOID?new s.ObjectID:c.id());var a=n._id;if(i._docs.has(a))throw p("Duplicate _id '"+a+"'");i._saveOriginal(a,void 0),i._docs.set(a,n);var u=[];for(var d in i.queries){var l=i.queries[d],h=l.matcher.documentMatches(n);h.result&&(l.distances&&void 0!==h.distance&&l.distances.set(a,h.distance),l.cursor.skip||l.cursor.limit?u.push(d):f._insertInResults(l,n))}return r.each(u,function(e){i.queries[e]&&i._recomputeResults(i.queries[e])}),i._observeQueue.drain(),o&&e.defer(function(){o(null,a)}),a},f.prototype._eachPossiblyMatchingDoc=function(e,r){var t=this,n=f._idsMatchedBySelector(e);if(n)for(var o=0;o<n.length;++o){var i=n[o],a=t._docs.get(i);if(a){var s=r(a,i);if(s===!1)break}}else t._docs.forEach(r)},f.prototype.remove=function(n,o){var i=this;if(i.paused&&!i._savedOriginals&&t.equals(n,{})){var a=i._docs.size();return i._docs.clear(),r.each(i.queries,function(e){e.ordered?e.results=[]:e.results.clear()}),o&&e.defer(function(){o(null,a)}),a}var s=new l.Matcher(n),c=[];i._eachPossiblyMatchingDoc(n,function(e,r){s.documentMatches(e).result&&c.push(r)});for(var u=[],d=[],h=0;h<c.length;h++){var p=c[h],v=i._docs.get(p);r.each(i.queries,function(e,r){e.matcher.documentMatches(v).result&&(e.cursor.skip||e.cursor.limit?u.push(r):d.push({qid:r,doc:v}))}),i._saveOriginal(p,v),i._docs.remove(p)}return r.each(d,function(e){var r=i.queries[e.qid];r&&(r.distances&&r.distances.remove(e.doc._id),f._removeFromResults(r,e.doc))}),r.each(u,function(e){var r=i.queries[e];r&&i._recomputeResults(r)}),i._observeQueue.drain(),a=c.length,o&&e.defer(function(){o(null,a)}),a},f.prototype.update=function(n,o,i,a){var s=this;!a&&i instanceof Function&&(a=i,i=null),i||(i={});var c=new l.Matcher(n),u={};r.each(s.queries,function(e,r){!e.cursor.skip&&!e.cursor.limit||s.paused||(u[r]=t.clone(e.results))});var d={},h=0;s._eachPossiblyMatchingDoc(n,function(e,r){var t=c.documentMatches(e);return t.result&&(s._saveOriginal(r,e),s._modifyAndNotify(e,o,d,t.arrayIndices),++h,!i.multi)?!1:!0}),r.each(d,function(e,r){var t=s.queries[r];t&&s._recomputeResults(t,u[r])}),s._observeQueue.drain();var p;if(0===h&&i.upsert){var v=f._removeDollarOperators(n);f._modify(v,o,{isInsert:!0}),!v._id&&i.insertedId&&(v._id=i.insertedId),p=s.insert(v),h=1}var _;return i._returnObject?(_={numberAffected:h},void 0!==p&&(_.insertedId=p)):_=h,a&&e.defer(function(){a(null,_)}),_},f.prototype.upsert=function(e,t,n,o){var i=this;return o||"function"!=typeof n||(o=n,n={}),i.update(e,t,r.extend({},n,{upsert:!0,_returnObject:!0}),o)},f.prototype._modifyAndNotify=function(e,r,n,o){var i=this,a={};for(var s in i.queries){var c=i.queries[s];c.ordered?a[s]=c.matcher.documentMatches(e).result:a[s]=c.results.has(e._id)}var u=t.clone(e);f._modify(e,r,{arrayIndices:o});for(s in i.queries){c=i.queries[s];var d=a[s],l=c.matcher.documentMatches(e),h=l.result;h&&c.distances&&void 0!==l.distance&&c.distances.set(e._id,l.distance),c.cursor.skip||c.cursor.limit?(d||h)&&(n[s]=!0):d&&!h?f._removeFromResults(c,e):!d&&h?f._insertInResults(c,e):d&&h&&f._updateInResults(c,e,u)}},f._insertInResults=function(e,r){var n=t.clone(r);if(delete n._id,e.ordered){if(e.sorter){var o=f._insertInSortedList(e.sorter.getComparator({distances:e.distances}),e.results,r),i=e.results[o+1];i=i?i._id:null,e.addedBefore(r._id,e.projectionFn(n),i)}else e.addedBefore(r._id,e.projectionFn(n),null),e.results.push(r);e.added(r._id,e.projectionFn(n))}else e.added(r._id,e.projectionFn(n)),e.results.set(r._id,r)},f._removeFromResults=function(e,r){if(e.ordered){var t=f._findInOrderedResults(e,r);e.removed(r._id),e.results.splice(t,1)}else{var n=r._id;e.removed(r._id),e.results.remove(n)}},f._updateInResults=function(e,n,o){if(!t.equals(n._id,o._id))throw new Error("Can't change a doc's _id while updating");var i=e.projectionFn,a=u.makeChangedFields(i(n),i(o));if(!e.ordered)return void(r.isEmpty(a)||(e.changed(n._id,a),e.results.set(n._id,n)));var s=f._findInOrderedResults(e,n);if(r.isEmpty(a)||e.changed(n._id,a),e.sorter){e.results.splice(s,1);var c=f._insertInSortedList(e.sorter.getComparator({distances:e.distances}),e.results,n);if(s!==c){var d=e.results[c+1];d=d?d._id:null,e.movedBefore&&e.movedBefore(n._id,d)}}},f.prototype._recomputeResults=function(e,r){var t=this;t.paused||r||(r=e.results),e.distances&&e.distances.clear(),e.results=e.cursor._getRawObjects({ordered:e.ordered,distances:e.distances}),t.paused||f._diffQueryChanges(e.ordered,r,e.results,e,{projectionFn:e.projectionFn})},f._findInOrderedResults=function(e,r){if(!e.ordered)throw new Error("Can't call _findInOrderedResults on unordered query");for(var t=0;t<e.results.length;t++)if(e.results[t]===r)return t;throw Error("object missing from query")},f._binarySearch=function(e,r,t){for(var n=0,o=r.length;o>0;){var i=Math.floor(o/2);e(t,r[n+i])>=0?(n+=i+1,o-=i+1):o=i}return n},f._insertInSortedList=function(e,r,t){if(0===r.length)return r.push(t),0;var n=f._binarySearch(e,r,t);return r.splice(n,0,t),n},f.prototype.saveOriginals=function(){var e=this;if(e._savedOriginals)throw new Error("Called saveOriginals twice without retrieveOriginals");e._savedOriginals=new f._IdMap},f.prototype.retrieveOriginals=function(){var e=this;if(!e._savedOriginals)throw new Error("Called retrieveOriginals without saveOriginals");var r=e._savedOriginals;return e._savedOriginals=null,r},f.prototype._saveOriginal=function(e,r){var n=this;n._savedOriginals&&(n._savedOriginals.has(e)||n._savedOriginals.set(e,t.clone(r)))},f.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var e in this.queries){var r=this.queries[e];r.resultsSnapshot=t.clone(r.results)}}},f.prototype.resumeObservers=function(){var e=this;if(this.paused){this.paused=!1;for(var r in this.queries){var t=e.queries[r];f._diffQueryChanges(t.ordered,t.resultsSnapshot,t.results,t,{projectionFn:t.projectionFn}),t.resultsSnapshot=null}e._observeQueue.drain()}}}).call(this),function(){f.wrapTransform=function(e){if(!e)return null;if(e.__wrappedTransform__)return e;var n=function(n){if(!r.has(n,"_id"))throw new Error("can only transform documents with _id");var o=n._id,a=i.nonreactive(function(){return e(n)});if(!_(a))throw new Error("transform must return object");if(r.has(a,"_id")){if(!t.equals(a._id,o))throw new Error("transformed document can't have different _id")}else a._id=o;return a};return n.__wrappedTransform__=!0,n}}.call(this),function(){v=function(e){return r.isArray(e)&&!t.isBinary(e)},_=f._isPlainObject=function(e){return e&&3===f._f._type(e)},m=function(e){return v(e)||_(e)},y=function(e,t){if(!_(e))return!1;var n=void 0;return r.each(e,function(r,o){var i="$"===o.substr(0,1);if(void 0===n)n=i;else if(n!==i){if(!t)throw new Error("Inconsistent operator: "+JSON.stringify(e));n=!1}}),!!n},g=function(e){return/^[0-9]+$/.test(e)}}.call(this),function(){l.Matcher=function(e){var r=this;r._paths={},r._hasGeoQuery=!1,r._hasWhere=!1,r._isSimple=!0,r._matchingDocument=void 0,r._selector=null,r._docMatcher=r._compileSelector(e)},r.extend(l.Matcher.prototype,{documentMatches:function(e){if(!e||"object"!=typeof e)throw Error("documentMatches needs a document");return this._docMatcher(e)},hasGeoQuery:function(){return this._hasGeoQuery},hasWhere:function(){return this._hasWhere},isSimple:function(){return this._isSimple},_compileSelector:function(r){var n=this;if(r instanceof Function)return n._isSimple=!1,n._selector=r,n._recordPathUsed(""),function(e){return{result:!!r.call(e)}};if(f._selectorIsId(r))return n._selector={_id:r},n._recordPathUsed("_id"),function(e){return{result:t.equals(e._id,r)}};if(!r||"_id"in r&&!r._id)return n._isSimple=!1,S;if("boolean"==typeof r||v(r)||t.isBinary(r))throw new Error("Invalid selector: "+r);return n._selector=t.clone(r),e(r,n,{isRoot:!0})},_recordPathUsed:function(e){this._paths[e]=!0},_getPaths:function(){return r.keys(this._paths)}});var e=function(e,t,o){o=o||{};var i=[];return r.each(e,function(e,a){if("$"===a.substr(0,1)){if(!r.has(c,a))throw new Error("Unrecognized logical operator: "+a);t._isSimple=!1,i.push(c[a](e,t,o.inElemMatch))}else{o.inElemMatch||t._recordPathUsed(a);var s=E(a),u=n(e,t,o.isRoot);i.push(function(e){var r=s(e);return u(r)})}}),M(i)},n=function(e,r,t){return e instanceof RegExp?(r._isSimple=!1,o(w(e))):y(e)?i(e,r,t):o($(e))},o=function(e,t){return t=t||{},function(n){var o=n;t.dontExpandLeafArrays||(o=I(n,t.dontIncludeLeafArrays));var i={};return i.result=r.any(o,function(r){var t=e(r.value);return"number"==typeof t&&(r.arrayIndices||(r.arrayIndices=[t]),t=!0),t&&r.arrayIndices&&(i.arrayIndices=r.arrayIndices),t}),i}};w=function(e){return function(t){return t instanceof RegExp?r.isEqual(t,e):"string"!=typeof t?!1:(e.lastIndex=0,e.test(t))}},$=function(e){if(y(e))throw Error("Can't create equalityValueSelector for operator object");return null==e?function(e){return null==e}:function(r){return f._f._equal(e,r)}};var i=function(e,t,n){var i=[];return r.each(e,function(a,s){var c=r.contains(["$lt","$lte","$gt","$gte"],s)&&r.isNumber(a),u="$ne"===s&&!r.isObject(a),d=r.contains(["$in","$nin"],s)&&r.isArray(a)&&!r.any(a,r.isObject);if("$eq"===s||c||d||u||(t._isSimple=!1),r.has(p,s))i.push(p[s](a,e,t,n));else{if(!r.has(b,s))throw new Error("Unrecognized operator: "+s);var f=b[s];i.push(o(f.compileElementSelector(a,e,t),f))}}),P(i)},a=function(t,n,o){if(!v(t)||r.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");return r.map(t,function(r){if(!_(r))throw Error("$or/$and/$nor entries need to be full objects");return e(r,n,{inElemMatch:o})})},c={$and:function(e,r,t){var n=a(e,r,t);return M(n)},$or:function(e,t,n){var o=a(e,t,n);return 1===o.length?o[0]:function(e){var t=r.any(o,function(r){return r(e).result});return{result:t}}},$nor:function(e,t,n){var o=a(e,t,n);return function(e){var t=r.all(o,function(r){return!r(e).result});return{result:t}}},$where:function(e,r){return r._recordPathUsed(""),r._hasWhere=!0,e instanceof Function||(e=Function("obj","return "+e)),function(r){return{result:e.call(r,r)}}},$comment:function(){return function(){return{result:!0}}}},u=function(e){return function(r){var t=e(r);return{result:!t.result}}},p={$not:function(e,r,t){return u(n(e,t))},$ne:function(e){return u(o($(e)))},$nin:function(e){return u(o(b.$in.compileElementSelector(e)))},$exists:function(e){var r=o(function(e){return void 0!==e});return e?r:u(r)},$options:function(e,t){if(!r.has(t,"$regex"))throw Error("$options needs a $regex");return j},$maxDistance:function(e,r){if(!r.$near)throw Error("$maxDistance needs a $near");return j},$all:function(e,t,o){if(!v(e))throw Error("$all requires array");if(r.isEmpty(e))return S;var i=[];return r.each(e,function(e){if(y(e))throw Error("no $ expressions in $all");i.push(n(e,o))}),P(i)},$near:function(e,t,n,o){if(!o)throw Error("$near can't be inside another $ operator");n._hasGeoQuery=!0;var i,a,s;if(_(e)&&r.has(e,"$geometry"))i=e.$maxDistance,a=e.$geometry,s=function(e){return e&&e.type?"Point"===e.type?d.pointDistance(a,e):d.geometryWithinRadius(e,a,i)?0:i+1:null};else{if(i=t.$maxDistance,!v(e)&&!_(e))throw Error("$near argument must be coordinate pair or GeoJSON");a=O(e),s=function(e){return v(e)||_(e)?C(a,e):null}}return function(e){e=I(e);var t={result:!1};return r.each(e,function(e){var r=s(e.value);null===r||r>i||void 0!==t.distance&&t.distance<=r||(t.result=!0,t.distance=r,e.arrayIndices?t.arrayIndices=e.arrayIndices:delete t.arrayIndices)}),t}}},C=function(e,t){e=O(e),t=O(t);var n=e[0]-t[0],o=e[1]-t[1];return r.isNaN(n)||r.isNaN(o)?null:Math.sqrt(n*n+o*o)},O=function(e){return r.map(e,r.identity)},k=function(e){return{compileElementSelector:function(r){if(v(r))return function(){return!1};void 0===r&&(r=null);var t=f._f._type(r);return function(n){return void 0===n&&(n=null),f._f._type(n)!==t?!1:e(f._f._cmp(n,r))}}}};b={$lt:k(function(e){return 0>e}),$gt:k(function(e){return e>0}),$lte:k(function(e){return 0>=e}),$gte:k(function(e){return e>=0}),$mod:{compileElementSelector:function(e){if(!v(e)||2!==e.length||"number"!=typeof e[0]||"number"!=typeof e[1])throw Error("argument to $mod must be an array of two numbers");var r=e[0],t=e[1];return function(e){return"number"==typeof e&&e%r===t}}},$in:{compileElementSelector:function(e){if(!v(e))throw Error("$in needs an array");var t=[];return r.each(e,function(e){if(e instanceof RegExp)t.push(w(e));else{if(y(e))throw Error("cannot nest $ under $in");t.push($(e))}}),function(e){return void 0===e&&(e=null),r.any(t,function(r){return r(e)})}}},$size:{dontExpandLeafArrays:!0,compileElementSelector:function(e){if("string"==typeof e)e=0;else if("number"!=typeof e)throw Error("$size needs a number");return function(r){return v(r)&&r.length===e}}},$type:{dontIncludeLeafArrays:!0,compileElementSelector:function(e){if("number"!=typeof e)throw Error("$type needs a number");return function(r){return void 0!==r&&f._f._type(r)===e}}},$regex:{compileElementSelector:function(e,r){if(!("string"==typeof e||e instanceof RegExp))throw Error("$regex has to be a string or RegExp");var t;if(void 0!==r.$options){if(/[^gim]/.test(r.$options))throw new Error("Only the i, m, and g regexp options are supported");var n=e instanceof RegExp?e.source:e;t=new RegExp(n,r.$options)}else t=e instanceof RegExp?e:new RegExp(e);return w(t)}},$elemMatch:{dontExpandLeafArrays:!0,compileElementSelector:function(r,t,o){if(!_(r))throw Error("$elemMatch need an object");var i,a;return y(r,!0)?(i=n(r,o),a=!1):(i=e(r,o,{inElemMatch:!0}),a=!0),function(e){if(!v(e))return!1;for(var r=0;r<e.length;++r){var t=e[r],n;if(a){if(!_(t)&&!v(t))return!1;n=t}else n=[{value:t,dontIterate:!0}];if(i(n).result)return r}return!1}}}},E=function(e,t){t=t||{};var n=e.split("."),o=n.length?n[0]:"",i=g(o),a=n.length>=2&&g(n[1]),s;n.length>1&&(s=E(n.slice(1).join(".")));var c=function(e){return e.dontIterate||delete e.dontIterate,e.arrayIndices&&!e.arrayIndices.length&&delete e.arrayIndices,e};return function(e,n){if(n||(n=[]),v(e)){if(!(i&&o<e.length))return[];n=n.concat(+o,"x")}var u=e[o];if(!s)return[c({value:u,dontIterate:v(e)&&v(u),arrayIndices:n})];if(!m(u))return v(e)?[]:[c({value:void 0,arrayIndices:n})];var d=[],f=function(e){Array.prototype.push.apply(d,e)};return f(s(u,n)),!v(u)||a&&t.forSort||r.each(u,function(e,r){_(e)&&f(s(e,n.concat(r)))}),d}},h.makeLookupFunction=E,I=function(e,t){var n=[];return r.each(e,function(e){var o=v(e.value);t&&o&&!e.dontIterate||n.push({value:e.value,arrayIndices:e.arrayIndices}),o&&!e.dontIterate&&r.each(e.value,function(r,t){n.push({value:r,arrayIndices:(e.arrayIndices||[]).concat(t)})})}),n};var S=function(e){return{result:!1}},j=function(e){return{result:!0}},A=function(e){return 0===e.length?j:1===e.length?e[0]:function(t){var n={};return n.result=r.all(e,function(e){var r=e(t);return r.result&&void 0!==r.distance&&void 0===n.distance&&(n.distance=r.distance),r.result&&r.arrayIndices&&(n.arrayIndices=r.arrayIndices),r.result}),n.result||(delete n.distance,delete n.arrayIndices),n}},M=A,P=A;f._f={_type:function(e){return"number"==typeof e?1:"string"==typeof e?2:"boolean"==typeof e?8:v(e)?4:null===e?10:e instanceof RegExp?11:"function"==typeof e?13:e instanceof Date?9:t.isBinary(e)?5:e instanceof s.ObjectID?7:3},_equal:function(e,r){return t.equals(e,r,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(e,r){if(void 0===e)return void 0===r?0:-1;if(void 0===r)return 1;var t=f._f._type(e),n=f._f._type(r),o=f._f._typeorder(t),i=f._f._typeorder(n);if(o!==i)return i>o?-1:1;if(t!==n)throw Error("Missing type coercion logic in _cmp");if(7===t&&(t=n=2,e=e.toHexString(),r=r.toHexString()),9===t&&(t=n=1,e=e.getTime(),r=r.getTime()),1===t)return e-r;if(2===n)return r>e?-1:e===r?0:1;if(3===t){var a=function(e){var r=[];for(var t in e)r.push(t),r.push(e[t]);return r};return f._f._cmp(a(e),a(r))}if(4===t)for(var s=0;;s++){if(s===e.length)return s===r.length?0:-1;if(s===r.length)return 1;var c=f._f._cmp(e[s],r[s]);if(0!==c)return c}if(5===t){if(e.length!==r.length)return e.length-r.length;for(s=0;s<e.length;s++){if(e[s]<r[s])return-1;if(e[s]>r[s])return 1}return 0}if(8===t)return e?r?0:1:r?-1:0;if(10===t)return 0;if(11===t)throw Error("Sorting not supported on regular expression");if(13===t)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},f._removeDollarOperators=function(e){var r={};for(var t in e)"$"!==t.substr(0,1)&&(r[t]=e[t]);return r}}.call(this),function(){l.Sorter=function(t,n){var o=this;n=n||{},o._sortSpecParts=[];var i=function(e,r){if(!e)throw Error("sort keys must be non-empty");if("$"===e.charAt(0))throw Error("unsupported sort key: "+e);o._sortSpecParts.push({path:e,lookup:E(e,{forSort:!0}),ascending:r})};if(t instanceof Array)for(var a=0;a<t.length;a++)"string"==typeof t[a]?i(t[a],!0):i(t[a][0],"desc"!==t[a][1]);else{if("object"!=typeof t)throw Error("Bad sort specification: "+JSON.stringify(t));r.each(t,function(e,r){i(r,e>=0)})}if(o.affectedByModifier){var s={};r.each(o._sortSpecParts,function(e){s[e.path]=1}),o._selectorForAffectedByModifier=new l.Matcher(s)}o._keyComparator=e(r.map(o._sortSpecParts,function(e,r){return o._keyFieldComparator(r)})),o._keyFilter=null,n.matcher&&o._useWithMatcher(n.matcher)},r.extend(l.Sorter.prototype,{getComparator:function(r){var t=this;if(!r||!r.distances)return t._getBaseComparator();var n=r.distances;return e([t._getBaseComparator(),function(e,r){if(!n.has(e._id))throw Error("Missing distance for "+e._id);if(!n.has(r._id))throw Error("Missing distance for "+r._id);return n.get(e._id)-n.get(r._id)}])},_getPaths:function(){var e=this;return r.pluck(e._sortSpecParts,"path")},_getMinKeyFromDoc:function(e){var r=this,t=null;if(r._generateKeysFromDoc(e,function(e){return r._keyCompatibleWithSelector(e)?null===t?void(t=e):void(r._compareKeys(e,t)<0&&(t=e)):void 0}),null===t)throw Error("sort selector found no keys in doc?");return t},_keyCompatibleWithSelector:function(e){var r=this;return!r._keyFilter||r._keyFilter(e)},_generateKeysFromDoc:function(e,t){var n=this;if(0===n._sortSpecParts.length)throw new Error("can't generate keys without a spec");var o=[],i=function(e){return e.join(",")+","},a=null;if(r.each(n._sortSpecParts,function(t,n){var s=I(t.lookup(e),!0);s.length||(s=[{value:null}]);var c=!1;if(o[n]={},r.each(s,function(e){if(!e.arrayIndices){if(s.length>1)throw Error("multiple branches but no array used?");return void(o[n][""]=e.value)}c=!0;var t=i(e.arrayIndices);if(r.has(o[n],t))throw Error("duplicate path: "+t);if(o[n][t]=e.value,a&&!r.has(a,t))throw Error("cannot index parallel arrays")}),a){if(!r.has(o[n],"")&&r.size(a)!==r.size(o[n]))throw Error("cannot index parallel arrays!")}else c&&(a={},r.each(o[n],function(e,r){a[r]=!0}))}),!a){var s=r.map(o,function(e){if(!r.has(e,""))throw Error("no value in sole key case?");return e[""]});return void t(s)}r.each(a,function(e,n){var i=r.map(o,function(e){if(r.has(e,""))return e[""];if(!r.has(e,n))throw Error("missing path?");return e[n]});t(i)})},_compareKeys:function(e,r){var t=this;if(e.length!==t._sortSpecParts.length||r.length!==t._sortSpecParts.length)throw Error("Key has wrong length");return t._keyComparator(e,r)},_keyFieldComparator:function(e){var r=this,t=!r._sortSpecParts[e].ascending;return function(r,n){var o=f._f._cmp(r[e],n[e]);return t&&(o=-o),o}},_getBaseComparator:function(){var e=this;return e._sortSpecParts.length?function(r,t){var n=e._getMinKeyFromDoc(r),o=e._getMinKeyFromDoc(t);return e._compareKeys(n,o)}:function(e,r){return 0}},_useWithMatcher:function(e){var t=this;if(t._keyFilter)throw Error("called _useWithMatcher twice?");if(!r.isEmpty(t._sortSpecParts)){var n=e._selector;if(!(n instanceof Function)){var o={};r.each(t._sortSpecParts,function(e,r){o[e.path]=[]}),r.each(n,function(e,t){var n=o[t];if(n){if(e instanceof RegExp){if(e.ignoreCase||e.multiline)return;return void n.push(w(e))}return y(e)?void r.each(e,function(t,o){r.contains(["$lt","$lte","$gt","$gte"],o)&&n.push(b[o].compileElementSelector(t)),"$regex"!==o||e.$options||n.push(b.$regex.compileElementSelector(t,e))}):void n.push($(e))}}),r.isEmpty(o[t._sortSpecParts[0].path])||(t._keyFilter=function(e){return r.all(t._sortSpecParts,function(t,n){return r.all(o[t.path],function(r){return r(e[n])})})})}}}});var e=function(e){return function(r,t){for(var n=0;n<e.length;++n){var o=e[n](r,t);if(0!==o)return o}return 0}}}.call(this),function(){f._compileProjection=function(e){f._checkSupportedProjection(e);var n=r.isUndefined(e._id)?!0:e._id,o=C(e),i=function(e,n){if(r.isArray(e))return r.map(e,function(e){return i(e,n)});var a=o.including?{}:t.clone(e);return r.each(n,function(n,s){r.has(e,s)&&(r.isObject(n)?r.isObject(e[s])&&(a[s]=i(e[s],n)):o.including?a[s]=t.clone(e[s]):delete a[s])}),a};return function(e){var t=i(e,o.tree);return n&&r.has(e,"_id")&&(t._id=e._id),!n&&r.has(t,"_id")&&delete t._id,t}},C=function(e){var t=r.keys(e).sort();!(t.length>0)||1===t.length&&"_id"===t[0]||r.contains(t,"_id")&&e._id||(t=r.reject(t,function(e){return"_id"===e}));var n=null;r.each(t,function(r){var t=!!e[r];if(null===n&&(n=t),n!==t)throw p("You cannot currently mix including and excluding fields.")});var o=O(t,function(e){return n},function(e,r,t){var n=t,o=r;throw p("both "+n+" and "+o+" found in fields option, using both of them may trigger unexpected behavior. Did you mean to use only one of them?")});return{tree:o,including:n}},O=function(e,t,n,o){return o=o||{},r.each(e,function(e){var i=o,a=e.split("."),s=r.all(a.slice(0,-1),function(t,o){if(r.has(i,t)){if(!r.isObject(i[t])&&(i[t]=n(i[t],a.slice(0,o+1).join("."),e),!r.isObject(i[t])))return!1}else i[t]={};return i=i[t],!0});if(s){var c=r.last(a);r.has(i,c)?i[c]=n(i[c],e,e):i[c]=t(e)}}),o},f._checkSupportedProjection=function(e){if(!r.isObject(e)||r.isArray(e))throw p("fields option must be an object");r.each(e,function(e,t){if(r.contains(t.split("."),"$"))throw p("Minimongo doesn't support $ operator in projections yet.");if("object"==typeof e&&r.intersection(["$elemMatch","$meta","$slice"],r.keys(e)).length>0)throw p("Minimongo doesn't support operators in projections yet.");if(-1===r.indexOf([1,0,!0,!1],e))throw p("Projection values should be one of 1, 0, true, or false")})}}.call(this),function(){f._modify=function(i,a,s){if(s=s||{},!_(a))throw p("Modifier must be an object");a=t.clone(a);var c=y(a),u;if(c)u=t.clone(i),r.each(a,function(t,i){var a=o[i];if(s.isInsert&&"$setOnInsert"===i&&(a=o.$set),!a)throw p("Invalid modifier specified "+i);r.each(t,function(t,o){if(""===o)throw p("An empty update path is not valid.");if("_id"===o)throw p("Mod on _id not allowed");var c=o.split(".");if(!r.all(c,r.identity))throw p("The update path '"+o+"' contains an empty field name, which is not allowed.");var d=r.has(n,i),f="$rename"===i,l=e(u,c,{noCreate:n[i],forbidArray:"$rename"===i,arrayIndices:s.arrayIndices}),h=c.pop();a(l,h,t,o,u)})});else{if(a._id&&!t.equals(i._id,a._id))throw p("Cannot change the _id of a document");for(var d in a)if(/\./.test(d))throw p("When replacing document, field name may not contain '.'");u=a}r.each(r.keys(i),function(e){"_id"!==e&&delete i[e]}),r.each(u,function(e,r){i[r]=e})};var e=function(e,r,t){t=t||{};for(var n=!1,o=0;o<r.length;o++){var i=o===r.length-1,a=r[o],s=m(e);if(!s){if(t.noCreate)return void 0;var c=p("cannot use the part '"+a+"' to traverse "+e);throw c.setPropertyError=!0,c}if(e instanceof Array){if(t.forbidArray)return null;if("$"===a){if(n)throw p("Too many positional (i.e. '$') elements");if(!t.arrayIndices||!t.arrayIndices.length)throw p("The positional operator did not find the match needed from the query");a=t.arrayIndices[0],n=!0}else{if(!g(a)){if(t.noCreate)return void 0;throw p("can't append to array using string field name ["+a+"]")}a=parseInt(a)}if(i&&(r[o]=a),t.noCreate&&a>=e.length)return void 0;for(;e.length<a;)e.push(null);if(!i)if(e.length===a)e.push({});else if("object"!=typeof e[a])throw p("can't modify field '"+r[o+1]+"' of list value "+JSON.stringify(e[a]))}else{if(a.length&&"$"===a.substr(0,1))throw p("can't set field named "+a);if(!(a in e)){if(t.noCreate)return void 0;i||(e[a]={})}}if(i)return e;e=e[a]}},n={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},o={$inc:function(e,r,t){if("number"!=typeof t)throw p("Modifier $inc allowed for numbers only");if(r in e){if("number"!=typeof e[r])throw p("Cannot apply $inc modifier to non-number");e[r]+=t}else e[r]=t},$set:function(e,t,n){if(!r.isObject(e)){var o=p("Cannot set property on non-object field");throw o.setPropertyError=!0,o}if(null===e){var o=p("Cannot set property on null");throw o.setPropertyError=!0,o}e[t]=n},$setOnInsert:function(e,r,t){},$unset:function(e,r,t){void 0!==e&&(e instanceof Array?r in e&&(e[r]=null):delete e[r])},$push:function(e,r,t){if(void 0===e[r]&&(e[r]=[]),!(e[r]instanceof Array))throw p("Cannot apply $push modifier to non-array");if(!t||!t.$each)return void e[r].push(t);var n=t.$each;if(!(n instanceof Array))throw p("$each must be an array");var o=void 0;if("$position"in t){if("number"!=typeof t.$position)throw p("$position must be a numeric value");if(t.$position<0)throw p("$position in $push must be zero or positive");o=t.$position}var i=void 0;if("$slice"in t){if("number"!=typeof t.$slice)throw p("$slice must be a numeric value");if(t.$slice>0)throw p("$slice in $push must be zero or negative");i=t.$slice}var a=void 0;if(t.$sort){if(void 0===i)throw p("$sort requires $slice to be present");a=new l.Sorter(t.$sort).getComparator();for(var s=0;s<n.length;s++)if(3!==f._f._type(n[s]))throw p("$push like modifiers using $sort require all elements to be objects")}if(void 0===o)for(var c=0;c<n.length;c++)e[r].push(n[c]);else{for(var u=[o,0],c=0;c<n.length;c++)u.push(n[c]);Array.prototype.splice.apply(e[r],u)}a&&e[r].sort(a),void 0!==i&&(0===i?e[r]=[]:e[r]=e[r].slice(i))},$pushAll:function(e,r,t){if(!("object"==typeof t&&t instanceof Array))throw p("Modifier $pushAll/pullAll allowed for arrays only");var n=e[r];if(void 0===n)e[r]=t;else{if(!(n instanceof Array))throw p("Cannot apply $pushAll modifier to non-array");for(var o=0;o<t.length;o++)n.push(t[o])}},$addToSet:function(e,t,n){var o=!1;if("object"==typeof n)for(var i in n){"$each"===i&&(o=!0);break}var a=o?n.$each:[n],s=e[t];if(void 0===s)e[t]=a;else{if(!(s instanceof Array))throw p("Cannot apply $addToSet modifier to non-array");

r.each(a,function(e){for(var r=0;r<s.length;r++)if(f._f._equal(e,s[r]))return;s.push(e)})}},$pop:function(e,r,t){if(void 0!==e){var n=e[r];if(void 0!==n){if(!(n instanceof Array))throw p("Cannot apply $pop modifier to non-array");"number"==typeof t&&0>t?n.splice(0,1):n.pop()}}},$pull:function(e,r,t){if(void 0!==e){var n=e[r];if(void 0!==n){if(!(n instanceof Array))throw p("Cannot apply $pull/pullAll modifier to non-array");var o=[];if(null==t||"object"!=typeof t||t instanceof Array)for(var i=0;i<n.length;i++)f._f._equal(n[i],t)||o.push(n[i]);else for(var a=new l.Matcher(t),i=0;i<n.length;i++)a.documentMatches(n[i]).result||o.push(n[i]);e[r]=o}}},$pullAll:function(e,r,t){if(!("object"==typeof t&&t instanceof Array))throw p("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==e){var n=e[r];if(void 0!==n){if(!(n instanceof Array))throw p("Cannot apply $pull/pullAll modifier to non-array");for(var o=[],i=0;i<n.length;i++){for(var a=!1,s=0;s<t.length;s++)if(f._f._equal(n[i],t[s])){a=!0;break}a||o.push(n[i])}e[r]=o}}},$rename:function(r,t,n,o,i){if(o===n)throw p("$rename source must differ from target");if(null===r)throw p("$rename source field invalid");if("string"!=typeof n)throw p("$rename target must be a string");if(void 0!==r){var a=r[t];delete r[t];var s=n.split("."),c=e(i,s,{forbidArray:!0});if(null===c)throw p("$rename target field invalid");var u=s.pop();c[u]=a}},$bit:function(e,r,t){throw p("$bit is not supported")}}}.call(this),function(){f._diffQueryChanges=function(e,r,t,n,o){return u.diffQueryChanges(e,r,t,n,o)},f._diffQueryUnorderedChanges=function(e,r,t,n){return u.diffQueryUnorderedChanges(e,r,t,n)},f._diffQueryOrderedChanges=function(e,r,t,n){return u.diffQueryOrderedChanges(e,r,t,n)},f._diffObjects=function(e,r,t){return u.diffObjects(e,r,t)}}.call(this),function(){f._IdMap=function(){var e=this;n.call(e,s.idStringify,s.idParse)},e._inherits(f._IdMap,n)}.call(this),function(){f._CachingChangeObserver=function(e){var n=this;e=e||{};var i=e.callbacks&&f._observeChangesCallbacksAreOrdered(e.callbacks);if(r.has(e,"ordered")){if(n.ordered=e.ordered,e.callbacks&&e.ordered!==i)throw Error("ordered option doesn't match callbacks")}else{if(!e.callbacks)throw Error("must provide ordered or callbacks");n.ordered=i}var a=e.callbacks||{};n.ordered?(n.docs=new o(s.idStringify),n.applyChange={addedBefore:function(e,r,o){var i=t.clone(r);i._id=e,a.addedBefore&&a.addedBefore.call(n,e,r,o),a.added&&a.added.call(n,e,r),n.docs.putBefore(e,i,o||null)},movedBefore:function(e,r){var t=n.docs.get(e);a.movedBefore&&a.movedBefore.call(n,e,r),n.docs.moveBefore(e,r||null)}}):(n.docs=new f._IdMap,n.applyChange={added:function(e,r){var o=t.clone(r);a.added&&a.added.call(n,e,r),o._id=e,n.docs.set(e,o)}}),n.applyChange.changed=function(e,r){var o=n.docs.get(e);if(!o)throw new Error("Unknown id for changed: "+e);a.changed&&a.changed.call(n,e,t.clone(r)),u.applyChanges(o,r)},n.applyChange.removed=function(e){a.removed&&a.removed.call(n,e),n.docs.remove(e)}},f._observeFromObserveChanges=function(e,n){var o=e.getTransform()||function(e){return e},i=!!n._suppress_initial,a;if(f._observeCallbacksAreOrdered(n)){var s=!n._no_indices;a={addedBefore:function(e,t,a){var c=this;if(!i&&(n.addedAt||n.added)){var u=o(r.extend(t,{_id:e}));if(n.addedAt){var d=s?a?c.docs.indexOf(a):c.docs.size():-1;n.addedAt(u,d,a)}else n.added(u)}},changed:function(e,r){var i=this;if(n.changedAt||n.changed){var a=t.clone(i.docs.get(e));if(!a)throw new Error("Unknown id for changed: "+e);var c=o(t.clone(a));if(u.applyChanges(a,r),a=o(a),n.changedAt){var d=s?i.docs.indexOf(e):-1;n.changedAt(a,c,d)}else n.changed(a,c)}},movedBefore:function(e,r){var i=this;if(n.movedTo){var a=s?i.docs.indexOf(e):-1,c=s?r?i.docs.indexOf(r):i.docs.size():-1;c>a&&--c,n.movedTo(o(t.clone(i.docs.get(e))),a,c,r||null)}},removed:function(e){var r=this;if(n.removedAt||n.removed){var t=o(r.docs.get(e));if(n.removedAt){var i=s?r.docs.indexOf(e):-1;n.removedAt(t,i)}else n.removed(t)}}}}else a={added:function(e,t){if(!i&&n.added){var a=r.extend(t,{_id:e});n.added(o(a))}},changed:function(e,r){var i=this;if(n.changed){var a=i.docs.get(e),s=t.clone(a);u.applyChanges(s,r),n.changed(o(s),o(t.clone(a)))}},removed:function(e){var r=this;n.removed&&n.removed(o(r.docs.get(e)))}};var c=new f._CachingChangeObserver({callbacks:a}),d=e.observeChanges(c.applyChange);return i=!1,d}}.call(this),function(){f._selectorIsId=function(e){return"string"==typeof e||"number"==typeof e||e instanceof s.ObjectID},f._selectorIsIdPerhapsAsObject=function(e){return f._selectorIsId(e)||e&&"object"==typeof e&&e._id&&f._selectorIsId(e._id)&&1===r.size(e)},f._idsMatchedBySelector=function(e){if(f._selectorIsId(e))return[e];if(!e)return null;if(r.has(e,"_id"))return f._selectorIsId(e._id)?[e._id]:e._id&&e._id.$in&&r.isArray(e._id.$in)&&!r.isEmpty(e._id.$in)&&r.all(e._id.$in,f._selectorIsId)?e._id.$in:null;if(e.$and&&r.isArray(e.$and))for(var t=0;t<e.$and.length;++t){var n=f._idsMatchedBySelector(e.$and[t]);if(n)return n}return null}}.call(this),"undefined"==typeof Package&&(Package={}),Package.minimongo={LocalCollection:f,Minimongo:l,MinimongoTest:h}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,r=Package.random.Random,i;(function(){i=function(e){var r=this;t.extend(r,t.defaults(t.clone(e||{}),{baseTimeout:1e3,exponent:2.2,maxTimeout:3e5,minTimeout:10,minCount:2,fuzz:.5})),r.retryTimer=null},t.extend(i.prototype,{clear:function(){var e=this;e.retryTimer&&clearTimeout(e.retryTimer),e.retryTimer=null},_timeout:function(e){var t=this;if(e<t.minCount)return t.minTimeout;var i=Math.min(t.maxTimeout,t.baseTimeout*Math.pow(t.exponent,e));return i*=r.fraction()*t.fuzz+(1-t.fuzz/2)},retryLater:function(t,r){var i=this,n=i._timeout(t);return i.retryTimer&&clearTimeout(i.retryTimer),i.retryTimer=e.setTimeout(r,n),n}})}).call(this),"undefined"==typeof Package&&(Package={}),Package.retry={Retry:i}}();

!function(){var e=Package.meteor.Meteor,t=Package.check.check,a=Package.check.Match,n=Package.random.Random,r=Package.ejson.EJSON,i=Package.underscore._,o=Package.tracker.Tracker,s=Package.tracker.Deps,c=Package.retry.Retry,l;(function(){l={}}).call(this),function(){l.Heartbeat=function(e){var t=this;t.heartbeatInterval=e.heartbeatInterval,t.heartbeatTimeout=e.heartbeatTimeout,t._sendPing=e.sendPing,t._onTimeout=e.onTimeout,t._seenPacket=!1,t._heartbeatIntervalHandle=null,t._heartbeatTimeoutHandle=null},i.extend(l.Heartbeat.prototype,{stop:function(){var e=this;e._clearHeartbeatIntervalTimer(),e._clearHeartbeatTimeoutTimer()},start:function(){var e=this;e.stop(),e._startHeartbeatIntervalTimer()},_startHeartbeatIntervalTimer:function(){var t=this;t._heartbeatIntervalHandle=e.setInterval(i.bind(t._heartbeatIntervalFired,t),t.heartbeatInterval)},_startHeartbeatTimeoutTimer:function(){var t=this;t._heartbeatTimeoutHandle=e.setTimeout(i.bind(t._heartbeatTimeoutFired,t),t.heartbeatTimeout)},_clearHeartbeatIntervalTimer:function(){var t=this;t._heartbeatIntervalHandle&&(e.clearInterval(t._heartbeatIntervalHandle),t._heartbeatIntervalHandle=null)},_clearHeartbeatTimeoutTimer:function(){var t=this;t._heartbeatTimeoutHandle&&(e.clearTimeout(t._heartbeatTimeoutHandle),t._heartbeatTimeoutHandle=null)},_heartbeatIntervalFired:function(){var e=this;e._seenPacket||e._heartbeatTimeoutHandle||(e._sendPing(),e._startHeartbeatTimeoutTimer()),e._seenPacket=!1},_heartbeatTimeoutFired:function(){var e=this;e._heartbeatTimeoutHandle=null,e._onTimeout()},messageReceived:function(){var e=this;e._seenPacket=!0,e._heartbeatTimeoutHandle&&e._clearHeartbeatTimeoutTimer()}})}.call(this),function(){l.SUPPORTED_DDP_VERSIONS=["1","pre2","pre1"],l.parseDDP=function(t){try{var a=JSON.parse(t)}catch(n){return e._debug("Discarding message with invalid JSON",t),null}return null===a||"object"!=typeof a?(e._debug("Discarding non-object DDP message",t),null):(i.has(a,"cleared")&&(i.has(a,"fields")||(a.fields={}),i.each(a.cleared,function(e){a.fields[e]=void 0}),delete a.cleared),i.each(["fields","params","result"],function(e){i.has(a,e)&&(a[e]=r._adjustTypesFromJSONValue(a[e]))}),a)},l.stringifyDDP=function(e){var t=r.clone(e);if(i.has(e,"fields")){var a=[];i.each(e.fields,function(e,n){void 0===e&&(a.push(n),delete t.fields[n])}),i.isEmpty(a)||(t.cleared=a),i.isEmpty(t.fields)&&delete t.fields}if(i.each(["fields","params","result"],function(e){i.has(t,e)&&(t[e]=r._adjustTypesToJSONValue(t[e]))}),e.id&&"string"!=typeof e.id)throw new Error("Message id is not a string");return JSON.stringify(t)}}.call(this),function(){l.MethodInvocation=function(e){var t=this;this.isSimulation=e.isSimulation,this._unblock=e.unblock||function(){},this._calledUnblock=!1,this.userId=e.userId,this._setUserId=e.setUserId||function(){},this.connection=e.connection,this.randomSeed=e.randomSeed,this.randomStream=null},i.extend(l.MethodInvocation.prototype,{unblock:function(){var e=this;e._calledUnblock=!0,e._unblock()},setUserId:function(e){var t=this;if(t._calledUnblock)throw new Error("Can't call setUserId in a method after calling unblock");t.userId=e,t._setUserId(e)}})}.call(this),function(){function e(){return n.hexString(20)}l.RandomStream=function(t){var a=this;this.seed=[].concat(t.seed||e()),this.sequences={}},l.RandomStream.get=function(e,t){if(t||(t="default"),!e)return n.insecure;var a=e.randomStream;return a||(e.randomStream=a=new l.RandomStream({seed:e.randomSeed})),a._sequence(t)},l.makeRpcSeed=function(e,t){var a=l.RandomStream.get(e,"/rpc/"+t);return a.hexString(20)},i.extend(l.RandomStream.prototype,{_sequence:function(e){var t=this,a=t.sequences[e]||null;if(null===a){for(var r=t.seed.concat(e),o=0;o<r.length;o++)i.isFunction(r[o])&&(r[o]=r[o]());t.sequences[e]=a=n.createWithSeeds.apply(null,r)}return a}})}.call(this),"undefined"==typeof Package&&(Package={}),Package["ddp-common"]={DDPCommon:l}}();

!function(){var a=Package.meteor.Meteor,t=Package.underscore._,e;(function(){e={};var o="Meteor_Reload",r={},n,i=null;try{i=window.sessionStorage,i?(i.setItem("__dummy__","1"),i.removeItem("__dummy__")):i=null}catch(l){i=null}e._getData=function(){return i&&i.getItem(o)},i&&(n=e._getData(),i.removeItem(o)),n||(n="{}");var d={};try{d=JSON.parse(n),"object"!=typeof d&&(a._debug("Got bad data on reload. Ignoring."),d={})}catch(c){a._debug("Got invalid JSON on reload. Ignoring.")}d.reload&&"object"==typeof d.data&&(r=d.data);var g=[];e._onMigrate=function(a,t){t||(t=a,a=void 0),g.push({name:a,callback:t})},e._migrationData=function(a){return r[a]};var u=function(a,e){a=a||function(){},e=e||{};for(var o={},r=t.clone(g),n=!0;r.length;){var i=r.shift(),l=i.callback(a,e);l[0]||(n=!1),l.length>1&&i.name&&(o[i.name]=l[1])}return n||e.immediateMigration?o:null};e._migrate=function(t,e){var r=u(t,e);if(null===r)return!1;try{var n=JSON.stringify({data:r,reload:!0})}catch(l){throw a._debug("Couldn't serialize data for migration",r),l}if(i)try{i.setItem(o,n)}catch(l){a._debug("Couldn't save data for migration to sessionStorage",l)}else a._debug("Browser does not support sessionStorage. Not saving migration state.");return!0},e._withFreshProvidersForTest=function(a){var e=t.clone(g);g=[];try{a()}finally{g=e}};var s=!1;e._reload=function(a){if(a=a||{},!s){s=!0;var o=function(){t.defer(function(){e._migrate(o,a)&&window.location.reload()})};o()}}}).call(this),function(){a._reload={onMigrate:e._onMigrate,migrationData:e._migrationData,reload:e._reload}}.call(this),"undefined"==typeof Package&&(Package={}),Package.reload={Reload:e}}();

!function(){var e=Package.meteor.Meteor,t=Package.check.check,n=Package.check.Match,r=Package.random.Random,o=Package.ejson.EJSON,i=Package.underscore._,s=Package.tracker.Tracker,a=Package.tracker.Deps,u=Package.retry.Retry,c=Package["id-map"].IdMap,d=Package["ddp-common"].DDPCommon,l=Package["diff-sequence"].DiffSequence,f=Package["mongo-id"].MongoID,p,_,h,v,m,g,b;(function(){p={},_={}}).call(this),function(){h=function(){var e=this;c.call(e,f.idStringify,f.idParse)},e._inherits(h,c)}.call(this),function(){v=function(){var e=document,t=window,n={},r=function(){};r.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===n.arrIndexOf(r,t)&&r.push(t)},r.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var r=this._listeners[e],o=n.arrIndexOf(r,t);return-1!==o?void(r.length>1?this._listeners[e]=r.slice(0,o).concat(r.slice(o+1)):delete this._listeners[e]):void 0}},r.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].apply(this,n)};var o=function(e,t){if(this.type=e,"undefined"!=typeof t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};o.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var i=function(e){var t=this;t._events=e||[],t._listeners={}};i.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var r=0;r<t._listeners[e].length;r++)t._listeners[e][r].apply(t,n)}},i.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},i.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+JSON.stringify(e)+" not listed "+JSON.stringify(t._events)+" in "+t)},i.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}};var s="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||s.length;var n,r=[];for(n=0;e>n;n++)r.push(s.substr(Math.floor(Math.random()*t),1));return r.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length,r=Array(t+1).join("0");return(r+n.random_number(e)).slice(-t)},n.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.isSameOriginScheme=function(e,n){return n||(n=t.location.href),e.split(":")[0]===n.split(":")[0]},n.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var a="_jp";n.polluteGlobalNamespace=function(){a in t||(t[a]={})},n.closeFrame=function(e,t){return"c"+JSON.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&4999>=e},n.countRTO=function(e){var t;return t=e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t,r){var o;if(void 0===r)o=e.location;else{var i=/^([a-z0-9.+-]+:)/i.exec(r);if(i){var s=i[0].toLowerCase(),a=r.substring(s.length),u=/[a-z0-9\.-]+(:[0-9]+)?/.exec(a);if(u)var c=u[0]}if(!s||!c)throw new Error("relativeTo must be an absolute url");o={protocol:s,host:c}}if(!t)throw new Error("Wrong url for SockJS");if(!n.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");0===t.indexOf("//")&&(t=o.protocol+t),0===t.indexOf("/")&&(t=o.protocol+"//"+o.host+t),t=t.replace(/[/]+$/,"");var d=t.split("/");return("http:"===d[0]&&/:80$/.test(d[2])||"https:"===d[0]&&/:443$/.test(d[2]))&&(d[2]=d[2].replace(/:(80|443)$/,"")),t=d.join("/")},n.arrIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var r=n.arrIndexOf(e,t);if(-1===r)return e.slice();var o=e.slice(0,r);return o.concat(e.slice(r+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","":"\\u00ad","":"\\u0600","":"\\u0601","":"\\u0602","":"\\u0603","":"\\u0604","":"\\u070f","":"\\u17b4","":"\\u17b5","":"\\u200c","":"\\u200d","":"\\u200e","":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u202a","":"\\u202b","":"\\u202c","":"\\u202d","":"\\u202e","":"\\u202f","":"\\u2060","":"\\u2061","":"\\u2062","":"\\u2063","":"\\u2064","":"\\u2065","":"\\u2066","":"\\u2067","":"\\u2068","":"\\u2069","":"\\u206a","":"\\u206b","":"\\u206c","":"\\u206d","":"\\u206e","":"\\u206f","\ufeff":"\\ufeff","":"\\ufff0","":"\\ufff1","":"\\ufff2","":"\\ufff3","":"\\ufff4","":"\\ufff5","":"\\ufff6","":"\\ufff7","":"\\ufff8","":"\\ufff9","":"\\ufffa","":"\\ufffb","":"\\ufffc","":"\\ufffd","":"\\ufffe","":"\\uffff"},d=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,l,f=JSON&&JSON.stringify||function(e){return u.lastIndex=0,u.test(e)&&(e=e.replace(u,function(e){return c[e]})),'"'+e+'"'},p=function(e){var t,n={},r=[];for(t=0;65536>t;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};n.quote=function(e){var t=f(e);return d.lastIndex=0,d.test(t)?(l||(l=p(d)),t.replace(d,function(e){return l[e]})):t};var _=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;t<_.length;t++){var n=_[t];e[n]=C[n]&&C[n].enabled()}return e},n.detectProtocols=function(e,t,n){var r={},o=[];t||(t=_);for(var i=0;i<t.length;i++){var s=t[i];r[s]=e[s]}var a=function(e){var t=e.shift();r[t]?o.push(t):e.length>0&&a(e)};return n.websocket!==!1&&a(["websocket"]),r["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!r["xdr-streaming"]||n.cookie_needed||n.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),r["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!r["xdr-polling"]||n.cookie_needed||n.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var h="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(h in t)){var r={};t[h]=function(e){return e in r||(r[e]={id:e,del:function(){delete r[e]}}),r[e]}}return t[h](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,r){"undefined"!=typeof t.addEventListener?t.addEventListener(n,r,!1):(e.attachEvent("on"+n,r),t.attachEvent("on"+n,r))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,r){"undefined"!=typeof t.addEventListener?t.removeEventListener(n,r,!1):(e.detachEvent("on"+n,r),t.detachEvent("on"+n,r))};var v={},m=!1,g=function(){for(var e in v)v[e](),delete v[e]},b=function(){m||(m=!0,g())};n.attachEvent("unload",b),n.unload_add=function(e){var t=n.random_string(8);return v[t]=e,m&&n.delay(g),t},n.unload_del=function(e){e in v&&delete v[e]},n.createIframe=function(t,r){var o=e.createElement("iframe"),i,s,a=function(){clearTimeout(i);try{o.onload=null}catch(e){}o.onerror=null},u=function(){o&&(a(),setTimeout(function(){o&&o.parentNode.removeChild(o),o=null},0),n.unload_del(s))},c=function(e){o&&(u(),r(e))},d=function(e,t){try{o&&o.contentWindow&&o.contentWindow.postMessage(e,t)}catch(n){}};return o.src=t,o.style.display="none",o.style.position="absolute",o.onerror=function(){c("onerror")},o.onload=function(){clearTimeout(i),i=setTimeout(function(){c("onload timeout")},2e3)},e.body.appendChild(o),i=setTimeout(function(){c("timeout")},15e3),s=n.unload_add(u),{post:d,cleanup:u,loaded:a}},n.createHtmlfile=function(e,r){var o=new ActiveXObject("htmlfile"),i,s,u,c=function(){clearTimeout(i)},d=function(){o&&(c(),n.unload_del(s),u.parentNode.removeChild(u),u=o=null,CollectGarbage())},l=function(e){o&&(d(),r(e))},f=function(e,t){try{u&&u.contentWindow&&u.contentWindow.postMessage(e,t)}catch(n){}};o.open(),o.write('<html><script>document.domain="'+document.domain+'";</script></html>'),o.close(),o.parentWindow[a]=t[a];var p=o.createElement("div");return o.body.appendChild(p),u=o.createElement("iframe"),p.appendChild(u),u.src=e,i=setTimeout(function(){l("timeout")},15e3),s=n.unload_add(d),{post:f,cleanup:d,loaded:c}};var y=function(){};y.prototype=new i(["chunk","finish"]),y.prototype._start=function(e,r,o,i){var s=this;try{s.xhr=new XMLHttpRequest}catch(a){}if(!s.xhr)try{s.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}(t.ActiveXObject||t.XDomainRequest)&&(r+=(-1===r.indexOf("?")?"?":"&")+"t="+ +new Date),s.unload_ref=n.unload_add(function(){s._cleanup(!0)});try{s.xhr.open(e,r,!0)}catch(u){return s.emit("finish",0,""),void s._cleanup()}if(i&&i.no_credentials||(s.xhr.withCredentials="true"),i&&i.headers)for(var c in i.headers)s.xhr.setRequestHeader(c,i.headers[c]);s.xhr.onreadystatechange=function(){if(s.xhr){var e=s.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&s.emit("chunk",t,n);break;case 4:var t=e.status;1223===t&&(t=204),s.emit("finish",t,e.responseText),s._cleanup(!1)}}},s.xhr.send(o)},y.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(r){}t.unload_ref=t.xhr=null}},y.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)};var w=n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})};w.prototype=new y;var S=n.XHRLocalObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r,{no_credentials:!0})})};S.prototype=new y;var k=n.XDRObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r)})};k.prototype=new i(["chunk","finish"]),k.prototype._start=function(e,t,r){var o=this,i=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var s=i.ontimeout=i.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};i.onprogress=function(){o.emit("chunk",200,i.responseText)},i.onload=function(){o.emit("finish",200,i.responseText),o._cleanup(!1)},o.xdr=i,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(e,t),o.xdr.send(r)}catch(a){s()}},k.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(r){}t.unload_ref=t.xdr=null}},k.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:A.enabled()?3:4};var C=function(e,t,r){if(!(this instanceof C))return new C(e,t,r);var o=this,i;o._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},r&&n.objectExtend(o._options,r),o._base_url=n.amendUrl(e),o._server=o._options.server||n.random_number_string(1e3),o._options.protocols_whitelist&&o._options.protocols_whitelist.length?i=o._options.protocols_whitelist:(i="string"==typeof t&&t.length>0?[t]:n.isArray(t)?t:null,i&&o._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),o._protocols=[],o.protocol=null,o.readyState=C.CONNECTING,o._ir=V(o._base_url),o._ir.onfinish=function(e,t){o._ir=null,e?(o._options.info&&(e=n.objectExtend(e,o._options.info)),o._options.rtt&&(t=o._options.rtt),o._applyInfo(e,t,i),o._didClose()):o._didClose(1002,"Can't connect to server",!0)}};C.prototype=new r,C.version="0.3.4",C.CONNECTING=0,C.OPEN=1,C.CLOSING=2,C.CLOSED=3,C.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},C.prototype._dispatchOpen=function(){var e=this;e.readyState===C.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=C.OPEN,e.dispatchEvent(new o("open"))):e._didClose(1006,"Server lost session")},C.prototype._dispatchMessage=function(e){var t=this;t.readyState===C.OPEN&&t.dispatchEvent(new o("message",{data:e}))},C.prototype._dispatchHeartbeat=function(e){var t=this;t.readyState===C.OPEN&&t.dispatchEvent(new o("heartbeat",{}))},C.prototype._didClose=function(e,t,r){var i=this;if(i.readyState!==C.CONNECTING&&i.readyState!==C.OPEN&&i.readyState!==C.CLOSING)throw new Error("INVALID_STATE_ERR");i._ir&&(i._ir.nuke(),i._ir=null),i._transport&&(i._transport.doCleanup(),i._transport=null);var s=new o("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&i.readyState===C.CONNECTING&&!r){if(i._try_next_protocol(s))return;s=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:s})}i.readyState=C.CLOSED,n.delay(function(){i.dispatchEvent(s)})},C.prototype._didMessage=function(e){var t=this,n=e.slice(0,1);switch(n){case"o":t._dispatchOpen();break;case"a":for(var r=JSON.parse(e.slice(1)||"[]"),o=0;o<r.length;o++)t._dispatchMessage(r[o]);break;case"m":var r=JSON.parse(e.slice(1)||"null");t._dispatchMessage(r);break;case"c":var r=JSON.parse(e.slice(1)||"[]");t._didClose(r[0],r[1]);break;case"h":t._dispatchHeartbeat()}},C.prototype._try_next_protocol=function(t){var r=this;for(r.protocol&&(r._debug("Closed transport:",r.protocol,""+t),r.protocol=null),r._transport_tref&&(clearTimeout(r._transport_tref),r._transport_tref=null);;){var o=r.protocol=r._protocols.shift();if(!o)return!1;if(C[o]&&C[o].need_body===!0&&(!e.body||"undefined"!=typeof e.readyState&&"complete"!==e.readyState))return r._protocols.unshift(o),r.protocol="waiting-for-load",n.attachEvent("load",function(){r._try_next_protocol()}),!0;if(C[o]&&C[o].enabled(r._options)){var i=C[o].roundTrips||1,s=(r._options.rto||0)*i||5e3;r._transport_tref=n.delay(s,function(){r.readyState===C.CONNECTING&&r._didClose(2007,"Transport timeouted")});var a=n.random_string(8),u=r._base_url+"/"+r._server+"/"+a;return r._debug("Opening transport:",o," url:"+u," RTO:"+r._options.rto),r._transport=new C[o](r,u,r._base_url),!0}r._debug("Skipping transport:",o)}},C.prototype.close=function(e,t){var r=this;if(e&&!n.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return r.readyState!==C.CONNECTING&&r.readyState!==C.OPEN?!1:(r.readyState=C.CLOSING,r._didClose(e||1e3,t||"Normal closure"),!0)},C.prototype.send=function(e){var t=this;if(t.readyState===C.CONNECTING)throw new Error("INVALID_STATE_ERR");return t.readyState===C.OPEN&&t._transport.doSend(n.quote(""+e)),!0},C.prototype._applyInfo=function(t,r,o){var i=this;i._options.info=t,i._options.rtt=r,i._options.rto=n.countRTO(r),i._options.info.null_origin=!e.domain,t.base_url&&(i._base_url=n.amendUrl(t.base_url,i._base_url));var s=n.probeProtocols();i._protocols=n.detectProtocols(s,o,t),n.isSameOriginScheme(i._base_url)||2!==n.isXHRCorsCapable()||(i._protocols=["jsonp-polling"])};var E=C.websocket=function(e,r){var o=this,i=r+"/websocket";i="https"===i.slice(0,5)?"wss"+i.slice(5):"ws"+i.slice(4),o.ri=e,o.url=i;var s=t.WebSocket||t.MozWebSocket;o.ws=new s(o.url),o.ws.onmessage=function(e){o.ri._didMessage(e.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};E.prototype.doSend=function(e){this.ws.send("["+e+"]")},E.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},E.enabled=function(){return!(!t.WebSocket&&!t.MozWebSocket)},E.roundTrips=2;var O=function(){};O.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},O.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},O.prototype.send_schedule_wait=function(){var e=this,t;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=n.delay(25,function(){e.send_stop=null,e.send_schedule()})},O.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,t===!1?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},O.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var T=function(t,r,o){var i=this;if(!("_send_form"in i)){var s=i._send_form=e.createElement("form"),a=i._send_area=e.createElement("textarea");a.name="d",s.style.display="none",s.style.position="absolute",s.method="POST",s.enctype="application/x-www-form-urlencoded",s.acceptCharset="UTF-8",s.appendChild(a),e.body.appendChild(s)}var s=i._send_form,a=i._send_area,u="a"+n.random_string(8);s.target=u,s.action=t+"/jsonp_send?i="+u;var c;try{c=e.createElement('<iframe name="'+u+'">')}catch(d){c=e.createElement("iframe"),c.name=u}c.id=u,s.appendChild(c),c.style.display="none";try{a.value=r}catch(l){n.log("Your browser is seriously broken. Go home! "+l.message)}s.submit();var f=function(e){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,n.delay(500,function(){c.parentNode.removeChild(c),c=null}),a.value="",o(!0))};return c.onerror=c.onload=f,c.onreadystatechange=function(e){"complete"==c.readyState&&f()},f},D=function(e){return function(t,n,r){var o=new e("POST",t+"/xhr_send",n);return o.onfinish=function(e,t){r(200===e||204===e,"http status "+e)},function(e){r(!1,e)}}},x=function(t,r){var o,i=e.createElement("script"),s,a=function(e){s&&(s.parentNode.removeChild(s),s=null),i&&(clearTimeout(o),i.parentNode.removeChild(i),i.onreadystatechange=i.onerror=i.onload=i.onclick=null,i=null,r(e),r=null)},u=!1,c=null;if(i.id="a"+n.random_string(8),i.src=t,i.type="text/javascript",i.charset="UTF-8",i.onerror=function(e){c||(c=setTimeout(function(){u||a(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},i.onload=function(e){a(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},i.onreadystatechange=function(e){if(/loaded|closed/.test(i.readyState)){if(i&&i.htmlFor&&i.onclick){u=!0;try{i.onclick()}catch(t){}}i&&a(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof i.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))s=e.createElement("script"),s.text="try{var a = document.getElementById('"+i.id+"'); if(a)a.onerror();}catch(x){};",i.async=s.async=!1;else{try{i.htmlFor=i.id,i.event="onclick"}catch(d){}i.async=!0}"undefined"!=typeof i.async&&(i.async=!0),o=setTimeout(function(){a(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var l=e.getElementsByTagName("head")[0];return l.insertBefore(i,l.firstChild),s&&l.insertBefore(s,l.firstChild),a},M=C["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var r=this;r.ri=e,r.trans_url=t,r.send_constructor(T),r._schedule_recv()};M.prototype=new O,M.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=R(e.trans_url+"/jsonp",x,t)},M.enabled=function(){return!0},M.need_body=!0,M.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var R=function(e,r,o){var i="a"+n.random_string(6),s=e+"?c="+escape(a+"."+i),u=0,c=function(e){switch(u){case 0:delete t[a][i],o(e);break;case 1:o(e),u=2;break;case 2:delete t[a][i]}},d=r(s,c);t[a][i]=d;var l=function(){t[a][i]&&(u=1,t[a][i](n.closeFrame(1e3,"JSONP user aborted read")))};return l},I=function(){};I.prototype=new O,I.prototype.run=function(e,t,n,r,o){var i=this;i.ri=e,i.trans_url=t,i.send_constructor(D(o)),i.poll=new K(e,r,t+n,o)},I.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var P=C["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",re,n.XHRCorsObject)};P.prototype=new I,P.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},P.roundTrips=2,P.need_body=!0;var N=C["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",re,n.XDRObject)};N.prototype=new I,N.enabled=function(){return!!t.XDomainRequest},N.roundTrips=2;var j=C["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",re,n.XHRCorsObject)};j.prototype=new I,j.enabled=P.enabled,j.roundTrips=2;var U=C["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",re,n.XDRObject)};U.prototype=new I,U.enabled=N.enabled,U.roundTrips=2;var A=function(){};A.prototype.i_constructor=function(e,t,r){var o=this;o.ri=e,o.origin=n.getOrigin(r),o.base_url=r,o.trans_url=t;var i=r+"/iframe.html";o.ri._options.devel&&(i+="?t="+ +new Date),o.window_id=n.random_string(8),i+="#"+o.window_id,o.iframeObj=n.createIframe(i,function(e){o.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},A.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(t){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},A.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),r=e.data.slice(8,9),o=e.data.slice(9);if(n===t.window_id)switch(r){case"s":t.iframeObj.loaded(),t.postMessage("s",JSON.stringify([C.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(o)}}},A.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},A.prototype.doSend=function(e){this.postMessage("m",e)},A.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var B,L=function(e,r){parent!==t?parent.postMessage(B+e+(r||""),"*"):n.log("Can't postMessage, no parent window.",e,r)},F=function(){};F.prototype._didClose=function(e,t){L("t",n.closeFrame(e,t))},F.prototype._didMessage=function(e){L("t",e)},F.prototype._doSend=function(e){this._transport.doSend(e)},F.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,C.bootstrap_iframe=function(){var r;B=e.location.hash.slice(1);var o=function(e){if(e.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var o=e.data.slice(0,8),i=e.data.slice(8,9),s=e.data.slice(9);if(o===B)switch(i){case"s":var a=JSON.parse(s),u=a[0],c=a[1],d=a[2],l=a[3];if(u!==C.version&&n.log('Incompatibile SockJS! Main site uses: "'+u+'", the iframe: "'+C.version+'".'),!n.flatUrl(d)||!n.flatUrl(l))return void n.log("Only basic urls are supported in SockJS");if(!n.isSameOriginUrl(d)||!n.isSameOriginUrl(l))return void n.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([t.location.href,d,l])+")");r=new F,r._transport=new F[c](r,d,l);break;case"m":r._doSend(s);break;case"c":r&&r._doCleanup(),r=null}}};n.attachMessage(o),L("s")};var H=function(e,t){var r=this;n.delay(function(){r.doXhr(e,t)})};H.prototype=new i(["finish"]),H.prototype.doXhr=function(e,t){var r=this,o=(new Date).getTime(),i=new t("GET",e+"/info?cb="+n.random_string(10)),s=n.delay(8e3,function(){i.ontimeout()});i.onfinish=function(e,t){if(clearTimeout(s),s=null,200===e){var n=(new Date).getTime()-o,i=JSON.parse(t);"object"!=typeof i&&(i={}),r.emit("finish",i,n)}else r.emit("finish")},i.ontimeout=function(){i.close(),r.emit("finish")}};var X=function(t){var r=this,o=function(){var e=new A;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=JSON.parse(t.substr(1)),o=n[0],i=n[1];r.emit("finish",o,i)}else r.emit("finish");e.doCleanup(),e=null},o={_options:{},_didClose:n,_didMessage:n};e.i_constructor(o,t,t)};e.body?o():n.attachEvent("load",o)};X.prototype=new i(["finish"]);var J=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};J.prototype=new i(["finish"]);var V=function(e){if(n.isSameOriginUrl(e))return new H(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new H(e,n.XHRLocalObject);case 2:return n.isSameOriginScheme(e)?new H(e,n.XDRObject):new J;case 3:return new X(e);default:return new J}},W=F["w-iframe-info-receiver"]=function(e,t,r){var o=new H(r,n.XHRLocalObject);o.onfinish=function(t,n){e._didMessage("m"+JSON.stringify([t,n])),e._didClose()}};W.prototype.doCleanup=function(){};var q=C["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};q.prototype=new A,q.enabled=function(){return"EventSource"in t&&A.enabled()},q.need_body=!0,q.roundTrips=3;var G=F["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",Z,n.XHRLocalObject)};G.prototype=new I;var Q=C["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};Q.prototype=new A,Q.enabled=function(){return t.XMLHttpRequest&&A.enabled()},Q.need_body=!0,Q.roundTrips=3;var z=F["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",re,n.XHRLocalObject)};z.prototype=new I;var $=C["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};$.prototype=new A,$.enabled=function(){return A.enabled()},$.need_body=!0,$.roundTrips=3;var Y=F["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",ne,n.XHRLocalObject)};Y.prototype=new I;var K=function(e,t,n,r){var o=this;o.ri=e,o.Receiver=t,o.recv_url=n,o.AjaxObject=r,o._scheduleRecv()};K.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},K.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var Z=function(e){var t=this,r=new EventSource(e);r.onmessage=function(e){t.dispatchEvent(new o("message",{data:unescape(e.data)}))},t.es_close=r.onerror=function(e,i){var s=i?"user":2!==r.readyState?"network":"permanent";t.es_close=r.onmessage=r.onerror=null,r.close(),r=null,n.delay(200,function(){t.dispatchEvent(new o("close",{reason:s}))})}};Z.prototype=new r,Z.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var ee,te=function(){if(void 0===ee)if("ActiveXObject"in t)try{ee=!!new ActiveXObject("htmlfile")}catch(e){}else ee=!1;return ee},ne=function(e){var r=this;n.polluteGlobalNamespace(),r.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(a+"."+r.id);var i=te()?n.createHtmlfile:n.createIframe,s;t[a][r.id]={start:function(){s.loaded()},message:function(e){r.dispatchEvent(new o("message",{data:e}))},stop:function(){r.iframe_close({},"network")}},r.iframe_close=function(e,n){s.cleanup(),r.iframe_close=s=null,delete t[a][r.id],r.dispatchEvent(new o("close",{reason:n}))},s=i(e,function(e){r.iframe_close({},"permanent")})};ne.prototype=new r,ne.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var re=function(e,t){var n=this,r=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var i=t.slice(r),s=i.indexOf("\n");if(-1===s)break;r+=s+1;var a=i.slice(0,s);n.dispatchEvent(new o("message",{data:a}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var r=200===e?"network":"permanent";n.dispatchEvent(new o("close",{reason:r}))}};return re.prototype=new r,re.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new o("close",{reason:"user"})),e.xo=null)},C.getUtils=function(){return n},C.getIframeTransport=function(){return A},C}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return v})}.call(this),function(){_.ClientStream=function(e,t){var n=this;n.options=i.extend({retry:!0},t),n._initCommon(n.options),n.HEARTBEAT_TIMEOUT=1e5,n.rawUrl=e,n.socket=null,n.heartbeatTimer=null,"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("online",i.bind(n._online,n),!1),n._launchConnection()},i.extend(_.ClientStream.prototype,{send:function(e){var t=this;t.currentStatus.connected&&t.socket.send(e)},_changeUrl:function(e){var t=this;t.rawUrl=e},_connected:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.currentStatus.connected||(e.currentStatus.status="connected",e.currentStatus.connected=!0,e.currentStatus.retryCount=0,e.statusChanged(),i.each(e.eventCallbacks.reset,function(e){e()}))},_cleanup:function(e){var t=this;t._clearConnectionAndHeartbeatTimers(),t.socket&&(t.socket.onmessage=t.socket.onclose=t.socket.onerror=t.socket.onheartbeat=function(){},t.socket.close(),t.socket=null),i.each(t.eventCallbacks.disconnect,function(t){t(e)})},_clearConnectionAndHeartbeatTimers:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),e.heartbeatTimer=null)},_heartbeat_timeout:function(){var t=this;e._debug("Connection timeout. No sockjs heartbeat received."),t._lostConnection(new p.ConnectionError("Heartbeat timed out"))},_heartbeat_received:function(){var e=this;e._forcedToDisconnect||(e.heartbeatTimer&&clearTimeout(e.heartbeatTimer),e.heartbeatTimer=setTimeout(i.bind(e._heartbeat_timeout,e),e.HEARTBEAT_TIMEOUT))},_sockjsProtocolsWhitelist:function(){
var e=["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],t=navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&/OS 4_|OS 5_/.test(navigator.userAgent);return t||(e=["websocket"].concat(e)),e},_launchConnection:function(){var t=this;t._cleanup();var n=i.extend({protocols_whitelist:t._sockjsProtocolsWhitelist()},t.options._sockjsOptions);t.socket=new v(m(t.rawUrl),void 0,n),t.socket.onopen=function(e){t._connected()},t.socket.onmessage=function(e){t._heartbeat_received(),t.currentStatus.connected&&i.each(t.eventCallbacks.message,function(t){t(e.data)})},t.socket.onclose=function(){t._lostConnection()},t.socket.onerror=function(){e._debug("stream error",i.toArray(arguments),(new Date).toDateString())},t.socket.onheartbeat=function(){t._heartbeat_received()},t.connectionTimer&&clearTimeout(t.connectionTimer),t.connectionTimer=setTimeout(function(){t._lostConnection(new p.ConnectionError("DDP connection timed out"))},t.CONNECT_TIMEOUT)}})}.call(this),function(){var t=function(e,t){return e.length>=t.length&&e.substring(0,t.length)===t},n=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t},o=function(o,i,s){i||(i="http");var a=o.match(/^ddp(i?)\+sockjs:\/\//),u=o.match(/^http(s?):\/\//),c;if(a){var d=o.substr(a[0].length);c="i"===a[1]?i:i+"s";var l=d.indexOf("/"),f=-1===l?d:d.substr(0,l),p=-1===l?"":d.substr(l);return f=f.replace(/\*/g,function(){return Math.floor(10*r.fraction())}),c+"://"+f+p}if(u){c=u[1]?i+"s":i;var _=o.substr(u[0].length);o=c+"://"+_}return-1!==o.indexOf("://")||t(o,"/")||(o=i+"://"+o),o=e._relativeToSiteRootUrl(o),n(o,"/")?o+s:o+"/"+s};m=function(e){return o(e,"http","sockjs")},g=function(e){var t=o(e,"ws","websocket");return t},_.toSockjsUrl=m,i.extend(_.ClientStream.prototype,{on:function(e,t){var n=this;if("message"!==e&&"reset"!==e&&"disconnect"!==e)throw new Error("unknown event type: "+e);n.eventCallbacks[e]||(n.eventCallbacks[e]=[]),n.eventCallbacks[e].push(t)},_initCommon:function(e){var t=this;e=e||{},t.CONNECT_TIMEOUT=e.connectTimeoutMs||1e4,t.eventCallbacks={},t._forcedToDisconnect=!1,t.currentStatus={status:"connecting",connected:!1,retryCount:0},t.statusListeners="undefined"!=typeof s&&new s.Dependency,t.statusChanged=function(){t.statusListeners&&t.statusListeners.changed()},t._retry=new u,t.connectionTimer=null},reconnect:function(e){var t=this;return e=e||{},e.url&&t._changeUrl(e.url),e._sockjsOptions&&(t.options._sockjsOptions=e._sockjsOptions),t.currentStatus.connected?void((e._force||e.url)&&t._lostConnection(new p.ForcedReconnectError)):("connecting"===t.currentStatus.status&&t._lostConnection(),t._retry.clear(),t.currentStatus.retryCount-=1,void t._retryNow())},disconnect:function(e){var t=this;e=e||{},t._forcedToDisconnect||(e._permanent&&(t._forcedToDisconnect=!0),t._cleanup(),t._retry.clear(),t.currentStatus={status:e._permanent?"failed":"offline",connected:!1,retryCount:0},e._permanent&&e._error&&(t.currentStatus.reason=e._error),t.statusChanged())},_lostConnection:function(e){var t=this;t._cleanup(e),t._retryLater(e)},_online:function(){"offline"!=this.currentStatus.status&&this.reconnect()},_retryLater:function(e){var t=this,n=0;t.options.retry||e&&"DDP.ForcedReconnectError"===e.errorType?(n=t._retry.retryLater(t.currentStatus.retryCount,i.bind(t._retryNow,t)),t.currentStatus.status="waiting",t.currentStatus.retryTime=(new Date).getTime()+n):(t.currentStatus.status="failed",delete t.currentStatus.retryTime),t.currentStatus.connected=!1,t.statusChanged()},_retryNow:function(){var e=this;e._forcedToDisconnect||(e.currentStatus.retryCount+=1,e.currentStatus.status="connecting",e.currentStatus.connected=!1,delete e.currentStatus.retryTime,e.statusChanged(),e._launchConnection())},status:function(){var e=this;return e.statusListeners&&e.statusListeners.depend(),e.currentStatus}}),p.ConnectionError=e.makeErrorType("DDP.ConnectionError",function(e){var t=this;t.message=e}),p.ForcedReconnectError=e.makeErrorType("DDP.ForcedReconnectError",function(){})}.call(this),function(){_.SUPPORTED_DDP_VERSIONS=d.SUPPORTED_DDP_VERSIONS,p._CurrentInvocation=new e.EnvironmentVariable}.call(this),function(){p.randomStream=function(e){var t=p._CurrentInvocation.get();return d.RandomStream.get(t,e)}}.call(this),function(){if(e.isServer)var t=Npm.require("path"),n=Npm.require("fibers"),a=Npm.require(t.join("fibers","future"));var u=function(t,n){var r=this;n=i.extend({onConnected:function(){},onDDPVersionNegotiationFailure:function(t){e._debug(t)},heartbeatInterval:17500,heartbeatTimeout:15e3,reloadWithOutstanding:!1,supportedDDPVersions:d.SUPPORTED_DDP_VERSIONS,retry:!0,respondToPings:!0},n),r.onReconnect=null,"object"==typeof t?r._stream=t:r._stream=new _.ClientStream(t,{retry:n.retry,headers:n.headers,_sockjsOptions:n._sockjsOptions,_dontPrintErrors:n._dontPrintErrors,connectTimeoutMs:n.connectTimeoutMs}),r._lastSessionId=null,r._versionSuggestion=null,r._version=null,r._stores={},r._methodHandlers={},r._nextMethodId=1,r._supportedDDPVersions=n.supportedDDPVersions,r._heartbeatInterval=n.heartbeatInterval,r._heartbeatTimeout=n.heartbeatTimeout,r._methodInvokers={},r._outstandingMethodBlocks=[],r._documentsWrittenByStub={},r._serverDocuments={},r._afterUpdateCallbacks=[],r._messagesBufferedUntilQuiescence=[],r._methodsBlockingQuiescence={},r._subsBeingRevived={},r._resetStores=!1,r._updatesForUnknownStores={},r._retryMigrate=null,r._subscriptions={},r._userId=null,r._userIdDeps=new s.Dependency,e.isClient&&Package.reload&&!n.reloadWithOutstanding&&Package.reload.Reload._onMigrate(function(e){if(r._readyToMigrate())return[!0];if(r._retryMigrate)throw new Error("Two migrations in progress?");return r._retryMigrate=e,!1});var o=function(t){try{var o=d.parseDDP(t)}catch(s){return void e._debug("Exception while parsing DDP",s)}if(r._heartbeat&&r._heartbeat.messageReceived(),null===o||!o.msg)return void(o&&o.server_id||e._debug("discarding invalid livedata message",o));if("connected"===o.msg)r._version=r._versionSuggestion,r._livedata_connected(o),n.onConnected();else if("failed"===o.msg)if(i.contains(r._supportedDDPVersions,o.version))r._versionSuggestion=o.version,r._stream.reconnect({_force:!0});else{var a="DDP version negotiation failed; server requested version "+o.version;r._stream.disconnect({_permanent:!0,_error:a}),n.onDDPVersionNegotiationFailure(a)}else"ping"===o.msg&&n.respondToPings?r._send({msg:"pong",id:o.id}):"pong"===o.msg||(i.include(["added","changed","removed","ready","updated"],o.msg)?r._livedata_data(o):"nosub"===o.msg?r._livedata_nosub(o):"result"===o.msg?r._livedata_result(o):"error"===o.msg?r._livedata_error(o):e._debug("discarding unknown livedata message type",o))},a=function(){var e={msg:"connect"};r._lastSessionId&&(e.session=r._lastSessionId),e.version=r._versionSuggestion||r._supportedDDPVersions[0],r._versionSuggestion=e.version,e.support=r._supportedDDPVersions,r._send(e),!i.isEmpty(r._outstandingMethodBlocks)&&i.isEmpty(r._outstandingMethodBlocks[0].methods)&&r._outstandingMethodBlocks.shift(),i.each(r._methodInvokers,function(e){e.sentMessage=!1}),r.onReconnect?r._callOnReconnectAndSendAppropriateOutstandingMethods():r._sendOutstandingMethods(),i.each(r._subscriptions,function(e,t){r._send({msg:"sub",id:t,name:e.name,params:e.params})})},u=function(){r._heartbeat&&(r._heartbeat.stop(),r._heartbeat=null)};e.isServer?(r._stream.on("message",e.bindEnvironment(o,"handling DDP message")),r._stream.on("reset",e.bindEnvironment(a,"handling DDP reset")),r._stream.on("disconnect",e.bindEnvironment(u,"handling DDP disconnect"))):(r._stream.on("message",o),r._stream.on("reset",a),r._stream.on("disconnect",u))},c=function(e){var t=this;t.methodId=e.methodId,t.sentMessage=!1,t._callback=e.callback,t._connection=e.connection,t._message=e.message,t._onResultReceived=e.onResultReceived||function(){},t._wait=e.wait,t._methodResult=null,t._dataVisible=!1,t._connection._methodInvokers[t.methodId]=t};i.extend(c.prototype,{sendMessage:function(){var e=this;if(e.gotResult())throw new Error("sendingMethod is called on method with result");e._dataVisible=!1,e.sentMessage=!0,e._wait&&(e._connection._methodsBlockingQuiescence[e.methodId]=!0),e._connection._send(e._message)},_maybeInvokeCallback:function(){var e=this;e._methodResult&&e._dataVisible&&(e._callback(e._methodResult[0],e._methodResult[1]),delete e._connection._methodInvokers[e.methodId],e._connection._outstandingMethodFinished())},receiveResult:function(e,t){var n=this;if(n.gotResult())throw new Error("Methods should only receive results once");n._methodResult=[e,t],n._onResultReceived(e,t),n._maybeInvokeCallback()},dataVisible:function(){var e=this;e._dataVisible=!0,e._maybeInvokeCallback()},gotResult:function(){var e=this;return!!e._methodResult}}),i.extend(u.prototype,{registerStore:function(e,t){var n=this;if(e in n._stores)return!1;var r={};i.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals","getDoc"],function(e){r[e]=function(){return t[e]?t[e].apply(t,arguments):void 0}}),n._stores[e]=r;var o=n._updatesForUnknownStores[e];return o&&(r.beginUpdate(o.length,!1),i.each(o,function(e){r.update(e)}),r.endUpdate(),delete n._updatesForUnknownStores[e]),!0},subscribe:function(e){var t=this,n=Array.prototype.slice.call(arguments,1),a={};if(n.length){var u=n[n.length-1];i.isFunction(u)?a.onReady=n.pop():u&&i.any([u.onReady,u.onError,u.onStop],i.isFunction)&&(a=n.pop())}var c=i.find(t._subscriptions,function(t){return t.inactive&&t.name===e&&o.equals(t.params,n)}),d;c?(d=c.id,c.inactive=!1,a.onReady&&(c.ready||(c.readyCallback=a.onReady)),a.onError&&(c.errorCallback=a.onError),a.onStop&&(c.stopCallback=a.onStop)):(d=r.id(),t._subscriptions[d]={id:d,name:e,params:o.clone(n),inactive:!1,ready:!1,readyDeps:new s.Dependency,readyCallback:a.onReady,errorCallback:a.onError,stopCallback:a.onStop,connection:t,remove:function(){delete this.connection._subscriptions[this.id],this.ready&&this.readyDeps.changed()},stop:function(){this.connection._send({msg:"unsub",id:d}),this.remove(),a.onStop&&a.onStop()}},t._send({msg:"sub",id:d,name:e,params:n}));var l={stop:function(){i.has(t._subscriptions,d)&&t._subscriptions[d].stop()},ready:function(){if(!i.has(t._subscriptions,d))return!1;var e=t._subscriptions[d];return e.readyDeps.depend(),e.ready},subscriptionId:d};return s.active&&s.onInvalidate(function(e){i.has(t._subscriptions,d)&&(t._subscriptions[d].inactive=!0),s.afterFlush(function(){i.has(t._subscriptions,d)&&t._subscriptions[d].inactive&&l.stop()})}),l},_subscribeAndWait:function(e,t,n){var r=this,o=new a,i=!1,s;return t=t||[],t.push({onReady:function(){i=!0,o["return"]()},onError:function(e){i?n&&n.onLateError&&n.onLateError(e):o["throw"](e)}}),s=r.subscribe.apply(r,[e].concat(t)),o.wait(),s},methods:function(e){var t=this;i.each(e,function(e,n){if("function"!=typeof e)throw new Error("Method '"+n+"' must be a function");if(t._methodHandlers[n])throw new Error("A method named '"+n+"' is already defined");t._methodHandlers[n]=e})},call:function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length&&"function"==typeof t[t.length-1])var n=t.pop();return this.apply(e,t,n)},apply:function(t,n,r,s){var u=this;s||"function"!=typeof r||(s=r,r={}),r=r||{},s&&(s=e.bindEnvironment(s,"delivering result of invoking '"+t+"'")),n=o.clone(n);var l=function(){var e;return function(){return void 0===e&&(e=""+u._nextMethodId++),e}}(),f=p._CurrentInvocation.get(),_=f&&f.isSimulation,h=null,v=function(){return null===h&&(h=d.makeRpcSeed(f,t)),h},m=u._methodHandlers[t];if(m){var g=function(e){u.setUserId(e)},b=new d.MethodInvocation({isSimulation:!0,userId:u.userId(),setUserId:g,randomSeed:function(){return v()}});_||u._saveOriginals();try{var y=p._CurrentInvocation.withValue(b,function(){return e.isServer?e._noYieldsAllowed(function(){return m.apply(b,o.clone(n))}):m.apply(b,o.clone(n))})}catch(w){var S=w}_||u._retrieveAndStoreOriginals(l())}if(_){if(s)return void s(S,y);if(S)throw S;return y}if(S){if(r.throwStubExceptions)throw S;S.expected||e._debug("Exception while simulating the effect of invoking '"+t+"'",S,S.stack)}if(!s)if(e.isClient)s=function(n){n&&e._debug("Error invoking Method '"+t+"':",n.message)};else{var k=new a;s=k.resolver()}var C={msg:"method",method:t,params:n,id:l()};null!==h&&(C.randomSeed=h);var E=new c({methodId:l(),callback:s,connection:u,onResultReceived:r.onResultReceived,wait:!!r.wait,message:C});return r.wait?u._outstandingMethodBlocks.push({wait:!0,methods:[E]}):((i.isEmpty(u._outstandingMethodBlocks)||i.last(u._outstandingMethodBlocks).wait)&&u._outstandingMethodBlocks.push({wait:!1,methods:[]}),i.last(u._outstandingMethodBlocks).methods.push(E)),1===u._outstandingMethodBlocks.length&&E.sendMessage(),k?k.wait():r.returnStubValue?y:void 0},_saveOriginals:function(){var e=this;i.each(e._stores,function(e){e.saveOriginals()})},_retrieveAndStoreOriginals:function(e){var t=this;if(t._documentsWrittenByStub[e])throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");var n=[];i.each(t._stores,function(r,o){var s=r.retrieveOriginals();s&&s.forEach(function(r,s){n.push({collection:o,id:s}),i.has(t._serverDocuments,o)||(t._serverDocuments[o]=new h);var a=t._serverDocuments[o].setDefault(s,{});a.writtenByStubs?a.writtenByStubs[e]=!0:(a.document=r,a.flushCallbacks=[],a.writtenByStubs={},a.writtenByStubs[e]=!0)})}),i.isEmpty(n)||(t._documentsWrittenByStub[e]=n)},_unsubscribeAll:function(){var e=this;i.each(i.clone(e._subscriptions),function(t,n){"meteor_autoupdate_clientVersions"!==t.name&&e._subscriptions[n].stop()})},_send:function(e){var t=this;t._stream.send(d.stringifyDDP(e))},_lostConnection:function(e){var t=this;t._stream._lostConnection(e)},status:function(){var e=this;return e._stream.status.apply(e._stream,arguments)},reconnect:function(){var e=this;return e._stream.reconnect.apply(e._stream,arguments)},disconnect:function(){var e=this;return e._stream.disconnect.apply(e._stream,arguments)},close:function(){var e=this;return e._stream.disconnect({_permanent:!0})},userId:function(){var e=this;return e._userIdDeps&&e._userIdDeps.depend(),e._userId},setUserId:function(e){var t=this;t._userId!==e&&(t._userId=e,t._userIdDeps&&t._userIdDeps.changed())},_waitingForQuiescence:function(){var e=this;return!i.isEmpty(e._subsBeingRevived)||!i.isEmpty(e._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var e=this;return i.any(i.pluck(e._methodInvokers,"sentMessage"))},_livedata_connected:function(e){var t=this;if("pre1"!==t._version&&0!==t._heartbeatInterval&&(t._heartbeat=new d.Heartbeat({heartbeatInterval:t._heartbeatInterval,heartbeatTimeout:t._heartbeatTimeout,onTimeout:function(){t._lostConnection(new p.ConnectionError("DDP heartbeat timed out"))},sendPing:function(){t._send({msg:"ping"})}}),t._heartbeat.start()),t._lastSessionId&&(t._resetStores=!0),"string"==typeof e.session){var n=t._lastSessionId===e.session;t._lastSessionId=e.session}n||(t._updatesForUnknownStores={},t._resetStores&&(t._documentsWrittenByStub={},t._serverDocuments={}),t._afterUpdateCallbacks=[],t._subsBeingRevived={},i.each(t._subscriptions,function(e,n){e.ready&&(t._subsBeingRevived[n]=!0)}),t._methodsBlockingQuiescence={},t._resetStores&&i.each(t._methodInvokers,function(e){e.gotResult()?t._afterUpdateCallbacks.push(i.bind(e.dataVisible,e)):e.sentMessage&&(t._methodsBlockingQuiescence[e.methodId]=!0)}),t._messagesBufferedUntilQuiescence=[],t._waitingForQuiescence()||(t._resetStores&&(i.each(t._stores,function(e){e.beginUpdate(0,!0),e.endUpdate()}),t._resetStores=!1),t._runAfterUpdateCallbacks()))},_processOneDataMessage:function(e,t){var n=this;n["_process_"+e.msg](e,t)},_livedata_data:function(e){var t=this,n={};if(t._waitingForQuiescence()){if(t._messagesBufferedUntilQuiescence.push(e),"nosub"===e.msg&&delete t._subsBeingRevived[e.id],i.each(e.subs||[],function(e){delete t._subsBeingRevived[e]}),i.each(e.methods||[],function(e){delete t._methodsBlockingQuiescence[e]}),t._waitingForQuiescence())return;i.each(t._messagesBufferedUntilQuiescence,function(e){t._processOneDataMessage(e,n)}),t._messagesBufferedUntilQuiescence=[]}else t._processOneDataMessage(e,n);(t._resetStores||!i.isEmpty(n))&&(i.each(t._stores,function(e,r){e.beginUpdate(i.has(n,r)?n[r].length:0,t._resetStores)}),t._resetStores=!1,i.each(n,function(e,n){var r=t._stores[n];r?i.each(e,function(e){r.update(e)}):(i.has(t._updatesForUnknownStores,n)||(t._updatesForUnknownStores[n]=[]),Array.prototype.push.apply(t._updatesForUnknownStores[n],e))}),i.each(t._stores,function(e){e.endUpdate()})),t._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var e=this,t=e._afterUpdateCallbacks;e._afterUpdateCallbacks=[],i.each(t,function(e){e()})},_pushUpdate:function(e,t,n){var r=this;i.has(e,t)||(e[t]=[]),e[t].push(n)},_getServerDoc:function(e,t){var n=this;if(!i.has(n._serverDocuments,e))return null;var r=n._serverDocuments[e];return r.get(t)||null},_process_added:function(e,t){var n=this,r=f.idParse(e.id),o=n._getServerDoc(e.collection,r);if(o){var i=void 0!==o.document;if(o.document=e.fields||{},o.document._id=r,n._resetStores){var s=n._stores[e.collection].getDoc(e.id);void 0!==s&&(e.fields=s),n._pushUpdate(t,e.collection,e)}else if(i)throw new Error("Server sent add for existing id: "+e.id)}else n._pushUpdate(t,e.collection,e)},_process_changed:function(e,t){var n=this,r=n._getServerDoc(e.collection,f.idParse(e.id));if(r){if(void 0===r.document)throw new Error("Server sent changed for nonexisting id: "+e.id);l.applyChanges(r.document,e.fields)}else n._pushUpdate(t,e.collection,e)},_process_removed:function(e,t){var n=this,r=n._getServerDoc(e.collection,f.idParse(e.id));if(r){if(void 0===r.document)throw new Error("Server sent removed for nonexisting id:"+e.id);r.document=void 0}else n._pushUpdate(t,e.collection,{msg:"removed",collection:e.collection,id:e.id})},_process_updated:function(e,t){var n=this;i.each(e.methods,function(e){i.each(n._documentsWrittenByStub[e],function(r){var o=n._getServerDoc(r.collection,r.id);if(!o)throw new Error("Lost serverDoc for "+JSON.stringify(r));if(!o.writtenByStubs[e])throw new Error("Doc "+JSON.stringify(r)+" not written by  method "+e);delete o.writtenByStubs[e],i.isEmpty(o.writtenByStubs)&&(n._pushUpdate(t,r.collection,{msg:"replace",id:f.idStringify(r.id),replace:o.document}),i.each(o.flushCallbacks,function(e){e()}),n._serverDocuments[r.collection].remove(r.id))}),delete n._documentsWrittenByStub[e];var r=n._methodInvokers[e];if(!r)throw new Error("No callback invoker for method "+e);n._runWhenAllServerDocsAreFlushed(i.bind(r.dataVisible,r))})},_process_ready:function(e,t){var n=this;i.each(e.subs,function(e){n._runWhenAllServerDocsAreFlushed(function(){var t=n._subscriptions[e];t&&(t.ready||(t.ready=!0,t.readyCallback&&t.readyCallback(),t.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(e){var t=this,n=function(){t._afterUpdateCallbacks.push(e)},r=0,o=function(){--r,0===r&&n()};i.each(t._serverDocuments,function(e){e.forEach(function(e){var n=i.any(e.writtenByStubs,function(e,n){var r=t._methodInvokers[n];return r&&r.sentMessage});n&&(++r,e.flushCallbacks.push(o))})}),0===r&&n()},_livedata_nosub:function(t){var n=this;if(n._livedata_data(t),i.has(n._subscriptions,t.id)){var r=n._subscriptions[t.id].errorCallback,o=n._subscriptions[t.id].stopCallback;n._subscriptions[t.id].remove();var s=function(t){return t&&t.error&&new e.Error(t.error.error,t.error.reason,t.error.details)};r&&t.error&&r(s(t)),o&&o(s(t))}},_process_nosub:function(){},_livedata_result:function(t){var n=this;if(i.isEmpty(n._outstandingMethodBlocks))return void e._debug("Received method result but no methods outstanding");for(var r=n._outstandingMethodBlocks[0].methods,o,s=0;s<r.length&&(o=r[s],o.methodId!==t.id);s++);return o?(r.splice(s,1),void(i.has(t,"error")?o.receiveResult(new e.Error(t.error.error,t.error.reason,t.error.details)):o.receiveResult(void 0,t.result))):void e._debug("Can't match method response to original method call",t)},_outstandingMethodFinished:function(){var e=this;if(!e._anyMethodsAreOutstanding()){if(!i.isEmpty(e._outstandingMethodBlocks)){var t=e._outstandingMethodBlocks.shift();if(!i.isEmpty(t.methods))throw new Error("No methods outstanding but nonempty block: "+JSON.stringify(t));i.isEmpty(e._outstandingMethodBlocks)||e._sendOutstandingMethods()}e._maybeMigrate()}},_sendOutstandingMethods:function(){var e=this;i.isEmpty(e._outstandingMethodBlocks)||i.each(e._outstandingMethodBlocks[0].methods,function(e){e.sendMessage()})},_livedata_error:function(t){e._debug("Received error from server: ",t.reason),t.offendingMessage&&e._debug("For: ",t.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var e=this,t=e._outstandingMethodBlocks;if(e._outstandingMethodBlocks=[],e.onReconnect(),!i.isEmpty(t)){if(i.isEmpty(e._outstandingMethodBlocks))return e._outstandingMethodBlocks=t,void e._sendOutstandingMethods();i.last(e._outstandingMethodBlocks).wait||t[0].wait||(i.each(t[0].methods,function(t){i.last(e._outstandingMethodBlocks).methods.push(t),1===e._outstandingMethodBlocks.length&&t.sendMessage()}),t.shift()),i.each(t,function(t){e._outstandingMethodBlocks.push(t)})}},_readyToMigrate:function(){var e=this;return i.isEmpty(e._methodInvokers)},_maybeMigrate:function(){var e=this;e._retryMigrate&&e._readyToMigrate()&&(e._retryMigrate(),e._retryMigrate=null)}}),_.Connection=u,p.connect=function(e,t){var n=new u(e,t);return b.push(n),n},b=[],p._allSubscriptionsReady=function(){return i.all(b,function(e){return i.all(e._subscriptions,function(e){return e.ready})})}}.call(this),function(){if(e.refresh=function(e){},e.isClient){var t="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(t=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL);var n=new u,r=function(t){if(e._debug(t),Package.reload){var r=Package.reload.Reload._migrationData("livedata")||{},o=r.DDPVersionNegotiationFailures||0;++o,Package.reload.Reload._onMigrate("livedata",function(){return[!0,{DDPVersionNegotiationFailures:o}]}),n.retryLater(o,function(){Package.reload.Reload._reload()})}};e.connection=p.connect(t,{onDDPVersionNegotiationFailure:r}),i.each(["subscribe","methods","call","apply","status","reconnect","disconnect"],function(t){e[t]=i.bind(e.connection[t],e.connection)})}else e.connection=null;e.default_connection=e.connection,e.connect=p.connect}.call(this),"undefined"==typeof Package&&(Package={}),Package["ddp-client"]={DDP:p,LivedataTest:_}}();

!function(){var e=Package.meteor.Meteor,a=Package["ddp-client"].DDP,a;"undefined"==typeof Package&&(Package={}),Package.ddp={DDP:a}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["ddp-server"]={}}();

!function(){var e=Package.meteor.Meteor,n=Package.random.Random,o=Package.ejson.EJSON,t=Package.underscore._,r=Package.minimongo.LocalCollection,i=Package.minimongo.Minimongo,c=Package["ddp-client"].DDP,l=Package.tracker.Tracker,a=Package.tracker.Deps,s=Package["diff-sequence"].DiffSequence,d=Package["mongo-id"].MongoID,u=Package.check.check,f=Package.check.Match,_,p;(function(){_=function(){var e=this;e.noConnCollections={}};var e=function(e,n){return e in n||(n[e]=new r(e)),n[e]};t.extend(_.prototype,{open:function(n,o){var t=this;return n?o?(o._mongo_livedata_collections||(o._mongo_livedata_collections={}),e(n,o._mongo_livedata_collections)):e(n,t.noConnCollections):new r}}),_=new _}).call(this),function(){p={},p.Collection=function(o,i){var l=this;if(!(l instanceof p.Collection))throw new Error('use "new" to construct a Mongo.Collection');if(o||null===o||(e._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),o=null),null!==o&&"string"!=typeof o)throw new Error("First argument to new Mongo.Collection must be a string or null");switch(i&&i.methods&&(i={connection:i}),i&&i.manager&&!i.connection&&(i.connection=i.manager),i=t.extend({connection:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},i),i.idGeneration){case"MONGO":l._makeNewID=function(){var e=o?c.randomStream("/collection/"+o):n.insecure;return new p.ObjectID(e.hexString(24))};break;case"STRING":default:l._makeNewID=function(){var e=o?c.randomStream("/collection/"+o):n.insecure;return e.id()}}if(l._transform=r.wrapTransform(i.transform),o&&null!==i.connection?i.connection?l._connection=i.connection:e.isClient?l._connection=e.connection:l._connection=e.server:l._connection=null,i._driver||(o&&l._connection===e.server&&"undefined"!=typeof MongoInternals&&MongoInternals.defaultRemoteCollectionDriver?i._driver=MongoInternals.defaultRemoteCollectionDriver():i._driver=_),l._collection=i._driver.open(o,l._connection),l._name=o,l._driver=i._driver,l._connection&&l._connection.registerStore){var a=l._connection.registerStore(o,{beginUpdate:function(e,n){(e>1||n)&&l._collection.pauseObservers(),n&&l._collection.remove({})},update:function(e){var n=d.idParse(e.id),o=l._collection.findOne(n);if("replace"===e.msg){var r=e.replace;return void(r?o?l._collection.update(n,r):l._collection.insert(r):o&&l._collection.remove(n))}if("added"===e.msg){if(o)throw new Error("Expected not to find a document already present for an add");l._collection.insert(t.extend({_id:n},e.fields))}else if("removed"===e.msg){if(!o)throw new Error("Expected to find a document already present for removed");l._collection.remove(n)}else{if("changed"!==e.msg)throw new Error("I don't know how to deal with this message");if(!o)throw new Error("Expected to find a document to change");if(!t.isEmpty(e.fields)){var i={};t.each(e.fields,function(e,n){void 0===e?(i.$unset||(i.$unset={}),i.$unset[n]=1):(i.$set||(i.$set={}),i.$set[n]=e)}),l._collection.update(n,i)}}},endUpdate:function(){l._collection.resumeObservers()},saveOriginals:function(){l._collection.saveOriginals()},retrieveOriginals:function(){return l._collection.retrieveOriginals()},getDoc:function(e){return l.findOne(e)}});if(!a)throw new Error("There is already a collection named '"+o+"'")}l._defineMutationMethods(),Package.autopublish&&!i._preventAutopublish&&l._connection&&l._connection.publish&&l._connection.publish(null,function(){return l.find()},{is_auto:!0})},t.extend(p.Collection.prototype,{_getFindSelector:function(e){return 0==e.length?{}:e[0]},_getFindOptions:function(e){var n=this;return e.length<2?{transform:n._transform}:(u(e[1],f.Optional(f.ObjectIncluding({fields:f.Optional(f.OneOf(Object,void 0)),sort:f.Optional(f.OneOf(Object,Array,void 0)),limit:f.Optional(f.OneOf(Number,void 0)),skip:f.Optional(f.OneOf(Number,void 0))}))),t.extend({transform:n._transform},e[1]))},find:function(){var e=this,n=t.toArray(arguments);return e._collection.find(e._getFindSelector(n),e._getFindOptions(n))},findOne:function(){var e=this,n=t.toArray(arguments);return e._collection.findOne(e._getFindSelector(n),e._getFindOptions(n))}}),p.Collection._publishCursor=function(e,n,o){var t=e.observeChanges({added:function(e,t){n.added(o,e,t)},changed:function(e,t){n.changed(o,e,t)},removed:function(e){n.removed(o,e)}});n.onStop(function(){t.stop()})},p.Collection._rewriteSelector=function(e){if(r._selectorIsId(e)&&(e={_id:e}),t.isArray(e))throw new Error("Mongo selector can't be an array.");if(!e||"_id"in e&&!e._id)return{_id:n.id()};var o={};return t.each(e,function(e,n){e instanceof RegExp?o[n]=i(e):e&&e.$regex instanceof RegExp?(o[n]=i(e.$regex),void 0!==e.$options&&(o[n].$options=e.$options)):t.contains(["$or","$and","$nor"],n)?o[n]=t.map(e,function(e){return p.Collection._rewriteSelector(e)}):o[n]=e}),o};var i=function(e){u(e,RegExp);var n={$regex:e.source},o="";return e.ignoreCase&&(o+="i"),e.multiline&&(o+="m"),o&&(n.$options=o),n},l=function(n,o){if(!r._selectorIsIdPerhapsAsObject(n))throw new e.Error(403,"Not permitted. Untrusted code may only "+o+" documents by ID.")};t.each(["insert","update","remove"],function(n){p.Collection.prototype[n]=function(){var o=this,r=t.toArray(arguments),i,a,s;if(r.length&&(void 0===r[r.length-1]||r[r.length-1]instanceof Function)&&(i=r.pop()),"insert"===n){if(!r.length)throw new Error("insert requires an argument");if(r[0]=t.extend({},r[0]),"_id"in r[0]){if(a=r[0]._id,!a||!("string"==typeof a||a instanceof p.ObjectID))throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs")}else{var d=!0;if(o._connection&&o._connection!==e.server){var u=c._CurrentInvocation.get();u||(d=!1)}d&&(a=r[0]._id=o._makeNewID())}}else if(r[0]=p.Collection._rewriteSelector(r[0]),"update"===n){var f=r[2]=t.clone(r[2])||{};if(f&&"function"!=typeof f&&f.upsert)if(f.insertedId){if(!("string"==typeof f.insertedId||f.insertedId instanceof p.ObjectID))throw new Error("insertedId must be string or ObjectID")}else r[0]._id||(f.insertedId=o._makeNewID())}var _=function(e){return"insert"===n?(!a&&e&&(a=e),a):e},v;if(i&&(v=function(e,n){i(e,!e&&_(n))}),o._connection&&o._connection!==e.server){var u=c._CurrentInvocation.get(),h=u&&u.isSimulation;!e.isClient||v||h||(v=function(o){o&&e._debug(n+" failed: "+(o.reason||o.stack))}),h||"insert"===n||l(r[0],n),s=_(o._connection.apply(o._prefix+n,r,{returnStubValue:!0},v))}else{r.push(v);try{var m=o._collection[n].apply(o._collection,r);s=_(m)}catch(w){if(i)return i(w),null;throw w}}return s}}),p.Collection.prototype.upsert=function(e,n,o,r){var i=this;return r||"function"!=typeof o||(r=o,o={}),i.update(e,n,t.extend({},o,{_returnObject:!0,upsert:!0}),r)},p.Collection.prototype._ensureIndex=function(e,n){var o=this;if(!o._collection._ensureIndex)throw new Error("Can only call _ensureIndex on server collections");o._collection._ensureIndex(e,n)},p.Collection.prototype._dropIndex=function(e){var n=this;if(!n._collection._dropIndex)throw new Error("Can only call _dropIndex on server collections");n._collection._dropIndex(e)},p.Collection.prototype._dropCollection=function(){var e=this;if(!e._collection.dropCollection)throw new Error("Can only call _dropCollection on server collections");e._collection.dropCollection()},p.Collection.prototype._createCappedCollection=function(e,n){var o=this;if(!o._collection._createCappedCollection)throw new Error("Can only call _createCappedCollection on server collections");o._collection._createCappedCollection(e,n)},p.Collection.prototype.rawCollection=function(){var e=this;if(!e._collection.rawCollection)throw new Error("Can only call rawCollection on server collections");return e._collection.rawCollection()},p.Collection.prototype.rawDatabase=function(){var e=this;if(!e._driver.mongo||!e._driver.mongo.db)throw new Error("Can only call rawDatabase on server collections");return e._driver.mongo.db},p.ObjectID=d.ObjectID,p.Cursor=r.Cursor,p.Collection.Cursor=p.Cursor,p.Collection.ObjectID=p.ObjectID,function(){var e=function(e,n){var o=["insert","update","remove","fetch","transform"];t.each(t.keys(n),function(n){if(!t.contains(o,n))throw new Error(e+": Invalid key: "+n)});var i=this;if(i._restricted=!0,t.each(["insert","update","remove"],function(o){if(n.hasOwnProperty(o)){if(!(n[o]instanceof Function))throw new Error(e+": Value for `"+o+"` must be a function");void 0===n.transform?n[o].transform=i._transform:n[o].transform=r.wrapTransform(n.transform),i._validators[o][e].push(n[o])}}),n.update||n.remove||n.fetch){if(n.fetch&&!(n.fetch instanceof Array))throw new Error(e+": Value for `fetch` must be an array");i._updateFetch(n.fetch)}};p.Collection.prototype.allow=function(n){e.call(this,"allow",n)},p.Collection.prototype.deny=function(n){e.call(this,"deny",n)}}(),p.Collection.prototype._defineMutationMethods=function(){var n=this;if(n._restricted=!1,n._insecure=void 0,n._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},upsert:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},n._name&&(n._prefix="/"+n._name+"/",n._connection)){var o={};t.each(["insert","update","remove"],function(r){o[n._prefix+r]=function(){u(arguments,[f.Any]);var o=t.toArray(arguments);try{var i=null;if("insert"!==r||t.has(o[0],"_id")||(i=n._makeNewID()),this.isSimulation)return null!==i&&(o[0]._id=i),n._collection[r].apply(n._collection,o);if("insert"!==r&&l(o[0],r),n._restricted){if(0===n._validators[r].allow.length)throw new e.Error(403,"Access denied. No allow validators set on restricted collection for method '"+r+"'.");var c="_validated"+r.charAt(0).toUpperCase()+r.slice(1);return o.unshift(this.userId),"insert"===r&&o.push(i),n[c].apply(n,o)}if(n._isInsecure())return null!==i&&(o[0]._id=i),n._collection[r].apply(n._collection,o);throw new e.Error(403,"Access denied")}catch(a){throw"MongoError"===a.name||"MinimongoError"===a.name?new e.Error(409,a.toString()):a}}}),(e.isClient||n._connection===e.server)&&n._connection.methods(o)}},p.Collection.prototype._updateFetch=function(e){var n=this;n._validators.fetchAllFields||(e?n._validators.fetch=t.union(n._validators.fetch,e):(n._validators.fetchAllFields=!0,n._validators.fetch=null))},p.Collection.prototype._isInsecure=function(){var e=this;return void 0===e._insecure?!!Package.insecure:e._insecure};var a=function(e,n,t){var r=n;return e.transform&&(r=o.clone(n),null!==t&&(r._id=t),r=e.transform(r)),r};p.Collection.prototype._validatedInsert=function(n,o,r){var i=this;if(t.any(i._validators.insert.deny,function(e){return e(n,a(e,o,r))}))throw new e.Error(403,"Access denied");if(t.all(i._validators.insert.allow,function(e){return!e(n,a(e,o,r))}))throw new e.Error(403,"Access denied");null!==r&&(o._id=r),i._collection.insert.call(i._collection,o)};var s=function(e,n){return e.transform?e.transform(n):n};p.Collection.prototype._validatedUpdate=function(n,o,i,c){var l=this;if(u(i,Object),c=t.clone(c)||{},!r._selectorIsIdPerhapsAsObject(o))throw new Error("validated update should be of a single ID");if(c.upsert)throw new e.Error(403,"Access denied. Upserts not allowed in a restricted collection.");var a="Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.",d=[];if(t.isEmpty(i))throw new e.Error(403,a);t.each(i,function(n,o){if("$"!==o.charAt(0))throw new e.Error(403,a);if(!t.has(v,o))throw new e.Error(403,"Access denied. Operator "+o+" not allowed in a restricted collection.");t.each(t.keys(n),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),t.contains(d,e)||d.push(e)})});var f={transform:null};l._validators.fetchAllFields||(f.fields={},t.each(l._validators.fetch,function(e){f.fields[e]=1}));var _=l._collection.findOne(o,f);if(!_)return 0;if(t.any(l._validators.update.deny,function(e){var o=s(e,_);return e(n,o,d,i)}))throw new e.Error(403,"Access denied");if(t.all(l._validators.update.allow,function(e){var o=s(e,_);return!e(n,o,d,i)}))throw new e.Error(403,"Access denied");return c._forbidReplace=!0,l._collection.update.call(l._collection,o,i,c)};var v={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};p.Collection.prototype._validatedRemove=function(n,o){var r=this,i={transform:null};r._validators.fetchAllFields||(i.fields={},t.each(r._validators.fetch,function(e){i.fields[e]=1}));var c=r._collection.findOne(o,i);if(!c)return 0;if(t.any(r._validators.remove.deny,function(e){return e(n,s(e,c))}))throw new e.Error(403,"Access denied");if(t.all(r._validators.remove.allow,function(e){return!e(n,s(e,c))}))throw new e.Error(403,"Access denied");return r._collection.remove.call(r._collection,o)},e.Collection=p.Collection}.call(this),"undefined"==typeof Package&&(Package={}),Package.mongo={Mongo:p}}();

!function(){var e=Package.meteor.Meteor,a=Package.underscore._,t=Package.tracker.Tracker,i=Package.tracker.Deps,n=Package.ejson.EJSON,s=Package.ecmascript.ECMAScript,r=Package["babel-runtime"].babelHelpers,c=Package["ecmascript-runtime"].Symbol,o=Package["ecmascript-runtime"].Map,u=Package["ecmascript-runtime"].Set,l=Package.promise.Promise,d;(function(){var e=function(e){return void 0===e?"undefined":n.stringify(e)},i=function(e){return void 0===e||"undefined"===e?void 0:n.parse(e)},s=function(e){e&&e.changed()};d=function(e){if(e)if("string"==typeof e)d._registerDictForMigrate(e,this),this.keys=d._loadMigratedDict(e)||{},this.name=e;else{if("object"!=typeof e)throw new Error("Invalid ReactiveDict argument: "+e);this.keys=e}else this.keys={};this.allDeps=new t.Dependency,this.keyDeps={},this.keyValueDeps={}},a.extend(d.prototype,{set:function(t,i){var n=this;if("object"==typeof t&&void 0===i)return void n._setObject(t);var r=t;i=e(i);var c=a.has(n.keys,r),o=c?n.keys[r]:"undefined",u=i!==o;n.keys[r]=i,(u||!c)&&n.allDeps.changed(),u&&(s(n.keyDeps[r]),n.keyValueDeps[r]&&(s(n.keyValueDeps[r][o]),s(n.keyValueDeps[r][i])))},setDefault:function(e,t){var i=this;a.has(i.keys,e)||i.set(e,t)},get:function(e){var a=this;return a._ensureKey(e),a.keyDeps[e].depend(),i(a.keys[e])},equals:function(s,r){var c=this,o=null;if(Package.mongo&&(o=Package.mongo.Mongo.ObjectID),!("string"==typeof r||"number"==typeof r||"boolean"==typeof r||"undefined"==typeof r||r instanceof Date||o&&r instanceof o||null===r))throw new Error("ReactiveDict.equals: value must be scalar");var u=e(r);if(t.active){c._ensureKey(s),a.has(c.keyValueDeps[s],u)||(c.keyValueDeps[s][u]=new t.Dependency);var l=c.keyValueDeps[s][u].depend();l&&t.onInvalidate(function(){c.keyValueDeps[s][u].hasDependents()||delete c.keyValueDeps[s][u]})}var d=void 0;return a.has(c.keys,s)&&(d=i(c.keys[s])),n.equals(d,r)},all:function(){this.allDeps.depend();var e={};return a.each(this.keys,function(a,t){e[t]=i(a)}),e},clear:function(){var e=this,t=e.keys;e.keys={},e.allDeps.changed(),a.each(t,function(a,t){s(e.keyDeps[t]),s(e.keyValueDeps[t][a]),s(e.keyValueDeps[t].undefined)})},"delete":function(e){var t=this,i=!1;if(a.has(t.keys,e)){var n=t.keys[e];delete t.keys[e],s(t.keyDeps[e]),t.keyValueDeps[e]&&(s(t.keyValueDeps[e][n]),s(t.keyValueDeps[e].undefined)),t.allDeps.changed(),i=!0}return i},_setObject:function(e){var t=this;a.each(e,function(e,a){t.set(a,e)})},_ensureKey:function(e){var a=this;e in a.keyDeps||(a.keyDeps[e]=new t.Dependency,a.keyValueDeps[e]={})},_getMigrationData:function(){return this.keys}})}).call(this),function(){if(d._migratedDictData={},d._dictsToMigrate={},d._loadMigratedDict=function(e){return a.has(d._migratedDictData,e)?d._migratedDictData[e]:null},d._registerDictForMigrate=function(e,t){if(a.has(d._dictsToMigrate,e))throw new Error("Duplicate ReactiveDict name: "+e);d._dictsToMigrate[e]=t},e.isClient&&Package.reload){var t=Package.reload.Reload._migrationData("reactive-dict");t&&t.dicts&&(d._migratedDictData=t.dicts),Package.reload.Reload._onMigrate("reactive-dict",function(){var e=d._dictsToMigrate,a={};for(var t in e)a[t]=e[t]._getMigrationData();return[!0,{dicts:a}]})}}.call(this),"undefined"==typeof Package&&(Package={}),Package["reactive-dict"]={ReactiveDict:d}}();

!function(){var t=Package.meteor.Meteor,e=Package.underscore._,n=Package.tracker.Tracker,a=Package.tracker.Deps,o=Package["reactive-dict"].ReactiveDict,r=Package.templating.Template,i=Package["iron:core"].Iron,u=Package.blaze.Blaze,s=Package.blaze.UI,c=Package.blaze.Handlebars,l=Package.spacebars.Spacebars,p=Package.htmljs.HTML,d,y;(function(){var t=i.utils.assert,n=function(){for(var t={},e=a.currentComputation;e;)t[String(e._id)]=!0,e=e._parent;return t},o=function(a){var o=n(),r=e.keys(a._dependentsById);e.each(r,function(e){t(!o[e],"\n\nYou called wait() after calling ready() inside the same computation tree.\n\nYou can fix this problem in two possible ways:\n\n1) Put all of your wait() calls before any ready() calls.\n2) Put your ready() call in its own computation with Deps.autorun.")})};d=function(){this._readyDep=new a.Dependency,this._comps=[],this._notReadyCount=0},d.prototype.wait=function(t){var n=this,r=a.currentComputation;o(n._readyDep),a.nonreactive(function(){var o=null,i=a.autorun(function(e){var a=!!t(),r=n._notReadyCount;e.firstRun&&!a?n._notReadyCount++:null!==o&&a!==o&&a===!0?n._notReadyCount--:null!==o&&a!==o&&a===!1&&n._notReadyCount++,o=a,0===r&&n._notReadyCount>0?n._readyDep.changed():r>0&&0===n._notReadyCount&&n._readyDep.changed()});n._comps.push(i),r&&r.onInvalidate(function(){a.afterFlush(function(){i.stop(),n._comps.splice(e.indexOf(n._comps,i),1),o===!1&&(n._notReadyCount--,0===n._notReadyCount&&n._readyDep.changed())})})})},d.prototype.ready=function(){return this._readyDep.depend(),0===this._notReadyCount},d.prototype.stop=function(){e.each(this._comps,function(t){t.stop()}),this._comps=[]},i.WaitList=d}).call(this),function(){var t=i.utils.debug("iron:controller"),n=i.Layout,a=i.DynamicTemplate,o=function(t,e){return function(){return"function"==typeof t?t.apply(e,arguments):t}};y=function(t){var e=this;this.options=t||{},this._layout=this.options.layout||new n(this.options),this._isController=!0,this._layout._setLookupHost(this);var a=y._collectEventMaps.call(this.constructor);this._layout.events(a,this),this.init(t)},y.prototype.layout=function(t,n){var a=this;return this._layout.template(t),n&&e.has(n,"data")&&this._layout.data(o(n.data,this)),{data:function(t){return a._layout.data(o(t,a))}}},y.prototype.render=function(t,e){var n=this;e&&"undefined"!=typeof e.data&&(e.data=o(e.data,this));var a=this._layout.render(t,e);return{data:function(t){return a.data(o(t,n))}}},y.prototype.beginRendering=function(t){return this._layout.beginRendering(t)},y.extend=function(t){return i.utils.extend(this,t)},y.events=function(t){return this._eventMap=t,this};var s=function(t,n){var a={};return t.__super__&&e.extend(a,s(t.__super__.constructor,n)),e.has(t,n)?e.extend(a,t[n]):a};y._collectEventMaps=function(){return s(this,"_eventMap")},y._helpers={},y.helpers=function(t){return e.extend(this._helpers,t),this},"undefined"!=typeof r&&(i.controller=function(){return a.findLookupHostWithProperty(u.getView(),"_isController")},r.registerHelper("get",function(t){var e=i.controller();return e&&e.state?e.state.get(t):void 0})),i.Controller=y}.call(this),function(){var t=i.Layout,n=i.utils.debug("iron:controller"),a=i.utils.defaultValue,r=function(t,e){return function(){return"function"==typeof t?t.apply(e,arguments):t}};y.prototype.init=function(t){this._waitlist=new d,this.state=new o},y.prototype.insert=function(t){return this._layout.insert.apply(this._layout,arguments)},y.prototype.wait=function(t){var n=this;if(t)return e.isArray(t)?e.each(t,function a(t){n.wait(t)}):this._waitlist.wait(t.ready?function(){return t.ready()}:t),this},y.prototype.ready=function(){return this._waitlist.ready()},y.prototype.stop=function(){this._waitlist.stop()}}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:controller"]={}}();

!function(){var t=Package.underscore._,o=Package.tracker.Tracker,e=Package.tracker.Deps,r=Package.blaze.Blaze,n=Package.blaze.UI,i=Package.blaze.Handlebars,a=Package.templating.Template,u=Package.ejson.EJSON,s=Package.meteor.Meteor,l=Package["iron:core"].Iron,p=Package.spacebars.Spacebars,c=Package.htmljs.HTML,h,f,d,y,m,g;(function(){h=new s.EnvironmentVariable}).call(this),function(){f=["get","post","put","delete","patch"]}.call(this),function(){var o=l.Controller,e=l.Url,r=l.MiddlewareStack,n=l.utils.assert;d=o.extend({constructor:function(o){d.__super__.constructor.apply(this,arguments),o=o||{},this.options=o,this._onStopCallbacks=[],this.route=o.route,this.params=[];var e=this.lookupOption("data");"function"==typeof e?this.data=t.bind(e,this):"undefined"!=typeof e&&(this.data=function(){return e}),this.init(o)}}),d.prototype.lookupOption=function(o){if(this.route&&this.route.options&&t.has(this.route.options,o))return this.route.options[o];if(t.has(this.options,o))return this.options[o];if("undefined"!=typeof this[o])return this[o];var e=h.get();return e&&t.has(e,o)?e[o]:this.router&&this.router.options&&t.has(this.router.options,o)?this.router.options[o]:void 0},d.prototype.configureFromUrl=function(t,o,e){n("string"==typeof t,"url must be a string"),o=o||{},this.request=o.request||{},this.response=o.response||{},this.url=o.url||t,this.originalUrl=o.originalUrl||t,this.method=this.request.method,this.route&&this.setParams(this.route.params(t),e)},d.prototype._collectHooks=function(){var o=this,e=t.toArray(arguments),r=function(e){if(!e)return[];var r=o.router.lookupHook,n=t.isArray(e)?e:[e];return t.map(n,function(t){return r(t)})},n=function(o,e){var i=[];return o.__super__&&(i=i.concat(n(o.__super__.constructor,e))),t.has(o.prototype,e)?i.concat(r(o.prototype[e])):i},i=function(t){for(var o=0;o<e.length;o++)t(e[o])},a=[];i(function(t){var e=o.route&&o.route.getName(),r=o.router.getHooks(t,e);a=a.concat(r)});var u=[];i(function(t){var e=n(o.constructor,t);u=u.concat(e)});var s=[];i(function(e){if(t.has(o,e)){var n=r(o[e]);s=s.concat(n)}});var l=[];o.route&&i(function(t){var e=r(o.route.options[t]);l=l.concat(e)});var p=a.concat(l).concat(u).concat(s);return p},d.prototype.runHooks=function(){for(var t=this._collectHooks.apply(this,arguments),o=0,e=t.length;e>o;o++){var r=t[o];r.call(this)}return t.length},d.prototype.getParams=function(){return this.params},d.prototype.setParams=function(t){return this.params=t,this},l.RouteController=d}.call(this),function(){var r=l.Controller,n=l.Url,i=l.MiddlewareStack,a=l.utils.debug("iron-router:RouteController");if(d.prototype.init=function(t){d.__super__.init.apply(this,arguments),this._computation=null,this._paramsDep=new o.Dependency,this.location=l.Location},d.prototype.getParams=function(){return this._paramsDep.depend(),this.params},d.prototype.setParams=function(o,e){var r=function(o,r){if(!(o instanceof Array))throw new Error("you called equals with a non array value in setParams");if(!(r instanceof Array))return!1;if(o.length!==r.length)return!1;for(var n=0;n<o.length;n++)if(!u.equals(o[n],r[n],e))return!1;var i=t.keys(o),a=t.keys(r),s;if(i.length!==a.length)return!1;for(var n=0;n<i.length;n++){if(s=i[n],!t.has(r,s))return!1;if(!u.equals(o[s],r[s]))return!1}return!0};if(!r(this.params,o))return this.params=o,e=e||{},e.reactive!==!1&&this._paramsDep.changed(),this},d.prototype.dispatch=function(t,o,r){if(this._computation&&!this._computation.stopped)throw new Error("RouteController computation is already running. Stop it first.");var n=this;return e.nonreactive(function(){e.autorun(function(e){n._computation=e,t.dispatch(o,n,r)})}),n},d.prototype._runRoute=function(o,r,n){var a=this,u=this._collectHooks("subscriptions");t.each(u,function(t){a.wait(t.call(a))});var s=this._collectHooks("waitOn");t.each(s,function(t){a.wait(t.call(a))});var p=s.length>0,c,h,f=function(){return e.nonreactive(function(){return a._layout.template()})},y=function(){return e.nonreactive(function(){var t=a._layout._regions.main;return t&&t.template()})},m=f(),g=y();this.beginRendering(function R(o){if(!a.isStopped){var e=f(),r=y();if(m!==e||g!=r){var n=a._layout.regionKeys(),i=t.difference(n,o);t.each(i,function(t){a._layout.clear(t)})}}}),this.layout(this.lookupOption("layoutTemplate"),{data:this.lookupOption("data")});var _=new i,v=new i,k=new i;v.append(this._collectHooks("onRun","load"),{where:"client"}),k.append(this._collectHooks("onRerun"),{where:"client"}),_.append(function b(t,o,e){this._computation.firstRun&&!d._hasJustReloaded&&v.length>0?v.dispatch(t.url,this,e):e(),d._hasJustReloaded=!1},function C(t,o,e){this._computation.firstRun?e():k.length>0?k.dispatch(t.url,this,e):e()},{where:"client"}),p&&_.push(t.bind(l.Router.hooks.loading,a));var w=this._collectHooks("onBeforeAction","before");_.append(w,{where:"client"}),0===o._actionStack.length&&o._actionStack.push(o._path,"action",o.options),_=_.concat(o._actionStack),this._rendered=!1,_.dispatch(r,this,n),e.afterFlush(function(){l.utils.warn(a._rendered||a.isStopped,"Route dispatch never rendered. Did you forget to call this.next() in an onBeforeAction?")}),this.runHooks("onAfterAction","after")},d.prototype.action=function(){this.render()},d.prototype.lookupTemplate=function(){return this.lookupOption("template")||this.router&&this.router.toTemplateName(this.route.getName())},d.prototype.lookupRegionTemplates=function(){return this.lookupOption("yieldRegions")||this.lookupOption("regionTemplates")||this.lookupOption("yieldTemplates")||{}},d.prototype.render=function(t,o){if(this._rendered=!0,0===arguments.length){var t=this.lookupTemplate(),e=d.__super__.render.call(this,t);return this.renderRegions(),e}return d.__super__.render.call(this,t,o)},d.prototype.renderRegions=function(){var o=this,e=this.lookupRegionTemplates();a("regionTemplates: "+JSON.stringify(e)),t.each(e,function(t,e){o.render(e,t)})},d.prototype.stop=function(){d.__super__.stop.call(this),this._computation&&this._computation.stop(),this.runHooks("onStop","unload"),this.isStopped=!0},d.prototype.redirect=function(){return this.router.go.apply(this.router,arguments)},d.prototype.subscribe=function(){var o=this,e=s.subscribe.apply(this,arguments);return t.extend(e,{wait:function(){o.wait(this)}})},Package.reload){Package.reload.Reload._onMigrate("iron-router",function(){return[!0,!0]});var p=Package.reload.Reload._migrationData("iron-router");d._hasJustReloaded=p}}.call(this),function(){var o=l.Url,e=l.MiddlewareStack,r=l.utils.assert;y=function(o,r,n){var i=function(t,o,e){var r=this;r.request=t,r.response=o,i.dispatch(t.url,r,e)};return"object"==typeof r&&(n=r,r=n.action),n=n||{},"string"==typeof o&&"/"!==o.charAt(0)&&(o=n.path?n.path:"/"+o),t.extend(i,this.constructor.prototype),n=i.options=n||{},i._actionStack=new e,i._beforeStack=new e,i._beforeStack.append(i.options.onBeforeAction),i._beforeStack.append(i.options.before),i._afterStack=new e,i._afterStack.append(i.options.onAfterAction),i._afterStack.append(i.options.after),i._methods={},"string"==typeof r?i._actionStack.push(o,t.extend(n,{template:r})):("function"==typeof r||"object"==typeof r)&&i._actionStack.push(o,r,n),i._path=o,i},y.prototype.getName=function(){return this.handler&&this.handler.name},y.prototype.findControllerConstructor=function(){var t=this,o=function(t,o){o=o||{};var e=l.utils.resolve(t);if(e&&d.prototype.isPrototypeOf(e.prototype))return e;if(o.supressErrors!==!0)throw new Error("RouteController '"+t+"' is not defined.");return void 0},e=function(o){return t.router.toControllerName(o)},r,n=this.getName();return"function"==typeof this.options.controller?this.options.controller:"string"==typeof this.options.controller?o(this.options.controller):this.router&&this.router.options.controller?"function"==typeof this.router.options.controller?this.router.options.controller:"string"==typeof this.router.options.controller?o(this.router.options.controller):void 0:n&&(r=o(e(n),{supressErrors:!0}))?r:d},y.prototype.createController=function(t){t=t||{};var o=this.findControllerConstructor();t.route=this;var e=new o(t);return e},y.prototype.setControllerParams=function(t,o){},y.prototype.dispatch=function(t,o,e){return r(o._runRoute,"context doesn't have a _runRoute method"),o._runRoute(this,t,e)},y.prototype.path=function(t,o){return this.handler.resolve(t,o)},y.prototype.url=function(t,o){var e=this.path(t,o),r=o&&o.host||s.absoluteUrl();return"/"===r.charAt(r.length-1),r=r.slice(0,r.length-1),r+e},y.prototype.params=function(t){return this.handler.params(t)},t.each(f,function(t){y.prototype[t]=function(o){return this._methods[t]=!0,this._actionStack.push(this._path,o,{name:this.getName()+"_"+t.toLowerCase(),method:t,where:this.handler.where,mount:!1}),this}}),l.Route=y}.call(this),function(){var o=l.MiddlewareStack,e=l.Url,r=l.Layout,n=l.utils.warn,i=l.utils.assert;m=function(e){function r(t,o,e){r.dispatch(t.url,{request:t,response:o},e)}return r._stack=new o,r._globalHooks={},r.routes=[],r.routes._byPath={},this.configure.call(r,e),t.extend(r,this.constructor.prototype),this.init.call(r,e),s.startup(function(){s.defer(function(){r.options.autoStart!==!1&&r.start()})}),r},m.prototype.init=function(t){},m.prototype.configure=function(o){var e=this;o=o||{};var r=function(o){return o?t.isArray(o)?o:[o]:[]};return t.each(l.Router.HOOK_TYPES,function n(i){o[i]&&(t.each(r(o[i]),function a(t){e.addHook(i,t)}),delete o[i])}),this.options=this.options||{},t.extend(this.options,o),this},m.prototype.map=function(t){return t.call(this)},m.prototype.route=function(t,o,e){var r=function(t){return Object.prototype.toString.call(t)};i("[object String]"===r(t)||"[object RegExp]"===r(t),"Router.route requires a path that is a string or regular expression."),"object"==typeof o&&(e=o,o=e.action);var n=new y(t,o,e);e=e||{},e.mount=!1;var a=this._stack.push(t,n,e);return a.route=n,n.handler=a,n.router=this,i(!this.routes._byPath[a.path],"A route for the path "+JSON.stringify(a.path)+" already exists by the name of "+JSON.stringify(a.name)+"."),this.routes._byPath[a.path]=n,this.routes.push(n),"string"==typeof a.name&&(this.routes[a.name]=n),n},m.prototype.findFirstRoute=function(t){for(var o,e,r=0;r<this.routes.length;r++)if(g=this.routes[r],o=g.handler.test(t,{where:s.isServer?"server":"client"}))return g;return null},m.prototype.path=function(t,o,e){var r=this.routes[t];return n(r,"You called Router.path for a route named "+JSON.stringify(t)+" but that route doesn't seem to exist. Are you sure you created it?"),r&&r.path(o,e)},m.prototype.url=function(t,o,e){var r=this.routes[t];return n(r,"You called Router.url for a route named "+JSON.stringify(t)+" but that route doesn't seem to exist. Are you sure you created it?"),r&&r.url(o,e)},m.prototype.createController=function(t,o){var e=this.findFirstRoute(t),r;return o=o||{},r=e?e.createController({layout:this._layout}):new d({layout:this._layout}),r.router=this,r.configureFromUrl(t,o,{reactive:!1}),r},m.prototype.setTemplateNameConverter=function(t){return this._templateNameConverter=t,this},m.prototype.setControllerNameConverter=function(t){return this._controllerNameConverter=t,this},m.prototype.toTemplateName=function(t){return this._templateNameConverter?this._templateNameConverter(t):l.utils.classCase(t)},m.prototype.toControllerName=function(t){return this._controllerNameConverter?this._controllerNameConverter(t):l.utils.classCase(t)+"Controller"},m.prototype.addHook=function(o,e,r){var n=this;r=r||{};var i=function(o){return o?t.isArray(o)?o:[o]:[]};r.only&&(r.only=i(r.only)),r.except&&(r.except=i(r.except));var a=this._globalHooks[o]=this._globalHooks[o]||[],u=function(){var t=this,o=arguments;return h.withValue(r,function(){return n.lookupHook(e).apply(t,o)})};return a.push({options:r,hook:u}),this},m.prototype.lookupHook=function(o){var e=o;if(t.isFunction(e))return e;if(t.isString(e)&&t.isFunction(l.Router.hooks[e]))return l.Router.hooks[e];throw new Error("No hook found named: "+o)},m.prototype.getHooks=function(o,e){var r=this,n=[];return t.each(this._globalHooks[o],function(o){var r=o.options;return r.except&&t.include(r.except,e)?[]:r.only&&!t.include(r.only,e)?[]:void n.push(o.hook)}),n},m.HOOK_TYPES=["onRun","onRerun","onBeforeAction","onAfterAction","onStop","waitOn","subscriptions","load","before","after","unload"],m.hooks={},m.plugins={},t.each(m.HOOK_TYPES,function(t){m.prototype[t]=function(o,e){this.addHook(t,o,e)}}),m.prototype.plugin=function(t,o){var e;if("function"==typeof t?e=t:"string"==typeof t&&(e=l.Router.plugins[t]),!e)throw new Error("No plugin found named "+JSON.stringify(t));return e.call(this,this,o),this},l.Router=m}.call(this),function(){if("undefined"!=typeof a)var t=new a("DefaultLoadingTemplate",function(){return"Loading..."}),o=new a("DefaultDataNotFoundTemplate",function(){return"Data not found..."});m.hooks.loading=function(){if(this.ready())return void this.next();var o=this.lookupOption("loadingTemplate");this.render(o||t),this.renderRegions()},m.hooks.dataNotFound=function(){if(!this.ready())return void this.next();var t=this.lookupOption("data"),e,r=this.lookupOption("notFoundTemplate");return"function"!=typeof t||(e=t.call(this))?void this.next():(this.render(r||o),void this.renderRegions())}}.call(this),function(){var o=l.utils.warn,e=l.DynamicTemplate,i=l.utils.debug("iron:router <helpers>");n.registerHelper("Router",new r.Template("Router",function(){return m.createView()})),n.registerHelper("pathFor",function(e){var r;arguments.length>1&&(r=arguments[0],e=arguments[1]||{});var n=e&&e.hash;n=n||{};var i="",a=n.query,s=n.hash,r=r||n.route,l=t.extend({},n.data||this),p=m.routes[r];return o(p,"pathFor couldn't find a route named "+JSON.stringify(r)),p&&(t.each(p.handler.compiledUrl.keys,function(o){var e=o.name;t.has(n,e)&&(l[e]=u.clone(n[e]),delete n[e])}),i=p.path(l,{query:a,hash:s})),i}),n.registerHelper("urlFor",function(e){var r;arguments.length>1&&(r=arguments[0],e=arguments[1]||{});var n=e&&e.hash;n=n||{};var i="",a=n.query,s=n.hash,r=r||n.route,l=t.extend({},n.data||this),p=m.routes[r];return o(p,"urlFor couldn't find a route named "+JSON.stringify(r)),p&&(t.each(p.handler.compiledUrl.keys,function(o){var e=o.name;t.has(n,e)&&(l[e]=u.clone(n[e]),delete n[e])}),i=p.url(l,{query:a,hash:s})),i}),n.registerHelper("linkTo",new r.Template("linkTo",function(){var n=this,i=e.getInclusionArguments(this);if("object"!=typeof i)throw new Error("linkTo options must be key value pairs such as {{#linkTo route='my.route.name'}}. You passed: "+JSON.stringify(i));i=i||{};var a="",s=i.query,l=i.hash,p=i.route,h=t.extend({},i.data||e.getParentDataContext(this)),f=m.routes[p],d;o(f,"linkTo couldn't find a route named "+JSON.stringify(p)),f&&(t.each(f.handler.compiledUrl.keys,function(o){var e=o.name;t.has(i,e)&&(h[e]=u.clone(i[e]),delete i[e])}),a=f.path(h,{query:s,hash:l}));var y=t.omit(i,"route","query","hash","data");return y.href=a,r.With(function(){return e.getParentDataContext(n)},function(){return c.A(y,n.templateContentBlock)})}))}.call(this),function(){var o=l.MiddlewareStack,r=l.Url,n=l.Layout,i=l.utils.assert,a="__IronRouterNotFound__",u="__IronRouterNoRoutes__";m.prototype.init=function(t){var o=this;o._currentController=null,o._currentRoute=null,o._currentDep=new e.Dependency,o._locationComputation=null,o._layout=new n({template:o.options.layoutTemplate}),s.startup(function(){setTimeout(function t(){o.options.autoRender!==!1&&o.insert({el:document.body})})})},m.prototype.insert=function(t){return this._layout.insert(t),this},m.prototype.createView=function(){return this._layout.create()},m.prototype.lookupNotFoundTemplate=function(){return this.options.notFoundTemplate?this.options.notFoundTemplate:0===this.routes.length?u:a},m.prototype.lookupLayoutTemplate=function(){return this.options.layoutTemplate},m.prototype.dispatch=function(t,o,r){var n=this;i("string"==typeof t,"expected url string in router dispatch");var s=this._currentController,l=this.findFirstRoute(t),p=this._currentRoute;return this._currentRoute=l,this._currentController&&this._currentController.stop(),s&&l&&p===l?s.configureFromUrl(t,o):s=this.createController(t,o),this._currentController=s,s.dispatch(n._stack,t,function c(t){if(t)throw t;if(!s.isHandled()){var o=e.nonreactive(function(){return s.location.get().options.historyState});if(o&&o.initial===!0){this.layout(this.lookupOption("layoutTemplate"),{data:{url:this.url}});var i=this.lookupOption("notFoundTemplate");i||(i=0===n.routes.length?u:a),this.render(i,{data:{url:this.url}}),this.renderRegions(),s.isHandled=function(){return!0}}return r&&r.call(s)}}),this._currentController==s&&this._currentDep.changed(),s},m.prototype.current=function(){return this._currentDep.depend(),this._currentController},m.prototype._scrollToHash=function(t){try{var o=$(t);$("html, body").scrollTop(o.offset().top)}catch(e){}},m.prototype.start=function(){var t=this,o;t._locationComputation=e.autorun(function r(e){var r,n=l.Location.get(),i,a,u,s=t._currentController;!s||o&&o.path!==n.path?r=t.dispatch(n.href,null,function p(t){this.isHandled()||(n.cancelUrlChange(),window.location=n.path)}):(t._scrollToHash(n.hash),s.configureFromUrl(n.href)),o=n})},m.prototype.stop=function(){this._isStarted&&(this._locationComputation&&this._locationComputation.stop(),this._currentController&&this._currentController.stop(),this._isStarted=!1)},m.prototype.go=function(o,e,r){var n=this,a=/^\/|http/,u;if(r=r||{},a.test(o))u=o;else{var s=n.routes[o];i(s,"No route found named "+JSON.stringify(o)),u=s.path(e,t.extend(r,{throwOnMissingParams:!0}))}l.Location.go(u,r)}}.call(this),function(){m.plugins.loading=function(t,o){t.onBeforeAction("loading",o)},m.plugins.dataNotFound=function(t,o){t.onBeforeAction("dataNotFound",o)}}.call(this),function(){m=new l.Router}.call(this),function(){a.__checkName("__IronRouterNotFound__"),a.__IronRouterNotFound__=new a("Template.__IronRouterNotFound__",function(){var t=this;return c.DIV({style:"width: 600px; margin: 0 auto; padding: 20px;"},"\n    ",c.DIV({style:"font-size: 18pt; color: #999;"},"\n      Oops, looks like there's no route on the client or the server for url: \"",r.View("lookup:url",function(){return p.mustache(t.lookup("url"))}),'."\n    '),"\n  ")}),a.__checkName("__IronRouterNoRoutes__"),a.__IronRouterNoRoutes__=new a("Template.__IronRouterNoRoutes__",function(){var t=this;return c.Raw('<div style="font-family: helvetica; color: #777; max-width: 600px; margin: 20px auto;">\n      <h1 style="text-align: center; margin: 0; font-size: 48pt;">\n        iron:router\n      </h1>\n      <p style="text-align: center; font-size: 1.3em;">\n        Organize your Meteor application.\n      </p>\n      <div style="margin: 50px 0px;">\n        <pre style="background: #f2f2f2; margin: 0; padding: 10px;">\nRouter.route(\'/\', function () {\n  this.render(\'Home\', {\n    data: function () { return Items.findOne({_id: this.params._id}); }\n  });\n});\n        </pre>\n      </div>\n      <div style="margin: 50px 0px;">\n        Check it out on Github:<br>\n        <a href="https://github.com/eventedmind/iron-router" target="_blank">https://github.com/eventedmind/iron-router</a>\n        <br>\n        <br>\n        And check out the new Guide:<br>\n        <a href="https://iron-meteor.github.io/iron-router" target="_blank">\n          https://iron-meteor.github.io/iron-router\n        </a>\n      </div>\n    </div>')})}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:router"]={Router:m,RouteController:d}}();

!function(){var e=Package.meteor.Meteor,t=Package.templating.Template,i=Package.underscore._,n=Package.blaze.Blaze,o=Package.blaze.UI,r=Package.blaze.Handlebars,a=Package.spacebars.Spacebars,s=Package.htmljs.HTML;(function(){(function(){!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var i=document.createElement(e||"div"),n;for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,i=arguments.length;i>t;t++)e.appendChild(arguments[t]);return e}function i(e,t,i,n){var o=["opacity",t,~~(100*e),i,n].join("-"),r=.01+i/n*100,a=Math.max(1-(1-e)/t*(100-r),e),s=d.substring(0,d.indexOf("Animation")).toLowerCase(),c=s&&"-"+s+"-"||"";return p[o]||(u.insertRule("@"+c+"keyframes "+o+"{0%{opacity:"+a+"}"+r+"%{opacity:"+e+"}"+(r+.01)+"%{opacity:1}"+(r+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",u.cssRules.length),p[o]=1),o}function n(e,t){var i=e.style,n,o;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==i[t])return t;for(o=0;o<l.length;o++)if(n=l[o]+t,void 0!==i[n])return n}function o(e,t){for(var i in t)e.style[n(e,i)||i]=t[i];return e}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)void 0===e[n]&&(e[n]=i[n])}return e}function a(e,t){return"string"==typeof e?e:e[t%e.length]}function s(e){this.opts=r(e||{},s.defaults,f)}function c(){function i(t,i){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}u.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(e,n){function r(){return o(i("group",{coordsize:l+" "+l,coordorigin:-c+" "+-c}),{width:l,height:l})}function s(e,s,l){t(d,t(o(r(),{rotation:360/n.lines*e+"deg",left:~~s}),t(o(i("roundrect",{arcsize:n.corners}),{width:c,height:n.scale*n.width,left:n.scale*n.radius,top:-n.scale*n.width>>1,filter:l}),i("fill",{color:a(n.color,e),opacity:n.opacity}),i("stroke",{opacity:0}))))}var c=n.scale*(n.length+n.width),l=2*n.scale*c,p=-(n.width+n.length)*n.scale*2+"px",d=o(r(),{position:"absolute",top:p,left:p}),u;if(n.shadow)for(u=1;u<=n.lines;u++)s(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=n.lines;u++)s(u);return t(e,d)},s.prototype.opacity=function(e,t,i,n){var o=e.firstChild;n=n.shadow&&n.lines||0,o&&t+n<o.childNodes.length&&(o=o.childNodes[t+n],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=i))}}var l=["webkit","Moz","ms","O"],p={},d,u,f={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(s.defaults={},r(s.prototype,{spin:function(t){this.stop();var i=this,n=i.opts,r=i.el=e(null,{className:n.className});if(o(r,{position:n.position,width:0,zIndex:n.zIndex,left:n.left,top:n.top}),t&&t.insertBefore(r,t.firstChild||null),r.setAttribute("role","progressbar"),i.lines(r,i.opts),!d){var a=0,s=(n.lines-1)*(1-n.direction)/2,c,l=n.fps,p=l/n.speed,u=(1-n.opacity)/(p*n.trail/100),f=p/n.lines;!function h(){a++;for(var e=0;e<n.lines;e++)c=Math.max(1-(a+(n.lines-e)*f)%p*u,n.opacity),i.opacity(r,e*n.direction+s,c,n);i.timeout=i.el&&setTimeout(h,~~(1e3/l))}()}return i},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(n,r){function s(t,i){return o(e(),{position:"absolute",width:r.scale*(r.length+r.width)+"px",height:r.scale*r.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*c+r.rotate)+"deg) translate("+r.scale*r.radius+"px,0)",borderRadius:(r.corners*r.scale*r.width>>1)+"px"})}for(var c=0,l=(r.lines-1)*(1-r.direction)/2,p;c<r.lines;c++)p=o(e(),{position:"absolute",top:1+~(r.scale*r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:d&&i(r.opacity,r.trail,l+c*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&t(p,o(s("#000","0 0 4px #000"),{top:"2px"})),t(n,t(p,s(a(r.color,c),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}}),"undefined"!=typeof document){u=function(){var i=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}();var h=o(e("group"),{behavior:"url(#default#VML)"});!n(h,"transform")&&h.adj?c():d=n(h,"animation")}return s})}).call(this),function(){t.__checkName("spinner"),t.spinner=new t("Template.spinner",function(){var e=this;return s.Raw('<div class="spinner-container"></div>')})}.call(this),function(){t.spinner.onRendered(function(){var t=i.extend({},e.Spinner.options,this.data);this.spinner=new Spinner(t),this.spinner.spin(this.firstNode)}),t.spinner.onDestroyed(function(){this.spinner&&this.spinner.stop()}),e.Spinner={options:{lines:13,length:8,width:3,radius:12,corners:1,rotate:0,direction:1,color:"#000",speed:1.2,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"}}}.call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["sacha:spin"]={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["npm-bcrypt"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=Package.random.Random,i;(function(){var e=1e3,o=10,r=function(e,t){var i=this;i.id=n.id(),i.options=e,i._matchers=t,i._lastResetTime=(new Date).getTime(),i.counters={}};t.extend(r.prototype,{match:function(e){var n=this,i=!0;return t.every(n._matchers,function(n,i){if(null!==n){if(!t.has(e,i))return!1;if("function"==typeof n){if(!n(e[i]))return!1}else if(n!==e[i])return!1}return!0})},_generateKeyString:function(e){var n=this,i="";return t.each(n._matchers,function(t,n){null!==t&&("function"==typeof t?t(e[n])&&(i+=n+e[n]):i+=n+e[n])}),i},apply:function(e){var t=this,n=t._generateKeyString(e),i=(new Date).getTime()-t._lastResetTime,o=t.options.intervalTime-i;return{key:n,timeSinceLastReset:i,timeToNextReset:o}},resetCounter:function(){var e=this;e.counters={},e._lastResetTime=(new Date).getTime()}}),i=function(){var e=this;e.rules={}},i.prototype.check=function(e){var n=this,i={allowed:!0,timeToReset:0,numInvocationsLeft:1/0},o=n._findAllMatchingRules(e);return t.each(o,function(t){var n=t.apply(e),o=t.counters[n.key];n.timeToNextReset<0&&(t.resetCounter(),n.timeSinceLastReset=(new Date).getTime()-t._lastResetTime,n.timeToNextReset=t.options.intervalTime,o=0),o>t.options.numRequestsAllowed?(i.timeToReset<n.timeToNextReset&&(i.timeToReset=n.timeToNextReset),i.allowed=!1,i.numInvocationsLeft=0):t.options.numRequestsAllowed-o<i.numInvocationsLeft&&i.allowed&&(i.timeToReset=n.timeToNextReset,i.numInvocationsLeft=t.options.numRequestsAllowed-o)}),i},i.prototype.addRule=function(t,n,i){var s=this,a={numRequestsAllowed:n||o,intervalTime:i||e},u=new r(a,t);return this.rules[u.id]=u,u.id},i.prototype.increment=function(e){var n=this,i=n._findAllMatchingRules(e);t.each(i,function(n){var i=n.apply(e);i.timeSinceLastReset>n.options.intervalTime&&n.resetCounter(),t.has(n.counters,i.key)?n.counters[i.key]++:n.counters[i.key]=1})},i.prototype._findAllMatchingRules=function(e){var n=this;return t.filter(n.rules,function(t){return t.match(e)})},i.prototype.removeRule=function(e){var t=this;return t.rules[e]?(delete t.rules[e],!0):!1}}).call(this),"undefined"==typeof Package&&(Package={}),Package["rate-limit"]={RateLimiter:i}}();

!function(){var e=Package.meteor.Meteor,t=Package["rate-limit"].RateLimiter,n;(function(){n={};var e=function(e){return"Error, too many requests. Please slow down. You must wait "+Math.ceil(e.timeToReset/1e3)+" seconds before trying again."},r=new t;n.getErrorMessage=function(t){return"function"==typeof e?e(t):e},n.setErrorMessage=function(t){e=t},n.addRule=function(e,t,n){return r.addRule(e,t,n)},n.printRules=function(){return r.rules},n.removeRule=function(e){return r.removeRule(e)},n._increment=function(e){r.increment(e)},n._check=function(e){return r.check(e)}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ddp-rate-limiter"]={DDPRateLimiter:n}}();

!function(){var e=Package.meteor.Meteor,t=Package.random.Random;(function(){var o="_localstorage_test_"+t.id(),a;try{window.localStorage&&(window.localStorage.setItem(o,o),a=window.localStorage.getItem(o),window.localStorage.removeItem(o))}catch(n){}o===a&&(e._localStorage={getItem:function(e){return window.localStorage.getItem(e)},setItem:function(e,t){window.localStorage.setItem(e,t)},removeItem:function(e){window.localStorage.removeItem(e)}}),e._localStorage||(e._debug("You are running a browser with no localStorage or userData support. Logging in from one tab will not cause another tab to be logged in."),e._localStorage={_data:{},setItem:function(e,t){this._data[e]=t},removeItem:function(e){delete this._data[e]},getItem:function(e){var t=this._data[e];return void 0===t?null:t}})}).call(this),"undefined"==typeof Package&&(Package={}),Package.localstorage={}}();

!function(){var n=Package.meteor.Meteor,e=Package.underscore._,t;(function(){t=function(n){var t=this;if(n=n||{},t.nextCallbackId=0,t.callbacks={},t.bindEnvironment=!0,n.bindEnvironment===!1&&(t.bindEnvironment=!1),n.exceptionHandler)t.exceptionHandler=n.exceptionHandler;else if(n.debugPrintExceptions){if(!e.isString(n.debugPrintExceptions))throw new Error("Hook option debugPrintExceptions should be a string");t.exceptionHandler=n.debugPrintExceptions}},e.extend(t.prototype,{register:function(e){var t=this,r=t.exceptionHandler||function(n){throw n};e=t.bindEnvironment?n.bindEnvironment(e,r):a(e,r);var i=t.nextCallbackId++;return t.callbacks[i]=e,{stop:function(){delete t.callbacks[i]}}},each:function(t){var a=this;n._nodeCodeMustBeInFiber();for(var r=e.keys(a.callbacks),i=0;i<r.length;++i){var c=r[i];if(e.has(a.callbacks,c)){var o=a.callbacks[c];if(!t(o))break}}}});var a=function(t,a,r){if(!a||"string"==typeof a){var i=a||"callback of async function";a=function(e){n._debug("Exception in "+i+":",e&&e.stack||e)}}return function(){var n=e.toArray(arguments),i=function(){try{var e=t.apply(r,n)}catch(i){a(i)}return e};return i()}}}).call(this),"undefined"==typeof Package&&(Package={}),Package["callback-hook"]={Hook:t}}();

!function(){var n=Package.meteor.Meteor,e=Package.underscore._,o=Package.ecmascript.ECMAScript,t=Package["ddp-rate-limiter"].DDPRateLimiter,i=Package.tracker.Tracker,r=Package.tracker.Deps,a=Package.random.Random,c=Package["callback-hook"].Hook,s=Package["ddp-client"].DDP,l=Package.mongo.Mongo,u=Package["babel-runtime"].babelHelpers,g=Package["ecmascript-runtime"].Symbol,_=Package["ecmascript-runtime"].Map,h=Package["ecmascript-runtime"].Set,d=Package.promise.Promise,p,f,k,m,L,E;(function(){p=function(){function o(n){u.classCallCheck(this,o),this._options={},this.connection=void 0,this._initConnection(n||{}),this.users=new l.Collection("users",{_preventAutopublish:!0,connection:this.connection}),this._onLoginHook=new c({bindEnvironment:!1,debugPrintExceptions:"onLogin callback"}),this._onLoginFailureHook=new c({bindEnvironment:!1,debugPrintExceptions:"onLoginFailure callback"})}return o.prototype.userId=function r(){throw new Error("userId method not implemented")},o.prototype.user=function a(){var n=this.userId();return n?this.users.findOne(n):null},o.prototype.config=function g(o){var t=this;if(n.isServer?__meteor_runtime_config__.accountsConfigCalled=!0:__meteor_runtime_config__.accountsConfigCalled||n._debug("Accounts.config was called on the client but not on the server; some configuration options may not take effect."),e.has(o,"oauthSecretKey")){if(n.isClient)throw new Error("The oauthSecretKey option may only be specified on the server");if(!Package["oauth-encryption"])throw new Error("The oauth-encryption package must be loaded to set oauthSecretKey");Package["oauth-encryption"].OAuthEncryption.loadKey(o.oauthSecretKey),o=e.omit(o,"oauthSecretKey")}var i=["sendVerificationEmail","forbidClientAccountCreation","restrictCreationByEmailDomain","loginExpirationInDays"];e.each(e.keys(o),function(n){if(!e.contains(i,n))throw new Error("Accounts.config: Invalid key: "+n)}),e.each(i,function(n){if(n in o){if(n in t._options)throw new Error("Can't set `"+n+"` more than once");t._options[n]=o[n]}})},o.prototype.onLogin=function _(n){return this._onLoginHook.register(n)},o.prototype.onLoginFailure=function h(n){return this._onLoginFailureHook.register(n)},o.prototype._initConnection=function d(e){n.isClient&&(e.connection?this.connection=e.connection:e.ddpUrl?this.connection=s.connect(e.ddpUrl):"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL?this.connection=s.connect(__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL):this.connection=n.connection)},o.prototype._getTokenLifetimeMs=function p(){return 24*(this._options.loginExpirationInDays||t)*60*60*1e3},o.prototype._tokenExpiration=function f(n){return new Date(new Date(n).getTime()+this._getTokenLifetimeMs())},o.prototype._tokenExpiresSoon=function k(n){var e=.1*this._getTokenLifetimeMs(),o=1e3*i;return e>o&&(e=o),new Date>new Date(n)-e},o}();var o=p.prototype;n.userId=function(){return E.userId()},n.user=function(){return E.user()};var t=90,i=3600;f=6e5,k=1e4,n.startup(function(){var n=Package["service-configuration"].ServiceConfiguration;o.loginServiceConfiguration=n.configurations,o.ConfigError=n.ConfigError});var r="Accounts.LoginCancelledError";o.LoginCancelledError=n.makeErrorType(r,function(n){this.message=n}),o.LoginCancelledError.prototype.name=r,o.LoginCancelledError.numericError=145546287}).call(this),function(){var n=p.prototype,o;n.removeDefaultRateLimit=function(){var n=t.removeRule(o);return o=null,n},n.addDefaultRateLimit=function(){o||(o=t.addRule({userId:null,clientAddress:null,type:"method",name:function(n){return e.contains(["login","createUser","resetPassword","forgotPassword"],n)},connectionId:function(n){return!0}},5,1e4))},n.addDefaultRateLimit()}.call(this),function(){m=function(n){function e(o){u.classCallCheck(this,e),n.call(this,o),this._loggingIn=!1,this._loggingInDeps=new i.Dependency,this._loginServicesHandle=this.connection.subscribe("meteor.loginServiceConfiguration"),this._pageLoadLoginCallbacks=[],this._pageLoadLoginAttemptInfo=null,this._initUrlMatching(),this._initLocalStorage()}return u.inherits(e,n),e.prototype.userId=function o(){return this.connection.userId()},e.prototype._setLoggingIn=function t(n){this._loggingIn!==n&&(this._loggingIn=n,this._loggingInDeps.changed())},e.prototype.loggingIn=function r(){return this._loggingInDeps.depend(),this._loggingIn},e.prototype.logout=function a(n){var e=this;e.connection.apply("logout",[],{wait:!0},function(o,t){o?n&&n(o):(e.makeClientLoggedOut(),n&&n())})},e.prototype.logoutOtherClients=function c(n){var e=this;e.connection.apply("getNewToken",[],{wait:!0},function(n,o){n||e._storeLoginToken(e.userId(),o.token,o.tokenExpires)}),e.connection.apply("removeOtherTokens",[],{wait:!0},function(e){n&&n(e)})},e}(p);var o=m.prototype;n.loggingIn=function(){return E.loggingIn()},o.callLoginMethod=function(n){var o=this;n=e.extend({methodName:"login",methodArguments:[{}],_suppressLoggingIn:!1},n),e.each(["validateResult","userCallback"],function(e){n[e]||(n[e]=function(){})});var t=e.once(function(e){e?o._onLoginFailureHook.each(function(n){return n(),!0}):o._onLoginHook.each(function(n){return n(),!0}),n.userCallback.apply(this,arguments)}),i=!1,r=function(n,e){!n&&e&&e.token&&(o.connection.onReconnect=function(){i=!0;var n=o._storedLoginToken();n&&(e={token:n,tokenExpires:o._storedLoginTokenExpires()}),e.tokenExpires||(e.tokenExpires=o._tokenExpiration(new Date)),o._tokenExpiresSoon(e.tokenExpires)?o.makeClientLoggedOut():o.callLoginMethod({methodArguments:[{resume:e.token}],_suppressLoggingIn:!0,userCallback:function(n){var i=o._storedLoginToken();n&&i&&i===e.token&&o.makeClientLoggedOut(),t(n)}})})},a=function(e,r){if(!i){if(o._setLoggingIn(!1),e||!r)return e=e||new Error("No result from call to "+n.methodName),void t(e);try{n.validateResult(r)}catch(a){return void t(a)}o.makeClientLoggedIn(r.id,r.token,r.tokenExpires),t()}};n._suppressLoggingIn||o._setLoggingIn(!0),o.connection.apply(n.methodName,n.methodArguments,{wait:!0,onResultReceived:r},a)},o.makeClientLoggedOut=function(){this._unstoreLoginToken(),this.connection.setUserId(null),this.connection.onReconnect=null},o.makeClientLoggedIn=function(n,e,o){this._storeLoginToken(n,e,o),this.connection.setUserId(n)},n.logout=function(n){return E.logout(n)},n.logoutOtherClients=function(n){return E.logoutOtherClients(n)},o.loginServicesConfigured=function(){return this._loginServicesHandle.ready()},o.onPageLoadLogin=function(n){this._pageLoadLoginAttemptInfo?n(this._pageLoadLoginAttemptInfo):this._pageLoadLoginCallbacks.push(n)},o._pageLoadLogin=function(o){return this._pageLoadLoginAttemptInfo?void n._debug("Ignoring unexpected duplicate page load login attempt info"):(e.each(this._pageLoadLoginCallbacks,function(n){n(o)}),this._pageLoadLoginCallbacks=[],void(this._pageLoadLoginAttemptInfo=o))},Package.blaze&&(Package.blaze.Blaze.Template.registerHelper("currentUser",function(){return n.user()}),Package.blaze.Blaze.Template.registerHelper("loggingIn",function(){return n.loggingIn()}))}.call(this),function(){function o(n,o,t){e.each(r,function(e){var i,r=new RegExp("^\\#\\/"+e+"\\/(.*)$"),a=o.match(r);a&&(i=a[1],"reset-password"===e?n._resetPasswordToken=i:"verify-email"===e?n._verifyEmailToken=i:"enroll-account"===e&&(n._enrollAccountToken=i),window.location.hash="",t.call(n,i,e))})}function t(e,o){var t=this;t._autoLoginEnabled=!1,n.startup(function(){t._accountsCallbacks[o]&&t._accountsCallbacks[o](e,function(){t._enableAutoLogin()})})}var i=m.prototype,r=["reset-password","verify-email","enroll-account"],a=window.location.hash;i._initUrlMatching=function(){this._autoLoginEnabled=!0,this._accountsCallbacks={},this._attemptToMatchHash()},i._attemptToMatchHash=function(){o(this,a,t)},L={attemptToMatchHash:function(n,e){return o(E,n,e)}},i.onResetPasswordLink=function(e){this._accountsCallbacks["reset-password"]&&n._debug("Accounts.onResetPasswordLink was called more than once. Only one callback added will be executed."),this._accountsCallbacks["reset-password"]=e},i.onEmailVerificationLink=function(e){this._accountsCallbacks["verify-email"]&&n._debug("Accounts.onEmailVerificationLink was called more than once. Only one callback added will be executed."),this._accountsCallbacks["verify-email"]=e},i.onEnrollmentLink=function(e){this._accountsCallbacks["enroll-account"]&&n._debug("Accounts.onEnrollmentLink was called more than once. Only one callback added will be executed."),this._accountsCallbacks["enroll-account"]=e}}.call(this),function(){var e=m.prototype;n.loginWithToken=function(n,e){return E.loginWithToken(n,e)},e.loginWithToken=function(n,e){this.callLoginMethod({methodArguments:[{resume:n}],userCallback:e})},e._enableAutoLogin=function(){this._autoLoginEnabled=!0,this._pollStoredLoginToken()},e._isolateLoginTokenForTest=function(){this.LOGIN_TOKEN_KEY=this.LOGIN_TOKEN_KEY+a.id(),this.USER_ID_KEY=this.USER_ID_KEY+a.id()},e._storeLoginToken=function(e,o,t){n._localStorage.setItem(this.USER_ID_KEY,e),n._localStorage.setItem(this.LOGIN_TOKEN_KEY,o),t||(t=this._tokenExpiration(new Date)),n._localStorage.setItem(this.LOGIN_TOKEN_EXPIRES_KEY,t),this._lastLoginTokenWhenPolled=o},e._unstoreLoginToken=function(){n._localStorage.removeItem(this.USER_ID_KEY),n._localStorage.removeItem(this.LOGIN_TOKEN_KEY),n._localStorage.removeItem(this.LOGIN_TOKEN_EXPIRES_KEY),this._lastLoginTokenWhenPolled=null},e._storedLoginToken=function(){return n._localStorage.getItem(this.LOGIN_TOKEN_KEY)},e._storedLoginTokenExpires=function(){return n._localStorage.getItem(this.LOGIN_TOKEN_EXPIRES_KEY)},e._storedUserId=function(){return n._localStorage.getItem(this.USER_ID_KEY)},e._unstoreLoginTokenIfExpiresSoon=function(){var n=this._storedLoginTokenExpires();n&&this._tokenExpiresSoon(new Date(n))&&this._unstoreLoginToken()},e._initLocalStorage=function(){var e=this;e.LOGIN_TOKEN_KEY="Meteor.loginToken",e.LOGIN_TOKEN_EXPIRES_KEY="Meteor.loginTokenExpires",e.USER_ID_KEY="Meteor.userId";var o=__meteor_runtime_config__.ROOT_URL_PATH_PREFIX;if(o||this.connection!==n.connection){var t=":"+this.connection._stream.rawUrl;o&&(t+=":"+o),e.LOGIN_TOKEN_KEY+=t,e.LOGIN_TOKEN_EXPIRES_KEY+=t,e.USER_ID_KEY+=t}if(e._autoLoginEnabled){e._unstoreLoginTokenIfExpiresSoon();var i=e._storedLoginToken();if(i){var r=e._storedUserId();r&&e.connection.setUserId(r),e.loginWithToken(i,function(o){o&&(n._debug("Error logging in with token: "+o),e.makeClientLoggedOut()),e._pageLoadLogin({type:"resume",allowed:!o,error:o,methodName:"login",methodArguments:[{resume:i}]})})}}e._lastLoginTokenWhenPolled=i,e._pollIntervalTimer&&clearInterval(e._pollIntervalTimer),e._pollIntervalTimer=setInterval(function(){e._pollStoredLoginToken()},3e3)},e._pollStoredLoginToken=function(){var n=this;if(n._autoLoginEnabled){var e=n._storedLoginToken();n._lastLoginTokenWhenPolled!=e&&(e?n.loginWithToken(e,function(e){e&&n.makeClientLoggedOut()}):n.logout()),n._lastLoginTokenWhenPolled=e}}}.call(this),function(){E=new m,n.users=E.users}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-base"]={Accounts:E,AccountsClient:m,AccountsTest:L}}();

!function(){var r=Package.meteor.Meteor,n;(function(){n=function(){function r(r){function n(r,n){var t=(65535&r)+(65535&n),e=(r>>16)+(n>>16)+(t>>16);return e<<16|65535&t}function t(r,n){return r>>>n|r<<32-n}function e(r,n){return r>>>n}function o(r,n,t){return r&n^~r&t}function a(r,n,t){return r&n^r&t^n&t}function u(r){return t(r,2)^t(r,13)^t(r,22)}function f(r){return t(r,6)^t(r,11)^t(r,25)}function c(r){return t(r,7)^t(r,18)^e(r,3)}function i(r){return t(r,17)^t(r,19)^e(r,10)}function h(r,t){var e=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),h=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),g=new Array(64),C,d,v,A,l,m,S,y,k,P,w,s;r[t>>5]|=128<<24-t%32,r[(t+64>>9<<4)+15]=t;for(var k=0;k<r.length;k+=16){C=h[0],d=h[1],v=h[2],A=h[3],l=h[4],m=h[5],S=h[6],y=h[7];for(var P=0;64>P;P++)16>P?g[P]=r[P+k]:g[P]=n(n(n(i(g[P-2]),g[P-7]),c(g[P-15])),g[P-16]),w=n(n(n(n(y,f(l)),o(l,m,S)),e[P]),g[P]),s=n(u(C),a(C,d,v)),y=S,S=m,m=l,l=n(A,w),A=v,v=d,d=C,C=n(w,s);h[0]=n(C,h[0]),h[1]=n(d,h[1]),h[2]=n(v,h[2]),h[3]=n(A,h[3]),h[4]=n(l,h[4]),h[5]=n(m,h[5]),h[6]=n(S,h[6]),h[7]=n(y,h[7])}return h}function g(r){for(var n=Array(),t=(1<<v)-1,e=0;e<r.length*v;e+=v)n[e>>5]|=(r.charCodeAt(e/v)&t)<<24-e%32;return n}function C(r){for(var n="",t=0;t<r.length;t++){var e=r.charCodeAt(t);128>e?n+=String.fromCharCode(e):e>127&&2048>e?(n+=String.fromCharCode(e>>6|192),n+=String.fromCharCode(63&e|128)):(n+=String.fromCharCode(e>>12|224),n+=String.fromCharCode(e>>6&63|128),n+=String.fromCharCode(63&e|128))}return n}function d(r){for(var n=A?"0123456789ABCDEF":"0123456789abcdef",t="",e=0;e<4*r.length;e++)t+=n.charAt(r[e>>2]>>8*(3-e%4)+4&15)+n.charAt(r[e>>2]>>8*(3-e%4)&15);return t}var v=8,A=0;return r=C(r),d(h(g(r),r.length*v))}return r}()}).call(this),"undefined"==typeof Package&&(Package={}),Package.sha={SHA256:n}}();

!function(){var t=Package.meteor.Meteor,i=Package.random.Random,r=Package.check.check,o=Package.check.Match,s=Package.sha.SHA256,e=Package.underscore._,h,n;(function(){h=function(){function t(t,i,r){null!=t&&("number"==typeof t?this.fromNumber(t,i,r):null==i&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,i))}function i(){return new t(null)}function r(t,i,r,o,s,e){for(;--e>=0;){var h=i*this[t++]+r[o]+s;s=Math.floor(h/67108864),r[o++]=67108863&h}return s}function o(t,i,r,o,s,e){for(var h=32767&i,n=i>>15;--e>=0;){var u=32767&this[t],f=this[t++]>>15,a=n*u+f*h;u=h*u+((32767&a)<<15)+r[o]+(1073741823&s),s=(u>>>30)+(a>>>15)+n*f+(s>>>30),r[o++]=1073741823&u}return s}function s(t,i,r,o,s,e){for(var h=16383&i,n=i>>14;--e>=0;){var u=16383&this[t],f=this[t++]>>14,a=n*u+f*h;u=h*u+((16383&a)<<14)+r[o]+s,s=(u>>28)+(a>>14)+n*f,r[o++]=268435455&u}return s}function e(t){return ii.charAt(t)}function h(t,i){var r=ri[t.charCodeAt(i)];return null==r?-1:r}function n(t){for(var i=this.t-1;i>=0;--i)t[i]=this[i];t.t=this.t,t.s=this.s}function u(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function f(t){var r=i();return r.fromInt(t),r}function a(i,r){var o;if(16==r)o=4;else if(8==r)o=3;else if(256==r)o=8;else if(2==r)o=1;else if(32==r)o=5;else{if(4!=r)return void this.fromRadix(i,r);o=2}this.t=0,this.s=0;for(var s=i.length,e=!1,n=0;--s>=0;){var u=8==o?255&i[s]:h(i,s);0>u?"-"==i.charAt(s)&&(e=!0):(e=!1,0==n?this[this.t++]=u:n+o>this.DB?(this[this.t-1]|=(u&(1<<this.DB-n)-1)<<n,this[this.t++]=u>>this.DB-n):this[this.t-1]|=u<<n,n+=o,n>=this.DB&&(n-=this.DB))}8==o&&0!=(128&i[0])&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),e&&t.ZERO.subTo(this,this)}function p(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function c(t){if(this.s<0)return"-"+this.negate().toString(t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return this.toRadix(t);i=2}var r=(1<<i)-1,o,s=!1,h="",n=this.t,u=this.DB-n*this.DB%i;if(n-->0)for(u<this.DB&&(o=this[n]>>u)>0&&(s=!0,h=e(o));n>=0;)i>u?(o=(this[n]&(1<<u)-1)<<i-u,o|=this[--n]>>(u+=this.DB-i)):(o=this[n]>>(u-=i)&r,0>=u&&(u+=this.DB,--n)),o>0&&(s=!0),s&&(h+=e(o));return s?h:"0"}function m(){var r=i();return t.ZERO.subTo(this,r),r}function l(){return this.s<0?this.negate():this}function v(t){var i=this.s-t.s;if(0!=i)return i;var r=this.t;if(i=r-t.t,0!=i)return i;for(;--r>=0;)if(0!=(i=this[r]-t[r]))return i;return 0}function T(t){var i=1,r;return 0!=(r=t>>>16)&&(t=r,i+=16),0!=(r=t>>8)&&(t=r,i+=8),0!=(r=t>>4)&&(t=r,i+=4),0!=(r=t>>2)&&(t=r,i+=2),0!=(r=t>>1)&&(t=r,i+=1),i}function y(){return this.t<=0?0:this.DB*(this.t-1)+T(this[this.t-1]^this.s&this.DM)}function d(t,i){var r;for(r=this.t-1;r>=0;--r)i[r+t]=this[r];for(r=t-1;r>=0;--r)i[r]=0;i.t=this.t+t,i.s=this.s}function D(t,i){for(var r=t;r<this.t;++r)i[r-t]=this[r];i.t=Math.max(this.t-t,0),i.s=this.s}function g(t,i){var r=t%this.DB,o=this.DB-r,s=(1<<o)-1,e=Math.floor(t/this.DB),h=this.s<<r&this.DM,n;for(n=this.t-1;n>=0;--n)i[n+e+1]=this[n]>>o|h,h=(this[n]&s)<<r;for(n=e-1;n>=0;--n)i[n]=0;i[e]=h,i.t=this.t+e+1,i.s=this.s,i.clamp()}function B(t,i){i.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)return void(i.t=0);var o=t%this.DB,s=this.DB-o,e=(1<<o)-1;i[0]=this[r]>>o;for(var h=r+1;h<this.t;++h)i[h-r-1]|=(this[h]&e)<<s,i[h-r]=this[h]>>o;o>0&&(i[this.t-r-1]|=(this.s&e)<<s),i.t=this.t-r,i.clamp()}function b(t,i){for(var r=0,o=0,s=Math.min(t.t,this.t);s>r;)o+=this[r]-t[r],i[r++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o-=t.s;r<this.t;)o+=this[r],i[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<t.t;)o-=t[r],i[r++]=o&this.DM,o>>=this.DB;o-=t.s}i.s=0>o?-1:0,-1>o?i[r++]=this.DV+o:o>0&&(i[r++]=o),i.t=r,i.clamp()}function S(i,r){var o=this.abs(),s=i.abs(),e=o.t;for(r.t=e+s.t;--e>=0;)r[e]=0;for(e=0;e<s.t;++e)r[e+o.t]=o.am(0,s[e],r,e,0,o.t);r.s=0,r.clamp(),this.s!=i.s&&t.ZERO.subTo(r,r)}function E(t){for(var i=this.abs(),r=t.t=2*i.t;--r>=0;)t[r]=0;for(r=0;r<i.t-1;++r){var o=i.am(r,i[r],t,2*r,0,1);(t[r+i.t]+=i.am(r+1,2*i[r],t,2*r+1,o,i.t-r-1))>=i.DV&&(t[r+i.t]-=i.DV,t[r+i.t+1]=1)}t.t>0&&(t[t.t-1]+=i.am(r,i[r],t,2*r,0,1)),t.s=0,t.clamp()}function w(r,o,s){var e=r.abs();if(!(e.t<=0)){var h=this.abs();if(h.t<e.t)return null!=o&&o.fromInt(0),void(null!=s&&this.copyTo(s));null==s&&(s=i());var n=i(),u=this.s,f=r.s,a=this.DB-T(e[e.t-1]);a>0?(e.lShiftTo(a,n),h.lShiftTo(a,s)):(e.copyTo(n),h.copyTo(s));var p=n.t,c=n[p-1];if(0!=c){var m=c*(1<<this.F1)+(p>1?n[p-2]>>this.F2:0),l=this.FV/m,v=(1<<this.F1)/m,y=1<<this.F2,d=s.t,D=d-p,g=null==o?i():o;for(n.dlShiftTo(D,g),s.compareTo(g)>=0&&(s[s.t++]=1,s.subTo(g,s)),t.ONE.dlShiftTo(p,g),g.subTo(n,n);n.t<p;)n[n.t++]=0;for(;--D>=0;){var B=s[--d]==c?this.DM:Math.floor(s[d]*l+(s[d-1]+y)*v);if((s[d]+=n.am(0,B,s,D,0,p))<B)for(n.dlShiftTo(D,g),s.subTo(g,s);s[d]<--B;)s.subTo(g,s)}null!=o&&(s.drShiftTo(p,o),u!=f&&t.ZERO.subTo(o,o)),s.t=p,s.clamp(),a>0&&s.rShiftTo(a,s),0>u&&t.ZERO.subTo(s,s)}}}function M(r){var o=i();return this.abs().divRemTo(r,null,o),this.s<0&&o.compareTo(t.ZERO)>0&&r.subTo(o,o),o}function A(t){this.m=t}function R(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function O(t){return t}function C(t){t.divRemTo(this.m,null,t)}function F(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function V(t,i){t.squareTo(i),this.reduce(i)}function N(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var i=3&t;return i=i*(2-(15&t)*i)&15,i=i*(2-(255&t)*i)&255,i=i*(2-((65535&t)*i&65535))&65535,i=i*(2-t*i%this.DV)%this.DV,i>0?this.DV-i:-i}function k(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function q(r){var o=i();return r.abs().dlShiftTo(this.m.t,o),o.divRemTo(this.m,null,o),r.s<0&&o.compareTo(t.ZERO)>0&&this.m.subTo(o,o),o}function P(t){var r=i();return t.copyTo(r),this.reduce(r),r}function L(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var i=0;i<this.m.t;++i){var r=32767&t[i],o=r*this.mpl+((r*this.mph+(t[i]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=i+this.m.t,t[r]+=this.m.am(0,o,t,i,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function x(t,i){t.squareTo(i),this.reduce(i)}function I(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function Z(){return 0==(this.t>0?1&this[0]:this.s)}function z(r,o){if(r>4294967295||1>r)return t.ONE;var s=i(),e=i(),h=o.convert(this),n=T(r)-1;for(h.copyTo(s);--n>=0;)if(o.sqrTo(s,e),(r&1<<n)>0)o.mulTo(e,h,s);else{var u=s;s=e,e=u}return o.revert(s)}function U(t,i){var r;return r=256>t||i.isEven()?new A(i):new k(i),this.exp(t,r)}function j(){var t=i();return this.copyTo(t),t}function H(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function _(){return 0==this.t?this.s:this[0]<<24>>24}function G(){return 0==this.t?this.s:this[0]<<16>>16}function J(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function K(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Q(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var r=this.chunkSize(t),o=Math.pow(t,r),s=f(o),e=i(),h=i(),n="";for(this.divRemTo(s,e,h);e.signum()>0;)n=(o+h.intValue()).toString(t).substr(1)+n,e.divRemTo(s,e,h);return h.intValue().toString(t)+n}function W(i,r){this.fromInt(0),null==r&&(r=10);for(var o=this.chunkSize(r),s=Math.pow(r,o),e=!1,n=0,u=0,f=0;f<i.length;++f){var a=h(i,f);0>a?"-"==i.charAt(f)&&0==this.signum()&&(e=!0):(u=r*u+a,++n>=o&&(this.dMultiply(s),this.dAddOffset(u,0),n=0,u=0))}n>0&&(this.dMultiply(Math.pow(r,n)),this.dAddOffset(u,0)),e&&t.ZERO.subTo(this,this)}function X(i,r,o){if("number"==typeof r)if(2>i)this.fromInt(1);else for(this.fromNumber(i,o),this.testBit(i-1)||this.bitwiseTo(t.ONE.shiftLeft(i-1),et,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>i&&this.subTo(t.ONE.shiftLeft(i-1),this);else{var s=new Array,e=7&i;s.length=(i>>3)+1,r.nextBytes(s),e>0?s[0]&=(1<<e)-1:s[0]=0,this.fromString(s,256)}}function Y(){var t=this.t,i=new Array;i[0]=this.s;var r=this.DB-t*this.DB%8,o,s=0;if(t-->0)for(r<this.DB&&(o=this[t]>>r)!=(this.s&this.DM)>>r&&(i[s++]=o|this.s<<this.DB-r);t>=0;)8>r?(o=(this[t]&(1<<r)-1)<<8-r,o|=this[--t]>>(r+=this.DB-8)):(o=this[t]>>(r-=8)&255,0>=r&&(r+=this.DB,--t)),0!=(128&o)&&(o|=-256),0==s&&(128&this.s)!=(128&o)&&++s,(s>0||o!=this.s)&&(i[s++]=o);return i}function $(t){return 0==this.compareTo(t)}function tt(t){return this.compareTo(t)<0?this:t}function it(t){return this.compareTo(t)>0?this:t}function rt(t,i,r){var o,s,e=Math.min(t.t,this.t);for(o=0;e>o;++o)r[o]=i(this[o],t[o]);if(t.t<this.t){for(s=t.s&this.DM,o=e;o<this.t;++o)r[o]=i(this[o],s);r.t=this.t}else{for(s=this.s&this.DM,o=e;o<t.t;++o)r[o]=i(s,t[o]);r.t=t.t}r.s=i(this.s,t.s),r.clamp()}function ot(t,i){return t&i}function st(t){var r=i();return this.bitwiseTo(t,ot,r),r}function et(t,i){return t|i}function ht(t){var r=i();return this.bitwiseTo(t,et,r),r}function nt(t,i){return t^i}function ut(t){var r=i();return this.bitwiseTo(t,nt,r),r}function ft(t,i){return t&~i}function at(t){var r=i();return this.bitwiseTo(t,ft,r),r}function pt(){for(var t=i(),r=0;r<this.t;++r)t[r]=this.DM&~this[r];return t.t=this.t,t.s=~this.s,t}function ct(t){var r=i();return 0>t?this.rShiftTo(-t,r):this.lShiftTo(t,r),r}function mt(t){var r=i();return 0>t?this.lShiftTo(-t,r):this.rShiftTo(t,r),r}function lt(t){if(0==t)return-1;var i=0;return 0==(65535&t)&&(t>>=16,i+=16),0==(255&t)&&(t>>=8,i+=8),0==(15&t)&&(t>>=4,i+=4),0==(3&t)&&(t>>=2,i+=2),0==(1&t)&&++i,i}function vt(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+lt(this[t]);return this.s<0?this.t*this.DB:-1}function Tt(t){for(var i=0;0!=t;)t&=t-1,++i;return i}function yt(){for(var t=0,i=this.s&this.DM,r=0;r<this.t;++r)t+=Tt(this[r]^i);return t}function dt(t){var i=Math.floor(t/this.DB);return i>=this.t?0!=this.s:0!=(this[i]&1<<t%this.DB)}function Dt(i,r){var o=t.ONE.shiftLeft(i);return this.bitwiseTo(o,r,o),o}function gt(t){return this.changeBit(t,et)}function Bt(t){return this.changeBit(t,ft)}function bt(t){return this.changeBit(t,nt)}function St(t,i){for(var r=0,o=0,s=Math.min(t.t,this.t);s>r;)o+=this[r]+t[r],i[r++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o+=t.s;r<this.t;)o+=this[r],i[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<t.t;)o+=t[r],i[r++]=o&this.DM,o>>=this.DB;o+=t.s}i.s=0>o?-1:0,o>0?i[r++]=o:-1>o&&(i[r++]=this.DV+o),i.t=r,i.clamp()}function Et(t){var r=i();return this.addTo(t,r),r}function wt(t){var r=i();return this.subTo(t,r),r}function Mt(t){var r=i();return this.multiplyTo(t,r),r}function At(t){var r=i();return this.divRemTo(t,r,null),r}function Rt(t){var r=i();return this.divRemTo(t,null,r),r}function Ot(t){var r=i(),o=i();return this.divRemTo(t,r,o),new Array(r,o)}function Ct(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Ft(t,i){for(;this.t<=i;)this[this.t++]=0;for(this[i]+=t;this[i]>=this.DV;)this[i]-=this.DV,++i>=this.t&&(this[this.t++]=0),++this[i]}function Vt(){}function Nt(t){return t}function kt(t,i,r){t.multiplyTo(i,r)}function qt(t,i){t.squareTo(i)}function Pt(t){return this.exp(t,new Vt)}function Lt(t,i,r){var o=Math.min(this.t+t.t,i);for(r.s=0,r.t=o;o>0;)r[--o]=0;var s;for(s=r.t-this.t;s>o;++o)r[o+this.t]=this.am(0,t[o],r,o,0,this.t);for(s=Math.min(t.t,i);s>o;++o)this.am(0,t[o],r,o,0,i-o);r.clamp()}function xt(t,i,r){--i;var o=r.t=this.t+t.t-i;for(r.s=0;--o>=0;)r[o]=0;for(o=Math.max(i-this.t,0);o<t.t;++o)r[this.t+o-i]=this.am(i-o,t[o],r,0,0,this.t+o-i);r.clamp(),r.drShiftTo(1,r)}function It(r){this.r2=i(),this.q3=i(),t.ONE.dlShiftTo(2*r.t,this.r2),this.mu=this.r2.divide(r),this.m=r}function Zt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var r=i();return t.copyTo(r),this.reduce(r),r}function zt(t){return t}function Ut(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function jt(t,i){t.squareTo(i),this.reduce(i)}function Ht(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function _t(t,r){var o=t.bitLength(),s,e=f(1),h;if(0>=o)return e;s=18>o?1:48>o?3:144>o?4:768>o?5:6,h=8>o?new A(r):r.isEven()?new It(r):new k(r);var n=new Array,u=3,a=s-1,p=(1<<s)-1;if(n[1]=h.convert(this),s>1){var c=i();for(h.sqrTo(n[1],c);p>=u;)n[u]=i(),h.mulTo(c,n[u-2],n[u]),u+=2}var m=t.t-1,l,v=!0,y=i(),d;for(o=T(t[m])-1;m>=0;){for(o>=a?l=t[m]>>o-a&p:(l=(t[m]&(1<<o+1)-1)<<a-o,m>0&&(l|=t[m-1]>>this.DB+o-a)),u=s;0==(1&l);)l>>=1,--u;if((o-=u)<0&&(o+=this.DB,--m),v)n[l].copyTo(e),v=!1;else{for(;u>1;)h.sqrTo(e,y),h.sqrTo(y,e),u-=2;u>0?h.sqrTo(e,y):(d=e,e=y,y=d),h.mulTo(y,n[l],e)}for(;m>=0&&0==(t[m]&1<<o);)h.sqrTo(e,y),d=e,e=y,y=d,--o<0&&(o=this.DB-1,--m)}return h.revert(e)}function Gt(t){var i=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(i.compareTo(r)<0){var o=i;i=r,r=o}var s=i.getLowestSetBit(),e=r.getLowestSetBit();if(0>e)return i;for(e>s&&(e=s),e>0&&(i.rShiftTo(e,i),r.rShiftTo(e,r));i.signum()>0;)(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),i.compareTo(r)>=0?(i.subTo(r,i),i.rShiftTo(1,i)):(r.subTo(i,r),r.rShiftTo(1,r));return e>0&&r.lShiftTo(e,r),r}function Jt(t){if(0>=t)return 0;var i=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==i)r=this[0]%t;else for(var o=this.t-1;o>=0;--o)r=(i*r+this[o])%t;return r}function Kt(i){var r=i.isEven();if(this.isEven()&&r||0==i.signum())return t.ZERO;for(var o=i.clone(),s=this.clone(),e=f(1),h=f(0),n=f(0),u=f(1);0!=o.signum();){for(;o.isEven();)o.rShiftTo(1,o),r?(e.isEven()&&h.isEven()||(e.addTo(this,e),h.subTo(i,h)),e.rShiftTo(1,e)):h.isEven()||h.subTo(i,h),h.rShiftTo(1,h);for(;s.isEven();)s.rShiftTo(1,s),r?(n.isEven()&&u.isEven()||(n.addTo(this,n),u.subTo(i,u)),n.rShiftTo(1,n)):u.isEven()||u.subTo(i,u),u.rShiftTo(1,u);o.compareTo(s)>=0?(o.subTo(s,o),r&&e.subTo(n,e),h.subTo(u,h)):(s.subTo(o,s),r&&n.subTo(e,n),u.subTo(h,u))}return 0!=s.compareTo(t.ONE)?t.ZERO:u.compareTo(i)>=0?u.subtract(i):u.signum()<0?(u.addTo(i,u),u.signum()<0?u.add(i):u):u}function Qt(t){var i,r=this.abs();if(1==r.t&&r[0]<=ei[ei.length-1]){for(i=0;i<ei.length;++i)if(r[0]==ei[i])return!0;return!1}if(r.isEven())return!1;for(i=1;i<ei.length;){for(var o=ei[i],s=i+1;s<ei.length&&hi>o;)o*=ei[s++];for(o=r.modInt(o);s>i;)if(o%ei[i++]==0)return!1}return r.millerRabin(t)}function Wt(r){var o=this.subtract(t.ONE),s=o.getLowestSetBit();if(0>=s)return!1;var e=o.shiftRight(s);r=r+1>>1,r>ei.length&&(r=ei.length);for(var h=i(),n=0;r>n;++n){h.fromInt(ei[n]);var u=h.modPow(e,this);if(0!=u.compareTo(t.ONE)&&0!=u.compareTo(o)){for(var f=1;f++<s&&0!=u.compareTo(o);)if(u=u.modPowInt(2,this),0==u.compareTo(t.ONE))return!1;if(0!=u.compareTo(o))return!1}}return!0}var Xt,Yt=0xdeadbeefcafe,$t=15715070==(16777215&Yt);t.prototype.am=s,Xt=28,t.prototype.DB=Xt,t.prototype.DM=(1<<Xt)-1,t.prototype.DV=1<<Xt;var ti=52;t.prototype.FV=Math.pow(2,ti),t.prototype.F1=ti-Xt,t.prototype.F2=2*Xt-ti;var ii="0123456789abcdefghijklmnopqrstuvwxyz",ri=new Array,oi,si;for(oi="0".charCodeAt(0),si=0;9>=si;++si)ri[oi++]=si;for(oi="a".charCodeAt(0),si=10;36>si;++si)ri[oi++]=si;for(oi="A".charCodeAt(0),si=10;36>si;++si)ri[oi++]=si;A.prototype.convert=R,A.prototype.revert=O,A.prototype.reduce=C,A.prototype.mulTo=F,A.prototype.sqrTo=V,k.prototype.convert=q,k.prototype.revert=P,k.prototype.reduce=L,k.prototype.mulTo=I,k.prototype.sqrTo=x,t.prototype.copyTo=n,t.prototype.fromInt=u,t.prototype.fromString=a,t.prototype.clamp=p,t.prototype.dlShiftTo=d,t.prototype.drShiftTo=D,t.prototype.lShiftTo=g,t.prototype.rShiftTo=B,t.prototype.subTo=b,t.prototype.multiplyTo=S,t.prototype.squareTo=E,t.prototype.divRemTo=w,t.prototype.invDigit=N,t.prototype.isEven=Z,t.prototype.exp=z,t.prototype.toString=c,t.prototype.negate=m,t.prototype.abs=l,t.prototype.compareTo=v,t.prototype.bitLength=y,t.prototype.mod=M,t.prototype.modPowInt=U,t.ZERO=f(0),t.ONE=f(1),Vt.prototype.convert=Nt,Vt.prototype.revert=Nt,Vt.prototype.mulTo=kt,Vt.prototype.sqrTo=qt,It.prototype.convert=Zt,It.prototype.revert=zt,It.prototype.reduce=Ut,It.prototype.mulTo=Ht,It.prototype.sqrTo=jt;var ei=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],hi=(1<<26)/ei[ei.length-1];return t.prototype.chunkSize=J,t.prototype.toRadix=Q,t.prototype.fromRadix=W,t.prototype.fromNumber=X,t.prototype.bitwiseTo=rt,t.prototype.changeBit=Dt,t.prototype.addTo=St,t.prototype.dMultiply=Ct,t.prototype.dAddOffset=Ft,t.prototype.multiplyLowerTo=Lt,t.prototype.multiplyUpperTo=xt,t.prototype.modInt=Jt,t.prototype.millerRabin=Wt,t.prototype.clone=j,t.prototype.intValue=H,t.prototype.byteValue=_,t.prototype.shortValue=G,t.prototype.signum=K,t.prototype.toByteArray=Y,t.prototype.equals=$,t.prototype.min=tt,t.prototype.max=it,t.prototype.and=st,t.prototype.or=ht,t.prototype.xor=ut,t.prototype.andNot=at,t.prototype.not=pt,t.prototype.shiftLeft=ct,t.prototype.shiftRight=mt,t.prototype.getLowestSetBit=vt,t.prototype.bitCount=yt,t.prototype.testBit=dt,t.prototype.setBit=gt,t.prototype.clearBit=Bt,t.prototype.flipBit=bt,t.prototype.add=Et,t.prototype.subtract=wt,t.prototype.multiply=Mt,t.prototype.divide=At,t.prototype.remainder=Rt,t.prototype.divideAndRemainder=Ot,t.prototype.modPow=_t,t.prototype.modInverse=Kt,t.prototype.pow=Pt,t.prototype.gcd=Gt,t.prototype.isProbablePrime=Qt,t}()}).call(this),function(){n={},n.generateVerifier=function(t,o){var s=r(o),e=o&&o.salt||i.secret(),n,u=o&&o.hashedIdentityAndPassword;u||(n=o&&o.identity||i.secret(),u=s.hash(n+":"+t));var f=s.hash(e+u),a=new h(f,16),p=s.g.modPow(a,s.N);return{identity:n,salt:e,verifier:p.toString(16)}},n.matchVerifier={identity:String,salt:String,verifier:String};var t={hash:function(t){return s(t).toLowerCase()},N:new h("EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",16),g:new h("2")};t.k=new h(t.hash(t.N.toString(16)+t.g.toString(16)),16);var r=function(i){if(!i)return t;var r=e.extend({},t);return e.each(["N","g","k"],function(t){if(i[t])if("string"==typeof i[t])r[t]=new h(i[t],16);else{if(!(i[t]instanceof h))throw new Error("Invalid parameter: "+t);r[t]=i[t]}}),i.hash&&(r.hash=function(t){return i.hash(t).toLowerCase()}),!i.k&&(i.N||i.g||i.hash)&&(r.k=r.hash(r.N.toString(16)+r.g.toString(16))),r}}.call(this),"undefined"==typeof Package&&(Package={}),Package.srp={SRP:n}}();

!function(){var e=Package.meteor.Meteor,r=Package["accounts-base"].Accounts,a=Package["accounts-base"].AccountsClient,s=Package.srp.SRP,o=Package.sha.SHA256,t=Package.ejson.EJSON,n=Package["ddp-client"].DDP,c=Package.check.check,d=Package.check.Match,i=Package.underscore._,l=Package.ecmascript.ECMAScript,u=Package["babel-runtime"].babelHelpers,g=Package["ecmascript-runtime"].Symbol,w=Package["ecmascript-runtime"].Map,P=Package["ecmascript-runtime"].Set,m=Package.promise.Promise;(function(){e.loginWithPassword=function(e,s,o){"string"==typeof e&&(e=-1===e.indexOf("@")?{username:e}:{email:e}),r.callLoginMethod({methodArguments:[{user:e,password:r._hashPassword(s)}],userCallback:function(r,t){r&&400===r.error&&"old password format"===r.reason?a({upgradeError:r,userSelector:e,plaintextPassword:s},o):r?o&&o(r):o&&o()}})},r._hashPassword=function(e){return{digest:o(e),algorithm:"sha-256"}};var a=function(a,s){var n;try{n=t.parse(a.upgradeError.details)}catch(c){}n&&"srp"===n.format?r.callLoginMethod({methodArguments:[{user:a.userSelector,srp:o(n.identity+":"+a.plaintextPassword),password:r._hashPassword(a.plaintextPassword)}],userCallback:s}):s&&s(new e.Error(400,"Password is old. Please reset your password."))};r.createUser=function(a,s){if(a=i.clone(a),"string"!=typeof a.password)throw new Error("options.password must be a string");return a.password?(a.password=r._hashPassword(a.password),void r.callLoginMethod({methodName:"createUser",methodArguments:[a],userCallback:s})):void s(new e.Error(400,"Password may not be empty"))},r.changePassword=function(s,o,t){return e.user()?(c(o,String),o?void r.connection.apply("changePassword",[s?r._hashPassword(s):null,r._hashPassword(o)],function(n,c){n||!c?n&&400===n.error&&"old password format"===n.reason?a({upgradeError:n,userSelector:{id:e.userId()},plaintextPassword:s},function(e){e?t&&t(e):r.changePassword(s,o,t)}):t&&t(n||new Error("No result from changePassword.")):t&&t()}):void t(new e.Error(400,"Password may not be empty"))):void(t&&t(new Error("Must be logged in to change password.")))},r.forgotPassword=function(e,a){if(!e.email)throw new Error("Must pass options.email");r.connection.call("forgotPassword",e,a)},r.resetPassword=function(a,s,o){return c(a,String),c(s,String),s?void r.callLoginMethod({methodName:"resetPassword",methodArguments:[a,r._hashPassword(s)],userCallback:o}):void o(new e.Error(400,"Password may not be empty"))},r.verifyEmail=function(e,a){if(!e)throw new Error("Need to pass token");r.callLoginMethod({methodName:"verifyEmail",methodArguments:[e],userCallback:a})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-password"]={}}();

!function(){var a=Package.meteor.Meteor,e;(function(){}).call(this),"undefined"==typeof Package&&(Package={}),Package["cfs:graphicsmagick"]={gm:e}}();

!function(){var e=Package.meteor.Meteor,t;(function(){(function(){(function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return Se.call(e,t)}function s(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(e){we.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function i(e,t){var n=!0;return _(function(){return n&&(a(e),n=!1),t.apply(this,arguments)},t)}function r(e,t){Mt[e]||(a(t),Mt[e]=!0)}function o(e,t){return function(n){return p(e.call(this,n),t)}}function u(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function c(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months"),a,i;return 0>t-s?(a=e.clone().add(n-1,"months"),i=(t-s)/(s-a)):(a=e.clone().add(n+1,"months"),i=(t-s)/(a-s)),-(n+i)}function l(e,t,n){var s;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(s=e.isPM(n),s&&12>t&&(t+=12),s||12!==t||(t=0),t):t}function d(){}function f(e,t){t!==!1&&F(e),m(this,e),this._d=new Date(+e._d),wt===!1&&(wt=!0,we.updateOffset(this),wt=!1)}function h(e){var t=S(e),n=t.year||0,s=t.quarter||0,a=t.month||0,i=t.week||0,r=t.day||0,o=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+36e5*o,this._days=+r+7*i,this._months=+a+3*s+12*n,this._data={},this._locale=we.localeData(),this._bubble()}function _(e,t){for(var s in t)n(t,s)&&(e[s]=t[s]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t){var n,s,a;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Ie.length>0)for(n in Ie)s=Ie[n],a=t[s],"undefined"!=typeof a&&(e[s]=a);return e}function y(e){return 0>e?Math.ceil(e):Math.floor(e)}function p(e,t,n){for(var s=""+Math.abs(e),a=e>=0;s.length<t;)s="0"+s;return(a?n?"+":"":"-")+s}function g(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function M(e,t){var n;return t=H(t,e),e.isBefore(t)?n=g(e,t):(n=g(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function D(e,t){return function(n,s){var a,i;return null===s||isNaN(+s)||(r(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),i=n,n=s,s=i),n="string"==typeof n?+n:n,a=we.duration(n,s),w(this,a,e),this}}function w(e,t,n,s){var a=t._milliseconds,i=t._days,r=t._months;s=null==s?!0:s,a&&e._d.setTime(+e._d+a*n),i&&me(e,"Date",_e(e,"Date")+i*n),r&&he(e,_e(e,"Month")+r*n),s&&we.updateOffset(e,i||r)}function Y(e){return"[object Array]"===Object.prototype.toString.call(e)}function v(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function k(e,t,n){var s=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),i=0,r;for(r=0;s>r;r++)(n&&e[r]!==t[r]||!n&&O(e[r])!==O(t[r]))&&i++;return i+a}function b(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ft[e]||ht[t]||t}return e}function S(e){var t={},s,a;for(a in e)n(e,a)&&(s=b(a),s&&(t[s]=e[a]));return t}function T(t){var n,s;if(0===t.indexOf("week"))n=7,s="day";else{if(0!==t.indexOf("month"))return;n=12,s="month"}we[t]=function(a,i){var r,o,u=we._locale[t],c=[];if("number"==typeof a&&(i=a,a=e),o=function(e){var t=we().utc().set(s,e);return u.call(we._locale,t,a||"")},null!=i)return o(i);for(r=0;n>r;r++)c.push(o(r));return c}}function O(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function U(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function W(e,t,n){return ce(we([e,11,31+t-n]),t,n).week}function C(e){return G(e)?366:365}function G(e){return e%4===0&&e%100!==0||e%400===0}function F(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Ue]<0||e._a[Ue]>11?Ue:e._a[We]<1||e._a[We]>U(e._a[Oe],e._a[Ue])?We:e._a[Ce]<0||e._a[Ce]>24||24===e._a[Ce]&&(0!==e._a[Ge]||0!==e._a[Fe]||0!==e._a[Pe])?Ce:e._a[Ge]<0||e._a[Ge]>59?Ge:e._a[Fe]<0||e._a[Fe]>59?Fe:e._a[Pe]<0||e._a[Pe]>999?Pe:-1,e._pf._overflowDayOfYear&&(Oe>t||t>We)&&(t=We),e._pf.overflow=t)}function P(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function L(e){return e?e.toLowerCase().replace("_","-"):e}function I(e){for(var t=0,n,s,a,i;t<e.length;){for(i=L(e[t]).split("-"),n=i.length,s=L(e[t+1]),s=s?s.split("-"):null;n>0;){if(a=x(i.slice(0,n).join("-")))return a;if(s&&s.length>=n&&k(i,s,!0)>=n-1)break;n--}t++}return null}function x(e){var t=null;if(!Le[e]&&xe)try{t=we.locale(),require("./locale/"+e),we.locale(t)}catch(n){}return Le[e]}function H(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(we.isMoment(e)||v(e)?+e:+we(e))-+n,n._d.setTime(+n._d+s),we.updateOffset(n,!1),n):we(e).local()}function A(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t=e.match(Ze),n,s;for(n=0,s=t.length;s>n;n++)gt[t[n]]?t[n]=gt[t[n]]:t[n]=A(t[n]);return function(a){var i="";for(n=0;s>n;n++)i+=t[n]instanceof Function?t[n].call(a,e):t[n];return i}}function Z(e,t){return e.isValid()?(t=E(t,e.localeData()),_t[t]||(_t[t]=z(t)),_t[t](e)):e.localeData().invalidDate()}function E(e,t){function n(e){return t.longDateFormat(e)||e}var s=5;for(Ee.lastIndex=0;s>=0&&Ee.test(e);)e=e.replace(Ee,n),Ee.lastIndex=0,s-=1;return e}function j(e,t){var n,s=t._strict;switch(e){case"Q":return Ke;case"DDDD":return tt;case"YYYY":case"GGGG":case"gggg":return s?nt:qe;case"Y":case"G":case"g":return at;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return s?st:Ve;case"S":if(s)return Ke;case"SS":if(s)return et;case"SSS":if(s)return tt;case"DDD":return Ne;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Je;case"a":case"A":return t._locale._meridiemParse;case"x":return Qe;case"X":return Xe;case"Z":case"ZZ":return Re;case"T":return Be;case"SSSS":return $e;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return s?et:je;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return je;case"Do":return s?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(X(Q(e.replace("\\","")),"i"))}}function N(e){e=e||"";var t=e.match(Re)||[],n=t[t.length-1]||[],s=(n+"").match(ct)||["-",0,0],a=+(60*s[1])+O(s[2]);return"+"===s[0]?a:-a}function q(e,t,n){var s,a=n._a;switch(e){case"Q":null!=t&&(a[Ue]=3*(O(t)-1));break;case"M":case"MM":null!=t&&(a[Ue]=O(t)-1);break;case"MMM":case"MMMM":s=n._locale.monthsParse(t,e,n._strict),null!=s?a[Ue]=s:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(a[We]=O(t));break;case"Do":null!=t&&(a[We]=O(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=O(t));break;case"YY":a[Oe]=we.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":a[Oe]=O(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":a[Ce]=O(t);break;case"m":case"mm":a[Ge]=O(t);break;case"s":case"ss":a[Fe]=O(t);break;case"S":case"SS":case"SSS":case"SSSS":a[Pe]=O(1e3*("0."+t));break;case"x":n._d=new Date(O(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=N(t);break;case"dd":case"ddd":case"dddd":s=n._locale.weekdaysParse(t),null!=s?(n._w=n._w||{},n._w.d=s):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=O(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=we.parseTwoDigitYear(t)}}function V(e){var n,s,a,i,r,o,u;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(r=1,o=4,s=t(n.GG,e._a[Oe],ce(we(),1,4).year),a=t(n.W,1),i=t(n.E,1)):(r=e._locale._week.dow,o=e._locale._week.doy,s=t(n.gg,e._a[Oe],ce(we(),r,o).year),a=t(n.w,1),null!=n.d?(i=n.d,r>i&&++a):i=null!=n.e?n.e+r:r),u=le(s,a,i,o,r),e._a[Oe]=u.year,e._dayOfYear=u.dayOfYear}function $(e){var n,s,a=[],i,r;if(!e._d){for(i=R(e),e._w&&null==e._a[We]&&null==e._a[Ue]&&V(e),e._dayOfYear&&(r=t(e._a[Oe],i[Oe]),e._dayOfYear>C(r)&&(e._pf._overflowDayOfYear=!0),s=ie(r,0,e._dayOfYear),e._a[Ue]=s.getUTCMonth(),e._a[We]=s.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=a[n]=i[n];for(;7>n;n++)e._a[n]=a[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Ce]&&0===e._a[Ge]&&0===e._a[Fe]&&0===e._a[Pe]&&(e._nextDay=!0,e._a[Ce]=0),e._d=(e._useUTC?ie:ae).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ce]=24)}}function J(e){var t;e._d||(t=S(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],$(e))}function R(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function B(t){if(t._f===we.ISO_8601)return void ee(t);t._a=[],t._pf.empty=!0;var n=""+t._i,s,a,i,r,o,u=n.length,c=0;for(i=E(t._f,t._locale).match(Ze)||[],s=0;s<i.length;s++)r=i[s],a=(n.match(j(r,t))||[])[0],a&&(o=n.substr(0,n.indexOf(a)),o.length>0&&t._pf.unusedInput.push(o),n=n.slice(n.indexOf(a)+a.length),c+=a.length),gt[r]?(a?t._pf.empty=!1:t._pf.unusedTokens.push(r),q(r,a,t)):t._strict&&!a&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=u-c,n.length>0&&t._pf.unusedInput.push(n),t._pf.bigHour===!0&&t._a[Ce]<=12&&(t._pf.bigHour=e),t._a[Ce]=l(t._locale,t._a[Ce],t._meridiem),$(t),F(t)}function Q(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,a){return t||n||s||a})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(e){var t,n,a,i,r;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(i=0;i<e._f.length;i++)r=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=s(),t._f=e._f[i],B(t),P(t)&&(r+=t._pf.charsLeftOver,r+=10*t._pf.unusedTokens.length,t._pf.score=r,(null==a||a>r)&&(a=r,n=t));_(e,n||t)}function ee(e){var t,n,s=e._i,a=it.exec(s);if(a){for(e._pf.iso=!0,t=0,n=ot.length;n>t;t++)if(ot[t][1].exec(s)){e._f=ot[t][0]+(a[6]||" ");break}for(t=0,n=ut.length;n>t;t++)if(ut[t][1].exec(s)){e._f+=ut[t][0];break}s.match(Re)&&(e._f+="Z"),B(e)}else e._isValid=!1}function te(e){ee(e),e._isValid===!1&&(delete e._isValid,we.createFromInputFallback(e))}function ne(e,t){var n=[],s;for(s=0;s<e.length;++s)n.push(t(e[s],s));return n}function se(t){var n=t._i,s;n===e?t._d=new Date:v(n)?t._d=new Date(+n):null!==(s=He.exec(n))?t._d=new Date(+s[1]):"string"==typeof n?te(t):Y(n)?(t._a=ne(n.slice(0),function(e){return parseInt(e,10)}),$(t)):"object"==typeof n?J(t):"number"==typeof n?t._d=new Date(n):we.createFromInputFallback(t)}function ae(e,t,n,s,a,i,r){var o=new Date(e,t,n,s,a,i,r);return 1970>e&&o.setFullYear(e),o}function ie(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function re(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function oe(e,t,n,s,a){return a.relativeTime(t||1,!!n,e,s)}function ue(e,t,n){var s=we.duration(e).abs(),a=be(s.as("s")),i=be(s.as("m")),r=be(s.as("h")),o=be(s.as("d")),u=be(s.as("M")),c=be(s.as("y")),l=a<mt.s&&["s",a]||1===i&&["m"]||i<mt.m&&["mm",i]||1===r&&["h"]||r<mt.h&&["hh",r]||1===o&&["d"]||o<mt.d&&["dd",o]||1===u&&["M"]||u<mt.M&&["MM",u]||1===c&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,oe.apply({},l)}function ce(e,t,n){var s=n-t,a=n-e.day(),i;return a>s&&(a-=7),s-7>a&&(a+=7),i=we(e).add(a,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function le(e,t,n,s,a){var i=ie(e,0,1).getUTCDay(),r,o;return i=0===i?7:i,n=null!=n?n:a,r=a-i+(i>s?7:0)-(a>i?7:0),o=7*(t-1)+(n-a)+r+1,{year:o>0?e:e-1,dayOfYear:o>0?o:C(e-1)+o}}function de(t){var n=t._i,s=t._f,a;return t._locale=t._locale||we.localeData(t._l),null===n||s===e&&""===n?we.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),we.isMoment(n)?new f(n,!0):(s?Y(s)?K(t):B(t):se(t),a=new f(t),a._nextDay&&(a.add(1,"d"),a._nextDay=e),a))}function fe(e,t){var n,s;if(1===t.length&&Y(t[0])&&(t=t[0]),!t.length)return we();for(n=t[0],s=1;s<t.length;++s)t[s][e](n)&&(n=t[s]);return n}function he(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),U(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function _e(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function me(e,t,n){return"Month"===t?he(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function ye(e,t){return function(n){return null!=n?(me(this,e,n),we.updateOffset(this,t),this):_e(this,e)}}function pe(e){return 400*e/146097}function ge(e){return 146097*e/400}function Me(e){we.duration.fn[e]=function(){return this._data[e]}}function De(e){"undefined"==typeof ender&&(ke=ve.moment,e?ve.moment=i("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",we):ve.moment=we)}for(var we,Ye="2.9.0",ve="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,ke,be=Math.round,Se=Object.prototype.hasOwnProperty,Te,Oe=0,Ue=1,We=2,Ce=3,Ge=4,Fe=5,Pe=6,Le={},Ie=[],xe="undefined"!=typeof module&&module&&module.exports,He=/^\/?Date\((\-?\d+)/i,Ae=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ze=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ze=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Ee=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,je=/\d\d?/,Ne=/\d{1,3}/,qe=/\d{1,4}/,Ve=/[+\-]?\d{1,6}/,$e=/\d+/,Je=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Re=/Z|[\+\-]\d\d:?\d\d/gi,Be=/T/i,Qe=/[\+\-]?\d+/,Xe=/[\+\-]?\d+(\.\d{1,3})?/,Ke=/\d/,et=/\d\d/,tt=/\d{3}/,nt=/\d{4}/,st=/[+-]?\d{6}/,at=/[+-]?\d+/,it=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rt="YYYY-MM-DDTHH:mm:ssZ",ot=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ut=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ct=/([\+\-]|\d\d)/gi,lt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),dt={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ft={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ht={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},_t={},mt={s:45,m:45,h:22,d:26,M:11},yt="DDD w W M D d".split(" "),pt="M D H h m s w W".split(" "),gt={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return p(this.year()%100,2)},YYYY:function(){return p(this.year(),4)},YYYYY:function(){return p(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+p(Math.abs(e),6)},gg:function(){return p(this.weekYear()%100,2)},gggg:function(){return p(this.weekYear(),4)},ggggg:function(){return p(this.weekYear(),5)},GG:function(){return p(this.isoWeekYear()%100,2)},GGGG:function(){return p(this.isoWeekYear(),4)},GGGGG:function(){return p(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return O(this.milliseconds()/100)},SS:function(){return p(O(this.milliseconds()/10),2)},SSS:function(){return p(this.milliseconds(),3)},SSSS:function(){return p(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+p(O(e/60),2)+":"+p(O(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+p(O(e/60),2)+p(O(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Mt={},Dt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],wt=!1;yt.length;)Te=yt.pop(),gt[Te+"o"]=u(gt[Te],Te);for(;pt.length;)Te=pt.pop(),gt[Te+Te]=o(gt[Te],2);gt.DDDD=o(gt.DDD,3),_(d.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var s,a,i;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;12>s;s++){if(a=we.utc([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,s;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=we([2e3,1]).day(t),s="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(s.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var s=this._calendar[e];return"function"==typeof s?s.apply(t,[n]):s},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,s){var a=this._relativeTime[n];return"function"==typeof a?a(e,t,n,s):a.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ce(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),we=function(t,n,a,i){var r;return"boolean"==typeof a&&(i=a,a=e),r={},r._isAMomentObject=!0,r._i=t,r._f=n,r._l=a,r._strict=i,r._isUTC=!1,r._pf=s(),de(r)},we.suppressDeprecationWarnings=!1,we.createFromInputFallback=i("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),we.min=function(){var e=[].slice.call(arguments,0);return fe("isBefore",e)},we.max=function(){var e=[].slice.call(arguments,0);return fe("isAfter",e)},we.utc=function(t,n,a,i){var r;return"boolean"==typeof a&&(i=a,a=e),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=a,r._i=t,r._f=n,r._strict=i,r._pf=s(),de(r).utc()},we.unix=function(e){return we(1e3*e)},we.duration=function(e,t){var s=e,a=null,i,r,o,u;return we.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(a=Ae.exec(e))?(i="-"===a[1]?-1:1,s={y:0,d:O(a[We])*i,h:O(a[Ce])*i,m:O(a[Ge])*i,s:O(a[Fe])*i,ms:O(a[Pe])*i}):(a=ze.exec(e))?(i="-"===a[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},s={y:o(a[2]),M:o(a[3]),d:o(a[4]),h:o(a[5]),m:o(a[6]),s:o(a[7]),w:o(a[8])}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(u=M(we(s.from),we(s.to)),s={},s.ms=u.milliseconds,s.M=u.months),r=new h(s),we.isDuration(e)&&n(e,"_locale")&&(r._locale=e._locale),r},we.version=Ye,we.defaultFormat=rt,we.ISO_8601=function(){},we.momentProperties=Ie,we.updateOffset=function(){},we.relativeTimeThreshold=function(t,n){return mt[t]===e?!1:n===e?mt[t]:(mt[t]=n,!0)},we.lang=i("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return we.locale(e,t)}),we.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?we.defineLocale(e,t):we.localeData(e),n&&(we.duration._locale=we._locale=n)),we._locale._abbr},we.defineLocale=function(e,t){return null!==t?(t.abbr=e,Le[e]||(Le[e]=new d),Le[e].set(t),we.locale(e),Le[e]):(delete Le[e],null)},we.langData=i("moment.langData is deprecated. Use moment.localeData instead.",function(e){return we.localeData(e)}),we.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return we._locale;if(!Y(e)){if(t=x(e))return t;e=[e]}return I(e)},we.isMoment=function(e){return e instanceof f||null!=e&&n(e,"_isAMomentObject")},we.isDuration=function(e){return e instanceof h};for(Te=Dt.length-1;Te>=0;--Te)T(Dt[Te]);we.normalizeUnits=function(e){return b(e)},we.invalid=function(e){var t=we.utc(0/0);return null!=e?_(t._pf,e):t._pf.userInvalidated=!0,t},we.parseZone=function(){return we.apply(null,arguments).parseZone()},we.parseTwoDigitYear=function(e){return O(e)+(O(e)>68?1900:2e3)},we.isDate=v,_(we.fn=f.prototype,{clone:function(){return we(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=we(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():Z(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Z(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return P(this)},isDSTShifted:function(){return this._a?this.isValid()&&k(this._a,(this._isUTC?we.utc(this._a):we(this._a)).toArray())>0:!1},parsingFlags:function(){return _({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=Z(this,e||we.defaultFormat);return this.localeData().postformat(t)},add:D(1,"add"),subtract:D(-1,"subtract"),diff:function(e,t,n){var s=H(e,this),a=6e4*(s.utcOffset()-this.utcOffset()),i,r,o,u;return t=b(t),"year"===t||"month"===t||"quarter"===t?(o=c(this,s),"quarter"===t?o/=3:"year"===t&&(o/=12)):(r=this-s,o="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-a)/864e5:"week"===t?(r-a)/6048e5:r),n?o:y(o)},from:function(e,t){return we.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(we(),e)},calendar:function(e){var t=e||we(),n=H(t,this).startOf("day"),s=this.diff(n,"days",!0),a=-6>s?"sameElse":-1>s?"lastWeek":0>s?"lastDay":1>s?"sameDay":2>s?"nextDay":7>s?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this,we(t)))},isLeapYear:function(){return G(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=re(e,this.localeData()),this.add(e-t,"d")):t},month:ye("Month",!0),startOf:function(e){switch(e=b(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=b(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=b("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=we.isMoment(e)?e:we(e),+this>+e):(n=we.isMoment(e)?+e:+we(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=b("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=we.isMoment(e)?e:we(e),+e>+this):(n=we.isMoment(e)?+e:+we(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=b(t||"millisecond"),"millisecond"===t?(e=we.isMoment(e)?e:we(e),+this===+e):(n=+we(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:i("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=we.apply(null,arguments),this>e?this:e}),max:i("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=we.apply(null,arguments),e>this?this:e}),zone:i("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n=this._offset||0,s;return null!=e?("string"==typeof e&&(e=N(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(s=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),n!==e&&(!t||this._changeInProgress?w(this,we.duration(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,we.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(N(this._i)),this},hasAlignedHourOffset:function(e){return e=e?we(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return U(this.year(),this.month())},dayOfYear:function(e){var t=be((we(this).startOf("day")-we(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ce(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ce(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ce(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return W(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return W(this.year(),e.dow,e.doy)},get:function(e){return e=b(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else e=b(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(t){var n;return t===e?this._locale._abbr:(n=we.localeData(t),null!=n&&(this._locale=n),this)},lang:i("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),we.fn.millisecond=we.fn.milliseconds=ye("Milliseconds",!1),we.fn.second=we.fn.seconds=ye("Seconds",!1),we.fn.minute=we.fn.minutes=ye("Minutes",!1),we.fn.hour=we.fn.hours=ye("Hours",!0),we.fn.date=ye("Date",!0),we.fn.dates=i("dates accessor is deprecated. Use date instead.",ye("Date",!0)),we.fn.year=ye("FullYear",!0),we.fn.years=i("years accessor is deprecated. Use year instead.",ye("FullYear",!0)),we.fn.days=we.fn.day,we.fn.months=we.fn.month,we.fn.weeks=we.fn.week,we.fn.isoWeeks=we.fn.isoWeek,we.fn.quarters=we.fn.quarter,we.fn.toJSON=we.fn.toISOString,we.fn.isUTC=we.fn.isUtc,_(we.duration.fn=h.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,s=this._data,a,i,r,o=0;s.milliseconds=e%1e3,a=y(e/1e3),s.seconds=a%60,i=y(a/60),s.minutes=i%60,r=y(i/60),s.hours=r%24,t+=y(r/24),o=y(pe(t)),t-=y(ge(o)),n+=y(t/30),t%=30,o+=y(n/12),n%=12,s.days=t,s.months=n,s.years=o},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return y(this.days()/7)},valueOf:function(){
return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*O(this._months/12)},humanize:function(e){var t=ue(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=we.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=we.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=b(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=b(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*pe(t),"month"===e?n:n/12;switch(t=this._days+Math.round(ge(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:we.fn.lang,locale:we.fn.locale,toIsoString:i("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),s=Math.abs(this.hours()),a=Math.abs(this.minutes()),i=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(s||a||i?"T":"")+(s?s+"H":"")+(a?a+"M":"")+(i?i+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),we.duration.fn.toString=we.duration.fn.toISOString;for(Te in dt)n(dt,Te)&&Me(Te.toLowerCase());we.duration.fn.asMilliseconds=function(){return this.as("ms")},we.duration.fn.asSeconds=function(){return this.as("s")},we.duration.fn.asMinutes=function(){return this.as("m")},we.duration.fn.asHours=function(){return this.as("h")},we.duration.fn.asDays=function(){return this.as("d")},we.duration.fn.asWeeks=function(){return this.as("weeks")},we.duration.fn.asMonths=function(){return this.as("M")},we.duration.fn.asYears=function(){return this.as("y")},we.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===O(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),xe?module.exports=we:"function"==typeof define&&define.amd?(define(function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(ve.moment=ke),we}),De(!0)):De()}).call(this)}).call(this),function(){t=this.moment,delete this.moment}.call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["momentjs:moment"]={moment:t}}();

!function(){var a=Package.meteor.Meteor,e=Package.templating.Template,t=Package.underscore._,i=Package["momentjs:moment"].moment,n=Package.blaze.Blaze,o=Package.blaze.UI,s=Package.blaze.Handlebars,r=Package.spacebars.Spacebars,m=Package.htmljs.HTML,c;(function(){(function(){!function(a,e){var t=1e3,i=!1,n=a([]),o=function(){m.resume()},s=function(t,i){var o=t.data("livestampdata");if("number"==typeof i&&(i*=1e3),t.removeAttr("data-livestamp").removeData("livestamp"),i=e(i),e.isMoment(i)&&!isNaN(+i)){var s=a.extend({},{original:t.contents()},o);s.moment=e(i),t.data("livestampdata",s).empty(),n.push(t[0])}},r=function(){i||(m.update(),setTimeout(r,t))},m={update:function(){a("[data-livestamp]").each(function(){var e=a(this);s(e,e.data("livestamp"))});var t=[];n.each(function(){var i=a(this),n=i.data("livestampdata");if(void 0===n)t.push(this);else if(e.isMoment(n.moment)){var o=i.html(),s=n.moment.fromNow();if(o!=s){var r=a.Event("change.livestamp");i.trigger(r,[o,s]),r.isDefaultPrevented()||i.html(s)}}}),n=n.not(t)},pause:function(){i=!0},resume:function(){i=!1,r()},interval:function(a){return void 0===a?t:void(t=a)}},c={add:function(t,i){return"number"==typeof i&&(i*=1e3),i=e(i),e.isMoment(i)&&!isNaN(+i)&&(t.each(function(){s(a(this),i)}),m.update()),t},destroy:function(e){return n=n.not(e),e.each(function(){var t=a(this),i=t.data("livestampdata");return void 0===i?e:void t.html(i.original?i.original:"").removeData("livestampdata")}),e},isLivestamp:function(a){return void 0!==a.data("livestampdata")}};a.livestamp=m,a(o),a.fn.livestamp=function(a,e){return c[a]||(e=a,a="add"),c[a](this,e)}}(jQuery,i)}).call(this),function(){"undefined"!=typeof Package&&(c=this.livestamp)}.call(this),function(){var a=Package.templating.Template;a.registerHelper("livestamp",function(a){var e=i(a);e.isValid()||(e=i());var t=e.toISOString(),n=e.fromNow();return new r.SafeString('<span class="livestamp" data-livestamp="'+t+'">'+n+"</span>")})}.call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["copleykj:livestamp"]={livestamp:c}}();

!function(){var e=Package.meteor.Meteor,n=Package["momentjs:moment"].moment,t;(function(){(function(){t=this,t.moment=n}).call(this),function(){!function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(("undefined"!=typeof t?t:this).moment)}(function(e){return e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")},week:{dow:1,doy:4}})})}.call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["rzymek:moment-locale-fr"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.jquery.$,n=Package.jquery.jQuery;(function(){(function(){!function(e){var t="Close",n="BeforeClose",i="AfterClose",o="BeforeAppend",a="MarkupParse",r="Open",s="Change",c="mfp",l="."+c,u="mfp-ready",d="mfp-removing",p="mfp-prevent-close",f,m=function(){},g=!!window.jQuery,h,v=e(window),C,y,w,b,I,k=function(e,t){f.ev.on(c+e+l,t)},x=function(t,n,i,o){var a=document.createElement("div");return a.className="mfp-"+t,i&&(a.innerHTML=i),o?n&&n.appendChild(a):(a=e(a),n&&a.appendTo(n)),a},T=function(t,n){f.ev.triggerHandler(c+t,n),f.st.callbacks&&(t=t.charAt(0).toLowerCase()+t.slice(1),f.st.callbacks[t]&&f.st.callbacks[t].apply(f,e.isArray(n)?n:[n]))},P=function(t){return t===I&&f.currTemplate.closeBtn||(f.currTemplate.closeBtn=e(f.st.closeMarkup.replace("%title%",f.st.tClose)),I=t),f.currTemplate.closeBtn},E=function(){e.magnificPopup.instance||(f=new m,f.init(),e.magnificPopup.instance=f)},_=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};m.prototype={constructor:m,init:function(){var t=navigator.appVersion;f.isIE7=-1!==t.indexOf("MSIE 7."),f.isIE8=-1!==t.indexOf("MSIE 8."),f.isLowIE=f.isIE7||f.isIE8,f.isAndroid=/android/gi.test(t),f.isIOS=/iphone|ipad|ipod/gi.test(t),f.supportsTransition=_(),f.probablyMobile=f.isAndroid||f.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),y=e(document),f.popupsCache={}},open:function(t){C||(C=e(document.body));var n;if(t.isObj===!1){f.items=t.items.toArray(),f.index=0;var i=t.items,o;for(n=0;n<i.length;n++)if(o=i[n],o.parsed&&(o=o.el[0]),o===t.el[0]){f.index=n;break}}else f.items=e.isArray(t.items)?t.items:[t.items],f.index=t.index||0;if(f.isOpen)return void f.updateItemHTML();f.types=[],b="",t.mainEl&&t.mainEl.length?f.ev=t.mainEl.eq(0):f.ev=y,t.key?(f.popupsCache[t.key]||(f.popupsCache[t.key]={}),f.currTemplate=f.popupsCache[t.key]):f.currTemplate={},f.st=e.extend(!0,{},e.magnificPopup.defaults,t),f.fixedContentPos="auto"===f.st.fixedContentPos?!f.probablyMobile:f.st.fixedContentPos,f.st.modal&&(f.st.closeOnContentClick=!1,f.st.closeOnBgClick=!1,f.st.showCloseBtn=!1,f.st.enableEscapeKey=!1),f.bgOverlay||(f.bgOverlay=x("bg").on("click"+l,function(){f.close()}),f.wrap=x("wrap").attr("tabindex",-1).on("click"+l,function(e){f._checkIfClose(e.target)&&f.close()}),f.container=x("container",f.wrap)),f.contentContainer=x("content"),f.st.preloader&&(f.preloader=x("preloader",f.container,f.st.tLoading));var s=e.magnificPopup.modules;for(n=0;n<s.length;n++){var c=s[n];c=c.charAt(0).toUpperCase()+c.slice(1),f["init"+c].call(f)}T("BeforeOpen"),f.st.showCloseBtn&&(f.st.closeBtnInside?(k(a,function(e,t,n,i){n.close_replaceWith=P(i.type)}),b+=" mfp-close-btn-in"):f.wrap.append(P())),f.st.alignTop&&(b+=" mfp-align-top"),f.wrap.css(f.fixedContentPos?{overflow:f.st.overflowY,overflowX:"hidden",overflowY:f.st.overflowY}:{top:v.scrollTop(),position:"absolute"}),(f.st.fixedBgPos===!1||"auto"===f.st.fixedBgPos&&!f.fixedContentPos)&&f.bgOverlay.css({height:y.height(),position:"absolute"}),f.st.enableEscapeKey&&y.on("keyup"+l,function(e){27===e.keyCode&&f.close()}),v.on("resize"+l,function(){f.updateSize()}),f.st.closeOnContentClick||(b+=" mfp-auto-cursor"),b&&f.wrap.addClass(b);var d=f.wH=v.height(),p={};if(f.fixedContentPos&&f._hasScrollBar(d)){var m=f._getScrollbarSize();m&&(p.marginRight=m)}f.fixedContentPos&&(f.isIE7?e("body, html").css("overflow","hidden"):p.overflow="hidden");var g=f.st.mainClass;return f.isIE7&&(g+=" mfp-ie7"),g&&f._addClassToMFP(g),f.updateItemHTML(),T("BuildControls"),e("html").css(p),f.bgOverlay.add(f.wrap).prependTo(f.st.prependTo||C),f._lastFocusedEl=document.activeElement,setTimeout(function(){f.content?(f._addClassToMFP(u),f._setFocus()):f.bgOverlay.addClass(u),y.on("focusin"+l,f._onFocusIn)},16),f.isOpen=!0,f.updateSize(d),T(r),t},close:function(){f.isOpen&&(T(n),f.isOpen=!1,f.st.removalDelay&&!f.isLowIE&&f.supportsTransition?(f._addClassToMFP(d),setTimeout(function(){f._close()},f.st.removalDelay)):f._close())},_close:function(){T(t);var n=d+" "+u+" ";if(f.bgOverlay.detach(),f.wrap.detach(),f.container.empty(),f.st.mainClass&&(n+=f.st.mainClass+" "),f._removeClassFromMFP(n),f.fixedContentPos){var o={marginRight:""};f.isIE7?e("body, html").css("overflow",""):o.overflow="",e("html").css(o)}y.off("keyup"+l+" focusin"+l),f.ev.off(l),f.wrap.attr("class","mfp-wrap").removeAttr("style"),f.bgOverlay.attr("class","mfp-bg"),f.container.attr("class","mfp-container"),!f.st.showCloseBtn||f.st.closeBtnInside&&f.currTemplate[f.currItem.type]!==!0||f.currTemplate.closeBtn&&f.currTemplate.closeBtn.detach(),f._lastFocusedEl&&e(f._lastFocusedEl).focus(),f.currItem=null,f.content=null,f.currTemplate=null,f.prevHeight=0,T(i)},updateSize:function(e){if(f.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*t;f.wrap.css("height",n),f.wH=n}else f.wH=e||v.height();f.fixedContentPos||f.wrap.css("height",f.wH),T("Resize")},updateItemHTML:function(){var t=f.items[f.index];f.contentContainer.detach(),f.content&&f.content.detach(),t.parsed||(t=f.parseEl(f.index));var n=t.type;if(T("BeforeChange",[f.currItem?f.currItem.type:"",n]),f.currItem=t,!f.currTemplate[n]){var i=f.st[n]?f.st[n].markup:!1;T("FirstMarkupParse",i),i?f.currTemplate[n]=e(i):f.currTemplate[n]=!0}w&&w!==t.type&&f.container.removeClass("mfp-"+w+"-holder");var o=f["get"+n.charAt(0).toUpperCase()+n.slice(1)](t,f.currTemplate[n]);f.appendContent(o,n),t.preloaded=!0,T(s,t),w=t.type,f.container.prepend(f.contentContainer),T("AfterChange")},appendContent:function(e,t){f.content=e,e?f.st.showCloseBtn&&f.st.closeBtnInside&&f.currTemplate[t]===!0?f.content.find(".mfp-close").length||f.content.append(P()):f.content=e:f.content="",T(o),f.container.addClass("mfp-"+t+"-holder"),f.contentContainer.append(f.content)},parseEl:function(t){var n=f.items[t],i;if(n.tagName?n={el:e(n)}:(i=n.type,n={data:n,src:n.src}),n.el){for(var o=f.types,a=0;a<o.length;a++)if(n.el.hasClass("mfp-"+o[a])){i=o[a];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=i||f.st.type||"inline",n.index=t,n.parsed=!0,f.items[t]=n,T("ElementParse",n),f.items[t]},addGroup:function(e,t){var n=function(n){n.mfpEl=this,f._openClick(n,e,t)};t||(t={});var i="click.magnificPopup";t.mainEl=e,t.items?(t.isObj=!0,e.off(i).on(i,n)):(t.isObj=!1,t.delegate?e.off(i).on(i,t.delegate,n):(t.items=e,e.off(i).on(i,n)))},_openClick:function(t,n,i){var o=void 0!==i.midClick?i.midClick:e.magnificPopup.defaults.midClick;if(o||2!==t.which&&!t.ctrlKey&&!t.metaKey){var a=void 0!==i.disableOn?i.disableOn:e.magnificPopup.defaults.disableOn;if(a)if(e.isFunction(a)){if(!a.call(f))return!0}else if(v.width()<a)return!0;t.type&&(t.preventDefault(),f.isOpen&&t.stopPropagation()),i.el=e(t.mfpEl),i.delegate&&(i.items=n.find(i.delegate)),f.open(i)}},updateStatus:function(e,t){if(f.preloader){h!==e&&f.container.removeClass("mfp-s-"+h),t||"loading"!==e||(t=f.st.tLoading);var n={status:e,text:t};T("UpdateStatus",n),e=n.status,t=n.text,f.preloader.html(t),f.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),f.container.addClass("mfp-s-"+e),h=e}},_checkIfClose:function(t){if(!e(t).hasClass(p)){var n=f.st.closeOnContentClick,i=f.st.closeOnBgClick;if(n&&i)return!0;if(!f.content||e(t).hasClass("mfp-close")||f.preloader&&t===f.preloader[0])return!0;if(t===f.content[0]||e.contains(f.content[0],t)){if(n)return!0}else if(i&&e.contains(document,t))return!0;return!1}},_addClassToMFP:function(e){f.bgOverlay.addClass(e),f.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),f.wrap.removeClass(e)},_hasScrollBar:function(e){return(f.isIE7?y.height():document.body.scrollHeight)>(e||v.height())},_setFocus:function(){(f.st.focus?f.content.find(f.st.focus).eq(0):f.wrap).focus()},_onFocusIn:function(t){return t.target===f.wrap[0]||e.contains(f.wrap[0],t.target)?void 0:(f._setFocus(),!1)},_parseMarkup:function(t,n,i){var o;i.data&&(n=e.extend(i.data,n)),T(a,[t,n,i]),e.each(n,function(e,n){if(void 0===n||n===!1)return!0;if(o=e.split("_"),o.length>1){var i=t.find(l+"-"+o[0]);if(i.length>0){var a=o[1];"replaceWith"===a?i[0]!==n[0]&&i.replaceWith(n):"img"===a?i.is("img")?i.attr("src",n):i.replaceWith('<img src="'+n+'" class="'+i.attr("class")+'" />'):i.attr(o[1],n)}}else t.find(l+"-"+e).html(n)})},_getScrollbarSize:function(){if(void 0===f.scrollbarSize){var e=document.createElement("div");e.id="mfp-sbm",e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),f.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return f.scrollbarSize}},e.magnificPopup={instance:null,proto:m.prototype,modules:[],open:function(t,n){return E(),t=t?e.extend(!0,{},t):{},t.isObj=!0,t.index=n||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,n){n.options&&(e.magnificPopup.defaults[t]=n.options),e.extend(this.proto,n.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},e.fn.magnificPopup=function(t){E();var n=e(this);if("string"==typeof t)if("open"===t){var i,o=g?n.data("magnificPopup"):n[0].magnificPopup,a=parseInt(arguments[1],10)||0;o.items?i=o.items[a]:(i=n,o.delegate&&(i=i.find(o.delegate)),i=i.eq(a)),f._openClick({mfpEl:i},n,o)}else f.isOpen&&f[t].apply(f,Array.prototype.slice.call(arguments,1));else t=e.extend(!0,{},t),g?n.data("magnificPopup",t):n[0].magnificPopup=t,f.addGroup(n,t);return n};var S="inline",O,z,M,B=function(){M&&(z.after(M.addClass(O)).detach(),M=null)};e.magnificPopup.registerModule(S,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){f.types.push(S),k(t+"."+S,function(){B()})},getInline:function(t,n){if(B(),t.src){var i=f.st.inline,o=e(t.src);if(o.length){var a=o[0].parentNode;a&&a.tagName&&(z||(O=i.hiddenClass,z=x(O),O="mfp-"+O),M=o.after(z).detach().removeClass(O)),f.updateStatus("ready")}else f.updateStatus("error",i.tNotFound),o=e("<div>");return t.inlineElement=o,o}return f.updateStatus("ready"),f._parseMarkup(n,{},t),n}}});var F="ajax",H,L=function(){H&&C.removeClass(H)},A=function(){L(),f.req&&f.req.abort()};e.magnificPopup.registerModule(F,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){f.types.push(F),H=f.st.ajax.cursor,k(t+"."+F,A),k("BeforeChange."+F,A)},getAjax:function(t){H&&C.addClass(H),f.updateStatus("loading");var n=e.extend({url:t.src,success:function(n,i,o){var a={data:n,xhr:o};T("ParseAjax",a),f.appendContent(e(a.data),F),t.finished=!0,L(),f._setFocus(),setTimeout(function(){f.wrap.addClass(u)},16),f.updateStatus("ready"),T("AjaxContentAdded")},error:function(){L(),t.finished=t.loadError=!0,f.updateStatus("error",f.st.ajax.tError.replace("%url%",t.src))}},f.st.ajax.settings);return f.req=e.ajax(n),""}}});var j,N=function(t){if(t.data&&void 0!==t.data.title)return t.data.title;var n=f.st.image.titleSrc;if(n){if(e.isFunction(n))return n.call(f,t);if(t.el)return t.el.attr(n)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=f.st.image,n=".image";f.types.push("image"),k(r+n,function(){"image"===f.currItem.type&&e.cursor&&C.addClass(e.cursor)}),k(t+n,function(){e.cursor&&C.removeClass(e.cursor),v.off("resize"+l)}),k("Resize"+n,f.resizeImage),f.isLowIE&&k("AfterChange",f.resizeImage)},resizeImage:function(){var e=f.currItem;if(e&&e.img&&f.st.image.verticalFit){var t=0;f.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",f.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,j&&clearInterval(j),e.isCheckingImgSize=!1,T("ImageHasSize",e),e.imgHidden&&(f.content&&f.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var t=0,n=e.img[0],i=function(o){j&&clearInterval(j),j=setInterval(function(){return n.naturalWidth>0?void f._onImageHasSize(e):(t>200&&clearInterval(j),t++,void(3===t?i(10):40===t?i(50):100===t&&i(500)))},o)};i(1)},getImage:function(t,n){var i=0,o=function(){t&&(t.img[0].complete?(t.img.off(".mfploader"),t===f.currItem&&(f._onImageHasSize(t),f.updateStatus("ready")),t.hasSize=!0,t.loaded=!0,T("ImageLoadComplete")):(i++,200>i?setTimeout(o,100):a()))},a=function(){t&&(t.img.off(".mfploader"),t===f.currItem&&(f._onImageHasSize(t),f.updateStatus("error",r.tError.replace("%url%",t.src))),t.hasSize=!0,t.loaded=!0,t.loadError=!0)},r=f.st.image,s=n.find(".mfp-img");if(s.length){var c=document.createElement("img");c.className="mfp-img",t.img=e(c).on("load.mfploader",o).on("error.mfploader",a),c.src=t.src,s.is("img")&&(t.img=t.img.clone()),c=t.img[0],c.naturalWidth>0?t.hasSize=!0:c.width||(t.hasSize=!1)}return f._parseMarkup(n,{title:N(t),img_replaceWith:t.img},t),f.resizeImage(),t.hasSize?(j&&clearInterval(j),t.loadError?(n.addClass("mfp-loading"),f.updateStatus("error",r.tError.replace("%url%",t.src))):(n.removeClass("mfp-loading"),f.updateStatus("ready")),n):(f.updateStatus("loading"),t.loading=!0,t.hasSize||(t.imgHidden=!0,n.addClass("mfp-loading"),f.findImageSize(t)),n)}}});var W,R=function(){return void 0===W&&(W=void 0!==document.createElement("p").style.MozTransform),W};e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e=f.st.zoom,i=".zoom",o;if(e.enabled&&f.supportsTransition){var a=e.duration,r=function(t){var n=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+e.duration/1e3+"s "+e.easing,o={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},a="transition";return o["-webkit-"+a]=o["-moz-"+a]=o["-o-"+a]=o[a]=i,n.css(o),n},s=function(){f.content.css("visibility","visible")},c,l;k("BuildControls"+i,function(){if(f._allowZoom()){if(clearTimeout(c),f.content.css("visibility","hidden"),o=f._getItemToZoom(),!o)return void s();l=r(o),l.css(f._getOffset()),f.wrap.append(l),c=setTimeout(function(){l.css(f._getOffset(!0)),c=setTimeout(function(){s(),setTimeout(function(){l.remove(),o=l=null,T("ZoomAnimationEnded")},16)},a)},16)}}),k(n+i,function(){if(f._allowZoom()){if(clearTimeout(c),f.st.removalDelay=a,!o){if(o=f._getItemToZoom(),!o)return;l=r(o)}l.css(f._getOffset(!0)),f.wrap.append(l),f.content.css("visibility","hidden"),setTimeout(function(){l.css(f._getOffset())},16)}}),k(t+i,function(){f._allowZoom()&&(s(),l&&l.remove(),o=null)})}},_allowZoom:function(){return"image"===f.currItem.type},_getItemToZoom:function(){return f.currItem.hasSize?f.currItem.img:!1},_getOffset:function(t){var n;n=t?f.currItem.img:f.st.zoom.opener(f.currItem.el||f.currItem);var i=n.offset(),o=parseInt(n.css("padding-top"),10),a=parseInt(n.css("padding-bottom"),10);i.top-=e(window).scrollTop()-o;var r={width:n.width(),height:(g?n.innerHeight():n[0].offsetHeight)-a-o};return R()?r["-moz-transform"]=r.transform="translate("+i.left+"px,"+i.top+"px)":(r.left=i.left,r.top=i.top),r}}});var Z="iframe",q="//about:blank",D=function(e){if(f.currTemplate[Z]){var t=f.currTemplate[Z].find("iframe");t.length&&(e||(t[0].src=q),f.isIE8&&t.css("display",e?"block":"none"))}};e.magnificPopup.registerModule(Z,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){f.types.push(Z),k("BeforeChange",function(e,t,n){t!==n&&(t===Z?D():n===Z&&D(!0))}),k(t+"."+Z,function(){D()})},getIframe:function(t,n){var i=t.src,o=f.st.iframe;e.each(o.patterns,function(){return i.indexOf(this.index)>-1?(this.id&&(i="string"==typeof this.id?i.substr(i.lastIndexOf(this.id)+this.id.length,i.length):this.id.call(this,i)),i=this.src.replace("%id%",i),!1):void 0});var a={};return o.srcAction&&(a[o.srcAction]=i),f._parseMarkup(n,a,t),f.updateStatus("ready"),n}}});var K=function(e){var t=f.items.length;return e>t-1?e-t:0>e?t+e:e},Y=function(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var n=f.st.gallery,i=".mfp-gallery",o=Boolean(e.fn.mfpFastClick);return f.direction=!0,n&&n.enabled?(b+=" mfp-gallery",k(r+i,function(){n.navigateByImgClick&&f.wrap.on("click"+i,".mfp-img",function(){return f.items.length>1?(f.next(),!1):void 0}),y.on("keydown"+i,function(e){37===e.keyCode?f.prev():39===e.keyCode&&f.next()})}),k("UpdateStatus"+i,function(e,t){t.text&&(t.text=Y(t.text,f.currItem.index,f.items.length))}),k(a+i,function(e,t,i,o){var a=f.items.length;i.counter=a>1?Y(n.tCounter,o.index,a):""}),k("BuildControls"+i,function(){if(f.items.length>1&&n.arrows&&!f.arrowLeft){var t=n.arrowMarkup,i=f.arrowLeft=e(t.replace(/%title%/gi,n.tPrev).replace(/%dir%/gi,"left")).addClass(p),a=f.arrowRight=e(t.replace(/%title%/gi,n.tNext).replace(/%dir%/gi,"right")).addClass(p),r=o?"mfpFastClick":"click";i[r](function(){f.prev()}),a[r](function(){f.next()}),f.isIE7&&(x("b",i[0],!1,!0),x("a",i[0],!1,!0),x("b",a[0],!1,!0),x("a",a[0],!1,!0)),f.container.append(i.add(a))}}),k(s+i,function(){f._preloadTimeout&&clearTimeout(f._preloadTimeout),f._preloadTimeout=setTimeout(function(){f.preloadNearbyImages(),f._preloadTimeout=null},16)}),void k(t+i,function(){y.off(i),f.wrap.off("click"+i),f.arrowLeft&&o&&f.arrowLeft.add(f.arrowRight).destroyMfpFastClick(),f.arrowRight=f.arrowLeft=null})):!1},next:function(){f.direction=!0,f.index=K(f.index+1),f.updateItemHTML()},prev:function(){f.direction=!1,f.index=K(f.index-1),f.updateItemHTML()},goTo:function(e){f.direction=e>=f.index,f.index=e,f.updateItemHTML()},preloadNearbyImages:function(){var e=f.st.gallery.preload,t=Math.min(e[0],f.items.length),n=Math.min(e[1],f.items.length),i;for(i=1;i<=(f.direction?n:t);i++)f._preloadItem(f.index+i);for(i=1;i<=(f.direction?t:n);i++)f._preloadItem(f.index-i)},_preloadItem:function(t){if(t=K(t),!f.items[t].preloaded){var n=f.items[t];n.parsed||(n=f.parseEl(t)),T("LazyLoad",n),"image"===n.type&&(n.img=e('<img class="mfp-img" />').on("load.mfploader",function(){n.hasSize=!0}).on("error.mfploader",function(){n.hasSize=!0,n.loadError=!0,T("LazyLoadError",n)}).attr("src",n.src)),n.preloaded=!0}}}});var U="retina";e.magnificPopup.registerModule(U,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=f.st.retina,t=e.ratio;t=isNaN(t)?t():t,t>1&&(k("ImageHasSize."+U,function(e,n){n.img.css({"max-width":n.img[0].naturalWidth/t,width:"100%"})}),k("ElementParse."+U,function(n,i){i.src=e.replaceSrc(i,t)}))}}}}),function(){var t=1e3,n="ontouchstart"in window,i=function(){v.off("touchmove"+a+" touchend"+a)},o="mfpFastClick",a="."+o;e.fn.mfpFastClick=function(o){return e(this).each(function(){var r=e(this),s;if(n){var c,l,u,d,p,f;r.on("touchstart"+a,function(e){d=!1,f=1,p=e.originalEvent?e.originalEvent.touches[0]:e.touches[0],l=p.clientX,u=p.clientY,v.on("touchmove"+a,function(e){p=e.originalEvent?e.originalEvent.touches:e.touches,f=p.length,p=p[0],(Math.abs(p.clientX-l)>10||Math.abs(p.clientY-u)>10)&&(d=!0,i())}).on("touchend"+a,function(e){i(),d||f>1||(s=!0,e.preventDefault(),clearTimeout(c),c=setTimeout(function(){s=!1},t),o())})})}r.on("click"+a,function(){s||o()})})},e.fn.destroyMfpFastClick=function(){e(this).off("touchstart"+a+" click"+a),n&&v.off("touchmove"+a+" touchend"+a)}}(),E()}(window.jQuery||window.Zepto)}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["gabrielengel:konecty-magnific-popup"]={}}();

!function(){var e=Package.meteor.Meteor,a=Package.jquery.$,i=Package.jquery.jQuery;(function(){(function(){!function(e,a){"use strict";var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(t){function n(){var a=e(g),i=e(A);d&&(A.length?d.reject(u,a,i):d.resolve(u)),e.isFunction(t)&&t.call(o,u,a,i)}function r(e){c(e.target,"error"===e.type)}function c(a,t){a.src!==i&&-1===e.inArray(a,l)&&(l.push(a),t?A.push(a):g.push(a),e.data(a,"imagesLoaded",{isBroken:t,src:a.src}),s&&d.notifyWith(e(a),[t,u,e(g),e(A)]),u.length===l.length&&(setTimeout(n),u.unbind(".imagesLoaded",r)))}var o=this,d=e.isFunction(e.Deferred)?e.Deferred():0,s=e.isFunction(d.notify),u=o.find("img").add(o.filter("img")),l=[],g=[],A=[];return e.isPlainObject(t)&&e.each(t,function(e,a){"callback"===e?t=a:d&&d[e](a)}),u.length?u.bind("load.imagesLoaded error.imagesLoaded",r).each(function(t,n){var r=n.src,o=e.data(n,"imagesLoaded");return o&&o.src===r?void c(n,o.isBroken):n.complete&&n.naturalWidth!==a?void c(n,0===n.naturalWidth||0===n.naturalHeight):void((n.readyState||n.complete)&&(n.src=i,n.src=r))}):n(),d?d.promise(o):o}}(i)}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["mrt:jquery-imagesloaded"]={}}();

!function(){var e=Package.meteor.Meteor,o=Package["accounts-base"].Accounts,n=Package["accounts-base"].AccountsClient,i=Package.mongo.Mongo,c;(function(){"undefined"==typeof c&&(c={}),c.configurations=new i.Collection("meteor_accounts_loginServiceConfiguration",{_preventAutopublish:!0,connection:e.isClient?o.connection:e.connection}),c.ConfigError=function(n){e.isClient&&!o.loginServicesConfigured()?this.message="Login service configuration not yet loaded":n?this.message="Service "+n+" not configured":this.message="Service not configured"},c.ConfigError.prototype=new Error,c.ConfigError.prototype.name="ServiceConfiguration.ConfigError"}).call(this),"undefined"==typeof Package&&(Package={}),Package["service-configuration"]={ServiceConfiguration:c}}();

!function(){var e=Package.meteor.Meteor,a=Package.underscore._,c=Package["reactive-dict"].ReactiveDict,n=Package.ejson.EJSON,i;(function(){i=new c("session")}).call(this),"undefined"==typeof Package&&(Package={}),Package.session={Session:i}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.less={}}();

!function(){var n=Package.meteor.Meteor,e=Package.tracker.Tracker,o=Package.tracker.Deps,i=Package["service-configuration"].ServiceConfiguration,t=Package["accounts-base"].Accounts,s=Package["accounts-base"].AccountsClient,r=Package.underscore._,l=Package.templating.Template,u=Package.session.Session,a=Package.jquery.$,c=Package.jquery.jQuery,g=Package.blaze.Blaze,d=Package.blaze.UI,f=Package.blaze.Handlebars,p=Package.spacebars.Spacebars,m=Package.htmljs.HTML,w,k,_,v,h,b,L,I;(function(){t.ui={},t.ui._options={requestPermissions:{},requestOfflineToken:{},forceApprovalPrompt:{}},t.ui.config=function(n){var e=["passwordSignupFields","requestPermissions","requestOfflineToken","forceApprovalPrompt"];if(r.each(r.keys(n),function(n){if(!r.contains(e,n))throw new Error("Accounts.ui.config: Invalid key: "+n)}),n.passwordSignupFields){if(!r.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY","EMAIL_ONLY"],n.passwordSignupFields))throw new Error("Accounts.ui.config: Invalid option for `passwordSignupFields`: "+n.passwordSignupFields);if(t.ui._options.passwordSignupFields)throw new Error("Accounts.ui.config: Can't set `passwordSignupFields` more than once");t.ui._options.passwordSignupFields=n.passwordSignupFields}n.requestPermissions&&r.each(n.requestPermissions,function(n,e){if(t.ui._options.requestPermissions[e])throw new Error("Accounts.ui.config: Can't set `requestPermissions` more than once for "+e);if(!(n instanceof Array))throw new Error("Accounts.ui.config: Value for `requestPermissions` must be an array");t.ui._options.requestPermissions[e]=n}),n.requestOfflineToken&&r.each(n.requestOfflineToken,function(n,e){if("google"!==e)throw new Error("Accounts.ui.config: `requestOfflineToken` only supported for Google login at the moment.");if(t.ui._options.requestOfflineToken[e])throw new Error("Accounts.ui.config: Can't set `requestOfflineToken` more than once for "+e);t.ui._options.requestOfflineToken[e]=n}),n.forceApprovalPrompt&&r.each(n.forceApprovalPrompt,function(n,e){if("google"!==e)throw new Error("Accounts.ui.config: `forceApprovalPrompt` only supported for Google login at the moment.");if(t.ui._options.forceApprovalPrompt[e])throw new Error("Accounts.ui.config: Can't set `forceApprovalPrompt` more than once for "+e);t.ui._options.forceApprovalPrompt[e]=n})},w=function(){return t.ui._options.passwordSignupFields||"EMAIL_ONLY"}}).call(this),function(){l.__checkName("loginButtons"),l.loginButtons=new l("Template.loginButtons",function(){var n=this;return m.DIV({id:"login-buttons","class":function(){return["login-buttons-dropdown-align-",p.mustache(n.lookup("align"))]}},"\n    ",g.If(function(){return p.call(n.lookup("currentUser"))},function(){return["\n      ",g.If(function(){return p.call(n.lookup("loggingIn"))},function(){return["\n        \n        ",g.If(function(){return p.call(n.lookup("dropdown"))},function(){return["\n          ",p.include(n.lookupTemplate("_loginButtonsLoggingIn")),"\n        "]},function(){return["\n          ",m.DIV({"class":"login-buttons-with-only-one-button"},"\n            ",p.include(n.lookupTemplate("_loginButtonsLoggingInSingleLoginButton")),"\n          "),"\n        "]}),"\n      "]},function(){return["\n        ",p.include(n.lookupTemplate("_loginButtonsLoggedIn")),"\n      "]}),"\n    "]},function(){return["\n      ",p.include(n.lookupTemplate("_loginButtonsLoggedOut")),"\n    "]}),"\n  ")}),l.__checkName("_loginButtonsLoggedIn"),l._loginButtonsLoggedIn=new l("Template._loginButtonsLoggedIn",function(){var n=this;return g.If(function(){return p.call(n.lookup("dropdown"))},function(){return["\n    ",p.include(n.lookupTemplate("_loginButtonsLoggedInDropdown")),"\n  "]},function(){return["\n    ",m.DIV({"class":"login-buttons-with-only-one-button"},"\n      ",p.include(n.lookupTemplate("_loginButtonsLoggedInSingleLogoutButton")),"\n    "),"\n  "]})}),l.__checkName("_loginButtonsLoggedOut"),l._loginButtonsLoggedOut=new l("Template._loginButtonsLoggedOut",function(){var n=this;return g.If(function(){return p.call(n.lookup("services"))},function(){return[" \n    ",g.If(function(){return p.call(n.lookup("configurationLoaded"))},function(){return["\n      ",g.If(function(){return p.call(n.lookup("dropdown"))},function(){return[" \n        ",p.include(n.lookupTemplate("_loginButtonsLoggedOutDropdown")),"\n      "]},function(){return["\n        ",p.With(function(){return p.call(n.lookup("singleService"))},function(){return[" \n          ",m.DIV({"class":"login-buttons-with-only-one-button"},"\n            ",g.If(function(){return p.call(n.lookup("loggingIn"))},function(){return["\n              ",p.include(n.lookupTemplate("_loginButtonsLoggingInSingleLoginButton")),"\n            "]},function(){return["\n              ",p.include(n.lookupTemplate("_loginButtonsLoggedOutSingleLoginButton")),"\n            "]}),"\n          "),"\n        "]}),"\n      "]}),"\n    "]}),"\n  "]},function(){return["\n    ",m.DIV({"class":"no-services"},"No login services configured"),"\n  "]})}),l.__checkName("_loginButtonsMessages"),l._loginButtonsMessages=new l("Template._loginButtonsMessages",function(){var n=this;return[g.If(function(){return p.call(n.lookup("errorMessage"))},function(){return["\n    ",m.DIV({"class":"message error-message"},g.View("lookup:errorMessage",function(){return p.mustache(n.lookup("errorMessage"))})),"\n  "]}),"\n  ",g.If(function(){return p.call(n.lookup("infoMessage"))},function(){return["\n    ",m.DIV({"class":"message info-message"},g.View("lookup:infoMessage",function(){return p.mustache(n.lookup("infoMessage"))})),"\n  "]})]}),l.__checkName("_loginButtonsLoggingIn"),l._loginButtonsLoggingIn=new l("Template._loginButtonsLoggingIn",function(){var n=this;return[p.include(n.lookupTemplate("_loginButtonsLoggingInPadding")),m.Raw('\n  <div class="loading">&nbsp;</div>\n  '),p.include(n.lookupTemplate("_loginButtonsLoggingInPadding"))]}),l.__checkName("_loginButtonsLoggingInPadding"),l._loginButtonsLoggingInPadding=new l("Template._loginButtonsLoggingInPadding",function(){var n=this;return g.Unless(function(){return p.call(n.lookup("dropdown"))},function(){return["\n    \n    ",m.DIV({"class":"login-buttons-padding"},"\n      ",m.DIV({"class":"login-button single-login-button",style:"visibility: hidden;",id:"login-buttons-logout"},m.CharRef({html:"&nbsp;",str:""})),"\n    "),"\n  "]},function(){return["\n    \n    ",m.DIV({"class":"login-buttons-padding"}),"\n  "]})})}.call(this),function(){l.__checkName("_loginButtonsLoggedOutSingleLoginButton"),l._loginButtonsLoggedOutSingleLoginButton=new l("Template._loginButtonsLoggedOutSingleLoginButton",function(){var n=this;return m.DIV({"class":"login-text-and-button"},"\n    ",m.DIV({"class":function(){return["login-button single-login-button ",g.Unless(function(){return p.call(n.lookup("configured"))},function(){return"configure-button"})]},id:function(){return["login-buttons-",p.mustache(n.lookup("name"))]}},"\n      ",m.DIV({"class":"login-image",id:function(){return["login-buttons-image-",p.mustache(n.lookup("name"))]}}),"\n      ",g.If(function(){return p.call(n.lookup("configured"))},function(){return["\n        ",m.SPAN({"class":function(){return["text-besides-image sign-in-text-",p.mustache(n.lookup("name"))]}},"Sign in with ",g.View("lookup:capitalizedName",function(){return p.mustache(n.lookup("capitalizedName"))})),"\n      "]},function(){return["\n        ",m.SPAN({"class":function(){return["text-besides-image configure-text-",p.mustache(n.lookup("name"))]}},"Configure ",g.View("lookup:capitalizedName",function(){return p.mustache(n.lookup("capitalizedName"))})," Login"),"\n      "]}),"\n    "),"\n  ")}),l.__checkName("_loginButtonsLoggingInSingleLoginButton"),l._loginButtonsLoggingInSingleLoginButton=new l("Template._loginButtonsLoggingInSingleLoginButton",function(){var n=this;return m.DIV({"class":"login-text-and-button"},"\n    ",p.include(n.lookupTemplate("_loginButtonsLoggingIn")),"\n  ")}),l.__checkName("_loginButtonsLoggedInSingleLogoutButton"),l._loginButtonsLoggedInSingleLogoutButton=new l("Template._loginButtonsLoggedInSingleLogoutButton",function(){var n=this;return m.DIV({"class":"login-text-and-button"},"\n    ",m.DIV({"class":"login-display-name"},"\n      ",g.View("lookup:displayName",function(){return p.mustache(n.lookup("displayName"))}),"\n    "),m.Raw('\n    <div class="login-button single-login-button" id="login-buttons-logout">Sign Out</div>\n  '))})}.call(this),function(){l.__checkName("_loginButtonsLoggedInDropdown"),l._loginButtonsLoggedInDropdown=new l("Template._loginButtonsLoggedInDropdown",function(){var n=this;return m.DIV({"class":"login-link-and-dropdown-list"},"\n    ",m.A({"class":"login-link-text",id:"login-name-link"},"\n      ",g.View("lookup:displayName",function(){return p.mustache(n.lookup("displayName"))})," \n    "),"\n\n    ",g.If(function(){return p.call(n.lookup("dropdownVisible"))},function(){return["\n      ",m.DIV({id:"login-dropdown-list","class":"accounts-dialog"},"\n        ",m.A({"class":"login-close-text"},"Close"),"\n        ",m.DIV({"class":"login-close-text-clear"}),"\n\n        ",g.If(function(){return p.call(n.lookup("inMessageOnlyFlow"))},function(){return["\n          ",p.include(n.lookupTemplate("_loginButtonsMessages")),"\n        "]},function(){return["\n          ",g.If(function(){return p.call(n.lookup("inChangePasswordFlow"))},function(){return["\n            ",p.include(n.lookupTemplate("_loginButtonsChangePassword")),"\n          "]},function(){return["\n            ",p.include(n.lookupTemplate("_loginButtonsLoggedInDropdownActions")),"\n          "]}),"\n        "]}),"\n      "),"\n    "]}),"\n  ")}),l.__checkName("_loginButtonsLoggedInDropdownActions"),l._loginButtonsLoggedInDropdownActions=new l("Template._loginButtonsLoggedInDropdownActions",function(){var n=this;return[g.If(function(){return p.call(n.lookup("allowChangingPassword"))},function(){return["\n    ",m.DIV({"class":"login-button",id:"login-buttons-open-change-password"},"\n      Change password\n    "),"\n  "]}),m.Raw('\n\n  <div class="login-button" id="login-buttons-logout">\n    Sign out\n  </div>\n\n  '),p.include(n.lookupTemplate("_loginButtonsMessages"))]}),l.__checkName("_loginButtonsLoggedOutDropdown"),l._loginButtonsLoggedOutDropdown=new l("Template._loginButtonsLoggedOutDropdown",function(){var n=this;return m.DIV({"class":function(){return["login-link-and-dropdown-list ",p.mustache(n.lookup("additionalClasses"))]}},"\n    ",g.If(function(){return p.call(n.lookup("dropdownVisible"))},function(){return["\n      \n      ",m.A({"class":"login-link-text",id:"login-sign-in-link"},"Sign in "),"\n      ",m.DIV({id:"login-dropdown-list","class":"accounts-dialog"},"\n        ",m.A({"class":"login-close-text"},"Close"),"\n        ",g.If(function(){return p.call(n.lookup("loggingIn"))},function(){return["\n          ",p.include(n.lookupTemplate("_loginButtonsLoggingIn")),"\n        "]}),"\n        ",m.DIV({"class":"login-close-text-clear"}),"\n        ",p.include(n.lookupTemplate("_loginButtonsLoggedOutAllServices")),"\n      "),"\n    "]},function(){return["\n      ",g.If(function(){return p.call(n.lookup("loggingIn"))},function(){return["\n        \n        ",p.include(n.lookupTemplate("_loginButtonsLoggingIn")),"\n      "]},function(){return["\n        ",m.A({"class":"login-link-text",id:"login-sign-in-link"},"Sign in "),"\n      "]}),"\n    "]}),"\n  ")}),l.__checkName("_loginButtonsLoggedOutAllServices"),l._loginButtonsLoggedOutAllServices=new l("Template._loginButtonsLoggedOutAllServices",function(){var n=this;return[g.Each(function(){return p.call(n.lookup("services"))},function(){return["\n    ",g.If(function(){return p.call(n.lookup("isPasswordService"))},function(){return["\n      ",g.If(function(){return p.call(n.lookup("hasOtherServices"))},function(){return[" \n        ",p.include(n.lookupTemplate("_loginButtonsLoggedOutPasswordServiceSeparator")),"\n      "]}),"\n      ",p.include(n.lookupTemplate("_loginButtonsLoggedOutPasswordService")),"\n    "]},function(){return["\n      ",p.include(n.lookupTemplate("_loginButtonsLoggedOutSingleLoginButton")),"\n    "]}),"\n  "]}),"\n\n  ",g.Unless(function(){return p.call(n.lookup("hasPasswordService"))},function(){return["\n    ",p.include(n.lookupTemplate("_loginButtonsMessages")),"\n  "]})]}),l.__checkName("_loginButtonsLoggedOutPasswordServiceSeparator"),l._loginButtonsLoggedOutPasswordServiceSeparator=new l("Template._loginButtonsLoggedOutPasswordServiceSeparator",function(){var n=this;return m.Raw('<div class="or">\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n    <span class="or-text">or</span>\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n  </div>')}),l.__checkName("_loginButtonsLoggedOutPasswordService"),l._loginButtonsLoggedOutPasswordService=new l("Template._loginButtonsLoggedOutPasswordService",function(){var n=this;return g.If(function(){return p.call(n.lookup("inForgotPasswordFlow"))},function(){return["\n    ",p.include(n.lookupTemplate("_forgotPasswordForm")),"\n  "]},function(){return["\n    ",m.DIV({"class":"login-form login-password-form"},"\n      ",g.Each(function(){return p.call(n.lookup("fields"))},function(){return["\n        ",p.include(n.lookupTemplate("_loginButtonsFormField")),"\n      "]}),"\n\n      ",p.include(n.lookupTemplate("_loginButtonsMessages")),"\n\n      ",m.DIV({"class":"login-button login-button-form-submit",id:"login-buttons-password"},"\n        ",g.If(function(){return p.call(n.lookup("inSignupFlow"))},function(){return"\n          Create account\n        "},function(){return"\n          Sign in\n        "}),"\n      "),"\n\n      ",g.If(function(){return p.call(n.lookup("inLoginFlow"))},function(){return["\n        ",g.If(function(){return p.call(n.lookup("showCreateAccountLink"))},function(){return["\n          ",m.DIV({"class":"additional-link-container"},"\n            ",m.A({id:"signup-link","class":"additional-link"},"Create account"),"\n          "),"\n        "]}),"\n\n        ",g.If(function(){return p.call(n.lookup("showForgotPasswordLink"))},function(){return["\n          ",m.DIV({"class":"additional-link-container"},"\n            ",m.A({id:"forgot-password-link","class":"additional-link"},"Forgot password"),"\n          "),"\n        "]}),"\n      "]}),"\n\n      ",g.If(function(){return p.call(n.lookup("inSignupFlow"))},function(){return["\n        ",p.include(n.lookupTemplate("_loginButtonsBackToLoginLink")),"\n      "]}),"\n    "),"\n  "]})}),l.__checkName("_forgotPasswordForm"),l._forgotPasswordForm=new l("Template._forgotPasswordForm",function(){var n=this;return m.DIV({"class":"login-form"},m.Raw('\n    <div id="forgot-password-email-label-and-input"> \n      <label id="forgot-password-email-label" for="forgot-password-email">Email</label>\n      <input id="forgot-password-email" type="email">\n    </div>\n\n    '),p.include(n.lookupTemplate("_loginButtonsMessages")),m.Raw('\n\n    <div class="login-button login-button-form-submit" id="login-buttons-forgot-password">\n      Reset password\n    </div>\n\n    '),p.include(n.lookupTemplate("_loginButtonsBackToLoginLink")),"\n  ")}),l.__checkName("_loginButtonsBackToLoginLink"),l._loginButtonsBackToLoginLink=new l("Template._loginButtonsBackToLoginLink",function(){var n=this;return m.Raw('<div class="additional-link-container">\n    <a id="back-to-login-link" class="additional-link">Sign in</a>\n  </div>')}),l.__checkName("_loginButtonsFormField"),l._loginButtonsFormField=new l("Template._loginButtonsFormField",function(){var n=this;return g.If(function(){return p.call(n.lookup("visible"))},function(){return["\n    ",m.DIV({id:function(){return["login-",p.mustache(n.lookup("fieldName")),"-label-and-input"]}},"\n      ",m.LABEL({id:function(){return["login-",p.mustache(n.lookup("fieldName")),"-label"]},"for":function(){return["login-",p.mustache(n.lookup("fieldName"))]}},"\n        ",g.View("lookup:fieldLabel",function(){return p.mustache(n.lookup("fieldLabel"))}),"\n      "),"\n      ",m.INPUT({id:function(){return["login-",p.mustache(n.lookup("fieldName"))]},type:function(){return p.mustache(n.lookup("inputType"))}}),"\n    "),"\n  "]})}),l.__checkName("_loginButtonsChangePassword"),l._loginButtonsChangePassword=new l("Template._loginButtonsChangePassword",function(){var n=this;return[g.Each(function(){return p.call(n.lookup("fields"))},function(){return["\n    ",p.include(n.lookupTemplate("_loginButtonsFormField")),"\n  "]}),"\n\n  ",p.include(n.lookupTemplate("_loginButtonsMessages")),m.Raw('\n\n  <div class="login-button login-button-form-submit" id="login-buttons-do-change-password">\n    Change password\n  </div>')]})}.call(this),function(){l.body.addContent(function(){var n=this;return[p.include(n.lookupTemplate("_resetPasswordDialog")),"\n  ",p.include(n.lookupTemplate("_justResetPasswordDialog")),"\n  ",p.include(n.lookupTemplate("_enrollAccountDialog")),"\n  ",p.include(n.lookupTemplate("_justVerifiedEmailDialog")),"\n  ",p.include(n.lookupTemplate("_configureLoginServiceDialog")),"\n  ",p.include(n.lookupTemplate("_configureLoginOnDesktopDialog")),"\n\n  \n  ",p.include(n.lookupTemplate("_loginButtonsMessagesDialog"))]}),n.startup(l.body.renderToDocument),l.__checkName("_resetPasswordDialog"),l._resetPasswordDialog=new l("Template._resetPasswordDialog",function(){var n=this;return g.If(function(){return p.call(n.lookup("inResetPasswordFlow"))},function(){return["\n    ",m.DIV({"class":"hide-background"}),"\n\n    ",m.DIV({"class":"accounts-dialog accounts-centered-dialog"},"\n      ",m.LABEL({id:"reset-password-new-password-label","for":"reset-password-new-password"},"\n        New password\n      "),"\n\n      ",m.DIV({"class":"reset-password-new-password-wrapper"},"\n        ",m.INPUT({id:"reset-password-new-password",type:"password"}),"\n      "),"\n\n      ",p.include(n.lookupTemplate("_loginButtonsMessages")),"\n\n      ",m.DIV({"class":"login-button login-button-form-submit",id:"login-buttons-reset-password-button"},"\n        Set password\n      "),"\n\n      ",m.A({"class":"accounts-close",id:"login-buttons-cancel-reset-password"},m.CharRef({html:"&times;",str:""})),"\n    "),"\n  "]})}),l.__checkName("_justResetPasswordDialog"),l._justResetPasswordDialog=new l("Template._justResetPasswordDialog",function(){var n=this;return g.If(function(){return p.call(n.lookup("visible"))},function(){return["\n    ",m.DIV({"class":"accounts-dialog accounts-centered-dialog"},"\n      Password reset.\n      You are now logged in as ",g.View("lookup:displayName",function(){return p.mustache(n.lookup("displayName"))}),".\n      ",m.DIV({"class":"login-button",id:"just-verified-dismiss-button"},"Dismiss"),"\n    "),"\n  "]})}),l.__checkName("_enrollAccountDialog"),l._enrollAccountDialog=new l("Template._enrollAccountDialog",function(){var n=this;return g.If(function(){return p.call(n.lookup("inEnrollAccountFlow"))},function(){return["\n    ",m.DIV({"class":"hide-background"}),"\n\n    ",m.DIV({"class":"accounts-dialog accounts-centered-dialog"},"\n      ",m.LABEL({id:"enroll-account-password-label","for":"enroll-account-password"},"\n        Choose a password\n      "),"\n\n      ",m.DIV({"class":"enroll-account-password-wrapper"},"\n        ",m.INPUT({id:"enroll-account-password",type:"password"}),"\n      "),"\n\n      ",p.include(n.lookupTemplate("_loginButtonsMessages")),"\n\n      ",m.DIV({"class":"login-button login-button-form-submit",id:"login-buttons-enroll-account-button"},"\n        Create account\n      "),"\n\n      ",m.A({"class":"accounts-close",id:"login-buttons-cancel-enroll-account"},m.CharRef({html:"&times;",str:""})),"\n    "),"\n  "]})}),l.__checkName("_justVerifiedEmailDialog"),l._justVerifiedEmailDialog=new l("Template._justVerifiedEmailDialog",function(){var n=this;return g.If(function(){return p.call(n.lookup("visible"))},function(){return["\n    ",m.DIV({"class":"accounts-dialog accounts-centered-dialog"},"\n      Email verified.\n      You are now logged in as ",g.View("lookup:displayName",function(){return p.mustache(n.lookup("displayName"))}),".\n      ",m.DIV({"class":"login-button",id:"just-verified-dismiss-button"},"Dismiss"),"\n    "),"\n  "]})}),l.__checkName("_configureLoginServiceDialog"),l._configureLoginServiceDialog=new l("Template._configureLoginServiceDialog",function(){var n=this;return g.If(function(){return p.call(n.lookup("visible"))},function(){return["\n    ",m.DIV({id:"configure-login-service-dialog","class":"accounts-dialog accounts-centered-dialog"},"\n      ",p.include(n.lookupTemplate("configurationSteps")),"\n\n      ",m.P("\n        Now, copy over some details.\n      "),"\n      ",m.P("\n        ",m.TABLE("\n          ",m.COLGROUP("\n            ",m.COL({span:"1","class":"configuration_labels"}),"\n            ",m.COL({span:"1","class":"configuration_inputs"}),"\n          "),"\n          ",g.Each(function(){return p.call(n.lookup("configurationFields"))},function(){return["\n            ",m.TR("\n              ",m.TD("\n                ",m.LABEL({"for":function(){return["configure-login-service-dialog-",p.mustache(n.lookup("property"))]}},g.View("lookup:label",function(){return p.mustache(n.lookup("label"))})),"\n              "),"\n              ",m.TD("\n                ",m.INPUT({id:function(){return["configure-login-service-dialog-",p.mustache(n.lookup("property"))]},type:"text"}),"\n              "),"\n            "),"\n          "]}),"\n        "),"\n      "),"\n      ",m.P({"class":"new-section"},"\n        Choose the login style:\n      "),"\n      ",m.P("\n        ",m.CharRef({html:"&emsp;",str:""}),m.INPUT({id:"configure-login-service-dialog-popupBasedLogin",type:"radio",checked:"checked",name:"loginStyle",value:"popup"}),"\n        ",m.LABEL({"for":"configure-login-service-dialog-popupBasedLogin"},"Popup-based login (recommended for most applications)"),"\n\n        ",m.BR(),m.CharRef({html:"&emsp;",str:""}),m.INPUT({id:"configure-login-service-dialog-redirectBasedLogin",type:"radio",name:"loginStyle",value:"redirect"}),"\n        ",m.LABEL({"for":"configure-login-service-dialog-redirectBasedLogin"},"\n          Redirect-based login (special cases explained\n          ",m.A({href:"https://github.com/meteor/meteor/wiki/OAuth-for-mobile-Meteor-clients#popup-versus-redirect-flow",target:"_blank"},"here"),")\n        "),"\n      "),"\n      ",m.DIV({"class":"new-section"},"\n        ",m.DIV({"class":"login-button configure-login-service-dismiss-button"},"\n          I'll do this later\n        "),"\n        ",m.A({"class":"accounts-close configure-login-service-dismiss-button"},m.CharRef({html:"&times;",str:""})),"\n\n        ",m.DIV({"class":function(){return["login-button login-button-configure ",g.If(function(){return p.call(n.lookup("saveDisabled"))},function(){return"login-button-disabled"})]},id:"configure-login-service-dialog-save-configuration"},"\n          Save Configuration\n        "),"\n      "),"\n    "),"\n  "]})}),l.__checkName("_loginButtonsMessagesDialog"),l._loginButtonsMessagesDialog=new l("Template._loginButtonsMessagesDialog",function(){var n=this;return g.If(function(){return p.call(n.lookup("visible"))},function(){return["\n    ",m.DIV({"class":"accounts-dialog accounts-centered-dialog",id:"login-buttons-message-dialog"},"\n      ",p.include(n.lookupTemplate("_loginButtonsMessages")),"\n      ",m.DIV({"class":"login-button",id:"messages-dialog-dismiss-button"},"Dismiss"),"\n    "),"\n  "]})}),l.__checkName("_configureLoginOnDesktopDialog"),l._configureLoginOnDesktopDialog=new l("Template._configureLoginOnDesktopDialog",function(){var n=this;return g.If(function(){return p.call(n.lookup("visible"))},function(){return["\n    ",m.DIV({"class":"accounts-dialog accounts-centered-dialog",id:"configure-on-desktop-dialog"},"\n      ",m.P("\n        Please configure login on a desktop browser.\n      "),"\n      ",m.DIV({"class":"login-button",id:"configure-on-desktop-dismiss-button"},"Dismiss"),"\n    "),"\n  "]})})}.call(this),function(){var e=["dropdownVisible","inSignupFlow","inForgotPasswordFlow","inChangePasswordFlow","inMessageOnlyFlow","errorMessage","infoMessage","resetPasswordToken","enrollAccountToken","justVerifiedEmail","justResetPassword","configureLoginServiceDialogVisible","configureLoginServiceDialogServiceName","configureLoginServiceDialogSaveDisabled","configureOnDesktopVisible"],o=function(n){if(!r.contains(e,n))throw new Error("Invalid key in loginButtonsSession: "+n)},i="Meteor.loginButtons.";t._loginButtonsSession={set:function(n,e){if(o(n),r.contains(["errorMessage","infoMessage"],n))throw new Error("Don't set errorMessage or infoMessage directly. Instead, use errorMessage() or infoMessage().");this._set(n,e)},_set:function(n,e){u.set(i+n,e)},get:function(n){return o(n),u.get(i+n)},closeDropdown:function(){this.set("inSignupFlow",!1),this.set("inForgotPasswordFlow",!1),this.set("inChangePasswordFlow",!1),this.set("inMessageOnlyFlow",!1),this.set("dropdownVisible",!1),this.resetMessages()},infoMessage:function(n){this._set("errorMessage",null),this._set("infoMessage",n),this.ensureMessageVisible()},errorMessage:function(n){this._set("errorMessage",n),this._set("infoMessage",null),this.ensureMessageVisible()},isMessageDialogVisible:function(){return this.get("resetPasswordToken")||this.get("enrollAccountToken")||this.get("justVerifiedEmail")},ensureMessageVisible:function(){this.isMessageDialogVisible()||this.set("dropdownVisible",!0)},resetMessages:function(){this._set("errorMessage",null),this._set("infoMessage",null)},configureService:function(e){n.isCordova?this.set("configureOnDesktopVisible",!0):(this.set("configureLoginServiceDialogVisible",!0),this.set("configureLoginServiceDialogServiceName",e),this.set("configureLoginServiceDialogSaveDisabled",!0))}}}.call(this),function(){var e=t._loginButtonsSession;l.loginButtons.events({"click #login-buttons-logout":function(){n.logout(function(){e.closeDropdown()})}}),l.registerHelper("loginButtons",function(){throw new Error("Use {{> loginButtons}} instead of {{loginButtons}}")}),k=function(){var e=n.user();return e?e.profile&&e.profile.name?e.profile.name:e.username?e.username:e.emails&&e.emails[0]&&e.emails[0].address?e.emails[0].address:"":""},_=function(){var n=this,e=Package["accounts-oauth"]?t.oauth.serviceNames():[];return e.sort(),v()&&e.push("password"),r.map(e,function(n){return{name:n}})},v=function(){return!!Package["accounts-password"]},h=function(){return v()||_().length>1},b=function(n){return n.length>=3?!0:(e.errorMessage("Username must be at least 3 characters long"),!1)},L=function(n){return"USERNAME_AND_OPTIONAL_EMAIL"===w()&&""===n?!0:-1!==n.indexOf("@")?!0:(e.errorMessage("Invalid email"),!1)},I=function(n){return n.length>=6?!0:(e.errorMessage("Password must be at least 6 characters long"),!1)},l._loginButtonsLoggedOut.helpers({dropdown:h,services:_,singleService:function(){var n=_();if(1!==n.length)throw new Error("Shouldn't be rendering this template with more than one configured service");return n[0]},configurationLoaded:function(){return t.loginServicesConfigured()}}),l._loginButtonsLoggedIn.helpers({dropdown:h}),l._loginButtonsLoggedInSingleLogoutButton.helpers({displayName:k}),l._loginButtonsMessages.helpers({errorMessage:function(){return e.get("errorMessage")}}),l._loginButtonsMessages.helpers({infoMessage:function(){return e.get("infoMessage")}}),l._loginButtonsLoggingInPadding.helpers({dropdown:h})}.call(this),function(){var e=t._loginButtonsSession,o=function(n,o){o?o instanceof t.LoginCancelledError||(o instanceof i.ConfigError?e.configureService(n):e.errorMessage(o.reason||"Unknown error")):e.closeDropdown()};t.onPageLoadLogin(function(n){r.contains(r.pluck(_(),"name"),n.type)&&o(n.type,n.error)}),l._loginButtonsLoggedOutSingleLoginButton.events({"click .login-button":function(){var i=this.name;e.resetMessages();var r=n["loginWith"+("meteor-developer"===i?"MeteorDeveloperAccount":s(i))],l={};t.ui._options.requestPermissions[i]&&(l.requestPermissions=t.ui._options.requestPermissions[i]),t.ui._options.requestOfflineToken[i]&&(l.requestOfflineToken=t.ui._options.requestOfflineToken[i]),t.ui._options.forceApprovalPrompt[i]&&(l.forceApprovalPrompt=t.ui._options.forceApprovalPrompt[i]),r(l,function(n){o(i,n)})}}),l._loginButtonsLoggedOutSingleLoginButton.helpers({configured:function(){return!!i.configurations.findOne({service:this.name})},capitalizedName:function(){return"github"===this.name?"GitHub":"meteor-developer"===this.name?"Meteor":s(this.name)}});var s=function(n){return n=null==n?"":String(n),n.charAt(0).toUpperCase()+n.slice(1)}}.call(this),function(){var o=t._loginButtonsSession;l.loginButtons.events({"click #login-name-link, click #login-sign-in-link":function(){o.set("dropdownVisible",!0)},"click .login-close-text":function(){o.closeDropdown()}}),l._loginButtonsLoggedInDropdown.events({"click #login-buttons-open-change-password":function(){o.resetMessages(),o.set("inChangePasswordFlow",!0)}}),l._loginButtonsLoggedInDropdown.helpers({displayName:k,inChangePasswordFlow:function(){return o.get("inChangePasswordFlow")},inMessageOnlyFlow:function(){return o.get("inMessageOnlyFlow")},dropdownVisible:function(){return o.get("dropdownVisible")}}),l._loginButtonsLoggedInDropdownActions.helpers({allowChangingPassword:function(){var e=n.user();return e.username||e.emails&&e.emails[0]&&e.emails[0].address}}),l._loginButtonsLoggedOutDropdown.events({"click #login-buttons-password":function(){u()},"keypress #forgot-password-email":function(n){13===n.keyCode&&g()},"click #login-buttons-forgot-password":function(){g()},"click #signup-link":function(){o.resetMessages();var n=s("login-username"),t=s("login-email"),r=s("login-username-or-email"),l=i("login-password");o.set("inSignupFlow",!0),o.set("inForgotPasswordFlow",!1),e.flush(),null!==n?document.getElementById("login-username").value=n:null!==t?document.getElementById("login-email").value=t:null!==r&&(-1===r.indexOf("@")?document.getElementById("login-username").value=r:document.getElementById("login-email").value=r),null!==l&&(document.getElementById("login-password").value=l);var u=document.getElementById("login-dropdown-list");u.style.display="none",u.offsetHeight,u.style.display="block"},"click #forgot-password-link":function(){o.resetMessages();var n=s("login-email"),i=s("login-username-or-email");o.set("inSignupFlow",!1),o.set("inForgotPasswordFlow",!0),e.flush(),null!==n?document.getElementById("forgot-password-email").value=n:null!==i&&-1!==i.indexOf("@")&&(document.getElementById("forgot-password-email").value=i)},"click #back-to-login-link":function(){o.resetMessages();var n=s("login-username"),t=s("login-email")||s("forgot-password-email"),r=i("login-password");o.set("inSignupFlow",!1),o.set("inForgotPasswordFlow",!1),e.flush(),document.getElementById("login-username")&&null!==n&&(document.getElementById("login-username").value=n),document.getElementById("login-email")&&null!==t&&(document.getElementById("login-email").value=t);var l=document.getElementById("login-username-or-email");l&&(null!==t&&(l.value=t),null!==n&&(l.value=n)),null!==r&&(document.getElementById("login-password").value=r)},"keypress #login-username, keypress #login-email, keypress #login-username-or-email, keypress #login-password, keypress #login-password-again":function(n){13===n.keyCode&&u()}}),l._loginButtonsLoggedOutDropdown.helpers({additionalClasses:function(){return v()?o.get("inSignupFlow")?"login-form-create-account":o.get("inForgotPasswordFlow")?"login-form-forgot-password":"login-form-sign-in":!1},dropdownVisible:function(){return o.get("dropdownVisible")},hasPasswordService:v}),l._loginButtonsLoggedOutAllServices.helpers({services:_,isPasswordService:function(){return"password"===this.name},hasOtherServices:function(){return _().length>1},hasPasswordService:v}),l._loginButtonsLoggedOutPasswordService.helpers({fields:function(){var n=[{fieldName:"username-or-email",
fieldLabel:"Username or Email",visible:function(){return r.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL"],w())}},{fieldName:"username",fieldLabel:"Username",visible:function(){return"USERNAME_ONLY"===w()}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return"EMAIL_ONLY"===w()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}}],e=[{fieldName:"username",fieldLabel:"Username",visible:function(){return r.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],w())}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return r.contains(["USERNAME_AND_EMAIL","EMAIL_ONLY"],w())}},{fieldName:"email",fieldLabel:"Email (optional)",inputType:"email",visible:function(){return"USERNAME_AND_OPTIONAL_EMAIL"===w()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"Password (again)",inputType:"password",visible:function(){return r.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],w())}}];return o.get("inSignupFlow")?e:n},inForgotPasswordFlow:function(){return o.get("inForgotPasswordFlow")},inLoginFlow:function(){return!o.get("inSignupFlow")&&!o.get("inForgotPasswordFlow")},inSignupFlow:function(){return o.get("inSignupFlow")},showCreateAccountLink:function(){return!t._options.forbidClientAccountCreation},showForgotPasswordLink:function(){return r.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","EMAIL_ONLY"],w())}}),l._loginButtonsFormField.helpers({inputType:function(){return this.inputType||"text"}}),l._loginButtonsChangePassword.events({"keypress #login-old-password, keypress #login-password, keypress #login-password-again":function(n){13===n.keyCode&&d()},"click #login-buttons-do-change-password":function(){d()}}),l._loginButtonsChangePassword.helpers({fields:function(){return[{fieldName:"old-password",fieldLabel:"Current Password",inputType:"password",visible:function(){return!0}},{fieldName:"password",fieldLabel:"New Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"New Password (again)",inputType:"password",visible:function(){return r.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],w())}}]}});var i=function(n){var e=document.getElementById(n);return e?e.value:null},s=function(n){var e=document.getElementById(n);return e?e.value.replace(/^\s*|\s*$/g,""):null},u=function(){o.get("inSignupFlow")?c():a()},a=function(){o.resetMessages();var e=s("login-username"),t=s("login-email"),r=s("login-username-or-email"),l=i("login-password"),u;if(null!==e){if(!b(e))return;u={username:e}}else if(null!==t){if(!L(t))return;u={email:t}}else{if(null===r)throw new Error("Unexpected -- no element to use as a login user selector");if(!b(r))return;u=r}n.loginWithPassword(u,l,function(n,e){n?o.errorMessage(n.reason||"Unknown error"):o.closeDropdown()})},c=function(){o.resetMessages();var n={},e=s("login-username");if(null!==e){if(!b(e))return;n.username=e}var r=s("login-email");if(null!==r){if(!L(r))return;n.email=r}var l=i("login-password");I(l)&&(n.password=l,f()&&t.createUser(n,function(n){n?o.errorMessage(n.reason||"Unknown error"):o.closeDropdown()}))},g=function(){o.resetMessages();var n=s("forgot-password-email");-1!==n.indexOf("@")?t.forgotPassword({email:n},function(n){n?o.errorMessage(n.reason||"Unknown error"):o.infoMessage("Email sent")}):o.errorMessage("Invalid email")},d=function(){o.resetMessages();var n=i("login-old-password"),e=i("login-password");I(e)&&f()&&t.changePassword(n,e,function(n){n?o.errorMessage(n.reason||"Unknown error"):(o.set("inChangePasswordFlow",!1),o.set("inMessageOnlyFlow",!0),o.infoMessage("Password changed"))})},f=function(){var n=i("login-password-again");if(null!==n){var e=i("login-password");if(e!==n)return o.errorMessage("Passwords don't match"),!1}return!0}}.call(this),function(){var e=t._loginButtonsSession,o;t.onResetPasswordLink(function(n,i){e.set("resetPasswordToken",n),o=i}),t.onEnrollmentLink(function(n,i){e.set("enrollAccountToken",n),o=i}),t.onEmailVerificationLink(function(n,o){t.verifyEmail(n,function(n){n||e.set("justVerifiedEmail",!0),o()})}),l._resetPasswordDialog.events({"click #login-buttons-reset-password-button":function(){i()},"keypress #reset-password-new-password":function(n){13===n.keyCode&&i()},"click #login-buttons-cancel-reset-password":function(){e.set("resetPasswordToken",null),o&&o()}});var i=function(){e.resetMessages();var n=document.getElementById("reset-password-new-password").value;I(n)&&t.resetPassword(e.get("resetPasswordToken"),n,function(n){n?e.errorMessage(n.reason||"Unknown error"):(e.set("resetPasswordToken",null),e.set("justResetPassword",!0),o&&o())})};l._resetPasswordDialog.helpers({inResetPasswordFlow:function(){return e.get("resetPasswordToken")}}),l._justResetPasswordDialog.events({"click #just-verified-dismiss-button":function(){e.set("justResetPassword",!1)}}),l._justResetPasswordDialog.helpers({visible:function(){return e.get("justResetPassword")},displayName:k}),l._enrollAccountDialog.events({"click #login-buttons-enroll-account-button":function(){s()},"keypress #enroll-account-password":function(n){13===n.keyCode&&s()},"click #login-buttons-cancel-enroll-account":function(){e.set("enrollAccountToken",null),o&&o()}});var s=function(){e.resetMessages();var n=document.getElementById("enroll-account-password").value;I(n)&&t.resetPassword(e.get("enrollAccountToken"),n,function(n){n?e.errorMessage(n.reason||"Unknown error"):(e.set("enrollAccountToken",null),o&&o())})};l._enrollAccountDialog.helpers({inEnrollAccountFlow:function(){return e.get("enrollAccountToken")}}),l._justVerifiedEmailDialog.events({"click #just-verified-dismiss-button":function(){e.set("justVerifiedEmail",!1)}}),l._justVerifiedEmailDialog.helpers({visible:function(){return e.get("justVerifiedEmail")},displayName:k}),l._loginButtonsMessagesDialog.events({"click #messages-dialog-dismiss-button":function(){e.resetMessages()}}),l._loginButtonsMessagesDialog.helpers({visible:function(){var n=e.get("infoMessage")||e.get("errorMessage");return!h()&&n}}),l._configureLoginServiceDialog.events({"click .configure-login-service-dismiss-button":function(){e.set("configureLoginServiceDialogVisible",!1)},"click #configure-login-service-dialog-save-configuration":function(){if(e.get("configureLoginServiceDialogVisible")&&!e.get("configureLoginServiceDialogSaveDisabled")){var o=e.get("configureLoginServiceDialogServiceName"),i={service:o};r.each(g(),function(n){i[n.property]=document.getElementById("configure-login-service-dialog-"+n.property).value.replace(/^\s*|\s*$/g,"")}),i.loginStyle=a('#configure-login-service-dialog input[name="loginStyle"]:checked').val(),t.connection.call("configureLoginService",i,function(i,t){i?n._debug("Error configuring login service "+o,i):e.set("configureLoginServiceDialogVisible",!1)})}},"input, keyup input":function(n){0===n.target.id.indexOf("configure-login-service-dialog")&&u()}});var u=function(){var n=r.any(g(),function(n){return""===document.getElementById("configure-login-service-dialog-"+n.property).value});e.set("configureLoginServiceDialogSaveDisabled",n)},c=function(){var n=e.get("configureLoginServiceDialogServiceName");return l["configureLoginServiceDialogFor"+("meteor-developer"===n?"MeteorDeveloper":d(n))]},g=function(){var n=c();return n.fields()};l._configureLoginServiceDialog.helpers({configurationFields:function(){return g()},visible:function(){return e.get("configureLoginServiceDialogVisible")},configurationSteps:function(){return c()},saveDisabled:function(){return e.get("configureLoginServiceDialogSaveDisabled")}});var d=function(n){return n=null==n?"":String(n),n.charAt(0).toUpperCase()+n.slice(1)};l._configureLoginOnDesktopDialog.helpers({visible:function(){return e.get("configureOnDesktopVisible")}}),l._configureLoginOnDesktopDialog.events({"click #configure-on-desktop-dismiss-button":function(){e.set("configureOnDesktopVisible",!1)}})}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-ui-unstyled"]={}}();

!function(){var e=Package.meteor.Meteor,r=Package.underscore._,o=Package["accounts-base"].Accounts,t=Package["accounts-base"].AccountsClient,n=Package.tracker.Tracker,s=Package.tracker.Deps,i=Package.mongo.Mongo,a=Package.check.check,l=Package.check.Match,u;(function(){!function(){function o(e){var o=["Cannot apply $addToSet modifier to non-array","Cannot apply $addToSet to a non-array field","Can only apply $pullAll to an array","Cannot apply $pull/$pullAll modifier to non-array","can't append to array using string field name","to traverse the element"];return r.some(o,function(r){return t(e,r)})}function t(e,r){return-1!==e.indexOf(r)}e.roles||(e.roles=new i.Collection("roles")),"undefined"==typeof u&&(u={});var n="Roles error: Can't mix grouped and non-grouped roles for same user";r.extend(u,{GLOBAL_GROUP:"__global_roles__",createRole:function(r){var o,t;if(r&&"string"==typeof r&&0!==r.trim().length)try{return o=e.roles.insert({name:r.trim()})}catch(n){if("MongoError"!==n.name)throw n;if(t=n.err.match(/^E11000 duplicate key error index: ([^ ]+)/),!t)throw n;if(-1!==t[1].indexOf("$name"))throw new e.Error(403,"Role already exists.");throw n}},deleteRole:function(r){if(r){var o=e.users.findOne({roles:{$in:[r]}},{fields:{_id:1}});if(o)throw new e.Error(403,"Role in use");var t=e.roles.findOne({name:r});t&&e.roles.remove({_id:t._id})}},addUsersToRoles:function(e,r,o){u._updateUserRoles(e,r,o,u._update_$addToSet_fn)},setUserRoles:function(e,r,o){u._updateUserRoles(e,r,o,u._update_$set_fn)},removeUsersFromRoles:function(t,s,i){var a;if(!t)throw new Error("Missing 'users' param");if(!s)throw new Error("Missing 'roles' param");if(i){if("string"!=typeof i)throw new Error("Roles error: Invalid parameter 'group'. Expected 'string' type");if("$"===i[0])throw new Error("Roles error: groups can not start with '$'");i=i.replace(/\./g,"_")}r.isArray(t)||(t=[t]),r.isArray(s)||(s=[s]),t=r.reduce(t,function(e,r){var o;return"string"==typeof r?e.push(r):"object"==typeof r&&(o=r._id,"string"==typeof o&&e.push(o)),e},[]),i?(a={$pullAll:{}},a.$pullAll["roles."+i]=s):a={$pullAll:{roles:s}};try{e.isClient?r.each(t,function(r){e.users.update({_id:r},a)}):e.users.update({_id:{$in:t}},a,{multi:!0})}catch(l){if("MongoError"===l.name&&o(l.err))throw new Error(n);throw l}},userIsInRole:function(o,t,n){var s,i,a,l,f=!1;if(r.isArray(t)||(t=[t]),!o)return!1;if(n){if("string"!=typeof n)return!1;if("$"===n[0])return!1;n=n.replace(/\./g,"_")}if("object"==typeof o){if(i=o.roles,r.isArray(i))return r.some(t,function(e){return r.contains(i,e)});if("object"==typeof i)return f=r.isArray(i[n])&&r.some(t,function(e){return r.contains(i[n],e)}),f||(f=r.isArray(i[u.GLOBAL_GROUP])&&r.some(t,function(e){return r.contains(i[u.GLOBAL_GROUP],e)})),f;s=o._id}else"string"==typeof o&&(s=o);return s?(a={_id:s,$or:[]},l={},l["roles."+u.GLOBAL_GROUP]={$in:t},a.$or.push(l),n?(l={},l["roles."+n]={$in:t},a.$or.push(l)):a.$or.push({roles:{$in:t}}),f=e.users.findOne(a,{fields:{_id:1}}),f?!0:!1):!1},getRolesForUser:function(o,t){if(!o)return[];if(t){if("string"!=typeof t)return[];if("$"===t[0])return[];t=t.replace(/\./g,"_")}if("string"==typeof o)o=e.users.findOne({_id:o},{fields:{roles:1}});else if("object"!=typeof o)return[];return o&&o.roles?t?r.union(o.roles[t]||[],o.roles[u.GLOBAL_GROUP]||[]):r.isArray(o.roles)?o.roles:o.roles[u.GLOBAL_GROUP]||[]:[]},getAllRoles:function(){return e.roles.find({},{sort:{name:1}})},getUsersInRole:function(o,t,n){var s,i=o,a;if(r.isArray(i)||(i=[i]),t){if("string"!=typeof t)throw new Error("Roles error: Invalid parameter 'group'. Expected 'string' type");if("$"===t[0])throw new Error("Roles error: groups can not start with '$'");t=t.replace(/\./g,"_")}return s={$or:[]},a={},a["roles."+u.GLOBAL_GROUP]={$in:i},s.$or.push(a),t?(a={},a["roles."+t]={$in:i},s.$or.push(a)):s.$or.push({roles:{$in:i}}),e.users.find(s,n)},getGroupsForUser:function(o,t){var n=[];if(!o)return[];if(t){if("string"!=typeof t)return[];if("$"===t[0])return[];t=t.replace(".","_")}if("string"==typeof o)o=e.users.findOne({_id:o},{fields:{roles:1}});else if("object"!=typeof o)return[];return o&&o.roles&&!r.isArray(o.roles)?t?(r.each(o.roles,function(e,o){r.contains(e,t)&&o!==u.GLOBAL_GROUP&&n.push(o)}),n):r.without(r.keys(o.roles),u.GLOBAL_GROUP):[]},_update_$set_fn:function(e,r){var o={};return r?(o.$set={},o.$set["roles."+r]=e):o.$set={roles:e},o},_update_$addToSet_fn:function(e,r){var o={};return r?(o.$addToSet={},o.$addToSet["roles."+r]={$each:e}):o.$addToSet={roles:{$each:e}},o},_updateUserRoles:function(t,s,i,a){if(!t)throw new Error("Missing 'users' param");if(!s)throw new Error("Missing 'roles' param");if(i){if("string"!=typeof i)throw new Error("Roles error: Invalid parameter 'group'. Expected 'string' type");if("$"===i[0])throw new Error("Roles error: groups can not start with '$'");i=i.replace(/\./g,"_")}var l,f,c;r.isArray(t)||(t=[t]),r.isArray(s)||(s=[s]),s=r.reduce(s,function(e,r){return r&&"string"==typeof r&&r.trim().length>0&&e.push(r.trim()),e},[]),l=r.reduce(e.roles.find({}).fetch(),function(e,r){return e[r.name]=!0,e},{}),r.each(s,function(e){l[e]||u.createRole(e)}),t=r.reduce(t,function(e,r){var o;return"string"==typeof r?e.push(r):"object"==typeof r&&(o=r._id,"string"==typeof o&&e.push(o)),e},[]),c=a(s,i);try{e.isClient?r.each(t,function(r){e.users.update({_id:r},c)}):e.users.update({_id:{$in:t}},c,{multi:!0})}catch(p){if("MongoError"===p.name&&o(p.err))throw new Error(n);throw p}}})}()}).call(this),function(){"use strict";if(u.debug=!1,localStorage){var e=localStorage.getItem("Roles.debug");"undefined"!=typeof e&&(u.debug=!!e)}}.call(this),function(){"use strict";u._uiHelpers={isInRole:function(o,t){var n=e.user(),s=(o||"").indexOf(","),i;return n&&l.test(o,String)?(i=-1!==s?r.reduce(o.split(","),function(e,r){return r&&r.trim()?(e.push(r.trim()),e):e},[]):[o],l.test(t,String)?u.userIsInRole(n,i,t):u.userIsInRole(n,i)):!1}},u.debug&&console.log&&console.log("[roles] Roles.debug =",u.debug),"undefined"!=typeof Package.blaze&&"undefined"!=typeof Package.blaze.Blaze&&"function"==typeof Package.blaze.Blaze.registerHelper&&r.each(u._uiHelpers,function(e,r){u.debug&&console.log&&console.log("[roles] registering Blaze helper '"+r+"'"),Package.blaze.Blaze.registerHelper(r,e)})}.call(this),function(){"use strict";n.autorun(function(){u.subscription=e.subscribe("_roles")})}.call(this),"undefined"==typeof Package&&(Package={}),Package["alanning:roles"]={Roles:u}}();

!function(){var t=Package.meteor.Meteor,e=Package.jquery.$,n=Package.jquery.jQuery,i=Package.ui.Blaze,r=Package.ui.UI,s=Package.ui.Handlebars,o=Package.htmljs.HTML,a;(function(){!function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(n){return t.Bloodhound=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(n)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function n(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?void 0:!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?!1:void 0}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function i(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s=this,o=arguments,a,u;return a=function(){i=null,n||(r=t.apply(s,o))},u=n&&!i,clearTimeout(i),i=setTimeout(a,e),u&&(r=t.apply(s,o)),r}},throttle:function(t,e){var n,i,r,s,o,a;return o=0,a=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var u=new Date,c=e-(u-o);return n=this,i=arguments,0>=c?(clearTimeout(r),r=null,o=u,s=t.apply(n,i)):r||(r=setTimeout(a,c)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n="0.11.1",i=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function n(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function i(t){return function n(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function r(n){var r=[];return e.each(i,function(i){r=r.concat(t(e.toStr(n[i])))}),r}}}return{nonword:n,whitespace:t,obj:{nonword:i(n),whitespace:i(t)}}}(),r=function(){"use strict";function n(n){this.maxSize=e.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function i(){this.head=this.tail=null}function r(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(n.prototype,{set:function s(t,e){var n=this.list.tail,i;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new r(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function o(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function a(){this.size=0,this.hash={},this.list=new i}}),e.mixin(i.prototype,{add:function u(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function c(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),n}(),s=function(){"use strict";function n(t,n){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=n||a,!this.ls&&this._noop()}function i(){return(new Date).getTime()}function r(t){return JSON.stringify(e.isUndefined(t)?null:t)}function s(e){return t.parseJSON(e)}function o(t){var e,n,i=[],r=a.length;for(e=0;r>e;e++)(n=a.key(e)).match(t)&&i.push(n.replace(t,""));return i}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(u){a=null}return e.mixin(n.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(n){"QuotaExceededError"===n.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),s(this.ls.getItem(this._prefix(t)))},set:function(t,n,s){return e.isNumber(s)?this._safeSet(this._ttlKey(t),r(i()+s)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(n))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=o(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var n=s(this.ls.getItem(this._ttlKey(t)));return e.isNumber(n)&&i()>n?!0:!1}}),n}(),o=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new r(0):a}var i=0,s={},o=6,a=new r(10);return n.setMaxPendingRequests=function u(t){o=t},n.resetCache=function c(){a.reset()},e.mixin(n.prototype,{_fingerprint:function l(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function n(t){e(null,t),u._cache.set(c,t)}function r(){e(!0)}function a(){i--,delete s[c],u.onDeckRequestArgs&&(u._get.apply(u,u.onDeckRequestArgs),u.onDeckRequestArgs=null)}var u=this,c,l;c=this._fingerprint(t),this.cancelled||c!==this.lastReq||((l=s[c])?l.done(n).fail(r):o>i?(i++,s[c]=this._send(t).done(n).fail(r).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var r,s;i=i||t.noop,n=e.isString(n)?{url:n}:n||{},s=this._fingerprint(n),this.cancelled=!1,this.lastReq=s,(r=this._cache.get(s))?i(null,r):this._get(n,i)},cancel:function(){this.cancelled=!0}}),n}(),a=window.SearchIndex=function(){"use strict";function n(n){n=n||{},n.datumTokenizer&&n.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||e.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){var t={};return t[u]=[],t[a]={},t}function s(t){for(var e={},n=[],i=0,r=t.length;r>i;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function o(t,e){var n=0,i=0,r=[];t=t.sort(),e=e.sort();for(var s=t.length,o=e.length;s>n&&o>i;)t[n]<e[i]?n++:t[n]>e[i]?i++:(r.push(t[n]),n++,i++);return r}var a="c",u="i";return e.mixin(n.prototype,{bootstrap:function c(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var s,o;n.datums[s=n.identify(t)]=t,o=i(n.datumTokenizer(t)),e.each(o,function(t){var e,i,o;for(e=n.trie,i=t.split("");o=i.shift();)e=e[a][o]||(e[a][o]=r()),e[u].push(s)})})},get:function l(t){var n=this;return e.map(t,function(t){return n.datums[t]})},search:function h(t){var n=this,r,c;return r=i(this.queryTokenizer(t)),e.each(r,function(t){var e,i,r,s;if(c&&0===c.length)return!1;for(e=n.trie,i=t.split("");e&&(r=i.shift());)e=e[a][r];return e&&0===i.length?(s=e[u].slice(0),void(c=c?o(c,s):s)):(c=[],!1)}),c?e.map(s(c),function(t){return n.datums[t]}):[]},all:function f(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function d(){this.datums={},this.trie=r()},serialize:function p(){return{datums:this.datums,trie:this.trie}}}),n}(),u=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new s(t.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function i(){return{url:this.url,type:"GET",dataType:"json"}},store:function r(t){this.cache&&(this.storage.set(n.data,t,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function o(){var t={},e;return this.cache?(t.data=this.storage.get(n.data),t.protocol=this.storage.get(n.protocol),t.thumbprint=this.storage.get(n.thumbprint),e=t.thumbprint!==this.thumbprint||t.protocol!==location.protocol,t.data&&!e?t.data:null):null},fromNetwork:function(t){function e(){t(!0)}function n(e){t(null,i.transform(e))}var i=this,r;t&&(r=this.prepare(this._settings()),this.transport(r).fail(e).done(n))},clear:function a(){return this.storage.clear(),this}}),t}(),c=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new o({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function n(){return{url:this.url,type:"GET",dataType:"json"}},get:function i(t,e){function n(t,n){e(t?[]:i.transform(n))}var i=this,r;if(e)return t=t||"",r=this.prepare(t,this._settings()),this.transport.get(r,n)},cancelLastRequest:function r(){this.transport.cancel()}}),t}(),l=function(){"use strict";function i(i){var r;return i?(r={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(r,i),!i.url&&t.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?a(i.transport):t.ajax,i):null}function r(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(i,n),!n.url&&t.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=s(n),n.limiter=o(n),n.transport=n.transport?a(n.transport):t.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function s(t){function e(t,e){return e.url=s(e.url,t),e}function n(t,e){return e.url=e.url.replace(o,encodeURIComponent(t)),e}function i(t,e){return e}var r,s,o;return r=t.prepare,s=t.replace,o=t.wildcard,r?r:r=s?e:t.wildcard?n:i}function o(t){function n(t){return function n(i){return e.debounce(i,t)}}function i(t){return function n(i){return e.throttle(i,t)}}var r,s,o;return r=t.limiter,s=t.rateLimitBy,o=t.rateLimitWait,r||(r=/^throttle$/i.test(s)?i(o):n(o)),r}function a(n){return function i(r){function s(t){e.defer(function(){a.resolve(t)})}function o(t){e.defer(function(){a.reject(t)})}var a=t.Deferred();return n(r,s,o),a}}return function u(n){var s,o;return s={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},n=e.mixin(s,n||{}),!n.datumTokenizer&&t.error("datumTokenizer is required"),!n.queryTokenizer&&t.error("queryTokenizer is required"),o=n.sorter,n.sorter=o?function(t){return t.sort(o)}:e.identity,n.local=e.isFunction(n.local)?n.local():n.local,n.prefetch=i(n.prefetch),n.remote=r(n.remote),n}}(),h=function(){"use strict";function n(t){t=l(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new c(t.remote):null,this.prefetch=t.prefetch?new u(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var r;return r=window&&window.Bloodhound,n.noConflict=function s(){return window&&(window.Bloodhound=r),n},n.tokenizers=i,e.mixin(n.prototype,{__ttAdapter:function h(){function t(t,e,i){return n.search(t,e,i)}function e(t,e){return n.search(t,e)}var n=this;return this.remote?t:e},_loadPrefetch:function f(){function e(t,e){return t?i.reject():(n.add(e),n.prefetch.store(n.index.serialize()),void i.resolve())}var n=this,i,r;return i=t.Deferred(),this.prefetch?(r=this.prefetch.fromCache())?(this.index.bootstrap(r),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function d(){function t(){e.add(e.local)}var e=this,n;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function p(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function g(t){return this.index.add(t),this},get:function m(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function y(t,n,i){function r(t){var n=[];e.each(t,function(t){!e.some(o,function(e){return s.identify(t)===s.identify(e)})&&n.push(t)}),i&&i(n)}var s=this,o;return o=this.sorter(this.index.search(t)),n(this.remote?o.slice():o),this.remote&&o.length<this.sufficient?this.remote.get(t,r):this.remote&&this.remote.cancelLastRequest(),this},all:function v(){return this.index.all()},clear:function _(){return this.index.reset(),this},clearPrefetchCache:function b(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function w(){return o.resetCache(),this},ttAdapter:function S(){return this.__ttAdapter()}}),n}();return h}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(n)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function n(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?void 0:!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?!1:void 0}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function i(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s=this,o=arguments,a,u;return a=function(){i=null,n||(r=t.apply(s,o))},u=n&&!i,clearTimeout(i),i=setTimeout(a,e),u&&(r=t.apply(s,o)),r}},throttle:function(t,e){var n,i,r,s,o,a;return o=0,a=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var u=new Date,c=e-(u-o);return n=this,i=arguments,0>=c?(clearTimeout(r),r=null,o=u,s=t.apply(n,i)):r||(r=setTimeout(a,c)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n=function(){"use strict";function t(t){var o,a;return a=e.mixin({},s,t),o={css:r(),classes:a,html:n(a),selectors:i(a)},{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(t){e.mixin(t,o)}}}function n(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function i(t){var n={};return e.each(t,function(t,e){n[e]="."+t}),n}function r(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var s={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),i=function(){"use strict";function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i,r;return i="typeahead:",r={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(n.prototype,{_trigger:function(e,n){var r;return r=t.Event(i+e),(n=n||[]).unshift(r),this.$el.trigger.apply(this.$el,n),r},before:function(t){var e,n;return e=[].slice.call(arguments,1),n=this._trigger("before"+t,e),n.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=r[t])&&this._trigger(e,[].slice.call(arguments,1))}}),n}(),r=function(){"use strict";function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(u),n=i?a(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(u);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,o;if(!this._callbacks)return this;for(t=t.split(u),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=s(n.sync,this,[e].concat(i)),o=s(n.async,this,[e].concat(i)),r()&&c(o);return this}function s(t,e,n){function i(){for(var i,r=0,s=t.length;!i&&s>r;r+=1)i=t[r].apply(e,n)===!1;return!i}return i}function o(){var t;return t=window.setImmediate?function e(t){setImmediate(function(){t()})}:function n(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var u=/\s+/,c=o();return{onSync:n,onAsync:e,off:i,trigger:r}}(),s=function(t){"use strict";function n(t,n,i){for(var r=[],s,o=0,a=t.length;a>o;o++)r.push(e.escapeRegExChars(t[o]));return s=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",n?new RegExp(s):new RegExp(s,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function r(s){function o(e){var n,i,r;return(n=u.exec(e.data))&&(r=t.createElement(s.tagName),s.className&&(r.className=s.className),i=e.splitText(n.index),i.splitText(n[0].length),r.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(r,i)),!!n}function a(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)n=t.childNodes[r],n.nodeType===i?r+=e(n)?1:0:a(n,e)}var u;s=e.mixin({},i,s),s.node&&s.pattern&&(s.pattern=e.isArray(s.pattern)?s.pattern:[s.pattern],u=n(s.pattern,s.caseSensitive,s.wordsOnly),a(s.node,o))}}(window.document),o=function(){"use strict";function n(n,r){n=n||{},n.input||t.error("input is missing"),r.mixin(this),this.$hint=t(n.hint),this.$input=t(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=i(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function i(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function s(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,r,{_onBlur:function u(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function c(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function l(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function h(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function f(t,e){var n;switch(t){case"up":case"down":n=!o(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function d(t,e){var n;switch(t){case"tab":n=!o(e);break;default:n=!0}return n},_checkLanguageDirection:function p(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function g(t,e){var n,i;n=s(t,this.query),i=n?this.query.length!==t.length:!1,this.query=t,e||n?!e&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t=this,n,i,r,s;return n=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),r=e.bind(this._onKeydown,this),s=e.bind(this._onInput,this),this.$input.on("blur.tt",n).on("focus.tt",i).on("keydown.tt",r),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",s):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(n){a[n.which||n.keyCode]||e.defer(e.bind(t._onInput,t,n))}),this},focus:function m(){this.$input.focus()},blur:function y(){this.$input.blur()},getLangDir:function v(){return this.dir},getQuery:function _(){return this.query||""},setQuery:function b(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function w(){return this.query!==this.queryWhenFocused},getInputValue:function S(){return this.$input.val()},setInputValue:function x(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function k(){this.setInputValue(this.query)},getHint:function A(){return this.$hint.val()},setHint:function C(t){this.$hint.val(t)},clearHint:function $(){this.setHint("")},clearHintIfInvalid:function T(){var t,e,n,i;t=this.getInputValue(),e=this.getHint(),n=t!==e&&0===e.indexOf(t),i=""!==t&&n&&!this.hasOverflow(),!i&&this.clearHint()},hasFocus:function q(){return this.$input.is(":focus")},hasOverflow:function D(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:document.selection?(i=document.selection.createRange(),i.moveStart("character",-t),t===i.text.length):!0},destroy:function F(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),n}(),a=function(){"use strict";function n(n,r){n=n||{},n.templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||t.error("missing source"),n.node||t.error("missing node"),n.name&&!a(n.name)&&t.error("invalid dataset name: "+n.name),r.mixin(this),this.highlight=!!n.highlight,this.name=n.name||c(),this.limit=n.limit||5,this.displayFn=i(n.display||n.displayKey),this.templates=o(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=e.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=t(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function i(t){function n(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:n}function o(n,i){function r(e){return t("<div>").text(i(e))}return{notFound:n.notFound&&e.templatify(n.notFound),pending:n.pending&&e.templatify(n.pending),header:n.header&&e.templatify(n.header),footer:n.footer&&e.templatify(n.footer),suggestion:n.suggestion||r}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var u,c;return u={val:"tt-selectable-display",obj:"tt-selectable-object"},c=e.getIdGenerator(),n.extractData=function l(e){var n=t(e);return n.data(u.obj)?{val:n.data(u.val)||"",obj:n.data(u.obj)||null}:null},e.mixin(n.prototype,r,{_overwrite:function h(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function f(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function d(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function p(t,e){var n,i;n=this._getSuggestionsFragment(t,e),i=n.children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function g(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function m(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function y(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function v(n,i){var r=this,o;return o=document.createDocumentFragment(),e.each(i,function a(e){var i,s;s=r._injectQuery(n,e),i=t(r.templates.suggestion(s)).data(u.obj,e).data(u.val,r.displayFn(e)).addClass(r.classes.suggestion+" "+r.classes.selectable),o.appendChild(i[0])}),this.highlight&&s({className:this.classes.highlight,node:o,pattern:n}),t(o)},_getFooter:function _(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function b(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function w(){this.$lastSuggestion=t()},_injectQuery:function S(t,n){return e.isObject(n)?e.mixin({_query:t},n):n},update:function x(e){function n(t){o||(o=!0,t=(t||[]).slice(0,r.limit),a=t.length,r._overwrite(e,t),a<r.limit&&r.async&&r.trigger("asyncRequested",e))}function i(n){n=n||[],!s&&a<r.limit&&(r.cancel=t.noop,n=n.slice(0,r.limit-a),r._append(e,n),a+=n.length,r.async&&r.trigger("asyncReceived",e))}var r=this,s=!1,o=!1,a=0;this.cancel(),this.cancel=function u(){s=!0,r.cancel=t.noop,r.async&&r.trigger("asyncCanceled",e)},this.source(e,n,i),!o&&n([])},cancel:t.noop,clear:function k(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function A(){return this.$el.is(":empty")},destroy:function C(){this.$el=t("<div>")}}),n}(),u=function(){"use strict";function n(n,i){function r(e){var n=s.$node.find(e.node).first();return e.node=n.length?n:t("<div>").appendTo(s.$node),new a(e,i)}var s=this;n=n||{},n.node||t.error("node is required"),i.mixin(this),this.$node=t(n.node),this.query=null,this.datasets=e.map(n.datasets,r)}return e.mixin(n.prototype,r,{_onSelectableClick:function i(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function s(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function o(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function u(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function c(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function l(){return this.$node.find(this.selectors.selectable)},_removeCursor:function h(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function f(t){var e,n,i,r;e=t.position().top,n=e+t.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(i+e):n>r&&this.$node.scrollTop(i+(n-r))},bind:function(){var t=this,n;return n=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,n),e.each(this.datasets,function(e){e.onSync("asyncRequested",t._propagate,t).onSync("asyncCanceled",t._propagate,t).onSync("asyncReceived",t._propagate,t).onSync("rendered",t._onRendered,t).onSync("cleared",t._onCleared,t)}),this},isOpen:function d(){return this.$node.hasClass(this.classes.open)},open:function p(){this.$node.addClass(this.classes.open)},close:function g(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function m(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function y(t){var e,n,i,r;return n=this.getActiveSelectable(),e=this._getSelectables(),i=n?e.index(n):-1,r=i+t,r=(r+1)%(e.length+1)-1,r=-1>r?e.length-1:r,-1===r?null:e.eq(r)},setCursor:function v(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function _(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function b(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function w(){var t=this._getSelectables().first();return t.length?t:null},update:function S(t){function n(e){e.update(t)}var i=t!==this.query;return i&&(this.query=t,e.each(this.datasets,n)),i},empty:function x(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function k(){function n(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,n)}}),n}(),c=function(){"use strict";function t(){u.apply(this,[].slice.call(arguments,0))}var n=u.prototype;return e.mixin(t.prototype,u.prototype,{open:function i(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function r(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function s(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function o(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function a(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function c(){this.$node.hide()},_show:function l(){this.$node.css("display","block")}}),t}(),l=function(){"use strict";function n(n,r){var s,o,a,u,c,l,h,f,d,p,g;n=n||{},n.input||t.error("missing input"),n.menu||t.error("missing menu"),n.eventBus||t.error("missing event bus"),r.mixin(this),this.eventBus=n.eventBus,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=i(this,"activate","open","_onFocused"),o=i(this,"deactivate","_onBlurred"),a=i(this,"isActive","isOpen","_onEnterKeyed"),u=i(this,"isActive","isOpen","_onTabKeyed"),c=i(this,"isActive","_onEscKeyed"),l=i(this,"isActive","open","_onUpKeyed"),h=i(this,"isActive","open","_onDownKeyed"),f=i(this,"isActive","isOpen","_onLeftKeyed"),d=i(this,"isActive","isOpen","_onRightKeyed"),p=i(this,"_openIfActive","_onQueryChanged"),g=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",o,this).onSync("enterKeyed",a,this).onSync("tabKeyed",u,this).onSync("escKeyed",c,this).onSync("upKeyed",l,this).onSync("downKeyed",h,this).onSync("leftKeyed",f,this).onSync("rightKeyed",d,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this);

}function i(t){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);e.each(n,function(e){return t[e].apply(t,i)})}}return e.mixin(n.prototype,{_hacks:function r(){var n,i;n=this.input.$input||t("<div>"),i=this.menu.$node||t("<div>"),n.on("blur.tt",function(t){var r,s,o;r=document.activeElement,s=i.is(r),o=i.has(r).length>0,e.isMsie()&&(s||o)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function s(t,e){this.select(e)},_onDatasetCleared:function a(){this._updateHint()},_onDatasetRendered:function u(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,e)},_onAsyncRequested:function c(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function l(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function h(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function f(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function d(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function p(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&e.preventDefault()},_onTabKeyed:function g(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function m(){this.close()},_onUpKeyed:function y(){this.moveCursor(-1)},_onDownKeyed:function v(){this.moveCursor(1)},_onLeftKeyed:function _(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function b(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function w(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function S(){this._updateHint()},_onLangDirChanged:function x(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function k(){this.isActive()&&this.open()},_minLengthMet:function A(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function C(){var t,n,i,r,s,a,u;t=this.menu.getTopSelectable(),n=this.menu.getSelectableData(t),i=this.input.getInputValue(),!n||e.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(r=o.normalizeQuery(i),s=e.escapeRegExChars(r),a=new RegExp("^(?:"+s+")(.+$)","i"),u=a.exec(n.val),u&&this.input.setHint(i+u[1]))},isEnabled:function $(){return this.enabled},enable:function T(){this.enabled=!0},disable:function q(){this.enabled=!1},isActive:function D(){return this.active},activate:function F(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function z(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function I(){return this.menu.isOpen()},open:function B(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function E(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function R(t){this.input.setQuery(e.toStr(t))},getVal:function L(){return this.input.getQuery()},select:function j(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function K(t){var e,n,i;return e=this.input.getQuery(),n=this.menu.getSelectableData(t),i=n&&e!==n.val,i&&!this.eventBus.before("autocomplete",n.obj)?(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0):!1},moveCursor:function H(t){var e,n,i,r,s;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),i=this.menu.getSelectableData(n),r=i?i.obj:null,s=this._minLengthMet()&&this.menu.update(e),s||this.eventBus.before("cursorchange",r)?!1:(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function O(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){"use strict";function r(e,n){e.each(function(){var e=t(this),i;(i=e.data(g.typeahead))&&n(i,e)})}function s(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(h(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(t,e){t.data(g.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(n){}return t}function h(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function f(t){var n,i;n=t.data(g.www),i=t.parent().filter(n.selectors.wrapper),e.each(t.data(g.attrs),function(n,i){e.isUndefined(n)?t.removeAttr(i):t.attr(i,n)}),t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(n.classes.input),i.length&&(t.detach().insertAfter(i),i.remove())}function d(n){var i,r;return i=e.isJQuery(n)||e.isElement(n),r=i?t(n).first():[],r.length?r:null}var p,g,m;p=t.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},m={initialize:function y(r,h){function f(){var n,f,m,y,v,_,b,w,S,x,k;e.each(h,function(t){t.highlight=!!r.highlight}),n=t(this),f=t(p.html.wrapper),m=d(r.hint),y=d(r.menu),v=r.hint!==!1&&!m,_=r.menu!==!1&&!y,v&&(m=s(n,p)),_&&(y=t(p.html.menu).css(p.css.menu)),m&&m.val(""),n=a(n,p),(v||_)&&(f.css(p.css.wrapper),n.css(v?p.css.input:p.css.inputWithNoHint),n.wrap(f).parent().prepend(v?m:null).append(_?y:null)),k=_?c:u,b=new i({el:n}),w=new o({hint:m,input:n},p),S=new k({node:y,datasets:h},p),x=new l({input:w,menu:S,eventBus:b,minLength:r.minLength},p),n.data(g.www,p),n.data(g.typeahead,x)}var p;return h=e.isArray(h)?h:[].slice.call(arguments,1),r=r||{},p=n(r.classNames),this.each(f)},isEnabled:function v(){var t;return r(this.first(),function(e){t=e.isEnabled()}),t},enable:function _(){return r(this,function(t){t.enable()}),this},disable:function b(){return r(this,function(t){t.disable()}),this},isActive:function w(){var t;return r(this.first(),function(e){t=e.isActive()}),t},activate:function S(){return r(this,function(t){t.activate()}),this},deactivate:function x(){return r(this,function(t){t.deactivate()}),this},isOpen:function k(){var t;return r(this.first(),function(e){t=e.isOpen()}),t},open:function A(){return r(this,function(t){t.open()}),this},close:function C(){return r(this,function(t){t.close()}),this},select:function $(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.select(i)}),n},autocomplete:function T(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.autocomplete(i)}),n},moveCursor:function q(t){var e=!1;return r(this.first(),function(n){e=n.moveCursor(t)}),e},val:function D(t){var e;return arguments.length?(r(this,function(e){e.setVal(t)}),this):(r(this.first(),function(t){e=t.getVal()}),e)},destroy:function F(){return r(this,function(t,e){f(e),t.destroy()}),this}},t.fn.typeahead=function(t){return m[t]?m[t].apply(this,[].slice.call(arguments,1)):m.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function z(){return t.fn.typeahead=p,this}}()})}).call(this),function(){function n(t){return t}function s(n,i){try{e(i).data("ttTypeahead")||t.typeahead(i)}catch(r){return void console.log(r)}}function o(t,n){var i=t[0],r=t.data("sources")||t.data("sets");if(r)return"string"==typeof r&&(r=d(i,r)),e.isFunction(r)&&(r=r()||[]),r.map(function(t){return v(t)});var s=c(t.attr("data-source-name")||t.attr("name")||t.attr("id")||"dataset"),o=t.data("limit"),f=t.data("template"),p=t.data("templates"),g=t.data("value-key")||"value",_=u(t);n||(n=t.data("source")||[]);var b={name:s,valueKey:g,displayKey:g,minLength:_};if(o&&(b.limit=o),f&&(b.template=f),p&&"string"==typeof p&&l(b,p),b.templates=m(b),"string"==typeof n){if(n.indexOf("/")>=0)return a=!0,b.prefetch={url:n,filter:function(t){return(t||[]).map(y(b))}},v(b);n=h(i,n)}return e.isArray(n)||e.isFunction(n)&&0===n.length?(b.local=n,v(b)):(b.source=n,b)}function u(t){var e=parseInt(t.data("min-length"));return isNaN(e)||0>e?1:e}function c(t){return t.replace(/[\]\[\.]/g,"_")}function l(t,e){var i={header:1,footer:1,suggestion:1,template:1,notFound:1,empty:1,pending:1},r=e.split(/[;,]+/);r.map(function(t){var e=t.split(/[:=]+/).map(function(t){return t.trim()});switch(e.length){case 1:return["template",e[0]];case 2:return e[0]in i?[e[0],e[1]]:null;default:return null}}).filter(n).forEach(function(e){t[e[0]]=e[1]})}function h(t,i){var r=d(t,i);if(e.isFunction(r))return r;var s=i.split(".");if(s.length>0){var o=f(s[0]);if(o){var a=s.length>1?s[1]:"";return function(){return o.find().fetch().map(function(t){var e=a?t[a]:t.name||t.title;return e?{value:e,id:t._id}:""}).filter(n)}}}return console.log("Unable to resolve data source function '%s'.",i),[]}function f(t){return"undefined"!=typeof Mongo&&"undefined"!=typeof Mongo.Collection&&e.isFunction(Mongo.Collection.get)?Mongo.Collection.get(t):_?_[t]||_[t.toLowerCase()]||null:null}function d(t,n){function r(t){return i._withCurrentView(a,function(){return s.apply(null,t)})}for(var s=null,o={sync:!1},a=i.getView(t);a&&(s=p(a,n,o),!e.isFunction(s));)a=a.parentView;return e.isFunction(s)?o.sync?function(){return r(Array.prototype.slice.call(arguments))}:function(t){return r(Array.prototype.slice.call(arguments))}:null}function p(t,n,r){if(!t.template)return null;var s=t.template.__helpers.get(n);return e.isFunction(s)?(r.sync=0===s.length,i._getTemplateHelper(t.template,n,function(){return t.templateInstance()})):null}function g(t){if(!t)throw new Error("templateName is not specified");var n=Template[t];if(!n)throw new Error("Template '"+t+"' is not defined");return function(t){var s=e("<div/>");if(e.isFunction(i.renderWithData))i.renderWithData(n,t,s[0]);else{var o=r.renderWithData(n,t);r.insert(o,s[0])}return s[0].outerHTML}}function m(t){function n(t){return t?"string"==typeof t?t.indexOf("<")>=0?t:g(t):e.isFunction(t)?t:null:null}var i={header:n(t.header),footer:n(t.footer),suggestion:n(t.suggestion||t.template),notFound:n(t.notFound||t.empty)};return Object.keys(i).filter(function(t){return i[t]}).reduce(function(t,e){return t[e]=i[e],t},{})}function y(t){return function(e){if("object"==typeof e)return e;var n={};return n[t.valueKey]=e,n}}function v(t){function n(t,e){var n=s.ttAdapter();return n(t,e)}if(!t.template)if(Array.isArray(t.local))t.local=t.local.map(y(t));else if(e.isFunction(t.local)&&0===t.local.length){var i=t.local;t.local=function(){return(i()||[]).map(y(t))}}var r=t.prefetch||Array.isArray(t.local)||e.isFunction(t.local)&&0===t.local.length,s;if(r){var o=e.extend({},t,{datumTokenizer:Bloodhound.tokenizers.obj.whitespace(t.valueKey),queryTokenizer:Bloodhound.tokenizers.whitespace});if(s=new Bloodhound(o),s.initialize(),e.isFunction(t.local)&&0===t.local.length){var a=Template.instance()||Tracker;a.autorun(function(t){s=new Bloodhound(o),s.initialize()})}}var u=r||"undefined"!=typeof t.local?{source:r?n:t.local}:{},c="undefined"==typeof t.templates?{templates:m(t)}:{};return e.extend({},t,u,c)}var _=this||window;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var b=["active","idle","open","close","change","render","select","autocomplete","asyncrequest","asynccancel","asyncreceive"];t.typeahead=function(t,n){function i(t,e){var n=r.data(t);return void 0===n?e:!!n}var r=e(t),s=o(r,n);r.typeahead("destroy");var a=r.data("options")||{};"object"!=typeof a&&(a={});var c=i("highlight",!1),l=i("hint",!0),h=i("autoselect",!1),f=u(r);a=e.extend(a,{highlight:c,hint:l,minLength:f,autoselect:h});var p;if(Array.isArray(s))p=r.typeahead.apply(r,[a].concat(s));else{var g=s;if(0===f&&g.local){var m=g.source;g.source=function(t,e,n){return t?m(t,e,n):e(g.local())}}p=r.typeahead(a,g)}return b.forEach(function(t){var n=d(r[0],r.data(t));e.isFunction(n)&&p.on("typeahead:"+t,n)}),r.hasClass("form-control")&&r.parent(".twitter-typeahead").find(".tt-hint").addClass("form-control"),0===f&&r.on("focus",function(){""===r.val()&&r.data("ttTypeahead").input.trigger("queryChanged","")}),p},t.typeahead.inject=function(t){t||(t=".typeahead");var n=Template.instance();n?n.$(t).each(s):e(t).each(s)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["sergeyt:typeahead"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.jquery.$,o=Package.jquery.jQuery;(function(){(function(){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery||window.$)}(function(e){var t={className:"autosizejs",append:"",callback:!1,resizeDelay:10},o='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',i=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],n,a=e(o).data("autosize",!0)[0];a.style.lineHeight="99px","99px"===e(a).css("lineHeight")&&i.push("lineHeight"),a.style.lineHeight="",e.fn.autosize=function(o){return this.length?(o=e.extend({},t,o||{}),a.parentNode!==document.body&&e(document.body).append(a),this.each(function(){function t(){var t,o;"getComputedStyle"in window?(t=window.getComputedStyle(c),o=c.getBoundingClientRect().width,e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,i){o-=parseInt(t[i],10)}),a.style.width=o+"px"):a.style.width=Math.max(d.width(),0)+"px"}function s(){var s={};if(n=c,a.className=o.className,u=parseInt(d.css("maxHeight"),10),e.each(i,function(e,t){s[t]=d.css(t)}),e(a).css(s),t(),window.chrome){var r=c.style.width;c.style.width="0px";var l=c.offsetWidth;c.style.width=r}}function r(){var e,i;n!==c?s():t(),a.value=c.value+o.append,a.style.overflowY=c.style.overflowY,i=parseInt(c.style.height,10),a.scrollTop=0,a.scrollTop=9e4,e=a.scrollTop,u&&e>u?(c.style.overflowY="scroll",e=u):(c.style.overflowY="hidden",h>e&&(e=h)),e+=f,i!==e&&(c.style.height=e+"px",p&&o.callback.call(c,c))}function l(){clearTimeout(g),g=setTimeout(function(){var e=d.width();e!==y&&(y=e,r())},parseInt(o.resizeDelay,10))}var c=this,d=e(c),u,h,f=0,p=e.isFunction(o.callback),w={height:c.style.height,overflow:c.style.overflow,overflowY:c.style.overflowY,wordWrap:c.style.wordWrap,resize:c.style.resize},g,y=d.width();d.data("autosize")||(d.data("autosize",!0),("border-box"===d.css("box-sizing")||"border-box"===d.css("-moz-box-sizing")||"border-box"===d.css("-webkit-box-sizing"))&&(f=d.outerHeight()-d.height()),h=Math.max(parseInt(d.css("minHeight"),10)-f||0,d.height()),d.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:"none"===d.css("resize")||"vertical"===d.css("resize")?"none":"horizontal"}),"onpropertychange"in c?"oninput"in c?d.on("input.autosize keyup.autosize",r):d.on("propertychange.autosize",function(){"value"===event.propertyName&&r()}):d.on("input.autosize",r),o.resizeDelay!==!1&&e(window).on("resize.autosize",l),d.on("autosize.resize",r),d.on("autosize.resizeIncludeStyle",function(){n=null,r()}),d.on("autosize.destroy",function(){n=null,clearTimeout(g),e(window).off("resize",l),d.off("autosize").off(".autosize").css(w).removeData("autosize")}),r())})):this}})}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["copleykj:jquery-autosize"]={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["froatsnook:request"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.mongo.Mongo,n=Package.tracker.Tracker,o=Package.tracker.Deps,r=Package.underscore._,c=Package.ejson.EJSON,i=Package.minimongo.LocalCollection,a=Package.minimongo.Minimongo,s;(function(){var n={},o=Package.tracker&&Package.tracker.Tracker||Package.deps.Deps,a=e.isServer&&new e.EnvironmentVariable;if(s={defaults:{before:{insert:{},update:{},remove:{},upsert:{},find:{},findOne:{},all:{}},after:{insert:{},update:{},remove:{},find:{},findOne:{},all:{}},all:{insert:{},update:{},remove:{},find:{},findOne:{},all:{}}},directEnv:new e.EnvironmentVariable,directOp:function l(e){return this.directEnv.withValue(!0,e)},hookedOp:function f(e){return this.directEnv.withValue(!1,e)}},s.getUserId=function p(){var t;if(e.isClient&&o.nonreactive(function(){t=e.userId&&e.userId()}),e.isServer){try{t=e.userId&&e.userId()}catch(n){}t||(t=a.get())}return t},s.extendCollectionInstance=function d(t,o){r.each(["before","after"],function(o){r.each(n,function(n,r){("upsert"!==n||"after"!==o)&&(e._ensure(t,o,r),e._ensure(t,"_hookAspects",r),t._hookAspects[r][o]=[],t[o][r]=function(e,n){var c=t._hookAspects[r][o].push({aspect:e,options:s.initOptions(n,o,r)});return{replace:function(e,n){t._hookAspects[r][o].splice(c-1,1,{aspect:e,options:s.initOptions(n,o,r)})},remove:function(){t._hookAspects[r][o].splice(c-1,1)}}})})}),t.hookOptions=c.clone(s.defaults),r.each(n,function(n,c){var i=e.isClient||"upsert"===c?t:t._collection,a=i[c];e._ensure(t,"direct",c),t.direct[c]=function(){var e=arguments;return s.directOp(function(){return o.prototype[c].apply(t,e)})},i[c]=function(){return s.directEnv.get()===!0?a.apply(i,arguments):n.call(this,s.getUserId(),a,t,"upsert"===c?{insert:t._hookAspects.insert||{},update:t._hookAspects.update||{},upsert:t._hookAspects.upsert||{}}:t._hookAspects[c]||{},function(e){return r.isFunction(t._transform)?function(n){return t._transform(n||e)}:function(t){return t||e}},r.toArray(arguments),!1)}})},s.defineAdvice=function h(e,t){n[e]=t},s.getAdvice=function v(e){return n[e]},s.initOptions=function g(e,t,n){return s.extendOptions(s.defaults,e,t,n)},s.extendOptions=function _(e,t,n,o){return t=r.extend(t||{},e.all.all),t=r.extend(t,e[n].all),t=r.extend(t,e.all[o]),t=r.extend(t,e[n][o])},s.getDocs=function m(e,t,n){var o=this,r={transform:null,reactive:!1};return n&&(n.multi||(r.limit=1)),e.find(t,r)},s.getFields=function y(e){var t=[];return r.each(e,function(e,n){r.contains(["$set","$unset","$inc","$push","$pull","$pop","$rename","$pullAll","$addToSet","$bit"],n)?r.each(r.keys(e),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),r.contains(t,e)||t.push(e)}):t.push(n)}),t},s.reassignPrototype=function k(n,o){var r="function"==typeof Object.setPrototypeOf;o||(o="undefined"!=typeof t?t.Collection:e.Collection),r?Object.setPrototypeOf(n,o.prototype):n.__proto__&&(n.__proto__=o.prototype)},s.wrapCollection=function C(e,t){t._CollectionConstructor||(t._CollectionConstructor=t.Collection),t._CollectionPrototype||(t._CollectionPrototype=new t.Collection(null));var n=t._CollectionConstructor,o=t._CollectionPrototype;e.Collection=function(){var e=n.apply(this,arguments);return s.extendCollectionInstance(this,n),e},e.Collection.prototype=o,e.Collection.prototype.constructor=e.Collection;for(var r in n)n.hasOwnProperty(r)&&(e.Collection[r]=n[r])},s.modify=i._modify,"undefined"!=typeof t?(s.wrapCollection(e,t),s.wrapCollection(t,t)):s.wrapCollection(e,e),e.isServer){var u=e.publish;e.publish=function(e,t){return u.call(this,e,function(){var e=this,n=arguments;return a.withValue(e&&e.userId,function(){return t.apply(e,n)})})},s.isWithinPublish=function O(){return void 0!==a.get()}}}).call(this),function(){s.defineAdvice("insert",function(e,t,n,o,i,a,s){function u(t,n){var u=a[0];if(t&&(u=c.clone(a[0]),u._id=t),!s){var l=r.extend({transform:i(u),_id:t,err:n},f);r.each(o.after,function(t){t.aspect.call(l,e,u)})}return t}var l=this,f={context:l,_super:t,args:a},p=r.last(a),d=r.isFunction(p),h,v;if(!s)try{if(r.each(o.before,function(t){var n=t.aspect.call(r.extend({transform:i(a[0])},f),e,a[0]);n===!1&&(h=!0)}),h)return!1}catch(g){if(d)return p.call(l,g);throw g}return d?(a[a.length-1]=function(e,t){return u(t&&t[0]&&t[0]._id||t,e),p.apply(this,arguments)},t.apply(l,a)):(v=t.apply(l,a),u(v&&v[0]&&v[0]._id||v))})}.call(this),function(){s.defineAdvice("update",function(e,t,n,o,i,a,u){function l(t,n){if(!u){var c=s.getFields(a[1]),l=s.getDocs.call(f,k,{_id:{$in:g}},a[2]).fetch();r.each(o.after,function(o){r.each(l,function(a){o.aspect.call(r.extend({transform:i(a),previous:y.docs&&y.docs[a._id],affected:t,err:n},p),e,a,c,y.mutator,y.options)})})}}var f=this,p={context:f,_super:t,args:a},d=r.last(a),h=r.isFunction(d),v,g,_,m,y={},k=r.has(f,"_collection")?f._collection:f;if(r.isFunction(a[2])&&(d=a[2],a[2]={}),!u)try{if((o.before||o.after)&&(_=s.getFields(a[1]),v=s.getDocs.call(f,k,a[0],a[2]).fetch(),g=r.map(v,function(e){return e._id})),o.after&&(y.mutator=c.clone(a[1]),y.options=c.clone(a[2]),r.some(o.after,function(e){return e.options.fetchPrevious!==!1})&&s.extendOptions(n.hookOptions,{},"after","update").fetchPrevious!==!1&&(y.docs={},r.each(v,function(e){y.docs[e._id]=c.clone(e)}))),r.each(o.before,function(t){r.each(v,function(n){var o=t.aspect.call(r.extend({transform:i(n)},p),e,n,_,a[1],a[2]);o===!1&&(m=!0)})}),m)return!1}catch(C){if(h)return d.call(f,C);throw C}if(h)return a[a.length-1]=function(e,t){return l(t,e),d.apply(this,arguments)},t.apply(this,a);var O=t.apply(f,a);return l(O),O})}.call(this),function(){s.defineAdvice("remove",function(e,t,n,o,i,a,u){function l(t){u||r.each(o.after,function(n){r.each(_,function(o){n.aspect.call(r.extend({transform:i(o),err:t},p),e,o)})})}var f=this,p={context:f,_super:t,args:a},d=r.last(a),h=r.isFunction(d),v,g,_=[],m=r.has(f,"_collection")?f._collection:f;if(!u)try{if((o.before||o.after)&&(v=s.getDocs.call(f,m,a[0]).fetch()),o.after&&r.each(v,function(e){_.push(c.clone(e))}),r.each(o.before,function(t){r.each(v,function(n){var o=t.aspect.call(r.extend({transform:i(n)},p),e,n);o===!1&&(g=!0)})}),g)return!1}catch(y){if(h)return d.call(f,y);throw y}if(h)return a[a.length-1]=function(e){return l(e),d.apply(this,arguments)},t.apply(f,a);var k=t.apply(f,a);return l(),k})}.call(this),function(){s.defineAdvice("upsert",function(e,t,n,o,i,a,u){function l(t,n){if(!u){var c=s.getFields(a[1]),l=s.getDocs.call(p,C,{_id:{$in:_}},a[2]).fetch();r.each(o.update.after,function(o){r.each(l,function(a){o.aspect.call(r.extend({transform:i(a),previous:k.docs&&k.docs[a._id],affected:t,err:n},d),e,a,c,k.mutator,k.options)})})}}function f(t,n){if(!u){var c=s.getDocs.call(p,C,{_id:t},a[0],{}).fetch()[0],l=r.extend({transform:i(c),_id:t,err:n},d);r.each(o.insert.after,function(t){t.aspect.call(l,e,c)})}}var p=this,d={context:p,_super:t,args:a},h=r.last(a),v=r.isFunction(h),g,_,m,y,k={},C=r.has(p,"_collection")?p._collection:p;if(r.isFunction(a[2])&&(h=a[2],a[2]={}),!u&&(o.upsert.before&&(m=s.getFields(a[1]),g=s.getDocs.call(p,C,a[0],a[2]).fetch(),_=r.map(g,function(e){return e._id})),o.update.after&&r.some(o.update.after,function(e){return e.options.fetchPrevious!==!1})&&s.extendOptions(n.hookOptions,{},"after","update").fetchPrevious!==!1&&(k.mutator=c.clone(a[1]),k.options=c.clone(a[2]),k.docs={},r.each(g,function(e){k.docs[e._id]=c.clone(e)})),!u&&(r.each(o.upsert.before,function(t){var n=t.aspect.call(d,e,a[0],a[1],a[2]);n===!1&&(y=!0)}),y)))return!1;if(v)return a[a.length-1]=function(e,t){return t.insertedId?f(t.insertedId,e):l(t.numberAffected,e),s.hookedOp(function(){return h.call(this,e,t)})},s.directOp(function(){return t.apply(p,a)});var O=s.directOp(function(){return t.apply(p,a)});return O.insertedId?f(O.insertedId):l(O.numberAffected),O})}.call(this),function(){s.defineAdvice("find",function(e,t,n,o,c,i,a){function s(t){a||r.each(o.after,function(n){n.aspect.call(l,e,i[0],i[1],t)})}var u=this,l={context:u,_super:t,args:i},f,p;return!a&&(r.each(o.before,function(t){var n=t.aspect.call(l,e,i[0],i[1]);n===!1&&(p=!0)}),p)?!1:(f=t.apply(u,i),s(f),f)})}.call(this),function(){s.defineAdvice("findOne",function(e,t,n,o,c,i,a){function s(t){a||r.each(o.after,function(n){n.aspect.call(l,e,i[0],i[1],t)})}var u=this,l={context:u,_super:t,args:i},f,p;return!a&&(r.each(o.before,function(t){var n=t.aspect.call(l,e,i[0],i[1]);n===!1&&(p=!0)}),p)?!1:(f=t.apply(u,i),s(f),f)})}.call(this),function(){if(e.users){s.reassignPrototype(e.users);var n="undefined"!=typeof t&&"undefined"!=typeof t.Collection?t.Collection:e.Collection;s.extendCollectionInstance(e.users,n)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["matb33:collection-hooks"]={CollectionHooks:s}}();

!function(){var Meteor=Package.meteor.Meteor,DDP=Package["ddp-client"].DDP,$=Package.jquery.$,jQuery=Package.jquery.jQuery;(function(){(function(){var fabric=fabric||{version:"1.5.0"};"undefined"!=typeof exports&&(exports.fabric=fabric),"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=require("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),fabric.document.createWindow?fabric.window=fabric.document.createWindow():fabric.window=fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",function(){function t(t,e){this.__eventListeners[t]&&(e?fabric.util.removeFromArray(this.__eventListeners[t],e):this.__eventListeners[t].length=0)}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&&"object"==typeof arguments[0])for(var r in e)t.call(this,r,e[r]);else t.call(this,e,i);return this}}function r(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var r=0,s=i.length;s>r;r++)i[r].call(this,e||{});return this}}}fabric.Observable={observe:e,stopObserving:i,fire:r,on:e,off:i,trigger:r}}(),fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var t=0,e=arguments.length;e>t;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var r=this.getObjects();return i?r[e]=t:r.splice(e,0,t),this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),i=0,r=arguments.length;r>i;i++)t=e.indexOf(arguments[i]),-1!==t&&(e.splice(t,1),this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&this.renderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),r=i.length;r--;)t.call(e,i[r],r,i);return this},getObjects:function(t){return"undefined"==typeof t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},function(t){var e=Math.sqrt,i=Math.atan2,r=Math.PI/180;fabric.util={removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*r},radiansToDegrees:function(t){return t/r},rotatePoint:function(t,e,i){var r=Math.sin(i),s=Math.cos(i);t.subtractEquals(e);var n=t.x*s-t.y*r,o=t.x*r+t.y*s;return new fabric.Point(n,o).addEquals(e)},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},invertTransform:function(t){var e=t.slice(),i=1/(t[0]*t[3]-t[1]*t[2]);e=[i*t[3],-i*t[1],-i*t[2],i*t[0],0,0];var r=fabric.util.transformPoint({x:t[4],y:t[5]},e);return e[4]=-r.x,e[5]=-r.y,e},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),r=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return r*fabric.DPI/25.4;case"cm":return r*fabric.DPI/2.54;case"in":return r*fabric.DPI;case"pt":return r*fabric.DPI/72;case"pc":return r*fabric.DPI/72*12;case"em":return r*e;default:return r}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(e){if(!e)return fabric;for(var i=e.split("."),r=i.length,s=t||fabric.window,n=0;r>n;++n)s=s[i[n]];return s},loadImage:function(t,e,i,r){if(!t)return void(e&&e.call(i,t));var s=fabric.util.createImage();s.onload=function(){e&&e.call(i,s),s=s.onload=s.onerror=null},s.onerror=function(){fabric.log("Error loading "+s.src),e&&e.call(i,null,!0),s=s.onload=s.onerror=null},0!==t.indexOf("data")&&"undefined"!=typeof r&&(s.crossOrigin=r),s.src=t},enlivenObjects:function(t,e,i,r){function s(){++o===a&&e&&e(n)}t=t||[];var n=[],o=0,a=t.length;return a?void t.forEach(function(t,e){if(!t||!t.type)return void s();var o=fabric.util.getKlass(t.type,i);o.async?o.fromObject(t,function(i,o){o||(n[e]=i,r&&r(t,n[e])),s()}):(n[e]=o.fromObject(t),r&&r(t,n[e]),s())}):void(e&&e(n))},groupSVGElements:function(t,e,i){var r;return r=new fabric.PathGroup(t,e),"undefined"!=typeof i&&r.setSourcePath(i),r},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var r=0,s=i.length;s>r;r++)i[r]in t&&(e[i[r]]=t[i[r]])},drawDashedLine:function(t,r,s,n,o,a){var h=n-r,c=o-s,l=e(h*h+c*c),u=i(c,h),f=a.length,d=0,g=!0;for(t.save(),t.translate(r,s),t.moveTo(0,0),t.rotate(u),r=0;l>r;)r+=a[d++%f],r>l&&(r=l),t[g?"lineTo":"moveTo"](r,0),g=!g;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")},createAccessors:function(t){for(var e=t.prototype,i=e.stateProperties.length;i--;){var r=e.stateProperties[i],s=r.charAt(0).toUpperCase()+r.slice(1),n="set"+s,o="get"+s;e[o]||(e[o]=function(t){return new Function('return this.get("'+t+'")')}(r)),e[n]||(e[n]=function(t){return new Function("value",'return this.set("'+t+'", value)')}(r))}},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,r){r>0&&(e>r?e-=r:e=0,i>r?i-=r:i=0);for(var s=!0,n=t.getImageData(e,i,2*r||1,2*r||1),o=3,a=n.data.length;a>o;o+=4){var h=n.data[o];if(s=0>=h,s===!1)break}return n=null,s}}}("undefined"!=typeof exports?exports:this),function(){function t(t,r,n,o,h,c,l){var u=a.call(arguments);if(s[u])return s[u];var f=Math.PI,d=l*f/180,g=Math.sin(d),p=Math.cos(d),v=0,b=0;n=Math.abs(n),o=Math.abs(o);var m=-p*t*.5-g*r*.5,y=-p*r*.5+g*t*.5,_=n*n,x=o*o,C=y*y,S=m*m,w=_*x-_*C-x*S,O=0;if(0>w){var T=Math.sqrt(1-w/(_*x));n*=T,o*=T}else O=(h===c?-1:1)*Math.sqrt(w/(_*C+x*S));var k=O*n*y/o,j=-O*o*m/n,A=p*k-g*j+.5*t,P=g*k+p*j+.5*r,E=i(1,0,(m-k)/n,(y-j)/o),M=i((m-k)/n,(y-j)/o,(-m-k)/n,(-y-j)/o);0===c&&M>0?M-=2*f:1===c&&0>M&&(M+=2*f);for(var I=Math.ceil(Math.abs(M/f*2)),D=[],L=M/I,F=8/3*Math.sin(L/4)*Math.sin(L/4)/Math.sin(L/2),R=E+L,B=0;I>B;B++)D[B]=e(E,R,p,g,n,o,A,P,F,v,b),v=D[B][4],b=D[B][5],E=R,R+=L;return s[u]=D,D}function e(t,e,i,r,s,o,h,c,l,u,f){var d=a.call(arguments);if(n[d])return n[d];var g=Math.cos(t),p=Math.sin(t),v=Math.cos(e),b=Math.sin(e),m=i*s*v-r*o*b+h,y=r*s*v+i*o*b+c,_=u+l*(-i*s*p-r*o*g),x=f+l*(-r*s*p+i*o*g),C=m+l*(i*s*b+r*o*v),S=y+l*(r*s*b-i*o*v);return n[d]=[_,x,C,S,m,y],n[d]}function i(t,e,i,r){var s=Math.atan2(e,t),n=Math.atan2(r,i);return n>=s?n-s:2*Math.PI-(s-n)}function r(t,e,i,r,s,n,h,c){var l=a.call(arguments);if(o[l])return o[l];var u,f,d,g,p,v,b,m,y=Math.sqrt,_=Math.min,x=Math.max,C=Math.abs,S=[],w=[[],[]];f=6*t-12*i+6*s,u=-3*t+9*i-9*s+3*h,d=3*i-3*t;for(var O=0;2>O;++O)if(O>0&&(f=6*e-12*r+6*n,u=-3*e+9*r-9*n+3*c,d=3*r-3*e),C(u)<1e-12){if(C(f)<1e-12)continue;g=-d/f,g>0&&1>g&&S.push(g)}else b=f*f-4*d*u,0>b||(m=y(b),p=(-f+m)/(2*u),p>0&&1>p&&S.push(p),v=(-f-m)/(2*u),v>0&&1>v&&S.push(v));for(var T,k,j,A=S.length,P=A;A--;)g=S[A],j=1-g,T=j*j*j*t+3*j*j*g*i+3*j*g*g*s+g*g*g*h,w[0][A]=T,k=j*j*j*e+3*j*j*g*r+3*j*g*g*n+g*g*g*c,w[1][A]=k;w[0][P]=t,w[1][P]=e,w[0][P+1]=h,w[1][P+1]=c;var E=[{x:_.apply(null,w[0]),y:_.apply(null,w[1])},{x:x.apply(null,w[0]),y:x.apply(null,w[1])}];return o[l]=E,E}var s={},n={},o={},a=Array.prototype.join;fabric.util.drawArc=function(e,i,r,s){for(var n=s[0],o=s[1],a=s[2],h=s[3],c=s[4],l=s[5],u=s[6],f=[[],[],[],[]],d=t(l-i,u-r,n,o,h,c,a),g=0,p=d.length;p>g;g++)f[g][0]=d[g][0]+i,f[g][1]=d[g][1]+r,f[g][2]=d[g][2]+i,f[g][3]=d[g][3]+r,f[g][4]=d[g][4]+i,f[g][5]=d[g][5]+r,e.bezierCurveTo.apply(e,f[g])},fabric.util.getBoundsOfArc=function(e,i,s,n,o,a,h,c,l){for(var u=0,f=0,d=[],g=[],p=t(c-e,l-i,s,n,a,h,o),v=[[],[]],b=0,m=p.length;m>b;b++)d=r(u,f,p[b][0],p[b][1],p[b][2],p[b][3],p[b][4],p[b][5]),v[0].x=d[0].x+e,v[0].y=d[0].y+i,v[1].x=d[1].x+e,v[1].y=d[1].y+i,g.push(v[0]),g.push(v[1]),u=p[b][4],f=p[b][5];return g},fabric.util.getBoundsOfCurve=r}(),function(){function t(t,e){for(var i=s.call(arguments,2),r=[],n=0,o=t.length;o>n;n++)r[n]=i.length?t[n][e].apply(t[n],i):t[n][e].call(t[n]);return r}function e(t,e){return r(t,e,function(t,e){return t>=e})}function i(t,e){return r(t,e,function(t,e){return e>t})}function r(t,e,i){if(t&&0!==t.length){var r=t.length-1,s=e?t[r][e]:t[r];if(e)for(;r--;)i(t[r][e],s)&&(s=t[r][e]);else for(;r--;)i(t[r],s)&&(s=t[r]);return s}}var s=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==Number.POSITIVE_INFINITY&&r!==Number.NEGATIVE_INFINITY&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=i)return-1;for(var s=r>=0?r:Math.max(i-Math.abs(r),0);i>s;s++)if(s in e&&e[s]===t)return s;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,r=this.length>>>0;r>i;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],r=0,s=this.length>>>0;s>r;r++)r in this&&(i[r]=t.call(e,this[r],r,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,r=this.length>>>0;r>i;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,r=this.length>>>0;r>i;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,r=[],s=0,n=this.length>>>0;n>s;s++)s in this&&(i=this[s],t.call(e,i,s,this)&&r.push(i));return r}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,r=0;if(arguments.length>1)e=arguments[1];else for(;;){if(r in this){e=this[r++];break}if(++r>=i)throw new TypeError}for(;i>r;r++)r in this&&(e=t.call(null,e,this[r],r,this));return e}),fabric.util.array={invoke:t,min:i,max:e}}(),function(){function t(t,e){for(var i in e)t[i]=e[i];return t}function e(e){return t({},e)}fabric.util.object={extend:t,clone:e}}(),function(){function t(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function i(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:t,capitalize:e,escapeXml:i}}(),function(){var t=Array.prototype.slice,e=Function.prototype.apply,i=function(){};Function.prototype.bind||(Function.prototype.bind=function(r){var s,n=this,o=t.call(arguments,1);return s=o.length?function(){return e.call(n,this instanceof i?this:r,o.concat(t.call(arguments)))}:function(){return e.call(n,this instanceof i?this:r,arguments)},i.prototype=this.prototype,s.prototype=new i,s})}(),function(){function t(){}function e(t){var e=this.constructor.superclass.prototype[t];return arguments.length>1?e.apply(this,r.call(arguments,1)):e.call(this)}function i(){function i(){this.initialize.apply(this,arguments)}var n=null,a=r.call(arguments,0);"function"==typeof a[0]&&(n=a.shift()),i.superclass=n,i.subclasses=[],n&&(t.prototype=n.prototype,i.prototype=new t,n.subclasses.push(i));for(var h=0,c=a.length;c>h;h++)o(i,a[h],n);return i.prototype.initialize||(i.prototype.initialize=s),i.prototype.constructor=i,i.prototype.callSuper=e,i}var r=Array.prototype.slice,s=function(){},n=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),o=function(t,e,i){for(var r in e)r in t.prototype&&"function"==typeof t.prototype[r]&&(e[r]+"").indexOf("callSuper")>-1?t.prototype[r]=function(t){return function(){var r=this.constructor.superclass;this.constructor.superclass=i;var s=e[t].apply(this,arguments);return this.constructor.superclass=r,"initialize"!==t?s:void 0}}(r):t.prototype[r]=e[r],n&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=i}(),function(){function t(t){var e,i,r=Array.prototype.slice.call(arguments,1),s=r.length;for(i=0;s>i;i++)if(e=typeof t[r[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:i(t,e)}}function i(t,e){return function(i){e.call(o(t),i||fabric.window.event)}}function r(t,e){return function(i){if(p[t]&&p[t][e])for(var r=p[t][e],s=0,n=r.length;n>s;s++)r[s].call(this,i||fabric.window.event)}}function s(t,e){t||(t=fabric.window.event);var i=t.target||(typeof t.srcElement!==h?t.srcElement:null),r=fabric.util.getScrollLeftTop(i,e);return{x:v(t)+r.left,y:b(t)+r.top}}function n(t,e,i){var r="touchend"===t.type?"changedTouches":"touches";return t[r]&&t[r][0]?t[r][0][e]-(t[r][0][e]-t[r][0][i])||t[i]:t[i]}var o,a,h="unknown",c=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};o=function(e){return t[e]},a=function(e,i){t[e]=i}}();var l,u,f=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),d=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),g={},p={};f?(l=function(t,e,i){t.addEventListener(e,i,!1)},u=function(t,e,i){t.removeEventListener(e,i,!1)}):d?(l=function(t,i,r){var s=c(t);a(s,t),g[s]||(g[s]={}),g[s][i]||(g[s][i]=[]);var n=e(s,r);g[s][i].push(n),t.attachEvent("on"+i,n.wrappedHandler)},u=function(t,e,i){var r,s=c(t);if(g[s]&&g[s][e])for(var n=0,o=g[s][e].length;o>n;n++)r=g[s][e][n],r&&r.handler===i&&(t.detachEvent("on"+e,r.wrappedHandler),g[s][e][n]=null)}):(l=function(t,e,i){var s=c(t);if(p[s]||(p[s]={}),!p[s][e]){p[s][e]=[];var n=t["on"+e];n&&p[s][e].push(n),t["on"+e]=r(s,e)}p[s][e].push(i)},u=function(t,e,i){var r=c(t);if(p[r]&&p[r][e])for(var s=p[r][e],n=0,o=s.length;o>n;n++)s[n]===i&&s.splice(n,1)}),fabric.util.addListener=l,fabric.util.removeListener=u;var v=function(t){return typeof t.clientX!==h?t.clientX:0},b=function(t){return typeof t.clientY!==h?t.clientY:0};fabric.isTouchSupported&&(v=function(t){return n(t,"pageX","clientX")},b=function(t){return n(t,"pageY","clientY")}),fabric.util.getPointer=s,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function t(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?n(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var r in e)if("opacity"===r)n(t,e[r]);else{var s="float"===r||"cssFloat"===r?"undefined"==typeof i.styleFloat?"cssFloat":"styleFloat":r;i[s]=e[r]}return t}var e=fabric.document.createElement("div"),i="string"==typeof e.style.opacity,r="string"==typeof e.style.filter,s=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,n=function(t){return t};i?n=function(t,e){return t.style.opacity=e,t}:r&&(n=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),s.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(s,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=t}(),function(){function t(t){return"string"==typeof t?fabric.document.getElementById(t):t}function e(t,e){var i=fabric.document.createElement(t);for(var r in e)"class"===r?i.className=e[r]:"for"===r?i.htmlFor=e[r]:i.setAttribute(r,e[r]);return i}function i(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function r(t,i,r){return"string"==typeof i&&(i=e(i,r)),t.parentNode&&t.parentNode.replaceChild(i,t),i.appendChild(t),i}function s(t,e){var i,r,s=0,n=0,o=fabric.document.documentElement,a=fabric.document.body||{scrollLeft:0,scrollTop:0};for(r=t;t&&t.parentNode&&!i;)t=t.parentNode,1===t.nodeType&&"fixed"===fabric.util.getElementStyle(t,"position")&&(i=t),1===t.nodeType&&r!==e&&"absolute"===fabric.util.getElementStyle(t,"position")?(s=0,n=0):t===fabric.document?(s=a.scrollLeft||o.scrollLeft||0,n=a.scrollTop||o.scrollTop||0):(s+=t.scrollLeft||0,n+=t.scrollTop||0);return{left:s,top:n}}function n(t){var e,i,r=t&&t.ownerDocument,s={left:0,top:0},n={left:0,top:0},o={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return{left:0,top:0};for(var a in o)n[o[a]]+=parseInt(l(t,a),10)||0;return e=r.documentElement,"undefined"!=typeof t.getBoundingClientRect&&(s=t.getBoundingClientRect()),i=fabric.util.getScrollLeftTop(t,null),{left:s.left+i.left-(e.clientLeft||0)+n.left,top:s.top+i.top-(e.clientTop||0)+n.top}}var o,a=Array.prototype.slice,h=function(t){return a.call(t,0)};try{o=h(fabric.document.childNodes)instanceof Array}catch(c){}o||(h=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e});var l;l=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var i=fabric.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){function t(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),r?t.style[r]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t}function e(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=null),r?t.style[r]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}var i=fabric.document.documentElement.style,r="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=t,fabric.util.makeElementSelectable=e}(),function(){function t(t,e){var i=fabric.document.getElementsByTagName("head")[0],r=fabric.document.createElement("script"),s=!0;r.onload=r.onreadystatechange=function(t){if(s){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;s=!1,e(t||fabric.window.event),r=r.onload=r.onreadystatechange=null}},r.src=t,i.appendChild(r)}fabric.util.getScript=t}(),fabric.util.getById=t,fabric.util.toArray=h,fabric.util.makeElement=e,fabric.util.addClass=i,fabric.util.wrapElement=r,fabric.util.getScrollLeftTop=s,fabric.util.getElementOffset=n,fabric.util.getElementStyle=l}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function i(i,s){s||(s={});var n,o=s.method?s.method.toUpperCase():"GET",a=s.onComplete||function(){},h=r();return h.onreadystatechange=function(){4===h.readyState&&(a(h),h.onreadystatechange=e)},"GET"===o&&(n=null,"string"==typeof s.parameters&&(i=t(i,s.parameters))),h.open(o,i,!0),("POST"===o||"PUT"===o)&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(n),h}var r=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{var i=t[e]();if(i)return t[e]}catch(r){}}();fabric.util.request=i}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){"undefined"!=typeof console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(t){e(function(i){t||(t={});var r,s=i||+new Date,n=t.duration||500,o=s+n,a=t.onChange||function(){},h=t.abort||function(){return!1},c=t.easing||function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},l="startValue"in t?t.startValue:0,u="endValue"in t?t.endValue:100,f=t.byValue||u-l;t.onStart&&t.onStart(),function d(i){r=i||+new Date;var u=r>o?n:r-s;return h()?void(t.onComplete&&t.onComplete()):(a(c(u,l,f,n)),r>o?void(t.onComplete&&t.onComplete()):void e(d))}(s)})}function e(){return i.apply(fabric.window,arguments)}var i=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};fabric.util.animate=t,fabric.util.requestAnimFrame=e}(),function(){function t(t,e,i,r){return t<Math.abs(e)?(t=e,r=i/4):r=i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:r}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin(2*(e*i-t.s)*Math.PI/t.p)}function i(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e}function r(t,e,i,r){return t/=r/2,1>t?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function s(t,e,i,r){return i*(t/=r)*t*t*t+e}function n(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e}function o(t,e,i,r){return t/=r/2,1>t?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}function a(t,e,i,r){return i*(t/=r)*t*t*t*t+e}function h(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e}function c(t,e,i,r){return t/=r/2,1>t?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}function l(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e}function u(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e}function f(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e}function d(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e}function g(t,e,i,r){return t===r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e}function p(t,e,i,r){return 0===t?e:t===r?e+i:(t/=r/2,1>t?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e)}function v(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e}function b(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e}function m(t,e,i,r){return t/=r/2,1>t?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function y(i,r,s,n){var o=1.70158,a=0,h=s;if(0===i)return r;if(i/=n,1===i)return r+s;a||(a=.3*n);var c=t(h,s,a,o);return-e(c,i,n)+r}function _(e,i,r,s){var n=1.70158,o=0,a=r;if(0===e)return i;if(e/=s,1===e)return i+r;o||(o=.3*s);var h=t(a,r,o,n);return h.a*Math.pow(2,-10*e)*Math.sin(2*(e*s-h.s)*Math.PI/h.p)+h.c+i}function x(i,r,s,n){var o=1.70158,a=0,h=s;if(0===i)return r;if(i/=n/2,2===i)return r+s;a||(a=.3*n*1.5);var c=t(h,s,a,o);return 1>i?-.5*e(c,i,n)+r:c.a*Math.pow(2,-10*(i-=1))*Math.sin(2*(i*n-c.s)*Math.PI/c.p)*.5+c.c+r}function C(t,e,i,r,s){return void 0===s&&(s=1.70158),i*(t/=r)*t*((s+1)*t-s)+e}function S(t,e,i,r,s){return void 0===s&&(s=1.70158),i*((t=t/r-1)*t*((s+1)*t+s)+1)+e}function w(t,e,i,r,s){return void 0===s&&(s=1.70158),t/=r/2,1>t?i/2*t*t*(((s*=1.525)+1)*t-s)+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e}function O(t,e,i,r){return i-T(r-t,0,i,r)+e}function T(t,e,i,r){return(t/=r)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function k(t,e,i,r){return r/2>t?.5*O(2*t,0,i,r)+e:.5*T(2*t-r,0,i,r)+.5*i+e}fabric.util.ease={easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return t/=r/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:i,easeInOutCubic:r,easeInQuart:s,easeOutQuart:n,easeInOutQuart:o,easeInQuint:a,easeOutQuint:h,easeInOutQuint:c,easeInSine:l,easeOutSine:u,easeInOutSine:f,easeInExpo:d,easeOutExpo:g,easeInOutExpo:p,easeInCirc:v,easeOutCirc:b,easeInOutCirc:m,easeInElastic:y,easeOutElastic:_,easeInOutElastic:x,easeInBack:C,easeOutBack:S,easeInOutBack:w,easeInBounce:O,easeOutBounce:T,easeInOutBounce:k}}(),function(t){"use strict";function e(t){return t in C?C[t]:t}function i(t,e,i,r){var s,n="[object Array]"===Object.prototype.toString.call(e);return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e=e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=i&&i.transformMatrix?x(i.transformMatrix,p.parseTransformAttribute(e)):p.parseTransformAttribute(e):"visible"===t?(e="none"===e||"hidden"===e?!1:!0,i&&i.visible===!1&&(e=!1)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":s=n?e.map(_):_(e,r):e="",!n&&isNaN(s)?e:s}function r(t){for(var e in S)if(t[e]&&"undefined"!=typeof t[S[e]]&&0!==t[e].indexOf("url(")){var i=new p.Color(t[e]);t[e]=i.setAlpha(y(i.getAlpha()*t[S[e]],2)).toRgba()}return t}function s(t,r){var s,n;t.replace(/;$/,"").split(";").forEach(function(t){var o=t.split(":");s=e(o[0].trim().toLowerCase()),n=i(s,o[1].trim()),r[s]=n})}function n(t,r){var s,n;for(var o in t)"undefined"!=typeof t[o]&&(s=e(o.toLowerCase()),n=i(s,t[o]),r[s]=n)}function o(t,e){var i={};for(var r in p.cssRules[e])if(a(t,r.split(" ")))for(var s in p.cssRules[e][r])i[s]=p.cssRules[e][r][s];return i}function a(t,e){var i,r=!0;return i=c(t,e.pop()),i&&e.length&&(r=h(t,e)),i&&r&&0===e.length}function h(t,e){for(var i,r=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)r&&(i=e.pop()),t=t.parentNode,r=c(t,i);return 0===e.length}function c(t,e){var i,r=t.nodeName,s=t.getAttribute("class"),n=t.getAttribute("id");if(i=new RegExp("^"+r,"i"),e=e.replace(i,""),n&&e.length&&(i=new RegExp("#"+n+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),s&&e.length){s=s.split(" ");for(var o=s.length;o--;)i=new RegExp("\\."+s[o]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")}return 0===e.length}function l(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var r,s,n,o=t.getElementsByTagName("*");for(s=0;s<o.length;s++)if(r=o[s],n===r.getAttribute("id"))return r}function u(t){for(var e=t.getElementsByTagName("use"),i=0;e.length&&i<e.length;){for(var r,s=e[i],n=s.getAttribute("xlink:href").substr(1),o=s.getAttribute("x")||0,a=s.getAttribute("y")||0,h=l(t,n).cloneNode(!0),c=(h.getAttribute("transform")||"")+" translate("+o+", "+a+")",u=e.length,f=0,d=s.attributes,g=d.length;g>f;f++){var p=d.item(f);"x"!==p.nodeName&&"y"!==p.nodeName&&"xlink:href"!==p.nodeName&&("transform"===p.nodeName?c=p.nodeValue+" "+c:h.setAttribute(p.nodeName,p.nodeValue))}h.setAttribute("transform",c),h.setAttribute("instantiated_by_use","1"),h.removeAttribute("id"),r=s.parentNode,r.replaceChild(h,s),e.length===u&&i++}}function f(t,e,i){var r,s,n,o,a=t.getAttribute("viewBox"),h=1,c=1,l=0,u=0;if(a&&(a=a.match(w))&&(l=-parseFloat(a[1]),u=-parseFloat(a[2]),r=parseFloat(a[3]),s=parseFloat(a[4]),e&&e!==r&&(h=e/r),i&&i!==s&&(c=i/s),c=h=h>c?c:h,1!==h||1!==c||0!==l||0!==u)){if(n=" matrix("+h+" 0 0 "+c+" "+l*h+" "+u*c+") ","svg"===t.tagName){for(o=t.ownerDocument.createElement("g");null!=t.firstChild;)o.appendChild(t.firstChild);t.appendChild(o)}else o=t,n=o.getAttribute("transform")+n;o.setAttribute("transform",n)}}function d(t){var e=t.objects,i=t.options;return e=e.map(function(t){return p[b(t.type)].fromObject(t)}),{objects:e,options:i}}function g(t,e,i){e[i]&&e[i].toSVG&&t.push('<pattern x="0" y="0" id="',i,'Pattern" ','width="',e[i].source.width,'" height="',e[i].source.height,'" patternUnits="userSpaceOnUse">','<image x="0" y="0" ','width="',e[i].source.width,'" height="',e[i].source.height,'" xlink:href="',e[i].source.src,'"></image></pattern>')}var p=t.fabric||(t.fabric={}),v=p.util.object.extend,b=p.util.string.capitalize,m=p.util.object.clone,y=p.util.toFixed,_=p.util.parseUnit,x=p.util.multiplyTransformMatrices,C={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX"},S={stroke:"strokeOpacity",fill:"fillOpacity"};p.cssRules={},p.gradientDefs={},p.parseTransformAttribute=function(){function t(t,e){var i=e[0];t[0]=Math.cos(i),t[1]=Math.sin(i),t[2]=-Math.sin(i),t[3]=Math.cos(i)}function e(t,e){var i=e[0],r=2===e.length?e[1]:e[0];t[0]=i,t[3]=r}function i(t,e){t[2]=Math.tan(p.util.degreesToRadians(e[0]))}function r(t,e){t[1]=Math.tan(p.util.degreesToRadians(e[0]))}function s(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var n=[1,0,0,1,0,0],o=p.reNum,a="(?:\\s+,?\\s*|,\\s*)",h="(?:(skewX)\\s*\\(\\s*("+o+")\\s*\\))",c="(?:(skewY)\\s*\\(\\s*("+o+")\\s*\\))",l="(?:(rotate)\\s*\\(\\s*("+o+")(?:"+a+"("+o+")"+a+"("+o+"))?\\s*\\))",u="(?:(scale)\\s*\\(\\s*("+o+")(?:"+a+"("+o+"))?\\s*\\))",f="(?:(translate)\\s*\\(\\s*("+o+")(?:"+a+"("+o+"))?\\s*\\))",d="(?:(matrix)\\s*\\(\\s*("+o+")"+a+"("+o+")"+a+"("+o+")"+a+"("+o+")"+a+"("+o+")"+a+"("+o+")\\s*\\))",g="(?:"+d+"|"+f+"|"+u+"|"+l+"|"+h+"|"+c+")",v="(?:"+g+"(?:"+a+g+")*)",b="^\\s*(?:"+v+"?)\\s*$",m=new RegExp(b),y=new RegExp(g,"g");return function(o){var a=n.concat(),h=[];if(!o||o&&!m.test(o))return a;o.replace(y,function(o){var c=new RegExp(g).exec(o).filter(function(t){return""!==t&&null!=t}),l=c[1],u=c.slice(2).map(parseFloat);switch(l){case"translate":s(a,u);break;case"rotate":u[0]=p.util.degreesToRadians(u[0]),t(a,u);break;case"scale":e(a,u);break;case"skewX":i(a,u);break;case"skewY":r(a,u);break;case"matrix":a=u}h.push(a.concat()),a=n.concat()});for(var c=h[0];h.length>1;)h.shift(),c=p.util.multiplyTransformMatrices(c,h[0]);return c}}();var w=new RegExp("^\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*$");p.parseSVGDocument=function(){function t(t,e){for(;t&&(t=t.parentNode);)if(e.test(t.nodeName)&&!t.getAttribute("instantiated_by_use"))return!0;return!1}var e=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,i=/^(symbol|image|marker|pattern|view)$/;return function(r,s,n){if(r){u(r);var o,a,h=new Date,c=p.Object.__uid++,l=!1;if(r.getAttribute("width")&&"100%"!==r.getAttribute("width")&&(o=_(r.getAttribute("width"))),r.getAttribute("height")&&"100%"!==r.getAttribute("height")&&(a=_(r.getAttribute("height"))),!o||!a){var d=r.getAttribute("viewBox");d&&(d=d.match(w))?(o=parseFloat(d[3]),a=parseFloat(d[4])):l=!0}f(r,o,a);var g=p.util.toArray(r.getElementsByTagName("*"));if(0===g.length&&p.isLikelyNode){g=r.selectNodes('//*[name(.)!="svg"]');for(var v=[],b=0,y=g.length;y>b;b++)v[b]=g[b];g=v}var x=g.filter(function(r){return i.test(r.tagName)&&f(r,0,0),e.test(r.tagName)&&!t(r,/^(?:pattern|defs|symbol|metadata)$/)});if(!x||x&&!x.length)return void(s&&s([],{}));var C={width:o,height:a,svgUid:c,toBeParsed:l};p.gradientDefs[c]=p.getGradientDefs(r),p.cssRules[c]=p.getCSSRules(r),p.parseElements(x,function(t){p.documentParsingTime=new Date-h,s&&s(t,C)},m(C),n)}}}();var O={has:function(t,e){e(!1)},get:function(){},set:function(){}},T=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+p.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+p.reNum+"))?\\s+(.*)");v(p,{parseFontDeclaration:function(t,e){
var i=t.match(T);if(i){var r=i[1],s=i[3],n=i[4],o=i[5],a=i[6];r&&(e.fontStyle=r),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),n&&(e.fontSize=_(n)),a&&(e.fontFamily=a),o&&(e.lineHeight="normal"===o?1:o)}},getGradientDefs:function(t){var e,i,r,s,n=t.getElementsByTagName("linearGradient"),o=t.getElementsByTagName("radialGradient"),a=0,h=[],c={},l={};for(h.length=n.length+o.length,i=n.length;i--;)h[a++]=n[i];for(i=o.length;i--;)h[a++]=o[i];for(;a--;)e=h[a],s=e.getAttribute("xlink:href"),r=e.getAttribute("id"),s&&(l[r]=s.substr(1)),c[r]=e;for(r in l){var u=c[l[r]].cloneNode(!0);for(e=c[r];u.firstChild;)e.appendChild(u.firstChild)}return c},parseAttributes:function(t,s,n){if(t){var a,h,c={};"undefined"==typeof n&&(n=t.getAttribute("svgUid")),t.parentNode&&/^symbol|[g|a]$/i.test(t.parentNode.nodeName)&&(c=p.parseAttributes(t.parentNode,s,n)),h=c&&c.fontSize||t.getAttribute("font-size")||p.Text.DEFAULT_SVG_FONT_SIZE;var l=s.reduce(function(r,s){return a=t.getAttribute(s),a&&(s=e(s),a=i(s,a,c,h),r[s]=a),r},{});return l=v(l,v(o(t,n),p.parseStyleAttribute(t))),l.font&&p.parseFontDeclaration(l.font,l),r(v(c,l))}},parseElements:function(t,e,i,r){new p.ElementsParser(t,e,i,r).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"==typeof i?s(i,e):n(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,i,r=[];for(e=0,i=t.length;i>e;e+=2)r.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return r},getCSSRules:function(t){for(var r,s=t.getElementsByTagName("style"),n={},o=0,a=s.length;a>o;o++){var h=s[o].textContent;h=h.replace(/\/\*[\s\S]*?\*\//g,""),""!==h.trim()&&(r=h.match(/[^{]*\{[\s\S]*?\}/g),r=r.map(function(t){return t.trim()}),r.forEach(function(t){for(var r=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),s={},o=r[2].trim(),a=o.replace(/;$/,"").split(/\s*;\s*/),h=0,c=a.length;c>h;h++){var l=a[h].split(/\s*:\s*/),u=e(l[0]),f=i(u,l[1],l[0]);s[u]=f}t=r[1],t.split(",").forEach(function(t){t=t.replace(/^svg/i,"").trim(),""!==t&&(n[t]=p.util.object.clone(s))})}))}return n},loadSVGFromURL:function(t,e,i){function r(r){var s=r.responseXML;s&&!s.documentElement&&p.window.ActiveXObject&&r.responseText&&(s=new ActiveXObject("Microsoft.XMLDOM"),s.async="false",s.loadXML(r.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),s&&s.documentElement&&p.parseSVGDocument(s.documentElement,function(i,r){O.set(t,{objects:p.util.array.invoke(i,"toObject"),options:r}),e(i,r)},i)}t=t.replace(/^\n\s*/,"").trim(),O.has(t,function(i){i?O.get(t,function(t){var i=d(t);e(i.objects,i.options)}):new p.util.request(t,{method:"get",onComplete:r})})},loadSVGFromString:function(t,e,i){t=t.trim();var r;if("undefined"!=typeof DOMParser){var s=new DOMParser;s&&s.parseFromString&&(r=s.parseFromString(t,"text/xml"))}else p.window.ActiveXObject&&(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));p.parseSVGDocument(r.documentElement,function(t,i){e(t,i)},i)},createSVGFontFacesMarkup:function(t){for(var e="",i=0,r=t.length;r>i;i++)"text"===t[i].type&&t[i].path&&(e+=["@font-face {","font-family: ",t[i].fontFamily,"; ","src: url('",t[i].path,"')","}"].join(""));return e&&(e=['<style type="text/css">',"<![CDATA[",e,"]]>","</style>"].join("")),e},createSVGRefElementsMarkup:function(t){var e=[];return g(e,t,"backgroundColor"),g(e,t,"overlayColor"),e.join("")}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,i,r){this.elements=t,this.callback=e,this.options=i,this.reviver=r,this.svgUid=i&&i.svgUid||0},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;e>t;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var i=fabric[fabric.util.string.capitalize(t.tagName)];if(i&&i.fromElement)try{this._createObject(i,t,e)}catch(r){fabric.log(r)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,i){if(t.async)t.fromElement(e,this.createCallback(i,e),this.options);else{var r=t.fromElement(e,this.options);this.resolveGradient(r,"fill"),this.resolveGradient(r,"stroke"),this.reviver&&this.reviver(e,r),this.instances[i]=r,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(t,e){var i=this;return function(r){i.resolveGradient(r,"fill"),i.resolveGradient(r,"stroke"),i.reviver&&i.reviver(e,r),i.instances[t]=r,i.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var i=t.get(e);if(/^url\(/.test(i)){var r=i.slice(5,i.length-1);fabric.gradientDefs[this.svgUid][r]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][r],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){"use strict";function e(t,e){this.x=t,this.y=e}var i=t.fabric||(t.fabric={});return i.Point?void i.warn("fabric.Point is already defined"):(i.Point=e,void(e.prototype={constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,i){return new e(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return new e(this.x+(t.x-this.x)/2,this.y+(t.y-this.y)/2)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){this.x=t,this.y=e},setFromPoint:function(t){this.x=t.x,this.y=t.y},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){this.status=t,this.points=[]}var i=t.fabric||(t.fabric={});return i.Intersection?void i.warn("fabric.Intersection is already defined"):(i.Intersection=e,i.Intersection.prototype={appendPoint:function(t){this.points.push(t)},appendPoints:function(t){this.points=this.points.concat(t)}},i.Intersection.intersectLineLine=function(t,r,s,n){var o,a=(n.x-s.x)*(t.y-s.y)-(n.y-s.y)*(t.x-s.x),h=(r.x-t.x)*(t.y-s.y)-(r.y-t.y)*(t.x-s.x),c=(n.y-s.y)*(r.x-t.x)-(n.x-s.x)*(r.y-t.y);if(0!==c){var l=a/c,u=h/c;l>=0&&1>=l&&u>=0&&1>=u?(o=new e("Intersection"),o.points.push(new i.Point(t.x+l*(r.x-t.x),t.y+l*(r.y-t.y)))):o=new e}else o=new e(0===a||0===h?"Coincident":"Parallel");return o},i.Intersection.intersectLinePolygon=function(t,i,r){for(var s=new e,n=r.length,o=0;n>o;o++){var a=r[o],h=r[(o+1)%n],c=e.intersectLineLine(t,i,a,h);s.appendPoints(c.points)}return s.points.length>0&&(s.status="Intersection"),s},i.Intersection.intersectPolygonPolygon=function(t,i){for(var r=new e,s=t.length,n=0;s>n;n++){var o=t[n],a=t[(n+1)%s],h=e.intersectLinePolygon(o,a,i);r.appendPoints(h.points)}return r.points.length>0&&(r.status="Intersection"),r},void(i.Intersection.intersectPolygonRectangle=function(t,r,s){var n=r.min(s),o=r.max(s),a=new i.Point(o.x,n.y),h=new i.Point(n.x,o.y),c=e.intersectLinePolygon(n,a,t),l=e.intersectLinePolygon(a,o,t),u=e.intersectLinePolygon(o,h,t),f=e.intersectLinePolygon(h,n,t),d=new e;return d.appendPoints(c.points),d.appendPoints(l.points),d.appendPoints(u.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t}var r=t.fabric||(t.fabric={});return r.Color?void r.warn("fabric.Color is already defined."):(r.Color=e,r.Color.prototype={_tryParsingColor:function(t){var i;return t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t?void this.setSource([255,255,255,0]):(i=e.sourceFromHex(t),i||(i=e.sourceFromRgb(t)),i||(i=e.sourceFromHsl(t)),void(i&&this.setSource(i)))},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var s,n,o,a=r.util.array.max([t,e,i]),h=r.util.array.min([t,e,i]);if(o=(a+h)/2,a===h)s=n=0;else{var c=a-h;switch(n=o>.5?c/(2-a-h):c/(a+h),a){case t:s=(e-i)/c+(i>e?6:0);break;case e:s=(i-t)/c+2;break;case i:s=(t-e)/c+4}s/=6}return[Math.round(360*s),Math.round(100*n),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,r=this.getSource();return t=r[0].toString(16),t=1===t.length?"0"+t:t,e=r[1].toString(16),e=1===e.length?"0"+e:e,i=r[2].toString(16),i=1===i.length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),r=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,r]),this},overlayWith:function(t){t instanceof e||(t=new e(t));for(var i=[],r=this.getAlpha(),s=.5,n=this.getSource(),o=t.getSource(),a=0;3>a;a++)i.push(Math.round(n[a]*(1-s)+o[a]*s));return i[3]=r,this.setSource(i),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,r.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},r.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},r.Color.sourceFromRgb=function(t){var i=t.match(e.reRGBa);if(i){var r=parseInt(i[1],10)/(/%$/.test(i[1])?100:1)*(/%$/.test(i[1])?255:1),s=parseInt(i[2],10)/(/%$/.test(i[2])?100:1)*(/%$/.test(i[2])?255:1),n=parseInt(i[3],10)/(/%$/.test(i[3])?100:1)*(/%$/.test(i[3])?255:1);return[parseInt(r,10),parseInt(s,10),parseInt(n,10),i[4]?parseFloat(i[4]):1]}},r.Color.fromRgba=e.fromRgb,r.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},r.Color.sourceFromHsl=function(t){var r=t.match(e.reHSLa);if(r){var s,n,o,a=(parseFloat(r[1])%360+360)%360/360,h=parseFloat(r[2])/(/%$/.test(r[2])?100:1),c=parseFloat(r[3])/(/%$/.test(r[3])?100:1);if(0===h)s=n=o=c;else{var l=.5>=c?c*(h+1):c+h-c*h,u=2*c-l;s=i(u,l,a+1/3),n=i(u,l,a),o=i(u,l,a-1/3)}return[Math.round(255*s),Math.round(255*n),Math.round(255*o),r[4]?parseFloat(r[4]):1]}},r.Color.fromHsla=e.fromHsl,r.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},r.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var i=t.slice(t.indexOf("#")+1),r=3===i.length,s=r?i.charAt(0)+i.charAt(0):i.substring(0,2),n=r?i.charAt(1)+i.charAt(1):i.substring(2,4),o=r?i.charAt(2)+i.charAt(2):i.substring(4,6);return[parseInt(s,16),parseInt(n,16),parseInt(o,16),1]}},void(r.Color.fromSource=function(t){var i=new e;return i.setSource(t),i}))}("undefined"!=typeof exports?exports:this),function(){function t(t){var e,i,r,s=t.getAttribute("style"),n=t.getAttribute("offset");if(n=parseFloat(n)/(/%$/.test(n)?100:1),n=0>n?0:n>1?1:n,s){var o=s.split(/\s*;\s*/);""===o[o.length-1]&&o.pop();for(var a=o.length;a--;){var h=o[a].split(/\s*:\s*/),c=h[0].trim(),l=h[1].trim();"stop-color"===c?e=l:"stop-opacity"===c&&(r=l)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=t.getAttribute("stop-opacity")),e=new fabric.Color(e),i=e.getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=i,{offset:n,color:e.toRgb(),opacity:r}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function i(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}function r(t,e,i){var r,s=0,n=1,o="";for(var a in e)r=parseFloat(e[a],10),n="string"==typeof e[a]&&/^\d+%$/.test(e[a])?.01:1,"x1"===a||"x2"===a||"r2"===a?(n*="objectBoundingBox"===i?t.width:1,s="objectBoundingBox"===i?t.left||0:0):("y1"===a||"y2"===a)&&(n*="objectBoundingBox"===i?t.height:1,s="objectBoundingBox"===i?t.top||0:0),e[a]=r*n+s;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var h=t.ry/t.rx;o=" scale(1, "+h+")",e.y1&&(e.y1/=h),e.y2&&(e.y2/=h)}return o}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e,i,r=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var s in r)"x1"===s||"x2"===s||"r2"===s?r[s]+=this.offsetX-t.width/2:("y1"===s||"y2"===s)&&(r[s]+=this.offsetY-t.height/2);i='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(i+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",i,' x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",i,' cx="',r.x2,'" cy="',r.y2,'" r="',r.r2,'" fx="',r.x1,'" fy="',r.y1,'">\n']);for(var n=0;n<this.colorStops.length;n++)e.push("<stop ",'offset="',100*this.colorStops[n].offset+"%",'" style="stop-color:',this.colorStops[n].color,null!=this.colorStops[n].opacity?";stop-opacity: "+this.colorStops[n].opacity:";",'"/>\n');return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var i,r,s=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(r in s)"x1"===r||"x2"===r?s[r]+=-this.offsetX+e.width/2:("y1"===r||"y2"===r)&&(s[r]+=-this.offsetY+e.height/2);"linear"===this.type?i=t.createLinearGradient(s.x1,s.y1,s.x2,s.y2):"radial"===this.type&&(i=t.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2));for(var n=0,o=this.colorStops.length;o>n;n++){var a=this.colorStops[n].color,h=this.colorStops[n].opacity,c=this.colorStops[n].offset;"undefined"!=typeof h&&(a=new fabric.Color(a).setAlpha(h).toRgba()),i.addColorStop(parseFloat(c),a)}return i}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(s,n){var o,a=s.getElementsByTagName("stop"),h="linearGradient"===s.nodeName?"linear":"radial",c=s.getAttribute("gradientUnits")||"objectBoundingBox",l=s.getAttribute("gradientTransform"),u=[],f={};"linear"===h?f=e(s):"radial"===h&&(f=i(s));for(var d=a.length;d--;)u.push(t(a[d]));o=r(n,f,c);var g=new fabric.Gradient({type:h,coords:f,colorStops:u,offsetX:-n.left,offsetY:-n.top});return(l||""!==o)&&(g.gradientTransform=fabric.parseTransformAttribute((l||"")+o)),g},forObject:function(t,e){return e||(e={}),r(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t){if(t||(t={}),this.id=fabric.Object.__uid++,t.source)if("string"==typeof t.source)if("undefined"!=typeof fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source));else{var e=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){e.source=t})}else this.source=t.source;t.repeat&&(this.repeat=t.repeat),t.offsetX&&(this.offsetX=t.offsetX),t.offsetY&&(this.offsetY=t.offsetY)},toObject:function(){var t;return"function"==typeof this.source?t=String(this.source):"string"==typeof this.source.src&&(t=this.source.src),{source:t,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.getWidth(),r=e.height/t.getHeight(),s=this.offsetX/t.getWidth(),n=this.offsetY/t.getHeight(),o="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(r=1),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(i=1),e.src?o=e.src:e.toDataURL&&(o=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+s+'" y="'+n+'" width="'+i+'" height="'+r+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+o+'"></image>\n</pattern>\n'},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if("undefined"!=typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;return e.Shadow?void e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var i in t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),r=e.Shadow.reOffsetsAndBlur.exec(i)||[],s=i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:s.trim(),offsetX:parseInt(r[1],10)||0,offsetY:parseInt(r[2],10)||0,blur:parseInt(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e="SourceAlpha",r=40,s=40;return!t||t.fill!==this.color&&t.stroke!==this.color||(e="SourceGraphic"),t.width&&t.height&&(r=100*i(Math.abs(this.offsetX/t.getWidth()),2)+20,s=100*i(Math.abs(this.offsetY/t.getHeight()),2)+20),'<filter id="SVGID_'+this.id+'" y="-'+s+'%" height="'+(100+2*s)+'%" x="-'+r+'%" width="'+(100+2*r)+'%" >\n	<feGaussianBlur in="'+e+'" stdDeviation="'+i(this.blur?this.blur/2:0,3)+'" result="blurOut"></feGaussianBlur>\n	<feColorMatrix result="matrixOut" in="blurOut" type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.30 0" ></feColorMatrix >\n	<feOffset dx="'+this.offsetX+'" dy="'+this.offsetY+'"></feOffset>\n	<feMerge>\n		<feMergeNode></feMergeNode>\n		<feMergeNode in="SourceGraphic"></feMergeNode>\n	</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY};var t={},i=e.Shadow.prototype;return this.color!==i.color&&(t.color=this.color),this.blur!==i.blur&&(t.blur=this.blur),this.offsetX!==i.offsetX&&(t.offsetX=this.offsetX),this.offsetY!==i.offsetY&&(t.offsetY=this.offsetY),t}}),void(e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/))}("undefined"!=typeof exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var t=fabric.util.object.extend,e=fabric.util.getElementOffset,i=fabric.util.removeFromArray,r=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass({initialize:function(t,e){e||(e={}),this._initStatic(t,e),fabric.StaticCanvas.activeInstance=this},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,preserveObjectStacking:!1,viewportTransform:[1,0,0,1,0,0],onBeforeScaleRotate:function(){},_initStatic:function(t,e){this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),e.overlayImage&&this.setOverlayImage(e.overlayImage,this.renderAll.bind(this)),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,this.renderAll.bind(this)),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,this.renderAll.bind(this)),e.overlayColor&&this.setOverlayColor(e.overlayColor,this.renderAll.bind(this)),this.calcOffset()},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.webkitImageSmoothingEnabled=this.imageSmoothingEnabled,t.mozImageSmoothingEnabled=this.imageSmoothingEnabled,t.msImageSmoothingEnabled=this.imageSmoothingEnabled,t.oImageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,i,r){return"string"==typeof e?fabric.util.loadImage(e,function(e){this[t]=new fabric.Image(e,r),i&&i()},this,r&&r.crossOrigin):(r&&e.setOptions(r),this[t]=e,i&&i()),this},__setBgOverlayColor:function(t,e,i){if(e&&e.source){var r=this;fabric.util.loadImage(e.source,function(s){r[t]=new fabric.Pattern({source:s,repeat:e.repeat,offsetX:e.offsetX,offsetY:e.offsetY}),i&&i()})}else this[t]=e,i&&i();return this},_createCanvasElement:function(){var t=fabric.document.createElement("canvas");if(t.style||(t.style={}),!t)throw r;return this._initCanvasElement(t),t},_initCanvasElement:function(t){if(fabric.util.createCanvasElement(t),"undefined"==typeof t.getContext)throw r},_initOptions:function(t){for(var e in t)this[e]=t[e];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;e=e||{};for(var r in t)i=t[r],e.cssOnly||(this._setBackstoreDimension(r,t[r]),i+="px"),e.backstoreOnly||this._setCssDimension(r,i);return e.cssOnly||this.renderAll(),this.calcOffset(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(t){var e=this.getActiveGroup();this.viewportTransform=t,this.renderAll();for(var i=0,r=this._objects.length;r>i;i++)this._objects[i].setCoords();return e&&e.setCoords(),this},zoomToPoint:function(t,e){var i=t;t=fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform)),this.viewportTransform[0]=e,this.viewportTransform[3]=e;var r=fabric.util.transformPoint(t,this.viewportTransform);this.viewportTransform[4]+=i.x-r.x,this.viewportTransform[5]+=i.y-r.y,this.renderAll();for(var s=0,n=this._objects.length;n>s;s++)this._objects[s].setCoords();return this},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){this.viewportTransform[4]=-t.x,this.viewportTransform[5]=-t.y,this.renderAll();for(var e=0,i=this._objects.length;i>e;e++)this._objects[e].setCoords();return this},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(t,e){if(e){t.save();var i=this.viewportTransform;t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._shouldRenderObject(e)&&e.render(t),t.restore(),this.controlsAboveOverlay||e._renderControls(t)}},_shouldRenderObject:function(t){return t?t!==this.getActiveGroup()||!this.preserveObjectStacking:!1},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared")),this.fire("object:removed",{target:t}),t.fire("removed")},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&&this.discardActiveGroup(),this.discardActiveObject&&this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&&this.clearContext(this.contextTop),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(t){var e=this[t===!0&&this.interactive?"contextTop":"contextContainer"],i=this.getActiveGroup();return this.contextTop&&this.selection&&!this._groupSelector&&this.clearContext(this.contextTop),t||this.clearContext(e),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,e),this._renderBackground(e),this._renderObjects(e,i),this._renderActiveGroup(e,i),this.clipTo&&e.restore(),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render"),this},_renderObjects:function(t,e){var i,r;if(!e||this.preserveObjectStacking)for(i=0,r=this._objects.length;r>i;++i)this._draw(t,this._objects[i]);else for(i=0,r=this._objects.length;r>i;++i)this._objects[i]&&!e.contains(this._objects[i])&&this._draw(t,this._objects[i])},_renderActiveGroup:function(t,e){if(e){var i=[];this.forEachObject(function(t){e.contains(t)&&i.push(t)}),e._set("_objects",i.reverse()),this._draw(t,e)}},_renderBackground:function(t){this.backgroundColor&&(t.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(t):this.backgroundColor,t.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height)),this.backgroundImage&&this._draw(t,this.backgroundImage)},_renderOverlay:function(t){this.overlayColor&&(t.fillStyle=this.overlayColor.toLive?this.overlayColor.toLive(t):this.overlayColor,t.fillRect(this.overlayColor.offsetX||0,this.overlayColor.offsetY||0,this.width,this.height)),this.overlayImage&&this._draw(t,this.overlayImage)},renderTop:function(){var t=this.contextTop||this.contextContainer;this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection();var e=this.getActiveGroup();return e&&e.render(t),this._renderOverlay(t),this.fire("after:render"),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y)),this.renderAll(),this},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top)),this.renderAll(),this},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top)),this.renderAll(),this},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var r={objects:this._toObjects(e,i)};return t(r,this.__serializeBgOverlay()),fabric.util.populateWithProperties(this,r,i),r},_toObjects:function(t,e){return this.getObjects().map(function(i){return this._toObject(i,t,e)},this)},_toObject:function(t,e,i){var r;this.includeDefaultValues||(r=t.includeDefaultValues,t.includeDefaultValues=!1);var s=this._realizeGroupTransformOnObject(t),n=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=r),this._unwindGroupTransformOnObject(t,s),n},_realizeGroupTransformOnObject:function(t){var e=["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"];if(t.group&&t.group===this.getActiveGroup()){var i={};return e.forEach(function(e){i[e]=t[e]}),this.getActiveGroup().realizeTransform(t),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},__serializeBgOverlay:function(){var t={background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.overlayColor&&(t.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor),this.backgroundImage&&(t.backgroundImage=this.backgroundImage.toObject()),this.overlayImage&&(t.overlayImage=this.overlayImage.toObject()),t},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this._setSVGBgOverlayColor(i,"backgroundColor"),this._setSVGBgOverlayImage(i,"backgroundImage"),this._setSVGObjects(i,e),this._setSVGBgOverlayColor(i,"overlayColor"),this._setSVGBgOverlayImage(i,"overlayImage"),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,r,s;e.viewBox?(i=e.viewBox.width,r=e.viewBox.height):(i=this.width,r=this.height,this.svgViewportTransformation||(s=this.viewportTransform,i/=s[0],r/=s[3])),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',r,'" ',this.backgroundColor&&!this.backgroundColor.toLive?'style="background-color: '+this.backgroundColor+'" ':null,e.viewBox?'viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':null,'xml:space="preserve">',"<desc>Created with Fabric.js ",fabric.version,"</desc>","<defs>",fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),"</defs>");

},_setSVGObjects:function(t,e){for(var i=0,r=this.getObjects(),s=r.length;s>i;i++){var n=r[i],o=this._realizeGroupTransformOnObject(n);t.push(n.toSVG(e)),this._unwindGroupTransformOnObject(n,o)}},_setSVGBgOverlayImage:function(t,e){this[e]&&this[e].toSVG&&t.push(this[e].toSVG())},_setSVGBgOverlayColor:function(t,e){this[e]&&this[e].source?t.push('<rect x="',this[e].offsetX,'" y="',this[e].offsetY,'" ','width="',"repeat-y"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.width:this.width,'" height="',"repeat-x"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.height:this.height,'" fill="url(#'+e+'Pattern)"',"></rect>"):this[e]&&"overlayColor"===e&&t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>")},sendToBack:function(t){return i(this._objects,t),this._objects.unshift(t),this.renderAll&&this.renderAll()},bringToFront:function(t){return i(this._objects,t),this._objects.push(t),this.renderAll&&this.renderAll()},sendBackwards:function(t,e){var r=this._objects.indexOf(t);if(0!==r){var s=this._findNewLowerIndex(t,r,e);i(this._objects,t),this._objects.splice(s,0,t),this.renderAll&&this.renderAll()}return this},_findNewLowerIndex:function(t,e,i){var r;if(i){r=e;for(var s=e-1;s>=0;--s){var n=t.intersectsWithObject(this._objects[s])||t.isContainedWithinObject(this._objects[s])||this._objects[s].isContainedWithinObject(t);if(n){r=s;break}}}else r=e-1;return r},bringForward:function(t,e){var r=this._objects.indexOf(t);if(r!==this._objects.length-1){var s=this._findNewUpperIndex(t,r,e);i(this._objects,t),this._objects.splice(s,0,t),this.renderAll&&this.renderAll()}return this},_findNewUpperIndex:function(t,e,i){var r;if(i){r=e;for(var s=e+1;s<this._objects.length;++s){var n=t.intersectsWithObject(this._objects[s])||t.isContainedWithinObject(this._objects[s])||this._objects[s].isContainedWithinObject(t);if(n){r=s;break}}}else r=e+1;return r},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this.interactive&&this.removeListeners(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return"undefined"!=typeof i.getImageData;case"setLineDash":return"undefined"!=typeof i.setLineDash;case"toDataURL":return"undefined"!=typeof e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(r){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,i=this._points[0],r=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&i.x===r.x&&i.y===r.y&&(i.x-=.5,r.x+=.5),t.moveTo(i.x,i.y);for(var s=1,n=this._points.length;n>s;s++){var o=i.midPointFrom(r);t.quadraticCurveTo(i.x,i.y,o.x,o.y),i=this._points[s],r=this._points[s+1]}t.lineTo(i.x,i.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],i=new fabric.Point(t[0].x,t[0].y),r=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var s=1,n=t.length;n>s;s++){var o=i.midPointFrom(r);e.push("Q ",i.x," ",i.y," ",o.x," ",o.y," "),i=new fabric.Point(t[s].x,t[s].y),s+1<t.length&&(r=new fabric.Point(t[s+1].x,t[s+1].y))}return e.push("L ",i.x," ",i.y," "),e},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath();var e=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"===e)return void this.canvas.renderAll();var i=this.createPath(e);this.canvas.add(i),i.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:i})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop,r=this.canvas.viewportTransform;i.save(),i.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill(),i.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,r=this.points.length;r>i;i++){var s=this.points[i],n=new fabric.Circle({radius:s.radius,left:s.x,top:s.y,originX:"center",originY:"center",fill:s.fill});this.shadow&&n.setShadow(this.shadow),e.push(n)}var o=new fabric.Group(e,{originX:"center",originY:"center"});o.canvas=this.canvas,this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=r,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,r=this.sprayChunks.length;r>i;i++)for(var s=this.sprayChunks[i],n=0,o=s.length;o>n;n++){var a=new fabric.Rect({width:s[n].width,height:s[n].width,left:s[n].x+1,top:s[n].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&a.setShadow(this.shadow),e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var h=new fabric.Group(e,{originX:"center",originY:"center"});h.canvas=this.canvas,this.canvas.add(h),this.canvas.fire("path:created",{path:h}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,i={},r=0,s=t.length;s>r;r++)e=t[r].left+""+t[r].top,i[e]||(i[e]=t[r]);var n=[];for(e in i)n.push(i[e]);return n},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var i=0,r=this.sprayChunkPoints.length;r>i;i++){var s=this.sprayChunkPoints[i];"undefined"!=typeof s.opacity&&(t.globalAlpha=s.opacity),t.fillRect(s.x,s.y,s.width,s.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,i,r,s=this.width/2,n=0;n<this.density;n++){e=fabric.util.getRandomInt(t.x-s,t.x+s),i=fabric.util.getRandomInt(t.y-s,t.y+s),r=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var o=new fabric.Point(e,i);o.width=r,this.randomOpacity&&(o.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=20,e=5,i=fabric.document.createElement("canvas"),r=i.getContext("2d");return i.width=i.height=t+e,r.fillStyle=this.color,r.beginPath(),r.arc(t/2,t/2,t/2,0,2*Math.PI,!1),r.closePath(),r.fill(),i},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction()}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,i=fabric.util.radiansToDegrees,r=Math.atan2,s=Math.abs,n=.5;fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas(),fabric.Canvas.activeInstance=this},uniScaleTransform:!1,centeredScaling:!1,centeredRotation:!1,interactive:!0,selection:!0,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_resetCurrentTransform:function(t){var e=this._currentTransform;e.target.set({scaleX:e.original.scaleX,scaleY:e.original.scaleY,left:e.original.left,top:e.original.top}),this._shouldCenterTransform(t,e.target)?"rotate"===e.action?this._setOriginToCenter(e.target):("center"!==e.originX&&("right"===e.originX?e.mouseXSign=-1:e.mouseXSign=1),"center"!==e.originY&&("bottom"===e.originY?e.mouseYSign=-1:e.mouseYSign=1),e.originX="center",e.originY="center"):(e.originX=e.original.originX,e.originY=e.original.originY)},containsPoint:function(t,e){var i=this.getPointer(t,!0),r=this._normalizePointer(e,i);return e.containsPoint(r)||e._findTargetCorner(i)},_normalizePointer:function(t,e){var i,r=this.getActiveGroup(),s=e.x,n=e.y,o=r&&"group"!==t.type&&r.contains(t);return o&&(i=new fabric.Point(r.left,r.top),i=fabric.util.transformPoint(i,this.viewportTransform,!0),s-=i.x,n-=i.y),{x:s,y:n}},isTargetTransparent:function(t,e,i){var r=t.hasBorders,s=t.transparentCorners;t.hasBorders=t.transparentCorners=!1,this._draw(this.contextCache,t),t.hasBorders=r,t.transparentCorners=s;var n=fabric.util.isTransparent(this.contextCache,e,i,this.targetFindTolerance);return this.clearContext(this.contextCache),n},_shouldClearSelection:function(t,e){var i=this.getActiveGroup(),r=this.getActiveObject();return!e||e&&i&&!i.contains(e)&&i!==e&&!t.shiftKey||e&&!e.evented||e&&!e.selectable&&r&&r!==e},_shouldCenterTransform:function(t,e){if(e){var i,r=this._currentTransform;return"scale"===r.action||"scaleX"===r.action||"scaleY"===r.action?i=this.centeredScaling||e.centeredScaling:"rotate"===r.action&&(i=this.centeredRotation||e.centeredRotation),i?!t.altKey:t.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":("mr"===e||"tr"===e||"br"===e)&&(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":("bl"===e||"mb"===e||"br"===e)&&(i.y="top"),i},_getActionFromCorner:function(t,e){var i="drag";return e&&(i="ml"===e||"mr"===e?"scaleX":"mt"===e||"mb"===e?"scaleY":"mtr"===e?"rotate":"scale"),i},_setupCurrentTransform:function(t,i){if(i){var r=this.getPointer(t),s=i._findTargetCorner(this.getPointer(t,!0)),n=this._getActionFromCorner(i,s),o=this._getOriginFromCorner(i,s);this._currentTransform={target:i,action:n,scaleX:i.scaleX,scaleY:i.scaleY,offsetX:r.x-i.left,offsetY:r.y-i.top,originX:o.x,originY:o.y,ex:r.x,ey:r.y,left:i.left,top:i.top,theta:e(i.angle),width:i.width*i.scaleX,mouseXSign:1,mouseYSign:1},this._currentTransform.original={left:i.left,top:i.top,scaleX:i.scaleX,scaleY:i.scaleY,originX:o.x,originY:o.y},this._resetCurrentTransform(t)}},_translateObject:function(t,e){var i=this._currentTransform.target;i.get("lockMovementX")||i.set("left",t-this._currentTransform.offsetX),i.get("lockMovementY")||i.set("top",e-this._currentTransform.offsetY)},_scaleObject:function(t,e,i){var r=this._currentTransform,s=r.target,n=s.get("lockScalingX"),o=s.get("lockScalingY"),a=s.get("lockScalingFlip");if(!n||!o){var h=s.translateToOriginPoint(s.getCenterPoint(),r.originX,r.originY),c=s.toLocalPoint(new fabric.Point(t,e),r.originX,r.originY);this._setLocalMouse(c,r),this._setObjectScale(c,r,n,o,i,a),s.setPositionByOrigin(h,r.originX,r.originY)}},_setObjectScale:function(t,e,i,r,s,n){var o=e.target,a=!1,h=!1,c="line"===o.type&&0===o.width,l="line"===o.type&&0===o.height,u=l?0:o.strokeWidth,f=c?0:o.strokeWidth;e.newScaleX=t.x/(o.width+u),e.newScaleY=t.y/(o.height+f),n&&e.newScaleX<=0&&e.newScaleX<o.scaleX&&(a=!0),n&&e.newScaleY<=0&&e.newScaleY<o.scaleY&&(h=!0),"equally"!==s||i||r?s?"x"!==s||o.get("lockUniScaling")?"y"!==s||o.get("lockUniScaling")||h||r||o.set("scaleY",e.newScaleY):a||i||o.set("scaleX",e.newScaleX):(a||i||o.set("scaleX",e.newScaleX),h||r||o.set("scaleY",e.newScaleY)):a||h||this._scaleObjectEqually(t,o,e),a||h||this._flipObject(e,s)},_scaleObjectEqually:function(t,e,i){var r=t.y+t.x,s="line"===e.type&&0===e.width,n="line"===e.type&&0===e.height,o=n?0:e.strokeWidth,a=s?0:e.strokeWidth,h=(e.height+a)*i.original.scaleY+(e.width+o)*i.original.scaleX;i.newScaleX=i.original.scaleX*r/h,i.newScaleY=i.original.scaleY*r/h,e.set("scaleX",i.newScaleX),e.set("scaleY",i.newScaleY)},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var i=e.target;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),s(t.x)>i.padding?t.x<0?t.x+=i.padding:t.x-=i.padding:t.x=0,s(t.y)>i.padding?t.y<0?t.y+=i.padding:t.y-=i.padding:t.y=0},_rotateObject:function(t,e){var s=this._currentTransform;if(!s.target.get("lockRotation")){var n=r(s.ey-s.top,s.ex-s.left),o=r(e-s.top,t-s.left),a=i(o-n+s.theta);0>a&&(a=360+a),s.target.angle=a%360}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.setAngle(0)},_drawSelection:function(){var t=this.contextTop,e=this._groupSelector,i=e.left,r=e.top,o=s(i),a=s(r);if(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(i>0?0:-i),e.ey-(r>0?0:-r),o,a),t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1){var h=e.ex+n-(i>0?0:o),c=e.ey+n-(r>0?0:a);t.beginPath(),fabric.util.drawDashedLine(t,h,c,h+o,c,this.selectionDashArray),fabric.util.drawDashedLine(t,h,c+a-1,h+o,c+a-1,this.selectionDashArray),fabric.util.drawDashedLine(t,h,c,h,c+a,this.selectionDashArray),fabric.util.drawDashedLine(t,h+o-1,c,h+o-1,c+a,this.selectionDashArray),t.closePath(),t.stroke()}else t.strokeRect(e.ex+n-(i>0?0:o),e.ey+n-(r>0?0:a),o,a)},_isLastRenderedObject:function(t){return this.controlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay.visible&&this.containsPoint(t,this.lastRenderedObjectWithControlsAboveOverlay)&&this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(this.getPointer(t,!0))},findTarget:function(t,e){if(!this.skipTargetFind){if(this._isLastRenderedObject(t))return this.lastRenderedObjectWithControlsAboveOverlay;var i=this.getActiveGroup();if(i&&!e&&this.containsPoint(t,i))return i;var r=this._searchPossibleTargets(t);return this._fireOverOutEvents(r,t),r}},_fireOverOutEvents:function(t,e){t?this._hoveredTarget!==t&&(this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout")),this.fire("mouse:over",{target:t,e:e}),t.fire("mouseover"),this._hoveredTarget=t):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&this.containsPoint(t,e)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var r=this.isTargetTransparent(e,i.x,i.y);if(!r)return!0}},_searchPossibleTargets:function(t){for(var e,i=this.getPointer(t,!0),r=this._objects.length;r--;)if(!this._objects[r].group&&this._checkTarget(t,this._objects[r],i)){this.relatedTarget=this._objects[r],e=this._objects[r];break}return e},getPointer:function(e,i,r){r||(r=this.upperCanvasEl);var s,n=t(e,r),o=r.getBoundingClientRect(),a=o.width||0,h=o.height||0;return a&&h||("top"in o&&"bottom"in o&&(h=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(a=Math.abs(o.right-o.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,i||(n=fabric.util.transformPoint(n,fabric.util.invertTransform(this.viewportTransform))),s=0===a||0===h?{width:1,height:1}:{width:r.width/a,height:r.height/h},{x:n.x*s.width,y:n.y*s.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{"class":this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=t,t.set("active",!0)},setActiveObject:function(t,e){return this._setActiveObject(t),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},_discardActiveObject:function(){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=null},discardActiveObject:function(t){return this._discardActiveObject(),this.renderAll(),this.fire("selection:cleared",{e:t}),this},_setActiveGroup:function(t){this._activeGroup=t,t&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){return this._discardActiveGroup(),this.fire("selection:cleared",{e:t}),this},deactivateAll:function(){for(var t=this.getObjects(),e=0,i=t.length;i>e;e++)t[e].set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){var e=this.getActiveGroup()||this.getActiveObject();return e&&this.fire("before:selection:cleared",{target:e,e:t}),this.deactivateAll(),e&&this.fire("selection:cleared",{e:t}),this},drawControls:function(t){var e=this.getActiveGroup();e?this._drawGroupControls(t,e):this._drawObjectsControls(t)},_drawGroupControls:function(t,e){e._renderControls(t)},_drawObjectsControls:function(t){for(var e=0,i=this._objects.length;i>e;++e)this._objects[e]&&this._objects[e].active&&(this._objects[e]._renderControls(t),this.lastRenderedObjectWithControlsAboveOverlay=this._objects[e])}});for(var o in fabric.StaticCanvas)"prototype"!==o&&(fabric.Canvas[o]=fabric.StaticCanvas[o]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=fabric.util.addListener,i=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this._bindEvents(),e(fabric.window,"resize",this._onResize),e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"mousewheel",this._onMouseWheel),e(this.upperCanvasEl,"touchstart",this._onMouseDown),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this)},removeListeners:function(){i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mousewheel",this._onMouseWheel),i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t,e){this.__onMouseWheel&&this.__onMouseWheel(t,e)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onMouseDown:function(t){this.__onMouseDown(t),e(fabric.document,"touchend",this._onMouseUp),e(fabric.document,"touchmove",this._onMouseMove),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?i(this.upperCanvasEl,"mousedown",this._onMouseDown):(e(fabric.document,"mouseup",this._onMouseUp),e(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"touchend",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove),i(fabric.document,"touchmove",this._onMouseMove),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchend"===t.type){var r=this;setTimeout(function(){e(r.upperCanvasEl,"mousedown",r._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return!!(t&&(t.isMoving||t!==i)||!t&&i||!t&&!i&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(t){var e;if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);this._currentTransform?(this._finalizeCurrentTransform(),e=this._currentTransform.target):e=this.findTarget(t,!0);var i=this._shouldRender(e,this.getPointer(t));this._maybeGroupObjects(t),e&&(e.isMoving=!1),i&&this.renderAll(),this._handleCursorAndEvent(t,e)},_handleCursorAndEvent:function(t,e){this._setCursorFromEvent(t,e);var i=this;setTimeout(function(){i._setCursorFromEvent(t,e)},50),this.fire("mouse:up",{target:e,e:t}),e&&e.fire("mouseup",{e:t})},_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this.stateful&&e.hasStateChanged()&&(this.fire("object:modified",{target:e}),e.fire("modified")),this._restoreOriginXY(e)},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=fabric.util.invertTransform(this.viewportTransform),i=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseDown(i),this.fire("mouse:down",{e:t});var r=this.findTarget(t);"undefined"!=typeof r&&r.fire("mousedown",{e:t,target:r})},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=fabric.util.invertTransform(this.viewportTransform),i=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseMove(i)}this.setCursor(this.freeDrawingCursor),this.fire("mouse:move",{e:t});var r=this.findTarget(t);"undefined"!=typeof r&&r.fire("mousemove",{e:t,target:r})},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this.fire("mouse:up",{e:t});var e=this.findTarget(t);"undefined"!=typeof e&&e.fire("mouseup",{e:t,target:e})},__onMouseDown:function(t){var e="which"in t?1===t.which:1===t.button;if(e||fabric.isTouchSupported){if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._currentTransform){var i=this.findTarget(t),r=this.getPointer(t,!0);this._previousPointer=r;var s=this._shouldRender(i,r),n=this._shouldGroup(t,i);this._shouldClearSelection(t,i)?this._clearSelection(t,i,r):n&&(this._handleGrouping(t,i),i=this.getActiveGroup()),i&&i.selectable&&!n&&(this._beforeTransform(t,i),this._setupCurrentTransform(t,i)),s&&this.renderAll(),this.fire("mouse:down",{target:i,e:t}),i&&i.fire("mousedown",{e:t})}}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e),e!==this.getActiveGroup()&&e!==this.getActiveObject()&&(this.deactivateAll(),this.setActiveObject(e,t))},_clearSelection:function(t,e,i){this.deactivateAllWithDispatch(t),e&&e.selectable?this.setActiveObject(e,t):this.selection&&(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0})},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!("undefined"!=typeof t.touches&&t.touches.length>1)){var r=this._groupSelector;r?(i=this.getPointer(t,!0),r.left=i.x-r.ex,r.top=i.y-r.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),!e||e&&!e.selectable?this.setCursor(this.defaultCursor):this._setCursorFromEvent(t,e)),this.fire("mouse:move",{target:e,e:t}),e&&e.fire("mousemove",{e:t})}},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.target.isMoving=!0,this._beforeScaleTransform(t,i),this._performTransformAction(t,i,e),this.renderAll()},_performTransformAction:function(t,e,i){var r=i.x,s=i.y,n=e.target,o=e.action;"rotate"===o?(this._rotateObject(r,s),this._fire("rotating",n,t)):"scale"===o?(this._onScale(t,e,r,s),this._fire("scaling",n,t)):"scaleX"===o?(this._scaleObject(r,s,"x"),this._fire("scaling",n,t)):"scaleY"===o?(this._scaleObject(r,s,"y"),this._fire("scaling",n,t)):(this._translateObject(r,s),this._fire("moving",n,t),this.setCursor(this.moveCursor))},_fire:function(t,e,i){this.fire("object:"+t,{target:e,e:i}),e.fire(t,{e:i})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var i=this._shouldCenterTransform(t,e.target);(i&&("center"!==e.originX||"center"!==e.originY)||!i&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(t),e.reset=!0)}},_onScale:function(t,e,i,r){!t.shiftKey&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(t,e.target),e.currentAction="scaleEqually",this._scaleObject(i,r,"equally")):(e.currentAction="scale",this._scaleObject(i,r));

},_setCursorFromEvent:function(t,e){if(!e||!e.selectable)return this.setCursor(this.defaultCursor),!1;var i=this.getActiveGroup(),r=e._findTargetCorner&&(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));return r?this._setCornerCursor(r,e):this.setCursor(e.hoverCursor||this.hoverCursor),!0},_setCornerCursor:function(e,i){if(e in t)this.setCursor(this._getRotatedCornerCursor(e,i));else{if("mtr"!==e||!i.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(e,i){var r=Math.round(i.getAngle()%360/45);return 0>r&&(r+=8),r+=t[e],r%=8,this.cursorMap[r]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this.getActiveObject();return t.shiftKey&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGrouping:function(t,e){(e!==this.getActiveGroup()||(e=this.findTarget(t,!0),e&&!e.isType("group")))&&(this.getActiveGroup()?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var i=this.getActiveGroup();if(i.contains(t)){if(i.removeWithUpdate(t),this._resetObjectTransform(i),t.set("active",!1),1===i.size())return this.discardActiveGroup(e),void this.setActiveObject(i.item(0))}else i.addWithUpdate(t),this._resetObjectTransform(i);this.fire("selection:created",{target:i,e:e}),i.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var i=this._createGroup(t);i.addWithUpdate(),this.setActiveGroup(i),this._activeObject=null,this.fire("selection:created",{target:i,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),i=e.indexOf(this._activeObject)<e.indexOf(t),r=i?[this._activeObject,t]:[t,this._activeObject];return new fabric.Group(r,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):e.length>1&&(e=new fabric.Group(e.reverse(),{canvas:this}),e.addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e}),this.renderAll())},_collectObjects:function(){for(var i,r=[],s=this._groupSelector.ex,n=this._groupSelector.ey,o=s+this._groupSelector.left,a=n+this._groupSelector.top,h=new fabric.Point(t(s,o),t(n,a)),c=new fabric.Point(e(s,o),e(n,a)),l=s===o&&n===a,u=this._objects.length;u--&&(i=this._objects[u],!(i&&i.selectable&&i.visible&&(i.intersectsWithRect(h,c)||i.isContainedWithinRect(h,c)||i.containsPoint(h)||i.containsPoint(c))&&(i.set("active",!0),r.push(i),l))););return r},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,r=t.multiplier||1,s={left:t.left,top:t.top,width:t.width,height:t.height};return 1!==r?this.__toDataURLWithMultiplier(e,i,s,r):this.__toDataURL(e,i,s)},__toDataURL:function(t,e,i){this.renderAll(!0);var r=this.upperCanvasEl||this.lowerCanvasEl,s=this.__getCroppedCanvas(r,i);"jpg"===t&&(t="jpeg");var n=fabric.StaticCanvas.supports("toDataURLWithQuality")?(s||r).toDataURL("image/"+t,e):(s||r).toDataURL("image/"+t);return this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),s&&(s=null),n},__getCroppedCanvas:function(t,e){var i,r,s="left"in e||"top"in e||"width"in e||"height"in e;return s&&(i=fabric.util.createCanvasElement(),r=i.getContext("2d"),i.width=e.width||this.width,i.height=e.height||this.height,r.drawImage(t,-e.left||0,-e.top||0)),i},__toDataURLWithMultiplier:function(t,e,i,r){var s=this.getWidth(),n=this.getHeight(),o=s*r,a=n*r,h=this.getActiveObject(),c=this.getActiveGroup(),l=this.contextTop||this.contextContainer;r>1&&this.setWidth(o).setHeight(a),l.scale(r,r),i.left&&(i.left*=r),i.top&&(i.top*=r),i.width?i.width*=r:1>r&&(i.width=o),i.height?i.height*=r:1>r&&(i.height=a),c?this._tempRemoveBordersControlsFromGroup(c):h&&this.deactivateAll&&this.deactivateAll(),this.renderAll(!0);var u=this.__toDataURL(t,e,i);return this.width=s,this.height=n,l.scale(1/r,1/r),this.setWidth(s).setHeight(n),c?this._restoreBordersControlsOnGroup(c):h&&this.setActiveObject&&this.setActiveObject(h),this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),u},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})},_tempRemoveBordersControlsFromGroup:function(t){t.origHasControls=t.hasControls,t.origBorderColor=t.borderColor,t.hasControls=!0,t.borderColor="rgba(0,0,0,0)",t.forEachObject(function(t){t.origBorderColor=t.borderColor,t.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(t){t.hideControls=t.origHideControls,t.borderColor=t.origBorderColor,t.forEachObject(function(t){t.borderColor=t.origBorderColor,delete t.origBorderColor})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var r="string"==typeof t?JSON.parse(t):t;this.clear();var s=this;return this._enlivenObjects(r.objects,function(){s._setBgOverlay(r,e)},i),this}},_setBgOverlay:function(t,e){var i=this,r={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(t.backgroundImage||t.overlayImage||t.background||t.overlay))return void(e&&e());var s=function(){r.backgroundImage&&r.overlayImage&&r.backgroundColor&&r.overlayColor&&(i.renderAll(),e&&e())};this.__setBgOverlay("backgroundImage",t.backgroundImage,r,s),this.__setBgOverlay("overlayImage",t.overlayImage,r,s),this.__setBgOverlay("backgroundColor",t.background,r,s),this.__setBgOverlay("overlayColor",t.overlay,r,s),s()},__setBgOverlay:function(t,e,i,r){var s=this;return e?void("backgroundImage"===t||"overlayImage"===t?fabric.Image.fromObject(e,function(e){s[t]=e,i[t]=!0,r&&r()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){i[t]=!0,r&&r()})):void(i[t]=!0)},_enlivenObjects:function(t,e,i){var r=this;if(!t||0===t.length)return void(e&&e());var s=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){r.insertAt(t,e,!0)}),r.renderOnAddRemove=s,e&&e()},null,i)},_toDataURL:function(t,e){this.clone(function(i){e(i.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,i){this.clone(function(r){i(r.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(i,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.toFixed,s=e.util.string.capitalize,n=e.util.degreesToRadians,o=e.StaticCanvas.supports("setLineDash");e.Object||(e.Object=e.util.createClass({type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockScalingFlip:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor".split(" "),initialize:function(t){t&&this.setOptions(t)},_initGradient:function(t){!t.fill||!t.fill.colorStops||t.fill instanceof e.Gradient||this.set("fill",new e.Gradient(t.fill)),!t.stroke||!t.stroke.colorStops||t.stroke instanceof e.Gradient||this.set("stroke",new e.Gradient(t.stroke))},_initPattern:function(t){!t.fill||!t.fill.source||t.fill instanceof e.Pattern||this.set("fill",new e.Pattern(t.fill)),!t.stroke||!t.stroke.source||t.stroke instanceof e.Pattern||this.set("stroke",new e.Pattern(t.stroke))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var i=e.util.getFunctionBody(t.clipTo);"undefined"!=typeof i&&(this.clipTo=new Function("ctx",i))}},setOptions:function(t){for(var e in t)this.set(e,t[e]);this._initGradient(t),this._initPattern(t),this._initClipping(t)},transform:function(t,e){this.group&&this.canvas.preserveObjectStacking&&this.group===this.canvas._activeGroup&&this.group.transform(t);var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),t.rotate(n(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,s={type:this.type,originX:this.originX,originY:this.originY,left:r(this.left,i),top:r(this.top,i),width:r(this.width,i),height:r(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,i),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:r(this.strokeMiterLimit,i),scaleX:r(this.scaleX,i),scaleY:r(this.scaleY,i),angle:r(this.getAngle(),i),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation};return this.includeDefaultValues||(s=this._removeDefaultValues(s)),e.util.populateWithProperties(this,s,t),s},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype,r=i.stateProperties;return r.forEach(function(e){t[e]===i[e]&&delete t[e]}),t},toString:function(){return"#<fabric."+s(this.type)+">"},get:function(t){return this[t]},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,i){var s="scaleX"===t||"scaleY"===t;return s&&(i=this._constrainScale(i)),"scaleX"===t&&0>i?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&0>i?(this.flipY=!this.flipY,i*=-1):"width"===t||"height"===t?this.minScaleLimit=r(Math.min(.1,1/Math.max(this.width,this.height)),2):"shadow"!==t||!i||i instanceof e.Shadow||(i=new e.Shadow(i)),this[t]=i,this},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(t,i){0===this.width&&0===this.height||!this.visible||(t.save(),this._setupCompositeOperation(t),i||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._setOpacity(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),this._render(t,i),this.clipTo&&t.restore(),t.restore())},_setOpacity:function(t){this.group&&this.group._setOpacity(t),t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_renderControls:function(t,i){if(this.active&&!i){var r=this.getViewportTransform();t.save();var s;this.group&&(s=e.util.transformPoint(this.group.getCenterPoint(),r),t.translate(s.x,s.y),t.rotate(n(this.group.angle))),s=e.util.transformPoint(this.getCenterPoint(),r,null!=this.group),this.group&&(s.x*=this.group.scaleX,s.y*=this.group.scaleY),t.translate(s.x,s.y),t.rotate(n(this.angle)),this.drawBorders(t),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var e=this.canvas&&this.canvas.viewportTransform[0]||1,i=this.canvas&&this.canvas.viewportTransform[3]||1;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(e+i)*(this.scaleX+this.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*e*this.scaleX,t.shadowOffsetY=this.shadow.offsetY*i*this.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_renderFill:function(t){if(this.fill){if(t.save(),this.fill.gradientTransform){var e=this.fill.gradientTransform;t.transform.apply(t,e)}this.fill.toLive&&t.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore()}},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeDashArray)1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),o?(t.setLineDash(this.strokeDashArray),this._stroke&&this._stroke(t)):this._renderDashedStroke&&this._renderDashedStroke(t),t.stroke();else{if(this.stroke.gradientTransform){var e=this.stroke.gradientTransform;t.transform.apply(t,e)}this._stroke?this._stroke(t):t.stroke()}t.restore()}},clone:function(t,i){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(i),t):new e.Object(this.toObject(i))},cloneAsImage:function(t){var i=this.toDataURL();return e.util.loadImage(i,function(i){t&&t(new e.Image(i))}),this},toDataURL:function(t){t||(t={});var i=e.util.createCanvasElement(),r=this.getBoundingRect();i.width=r.width,i.height=r.height,e.util.wrapElement(i,"div");var s=new e.StaticCanvas(i);"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(s.backgroundColor="#fff");var n={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new e.Point(i.width/2,i.height/2),"center","center");var o=this.canvas;s.add(this);var a=s.toDataURL(t);return this.set(n).setCoords(),this.canvas=o,s.dispose(),s=null,a},isType:function(t){return this.type===t},complexity:function(){return 0},toJSON:function(t){return this.toObject(t)},setGradient:function(t,i){i||(i={});var r={colorStops:[]};r.type=i.type||(i.r1||i.r2?"radial":"linear"),r.coords={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},(i.r1||i.r2)&&(r.coords.r1=i.r1,r.coords.r2=i.r2);for(var s in i.colorStops){var n=new e.Color(i.colorStops[s]);r.colorStops.push({offset:s,color:n.toRgb(),opacity:n.getAlpha()})}return this.set(t,e.Gradient.forObject(this,r))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas.centerObjectH(this),this},centerV:function(){return this.canvas.centerObjectV(this),this},center:function(){return this.canvas.centerObject(this),this},remove:function(){return this.canvas.remove(this),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);var i=this.translateToOriginPoint(this.getCenterPoint(),"left","top");return{x:e.x-i.x,y:e.y-i.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{translateToCenterPoint:function(e,i,r){var s=e.x,n=e.y;return"left"===i?s=e.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===i&&(s=e.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2),"top"===r?n=e.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===r&&(n=e.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(s,n),e,t(this.angle))},translateToOriginPoint:function(e,i,r){var s=e.x,n=e.y;return"left"===i?s=e.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===i&&(s=e.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2),"top"===r?n=e.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===r&&(n=e.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(s,n),e,t(this.angle))},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,r){var s,n,o=this.getCenterPoint();return i&&r?(s="left"===i?o.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===i?o.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2:o.x,n="top"===r?o.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===r?o.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2:o.y):(s=this.left,n=this.top),fabric.util.rotatePoint(new fabric.Point(e.x,e.y),o,-t(this.angle)).subtractEquals(new fabric.Point(s,n))},setPositionByOrigin:function(t,e,i){var r=this.translateToCenterPoint(t,e,i),s=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(e){var i=t(this.angle),r=this.getWidth()/2,s=Math.cos(i)*r,n=Math.sin(i)*r,o=this.getWidth(),a=Math.cos(i)*o,h=Math.sin(i)*o;"center"===this.originX&&"left"===e||"right"===this.originX&&"center"===e?(this.left-=s,this.top-=n):"left"===this.originX&&"center"===e||"center"===this.originX&&"right"===e?(this.left+=s,this.top+=n):"left"===this.originX&&"right"===e?(this.left+=a,this.top+=h):"right"===this.originX&&"left"===e&&(this.left-=a,this.top-=h),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(t,e){var i=this.oCoords,r=new fabric.Point(i.tl.x,i.tl.y),s=new fabric.Point(i.tr.x,i.tr.y),n=new fabric.Point(i.bl.x,i.bl.y),o=new fabric.Point(i.br.x,i.br.y),a=fabric.Intersection.intersectPolygonRectangle([r,s,o,n],t,e);return"Intersection"===a.status},intersectsWithObject:function(t){function e(t){return{tl:new fabric.Point(t.tl.x,t.tl.y),tr:new fabric.Point(t.tr.x,t.tr.y),bl:new fabric.Point(t.bl.x,t.bl.y),br:new fabric.Point(t.br.x,t.br.y)}}var i=e(this.oCoords),r=e(t.oCoords),s=fabric.Intersection.intersectPolygonPolygon([i.tl,i.tr,i.br,i.bl],[r.tl,r.tr,r.br,r.bl]);return"Intersection"===s.status},isContainedWithinObject:function(t){var e=t.getBoundingRect(),i=new fabric.Point(e.left,e.top),r=new fabric.Point(e.left+e.width,e.top+e.height);return this.isContainedWithinRect(i,r)},isContainedWithinRect:function(t,e){var i=this.getBoundingRect();return i.left>=t.x&&i.left+i.width<=e.x&&i.top>=t.y&&i.top+i.height<=e.y},containsPoint:function(t){var e=this._getImageLines(this.oCoords),i=this._findCrossPoints(t,e);return 0!==i&&i%2===1},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,r,s,n,o,a,h,c=0;for(var l in e)if(h=e[l],!(h.o.y<t.y&&h.d.y<t.y||h.o.y>=t.y&&h.d.y>=t.y||(h.o.x===h.d.x&&h.o.x>=t.x?(o=h.o.x,a=t.y):(i=0,r=(h.d.y-h.o.y)/(h.d.x-h.o.x),s=t.y-i*t.x,n=h.o.y-r*h.o.x,o=-(s-n)/(i-r),a=s+i*o),o>=t.x&&(c+=1),2!==c)))break;return c},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var t=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],e=fabric.util.array.min(t),i=fabric.util.array.max(t),r=Math.abs(e-i),s=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],n=fabric.util.array.min(s),o=fabric.util.array.max(s),a=Math.abs(n-o);return{left:e,top:n,width:r,height:a}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?0>t?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return t=this._constrainScale(t),0>t&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords(),this},scaleToWidth:function(t){var e=this.getBoundingRectWidth()/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRectHeight()/this.getHeight();return this.scale(t/this.height/e)},setCoords:function(){var e=t(this.angle),i=this.getViewportTransform(),r=function(t){return fabric.util.transformPoint(t,i)},s=this._calculateCurrentDimensions(!1),n=s.x,o=s.y;0>n&&(n=Math.abs(n));var a=Math.sqrt(Math.pow(n/2,2)+Math.pow(o/2,2)),h=Math.atan(isFinite(o/n)?o/n:0),c=Math.cos(h+e)*a,l=Math.sin(h+e)*a,u=Math.sin(e),f=Math.cos(e),d=this.getCenterPoint(),g=new fabric.Point(n,o),p=new fabric.Point(d.x-c,d.y-l),v=new fabric.Point(p.x+g.x*f,p.y+g.x*u),b=r(new fabric.Point(p.x-g.y*u,p.y+g.y*f)),m=r(new fabric.Point(v.x-g.y*u,v.y+g.y*f)),y=r(p),_=r(v),x=new fabric.Point((y.x+b.x)/2,(y.y+b.y)/2),C=new fabric.Point((_.x+y.x)/2,(_.y+y.y)/2),S=new fabric.Point((m.x+_.x)/2,(m.y+_.y)/2),w=new fabric.Point((m.x+b.x)/2,(m.y+b.y)/2),O=new fabric.Point(C.x+u*this.rotatingPointOffset,C.y-f*this.rotatingPointOffset);return this.oCoords={tl:y,tr:_,br:m,bl:b,ml:x,mt:C,mr:S,mb:w,mtr:O},this._setCornerCoords&&this._setCornerCoords(),this}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(){var t=this.fill?this.fill.toLive?"url(#SVGID_"+this.fill.id+")":this.fill:"none",e=this.fillRule,i=this.stroke?this.stroke.toLive?"url(#SVGID_"+this.stroke.id+")":this.stroke:"none",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):"",n=this.strokeLineCap?this.strokeLineCap:"butt",o=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",h="undefined"!=typeof this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",l=this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":"";return["stroke: ",i,"; ","stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",n,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",a,"; ","fill: ",t,"; ","fill-rule: ",e,"; ","opacity: ",h,";",l,c].join("")},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),i=!this.canvas||this.canvas.svgViewportTransformation?this.getViewportTransform():[1,0,0,1,0,0],r=fabric.util.transformPoint(this.getCenterPoint(),i),s=fabric.Object.NUM_FRACTION_DIGITS,n="path-group"===this.type?"":"translate("+t(r.x,s)+" "+t(r.y,s)+")",o=0!==e?" rotate("+t(e,s)+")":"",a=1===this.scaleX&&1===this.scaleY&&1===i[0]&&1===i[3]?"":" scale("+t(this.scaleX*i[0],s)+" "+t(this.scaleY*i[3],s)+")",h="path-group"===this.type?this.width*i[0]:0,c=this.flipX?" matrix(-1 0 0 1 "+h+" 0) ":"",l="path-group"===this.type?this.height*i[3]:0,u=this.flipY?" matrix(1 0 0 -1 0 "+l+")":"";return[n,o,a,c,u].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}}),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(t){return this.get(t)!==this.originalState[t]},this)},saveState:function(t){return this.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),t&&t.stateProperties&&t.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(){var t=fabric.util.degreesToRadians,e=function(){return"undefined"!=typeof G_vmlCanvasManager};fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,i,r=t.x,s=t.y;for(var n in this.oCoords)if(this.isControlVisible(n)&&("mtr"!==n||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==n&&"mr"!==n&&"mb"!==n&&"ml"!==n)&&(i=this._getImageLines(this.oCoords[n].corner),e=this._findCrossPoints({x:r,y:s},i),0!==e&&e%2===1))return this.__corner=n,n;return!1},_setCornerCoords:function(){var e,i,r=this.oCoords,s=t(45-this.angle),n=Math.sqrt(2*Math.pow(this.cornerSize,2))/2,o=n*Math.cos(s),a=n*Math.sin(s);for(var h in r)e=r[h].x,i=r[h].y,r[h].corner={tl:{x:e-a,y:i-o},tr:{x:e+o,y:i-a},bl:{x:e-o,y:i+a},br:{x:e+a,y:i+o}}},_calculateCurrentDimensions:function(t){var e=this.getViewportTransform(),i=this.strokeWidth,r=this.width,s=this.height,n="round"===this.strokeLineCap||"square"===this.strokeLineCap,o="line"===this.type&&0===this.width,a="line"===this.type&&0===this.height,h=o||a,c=n&&a||!h,l=n&&o||!h;return o?r=i:a&&(s=i),c&&(r+=0>r?-i:i),l&&(s+=0>s?-i:i),r=r*this.scaleX+2*this.padding,s=s*this.scaleY+2*this.padding,t?fabric.util.transformPoint(new fabric.Point(r,s),e,!0):{x:r,y:s}},drawBorders:function(t){if(!this.hasBorders)return this;t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=this.borderColor,t.lineWidth=1/this.borderScaleFactor;var e=this._calculateCurrentDimensions(!0),i=e.x,r=e.y;if(this.group&&(i*=this.group.scaleX,r*=this.group.scaleY),t.strokeRect(~~-(i/2)-.5,~~-(r/2)-.5,~~i+1,~~r+1),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var s=-r/2;t.beginPath(),t.moveTo(0,s),t.lineTo(0,s-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(!0),i=e.x,r=e.y,s=-(i/2),n=-(r/2),o=this.cornerSize/2,a=this.transparentCorners?"strokeRect":"fillRect";return t.save(),t.lineWidth=1,t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=t.fillStyle=this.cornerColor,this._drawControl("tl",t,a,s-o,n-o),this._drawControl("tr",t,a,s+i-o,n-o),this._drawControl("bl",t,a,s-o,n+r-o),this._drawControl("br",t,a,s+i-o,n+r-o),this.get("lockUniScaling")||(this._drawControl("mt",t,a,s+i/2-o,n-o),this._drawControl("mb",t,a,s+i/2-o,n+r-o),this._drawControl("mr",t,a,s+i-o,n+r/2-o),this._drawControl("ml",t,a,s-o,n+r/2-o)),this.hasRotatingPoint&&this._drawControl("mtr",t,a,s+i/2-o,n-this.rotatingPointOffset-o),t.restore(),this},_drawControl:function(t,i,r,s,n){if(this.isControlVisible(t)){var o=this.cornerSize;e()||this.transparentCorners||i.clearRect(s,n,o,o),i[r](s,n,o,o)}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){t||(t={});for(var e in t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var i=function(){},r=e.onComplete||i,s=e.onChange||i,n=this;return fabric.util.animate({startValue:t.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),n.renderAll(),s()},onComplete:function(){t.setCoords(),r()}}),this},fxCenterObjectV:function(t,e){e=e||{};var i=function(){},r=e.onComplete||i,s=e.onChange||i,n=this;return fabric.util.animate({startValue:t.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),n.renderAll(),s()},onComplete:function(){t.setCoords(),r()}}),this},fxRemove:function(t,e){e=e||{};var i=function(){},r=e.onComplete||i,s=e.onChange||i,n=this;return fabric.util.animate({startValue:t.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),n.renderAll(),s()},onComplete:function(){n.remove(t),r()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var r=0,s=i.length;s>r;r++)t=i[r],e=r!==s-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,r){var s,n=this;e=e.toString(),i=i?fabric.util.object.clone(i):{},~t.indexOf(".")&&(s=t.split("."));var o=s?this.get(s[0])[s[1]]:this.get(t);"from"in i||(i.from=o),e=~e.indexOf("=")?o+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return i.abort.call(n)},onChange:function(e){s?n[s[0]][s[1]]=e:n.set(t,e),r||i.onChange&&i.onChange()},onComplete:function(){r||(n.setCoords(),i.onComplete&&i.onComplete())}})}}),function(t){"use strict";function e(t,e){var i=t.origin,r=t.axis1,s=t.axis2,n=t.dimension,o=e.nearest,a=e.center,h=e.farthest;return function(){switch(this.get(i)){case o:return Math.min(this.get(r),this.get(s));case a:return Math.min(this.get(r),this.get(s))+.5*this.get(n);case h:return Math.max(this.get(r),this.get(s));

}}}var i=t.fabric||(t.fabric={}),r=i.util.object.extend,s={x1:1,x2:1,y1:1,y2:1},n=i.StaticCanvas.supports("setLineDash");return i.Line?void i.warn("fabric.Line is already defined"):(i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,initialize:function(t,e){e=e||{},t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!=typeof s[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var i=this.getCenterPoint();t.translate(i.x-this.strokeWidth/2,i.y-this.strokeWidth/2)}if(!this.strokeDashArray||this.strokeDashArray&&n){var r=this.calcLinePoints();t.moveTo(r.x1,r.y1),t.lineTo(r.x2,r.y2)}t.lineWidth=this.strokeWidth;var s=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=s},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),i.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return r(this.callSuper("toObject",t),this.calcLinePoints())},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,r=e*this.height*.5,s=t*this.width*-.5,n=e*this.height*-.5;return{x1:i,x2:s,y1:r,y2:n}},toSVG:function(t){var e=this._createBaseSVGMarkup(),i={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(i=this.calcLinePoints()),e.push("<line ",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(t,e){var s=i.parseAttributes(t,i.Line.ATTRIBUTE_NAMES),n=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];return new i.Line(n,r(s,e))},void(i.Line.fromObject=function(t){var e=[t.x1,t.y1,t.x2,t.y2];return new i.Line(e,t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){return"radius"in t&&t.radius>=0}var i=t.fabric||(t.fabric={}),r=Math.PI,s=i.util.object.extend;return i.Circle?void i.warn("fabric.Circle is already defined."):(i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*r,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("radius",t.radius||0),this.startAngle=t.startAngle||this.startAngle,this.endAngle=t.endAngle||this.endAngle},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return s(this.callSuper("toObject",t),{radius:this.get("radius"),startAngle:this.startAngle,endAngle:this.endAngle})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,s=0,n=(this.endAngle-this.startAngle)%(2*r);if(0===n)this.group&&"path-group"===this.group.type&&(i=this.left+this.radius,s=this.top+this.radius),e.push("<circle ",'cx="'+i+'" cy="'+s+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var o=Math.cos(this.startAngle)*this.radius,a=Math.sin(this.startAngle)*this.radius,h=Math.cos(this.endAngle)*this.radius,c=Math.sin(this.endAngle)*this.radius,l=n>r?"1":"0";e.push('<path d="M '+o+" "+a," A "+this.radius+" "+this.radius," 0 ",+l+" 1"," "+h+" "+c,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){this.radius=t,this.set("width",2*t).set("height",2*t)},complexity:function(){return 1}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,r){r||(r={});var n=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!e(n))throw new Error("value of `r` attribute is required and can not be negative");n.left=n.left||0,n.top=n.top||0;var o=new i.Circle(s(n,r));return o.left-=o.radius,o.top-=o.radius,o},void(i.Circle.fromObject=function(t){return new i.Circle(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Triangle?void e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("width",t.width||100).set("height",t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=this.width/2,r=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,r,0,-r,this.strokeDashArray),e.util.drawDashedLine(t,0,-r,i,r,this.strokeDashArray),e.util.drawDashedLine(t,i,r,-i,r,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.width/2,r=this.height/2,s=[-i+" "+r,"0 "+-r,i+" "+r].join(",");return e.push("<polygon ",'points="',s,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),void(e.Triangle.fromObject=function(t){return new e.Triangle(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI,r=e.util.object.extend;return e.Ellipse?void e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("rx",t.rx||0),this.set("ry",t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return r(this.callSuper("toObject",t),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,r=0;return this.group&&"path-group"===this.group.type&&(i=this.left+this.rx,r=this.top+this.ry),e.push("<ellipse ",'cx="',i,'" cy="',r,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,i,!1),t.restore(),this._renderFill(t),this._renderStroke(t)},complexity:function(){return 1}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){i||(i={});var s=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0;var n=new e.Ellipse(r(s,i));return n.top-=n.ry,n.left-=n.rx,n},void(e.Ellipse.fromObject=function(t){return new e.Ellipse(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;if(e.Rect)return void console.warn("fabric.Rect is already defined");var r=e.Object.prototype.stateProperties.concat();r.push("rx","ry","x","y"),e.Rect=e.util.createClass(e.Object,{stateProperties:r,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(t){t=t||{},this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1===this.width&&1===this.height)return void t.fillRect(0,0,1,1);var i=this.rx?Math.min(this.rx,this.width/2):0,r=this.ry?Math.min(this.ry,this.height/2):0,s=this.width,n=this.height,o=e?this.left:-this.width/2,a=e?this.top:-this.height/2,h=0!==i||0!==r,c=.4477152502;t.beginPath(),t.moveTo(o+i,a),t.lineTo(o+s-i,a),h&&t.bezierCurveTo(o+s-c*i,a,o+s,a+c*r,o+s,a+r),t.lineTo(o+s,a+n-r),h&&t.bezierCurveTo(o+s,a+n-c*r,o+s-c*i,a+n,o+s-i,a+n),t.lineTo(o+i,a+n),h&&t.bezierCurveTo(o+c*i,a+n,o,a+n-c*r,o,a+n-r),t.lineTo(o,a+r),h&&t.bezierCurveTo(o,a+c*r,o+c*i,a,o+i,a),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=-this.width/2,r=-this.height/2,s=this.width,n=this.height;t.beginPath(),e.util.drawDashedLine(t,i,r,i+s,r,this.strokeDashArray),e.util.drawDashedLine(t,i+s,r,i+s,r+n,this.strokeDashArray),e.util.drawDashedLine(t,i+s,r+n,i,r+n,this.strokeDashArray),e.util.drawDashedLine(t,i,r+n,i,r,this.strokeDashArray),t.closePath()},toObject:function(t){var e=i(this.callSuper("toObject",t),{rx:this.get("rx")||0,ry:this.get("ry")||0});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.left,r=this.top;return this.group&&"path-group"===this.group.type||(i=-this.width/2,r=-this.height/2),e.push("<rect ",'x="',i,'" y="',r,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,r){if(!t)return null;r=r||{};var s=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0;var n=new e.Rect(i(r?e.util.object.clone(r):{},s));return n.visible=n.width>0&&n.height>0,n},e.Rect.fromObject=function(t){return new e.Rect(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Polyline?void e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,initialize:function(t,i){return e.Polygon.prototype.initialize.call(this,t,i)},_calcDimensions:function(){return e.Polygon.prototype._calcDimensions.call(this)},_applyPointOffset:function(){return e.Polygon.prototype._applyPointOffset.call(this)},toObject:function(t){return e.Polygon.prototype.toObject.call(this,t)},toSVG:function(t){return e.Polygon.prototype.toSVG.call(this,t)},_render:function(t){e.Polygon.prototype.commonRender.call(this,t)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var i,r;t.beginPath();for(var s=0,n=this.points.length;n>s;s++)i=this.points[s],r=this.points[s+1]||i,e.util.drawDashedLine(t,i.x,i.y,r.x,r.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,i){if(!t)return null;i||(i={});var r=e.parsePointsAttribute(t.getAttribute("points")),s=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);return new e.Polyline(r,e.util.object.extend(s,i))},void(e.Polyline.fromObject=function(t){var i=t.points;return new e.Polyline(i,t,!0)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.min,s=e.util.array.max,n=e.util.toFixed;return e.Polygon?void e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Object,{type:"polygon",points:null,minX:0,minY:0,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX)},_calcDimensions:function(){var t=this.points,e=r(t,"x"),i=r(t,"y"),n=s(t,"x"),o=s(t,"y");this.width=n-e||0,this.height=o-i||0,this.minX=e||0,this.minY=i||0},_applyPointOffset:function(){this.points.forEach(function(t){t.x-=this.minX+this.width/2,t.y-=this.minY+this.height/2},this)},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),r=0,s=this.points.length;s>r;r++)e.push(n(this.points[r].x,2),",",n(this.points[r].y,2)," ");return i.push("<",this.type," ",'points="',e.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(i.join("")):i.join("")},_render:function(t){this.commonRender(t)&&(this._renderFill(t),(this.stroke||this.strokeDashArray)&&(t.closePath(),this._renderStroke(t)))},commonRender:function(t){var e,i=this.points.length;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),this._applyPointOffset&&(this.group&&"path-group"===this.group.type||this._applyPointOffset(),this._applyPointOffset=null),t.moveTo(this.points[0].x,this.points[0].y);for(var r=0;i>r;r++)e=this.points[r],t.lineTo(e.x,e.y);return!0},_renderDashedStroke:function(t){e.Polyline.prototype._renderDashedStroke.call(this,t),t.closePath()},complexity:function(){return this.points.length}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,r){if(!t)return null;r||(r={});var s=e.parsePointsAttribute(t.getAttribute("points")),n=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);return new e.Polygon(s,i(n,r))},void(e.Polygon.fromObject=function(t){return new e.Polygon(t.points,t,!0)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,r=e.util.array.max,s=e.util.object.extend,n=Object.prototype.toString,o=e.util.drawArc,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h={m:"l",M:"L"};return e.Path?void e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,initialize:function(t,e){if(e=e||{},this.setOptions(e),!t)throw new Error("`path` argument is required");var i="[object Array]"===n.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._setPositionDimensions(e),e.sourcePath&&this.setSourcePath(e.sourcePath))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.minX=e.left,this.minY=e.top,this.width=e.width,this.height=e.height,"undefined"==typeof t.left&&(this.left=e.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),"undefined"==typeof t.top&&(this.top=e.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_render:function(t){var e,i,r,s=null,n=0,a=0,h=0,c=0,l=0,u=0,f=-this.pathOffset.x,d=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(f=0,d=0),t.beginPath();for(var g=0,p=this.path.length;p>g;++g){switch(e=this.path[g],e[0]){case"l":h+=e[1],c+=e[2],t.lineTo(h+f,c+d);break;case"L":h=e[1],c=e[2],t.lineTo(h+f,c+d);break;case"h":h+=e[1],t.lineTo(h+f,c+d);break;case"H":h=e[1],t.lineTo(h+f,c+d);break;case"v":c+=e[1],t.lineTo(h+f,c+d);break;case"V":c=e[1],t.lineTo(h+f,c+d);break;case"m":h+=e[1],c+=e[2],n=h,a=c,t.moveTo(h+f,c+d);break;case"M":h=e[1],c=e[2],n=h,a=c,t.moveTo(h+f,c+d);break;case"c":i=h+e[5],r=c+e[6],l=h+e[3],u=c+e[4],t.bezierCurveTo(h+e[1]+f,c+e[2]+d,l+f,u+d,i+f,r+d),h=i,c=r;break;case"C":h=e[5],c=e[6],l=e[3],u=e[4],t.bezierCurveTo(e[1]+f,e[2]+d,l+f,u+d,h+f,c+d);break;case"s":i=h+e[3],r=c+e[4],null===s[0].match(/[CcSs]/)?(l=h,u=c):(l=2*h-l,u=2*c-u),t.bezierCurveTo(l+f,u+d,h+e[1]+f,c+e[2]+d,i+f,r+d),l=h+e[1],u=c+e[2],h=i,c=r;break;case"S":i=e[3],r=e[4],null===s[0].match(/[CcSs]/)?(l=h,u=c):(l=2*h-l,u=2*c-u),t.bezierCurveTo(l+f,u+d,e[1]+f,e[2]+d,i+f,r+d),h=i,c=r,l=e[1],u=e[2];break;case"q":i=h+e[3],r=c+e[4],l=h+e[1],u=c+e[2],t.quadraticCurveTo(l+f,u+d,i+f,r+d),h=i,c=r;break;case"Q":i=e[3],r=e[4],t.quadraticCurveTo(e[1]+f,e[2]+d,i+f,r+d),h=i,c=r,l=e[1],u=e[2];break;case"t":i=h+e[1],r=c+e[2],null===s[0].match(/[QqTt]/)?(l=h,u=c):(l=2*h-l,u=2*c-u),t.quadraticCurveTo(l+f,u+d,i+f,r+d),h=i,c=r;break;case"T":i=e[1],r=e[2],null===s[0].match(/[QqTt]/)?(l=h,u=c):(l=2*h-l,u=2*c-u),t.quadraticCurveTo(l+f,u+d,i+f,r+d),h=i,c=r;break;case"a":o(t,h+f,c+d,[e[1],e[2],e[3],e[4],e[5],e[6]+h+f,e[7]+c+d]),h+=e[6],c+=e[7];break;case"A":o(t,h+f,c+d,[e[1],e[2],e[3],e[4],e[5],e[6]+f,e[7]+d]),h=e[6],c=e[7];break;case"z":case"Z":h=n,c=a,t.closePath()}s=e}this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){var e=s(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()}),pathOffset:this.pathOffset});return this.sourcePath&&(e.sourcePath=this.sourcePath),this.transformMatrix&&(e.transformMatrix=this.transformMatrix),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),r="",s=0,n=this.path.length;n>s;s++)e.push(this.path[s].join(" "));var o=e.join(" ");return this.group&&"path-group"===this.group.type||(r=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),i.push("<path ",'d="',o,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),r,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(i.join("")):i.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,r,s,n=[],o=[],c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,l=0,u=this.path.length;u>l;l++){for(t=this.path[l],r=t.slice(1).trim(),o.length=0;i=c.exec(r);)o.push(i[0]);s=[t.charAt(0)];for(var f=0,d=o.length;d>f;f++)e=parseFloat(o[f]),isNaN(e)||s.push(e);var g=s[0],p=a[g.toLowerCase()],v=h[g]||g;if(s.length-1>p)for(var b=1,m=s.length;m>b;b+=p)n.push([g].concat(s.slice(b,b+p))),g=v;else n.push(s)}return n},_parseDimensions:function(){for(var t,s,n,o,a=[],h=[],c=null,l=0,u=0,f=0,d=0,g=0,p=0,v=0,b=this.path.length;b>v;++v){switch(t=this.path[v],t[0]){case"l":f+=t[1],d+=t[2],o=[];break;case"L":f=t[1],d=t[2],o=[];break;case"h":f+=t[1],o=[];break;case"H":f=t[1],o=[];break;case"v":d+=t[1],o=[];break;case"V":d=t[1],o=[];break;case"m":f+=t[1],d+=t[2],l=f,u=d,o=[];break;case"M":f=t[1],d=t[2],l=f,u=d,o=[];break;case"c":s=f+t[5],n=d+t[6],g=f+t[3],p=d+t[4],o=e.util.getBoundsOfCurve(f,d,f+t[1],d+t[2],g,p,s,n),f=s,d=n;break;case"C":f=t[5],d=t[6],g=t[3],p=t[4],o=e.util.getBoundsOfCurve(f,d,t[1],t[2],g,p,f,d);break;case"s":s=f+t[3],n=d+t[4],null===c[0].match(/[CcSs]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),o=e.util.getBoundsOfCurve(f,d,g,p,f+t[1],d+t[2],s,n),g=f+t[1],p=d+t[2],f=s,d=n;break;case"S":s=t[3],n=t[4],null===c[0].match(/[CcSs]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),o=e.util.getBoundsOfCurve(f,d,g,p,t[1],t[2],s,n),f=s,d=n,g=t[1],p=t[2];break;case"q":s=f+t[3],n=d+t[4],g=f+t[1],p=d+t[2],o=e.util.getBoundsOfCurve(f,d,g,p,g,p,s,n),f=s,d=n;break;case"Q":g=t[1],p=t[2],o=e.util.getBoundsOfCurve(f,d,g,p,g,p,t[3],t[4]),f=t[3],d=t[4];break;case"t":s=f+t[1],n=d+t[2],null===c[0].match(/[QqTt]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),o=e.util.getBoundsOfCurve(f,d,g,p,g,p,s,n),f=s,d=n;break;case"T":s=t[1],n=t[2],null===c[0].match(/[QqTt]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),o=e.util.getBoundsOfCurve(f,d,g,p,g,p,s,n),f=s,d=n;break;case"a":o=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6]+f,t[7]+d),f+=t[6],d+=t[7];break;case"A":o=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),f=t[6],d=t[7];break;case"z":case"Z":f=l,d=u}c=t,o.forEach(function(t){a.push(t.x),h.push(t.y)}),a.push(f),h.push(d)}var m=i(a),y=i(h),_=r(a),x=r(h),C=_-m,S=x-y,w={left:m,top:y,width:C,height:S};return w}}),e.Path.fromObject=function(t,i){"string"==typeof t.path?e.loadSVGFromURL(t.path,function(r){var s=r[0],n=t.path;delete t.path,e.util.object.extend(s,t),s.setSourcePath(n),i(s)}):i(new e.Path(t.path,t))},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,r){var n=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);i&&i(new e.Path(n.d,s(n,r)))},void(e.Path.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.invoke,s=e.Object.prototype.toObject;return e.PathGroup?void e.warn("fabric.PathGroup is already defined"):(e.PathGroup=e.util.createClass(e.Path,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath)},parseDimensionsFromPaths:function(t){for(var i,r,s,n,o,a=[],h=[],c=this.transformMatrix,l=this.paths.length;l--;){s=this.paths[l],n=s.height+s.strokeWidth,o=s.width+s.strokeWidth,i=[{x:s.left,y:s.top},{x:s.left+o,y:s.top},{x:s.left,y:s.top+n},{x:s.left+o,y:s.top+n}];for(var u=0;u<i.length;u++)r=i[u],c&&(r=e.util.transformPoint(r,c,!1)),a.push(r.x),h.push(r.y)}t.width=Math.max.apply(null,a),t.height=Math.max.apply(null,h)},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),t.translate(-this.width/2,-this.height/2);for(var i=0,r=this.paths.length;r>i;++i)this.paths[i].render(t,!0);this.clipTo&&t.restore(),t.restore()}},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){var e=i(s.call(this,t),{paths:r(this.getObjects(),"toObject",t)});return this.sourcePath&&(e.sourcePath=this.sourcePath),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){for(var e=this.getObjects(),i=this.getPointByOrigin("left","top"),r="translate("+i.x+" "+i.y+")",s=["<g ",'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),r,this.getSvgTransform(),'" ',">\n"],n=0,o=e.length;o>n;n++)s.push(e[n].toSVG(t));return s.push("</g>\n"),t?t(s.join("")):s.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=(this.getObjects()[0].get("fill")||"").toLowerCase();return this.getObjects().every(function(e){return(e.get("fill")||"").toLowerCase()===t})},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,i){"string"==typeof t.paths?e.loadSVGFromURL(t.paths,function(r){var s=t.paths;delete t.paths;var n=e.util.groupSVGElements(r,t,s);i(n)}):e.util.enlivenObjects(t.paths,function(r){delete t.paths,i(new e.PathGroup(r,t))})},void(e.PathGroup.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.min,s=e.util.array.max,n=e.util.array.invoke;if(!e.Group){var o={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,initialize:function(t,e){e=e||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;this.originalState={},e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(){this.forEachObject(this._updateObjectCoords,this)},_updateObjectCoords:function(t){var e=t.getLeft(),i=t.getTop(),r=this.getCenterPoint();t.set({originalLeft:e,originalTop:i,left:e-r.x,top:i-r.y}),t.setCoords(),t.__origHasControls=t.hasControls,t.hasControls=!1},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._moveFlippedObject(t),this._restoreObjectsState(),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(t){t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){if(t in this.delegatedProperties||"canvas"===t)for(var i=this._objects.length;i--;)this._objects[i].set(t,e);this.callSuper("_set",t,e)},toObject:function(t){return i(this.callSuper("toObject",t),{objects:n(this._objects,"toObject",t)})},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this.clipTo&&e.util.clipContext(this,t);for(var i=0,r=this._objects.length;r>i;i++)this._renderObject(this._objects[i],t);this.clipTo&&t.restore(),t.restore()}},_renderControls:function(t,e){this.callSuper("_renderControls",t,e);for(var i=0,r=this._objects.length;r>i;i++)this._objects[i]._renderControls(t)},_renderObject:function(t,e){if(t.visible){var i=t.hasRotatingPoint;t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=i}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){return this._moveFlippedObject(t),this._setObjectPosition(t),t},_moveFlippedObject:function(t){var e=t.get("originX"),i=t.get("originY"),r=t.getCenterPoint();t.set({originX:"center",originY:"center",left:r.x,top:r.y}),this._toggleFlipping(t);var s=t.getPointByOrigin(e,i);return t.set({originX:e,originY:i,left:s.x,top:s.y}),this},_toggleFlipping:function(t){this.flipX&&(t.toggle("flipX"),t.set("left",-t.get("left")),t.setAngle(-t.getAngle())),this.flipY&&(t.toggle("flipY"),t.set("top",-t.get("top")),t.setAngle(-t.getAngle()))},_restoreObjectState:function(t){return this._setObjectPosition(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),t.setCoords(),delete t.group,this},_setObjectPosition:function(t){var e=this.getCenterPoint(),i=this._getRotatedLeftTop(t);t.set({angle:t.getAngle()+this.getAngle(),left:e.x+i.left,top:e.y+i.top,scaleX:t.get("scaleX")*this.get("scaleX"),scaleY:t.get("scaleY")*this.get("scaleY")})},_getRotatedLeftTop:function(t){var e=this.getAngle()*(Math.PI/180);return{left:-Math.sin(e)*t.getTop()*this.get("scaleY")+Math.cos(e)*t.getLeft()*this.get("scaleX"),top:Math.cos(e)*t.getTop()*this.get("scaleY")+Math.sin(e)*t.getLeft()*this.get("scaleX")}},destroy:function(){return this._objects.forEach(this._moveFlippedObject,this),this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords()}),this},_calcBounds:function(t){for(var e,i,r=[],s=[],n=["tr","br","bl","tl"],o=0,a=this._objects.length;a>o;++o){e=this._objects[o],e.setCoords();for(var h=0;h<n.length;h++)i=n[h],r.push(e.oCoords[i].x),s.push(e.oCoords[i].y)}this.set(this._getBounds(r,s,t))},_getBounds:function(t,i,n){var o=e.util.invertTransform(this.getViewportTransform()),a=e.util.transformPoint(new e.Point(r(t),r(i)),o),h=e.util.transformPoint(new e.Point(s(t),s(i)),o),c={width:h.x-a.x||0,height:h.y-a.y||0};return n||(c.left=a.x||0,c.top=a.y||0,"center"===this.originX&&(c.left+=c.width/2),"right"===this.originX&&(c.left+=c.width),"center"===this.originY&&(c.top+=c.height/2),"bottom"===this.originY&&(c.top+=c.height)),c},toSVG:function(t){for(var e=["<g ",'transform="',this.getSvgTransform(),'">\n'],i=0,r=this._objects.length;r>i;i++)e.push(this._objects[i].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in o){if(this[t])return this[t];for(var e=0,i=this._objects.length;i>e;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,i){e.util.enlivenObjects(t.objects,function(r){delete t.objects,i&&i(new e.Group(r,t))})},e.Group.async=!0}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=fabric.util.object.extend;return t.fabric||(t.fabric={}),t.fabric.Image?void fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",_lastScaleX:1,_lastScaleY:1,initialize:function(t,e){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element},setElement:function(t,e,i){return this._element=t,this._originalElement=t,this._initConfig(i),0!==this.filters.length?this.applyFilters(e):e&&e(),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){t.save(),this._setStrokeStyles(t),t.beginPath(),t.strokeRect(-this.width/2,-this.height/2,this.width,this.height),t.closePath(),t.restore()},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,r=this.width,s=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+r,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+r,i,e+r,i+s,this.strokeDashArray),fabric.util.drawDashedLine(t,e+r,i+s,e,i+s,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+s,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var i=e(this.callSuper("toObject",t),{src:this._originalElement.src||this._originalElement._src,filters:this.filters.map(function(t){return t&&t.toObject()}),crossOrigin:this.crossOrigin,alignX:this.alignX,alignY:this.alignY,meetOrSlice:this.meetOrSlice});return this.resizeFilters.length>0&&(i.resizeFilters=this.resizeFilters.map(function(t){return t&&t.toObject()})),i},toSVG:function(t){var e=[],i=-this.width/2,r=-this.height/2,s="none";if(this.group&&"path-group"===this.group.type&&(i=this.left,r=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(s="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n','<image xlink:href="',this.getSvgSrc(),'" x="',i,'" y="',r,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',s,'"',"></image>\n"),this.stroke||this.strokeDashArray){var n=this.fill;this.fill=null,e.push("<rect ",'x="',i,'" y="',r,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=n}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(){return this.getElement()?this.getElement().src||this.getElement()._src:void 0},setSrc:function(t,e,i){fabric.util.loadImage(t,function(t){return this.setElement(t,e,i)},this,i&&i.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(t,e){this.constructor.fromObject(this.toObject(e),t)},applyFilters:function(t,e,i,r){if(e=e||this.filters,
i=i||this._originalElement){var s=i,n=fabric.util.createCanvasElement(),o=fabric.util.createImage(),a=this;return n.width=s.width,n.height=s.height,n.getContext("2d").drawImage(s,0,0,s.width,s.height),0===e.length?(this._element=i,t&&t(),n):(e.forEach(function(t){t&&t.applyTo(n,t.scaleX||a.scaleX,t.scaleY||a.scaleY),!r&&t&&"Resize"===t.type&&(a.width*=t.scaleX,a.height*=t.scaleY)}),o.width=n.width,o.height=n.height,fabric.isLikelyNode?(o.src=n.toBuffer(void 0,fabric.Image.pngCompression),a._element=o,!r&&(a._filteredEl=o),t&&t()):(o.onload=function(){a._element=o,!r&&(a._filteredEl=o),t&&t(),o.onload=n=s=null},o.src=n.toDataURL("image/png")),n)}},_render:function(t,e){var i,r,s,n=this._findMargins();i=e?this.left:-this.width/2,r=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(i,r,this.width,this.height),t.clip()),this.isMoving===!1&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,s=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):s=this._element,s&&t.drawImage(s,i+n.marginX,r+n.marginY,n.width,n.height),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,i=this.width,r=this.height,s=0,n=0;return("none"!==this.alignX||"none"!==this.alignY)&&(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),i=this._element.width*e,r=this._element.height*e,"Mid"===this.alignX&&(s=(this.width-i)/2),"Max"===this.alignX&&(s=this.width-i),"Mid"===this.alignY&&(n=(this.height-r)/2),"Max"===this.alignY&&(n=this.height-r)),{width:i,height:r,marginX:s,marginY:n}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t){this.setElement(fabric.util.getById(t)),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()?this.getElement().width||0:0,this.height="height"in t?t.height:this.getElement()?this.getElement().height||0:0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){fabric.Image.prototype._initFilters.call(t,t.filters,function(r){t.filters=r||[],fabric.Image.prototype._initFilters.call(t,t.resizeFilters,function(r){t.resizeFilters=r||[];var s=new fabric.Image(i,t);e&&e(s)})})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,i))},null,i&&i.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href".split(" ")),fabric.Image.fromElement=function(t,i,r){var s,n,o,a=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES),h="xMidYMid",c="meet";a.preserveAspectRatio&&(o=a.preserveAspectRatio.split(" ")),o&&o.length&&(c=o.pop(),"meet"!==c&&"slice"!==c?(h=c,c="meet"):o.length&&(h=o.pop())),s="none"!==h?h.slice(1,4):"none",n="none"!==h?h.slice(5,8):"none",a.alignX=s,a.alignY=n,a.meetOrSlice=c,fabric.Image.fromURL(a["xlink:href"],i,e(r?fabric.util.object.clone(r):{},a))},fabric.Image.async=!0,void(fabric.Image.pngCompression=1))}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},i=t.onComplete||e,r=t.onChange||e,s=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){s.setAngle(t),r()},onComplete:function(){s.setCoords(),i()},onStart:function(){s.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Brightness=e.util.createClass(e.Image.filters.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),r=i.data,s=this.brightness,n=0,o=r.length;o>n;n+=4)r[n]+=s,r[n+1]+=s,r[n+2]+=s;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=function(t){return new e.Image.filters.Brightness(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Convolute=e.util.createClass(e.Image.filters.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0];var i=e.util.createCanvasElement();this.tmpCtx=i.getContext("2d")},_createImageData:function(t,e){return this.tmpCtx.createImageData(t,e)},applyTo:function(t){for(var e=this.matrix,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),s=Math.round(Math.sqrt(e.length)),n=Math.floor(s/2),o=r.data,a=r.width,h=r.height,c=a,l=h,u=this._createImageData(c,l),f=u.data,d=this.opaque?1:0,g=0;l>g;g++)for(var p=0;c>p;p++){for(var v=g,b=p,m=4*(g*c+p),y=0,_=0,x=0,C=0,S=0;s>S;S++)for(var w=0;s>w;w++){var O=v+S-n,T=b+w-n;if(!(0>O||O>h||0>T||T>a)){var k=4*(O*a+T),j=e[S*s+w];y+=o[k]*j,_+=o[k+1]*j,x+=o[k+2]*j,C+=o[k+3]*j}}f[m]=y,f[m+1]=_,f[m+2]=x,f[m+3]=C+d*(255-C)}i.putImageData(u,0,0)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=function(t){return new e.Image.filters.Convolute(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.GradientTransparency=e.util.createClass(e.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),r=i.data,s=this.threshold,n=r.length,o=0,a=r.length;a>o;o+=4)r[o+3]=s+255*(n-o)/n;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=function(t){return new e.Image.filters.GradientTransparency(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Grayscale=e.util.createClass(e.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),s=r.data,n=r.width*r.height*4,o=0;n>o;)e=(s[o]+s[o+1]+s[o+2])/3,s[o]=e,s[o+1]=e,s[o+2]=e,o+=4;i.putImageData(r,0,0)}}),e.Image.filters.Grayscale.fromObject=function(){return new e.Image.filters.Grayscale}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Invert=e.util.createClass(e.Image.filters.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),s=r.data,n=s.length;for(e=0;n>e;e+=4)s[e]=255-s[e],s[e+1]=255-s[e+1],s[e+2]=255-s[e+2];i.putImageData(r,0,0)}}),e.Image.filters.Invert.fromObject=function(){return new e.Image.filters.Invert}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Mask=e.util.createClass(e.Image.filters.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=[0,1,2,3].indexOf(t.channel)>-1?t.channel:0},applyTo:function(t){if(this.mask){var i,r=t.getContext("2d"),s=r.getImageData(0,0,t.width,t.height),n=s.data,o=this.mask.getElement(),a=e.util.createCanvasElement(),h=this.channel,c=s.width*s.height*4;a.width=o.width,a.height=o.height,a.getContext("2d").drawImage(o,0,0,o.width,o.height);var l=a.getContext("2d").getImageData(0,0,o.width,o.height),u=l.data;for(i=0;c>i;i+=4)n[i+3]=u[i+h];r.putImageData(s,0,0)}},toObject:function(){return i(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,i){e.util.loadImage(t.mask.src,function(r){t.mask=new e.Image(r,t.mask),i&&i(new e.Image.filters.Mask(t))})},e.Image.filters.Mask.async=!0}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Noise=e.util.createClass(e.Image.filters.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),s=r.data,n=this.noise,o=0,a=s.length;a>o;o+=4)e=(.5-Math.random())*n,s[o]+=e,s[o+1]+=e,s[o+2]+=e;i.putImageData(r,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=function(t){return new e.Image.filters.Noise(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Pixelate=e.util.createClass(e.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,r,s,n,o,a,h=t.getContext("2d"),c=h.getImageData(0,0,t.width,t.height),l=c.data,u=c.height,f=c.width;for(i=0;u>i;i+=this.blocksize)for(r=0;f>r;r+=this.blocksize){e=4*i*f+4*r,s=l[e],n=l[e+1],o=l[e+2],a=l[e+3];for(var d=i,g=i+this.blocksize;g>d;d++)for(var p=r,v=r+this.blocksize;v>p;p++)e=4*d*f+4*p,l[e]=s,l[e+1]=n,l[e+2]=o,l[e+3]=a}h.putImageData(c,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=function(t){return new e.Image.filters.Pixelate(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.RemoveWhite=e.util.createClass(e.Image.filters.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,r,s=t.getContext("2d"),n=s.getImageData(0,0,t.width,t.height),o=n.data,a=this.threshold,h=this.distance,c=255-a,l=Math.abs,u=0,f=o.length;f>u;u+=4)e=o[u],i=o[u+1],r=o[u+2],e>c&&i>c&&r>c&&l(e-i)<h&&l(e-r)<h&&l(i-r)<h&&(o[u+3]=1);s.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=function(t){return new e.Image.filters.RemoveWhite(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,r=t.getContext("2d"),s=r.getImageData(0,0,t.width,t.height),n=s.data,o=n.length;for(e=0;o>e;e+=4)i=.3*n[e]+.59*n[e+1]+.11*n[e+2],n[e]=i+100,n[e+1]=i+50,n[e+2]=i+255;r.putImageData(s,0,0)}}),e.Image.filters.Sepia.fromObject=function(){return new e.Image.filters.Sepia}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia2=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,r,s,n=t.getContext("2d"),o=n.getImageData(0,0,t.width,t.height),a=o.data,h=a.length;for(e=0;h>e;e+=4)i=a[e],r=a[e+1],s=a[e+2],a[e]=(.393*i+.769*r+.189*s)/1.351,a[e+1]=(.349*i+.686*r+.168*s)/1.203,a[e+2]=(.272*i+.534*r+.131*s)/2.14;n.putImageData(o,0,0)}}),e.Image.filters.Sepia2.fromObject=function(){return new e.Image.filters.Sepia2}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Tint=e.util.createClass(e.Image.filters.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity="undefined"!=typeof t.opacity?t.opacity:new e.Color(this.color).getAlpha()},applyTo:function(t){var i,r,s,n,o,a,h,c,l,u=t.getContext("2d"),f=u.getImageData(0,0,t.width,t.height),d=f.data,g=d.length;for(l=new e.Color(this.color).getSource(),r=l[0]*this.opacity,s=l[1]*this.opacity,n=l[2]*this.opacity,c=1-this.opacity,i=0;g>i;i+=4)o=d[i],a=d[i+1],h=d[i+2],d[i]=r+o*c,d[i+1]=s+a*c,d[i+2]=n+h*c;u.putImageData(f,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),e.Image.filters.Tint.fromObject=function(t){return new e.Image.filters.Tint(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Multiply=e.util.createClass(e.Image.filters.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var i,r,s=t.getContext("2d"),n=s.getImageData(0,0,t.width,t.height),o=n.data,a=o.length;for(r=new e.Color(this.color).getSource(),i=0;a>i;i+=4)o[i]*=r[0]/255,o[i+1]*=r[1]/255,o[i+2]*=r[2]/255;s.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Multiply.fromObject=function(t){return new e.Image.filters.Multiply(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric;e.Image.filters.Blend=e.util.createClass({type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var i,r,s,n,o,a,h,c,l,u,f=t.getContext("2d"),d=f.getImageData(0,0,t.width,t.height),g=d.data,p=!1;if(this.image){p=!0;var v=e.util.createCanvasElement();v.width=this.image.width,v.height=this.image.height;var b=new e.StaticCanvas(v);b.add(this.image);var m=b.getContext("2d");u=m.getImageData(0,0,b.width,b.height).data}else u=new e.Color(this.color).getSource(),i=u[0]*this.alpha,r=u[1]*this.alpha,s=u[2]*this.alpha;for(var y=0,_=g.length;_>y;y+=4)switch(n=g[y],o=g[y+1],a=g[y+2],p&&(i=u[y]*this.alpha,r=u[y+1]*this.alpha,s=u[y+2]*this.alpha),this.mode){case"multiply":g[y]=n*i/255,g[y+1]=o*r/255,g[y+2]=a*s/255;break;case"screen":g[y]=1-(1-n)*(1-i),g[y+1]=1-(1-o)*(1-r),g[y+2]=1-(1-a)*(1-s);break;case"add":g[y]=Math.min(255,n+i),g[y+1]=Math.min(255,o+r),g[y+2]=Math.min(255,a+s);break;case"diff":case"difference":g[y]=Math.abs(n-i),g[y+1]=Math.abs(o-r),g[y+2]=Math.abs(a-s);break;case"subtract":h=n-i,c=o-r,l=a-s,g[y]=0>h?0:h,g[y+1]=0>c?0:c,g[y+2]=0>l?0:l;break;case"darken":g[y]=Math.min(n,i),g[y+1]=Math.min(o,r),g[y+2]=Math.min(a,s);break;case"lighten":g[y]=Math.max(n,i),g[y+1]=Math.max(o,r),g[y+2]=Math.max(a,s)}f.putImageData(d,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.Blend.fromObject=function(t){return new e.Image.filters.Blend(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.pow,r=Math.floor,s=Math.sqrt,n=Math.abs,o=Math.max,a=Math.round,h=Math.sin,c=Math.ceil;e.Image.filters.Resize=e.util.createClass(e.Image.filters.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,i){this.rcpScaleX=1/e,this.rcpScaleY=1/i;var r,s=t.width,n=t.height,o=a(s*e),h=a(n*i);"sliceHack"===this.resizeType&&(r=this.sliceByTwo(t,s,n,o,h)),"hermite"===this.resizeType&&(r=this.hermiteFastResize(t,s,n,o,h)),"bilinear"===this.resizeType&&(r=this.bilinearFiltering(t,s,n,o,h)),"lanczos"===this.resizeType&&(r=this.lanczosResize(t,s,n,o,h)),t.width=o,t.height=h,t.getContext("2d").putImageData(r,0,0)},sliceByTwo:function(t,i,s,n,a){var h,c=t.getContext("2d"),l=.5,u=.5,f=1,d=1,g=!1,p=!1,v=i,b=s,m=e.util.createCanvasElement(),y=m.getContext("2d");for(n=r(n),a=r(a),m.width=o(n,i),m.height=o(a,s),n>i&&(l=2,f=-1),a>s&&(u=2,d=-1),h=c.getImageData(0,0,i,s),t.width=o(n,i),t.height=o(a,s),c.putImageData(h,0,0);!g||!p;)i=v,s=b,n*f<r(v*l*f)?v=r(v*l):(v=n,g=!0),a*d<r(b*u*d)?b=r(b*u):(b=a,p=!0),h=c.getImageData(0,0,i,s),y.putImageData(h,0,0),c.clearRect(0,0,v,b),c.drawImage(m,0,0,i,s,0,0,v,b);return c.getImageData(0,0,n,a)},lanczosResize:function(t,e,o,a,l){function u(t){return function(e){if(e>t)return 0;if(e*=Math.PI,n(e)<1e-16)return 1;var i=e/t;return h(e)*h(i)/e/i}}function f(t){var h,c,u,d,g,j,A,P,E,M,I;for(T.x=(t+.5)*y,k.x=r(T.x),h=0;l>h;h++){for(T.y=(h+.5)*_,k.y=r(T.y),g=0,j=0,A=0,P=0,E=0,c=k.x-S;c<=k.x+S;c++)if(!(0>c||c>=e)){M=r(1e3*n(c-T.x)),O[M]||(O[M]={});for(var D=k.y-w;D<=k.y+w;D++)0>D||D>=o||(I=r(1e3*n(D-T.y)),O[M][I]||(O[M][I]=m(s(i(M*x,2)+i(I*C,2))/1e3)),u=O[M][I],u>0&&(d=4*(D*e+c),g+=u,j+=u*v[d],A+=u*v[d+1],P+=u*v[d+2],E+=u*v[d+3]))}d=4*(h*a+t),b[d]=j/g,b[d+1]=A/g,b[d+2]=P/g,b[d+3]=E/g}return++t<a?f(t):p}var d=t.getContext("2d"),g=d.getImageData(0,0,e,o),p=d.getImageData(0,0,a,l),v=g.data,b=p.data,m=u(this.lanczosLobes),y=this.rcpScaleX,_=this.rcpScaleY,x=2/this.rcpScaleX,C=2/this.rcpScaleY,S=c(y*this.lanczosLobes/2),w=c(_*this.lanczosLobes/2),O={},T={},k={};return f(0)},bilinearFiltering:function(t,e,i,s,n){var o,a,h,c,l,u,f,d,g,p,v,b,m,y=0,_=this.rcpScaleX,x=this.rcpScaleY,C=t.getContext("2d"),S=4*(e-1),w=C.getImageData(0,0,e,i),O=w.data,T=C.getImageData(0,0,s,n),k=T.data;for(f=0;n>f;f++)for(d=0;s>d;d++)for(l=r(_*d),u=r(x*f),g=_*d-l,p=x*f-u,m=4*(u*e+l),v=0;4>v;v++)o=O[m+v],a=O[m+4+v],h=O[m+S+v],c=O[m+S+4+v],b=o*(1-g)*(1-p)+a*g*(1-p)+h*p*(1-g)+c*g*p,k[y++]=b;return T},hermiteFastResize:function(t,e,i,o,a){for(var h=this.rcpScaleX,l=this.rcpScaleY,u=c(h/2),f=c(l/2),d=t.getContext("2d"),g=d.getImageData(0,0,e,i),p=g.data,v=d.getImageData(0,0,o,a),b=v.data,m=0;a>m;m++)for(var y=0;o>y;y++){for(var _=4*(y+m*o),x=0,C=0,S=0,w=0,O=0,T=0,k=0,j=(m+.5)*l,A=r(m*l);(m+1)*l>A;A++)for(var P=n(j-(A+.5))/f,E=(y+.5)*h,M=P*P,I=r(y*h);(y+1)*h>I;I++){var D=n(E-(I+.5))/u,L=s(M+D*D);L>1&&-1>L||(x=2*L*L*L-3*L*L+1,x>0&&(D=4*(I+A*e),k+=x*p[D+3],S+=x,p[D+3]<255&&(x=x*p[D+3]/250),w+=x*p[D],O+=x*p[D+1],T+=x*p[D+2],C+=x))}b[_]=w/C,b[_+1]=O/C,b[_+2]=T/C,b[_+3]=k/S}return v},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=function(t){return new e.Image.filters.Resize(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.object.clone,s=e.util.toFixed,n=e.StaticCanvas.supports("setLineDash"),o=e.Object.NUM_FRACTION_DIGITS;if(e.Text)return void e.warn("fabric.Text is already defined");var a=e.Object.prototype.stateProperties.concat();a.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0,textAlign:!0},_reNewline:/\r?\n/,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:a,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.setOptions(e),this.__skipDimension=!1,this._initDimensions()},_initDimensions:function(t){if(!this.__skipDimension){t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this.text.split(this._reNewline),this._clearCache();var i=this.textAlign;this.textAlign="left",this.width=this._getTextWidth(t),this.textAlign=i,this.height=this._getTextHeight(t)}},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(t){this.clipTo&&e.util.clipContext(this,t),this._renderTextBackground(t),this._renderText(t),this._renderTextDecoration(t),this.clipTo&&t.restore()},_renderText:function(t){t.save(),this._translateForTextAlign(t),this._setOpacity(t),this._setShadow(t),this._setupCompositeOperation(t),this._renderTextFill(t),this._renderTextStroke(t),t.restore()},_translateForTextAlign:function(t){"left"!==this.textAlign&&"justify"!==this.textAlign&&t.translate("center"===this.textAlign?this.width/2:this.width,0)},_setTextStyles:function(t){t.textBaseline="alphabetic",this.skipTextAlign||(t.textAlign=this.textAlign),t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._textLines.length*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),i=1,r=this._textLines.length;r>i;i++){var s=this._getLineWidth(t,i);s>e&&(e=s)}return e},_renderChars:function(t,e,i,r,s){var n=t.slice(0,-4);if(this[n].toLive){var o=-this.width/2+this[n].offsetX||0,a=-this.height/2+this[n].offsetY||0;e.save(),e.translate(o,a),r-=o,s-=a}console.log(e.strokeStyle),e[t](i,r,s),this[n].toLive&&e.restore()},_renderTextLine:function(t,e,i,r,s,n){if(s-=this.fontSize*this._fontSizeFraction,"justify"!==this.textAlign)return void this._renderChars(t,e,i,r,s,n);var o=this._getLineWidth(e,n),a=this.width;if(a>=o)for(var h=i.split(/\s+/),c=this._getWidthOfWords(e,i,n),l=a-c,u=h.length-1,f=l/u,d=0,g=0,p=h.length;p>g;g++)this._renderChars(t,e,h[g],r+d,s,n),d+=e.measureText(h[g]).width+f;else this._renderChars(t,e,i,r,s,n)},_getWidthOfWords:function(t,e){return t.measureText(e.replace(/\s+/g,"")).width},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextFill:function(t){if(this.fill||this._skipFillStrokeCheck)for(var e=0,i=0,r=this._textLines.length;r>i;i++){var s=this._getHeightOfLine(t,i),n=s/this.lineHeight;this._renderTextLine("fillText",t,this._textLines[i],this._getLeftOffset(),this._getTopOffset()+e+n,i),e+=s}},_renderTextStroke:function(t){if(this.stroke&&0!==this.strokeWidth||this._skipFillStrokeCheck){var e=0;this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),n&&t.setLineDash(this.strokeDashArray)),t.beginPath();for(var i=0,r=this._textLines.length;r>i;i++){var s=this._getHeightOfLine(t,i),o=s/this.lineHeight;this._renderTextLine("strokeText",t,this._textLines[i],this._getLeftOffset(),this._getTopOffset()+e+o,i),e+=s}t.closePath(),t.restore()}},_getHeightOfLine:function(){return this.fontSize*this._fontSizeMult*this.lineHeight},_renderTextBackground:function(t){this._renderTextBoxBackground(t),this._renderTextLinesBackground(t)},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},_renderTextLinesBackground:function(t){var e=0,i=this._getHeightOfLine();if(this.textBackgroundColor){t.save(),t.fillStyle=this.textBackgroundColor;for(var r=0,s=this._textLines.length;s>r;r++){if(""!==this._textLines[r]){var n=this._getLineWidth(t,r),o=this._getLineLeftOffset(n);t.fillRect(this._getLeftOffset()+o,this._getTopOffset()+e,n,this.fontSize*this._fontSizeMult)}e+=i}t.restore()}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__lineOffsets=[]},_shouldClearCache:function(){var t=!1;for(var e in this._dimensionAffectingProps)this["__"+e]!==this[e]&&(this["__"+e]=this[e],t=!0);return t},_getLineWidth:function(t,e){return this.__lineWidths[e]?this.__lineWidths[e]:(this.__lineWidths[e]=t.measureText(this._textLines[e]).width,this.__lineWidths[e])},_renderTextDecoration:function(t){function e(e){var s,n,o,a,h=0;for(s=0,n=r._textLines.length;n>s;s++){var c=r._getLineWidth(t,s),l=r._getLineLeftOffset(c),u=r._getHeightOfLine(t,s);for(o=0,a=e.length;a>o;o++)t.fillRect(r._getLeftOffset()+l,h+(r._fontSizeMult-1+e[o])*r.fontSize-i,c,r.fontSize/15);h+=u}}if(this.textDecoration){var i=this.height/2,r=this,s=[];this.textDecoration.indexOf("underline")>-1&&s.push(.85),this.textDecoration.indexOf("line-through")>-1&&s.push(.43),this.textDecoration.indexOf("overline")>-1&&s.push(-.12),s.length>0&&e(s)}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(t.save(),this._setTextStyles(t),this._shouldClearCache()&&this._initDimensions(t),e||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._render(t),t.restore())},toObject:function(t){var e=i(this.callSuper("toObject",t),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,textBackgroundColor:this.textBackgroundColor});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this._getSVGLeftTopOffsets(this.ctx),r=this._getSVGTextAndBg(i.textTop,i.textLeft);return this._wrapSVGTextAndBg(e,r),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0),i=-this.width/2,r=0;return{textLeft:i+(this.group&&"path-group"===this.group.type?this.left:0),textTop:r+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){t.push('	<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',e.textBgRects.join(""),"		<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(),'" >',e.textSpans.join(""),"</text>\n","	</g>\n")},_getSVGTextAndBg:function(t,e){var i=[],r=[],s=0;this._setSVGBg(r);for(var n=0,o=this._textLines.length;o>n;n++)this.textBackgroundColor&&this._setSVGTextLineBg(r,n,e,t,s),this._setSVGTextLineText(n,i,s,e,t,r),s+=this._getHeightOfLine(this.ctx,n);return{textSpans:i,textBgRects:r}},_setSVGTextLineText:function(t,i,r,n,a){var h=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-a+r-this.height/2;i.push('<tspan x="',s(n+this._getLineLeftOffset(this.__lineWidths[t]),o),'" ','y="',s(h,o),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(this._textLines[t]),"</tspan>")},_setSVGTextLineBg:function(t,e,i,r,n){t.push("		<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',s(i+this._getLineLeftOffset(this.__lineWidths[e]),o),'" y="',s(n-this.height/2,o),'" width="',s(this.__lineWidths[e],o),'" height="',s(this._getHeightOfLine(this.ctx,e)/this.lineHeight,o),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,o),'" y="',s(-this.height/2,o),'" width="',s(this.width,o),'" height="',s(this.height,o),'"></rect>\n')},_getFillAttributes:function(t){var i=t&&"string"==typeof t?new e.Color(t):"";return i&&i.getSource()&&1!==i.getAlpha()?'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),t in this._dimensionAffectingProps&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i){if(!t)return null;var r=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);i=e.util.object.extend(i?e.util.object.clone(i):{},r),i.top=i.top||0,i.left=i.left||0,"dx"in r&&(i.left+=r.dx),"dy"in r&&(i.top+=r.dy),"fontSize"in i||(i.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),i.originX||(i.originX="left");var s=t.textContent.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),n=new e.Text(s,i),o=0;return"left"===n.originX&&(o=n.getWidth()/2),"right"===n.originX&&(o=-n.getWidth()/2),n.set({left:n.getLeft()+o,top:n.getTop()-n.getHeight()/2+n.fontSize*(.18+n._fontSizeFraction)}),n},e.Text.fromObject=function(t){return new e.Text(t.text,r(t))},e.util.createAccessors(e.Text)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.object.clone;fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_skipFillStrokeCheck:!1,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,_charWidthsCache:{},initialize:function(t,e){this.styles=e?e.styles||{}:{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__maxFontHeights=[],this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t=this.styles;for(var e in t)for(var i in t[e])for(var r in t[e][i])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this.selectionStart!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionStart=t),this._updateTextarea()},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this.selectionEnd!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionEnd=t),this._updateTextarea()},getSelectionStyles:function(t,e){if(2===arguments.length){for(var i=[],r=t;e>r;r++)i.push(this.getSelectionStyles(r));return i}var s=this.get2DCursorLocation(t);return this.styles[s.lineIndex]?this.styles[s.lineIndex][s.charIndex]||{}:{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._clearCache(),this},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this.styles[i.lineIndex]||(this.styles[i.lineIndex]={}),this.styles[i.lineIndex][i.charIndex]||(this.styles[i.lineIndex][i.charIndex]={}),fabric.util.object.extend(this.styles[i.lineIndex][i.charIndex],e)},_render:function(t){this.callSuper("_render",t),this.ctx=t,this.isEditing&&this.renderCursorOrSelection()},renderCursorOrSelection:function(){if(this.active){var t,e,i=this.text.split("");this.canvas.contextTop?(e=this.canvas.contextTop,e.save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix)):(e=this.ctx,e.save()),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(i,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(i,"selection"),this.renderSelection(i,t,e)),
e.restore()}},get2DCursorLocation:function(t){"undefined"==typeof t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0;e>i;i++){if(t<=this._textLines[i].length)return{lineIndex:i,charIndex:t};t-=this._textLines[i].length+1}return{lineIndex:i-1,charIndex:this._textLines[i-1].length<t?this._textLines[i-1].length:t}},getCurrentCharStyle:function(t,e){var i=this.styles[t]&&this.styles[t][0===e?0:e-1];return{fontSize:i&&i.fontSize||this.fontSize,fill:i&&i.fill||this.fill,textBackgroundColor:i&&i.textBackgroundColor||this.textBackgroundColor,textDecoration:i&&i.textDecoration||this.textDecoration,fontFamily:i&&i.fontFamily||this.fontFamily,fontWeight:i&&i.fontWeight||this.fontWeight,fontStyle:i&&i.fontStyle||this.fontStyle,stroke:i&&i.stroke||this.stroke,strokeWidth:i&&i.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){return this.styles[t]&&this.styles[t][0===e?0:e-1]&&this.styles[t][0===e?0:e-1].fontSize||this.fontSize},getCurrentCharColor:function(t,e){return this.styles[t]&&this.styles[t][0===e?0:e-1]&&this.styles[t][0===e?0:e-1].fill||this.cursorColor},_getCursorBoundaries:function(t,e){var i=Math.round(this._getLeftOffset()),r=this._getTopOffset(),s=this._getCursorBoundariesOffsets(t,e);return{left:i,top:r,leftOffset:s.left+s.lineLeft,topOffset:s.top}},_getCursorBoundariesOffsets:function(t,e){for(var i=0,r=0,s=0,n=0,o=0,a=0;a<this.selectionStart;a++)"\n"===t[a]?(o=0,n+=this._getHeightOfLine(this.ctx,r),r++,s=0):(o+=this._getWidthOfChar(this.ctx,t[a],r,s),s++),i=this._getCachedLineOffset(r);return"cursor"===e&&(n+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,r)/this.lineHeight-this.getCurrentCharFontSize(r,s)*(1-this._fontSizeFraction)),{top:n,left:o,lineLeft:i}},_getCachedLineOffset:function(t){var e=this._getLineWidth(this.ctx,t);return this.__lineOffsets[t]||(this.__lineOffsets[t]=this._getLineLeftOffset(e))},renderCursor:function(t,e){var i=this.get2DCursorLocation(),r=i.lineIndex,s=i.charIndex,n=this.getCurrentCharFontSize(r,s),o=0===r&&0===s?this._getCachedLineOffset(r):t.leftOffset;e.fillStyle=this.getCurrentCharColor(r,s),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+o,t.top+t.topOffset,this.cursorWidth/this.scaleX,n)},renderSelection:function(t,e,i){i.fillStyle=this.selectionColor;for(var r=this.get2DCursorLocation(this.selectionStart),s=this.get2DCursorLocation(this.selectionEnd),n=r.lineIndex,o=s.lineIndex,a=n;o>=a;a++){var h=this._getCachedLineOffset(a)||0,c=this._getHeightOfLine(this.ctx,a),l=0,u=this._textLines[a];if(a===n)for(var f=0,d=u.length;d>f;f++)f>=r.charIndex&&(a!==o||f<s.charIndex)&&(l+=this._getWidthOfChar(i,u[f],a,f)),f<r.charIndex&&(h+=this._getWidthOfChar(i,u[f],a,f));else if(a>n&&o>a)l+=this._getLineWidth(i,a)||5;else if(a===o)for(var g=0,p=s.charIndex;p>g;g++)l+=this._getWidthOfChar(i,u[g],a,g);i.fillRect(e.left+h,e.top+e.topOffset,l,c),e.topOffset+=c}},_renderChars:function(t,e,i,r,s,n){if(this.isEmptyStyles())return this._renderCharsFast(t,e,i,r,s);this.skipTextAlign=!0,r-="center"===this.textAlign?this.width/2:"right"===this.textAlign?this.width:0;var o,a=this._getHeightOfLine(e,n),h=this._getCachedLineOffset(n),c="";r+=h||0,e.save(),s-=a/this.lineHeight*this._fontSizeFraction;for(var l=0,u=i.length;u>=l;l++){o=o||this.getCurrentCharStyle(n,l);var f=this.getCurrentCharStyle(n,l+1);(this._hasStyleChanged(o,f)||l===u)&&(this._renderChar(t,e,n,l-1,c,r,s,a),c="",o=f),c+=i[l]}e.restore()},_renderCharsFast:function(t,e,i,r,s){this.skipTextAlign=!1,"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,i,r,s),"strokeText"===t&&(this.stroke&&this.strokeWidth>0||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,i,r,s)},_renderChar:function(t,e,i,r,s,n,o,a){var h,c,l,u=this._fontSizeFraction*a/this.lineHeight;if(this.styles&&this.styles[i]&&(h=this.styles[i][r])){var f=h.stroke||this.stroke,d=h.fill||this.fill;e.save(),c=this._applyCharStylesGetWidth(e,s,i,r,h),l=this._getHeightOfChar(e,s,i,r),d&&e.fillText(s,n,o),f&&e.strokeText(s,n,o),this._renderCharDecoration(e,h,n,o,u,c,l),e.restore(),e.translate(c,0)}else"strokeText"===t&&this.stroke&&e[t](s,n,o),"fillText"===t&&this.fill&&e[t](s,n,o),c=this._applyCharStylesGetWidth(e,s,i,r),this._renderCharDecoration(e,null,n,o,u,c,this.fontSize),e.translate(e.measureText(s).width,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,i,r,s,n,o){var a=e?e.textDecoration||this.textDecoration:this.textDecoration;a&&(a.indexOf("underline")>-1&&t.fillRect(i,r+o/10,n,o/15),a.indexOf("line-through")>-1&&t.fillRect(i,r-o*(this._fontSizeFraction+this._fontSizeMult-1)+o/15,n,o/15),a.indexOf("overline")>-1&&t.fillRect(i,r-(this._fontSizeMult-this._fontSizeFraction)*o,n,o/15))},_renderTextLine:function(t,e,i,r,s,n){this.isEmptyStyles()||(s+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,i,r,s,n)},_renderTextDecoration:function(t){return this.isEmptyStyles()?this.callSuper("_renderTextDecoration",t):void 0},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styles){t.save(),this.textBackgroundColor&&(t.fillStyle=this.textBackgroundColor);for(var e=0,i=0,r=this._textLines.length;r>i;i++){var s=this._getHeightOfLine(t,i);if(""!==this._textLines[i]){var n=this._getLineWidth(t,i),o=this._getCachedLineOffset(i);if(this.textBackgroundColor&&(t.fillStyle=this.textBackgroundColor,t.fillRect(this._getLeftOffset()+o,this._getTopOffset()+e,n,s/this.lineHeight)),this.styles[i])for(var a=0,h=this._textLines[i].length;h>a;a++)if(this.styles[i]&&this.styles[i][a]&&this.styles[i][a].textBackgroundColor){var c=this._textLines[i][a];t.fillStyle=this.styles[i][a].textBackgroundColor,t.fillRect(this._getLeftOffset()+o+this._getWidthOfCharsAt(t,i,a),this._getTopOffset()+e,this._getWidthOfChar(t,c,i,a)+1,s/this.lineHeight)}e+=s}else e+=s}t.restore()}},_getCacheProp:function(t,e){return t+e.fontFamily+e.fontSize+e.fontWeight+e.fontStyle+e.shadow},_applyCharStylesGetWidth:function(e,i,r,s,n){var o=n||this.styles[r]&&this.styles[r][s];o=o?t(o):{},this._applyFontStyles(o);var a=this._getCacheProp(i,o);if(this.isEmptyStyles()&&this._charWidthsCache[a]&&this.caching)return this._charWidthsCache[a];"string"==typeof o.shadow&&(o.shadow=new fabric.Shadow(o.shadow));var h=o.fill||this.fill;return e.fillStyle=h.toLive?h.toLive(e,this):h,o.stroke&&(e.strokeStyle=o.stroke&&o.stroke.toLive?o.stroke.toLive(e,this):o.stroke),e.lineWidth=o.strokeWidth||this.strokeWidth,e.font=this._getFontDeclaration.call(o),this._setShadow.call(o,e),this.caching?(this._charWidthsCache[a]||(this._charWidthsCache[a]=e.measureText(i).width),this._charWidthsCache[a]):e.measureText(i).width},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(e,i){return this.styles[e]&&this.styles[e][i]?t(this.styles[e][i]):{}},_getWidthOfChar:function(t,e,i,r){if("justify"===this.textAlign&&/\s/.test(e))return this._getWidthOfSpace(t,i);var s=this._getStyleDeclaration(i,r);this._applyFontStyles(s);var n=this._getCacheProp(e,s);if(this._charWidthsCache[n]&&this.caching)return this._charWidthsCache[n];if(t){t.save();var o=this._applyCharStylesGetWidth(t,e,i,r);return t.restore(),o}},_getHeightOfChar:function(t,e,i,r){return this.styles[i]&&this.styles[i][r]?this.styles[i][r].fontSize||this.fontSize:this.fontSize},_getHeightOfCharAt:function(t,e,i){var r=this._textLines[e][i];return this._getHeightOfChar(t,r,e,i)},_getWidthOfCharsAt:function(t,e,i){var r,s,n=0;for(r=0;i>r;r++)s=this._textLines[e][r],n+=this._getWidthOfChar(t,s,e,r);return n},_getLineWidth:function(t,e){return this.__lineWidths[e]?this.__lineWidths[e]:(this.__lineWidths[e]=this._getWidthOfCharsAt(t,e,this._textLines[e].length),this.__lineWidths[e])},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var i=this._textLines[e],r=this._getWidthOfWords(t,i,e),s=this.width-r,n=i.length-i.replace(/\s+/g,"").length,o=s/n;return this.__widthOfSpace[e]=o,o},_getWidthOfWords:function(t,e,i){for(var r=0,s=0;s<e.length;s++){var n=e[s];n.match(/\s/)||(r+=this._getWidthOfChar(t,n,i,s))}return r},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var i=this._textLines[e],r=this._getHeightOfChar(t,i[0],e,0),s=1,n=i.length;n>s;s++){var o=this._getHeightOfChar(t,i[s],e,s);o>r&&(r=o)}return this.__maxFontHeights[e]=r,this.__lineHeights[e]=r*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e=0,i=0,r=this._textLines.length;r>i;i++)e+=this._getHeightOfLine(t,i);return e},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},toObject:function(e){return fabric.util.object.extend(this.callSuper("toObject",e),{styles:t(this.styles)})}}),fabric.IText.fromObject=function(e){return new fabric.IText(e.text,t(e))}}(),function(){var t=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation()},initSelectedHandler:function(){this.on("selected",function(){var t=this;setTimeout(function(){t.selected=!0},100)})},initAddedHandler:function(){var t=this;this.on("added",function(){this.canvas&&!this.canvas._hasITextHandlers&&(this.canvas._hasITextHandlers=!0,this._initCanvasHandlers()),t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],t.canvas._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],fabric.util.removeFromArray(t.canvas._iTextInstances,t))})},_initCanvasHandlers:function(){var t=this;this.canvas.on("selection:cleared",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)}),this.canvas.on("mouse:up",function(){t.canvas._iTextInstances&&t.canvas._iTextInstances.forEach(function(t){t.__isMousedown=!1})}),this.canvas.on("object:selected",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)})},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,r){var s;return s={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){s.isAborted||t[r]()},onChange:function(){t.canvas&&(t.canvas.clearContext(t.canvas.contextTop||t.ctx),t.renderCursorOrSelection())},abort:function(){return s.isAborted}}),s},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),this._currentCursorOpacity=1,this.canvas&&(this.canvas.clearContext(this.canvas.contextTop||this.ctx),this.renderCursorOrSelection()),this._cursorTimeout2&&clearTimeout(this._cursorTimeout2),this._cursorTimeout2=setTimeout(function(){e._tick()},i)},abortCursorAnimation:function(){this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.setSelectionStart(0),this.setSelectionEnd(this.text.length)},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i--;for(;/\S/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i++;for(;/\S/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=this.getSelectedText(),e=0,i=0,r=t.length;r>i;i++)"\n"===t[i]&&e++;return e},searchWordBoundary:function(t,e){for(var i=this._reSpace.test(this.text.charAt(t))?t-1:t,r=this.text.charAt(i),s=/[ \n\.,;!\?\-]/;!s.test(r)&&i>0&&i<this.text.length;)i+=e,r=this.text.charAt(i);return s.test(r)&&"\n"!==r&&(i+=1===e?0:1),i},selectWord:function(t){var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.setSelectionStart(e),this.setSelectionEnd(i)},selectLine:function(t){var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);this.setSelectionStart(e),this.setSelectionEnd(i)},enterEditing:function(){return!this.isEditing&&this.editable?(this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._tick(),this.fire("editing:entered"),this.canvas?(this.canvas.renderAll(),this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this):this):void 0},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){var t=this;this.canvas.on("mouse:move",function(e){if(t.__isMousedown&&t.isEditing){var i=t.getSelectionStartFromPointer(e.e);i>=t.__selectionStartOnMouseDown?(t.setSelectionStart(t.__selectionStartOnMouseDown),t.setSelectionEnd(i)):(t.setSelectionStart(i),t.setSelectionEnd(t.__selectionStartOnMouseDown))}})},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){this.hiddenTextarea&&(this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd)},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),this.canvas&&this.canvas.fire("text:editing:exited",{target:this}),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(;e!==t;)this._removeSingleCharAndStyle(t+1),e--;this.setSelectionStart(t)},_removeSingleCharAndStyle:function(t){var e="\n"===this.text[t-1],i=e?t:t-1;this.removeStyleObject(e,i),this.text=this.text.slice(0,t-1)+this.text.slice(t),this._textLines=this.text.split(this._reNewline)},insertChars:function(t,e){this.selectionEnd-this.selectionStart>1&&(this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.setSelectionEnd(this.selectionStart));var i="\n"===this.text[this.selectionStart];this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this.insertStyleObjects(t,i,e),this.setSelectionStart(this.selectionStart+t.length),this.setSelectionEnd(this.selectionStart),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},insertNewlineStyleObject:function(e,i,r){this.shiftLineStyles(e,1),this.styles[e+1]||(this.styles[e+1]={});var s={},n={};if(this.styles[e]&&this.styles[e][i-1]&&(s=this.styles[e][i-1]),r)n[0]=t(s),this.styles[e+1]=n;else{for(var o in this.styles[e])parseInt(o,10)>=i&&(n[parseInt(o,10)-i]=this.styles[e][o],delete this.styles[e][o]);this.styles[e+1]=n}this._clearCache()},insertCharStyleObject:function(e,i,r){var s=this.styles[e],n=t(s);0!==i||r||(i=1);for(var o in n){var a=parseInt(o,10);a>=i&&(s[a+1]=n[a])}this.styles[e][i]=r||t(s[i-1]),this._clearCache()},insertStyleObjects:function(t,e,i){var r=this.get2DCursorLocation(),s=r.lineIndex,n=r.charIndex;this.styles[s]||(this.styles[s]={}),"\n"===t?this.insertNewlineStyleObject(s,n,e):i?this._insertStyles(this.copiedStyles):this.insertCharStyleObject(s,n)},_insertStyles:function(t){for(var e=0,i=t.length;i>e;e++){var r=this.get2DCursorLocation(this.selectionStart+e),s=r.lineIndex,n=r.charIndex;this.insertCharStyleObject(s,n,t[e])}},shiftLineStyles:function(e,i){var r=t(this.styles);for(var s in this.styles){var n=parseInt(s,10);n>e&&(this.styles[n+i]=r[n],r[n-i]||delete this.styles[n])}},removeStyleObject:function(e,i){var r=this.get2DCursorLocation(i),s=r.lineIndex,n=r.charIndex;if(e){var o=this._textLines[s-1],a=o?o.length:0;this.styles[s-1]||(this.styles[s-1]={});for(n in this.styles[s])this.styles[s-1][parseInt(n,10)+a]=this.styles[s][n];this.shiftLineStyles(s,-1)}else{var h=this.styles[s];h&&delete h[n];var c=t(h);for(var l in c){var u=parseInt(l,10);u>=n&&0!==u&&(h[u-1]=c[u],delete h[u])}}},insertNewline:function(){this.insertChars("\n")}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initSelectedHandler(),this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.hiddenTextarea&&this.canvas&&this.canvas.wrapperEl.appendChild(this.hiddenTextarea),this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.initDelayedCursor(!0))})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,this._isObjectMoved(t.e)||(this.__lastSelected&&(this.enterEditing(),this.initDelayedCursor(!0)),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t);t.shiftKey?e<this.selectionStart?(this.setSelectionEnd(this.selectionStart),this.setSelectionStart(e)):this.setSelectionEnd(e):(this.setSelectionStart(e),this.setSelectionEnd(e))},_getLocalRotatedPointer:function(t){var e=this.canvas.getPointer(t),i=new fabric.Point(e.x,e.y),r=new fabric.Point(this.left,this.top),s=fabric.util.rotatePoint(i,r,fabric.util.degreesToRadians(-this.angle));return this.getLocalPointer(t,s)},getSelectionStartFromPointer:function(t){for(var e,i,r=this._getLocalRotatedPointer(t),s=0,n=0,o=0,a=0,h=0,c=this._textLines.length;c>h;h++){i=this._textLines[h],o+=this._getHeightOfLine(this.ctx,h)*this.scaleY;var l=this._getLineWidth(this.ctx,h),u=this._getLineLeftOffset(l);n=u*this.scaleX,this.flipX&&(this._textLines[h]=i.reverse().join(""));for(var f=0,d=i.length;d>f;f++){if(s=n,n+=this._getWidthOfChar(this.ctx,i[f],h,this.flipX?d-f:f)*this.scaleX,!(o<=r.y||n<=r.x))return this._getNewSelectionStartFromOffset(r,s,n,a+h,d);a++}if(r.y<o)return this._getNewSelectionStartFromOffset(r,s,n,a+h,d)}return"undefined"==typeof e?this.text.length:void 0},_getNewSelectionStartFromOffset:function(t,e,i,r,s){var n=t.x-e,o=i-t.x,a=o>n?0:1,h=r+a;return this.flipX&&(h=s-h),h>this.text.length&&(h=this.text.length),h}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.style.cssText="position: fixed; bottom: 20px; left: 0px; opacity: 0; width: 0px; height: 0px; z-index: -999;",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keypress",this.onKeyPress.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},_ctrlKeysMap:{65:"selectAll",88:"cut"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this._keysMap)this[this._keysMap[t.keyCode]](t);else{if(!(t.keyCode in this._ctrlKeysMap&&(t.ctrlKey||t.metaKey)))return;this[this._ctrlKeysMap[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()}},forwardDelete:function(t){this.selectionStart===this.selectionEnd&&this.moveCursorRight(t),this.removeChars(t)},copy:function(t){var e=this.getSelectedText(),i=this._getClipboardData(t);i&&i.setData("text",e),this.copiedText=e,this.copiedStyles=this.getSelectionStyles(this.selectionStart,this.selectionEnd)},paste:function(t){var e=null,i=this._getClipboardData(t);e=i?i.getData("text"):this.copiedText,e&&this.insertChars(e,!0)},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(),this.removeChars(t))},_getClipboardData:function(t){return t&&(t.clipboardData||fabric.window.clipboardData)},onKeyPress:function(t){!this.isEditing||t.metaKey||t.ctrlKey||(0!==t.which&&this.insertChars(String.fromCharCode(t.which)),t.stopPropagation())},getDownCursorOffset:function(t,e){var i,r,s=e?this.selectionEnd:this.selectionStart,n=this.get2DCursorLocation(s),o=n.lineIndex,a=this._textLines[o].slice(0,n.charIndex),h=this._textLines[o].slice(n.charIndex),c=this._textLines[o+1]||"";if(o===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-s;var l=this._getLineWidth(this.ctx,o);r=this._getLineLeftOffset(l);for(var u=r,f=0,d=a.length;d>f;f++)i=a[f],u+=this._getWidthOfChar(this.ctx,i,o,f);var g=this._getIndexOnNextLine(n,c,u);return h.length+1+g},_getIndexOnNextLine:function(t,e,i){for(var r,s=t.lineIndex+1,n=this._getLineWidth(this.ctx,s),o=this._getLineLeftOffset(n),a=o,h=0,c=0,l=e.length;l>c;c++){var u=e[c],f=this._getWidthOfChar(this.ctx,u,s,c);if(a+=f,a>i){r=!0;var d=a-f,g=a,p=Math.abs(d-i),v=Math.abs(g-i);h=p>v?c+1:c;break}}return r||(h=e.length),h},moveCursorDown:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getDownCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorDownWithShift(e):this.moveCursorDownWithoutShift(e),this.initDelayedCursor()},moveCursorDownWithoutShift:function(t){this._selectionDirection="right",this.setSelectionStart(this.selectionStart+t),this.setSelectionEnd(this.selectionStart)},swapSelectionPoints:function(){var t=this.selectionEnd;this.setSelectionEnd(this.selectionStart),this.setSelectionStart(t)},moveCursorDownWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="right"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd+t):this.setSelectionStart(this.selectionStart+t),this.selectionEnd<this.selectionStart&&"left"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="right"),this.selectionEnd>this.text.length&&this.setSelectionEnd(this.text.length)},getUpCursorOffset:function(t,e){var i=e?this.selectionEnd:this.selectionStart,r=this.get2DCursorLocation(i),s=r.lineIndex;if(0===s||t.metaKey||33===t.keyCode)return i;for(var n,o=this._textLines[s].slice(0,r.charIndex),a=this._textLines[s-1]||"",h=this._getLineWidth(this.ctx,r.lineIndex),c=this._getLineLeftOffset(h),l=c,u=0,f=o.length;f>u;u++)n=o[u],l+=this._getWidthOfChar(this.ctx,n,s,u);var d=this._getIndexOnPrevLine(r,a,l);return a.length-d+o.length},_getIndexOnPrevLine:function(t,e,i){for(var r,s=t.lineIndex-1,n=this._getLineWidth(this.ctx,s),o=this._getLineLeftOffset(n),a=o,h=0,c=0,l=e.length;l>c;c++){var u=e[c],f=this._getWidthOfChar(this.ctx,u,s,c);if(a+=f,a>i){r=!0;var d=a-f,g=a,p=Math.abs(d-i),v=Math.abs(g-i);h=p>v?c:c-1;break}}return r||(h=e.length-1),h},moveCursorUp:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getUpCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorUpWithShift(e):this.moveCursorUpWithoutShift(e),this.initDelayedCursor()},moveCursorUpWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="left"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd-t):this.setSelectionStart(this.selectionStart-t),this.selectionEnd<this.selectionStart&&"right"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="left")},moveCursorUpWithoutShift:function(t){this.selectionStart===this.selectionEnd&&this.setSelectionStart(this.selectionStart-t),this.setSelectionEnd(this.selectionStart),this._selectionDirection="left"},moveCursorLeft:function(t){(0!==this.selectionStart||0!==this.selectionEnd)&&(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorLeftWithShift(t):this.moveCursorLeftWithoutShift(t),this.initDelayedCursor())},_move:function(t,e,i){var r="selectionStart"===e?"setSelectionStart":"setSelectionEnd";this[r](t.altKey?this["findWordBoundary"+i](this[e]):t.metaKey||35===t.keyCode||36===t.keyCode?this["findLineBoundary"+i](this[e]):this[e]+("Left"===i?-1:1))},_moveLeft:function(t,e){this._move(t,e,"Left")},_moveRight:function(t,e){this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this._moveLeft(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)},moveCursorLeftWithShift:function(t){"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):(this._selectionDirection="left",this._moveLeft(t,"selectionStart"))},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorRightWithShift(t):this.moveCursorRightWithoutShift(t),this.initDelayedCursor())},moveCursorRightWithShift:function(t){"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):(this._selectionDirection="right",this._moveRight(t,"selectionEnd"))},moveCursorRightWithoutShift:function(t){this._selectionDirection="right",this.selectionStart===this.selectionEnd?(this._moveRight(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)):(this.setSelectionEnd(this.selectionEnd+this.getNumNewLinesInSelectedText()),this.setSelectionStart(this.selectionEnd))},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this._clearCache(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var i=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(i,this.selectionStart),this.setSelectionStart(i)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),function(){var t=fabric.util.toFixed,e=fabric.Object.NUM_FRACTION_DIGITS;fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,i,r,s,n){this.styles[t]?this._setSVGTextLineChars(t,e,i,r,n):this.callSuper("_setSVGTextLineText",t,e,i,r,s)},_setSVGTextLineChars:function(t,e,i,r,s){for(var n=this._textLines[t],o=0,a=this._getSVGLineLeftOffset(t)-this.width/2,h=this._getSVGLineTopOffset(t),c=this._getHeightOfLine(this.ctx,t),l=0,u=n.length;u>l;l++){var f=this.styles[t][l]||{};e.push(this._createTextCharSpan(n[l],f,a,h.lineTop+h.offset,o));var d=this._getWidthOfChar(this.ctx,n[l],t,l);f.textBackgroundColor&&s.push(this._createTextCharBg(f,a,h.lineTop,c,d,o)),o+=d}},_getSVGLineLeftOffset:function(t){return fabric.util.toFixed(this._getLineLeftOffset(this.__lineWidths[t]),2)},_getSVGLineTopOffset:function(t){for(var e=0,i=0,r=0;t>r;r++)e+=this._getHeightOfLine(this.ctx,r);return i=this._getHeightOfLine(this.ctx,r),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(i,r,s,n,o,a){return['<rect fill="',i.textBackgroundColor,'" x="',t(r+a,e),'" y="',t(s-this.height/2,e),'" width="',t(o,e),'" height="',t(n/this.lineHeight,e),'"></rect>'].join("")},_createTextCharSpan:function(t,e,i,r,s){var n=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text"},e));return['<tspan x="',i+s,'" y="',r-this.height/2,'" ',e.fontFamily?'font-family="'+e.fontFamily.replace(/"/g,"'")+'" ':"",e.fontSize?'font-size="'+e.fontSize+'" ':"",e.fontStyle?'font-style="'+e.fontStyle+'" ':"",e.fontWeight?'font-weight="'+e.fontWeight+'" ':"",e.textDecoration?'text-decoration="'+e.textDecoration+'" ':"",'style="',n,'">',fabric.util.string.escapeXml(t),"</tspan>"].join("");

}})}(),function(){function request(t,e,i){var r=URL.parse(t);r.port||(r.port=0===r.protocol.indexOf("https:")?443:80);var s=0===r.protocol.indexOf("https:")?HTTPS:HTTP,n=s.request({hostname:r.hostname,port:r.port,path:r.path,method:"GET"},function(t){var r="";e&&t.setEncoding(e),t.on("end",function(){i(r)}),t.on("data",function(e){200===t.statusCode&&(r+=e)})});n.on("error",function(t){fabric.log(t.errno===process.ECONNREFUSED?"ECONNREFUSED: connection refused to "+r.hostname+":"+r.port:t.message),i(null)}),n.end()}function requestFs(t,e){var i=require("fs");i.readFile(t,function(t,i){if(t)throw fabric.log(t),t;e(i)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(t,e,i){function r(r){r?(s.src=new Buffer(r,"binary"),s._src=t,e&&e.call(i,s)):(s=null,e&&e.call(i,null,!0))}var s=new Image;t&&(t instanceof Buffer||0===t.indexOf("data"))?(s.src=s._src=t,e&&e.call(i,s)):t&&0!==t.indexOf("http")?requestFs(t,r):t?request(t,"binary",r):e&&e.call(i,t)},fabric.loadSVGFromURL=function(t,e,i){t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim(),0!==t.indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,i)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,i)})},fabric.loadSVGFromString=function(t,e,i){var r=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(r.documentElement,function(t,i){e&&e(t,i)},i)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){var r=new fabric.Image(i);r._initConfig(t),r._initFilters(t.filters,function(i){r.filters=i||[],r._initFilters(t.resizeFilters,function(t){r.resizeFilters=t||[],e&&e(r)})})})},fabric.createCanvasForNode=function(t,e,i,r){r=r||i;var s=fabric.document.createElement("canvas"),n=new Canvas(t||600,e||600,r);s.style={},s.width=n.width,s.height=n.height;var o=fabric.Canvas||fabric.StaticCanvas,a=new o(s,i);return a.contextContainer=n.getContext("2d"),a.nodeCanvas=n,a.Font=Canvas.Font,a},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)};var origSetWidth=fabric.StaticCanvas.prototype.setWidth;fabric.StaticCanvas.prototype.setWidth=function(t,e){return origSetWidth.call(this,t,e),this.nodeCanvas.width=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setWidth=fabric.StaticCanvas.prototype.setWidth);var origSetHeight=fabric.StaticCanvas.prototype.setHeight;fabric.StaticCanvas.prototype.setHeight=function(t,e){return origSetHeight.call(this,t,e),this.nodeCanvas.height=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setHeight=fabric.StaticCanvas.prototype.setHeight)}}()}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["ryanswapp:fabricjs"]={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.coffeescript={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["blaze-html-templates"]={}}();

!function(){var e=Package.meteor.Meteor,a=Package.tracker.Tracker,i=Package.tracker.Deps,n=Package.ui.Blaze,s=Package.ui.UI,r=Package.ui.Handlebars,o=Package.spacebars.Spacebars,t=Package.templating.Template,d=Package.htmljs.HTML,l,u;(function(){l="object"==typeof l?l:{};var a=l;e.startup(function(){return e.isClient?t.registerHelper("t9n",function(e,a){return u.get(e,!0,a.hash)}):void 0}),u=function(){function e(){}return e.maps={},e.defaultLanguage="en",e.language="",e.dep=new i.Dependency,e.depLanguage=new i.Dependency,e.missingPrefix=">",e.missingPostfix="<",e.map=function(e,a){return this.maps[e]||(this.maps[e]={}),this.registerMap(e,"",!1,a),this.dep.changed()},e.get=function(e,a,i){var n,s,r;return null==a&&(a=!0),null==i&&(i={}),this.dep.depend(),this.depLanguage.depend(),"string"!=typeof e?"":(r=(null!=(n=this.maps[this.language])?n[e]:void 0)||(null!=(s=this.maps[this.defaultLanguage])?s[e]:void 0)||(a?this.missingPrefix+e+this.missingPostfix:e),0===Object.keys(i).length?r:this.replaceParams(r,i))},e.registerMap=function(e,a,i,n){var s,r,o;if("string"==typeof n)return this.maps[e][a]=n;if("object"==typeof n){i&&(a+="."),r=[];for(s in n)o=n[s],r.push(this.registerMap(e,a+s,!0,o));return r}},e.getLanguage=function(){return this.depLanguage.depend(),this.language},e.getLanguages=function(){return this.dep.depend(),Object.keys(this.maps).sort()},e.setLanguage=function(e){return this.maps[e]&&this.language!==e?(this.language=e,this.depLanguage.changed()):void 0},e.replaceParams=function(e,a){var i,n,s;for(i in a)s=a[i],n=new RegExp("@{"+i+"}","g"),e=e.replace(n,s);return e},e}(),this.T9n=u,this.t9n=function(e,a,i){return u.get(e)}}).call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:"  ",choosePassword:"  ",clickAgree:"    ",configure:"",createAccount:"  ",currentPassword:"  ",dontHaveAnAccount:"  ",email:" ",emailAddress:" ",emailResetLink:"   ",forgotPassword:"  ",ifYouAlreadyHaveAnAccount:"   ",newPassword:"  ",newPasswordAgain:"    ",optional:"",OR:"",password:" ",passwordAgain:"   ",privacyPolicy:" ",remove:"",resetYourPassword:"   ",setPassword:"  ",sign:"",signIn:" ",signin:" ",signOut:" ",signUp:"  ",signupCode:" ",signUpWithYourEmailAddress:"  ",terms:" ",updateYourPassword:"  ",username:" ",usernameOrEmail:"    ","with":"",info:{emailSent:"   ",emailVerified:"   ",passwordChanged:"   ",passwordReset:"    "},error:{emailRequired:"  ",minChar:"      ",pwdsDontMatch:"   ",pwOneDigit:"         ",pwOneLetter:"     ",signInRequired:"    ",signupCodeIncorrect:"   ",signupCodeRequired:"  ",usernameIsEmail:"       ",usernameRequired:"  ",accounts:{"Email already exists.":"  ","Email doesn't match the criteria.":"     ","Invalid login token":"   ","Login forbidden":"   ","Service unknown":"  ","Unrecognized options for login request":"     ","User validation failed":"  ","Username already exists.":"  ","You are not logged in.":"  ","You've been logged out by the server. Please log in again.":"      .    .","Your session has expired. Please log in again.":"  .    .","No matching login attempt found":"    ","Password is old. Please reset your password.":"  .     .","Incorrect password":"   .","Invalid email":"   ","Must be logged in":"   ","Need to set a username or email":"      ","old password format":"   ","Password may not be empty":"      ","Signups forbidden":"   ","Token expired":"  ","Token has invalid email address":"      ","User has no password set":"     ","User not found":"   ","Verify email link expired":"     ","Verify email link is for unknown address":"         ","Match failed":" ","Unknown error":"  "}}},u.map("ar",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"afegir",and:"i",back:"enrere",changePassword:"Canviar contrasenya",choosePassword:"Escollir contrasenya",clickAgree:"Al fer clic a Subscriure aproves la",configure:"Disposici",createAccount:"Crear compte",currentPassword:"Contrasenya actual",dontHaveAnAccount:"No tens un compte?",email:"Correu",emailAddress:"Adrea de correu",emailResetLink:"Reiniciar correu",forgotPassword:"Has oblidat la contrasenya?",ifYouAlreadyHaveAnAccount:"Si ja tens un compte",newPassword:"Nova contrasenya",newPasswordAgain:"Nova contrasenya (repetir)",optional:"Opcional",OR:"O",password:"Contrasenya",passwordAgain:"Contrasenya (repetir)",privacyPolicy:"Poltica de Privacitat",remove:"eliminar",resetYourPassword:"Resetejar la teva contrasenya",setPassword:"Definir contrasenya",sign:"Signar",signIn:"Entrar",signin:"entrar",signOut:"Sortir",signUp:"Subscriure",signupCode:"Cdi de subscripci",signUpWithYourEmailAddress:"Subscriure amb el teu correu",terms:"Termes d's",updateYourPassword:"Actualitzar la teva contrasenya",username:"Usuari",usernameOrEmail:"Usuari o correu","with":"amb",info:{emailSent:"Correu enviat",emailVerified:"Correu verificat",passwordChanged:"Contrasenya canviada",passwordReset:"Reiniciar contrasenya"},error:{emailRequired:"Es requereix el correu.",minChar:"7 carcters mnim.",pwdsDontMatch:"Les contrasenyes no coincideixen",pwOneDigit:"mnim un dgit.",pwOneLetter:"mnim una lletra.",signInRequired:"Has d'iniciar sessi per a fer aix.",signupCodeIncorrect:"El cdi de subscripci no coincideix.",signupCodeRequired:"Es requereix el cdi de subscripci.",usernameIsEmail:"L'usuari no pot ser el correu.",usernameRequired:"Es requereix un usuari.",accounts:{"Email already exists.":"El correu ja existeix.","Email doesn't match the criteria.":"El correu no coincideix amb els criteris.","User validation failed":"No s'ha pogut validar l'usuari","Username already exists.":"L'usuari ja existeix.","You've been logged out by the server. Please log in again.":"Has estat desconnectat pel servidor. Si us plau, entra de nou.","Your session has expired. Please log in again.":"La teva sessi ha expirat. Si us plau, entra de nou.","Incorrect password":"Contrasenya invlida","Must be logged in":"Has d'entrar","Need to set a username or email":"Has d'especificar un usuari o un correu","Signups forbidden":"Registre prohibit","Token expired":"Token expirat","Token has invalid email address":"Token cont un correu invlid","User has no password set":"Usuari no t contrasenya","User not found":"Usuari no trobat","Verify email link expired":"L'enlla per a verificar el correu ha expirat","Verify email link is for unknown address":"L'enlla per a verificar el correu cont una adrea desconeguda"}}},u.map("ca",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"pidat",and:"a",back:"zpt",changePassword:"Zmnte heslo",choosePassword:"Zvolte heslo",clickAgree:"Stiskem tlatka Registrovat souhlaste s",configure:"Nastavit",createAccount:"Vytvoit et",currentPassword:"Souasn heslo",dontHaveAnAccount:"Nemte et?",email:"Email",emailAddress:"Emailov adresa",emailResetLink:"Odkaz na reset emailu",forgotPassword:"Zapomenut heslo?",ifYouAlreadyHaveAnAccount:"Pokud ji mte et",newPassword:"Nov heslo",newPasswordAgain:"Nov heslo (zopakovat)",optional:"Voliteln",OR:"nebo",password:"Heslo",passwordAgain:"Heslo (zopakovat)",privacyPolicy:"Nastaven soukrom",remove:"odstranit",resetYourPassword:"Resetovat heslo",setPassword:"Nastavit heslo",sign:"Pihlen",signIn:"Pihlsit se",signin:"pihlsit se",signOut:"Odhlsit se",signUp:"Registrovat",signupCode:"Registran kd",signUpWithYourEmailAddress:"Registrovat se emailovou adresou",terms:"Podmnky pouit",updateYourPassword:"Aktualizujte si sv heslo",username:"Uivatelsk jmno",usernameOrEmail:"Uivatelsk jmno nebo email","with":"s",info:{emailSent:"Email odesln",emailVerified:"Email oven",passwordChanged:"Heslo zmnno",passwordReset:"Heslo resetovno"},error:{emailRequired:"Email je povinn.",minChar:"minimln dlka hesla je 7 znak.",pwdsDontMatch:"Hesla nesouhlas",pwOneDigit:"Heslo mus obsahovat alespo jednu slici.",pwOneLetter:"Heslo mus obsahovat alespo 1 slovo.",signInRequired:"Muste bt phleni.",signupCodeIncorrect:"Registran kd je chybn.",signupCodeRequired:"Registran kd je povinn.",usernameIsEmail:"Uivatelsk jmno neme bt emailov adresa.",usernameRequired:"Uivatelsk jmno je povinn."},accounts:{"A login handler should return a result or undefined":"Pihlaovac rutina mus vracet vsledek nebo undefined","Email already exists.":"Email ji existuje.","Email doesn't match the criteria.":"Email nespluje poadavky.","Invalid login token":"Neplatn pihlaovac token","Login forbidden":"Pihlen je zakzno","Service unknown":"Neznm sluba","Unrecognized options for login request":"Nerozpoznan volba pihlaovacho poadavku","User validation failed":"Validace uivatele selhala","Username already exists.":"Uivatelsk jmno ji existuje.","You are not logged in.":"Nejste pihlen.","You've been logged out by the server. Please log in again.":"Byl jste odhlen. Prosm pihlate se znovu.","Your session has expired. Please log in again.":"Vae pipojen vyprelo. Prosm pihlate se znovu.","No matching login attempt found":"Nenalezen odpovdajc zpsob pihlen","Password is old. Please reset your password.":"Heslo je star. Prosme nastavte si ho znovu.","Incorrect password":"Chybn heslo","Invalid email":"Neplatn email","Must be logged in":"Uivatel mus bt pihlen","Need to set a username or email":"Je teba zadat uivatelsk jmno nebo email","old password format":"star formt hesla","Password may not be empty":"Heslo neme bt przdn","Signups forbidden":"Registrace je zakzan","Token expired":"Token vyprel","Token has invalid email address":"Token m neplatnou emailovou adresu","User has no password set":"Uivatel nem nastaven heslo","User not found":"Uivatel nenalezen","Verify email link expired":"Odkaz pro oven emailu vyprel","Verify email link is for unknown address":"Odkaz pro oven emailu m neznmou adresu","Match failed":"Nesouhlas","Unknown error":"Neznm chyba"}},u.map("cs",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"tilfj",and:"og",back:"tilbage",changePassword:"Skift kodeord",choosePassword:"Vlg kodeord",clickAgree:"Ved at klikke p tilmeld accepterer du vores",configure:"Konfigurer",createAccount:"Opret konto",currentPassword:"Nuvrende kodeord",dontHaveAnAccount:"Har du ikke en konto?",email:"E-mail",emailAddress:"E-mail adresse",emailResetLink:"Nulstil E-mail Link",forgotPassword:"Glemt kodeord?",ifYouAlreadyHaveAnAccount:"Hvis jeg allerede har en konto",newPassword:"Nyt kodeord",newPasswordAgain:"Nyt kodeord (igen)",optional:"Frivilligt",OR:"eller",password:"Kodeord",passwordAgain:"Kodeord (igen)",privacyPolicy:"Privatlivspolitik",remove:"fjern",resetYourPassword:"Nulstil dit kodeord",setPassword:"St kodeord",sign:"Log",signIn:"Log ind",signin:"Log ind",signOut:"Log ud",signUp:"Tilmeld",signupCode:"Tilmeldingskode",signUpWithYourEmailAddress:"Tilmeld med din e-mail adresse",terms:"Betingelser for brug",updateYourPassword:"Skift dit kodeord",username:"Brugernavn",usernameOrEmail:"Brugernavn eller e-mail","with":"med",info:{emailSent:"E-mail sendt",emailVerified:"Email verificeret",passwordChanged:"Password ndret",passwordReset:"Password reset"},error:{emailRequired:"E-mail er pkrvet.",minChar:"Kodeordet skal vre mindst 7 tegn.",pwdsDontMatch:"De to kodeord er ikke ens.",pwOneDigit:"Kodeord krver mindste et tal.",pwOneLetter:"Kodeord krver mindst et bogstav.",signInRequired:"Du skal vre logget ind for at kunne gre det.",signupCodeIncorrect:"Tilmeldingskode er forkert.",signupCodeRequired:"Tilmeldingskode er pkrvet.",usernameIsEmail:"Brugernavn kan ikke vre en e-mail adresse.",usernameRequired:"Brugernavn skal udfyldes.",accounts:{"Email already exists.":"E-mail findes allerede.","Email doesn't match the criteria.":"E-mail modsvarer ikke kriteriet.","Invalid login token":"Invalid log ind token","Login forbidden":"Log ind forbudt","Service unknown":"Service ukendt","Unrecognized options for login request":"Ukendte options for login forsg","User validation failed":"Bruger validering fejlede","Username already exists.":"Brugernavn findes allerede.","You are not logged in.":"Du er ikke logget ind.","You've been logged out by the server. Please log in again.":"Du er blevet logget af serveren. Log ind igen.","Your session has expired. Please log in again.":"Din session er udlbet. Log ind igen.","No matching login attempt found":"Der fandtes ingen login forsg","Password is old. Please reset your password.":"Kodeordet er for gammelt. Du skal resette det.","Incorrect password":"Forkert kodeord","Invalid email":"Invalid e-mail","Must be logged in":"Du skal vre logget ind","Need to set a username or email":"Du skal angive enten brugernavn eller e-mail","old password format":"gammelt kodeord format","Password may not be empty":"Kodeord skal vre udfyldt","Signups forbidden":"Tilmeldinger forbudt","Token expired":"Token udlbet","Token has invalid email address":"Token har en invalid e-mail adresse","User has no password set":"Bruger har ikke angivet noget kodeord","User not found":"Bruger ej fundet","Verify email link expired":"Verify email link expired","Verify email link is for unknown address":"Verificer e-mail link for ukendt adresse","Match failed":"Match fejlede","Unknown error":"Ukendt fejl"}}},u.map("da",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"hinzufgen",and:"und",back:"zurck",changePassword:"Passwort ndern",choosePassword:"Passwort auswhlen",clickAgree:"Durch die Registrierung akzeptieren Sie unsere",configure:"Konfigurieren",createAccount:"Konto erstellen",currentPassword:"Aktuelles Passwort",dontHaveAnAccount:"Noch kein Konto?",email:"E-Mail",emailAddress:"E-Mail Adresse",emailResetLink:"Senden",forgotPassword:"Passwort vergessen?",ifYouAlreadyHaveAnAccount:"Falls Sie ein Konto haben, bitte hier",newPassword:"Neues Passwort",newPasswordAgain:"Neues Passwort (wiederholen)",optional:"Optional",OR:"ODER",password:"Passwort",passwordAgain:"Passwort (wiederholen)",privacyPolicy:"Datenschutzerklrung",remove:"entfernen",resetYourPassword:"Passwort zurcksetzen",setPassword:"Passwort festlegen",sign:"Anmelden",signIn:"Anmelden",signin:"anmelden",signOut:"Abmelden",signUp:"Registrieren",signupCode:"Registrierungscode",signUpWithYourEmailAddress:"Mit E-Mail registrieren",terms:"Geschftsbedingungen",updateYourPassword:"Passwort aktualisieren",username:"Benutzername",usernameOrEmail:"Benutzername oder E-Mail","with":"mit",info:{emailSent:"E-Mail gesendet",emailVerified:"E-Mail verifiziert",PasswordChanged:"Passwort gendert",PasswordReset:"Passwort zurckgesetzt"},error:{emailRequired:"E-Mail bentigt.",minChar:"Passwort muss mindestens 7 Zeichen lang sein.",pwdsDontMatch:"Passwrter stimmen nicht berein.",pwOneDigit:"Passwort muss mindestens eine Ziffer enthalten.",pwOneLetter:"Passwort muss mindestens einen Buchstaben enthalten.",signInRequired:"Sie mssen sich anmelden.",signupCodeIncorrect:"Registrierungscode ungltig.",signupCodeRequired:"Registrierungscode bentigt.",usernameIsEmail:"Benutzername darf keine E-Mail Adresse sein.",usernameRequired:"Benutzername bentigt.",accounts:{"Email already exists.":"Die E-Mail Adresse wird bereits verwendet.","Email doesn't match the criteria.":"E-Mail Adresse erfllt die Anforderungen nicht.","Invalid login token":"Ungltiger Login-Token","Login forbidden":"Anmeldedaten ungltig","Service unknown":"Dienst unbekannt","Unrecognized options for login request":"Unbekannte Optionen fr Login Request","User validation failed":"Die Benutzerdaten sind nicht korrekt","Username already exists.":"Der Benutzer existiert bereits.","You are not logged in.":"Sie sind nicht eingeloggt.","You've been logged out by the server. Please log in again.":"Der Server hat Dich ausgeloggt. Bitte melde Dich erneut an.","Your session has expired. Please log in again.":"Ihre Sitzung ist abgelaufen. Bitte melden Sie sich erneut an.","No matching login attempt found":"Kein passender Loginversuch gefunden.","Password is old. Please reset your password.":"Passwort ist abgelaufen. Bitte setzen Sie es zurck.","Incorrect password":"Falsches Passwort","Invalid email":"Ungltige E-Mail Adresse","Must be logged in":"Sie mssen sich anmelden","Need to set a username or email":"Benutzername oder E-Mail Adresse mssen angegeben werden","Password may not be empty":"Das Passwort darf nicht leer sein","Signups forbidden":"Anmeldungen sind nicht erlaubt","Token expired":"Token ist abgelaufen","Token has invalid email address":"E-Mail Adresse passt nicht zum Token","User has no password set":"Kein Passwort fr den Benutzer angegeben","User not found":"Benutzer nicht gefunden","Verify email link expired":"Link zur E-Mail Verifizierung ist abgelaufen","Verify email link is for unknown address":"Link zur Verifizierung ist fr eine unbekannte E-Mail Adresse","Verification email lost?":"Verifizierungsemail verloren?","Send again":"Erneut senden","Send the verification email again":"Verifizierungsemail erneut senden","Send email again":"Email erneut senden","A new email has been sent to you. If the email doesn't show up in your inbox, be sure to check your spam folder.":"Eine neue Email wurde an Sie verschickt. Sollte sich die Email nicht in Ihrem Posteingang befinden, prfen Sie bitten Ihren Spamordner.","Match failed":"Abgleich fehlgeschlagen","Unknown error":"Unbekannter Fehler"}}},u.map("de",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:" ",choosePassword:" ",clickAgree:" ,  ",configure:"",createAccount:" ",currentPassword:" ",dontHaveAnAccount:"  ;",email:"Email",emailAddress:" ",emailResetLink:"  ",forgotPassword:"  ;",ifYouAlreadyHaveAnAccount:"   ",newPassword:" ",newPasswordAgain:"  ()",optional:"",OR:"",password:"",passwordAgain:" ()",privacyPolicy:" ",remove:"",resetYourPassword:" ",setPassword:" ",sign:"",signIn:"",signin:"",signOut:"",signUp:"",signupCode:" ",signUpWithYourEmailAddress:"     ",terms:" ",updateYourPassword:"   ",username:" ",usernameOrEmail:"   email","with":"",info:{emailSent:" Email ",emailVerified:" Email ",passwordChanged:"  ",passwordReset:"  "},error:{emailRequired:" Email .",minChar:"7  .",pwdsDontMatch:"   ",pwOneDigit:"       .",pwOneLetter:"       .",signInRequired:"         .",signupCodeIncorrect:"     .",signupCodeRequired:"   .",usernameIsEmail:"         email.",usernameRequired:"   .",accounts:{"Email already exists.":"  email  .","Email doesn't match the criteria.":" email     .","Invalid login token":"  ","Login forbidden":"  ","Service unknown":" ","Unrecognized options for login request":"     ","User validation failed":"    ","Username already exists.":"     .","You are not logged in.":"  .","You've been logged out by the server. Please log in again.":"   .   .","Your session has expired. Please log in again.":"  .   .","No matching login attempt found":"       ","Password is old. Please reset your password.":"   .     .","Incorrect password":" ","Invalid email":" email","Must be logged in":"   ","Need to set a username or email":"      email","old password format":"  ","Password may not be empty":"      ","Signups forbidden":"  ","Token expired":"   ","Token has invalid email address":"      email","User has no password set":"     ","User not found":"   ","Verify email link expired":"    email ","Verify email link is for unknown address":"    email    ","Match failed":"  ","Unknown error":" "}}},u.map("el",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"add",and:"and",back:"back",changePassword:"Change Password",choosePassword:"Choose a Password",clickAgree:"By clicking Register, you agree to our",configure:"Configure",createAccount:"Create an Account",currentPassword:"Current Password",dontHaveAnAccount:"Don't have an account?",email:"Email",emailAddress:"Email Address",emailResetLink:"Email Reset Link",forgotPassword:"Forgot your password?",ifYouAlreadyHaveAnAccount:"If you already have an account",newPassword:"New Password",newPasswordAgain:"New Password (again)",optional:"Optional",OR:"OR",password:"Password",passwordAgain:"Password (again)",privacyPolicy:"Privacy Policy",remove:"remove",resetYourPassword:"Reset your password",setPassword:"Set Password",sign:"Sign",signIn:"Sign In",signin:"sign in",signOut:"Sign Out",signUp:"Register",signupCode:"Registration Code",signUpWithYourEmailAddress:"Register with your email address",terms:"Terms of Use",updateYourPassword:"Update your password",username:"Username",usernameOrEmail:"Username or email","with":"with",info:{emailSent:"Email sent",emailVerified:"Email verified",passwordChanged:"Password changed",passwordReset:"Password reset"},error:{emailRequired:"Email is required.",minChar:"7 character minimum password.",pwdsDontMatch:"Passwords don't match",pwOneDigit:"Password must have at least one digit.",pwOneLetter:"Password requires 1 letter.",signInRequired:"You must be signed in to do that.",signupCodeIncorrect:"Registration code is incorrect.",signupCodeRequired:"Registration code is required.",usernameIsEmail:"Username cannot be an email address.",usernameRequired:"Username is required.",accounts:{"Email already exists.":"Email already exists.","Email doesn't match the criteria.":"Email doesn't match the criteria.","Invalid login token":"Invalid login token","Login forbidden":"Login forbidden","Service unknown":"Service unknown","Unrecognized options for login request":"Unrecognized options for login request","User validation failed":"User validation failed","Username already exists.":"Username already exists.","You are not logged in.":"You are not logged in.","You've been logged out by the server. Please log in again.":"You've been logged out by the server. Please log in again.","Your session has expired. Please log in again.":"Your session has expired. Please log in again.","No matching login attempt found":"No matching login attempt found","Password is old. Please reset your password.":"Password is old. Please reset your password.","Incorrect password":"Incorrect password","Invalid email":"Invalid email","Must be logged in":"Must be logged in","Need to set a username or email":"Need to set a username or email","old password format":"old password format","Password may not be empty":"Password may not be empty","Signups forbidden":"Signups forbidden","Token expired":"Token expired","Token has invalid email address":"Token has invalid email address","User has no password set":"User has no password set","User not found":"User not found","Verify email link expired":"Verify email link expired","Verify email link is for unknown address":"Verify email link is for unknown address","Match failed":"Match failed","Unknown error":"Unknown error"}}},u.map("en",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"agregar",and:"y",back:"atrs",changePassword:"Cambiar contrasea",choosePassword:"Eligir contrasea",clickAgree:"Al hacer clic en Sucribir apruebas la",configure:"Disposicin",createAccount:"Crear cuenta",currentPassword:"Contrasea actual",dontHaveAnAccount:"No tienes una cuenta?",email:"Email",emailAddress:"Direccin de email",emailResetLink:"Reiniciar email",forgotPassword:"Olvid su contrasea?",ifYouAlreadyHaveAnAccount:"Si ya tiene una cuenta",newPassword:"Nueva contrasea",newPasswordAgain:"Nueva contrasea (repetir)",optional:"Opcional",OR:"O",password:"Contrasea",passwordAgain:"Contrasea (repetir)",privacyPolicy:"Pliza de Privacidad",remove:"remover",resetYourPassword:"Resetear tu contrasea",setPassword:"Definir contrasea",sign:"Ingresar",signIn:"Entrar",signin:"entrar",signOut:"Salir",signUp:"Registrarse",signupCode:"Cdigo de registro",signUpWithYourEmailAddress:"Registrarse con tu email",terms:"Trminos de uso",updateYourPassword:"Actualizar tu contrasea",username:"Usuario",usernameOrEmail:"Usuario o email","with":"con",info:{emailSent:"Email enviado",emailVerified:"Email verificado",passwordChanged:"Contrasea cambiada",passwordReset:"Resetear contrasea"},error:{emailRequired:"El email es requerido.",minChar:"7 caracteres mnimo.",pwdsDontMatch:"Las contraseas no coinciden",pwOneDigit:"mnimo un dgito.",pwOneLetter:"mnimo una letra.",signInRequired:"Debes iniciar sesin para hacer eso.",signupCodeIncorrect:"El cdigo de suscripcin no coincide.",signupCodeRequired:"Se requiere el cdigo de suscripcin.",usernameIsEmail:"El usuario no puede ser el email.",usernameRequired:"Se requiere un usuario.",accounts:{"Email already exists.":"El email ya existe.","Email doesn't match the criteria.":"El email no coincide con los criterios.","User validation failed":"No se ha podido validar el usuario","Username already exists.":"El usuario ya existe.","You've been logged out by the server. Please log in again.":"Has sido desconectado por el servidor. Por favor ingresa de nuevo.","Your session has expired. Please log in again.":"Tu sesin ha expirado. Por favor ingresa de nuevo.","Incorrect password":"Contrasea invlida","Must be logged in":"Debes ingresar","Need to set a username or email":"Tienes que especificar un usuario o un email","Signups forbidden":"Registro prohibido","Token expired":"Token expirado","Token has invalid email address":"Token contiene un email invlido","User has no password set":"Usuario no tiene contrasea","User not found":"Usuario no encontrado","Verify email link expired":"El enlace para verificar el email ha expirado","Verify email link is for unknown address":"El enlace para verificar el email contiene una direccin desconocida"}}},u.map("es",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"agregar",and:"y",back:"atrs",changePassword:"Cambiar Contrasea",choosePassword:"Eligir Contrasea",clickAgree:"Si haces clic en Crear Cuenta ests de acuerdo con la",configure:"Configurar",createAccount:"Crear cuenta",currentPassword:"Contrasea actual",dontHaveAnAccount:"No ests registrado?",email:"Email",emailAddress:"Direccin de email",emailResetLink:"Restaurar email",forgotPassword:"Has olvidado tu contrasea?",ifYouAlreadyHaveAnAccount:"Ya tienes una cuenta, ",newPassword:"Nueva Contrasea",newPasswordAgain:"Nueva Contrasea (repeticin)",optional:"Opcional",OR:"O",password:"Contrasea",passwordAgain:"Contrasea (repeticin)",privacyPolicy:"Pliza de Privacidad",remove:"remover",resetYourPassword:"Recuperar tu contrasea",setPassword:"Definir Contrasea",sign:"Entrar",signIn:"Entrar",signin:"entra",signOut:"Salir",signUp:"Regstrate",signupCode:"Cdigo para registrarte",signUpWithYourEmailAddress:"Regstrate con tu email",terms:"Trminos de Uso",updateYourPassword:"Actualizar tu contrasea",username:"Usuario",usernameOrEmail:"Usuario o email","with":"con",info:{emailSent:"Email enviado",emailVerified:"Email verificado",passwordChanged:"Contrasea cambiado",passwordReset:"Resetar Contrasea"},error:{emailRequired:"El email es necesario.",minChar:"7 carcteres mnimo.",pwdsDontMatch:"Contraseas no coninciden",pwOneDigit:"mnimo un dgito.",pwOneLetter:"mnimo una letra.",signInRequired:"Debes iniciar sesin para esta opcin.",signupCodeIncorrect:"Cdigo de registro invlido.",signupCodeRequired:"Se requiere un cdigo de registro.",usernameIsEmail:"El usuario no puede ser una direccin de correo.",usernameRequired:"Se quiere nombre de usuario.",accounts:{"Email already exists.":"El correo ya existe.","Email doesn't match the criteria.":"El correo no coincide.","User validation failed":"No hemos podido verificar el usuario","Username already exists.":"Este usuario ya existe.","You've been logged out by the server. Please log in again.":"Has sido desconectado por el servidor. Por favor inicia sesin de nuevo.","Your session has expired. Please log in again.":"Tu session ha expirado. Por favor inicia sesin de nuevo.","Incorrect password":"Contrasea invlida","Must be logged in":"Debes iniciar sesin","Need to set a username or email":"Debes especificar un usuario o email","Signups forbidden":"Los registros no estn permitidos en este momento","Token expired":"El token ha expirado","Token has invalid email address":"EL token contiene un email invlido","User has no password set":"El usuario no tiene contrasea","User not found":"Usuario no encontrado","Verify email link expired":"El enlace para verificar el email ha expierado","Verify email link is for unknown address":"El enlace para verificar el email est asociado a una direccin desconocida"}}},u.map("es_ES",a),u.map("es-ES",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:" ",choosePassword:"  ",clickAgree:"      ",configure:"",createAccount:"  ",currentPassword:" ",dontHaveAnAccount:"  ",email:"",emailAddress:" ",emailResetLink:"  ",forgotPassword:"   ",ifYouAlreadyHaveAnAccount:"    ",newPassword:" ",newPasswordAgain:"  ()",
optional:"",OR:"",password:"",passwordAgain:" ()",privacyPolicy:" ",remove:"",resetYourPassword:"  ",setPassword:" ",sign:"",signIn:"",signin:"",signOut:"",signUp:"",signupCode:" ",signUpWithYourEmailAddress:"    ",terms:" ",updateYourPassword:"    ",username:" ",usernameOrEmail:"   ","with":"",info:{emailSent:"  ",emailVerified:"  ",passwordChanged:"  ",passwordReset:"  "},error:{emailRequired:"  .",minChar:"   .",pwdsDontMatch:"  ",pwOneDigit:"      .",pwOneLetter:"    .",signInRequired:"     .",signupCodeIncorrect:"   .",signupCodeRequired:"   .",usernameIsEmail:"     .",usernameRequired:"   .",accounts:{"Email already exists.":"   .","Email doesn't match the criteria.":"    .","Invalid login token":"   ","Login forbidden":"  ","Service unknown":" ","Unrecognized options for login request":"    ","User validation failed":"  ","Username already exists.":"    .","You are not logged in.":"  .","You've been logged out by the server. Please log in again.":"    .    .","Your session has expired. Please log in again.":"    .    .","No matching login attempt found":"    ","Password is old. Please reset your password.":"  .     .","Incorrect password":" ","Invalid email":" ","Must be logged in":"  ","Need to set a username or email":"       ","old password format":"  ","Password may not be empty":"   ","Signups forbidden":" ","Token expired":"    ","Token has invalid email address":"      ","User has no password set":"    ","User not found":"  ","Verify email link expired":"     ","Verify email link is for unknown address":"      ","Match failed":" ","Unknown error":" "}}},u.map("fa",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"Ajouter",and:"et",back:"retour",changePassword:"Modifier le mot de passe",choosePassword:"Choisir le mot de passe",clickAgree:"En cliquant sur S'enregistrer, vous acceptez notre",configure:"Configurer",createAccount:"Crer un compte",currentPassword:"Mot de passe actuel",dontHaveAnAccount:"Vous n'avez pas de compte ?",email:"Email",emailAddress:"Adresse Email",emailResetLink:"Envoyer le mail de rinitialisation",forgotPassword:"Vous avez oubli votre mot de passe ?",ifYouAlreadyHaveAnAccount:"Si vous avez dj un compte",newPassword:"Nouveau mot de passe",newPasswordAgain:"Confirmer le nouveau mot de passe",optional:"Optionnel",OR:"OU",password:"Mot de passe",passwordAgain:"Confirmer le mot de passe",privacyPolicy:"Politique de confidentialit",remove:"Supprimer",resetYourPassword:"Reinitialiser votre mot de passe",setPassword:"Spcifier le mot de passe",sign:"S'enregistrer",signIn:"Se Connecter",signin:"se connecter",signOut:"Se Deconnecter",signUp:"S'enregistrer",signupCode:"Code d'inscription",signUpWithYourEmailAddress:"S'enregistrer avec votre adresse email",terms:"Conditions d'utilisation",updateYourPassword:"Mettre  jour le mot de passe",username:"Nom d'utilisateur",usernameOrEmail:"Nom d'utilisateur ou email","with":"avec",info:{emailSent:"Email envoy",emailVerified:"Email verifi",passwordChanged:"Mot de passe modifi",passwordReset:"Mot de passe rinitialis"},error:{emailRequired:"Un email est requis.",minChar:"Votre mot de passe doit contenir au minimum 7 caractres.",pwdsDontMatch:"Les mots de passe ne correspondent pas",pwOneDigit:"Votre mot de passe doit contenir au moins un chiffre.",pwOneLetter:"Votre mot de passe doit contenir au moins une lettre.",signInRequired:"Vous devez tre connect pour continuer.",signupCodeIncorrect:"Le code d'enregistrement est incorrect.",signupCodeRequired:"Un code d'inscription est requis.",usernameIsEmail:"Le nom d'utilisateur ne peut tre le mme que l'adresse email.",usernameRequired:"Un nom d'utilisateur est requis.",accounts:{"Email already exists.":"Adresse email dj utilise.","Email doesn't match the criteria.":"Adresse email ne correspond pas aux critres.","Invalid login token":"Jeton d'authentification invalide","Login forbidden":"Authentification interdite","Service unknown":"Service inconnu","Unrecognized options for login request":"Options inconnues pour la requte d'authentification","User validation failed":"Echec de la validation de l'utilisateur","Username already exists.":"Nom d'utilisateur dj utilis.","You are not logged in.":"Vous n'tes pas authentifi.","You've been logged out by the server. Please log in again.":"Vous avez t dconnect par le serveur. Veuillez vous reconnecter.","Your session has expired. Please log in again.":"Votre session a expir. Veuillez vous reconnecter.","No matching login attempt found":"Aucune tentative d'authentification ne correspond","Password is old. Please reset your password.":"Votre mot de passe est trop ancien. Veuillez le modifier.","Incorrect password":"Mot de passe incorrect","Invalid email":"Email invalide","Must be logged in":"Vous devez tre connect","Need to set a username or email":"Vous devez renseigner un nom d'utilisateur ou une adresse email","old password format":"Ancien format de mot de passe","Password may not be empty":"Le mot de passe ne peut tre vide","Signups forbidden":"La cration de compte est interdite","Token expired":"Jeton expir","Token has invalid email address":"Le jeton contient une adresse email invalide","User has no password set":"L'utilisateur n'a pas de mot de passe","User not found":"Utilisateur inconnu","Verify email link expired":"Lien de vrification d'email expir","Verify email link is for unknown address":"Le lien de vrification d'email rfre  une adresse inconnue","Match failed":"La correspondance a chou","Unknown error":"Erreur inconnue"}}},u.map("fr",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:" ",choosePassword:" ",clickAgree:"    ,  ",configure:"",createAccount:" ",currentPassword:" ",dontHaveAnAccount:"  ?",email:'"',emailAddress:'"',emailResetLink:"   ",forgotPassword:" ?",ifYouAlreadyHaveAnAccount:"   ",newPassword:" ",newPasswordAgain:"  ()",optional:"",OR:"",password:"",passwordAgain:" ()",privacyPolicy:" ",remove:"",resetYourPassword:" ",setPassword:" ",signIn:"",signin:"",signOut:"",signUp:" ",signupCode:" ",signUpWithYourEmailAddress:'  "',terms:" ",updateYourPassword:" ",username:" ",usernameOrEmail:'   "',"with":"",info:{emailSent:'  "',emailVerified:' "  ',passwordChanged:"  ",passwordReset:"  "},error:{emailRequired:'   "',minChar:"    7  .",pwdsDontMatch:"  .",pwOneDigit:"     .",pwOneLetter:"     .",signInRequired:"      .",signupCodeIncorrect:"  .",signupCodeRequired:"    .",usernameIsEmail:'      ".',usernameRequired:"   .",accounts:{"Email already exists.":'"   .',"Email doesn't match the criteria.":'"    .',"Invalid login token":"Token  ","Login forbidden":" ","Service unknown":"Service  ","Unrecognized options for login request":"     ","User validation failed":"  ","Username already exists.":"   .","You are not logged in.":"  .","You've been logged out by the server. Please log in again.":"   .    .","Your session has expired. Please log in again.":"-session   .    .","No matching login attempt found":"    ","Password is old. Please reset your password.":" .   .","Incorrect password":" ","Invalid email":'" ',"Must be logged in":"      .","Need to set a username or email":'     "',"old password format":"  ","Password may not be empty":"    ","Signups forbidden":" ","Token expired":"-token  ","Token has invalid email address":'-token   " ',"User has no password set":"  ","User not found":"  ","Verify email link expired":'  "  ',"Verify email link is for unknown address":'  "    ',"Match failed":" ","Unknown error":"  "}}},u.map("he",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"dodaj",and:"i",back:"nazad",changePassword:"Promjeni zaporku",choosePassword:"Izaberi zaporku",clickAgree:"Klikom na Registracija, prihvatate nae",configure:"Podesi",createAccount:"Napravite raun",currentPassword:"Trenutna zaporka",dontHaveAnAccount:"Vi nemate raun?",email:"Email",emailAddress:"Email adresa",emailResetLink:"Email reset link",forgotPassword:"Zaboravili ste zaporku?",ifYouAlreadyHaveAnAccount:"Ako ve imate raun",newPassword:"Nova zaporka",newPasswordAgain:"Nova zaporka (ponovno)",optional:"neobavezno",OR:"ili",password:"Zaporka",passwordAgain:"Zaporka (ponovno)",privacyPolicy:"Izjava o privatnosti",remove:"ukloni",resetYourPassword:"Resetirajte",setPassword:"Postavite zaporku",sign:"Prijava",signIn:"Prijavi se",signin:"prijavi se",signOut:"Odjavi se",signUp:"Registracija",signupCode:"Registracijski kod",signUpWithYourEmailAddress:"Registrirajte se sa vaom email adresom",terms:"Uslovi koritenja",updateYourPassword:"Aurirajte lozinku",username:"Korisniko ime",usernameOrEmail:"Korisniko ime ili lozinka","with":"sa",info:{emailSent:"Email je poslan",emailVerified:"Email je verificiran",passwordChanged:"Zaproka promjenjena",passwordReset:"Zaporka resetirana"},error:{emailRequired:"Email je potreban.",minChar:"Zaporka mora sadravati vie od 7 znakova.",pwdsDontMatch:"Zaporke se ne poklapaju.",pwOneDigit:"Zaporka mora sadravati barem jednu brojku.",pwOneLetter:"Zaporka mora sadravati barem jedno slovo.",signInRequired:"Morate biti prijavljeni za to.",signupCodeIncorrect:"Registracijski kod je netoan.",signupCodeRequired:"Registracijski kod je potreban.",usernameIsEmail:"Korisniko ime ne moe biti email.",usernameRequired:"Korisniko ime je potrebno.",accounts:{"Email already exists.":"Email ve postoji.","Email doesn't match the criteria.":"Email ne zadovoljava kriterij.","Invalid login token":"Nevaei  token za prijavu","Login forbidden":"Prijava zabranjena","Service unknown":"Servis nepoznat","Unrecognized options for login request":"Neprepoznate opcije zahtjeva za prijavu","User validation failed":"Provjera valjanosti za korisnika neuspjena.","Username already exists.":"Korisnik ve postoji.","You are not logged in.":"Niste prijavljeni.","You've been logged out by the server. Please log in again.":"Odjavljeni ste sa servera. Molimo Vas ponovno se prijavite.","Your session has expired. Please log in again.":"Vaa sesija je istekla. Molimo prijavite se ponovno.","No matching login attempt found":"Pokuaj prijave se ne podudara sa podatcima u bazi.","Password is old. Please reset your password.":"Zaporka je stara. Molimo resetujte zaporku.","Incorrect password":"Netona zaporka","Invalid email":"Nevaei email","Must be logged in":"Morate biti prijavljeni","Need to set a username or email":"Morate postaviti korisniko ime ili email","old password format":"stari format zaporke","Password may not be empty":"Zaporka ne moe biti prazna","Signups forbidden":"Prijave zabranjenje","Token expired":"Token je istekao","Token has invalid email address":"Token ima nevaeu email adresu","User has no password set":"Korisnik nema postavljenu zaporku","User not found":"Korisnik nije pronaen","Verify email link expired":"Link za verifikaciju emaila je istekao","Verify email link is for unknown address":"Link za verifikaciju emaila je za nepoznatu adresu","Match failed":"Usporedba neuspjela","Unknown error":"Nepoznata pogreka"}}},u.map("hr",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"hozzads",and:"s",back:"vissza",changePassword:"Jelsz megvltoztatsa",choosePassword:"Vlassz egy jelszt",clickAgree:"A regisztrci gombra kattintva egyetrtesz a mi",configure:"Bellts",createAccount:"Felhasznl ltrehozsa",currentPassword:"Jelenlegi jelsz",dontHaveAnAccount:"Nincs mg felhasznld?",email:"Email",emailAddress:"Email cm",emailResetLink:"Visszallt link kldse",forgotPassword:"Elfelejtetted a jelszavadat?",ifYouAlreadyHaveAnAccount:"Ha mr van felhasznld, ",newPassword:"j jelsz",newPasswordAgain:"j jelsz (ismt)",optional:"Opcionlis",OR:"VAGY",password:"Jelsz",passwordAgain:"Jelsz (ismt)",privacyPolicy:"Adatvdelmi irnyelvek",remove:"eltvolts",resetYourPassword:"Jelsz visszalltsa",setPassword:"Jelsz belltsa",sign:"Bejelentkezs",signIn:"Bejelentkezs",signin:"jelentkezz be",signOut:"Kijelentkezs",signUp:"Regisztrci",signupCode:"Regisztrcis kd",signUpWithYourEmailAddress:"Regisztrci email cmmel",terms:"Hasznlati felttelek",updateYourPassword:"Jelsz mdostsa",username:"Felhasznlnv",usernameOrEmail:"Felhasznlnv vagy email","with":"-",info:{emailSent:"Email elkldve",emailVerified:"Email cm igazolva",passwordChanged:"Jelsz megvltoztatva",passwordReset:"Jelsz visszalltva"},error:{emailRequired:"Email cm megadsa ktelez.",minChar:"A jelsznak legalbb 7 karakter hosznak kell lennie.",pwdsDontMatch:"A jelszavak nem egyeznek",pwOneDigit:"A jelsznak legalbb egy szmjegyet tartalmaznia kell.",pwOneLetter:"A jelsznak legalbb egy bett tartalmaznia kell.",signInRequired:"A mvelet vgrehajtshoz be kell jelentkezned.",signupCodeIncorrect:"A regisztrcis kd hibs.",signupCodeRequired:"A regisztrcis kd megadsa ktelez.",usernameIsEmail:"A felhasznlnv nem lehet egy email cm.",usernameRequired:"Felhasznlnv megadsa ktelez.",accounts:{"Email already exists.":"A megadott email cm mr ltezik.","Email doesn't match the criteria.":"Email cm nem felel meg a feltteleknek.","Invalid login token":"rvnytelen belpsi token","Login forbidden":"Belps megtagadva","Service unknown":"Ismeretlen szolgltats","Unrecognized options for login request":"Ismeretlen belltsok a belpsi krelemhez","User validation failed":"Felhasznl azonosts sikertelen","Username already exists.":"A felhasznlnv mr ltezik.","You are not logged in.":"Nem vagy bejelentkezve.","You've been logged out by the server. Please log in again.":"A szerver kijelentkeztetett. Krjk, jelentkezz be jra.","Your session has expired. Please log in again.":"A munkamenet lejrt. Krjk, jelentkezz be jra.","No matching login attempt found":"Nem tallhat megegyez belpsi prblkozs","Password is old. Please reset your password.":"A jelsz tl rgi. Krjk, vltoztasd meg a jelszavad.","Incorrect password":"Helytelen jelsz","Invalid email":"rvnytelen email cm","Must be logged in":"A mvelet vgrehajtshoz bejelentkezs szksges","Need to set a username or email":"Felhasznlnv vagy email cm belltsa ktelez","old password format":"rgi jelsz formtum","Password may not be empty":"A jelsz nem lehet res","Signups forbidden":"Regisztrci megtagadva","Token expired":"Token lejrt","Token has invalid email address":"A token rvnytelen email cmet tartalmaz","User has no password set":"A felhasznlhoz nincs jelsz belltva","User not found":"Felhasznl nem tallhat","Verify email link expired":"Igazol email link lejrt","Verify email link is for unknown address":"Az igazol email link ismeretlen cmhez tartozik","Match failed":"Megegyeztets sikertelen","Unknown error":"Ismeretlen hiba"}}},u.map("hu",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"tambah",and:"dan",back:"kembali",changePassword:"Ganti Password",choosePassword:"Masukkan Password",clickAgree:"Dengan anda mendaftar, anda setuju dengan",configure:"Mengaturkan",createAccount:"Buat Account",currentPassword:"Password Anda Saat Ini",dontHaveAnAccount:"Tidak punya account?",email:"Email",emailAddress:"Alamat Email",emailResetLink:"Link untuk Email Reset",forgotPassword:"Lupa password?",ifYouAlreadyHaveAnAccount:"Jika anda belum punya account",newPassword:"Password Baru",newPasswordAgain:"Password Baru (ulang)",optional:"Opsional",OR:"ATAU",password:"Password",passwordAgain:"Password (ulang)",privacyPolicy:"Kebijakan Privasi",remove:"hapus",resetYourPassword:"Reset password anda",setPassword:"Masukkan Password",sign:"Sign",signIn:"Sign In",signin:"sign in",signOut:"Sign Out",signUp:"Mendaftar",signupCode:"Kode Registrasi",signUpWithYourEmailAddress:"Mendaftar dengan alamat email anda",terms:"Persyaratan Layanan",updateYourPassword:"Perbarui password anda",username:"Username",usernameOrEmail:"Username atau email","with":"dengan",info:{emailSent:"Email terkirim",emailVerified:"Email diverifikasi",passwordChanged:"Password terganti",passwordReset:"Password direset"},error:{emailRequired:"Alamat email dibutuhkan.",minChar:"Minimum password 7 karakter.",pwdsDontMatch:"Password yang diulang tidak sama.",pwOneDigit:"Password harus ada minimum 1 angka.",pwOneLetter:"Password harus ada minimum 1 huruf.",signInRequired:"Anda harus sign in untuk melakukan itu.",signupCodeIncorrect:"Kode registrasi salah.",signupCodeRequired:"Kode registrasi dibutuhkan.",usernameIsEmail:"Username anda tidak bisa sama dengan email address.",usernameRequired:"Username dibutuhkan.",accounts:{"Email already exists.":"Alamat email sudah dipakai.","Email doesn't match the criteria.":"Alamat email tidak sesuai dengan kriteria.","Invalid login token":"Login token tidak valid","Login forbidden":"Login dilarang","Service unknown":"Layanan unknown","Unrecognized options for login request":"Options tidak tersedia untuk permintaan login","User validation failed":"Validasi user gagal","Username already exists.":"Username sudah dipakai.","You are not logged in.":"Anda belum login.","You've been logged out by the server. Please log in again.":"Anda belum dilogout oleh server. Silahkan coba login lagi.","Your session has expired. Please log in again.":"Session anda telah kedaluarsa. Silahkan coba login lagi.","No matching login attempt found":"Usaha login tidak ditemukan.","Password is old. Please reset your password.":"Password anda terlalu tua. Silahkan ganti password anda.","Incorrect password":"Password salah","Invalid email":"Alamat email tidak valid","Must be logged in":"Anda harus login","Need to set a username or email":"Anda harus masukkan username atau email","old password format":"format password lama","Password may not be empty":"Password tidak boleh kosong","Signups forbidden":"Signup dilarang","Token expired":"Token telah kedaluarsa","Token has invalid email address":"Token memberikan alamat email yang tidak valid","User has no password set":"User belum memasukkan password","User not found":"User tidak ditemukan","Verify email link expired":"Link untuk verifikasi alamat email telah kedaluarsa","Verify email link is for unknown address":"Link untuk verifikasi alamat email memberikan alamat email yang tidak dikenalkan","Match failed":"Mencocokan gagal","Unknown error":"Error tidak dikenalkan"}}},u.map("id",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"aggiungi",and:"e",back:"indietro",changePassword:"Cambia Password",choosePassword:"Scegli una Password",clickAgree:"Cliccando Registrati, accetti la nostra",configure:"Configura",createAccount:"Crea un Account",currentPassword:"Password Corrente",dontHaveAnAccount:"Non hai un account?",email:"Email",emailAddress:"Indirizzo Email",emailResetLink:"Invia Link di Reset",forgotPassword:"Hai dimenticato la password?",ifYouAlreadyHaveAnAccount:"Se hai gi un account",newPassword:"Nuova Password",newPasswordAgain:"Nuova Password (di nuovo)",optional:"Opzionale",OR:"OPPURE",password:"Password",passwordAgain:"Password (di nuovo)",privacyPolicy:"Privacy Policy",remove:"rimuovi",resetYourPassword:"Reimposta la password",setPassword:"Imposta Password",sign:"Accedi",signIn:"Accedi",signin:"accedi",signOut:"Esci",signUp:"Registrati",signupCode:"Codice di Registrazione",signUpWithYourEmailAddress:"Registrati con il tuo indirizzo email",terms:"Termini di Servizio",updateYourPassword:"Aggiorna la password",username:"Username",usernameOrEmail:"Nome utente o email","with":"con",info:{emailSent:"Email inviata",emailVerified:"Email verificata",passwordChanged:"Password cambiata",passwordReset:"Password reimpostata"},error:{emailRequired:"L'Email  obbligatoria.",minChar:"La Password deve essere di almeno 7 caratteri.",pwdsDontMatch:"Le Password non corrispondono",pwOneDigit:"La Password deve contenere almeno un numero.",pwOneLetter:"La Password deve contenere 1 lettera.",signInRequired:"Per fare questo devi accedere.",signupCodeIncorrect:"Codice di Registrazione errato.",signupCodeRequired:"Il Codice di Registrazione  obbligatorio.",usernameIsEmail:"Il Nome Utente non pu essere un indirizzo email.",usernameRequired:"Il Nome utente  obbligatorio.",accounts:{"Email already exists.":"Indirizzo email gi esistente.","Email doesn't match the criteria.":"L'indirizzo email non soddisfa i requisiti.","Invalid login token":"Codice di accesso non valido","Login forbidden":"Accesso non consentito","Service unknown":"Servizio sconosciuto","Unrecognized options for login request":"Opzioni per la richiesta di accesso non ricunosciute","User validation failed":"Validazione utente fallita","Username already exists.":"Nome utente gi esistente.","You are not logged in.":"Non hai effettuato l'accesso.","You've been logged out by the server. Please log in again.":"Sei stato disconnesso dal server. Per favore accedi di nuovo.","Your session has expired. Please log in again.":"La tua sessione  scaduta. Per favore accedi di nuovo.","No matching login attempt found":"Tentativo di accesso corrispondente non trovato","Password is old. Please reset your password.":"La password  vecchia. Per favore reimposta la tua password.","Incorrect password":"Password non corretta","Invalid email":"Email non valida","Must be logged in":"Devi aver eseguito l'accesso","Need to set a username or email":" necessario specificare un nome utente o un indirizzo email","old password format":"vecchio formato password","Password may not be empty":"La password non pu essere vuota","Signups forbidden":"Registrazioni non consentite","Token expired":"Codice scaduto","Token has invalid email address":"Il codice ha un indirizzo email non valido","User has no password set":"L'utente non ha una password impostata","User not found":"Utente non trovato","Verify email link expired":"Link per la verifica dell'email scaduto","Verify email link is for unknown address":"Il link per la verifica dell'email fa riferimento ad un indirizzo sconosciuto","Match failed":"Riscontro fallito","Unknown error":"Errore Sconosciuto"}}},u.map("it",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:"",choosePassword:"",clickAgree:"",configure:"",createAccount:"",currentPassword:"",dontHaveAnAccount:"",email:"E",emailAddress:"E",emailResetLink:"E",forgotPassword:"",ifYouAlreadyHaveAnAccount:"",newPassword:"",newPasswordAgain:"()",optional:"",OR:"",password:"",passwordAgain:"()",privacyPolicy:"",remove:"",resetYourPassword:"",setPassword:"",sign:"",signIn:"",signin:"",signOut:"",signUp:"",signupCode:"",signUpWithYourEmailAddress:"E",terms:"",updateYourPassword:"",username:"",usernameOrEmail:"E","with":"with",info:{emailSent:"E",emailVerified:"E",passwordChanged:"",passwordReset:""},error:{emailRequired:"E",minChar:"7",pwdsDontMatch:"",pwOneDigit:"1",pwOneLetter:"m1",signInRequired:"",signupCodeIncorrect:"",signupCodeRequired:"",usernameIsEmail:"E",usernameRequired:"",accounts:{"Email already exists.":"E","Email doesn't match the criteria.":"E","Invalid login token":"","Login forbidden":"","Service unknown":"","Unrecognized options for login request":"","User validation failed":"","Username already exists.":"","You are not logged in.":"","You've been logged out by the server. Please log in again.":"","Your session has expired. Please log in again.":"","No matching login attempt found":"","Password is old. Please reset your password.":"","Incorrect password":"","Invalid email":"E","Must be logged in":"","Need to set a username or email":"E","old password format":"","Password may not be empty":"","Signups forbidden":"","Token expired":"","Token has invalid email address":"E","User has no password set":"","User not found":"","Verify email link expired":"E","Verify email link is for unknown address":"E","Match failed":"","Unknown error":""}}},u.map("ja",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:"",choosePassword:"",clickAgree:" ",configure:"",createAccount:"",currentPassword:"",dontHaveAnAccount:"?",email:"",emailAddress:"",emailResetLink:" ",forgotPassword:"?",ifYouAlreadyHaveAnAccount:"",newPassword:"",newPasswordAgain:" ()",optional:"",OR:"",password:"",passwordAgain:" ()",privacyPolicy:"",remove:"",resetYourPassword:"",setPassword:"",sign:"",signIn:"",signin:"",signOut:"",signUp:"",signupCode:"",signUpWithYourEmailAddress:"",terms:"",updateYourPassword:"",username:"",usernameOrEmail:" ","with":"",info:{emailSent:"",emailVerified:"",passwordChanged:"",passwordReset:""},error:{emailRequired:"",minChar:"  ",pwdsDontMatch:"",pwOneDigit:"  ",pwOneLetter:"  ",signInRequired:" ",signupCodeIncorrect:"",signupCodeRequired:"",usernameIsEmail:"",usernameRequired:"",accounts:{"Email already exists.":"","Email doesn't match the criteria.":"","Invalid login token":"","Login forbidden":"","Service unknown":"","Unrecognized options for login request":"","User validation failed":"","Username already exists.":"","You are not logged in.":"","You've been logged out by the server. Please log in again.":" , ","Your session has expired. Please log in again.":", ","No matching login attempt found":"","Password is old. Please reset your password.":", ","Incorrect password":"","Invalid email":"","Must be logged in":"","Need to set a username or email":" ","old password format":"","Password may not be empty":"","Signups forbidden":"","Token expired":"","Token has invalid email address":"","User has no password set":"","User not found":"","Verify email link expired":"","Verify email link is for unknown address":" ","Match failed":"","Unknown error":""}}},u.map("kh",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:" ",choosePassword:" ",clickAgree:"   ",configure:"",createAccount:" ",currentPassword:" ",dontHaveAnAccount:" ?",email:"",emailAddress:" ",emailResetLink:"  ",forgotPassword:" ?",ifYouAlreadyHaveAnAccount:"  ",newPassword:" ",newPasswordAgain:" ()",optional:"",OR:"",password:"",passwordAgain:" ()",privacyPolicy:"",remove:"",resetYourPassword:" ",setPassword:" ",sign:"",signIn:"",signin:"",signOut:"",signUp:"",signupCode:" ",signUpWithYourEmailAddress:" ",terms:"",updateYourPassword:" ",username:"",usernameOrEmail:"  ","with":"",info:{emailSent:" ",emailVerified:" ",passwordChanged:" ",passwordReset:" ",error:{emailRequired:" .",minChar:"  7 .",pwdsDontMatch:"  ",pwOneDigit:"    .",pwOneLetter:"    .",signInRequired:"  .",signupCodeIncorrect:"   .",signupCodeRequired:"  .",usernameIsEmail:"   .",usernameRequired:" .",accounts:{"Email already exists.":" .","Email doesn't match the criteria.":"    .","Invalid login token":"  ","Login forbidden":"  ","Service unknown":"   ","Unrecognized options for login request":"     ","User validation failed":" ","Username already exists.":" .","You are not logged in.":"  .",
"You've been logged out by the server. Please log in again.":"  .  .","Your session has expired. Please log in again.":" .  .","No matching login attempt found":"    ","Password is old. Please reset your password.":" . .","Incorrect password":" ","Invalid email":"  ","Must be logged in":" ","Need to set a username or email":"  ","old password format":"  ","Password may not be empty":" ","Signups forbidden":" ","Token expired":" ","Token has invalid email address":"     ","User has no password set":"  ","User not found":"   ","Verify email link expired":"  ","Verify email link is for unknown address":"     ","Match failed":" ","Unknown error":"   "}}}},u.map("ko",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"toevoegen",and:"en",back:"terug",changePassword:"Wachtwoord wijzigen",choosePassword:"Wachtwoord kiezen",clickAgree:"Door te registreren accepteert u onze",configure:"Configureer",createAccount:"Account aanmaken",currentPassword:"Huidig wachtwoord",dontHaveAnAccount:"Nog geen account?",email:"E-mail",emailAddress:"E-mailadres",emailResetLink:"Verzenden",forgotPassword:"Wachtwoord vergeten?",ifYouAlreadyHaveAnAccount:"Heeft u al een account?",newPassword:"Nieuw wachtwoord",newPasswordAgain:"Nieuw wachtwoord (herhalen)",optional:"Optioneel",OR:"OF",password:"Wachtwoord",passwordAgain:"Wachtwoord (herhalen)",privacyPolicy:"privacyverklaring",remove:"verwijderen",resetYourPassword:"Wachtwoord resetten",setPassword:"Wachtwoord instellen",sign:"Aanmelden",signIn:"Aanmelden",signin:"Aanmelden",signOut:"Afmelden",signUp:"Registreren",signupCode:"Registratiecode",signUpWithYourEmailAddress:"Met e-mailadres registreren",terms:"gebruiksvoorwaarden",updateYourPassword:"Wachtwoord veranderen",username:"Gebruikersnaam",usernameOrEmail:"Gebruikersnaam of e-mailadres","with":"met",info:{emailSent:"E-mail verzonden",emailVerified:"E-mail geverifieerd",PasswordChanged:"Wachtwoord gewijzigd",PasswordReset:"Wachtwoord gereset"},error:{emailRequired:"E-mailadres is verplicht",minChar:"Wachtwoord moet tenminste 7 tekens lang zijn.",pwdsDontMatch:"Wachtwoorden zijn niet gelijk.",pwOneDigit:"Wachtwoord moet tenminste 1 cijfer bevatten.",pwOneLetter:"Wachtwoord moet tenminste 1 letter bevatten.",signInRequired:"U moet aangemeld zijn.",signupCodeIncorrect:"Registratiecode is ongeldig.",signupCodeRequired:"Registratiecode is verplicht.",usernameIsEmail:"Gebruikersnaam is gelijk aan e-mail.",usernameRequired:"Gebruikersnaam is verplicht.",accounts:{"Email already exists.":"Dit e-mailadres is al in gebruik.","Email doesn't match the criteria.":"e-mail voldoet niet aan de voorwaarden.","Invalid login token":"Ongeldig inlogtoken","Login forbidden":"Aanmelding geweigerd","Service unknown":"Sevice onbekend","Unrecognized options for login request":"Onbekende optie voor inlogverzoek","User validation failed":"Gebruikersvalidatie mislukt","Username already exists.":"Gebruikersnaam bestaat al.","You are not logged in.":"U bent niet ingelogd.","You've been logged out by the server. Please log in again.":"U bent door de server afgemeld. Meld a.u.b. opnieuw aan.","Your session has expired. Please log in again.":"Uw sessie is verlopen. Meld a.u.b. opnieuw aan.","No matching login attempt found":"Geen overeenkomstig inlogverzoek gevonden.","Password is old. Please reset your Password.":"Wachtwoord is verlopen. Reset a.u.b. uw wachtwoord.","Incorrect Password":"Onjuist wachtwoord","Invalid email":"Ongeldig e-mailadres","Must be logged in":"U moet aangemeld zijn","Need to set a username or email":"Gebruikersnaam of e-mailadres moet ingesteld zijn","Password may not be empty":"Wachtwoord mag niet leeg zijn","Signups forbidden":"Registratie verboden","Token expired":"Token is verlopen","Token has invalid email address":"Token heeft ongeldig e-mailadres","User has no Password set":"Geen wachtwoord ingesteld voor gebruiker","User not found":"Gebruiker niet gevonden","Verify email link expired":"Verificatielink is verlopen","Verify email link is for unknown address":"Verificatielink is voor onbekend e-mailadres","Match failed":"Geen match","Unknown error":"Onbekende fout"}}},u.map("nl",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"legg til",and:"og",back:"tilbake",changePassword:"Bytt passord",choosePassword:"Velg passord",clickAgree:"Ved  klikke meld p godtar du vr",configure:"Konfigurer",createAccount:"Oprett konto",currentPassword:"Nvrende passord",dontHaveAnAccount:"Har du ikke en konto?",email:"E-post",emailAddress:"E-postadresse",emailResetLink:"Epost nullstillingslenke",forgotPassword:"Glemt passord?",ifYouAlreadyHaveAnAccount:"Hvis du allerede har en konto",newPassword:"Nytt passord",newPasswordAgain:"Gjengi nytt passord",optional:"Frivillig",OR:"eller",password:"Passord",passwordAgain:"Gjengi passord",privacyPolicy:"Personvern",remove:"fjern",resetYourPassword:"Nullstill passord",setPassword:"Sett passord",sign:"Logg",signIn:"Logg inn",signin:"Logg inn",signOut:"Logg ut",signUp:"Meld p",signupCode:"Pmeldingskode",signUpWithYourEmailAddress:"Meld p med din e-postadresse",terms:"Betingelser for bruk",updateYourPassword:"Oppdater passord",username:"Brukernavn",usernameOrEmail:"Brukernavn eller e-epost","with":"med",info:{emailSent:"E-post sendt",emailVerified:"E-post bekreftet",passwordChanged:"Passord endret",passwordReset:"Passord nullstillt"},error:{emailRequired:"E-post obligatorisk.",minChar:"Passordet m ha minst 7 tegn.",pwdsDontMatch:"Passordene er ikke like.",pwOneDigit:"Passordet m ha minst ett tall.",pwOneLetter:"Passordet m ha minst en bokstav.",signInRequired:"Du m vre logget inn for  gjre dette.",signupCodeIncorrect:"Pmelding gikk galt.",signupCodeRequired:"Pmeldingskode kreves.",usernameIsEmail:"Brukernavn kan ikke vre en e-postadresse.",usernameRequired:"Brukernavn m utfylles.",accounts:{"Email already exists.":"E-postadressen finnes allerede.","Email doesn't match the criteria.":"E-postadressen mter ikke kriteriet.","Invalid login token":"Ugyldig innloggingstegn","Login forbidden":"Innlogging forbudt","Service unknown":"Ukjent tjeneste","Unrecognized options for login request":"Ukjendte valg ved innloggingsforsk","User validation failed":"Brukergodkjenning gikk galt","Username already exists.":"Brukernavnet finnes allerede.","You are not logged in.":"Du er ikke logget inn.","You've been logged out by the server. Please log in again.":"Tjeneren loggt deg ut. Logg inn p ny.","Your session has expired. Please log in again.":"Din kt er utlpt. Logg inn p ny.","No matching login attempt found":"Fant ingen samsvarende innloggingsfrsk","Password is old. Please reset your password.":"Passordet er for gammelt. Nullstill passordet ditt.","Incorrect password":"Feil passord","Invalid email":"Ugyldig e-postadresse","Must be logged in":"Du m vre innlogget","Need to set a username or email":"Oppgi brukernavn eller e-postadresse","old password format":"gammelt passordformat","Password may not be empty":"Passord m vre utfyllt","Signups forbidden":"Pmeldinger ikke tillatt","Token expired":"kten er utlpt","Token has invalid email address":"Innloggingstegnet har ugyldig e-postadresse","User has no password set":"Brukeren har ikke angitt passord","User not found":"Bruker ikke funnet","Verify email link expired":"Lenke for e-postbekreftelse er utlpt","Verify email link is for unknown address":"Lenke for e-postbekreftelse er for en ukjent adresse","Match failed":"Ikke samsvar","Unknown error":"Ukjent feil"}}},u.map("no_NB",a),u.map("no-NB",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"dodaj",and:"i",back:"powrt",changePassword:"Zmie haso",choosePassword:"Wybierz haso",clickAgree:"Klikajc na Zarejestruj si zgadzasz si z nasz",configure:"Konfiguruj",createAccount:"Utwrz konto",currentPassword:"Aktualne haso",dontHaveAnAccount:"Nie masz konta?",email:"E-mail",emailAddress:"Adres e-mail",emailResetLink:"Wylij e-mail z linkiem do zmiany hasa",forgotPassword:"Zapomniae hasa?",ifYouAlreadyHaveAnAccount:"Jeeli ju masz konto",newPassword:"Nowe haso",newPasswordAgain:"Nowe haso (powtrz)",optional:"Nieobowizkowe",OR:"LUB",password:"Haso",passwordAgain:"Haso (powtrz)",privacyPolicy:"polityk prywatnoci",remove:"usu",resetYourPassword:"Ustaw nowe haso",setPassword:"Ustaw haso",sign:"Podpisz",signIn:"Zaloguj si",signin:"zaloguj si",signOut:"Wyloguj si",signUp:"Zarejestruj si",signupCode:"Kod rejestracji",signUpWithYourEmailAddress:"Zarejestruj si uywajc adresu e-mail",terms:"warunkami korzystania z serwisu",updateYourPassword:"Zaktualizuj swoje haso",username:"Nazwa uytkownika",usernameOrEmail:"Nazwa uytkownika lub adres e-mail","with":"z",info:{emailSent:"Adres e-mail wysany",emailVerified:"Adres e-mail zweryfikowany",passwordChanged:"Haso zmienione",passwordReset:"Haso wyzerowane"},error:{emailRequired:"Wymagany jest adres e-mail.",minChar:"7 znakw to minimalna dugo hasa.",pwdsDontMatch:"Hasa s rne",pwOneDigit:"Haso musi zawiera przynajmniej jedn cyfr.",pwOneLetter:"Haso musi zawiera 1 liter.",signInRequired:"Musisz by zalogowany, aby to zrobi.",signupCodeIncorrect:"Kod rejestracji jest nieprawidowy.",signupCodeRequired:"Wymagany jest kod rejestracji.",usernameIsEmail:"Adres e-mail nie moe by nazw uytkownika.",usernameRequired:"Wymagana jest nazwa uytkownika.",accounts:{"Email already exists.":"Adres e-mail ju istnieje.","Email doesn't match the criteria.":"Adres e-mail nie spenia kryteriw.","Invalid login token":"Bdny token logowania","Login forbidden":"Logowanie zabronione","Service unknown":"Nieznana usuga","Unrecognized options for login request":"Nieznane parametry w daniu logowania","User validation failed":"Niepoprawna nazwa uytkownika","Username already exists.":"Nazwa uytkownika ju istnieje.","You are not logged in.":"Nie jeste zalogowany.","You've been logged out by the server. Please log in again.":"Zostae wylogowane przez serwer. Zaloguj si ponownie.","Your session has expired. Please log in again.":"Twoja sesja wygasa. Zaloguj si ponownie.","No matching login attempt found":"Nie dopasowano danych logowania","Password is old. Please reset your password.":"Haso jest stare. Prosz wyzerowa haso.","Incorrect password":"Niepoprawne haso","Invalid email":"Bdny adres e-mail","Must be logged in":"Musisz by zalogowany","Need to set a username or email":"Wymagane ustawienie nazwy uytkownika lub adresu e-mail","old password format":"stary format hasa","Password may not be empty":"Haso nie moe by puste","Signups forbidden":"Rejestracja zabroniona","Token expired":"Token wygas","Token has invalid email address":"Token ma niewaciwy adres e-mail","User has no password set":"Uytkownik nie ma ustawionego hasa","User not found":"Nie znaleziono uytkownika","Verify email link expired":"Link weryfikacyjny wygas","Verify email link is for unknown address":"Link weryfikacyjny jest dla nieznanego adresu","Match failed":"Bdne dopasowanie","Unknown error":"Nieznany bd"}}},u.map("pl",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"Adicionar",and:"e",back:"Voltar",changePassword:"Alterar senha",choosePassword:"Escolha uma senha",clickAgree:"Ao clicar em Criar Conta, voc estar reconhecendo que aceita nossos Termos de Uso",configure:"Configurar",createAccount:"Criar Conta",currentPassword:"Senha Atual",dontHaveAnAccount:"No tem conta?",email:"E-mail",emailAddress:"Endereo de e-mail",emailResetLink:"E-mail com link para gerar Nova Senha",forgotPassword:"Esqueceu sua senha?",ifYouAlreadyHaveAnAccount:"Se voc j tem uma conta",newPassword:"Nova Senha",newPasswordAgain:"Nova Senha (novamente)",optional:"Opcional",OR:"OU",password:"Senha",passwordAgain:"Senha (novamente)",privacyPolicy:"Poltica de Privacidade",remove:"remover",resetYourPassword:"Gerar nova senha",setPassword:"Cadastrar Senha",sign:"Entrar",signIn:"Entrar",signin:"entrar",signOut:"Sair",signUp:"Criar conta",signupCode:"Cdigo de Registro",signUpWithYourEmailAddress:"Criar conta utilizando seu endereo de e-mail",terms:"Termos de Uso",updateYourPassword:"Atualizar senha",username:"Nome de usurio",usernameOrEmail:"Usurio ou e-mail","with":"com",info:{emailSent:"E-mail enviado",emailVerified:"E-mail verificado",passwordChanged:"Senha atualizada",passwordReset:"Senha alterada"},error:{emailRequired:"E-mail  obrigatrio.",minChar:"Senha requer um mnimo de 7 caracteres.",pwdsDontMatch:"Senhas no coincidem",pwOneDigit:"A Senha deve conter pelo menos um dgito.",pwOneLetter:"A Senha deve conter pelo menos uma letra.",signInRequired:"Voc precisa estar logado para fazer isso.",signupCodeIncorrect:"Cdigo de acesso incorreto.",signupCodeRequired:" necessrio um cdigo de acesso.",usernameIsEmail:"Nome de usurio no pode ser um endereo de e-mail.",usernameRequired:"Nome de usurio  obrigatrio.",accounts:{"Email already exists.":"E-mail j existe.","Email doesn't match the criteria.":"E-mail invlido.","Invalid login token":"Token de login invlido","Login forbidden":"Login no permitido","Service unknown":"Servio desconhecido","Unrecognized options for login request":"Opes desconhecidas para solicitao de login","User validation failed":"Validao de usurio falhou","Username already exists.":"Nome de usurio j existe.","You are not logged in.":"Voc no est logado.","You've been logged out by the server. Please log in again.":"Voc foi desconectado pelo servidor. Por favor, efetue login novamente.","Your session has expired. Please log in again.":"Sua sesso expirou. Por favor, efetue login novamente.","No matching login attempt found":"No foi encontrada nenhuma tentativa de login que coincida.","Password is old. Please reset your password.":"Senha expirou. Por favor, cadastre uma nova senha.","Incorrect password":"Senha incorreta","Invalid email":"E-mail invlido","Must be logged in":" necessrio efetuar login","Need to set a username or email":" necessrio configurar um Nome de Usurio ou E-mail","old password format":"Formato de senha antigo","Password may not be empty":"Senha no pode estar em branco","Signups forbidden":"No permitido Criar Conta","Token expired":"Token expirou","Token has invalid email address":"Token tem endereo de e-mail invlido","User has no password set":"Usurio no possui senha cadastrada","User not found":"Usurio no encontrado","Verify email link expired":"O link de verificao de e-mail expirou","Verify email link is for unknown address":"O link de verificao de e-mail est configurado para um endereo desconhecido","Verify email link expired":"E-mail de verificao recebido?","Send again":"Renviar","Match failed":"Senhas no coincidem","Unknown error":"Erro desconhecido"}}},u.map("pt",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"adicionar",and:"e",back:"voltar",changePassword:"Alterar palavra-passe",choosePassword:"Escolha uma palavra-passe",clickAgree:"Ao clicar em Registar, est a aceitar os nossos",configure:"Configurar",createAccount:"Criar uma Conta",currentPassword:"Palavra-passe Atual",dontHaveAnAccount:"No tem conta?",email:"E-mail",emailAddress:"Endereo de e-mail",emailResetLink:"Enviar e-mail para redefinir a palavra-passe",forgotPassword:"Esqueci-me da palavra-passe",ifYouAlreadyHaveAnAccount:"Se j tem uma conta",newPassword:"Nova Palavra-passe",newPasswordAgain:"Nova Palavra-passe (novamente)",optional:"Opcional",OR:"OU",password:"Palavra-passe",passwordAgain:"Palavra-passe (novamente)",privacyPolicy:"Poltica de Privacidade",remove:"remover",resetYourPassword:"Redefinir a palavra-passe",setPassword:"Definir Palavra-passe",sign:"Iniciar",signIn:"Iniciar Sesso",signin:"iniciar sesso",signOut:"Sair",signUp:"Criar conta",signupCode:"Cdigo de Registo",signUpWithYourEmailAddress:"Registar com o endereo de e-mail",terms:"Termos de Uso",updateYourPassword:"Alterar a palavra-passe",username:"Nome do ulilizador",usernameOrEmail:"Ulilizador ou e-mail","with":"com",info:{emailSent:"E-mail enviado",emailVerified:"E-mail verificado",passwordChanged:"Palavra-passe alterada",passwordReset:"Palavra-passe redefinida"},error:{emailRequired:"O e-mail  obrigatrio.",minChar:"A palavra-passe tem de ter no mnimo 7 caracteres.",pwdsDontMatch:"As palavra-passes no coincidem",pwOneDigit:"A palavra-passe tem de conter pelo menos um dgito.",pwOneLetter:"A palavra-passe tem de conter pelo menos uma letra.",signInRequired:" necessrio iniciar sesso para fazer isso.",signupCodeIncorrect:"Cdigo de registo incorreto.",signupCodeRequired:" necessrio um cdigo de registo.",usernameIsEmail:"O nome do utilizador no pode ser um endereo de e-mail.",usernameRequired:"O nome de usurio  obrigatrio.",accounts:{"Email already exists.":"O e-mail j existe.","Email doesn't match the criteria.":"E-mail invlido.","Invalid login token":"Token de incio de sesso invlido","Login forbidden":"Incio de sesso impedido","Service unknown":"Servio desconhecido","Unrecognized options for login request":"Pedido de incio de sesso com opes no reconhecidas","User validation failed":"A validao do utilizador falhou","Username already exists.":"O nome do utilizador j existe.","You are not logged in.":"No tem sesso iniciada.","You've been logged out by the server. Please log in again.":"Sesso terminada pelo servidor. Por favor, inicie sesso novamente.","Your session has expired. Please log in again.":"A sua sesso expirou. Por favor, inicie sesso novamente.","No matching login attempt found":"No foi encontrada nenhuma tentativa de incio de sesso que coincida.","Password is old. Please reset your password.":"A palavra-passe  antiga. Por favor, redefina a sua palavra-passe.","Incorrect password":"Palavra-passe incorreta","Invalid email":"E-mail invlido","Must be logged in":" necessrio iniciar sesso","Need to set a username or email":" necessrio definir um nome de utilizador ou e-mail","old password format":"Formato de palavra-passe antigo","Password may not be empty":"A palavra-passe no pode estar em branco","Signups forbidden":"Criao de contas proibida","Token expired":"O token expirou","Token has invalid email address":"O token tem um endereo de e-mail invlido","User has no password set":"O utilizador no defeniu a palavra-passe","User not found":"Utilizador no encontrado","Verify email link expired":"O link de verificao de e-mail expirou","Verify email link is for unknown address":"O link de verificao de e-mail est definido para um endereo desconhecido","Match failed":"Comparao falhou","Unknown error":"Erro desconhecido"}}},u.map("pt_PT",a),u.map("pt-PT",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"adaug",and:"i",back:"napoi",changePassword:"Schimbare parol",choosePassword:"Alege o parol",clickAgree:"Click pe Register, suntei de acord",configure:"Configurare",createAccount:"Creai un cont",currentPassword:"Parola curent",dontHaveAnAccount:"Nu ai un cont?",email:"E-mail",emailAddress:"Adresa de e-mail",emailResetLink:"Link de resetare parol",forgotPassword:"i-ai uitat parola?",ifYouAlreadyHaveAnAccount:"Dac ai deja un cont",newPassword:"Parol nou",newPasswordAgain:"Parol nou (din nou)",optional:"Opional",OR:"SAU",password:"Parol",passwordAgain:"Parol (din nou)",privacyPolicy:"Politica de confidentialitate",remove:"Elimin",resetYourPassword:"Schimbati parola",setPassword:"Setati parola",sign:"nregistreaz",signIn:"Autentificare",signin:"Autentificare",signOut:"Deconectare",signUp:"nregistrare",signupCode:"Codul de nregistrare",signUpWithYourEmailAddress:"nregistrai-v adresa de e-mail",terms:"Condiii de utilizare",updateYourPassword:"Actualizai parola dvs.",username:"Nume utilizator",usernameOrEmail:"Nume utilizator sau e-mail","with":"cu",info:{emailSent:"Email trimis",emailVerified:"Email verificat",passwordChanged:"Parola a fost schimbata",passwordReset:"Resetare parola"},error:{emailRequired:"Introduceti Email-ul.",minChar:"Parol minima de 7 caractere ",pwdsDontMatch:"Parolele nu se potrivesc",pwOneDigit:"Parola trebuie s contin cel puin o cifr.",pwOneLetter:"Parola necesit o scrisoare.",signInRequired:"Autentificare.",signupCodeIncorrect:"Codul de nregistrare este incorect.",signupCodeRequired:"Aveti nevoie de cod de nregistrare.",usernameIsEmail:"Numele de utilizator nu poate fi o adres de e-mail.",usernameRequired:"Introduceti numele de utilizator.",accounts:{"Email already exists.":"E-mail exist deja.","Email doesn't match the criteria.":"E-mail nu se potrivete cu criteriile.","Invalid login token":"Token invalid","Login forbidden":"Autentificare interzis","Service unknown":"Service necunoscut","Unrecognized options for login request":"Opiuni nerecunoscute de cerere de conectare","User validation failed":"Validare utilizator nereuit","Username already exists.":"Numele de utilizator existent.","You are not logged in.":"Nu sunteti autentificat.","You've been logged out by the server. Please log in again.":"Ai fost deconectat de ctre server rugam sa va logati din nou.","Your session has expired. Please log in again.":"Sesiunea a expirat rugam sa va logati din nou.","No matching login attempt found":"Autentificare nereusit","Password is old. Please reset your password.":"Parola expirata, V rugm s resetati parola.","Incorrect password":"Parola incorect","Invalid email":"E-mail invalid","Must be logged in":"Trebuie sa fii logat","Need to set a username or email":"Adaugati un nume utilizator sau un e-mail","old password format":"Parola cu format vechi","Password may not be empty":"Parola nu poate fi gol","Signups forbidden":"nscrieri interzis","Token expired":"Token expirat","Token has invalid email address":"Token are adres de email invalid","User has no password set":"Utilizator nu are parola setat","User not found":"Utilizator nu a fost gsit","Verify email link expired":"Link-ul de e-mail a expirat","Verify email link is for unknown address":"Link-ul de e-mail nu corespunde","Match failed":"Potrivire nereuit","Unknown error":"Eroare necunoscut"}}},u.map("ro",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:" ",choosePassword:" ",clickAgree:"  ,    ",configure:"",createAccount:" ",currentPassword:" ",dontHaveAnAccount:" ?",email:"Email",emailAddress:"Email",emailResetLink:"   ",forgotPassword:" ?",ifYouAlreadyHaveAnAccount:"     ",newPassword:" ",newPasswordAgain:"  ( )",optional:"",OR:"",password:"",passwordAgain:" ( )",privacyPolicy:" ",remove:"",resetYourPassword:" ",setPassword:" ",sign:"",signIn:"",signin:"",signOut:"",signUp:"",signupCode:" ",signUpWithYourEmailAddress:"   email ",terms:" ",updateYourPassword:" ",username:" ",usernameOrEmail:"   email","with":"",info:{emailSent:"Email ",emailVerified:"Email  ",passwordChanged:" ",passwordReset:" "},error:{emailRequired:"Email .",minChar:" -    7.",pwdsDontMatch:"  ",pwOneDigit:"       .",pwOneLetter:"       .",signInRequired:"    .",signupCodeIncorrect:"  .",signupCodeRequired:"  .",usernameIsEmail:"      email.",usernameRequired:"  .",accounts:{"Email already exists.":"Email  ","Email doesn't match the criteria.":"Email   .","Invalid login token":"   ","Login forbidden":" ","Service unknown":"C ","Unrecognized options for login request":"    ","User validation failed":"  ","Username already exists.":" .","You are not logged in.":"  .","You've been logged out by the server. Please log in again.":"  .    .","Your session has expired. Please log in again.":"  .    .","No matching login attempt found":"     ","Password is old. Please reset your password.":" . ,   .","Incorrect password":" ","Invalid email":" Email","Must be logged in":" ","Need to set a username or email":"    email","old password format":"  ","Password may not be empty":"    ","Signups forbidden":" ","Token expired":"   ","Token has invalid email address":"   email ","User has no password set":"    ","User not found":"  ","Verify email link expired":"  email ","Verify email link is for unknown address":"  email   ","Match failed":" ","Unknown error":" "}}},u.map("ru",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"prida",and:"a",back:"sp",changePassword:"Zmena hesla",choosePassword:"Zvote si heslo",clickAgree:'Stlaenm tlaidla "Registrova" akceptujete',configure:"Nastavi",createAccount:"Vytvori konto",currentPassword:"Sasn heslo",dontHaveAnAccount:"Nemte et?",email:"Email",emailAddress:"Emailov adresa",emailResetLink:"Odosla na email overovac odkaz",forgotPassword:"Zabudli ste heslo?",ifYouAlreadyHaveAnAccount:"Ak u mte vytvoren et prejdite na",newPassword:"Nov heslo",newPasswordAgain:"Nov heslo (opakujte)",optional:"Voliten",OR:"alebo",password:"Heslo",passwordAgain:"Heslo (opakujte)",privacyPolicy:"pravidl ochrany skromia",remove:"odstrni",resetYourPassword:"Obnovenie hesla",setPassword:"Nastavi heslo",sign:"Prihlsi",signIn:"Prihlsenie",signin:"prihlsenie",signOut:"Odhlsi",signUp:"Registrova",signupCode:"Registran kd",signUpWithYourEmailAddress:"Registrcia pomocou emailovej adresy",terms:"pravidl povania",updateYourPassword:"Aktualizova heslo",username:"Uvatesk meno",usernameOrEmail:"Uvatesk meno alebo email","with":"s",info:{emailSent:"Email odoslan",emailVerified:"Email bol overen",passwordChanged:"Heslo bolo zmenen",passwordReset:"Obnova hesla"},error:{emailRequired:"Email je vyadovan.",minChar:"minimlne 7 znakov heslo.",pwdsDontMatch:"Hesl sa nezhoduj",pwOneDigit:"Heslo mus ma aspo jeden znak.",pwOneLetter:"Heslo mus ma aspo 1 znak..",signInRequired:"Je vyadovan prihlsenie na tto akciu.",signupCodeIncorrect:"Registran kd je nesprvny.",signupCodeRequired:"Je vyadovan registran kd.",usernameIsEmail:"Uvatesk meno neme by email.",usernameRequired:"Je vyadovan uvatesk meno.",accounts:{"Email already exists.":"Email u bol registrovan.","Email doesn't match the criteria.":"Email nevyhovuje kritriam.","Invalid login token":"Neplatn token prihlsenia","Login forbidden":"Prihlsenie neuspen","Service unknown":"Neznma sluba","Unrecognized options for login request":"Neroznali sa podmienky pre poiadavku prihlsenia","User validation failed":"Overenie uvatea zlyhalo","Username already exists.":"Uvate u existuje.","You are not logged in.":"Vyaduje sa prihlsenie.","You've been logged out by the server. Please log in again.":"Boli ste odhlsen/ zo servera. Prosm prihlste sa znova.","Your session has expired. Please log in again.":"Vae prhlsenie expirovalo. Prosm prihlste sa znova.","No matching login attempt found":"Prihlsenie neshlas","Password is old. Please reset your password.":"Heslo je zastaral. Prosm obnovte si ho.","Incorrect password":"Nesprvne heslo","Invalid email":"Nesprvan email","Must be logged in":"Je vyadovan prihlsenie","Need to set a username or email":"Je potrebn nastavi uvatesk meno a email","old password format":"formt starho hesla","Password may not be empty":"Heslo nesmie by przdne","Signups forbidden":"Prihlsenie je zakzan","Token expired":"Token expiroval","Token has invalid email address":"Token obsahuje nesprvnu emailov adresu","User has no password set":"Uvate nem nastaven heslo","User not found":"Uvate sa nenaiel","Verify email link expired":"Odkazu pre overenie emailu vyprala platnos.","Verify email link is for unknown address":"Overovac odkaz je z nenmej adresy","Match failed":"Nezhodn","Unknown error":"Neznma chyba"}}},u.map("sk",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"dodaj",and:"in",back:"nazaj",changePassword:"Spremeni geslo",choosePassword:"Izberi geslo",clickAgree:"S klikom na Registracija se strinja",configure:"Nastavi",createAccount:"Nova registracija",currentPassword:"Trenutno geslo",dontHaveAnAccount:"Nisi registriran(a)?",email:"Email",emailAddress:"Email naslov",emailResetLink:"Polji ponastavitveno povezavo",forgotPassword:"Pozabljeno geslo?",ifYouAlreadyHaveAnAccount:"e si e registriran(a),",newPassword:"Novo geslo",newPasswordAgain:"Novo geslo (ponovno)",optional:"Po elji",OR:"ALI",password:"Geslo",passwordAgain:"Geslo (ponovno)",privacyPolicy:"z naimi pogoji uporabe",remove:"brii",resetYourPassword:"Ponastavi geslo",setPassword:"Nastavi geslo",sign:"Prijava",signIn:"Prijava",signin:"se prijavi",signOut:"Odjava",signUp:"Registracija",signupCode:"Prijavna koda",signUpWithYourEmailAddress:"Prijava z email naslovom",terms:"Pogoji uporabe",updateYourPassword:"Spremeni geslo",username:"Uporabniko ime",usernameOrEmail:"Uporabniko ime ali email","with":"z",info:{emailSent:"E-pota poslana",emailVerified:"Email naslov preverjen",passwordChanged:"Geslo spremenjeno",passwordReset:"Geslo ponastavljeno"},error:{emailRequired:"Email je obvezen vnos.",minChar:"Geslo mora imeti vsaj sedem znakov.",pwdsDontMatch:"Gesli se ne ujemata",pwOneDigit:"V geslu mora biti vsaj ena tevilka.",pwOneLetter:"V geslu mora biti vsaj ena rka.",signInRequired:"Za to mora biti prijavljen(a).",signupCodeIncorrect:"Prijavna koda je napana.",signupCodeRequired:"Prijavna koda je obvezen vnos.",usernameIsEmail:"Uporabniko ime ne more biti email naslov.",usernameRequired:"Uporabniko ime je obvezen vnos.",accounts:{"Email already exists.":"Email e obstaja.","Email doesn't match the criteria.":"Email ne odgovarja kriterijem.","Invalid login token":"Napaen prijavni eton","Login forbidden":"Prijava ni dovoljena","Service unknown":"Neznana storitev","Unrecognized options for login request":"Neznane monosti v prijavnem zahtevku","User validation failed":"Preverjanje uporabnika neuspeno","Username already exists.":"Uporabniko ime e obstaja","You are not logged in.":"Nisi prijavljen(a).","You've been logged out by the server. Please log in again.":"Odjavljen(a) si s strenika. Ponovi prijavo.","Your session has expired. Please log in again.":"Seja je potekla. Ponovi prijavo.","No matching login attempt found":"Prijava ne obstaja","Password is old. Please reset your password.":"Geslo je staro. Zamenjaj ga.","Incorrect password":"Napano geslo","Invalid email":"Napaen email","Must be logged in":"Mora biti prijavljane(a)","Need to set a username or email":"Prijava ali email sta obvezna","old password format":"stara oblika gesla","Password may not be empty":"Geslo ne sme biti prazno",
"Signups forbidden":"Prijave onemogoene","Token expired":"eton je potekel","Token has invalid email address":"eton vsebuje napaen email","User has no password set":"Uporabnik nima gesla","User not found":"Uporabnik ne obstaja","Verify email link expired":"Povezava za potrditev je potekla","Verify email link is for unknown address":"Povezava za potrditev vsebuje neznan naslov","Match failed":"Prijava neuspena","Unknown error":"Neznana napaka"}}},u.map("sl",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"lgg till",and:"och",back:"tillbaka",changePassword:"ndra lsenord",choosePassword:"Vlj lsenord",clickAgree:"Nr du vljer att skapa ett konto s godknner du ocks vr",configure:"Konfigurera",createAccount:"Skapa ett konto",currentPassword:"Nuvarande lsenord",dontHaveAnAccount:"Har du inget konto?",email:"E-postadress",emailAddress:"E-postadress",emailResetLink:"terstllningslnk fr e-post",forgotPassword:"Glmt ditt lsenord?",ifYouAlreadyHaveAnAccount:"Om du redan har ett konto",newPassword:"Nytt lsenord",newPasswordAgain:"Nytt lsenord (upprepa)",optional:"Valfri",OR:"ELLER",password:"Lsenord",passwordAgain:"Lsenord (upprepa)",privacyPolicy:"integritetspolicy",remove:"ta bort",resetYourPassword:"terstll ditt lsenord",setPassword:"Vlj lsenord",sign:"Logga",signIn:"Logga in",signin:"logga in",signOut:"Logga ut",signUp:"Skapa konto",signupCode:"Registreringskod",signUpWithYourEmailAddress:"Skapa ett konto med din e-postadress",terms:"anvndarvillkor",updateYourPassword:"Uppdatera ditt lsenord",username:"Anvndarnamn",usernameOrEmail:"Anvndarnamn eller e-postadress","with":"med",info:{emailSent:"E-post skickades",emailVerified:"E-post verifierades",passwordChanged:"Lsenordet har ndrats",passwordReset:"terstll lsenordet"},error:{emailRequired:"Det krvs en e-postaddress.",minChar:"Det krvs minst 7 tecken i ditt lsenord.",pwdsDontMatch:"Lsenorden matchar inte.",pwOneDigit:"Lsenordet mste ha minst 1 siffra.",pwOneLetter:"Lsenordet mste ha minst 1 bokstav.",signInRequired:"Inloggning krvs hr.",signupCodeIncorrect:"Registreringskoden r felaktig.",signupCodeRequired:"Det krvs en registreringskod.",usernameIsEmail:"Anvndarnamnet kan inte vara en e-postadress.",usernameRequired:"Det krvs ett anvndarnamn.",accounts:{"Email already exists.":"E-postadressen finns redan.","Email doesn't match the criteria.":"E-postadressen uppfyller inte kriterierna.","Invalid login token":"Felaktig login-token","Login forbidden":"Inloggning tillts ej","Service unknown":"Oknd service","Unrecognized options for login request":"Oknda val fr inloggningsfrsket","User validation failed":"Validering av anvndare misslyckades","Username already exists.":"Anvndarnamn finns redan.","You are not logged in.":"Du r inte inloggad.","You've been logged out by the server. Please log in again.":"Du har loggats ut av servern. Vnligen logga in igen.","Your session has expired. Please log in again.":"Din session har gtt ut. Vnligen ligga in igen.","No matching login attempt found":"Inget matchande loginfrsk kunde hittas","Password is old. Please reset your password.":"Ditt lsenord r gammalt. Vnligen terstll ditt lsenord.","Incorrect password":"Felaktigt lsenord","Invalid email":"Ogiltig e-postadress","Must be logged in":"Mste vara inloggad","Need to set a username or email":"Ett anvndarnamn eller en e-postadress krvs.","old password format":"gammalt lsenordsformat","Password may not be empty":"Lsenordet fr inte vara tomt","Signups forbidden":"Registrering frbjuden","Token expired":"Token har gtt ut","Token has invalid email address":"Token har ogiltig e-postadress","User has no password set":"Anvndaren har inget lsenord","User not found":"Anvndaren hittades inte","Verify email link expired":"Lnken fr att verifera e-postadress har gtt ut","Verify email link is for unknown address":"Lnken fr att verifiera e-postadress r fr en oknd adress.","Match failed":"Matchning misslyckades","Unknown error":"Oknt fel"}}},u.map("sv",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"ekle",and:"ve",back:"geri",changePassword:"ifre Deitir",choosePassword:"ifre Belirle",clickAgree:"Kayta tklayarak kabul etmi olacanz",configure:"Yaplandr",createAccount:"Hesap Olutur",currentPassword:"Mevcut ifre",dontHaveAnAccount:"Hesabn yok mu?",email:"Eposta",emailAddress:"Eposta Adresi",emailResetLink:"Email Reset Link",forgotPassword:"ifreni mi unuttun?",ifYouAlreadyHaveAnAccount:"Zaten bir hesabn varsa",newPassword:"Yeni ifre",newPasswordAgain:"Yeni ifre (tekrar)",optional:"stee Bal",OR:"VEYA",password:"ifre",passwordAgain:"ifre (tekrar)",privacyPolicy:"Gizlilik Politikas",remove:"kaldr",resetYourPassword:"ifreni sfrla",setPassword:"ifre Belirle",sign:"Giri",signIn:"Giri",signin:"Giri",signOut:"k",signUp:"Kayt",signupCode:"Kayt Kodu",signUpWithYourEmailAddress:"Eposta adresin ile kaydol",terms:"Kullanm artlar",updateYourPassword:"ifreni gncelle",username:"Kullanc ad",usernameOrEmail:"Kullanc ad veya ifre","with":"iin",info:{emailSent:"Eposta iletildi",emailVerified:"Eposta doruland",passwordChanged:"ifre deiti",passwordReset:"ifre sfrland"},error:{emailRequired:"Eposta gerekli.",minChar:"En az 7 karakterli ifre.",pwdsDontMatch:"ifreler uyumuyor",pwOneDigit:"ifre en az bir rakam iermeli.",pwOneLetter:"ifre bir harf gerektiriyor.",signInRequired:"Bunun iin nce giri yapm olmalsn.",signupCodeIncorrect:"Kayt kodu hatal.",signupCodeRequired:"Kayt kodu gerekli.",usernameIsEmail:"Kullanc ad bir eposta adresi olamaz.",usernameRequired:"Kullanc ad gerekli.",accounts:{"Email already exists.":"Eposta zaten kaytl.","Email doesn't match the criteria.":"Eposta kriterleri karlamyor.","Invalid login token":"Geersiz giri iaretisi","Login forbidden":"Girie izin verilmiyor","Service unknown":"Servis tannmyor","Unrecognized options for login request":"Giri istei iin tannmayan seenekler","User validation failed":"Kullanc dorulama baarsz","Username already exists.":"Kullanc ad zaten kaytl.","You are not logged in.":"Kullanc girii yapmadn.","You've been logged out by the server. Please log in again.":"Sunucu tarafndan karldn. Ltfen tekrar kullanc girii yap.","Your session has expired. Please log in again.":"Oturumun zaman amna urad. Ltfen tekrar kullanc girii yap.","No matching login attempt found":"Eleen bir giri teebbs bulunamad","Password is old. Please reset your password.":"ifre eski. Ltfen ifreni sfrla.","Incorrect password":"Hatal ifre","Invalid email":"Hatal eposta","Must be logged in":"Giri yapm olmalsn","Need to set a username or email":"Kullanc ad veya eposta tanmlamalsn","old password format":"eski ifre biimi","Password may not be empty":"ifre bo braklamaz","Signups forbidden":"Kayt yapmaya izin verilmiyor","Token expired":"aretinin sresi geti","Token has invalid email address":"aretide geersiz eposta adresi var","User has no password set":"Kullancnn ifresi tanmlanmam","User not found":"Kullanc bulunamad","Verify email link expired":"Eposta dorulama balants zaman amna urad","Verify email link is for unknown address":"Eposta dorulama balants bilinmeyen bir adres ieriyor","Match failed":"Eleme baarsz","Unknown error":"Bilinmeyen hata"}}},u.map("tr",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:" ",choosePassword:" ",clickAgree:"      ",configure:"",createAccount:" ",currentPassword:" ",dontHaveAnAccount:" ?",email:"Email",emailAddress:"Email",emailResetLink:"    ",forgotPassword:" ?",ifYouAlreadyHaveAnAccount:"     :",newPassword:" ",newPasswordAgain:"  ( )",optional:"",OR:"",password:"",passwordAgain:" ( )",privacyPolicy:" ",remove:"",resetYourPassword:" ",setPassword:" ",sign:"",signIn:"",signin:"",signOut:"",signUp:"",signupCode:" ",signUpWithYourEmailAddress:"   email ",terms:" ",updateYourPassword:" ",username:" ",usernameOrEmail:"   email","with":"",info:{emailSent:"Email ",emailVerified:"Email  ",passwordChanged:" ",passwordReset:" "},error:{emailRequired:"Email  .",minChar:" -    7.",pwdsDontMatch:"  ",pwOneDigit:"      .",pwOneLetter:"      .",signInRequired:"   .",signupCodeIncorrect:"  .",signupCodeRequired:"  .",usernameIsEmail:"     email .",usernameRequired:"   .",accounts:{"Email already exists.":"Email  ","Email doesn't match the criteria.":"Email  .","Invalid login token":"   ","Login forbidden":" ","Service unknown":" ","Unrecognized options for login request":"    ","User validation failed":"   ","Username already exists.":" .","You are not logged in.":"  .","You've been logged out by the server. Please log in again.":"  .     .","Your session has expired. Please log in again.":"  .     .","No matching login attempt found":"     ","Password is old. Please reset your password.":" .  ,   .","Incorrect password":" ","Invalid email":" Email","Must be logged in":" ","Need to set a username or email":"    email","old password format":"  ","Password may not be empty":"    ","Signups forbidden":" ","Token expired":"   ","Token has invalid email address":" email   ","User has no password set":"    ","User not found":"  ","Verify email link expired":"  email ","Verify email link is for unknown address":"  email   ","Match failed":" ","Unknown error":" "}}},u.map("uk",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"thm",and:"v",back:"tr li",changePassword:"i mt khu",choosePassword:"Chn mt mt khu",clickAgree:"Bng cch nhn vo ng k, bn  ng  vi",configure:"Cu hnh",createAccount:"To Ti khon",currentPassword:"Mt khu hin ti",dontHaveAnAccount:"Cha c ti khon?",email:"Email",emailAddress:"a ch Email",emailResetLink:"Gi",forgotPassword:"Qun mt khu?",ifYouAlreadyHaveAnAccount:"Nu bn  c ti khon",newPassword:"Mt khu mi",newPasswordAgain:"Mt khu mi (nhp li)",optional:"Ty chn",OR:"Hoc",password:"Mt khu",passwordAgain:"Mt khu (nhp li)",privacyPolicy:"Chnh sch bo mt",remove:"xa",resetYourPassword:"Ly li mt khu",setPassword:"Thit lp mt khu",sign:"K",signIn:"ng nhp",signin:"ng nhp",signOut:"ng xut",signUp:"ng k",signupCode:"M ng k",signUpWithYourEmailAddress:"ng k vi email ca bn",terms:"iu khon s dng",updateYourPassword:"Cp nht mt khu",username:"Tn ng nhp",usernameOrEmail:"Tn ng nhp hoc email","with":"vi",info:{emailSent:"Email  c gi i!",emailVerified:"Email  c xc minh",passwordChanged:" i mt khu",passwordReset:"Lt li mt khu"},error:{emailRequired:"Email phi c.",minChar:"Mt khu phi c t nht 7 k t.",pwdsDontMatch:"Mt khu khng ging nhau",pwOneDigit:"Mt khu phi c t nht 1 ch s.",pwOneLetter:"Mt khu phi c 1 k t ch.",signInRequired:"Phi ng nhp.",signupCodeIncorrect:"M s ng k sai.",signupCodeRequired:"Phi c m s ng k.",usernameIsEmail:"Tn ng nhp khng th l a ch email.",usernameRequired:"Phi c tn ng nhp.",accounts:{"A login handler should return a result or undefined":"B x l ng nhp phi tr v mt kt qu hoc undefined","Email already exists.":"Email  tn ti.","Email doesn't match the criteria.":"Email khng ph hp.","Invalid login token":"M ng nhp khng ng","Login forbidden":"ng nhp b cm","Service unknown":"Cha bit Dch v","Unrecognized options for login request":"Ty chn khng c cng nhn i vi yu cu ng nhp","User validation failed":"Xc nhn ngi dng tht bi","Username already exists.":"Tn ng nhp  tn ti.","You are not logged in.":"Bn cha ng nhp.","You've been logged out by the server. Please log in again.":"Bn  b ng xut bi my ch. Vui lng ng nhp li.","Your session has expired. Please log in again.":"Thi gian ng nhp  ht. Vui lng ng nhp li.","No matching login attempt found":"Khng tm thy ng nhp ph hp","Password is old. Please reset your password.":"Mt khu  c. Vui lng ly li mt khu.","Incorrect password":"Mt khu sai","Invalid email":"Email sai","Must be logged in":"Phi ng nhp","Need to set a username or email":"Phi in tn ng nhp hoc email","old password format":"nh dng mt khu c","Password may not be empty":"mt khu khng c  trng","Signups forbidden":"ng k  b cm","Token expired":"Ht phin ng nhp","Token has invalid email address":"Phin ng nhp cha a ch email sai","User has no password set":"Ngi dng cha c mt khu","User not found":"Khng tm thy ngi dng","Verify email link expired":"ng dn xc nhn email  ht hn","Verify email link is for unknown address":"ng dn xc nhn email l cho a ch cha xc nh","Match failed":"Khng ng","Unknown error":"Li cha c bit"}}},u.map("vi",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:"",choosePassword:"",clickAgree:"",configure:"",createAccount:"",currentPassword:"",dontHaveAnAccount:"",email:"",emailAddress:"",emailResetLink:"",forgotPassword:"",ifYouAlreadyHaveAnAccount:"",newPassword:"",newPasswordAgain:"",optional:"",OR:"",password:"",passwordAgain:"",privacyPolicy:"",remove:"",resetYourPassword:"",setPassword:"",sign:"",signIn:"",signin:"",signOut:"",signUp:"",signupCode:"",signUpWithYourEmailAddress:"",terms:"",updateYourPassword:"",username:"",usernameOrEmail:"","with":"",info:{emailSent:"",emailVerified:"",passwordChanged:"",passwordReset:""},error:{emailRequired:"",minChar:"7",pwdsDontMatch:"",pwOneDigit:"",pwOneLetter:"",signInRequired:"",signupCodeIncorrect:"",signupCodeRequired:"",usernameIsEmail:"",usernameRequired:"",accounts:{"Email already exists.":"","Email doesn't match the criteria.":"","Invalid login token":"","Login forbidden":"","Service unknown":"","Unrecognized options for login request":"","User validation failed":"","Username already exists.":"","You are not logged in.":"","You've been logged out by the server. Please log in again.":"","Your session has expired. Please log in again.":"","No matching login attempt found":"","Password is old. Please reset your password.":"","Incorrect password":"","Invalid email":"","Must be logged in":"","Need to set a username or email":"","old password format":"","Password may not be empty":"","Signups forbidden":"","Token expired":"","Token has invalid email address":"","User has no password set":"","User not found":"","Verify email link expired":"","Verify email link is for unknown address":"","Match failed":"","Unknown error":""}}},u.map("zh_cn",a),u.map("zh-CN",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:"",choosePassword:"",clickAgree:", ",configure:"",createAccount:"",currentPassword:"",dontHaveAnAccount:"?",email:"",emailAddress:"",emailResetLink:"",forgotPassword:"?",ifYouAlreadyHaveAnAccount:"",newPassword:"",newPasswordAgain:" ()",optional:"",OR:"",password:"",passwordAgain:" ()",privacyPolicy:"",remove:"",resetYourPassword:"",setPassword:"",sign:"",signIn:"",signin:"",signOut:"",signUp:"",signupCode:"",signUpWithYourEmailAddress:"",terms:"",updateYourPassword:"",username:"",usernameOrEmail:"","with":"",info:{emailSent:"",emailVerified:"",passwordChanged:"",passwordReset:""},error:{emailRequired:"",minChar:"7",pwdsDontMatch:"",pwOneDigit:"",pwOneLetter:"",signInRequired:"",signupCodeIncorrect:"",signupCodeRequired:"",usernameIsEmail:"",usernameRequired:"",accounts:{"Email already exists.":"","Email doesn't match the criteria.":"","Invalid login token":"","Login forbidden":"","Service unknown":"","Unrecognized options for login request":"","User validation failed":"","Username already exists.":"","You are not logged in.":"","You've been logged out by the server. Please log in again.":"","Your session has expired. Please log in again.":"","No matching login attempt found":"","Password is old. Please reset your password.":"","Incorrect password":"","Invalid email":"","Must be logged in":"","Need to set a username or email":"","old password format":"","Password may not be empty":"","Signups forbidden":"","Token expired":"","Token has invalid email address":"","User has no password set":"","User not found":"","Verify email link expired":"","Verify email link is for unknown address":"","Match failed":"","Unknown error":""}}},u.map("zh_tw",a),u.map("zh-TW",a)}.call(this),function(){l="object"==typeof l?l:{};var e=l,a;a={add:"",and:"",back:"",changePassword:"",choosePassword:"",clickAgree:", ",configure:"",createAccount:"",currentPassword:"",dontHaveAnAccount:"",email:"",emailAddress:"",emailResetLink:"",forgotPassword:"?",ifYouAlreadyHaveAnAccount:"",newPassword:"",newPasswordAgain:" ()",optional:"",OR:"",password:"",passwordAgain:"",privacyPolicy:"",remove:"",resetYourPassword:"",setPassword:"",sign:"",signIn:"",signin:"",signOut:"",signUp:"",signupCode:"",signUpWithYourEmailAddress:"",terms:"",updateYourPassword:"",username:"",usernameOrEmail:"","with":"",info:{emailSent:"",emailVerified:"",passwordChanged:"",passwordReset:""},error:{emailRequired:"",minChar:" 7 ",pwdsDontMatch:"",pwOneDigit:"",pwOneLetter:"",signInRequired:"",signupCodeIncorrect:"",signupCodeRequired:"",usernameIsEmail:"",usernameRequired:"",accounts:{"Email already exists.":"","Email doesn't match the criteria.":"","Invalid login token":"","Login forbidden":"","Service unknown":"","Unrecognized options for login request":"","User validation failed":"","Username already exists.":"","You are not logged in.":"","You've been logged out by the server. Please log in again.":"","Your session has expired. Please log in again.":"","No matching login attempt found":"","Password is old. Please reset your password.":"","Incorrect password":"","Invalid email":"","Must be logged in":"","Need to set a username or email":"","old password format":"","Password may not be empty":"","Signups forbidden":"","Token expired":"","Token has invalid email address":"","User has no password set":"","User not found":"","Verify email link expired":"","Verify email link is for unknown address":"","Match failed":"","Unknown error":""}}},u.map("zh_hk",a),u.map("zh-HK",a)}.call(this),"undefined"==typeof Package&&(Package={}),Package["softwarerero:accounts-t9n"]={T9n:u}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["standard-minifiers"]={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["meteor-base"]={}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["mobile-experience"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,r=Package.ejson.EJSON,n;(function(){n=function(){return n.info.apply(this,arguments)};var i=0,o=[],a=0;n._intercept=function(e){i+=e},n._suppress=function(e){a+=e},n._intercepted=function(){var e=o;return o=[],i=0,e},n.outputFormat="json";var s={debug:"green",warn:"magenta",error:"red"},l="blue",c=["time","timeInexact","level","file","line","program","originApp","satellite","stderr"],u=c.concat(["app","message"]),g=function(t){var r=n.format(t),i=t.level;"undefined"!=typeof console&&console[i]?console[i](r):e._debug(r)};n._getCallerDetails=function(){var e=function(){var e=new Error,t=e.stack;return t},t=e();if(!t)return{};for(var r=t.split("\n"),n,i=1;i<r.length;++i){if(n=r[i],n.match(/^\s*at eval \(eval/))return{file:"eval"};if(!n.match(/packages\/(?:local-test[:_])?logging(?:\/|\.js)/))break}var o={},a=/(?:[@(]| at )([^(]+?):([0-9:]+)(?:\)|$)/.exec(n);return a?(o.line=a[2].split(":")[0],o.file=a[1].split("/").slice(-1)[0].split("?")[0],o):o},t.each(["debug","info","warn","error"],function(s){n[s]=function(l){if(a)return void a--;var u=!1;i&&(i--,u=!0);var f=!t.isObject(l)||t.isRegExp(l)||t.isDate(l)?{message:new String(l).toString()}:l;if(t.each(c,function(e){if(f[e])throw new Error("Can't set '"+e+"' in log message")}),t.has(f,"message")&&!t.isString(f.message))throw new Error("The 'message' field in log objects must be a string");if(f.omitCallerDetails||(f=t.extend(n._getCallerDetails(),f)),f.time=new Date,f.level=s,"debug"!==s)if(u)o.push(r.stringify(f));else if(e.isServer)if("colored-text"===n.outputFormat)console.log(n.format(f,{color:!0}));else{if("json"!==n.outputFormat)throw new Error("Unknown logging output format: "+n.outputFormat);console.log(r.stringify(f))}else g(f)}}),n.parse=function(e){var t=null;if(e&&"{"===e.charAt(0))try{t=r.parse(e)}catch(n){}return t&&t.time&&t.time instanceof Date?t:null},n.format=function(n,i){n=r.clone(n),i=i||{};var o=n.time;if(!(o instanceof Date))throw new Error("'time' must be a Date object");var a=n.timeInexact,c=n.level||"info",g=n.file,f=n.line,m=n.app||"",p=n.originApp,v=n.message||"",h=n.program||"",d=n.satellite,w=n.stderr||"";t.each(u,function(e){delete n[e]}),t.isEmpty(n)||(v&&(v+=" "),v+=r.stringify(n));var b=function(e){return 10>e?"0"+e:e.toString()},D=function(e){return 100>e?"0"+b(e):e.toString()},j=o.getFullYear().toString()+b(o.getMonth()+1)+b(o.getDate()),S=b(o.getHours())+":"+b(o.getMinutes())+":"+b(o.getSeconds())+"."+D(o.getMilliseconds()),k="("+-((new Date).getTimezoneOffset()/60)+")",E="";m&&(E+=m),p&&p!==m&&(E+=" via "+p),E&&(E="["+E+"] ");var x=[];h&&x.push(h),g&&x.push(g),f&&x.push(f);var y=t.isEmpty(x)?"":"("+x.join(":")+") ";d&&(y+=["[",d,"]"].join(""));var _=w?"(STDERR) ":"",C=[c.charAt(0).toUpperCase(),j,"-",S,k,a?"? ":" ",E,y,_].join(""),F=function(t,r){return i.color&&e.isServer&&r?Npm.require("cli-color")[r](t):t};return F(C,i.metaColor||l)+F(v,s[c])},n.objFromText=function(e,r){var n={message:e,level:"info",time:new Date,timeInexact:!0};return t.extend(n,r)}}).call(this),"undefined"==typeof Package&&(Package={}),Package.logging={Log:n}}();

!function(){var t=Package.meteor.Meteor,e=Package.jquery.$,i=Package.jquery.jQuery;(function(){(function(){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=e.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(t){function s(){var s,r;return i.settings.submitHandler?(i.submitButton&&(s=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),r=i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&s.remove(),void 0!==r?r:!1):!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){var t,i,s;return e(this[0]).is("form")?t=this.validate().form():(s=[],t=!0,i=e(this[0].form).validate(),this.each(function(){t=i.element(this)&&t,s=s.concat(i.errorList)}),i.errorList=s),t},rules:function(t,i){var s=this[0],r,n,a,o,l,h;if(t)switch(r=e.data(s.form,"validator").settings,n=r.rules,a=e.validator.staticRules(s),t){case"add":e.extend(a,e.validator.normalizeRule(i)),delete a.messages,n[s.name]=a,i.messages&&(r.messages[s.name]=e.extend(r.messages[s.name],i.messages));break;case"remove":return i?(h={},e.each(i.split(/\s/),function(t,i){h[i]=a[i],delete a[i],"required"===i&&e(s).removeAttr("aria-required")}),h):(delete n[s.name],a)}return o=e.validator.normalizeRules(e.extend({},e.validator.classRules(s),e.validator.attributeRules(s),e.validator.dataRules(s),e.validator.staticRules(s)),s),o.required&&(l=o.required,delete o.required,o=e.extend({required:l},o),e(s).attr("aria-required","true")),o.remote&&(l=o.remote,delete o.remote,o=e.extend(o,{remote:l})),o}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,i){var s=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===i.which&&""===this.elementValue(t)||-1!==e.inArray(i.keyCode,s)||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(s):e(t).addClass(i).removeClass(s)},unhighlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(s):e(t).removeClass(i).addClass(s)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this.form,"validator"),s="on"+t.type.replace(/^validate/,""),r=i.settings;r[s]&&!e(this).is(r.ignore)&&r[s].call(i,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={},s;e.each(this.settings.groups,function(t,s){"string"==typeof s&&(s=s.split(/\s/)),e.each(s,function(e,s){i[s]=t})}),s=this.settings.rules,e.each(s,function(t,i){s[t]=e.validator.normalizeRule(i)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){var i=this.clean(t),s=this.validationTargetFor(i),r=!0;return this.lastElement=s,void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=e(s),r=this.check(s)!==!1,r?delete this.invalid[s.name]:this.invalid[s.name]=!0),e(t).attr("aria-invalid",!r),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),r},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var t,i=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(t=0;i[t];t++)this.settings.unhighlight.call(this,i[t],this.settings.errorClass,"");else i.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0,i;for(i in t)e++;return e},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(e(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var i,s=e(t),r=t.type;return"radio"===r||"checkbox"===r?this.findByName(t.name).filter(":checked").val():"number"===r&&"undefined"!=typeof t.validity?t.validity.badInput?!1:s.val():(i=s.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(t){t=this.validationTargetFor(this.clean(t));var i=e(t).rules(),s=e.map(i,function(t,e){return e}).length,r=!1,n=this.elementValue(t),a,o,l;for(o in i){l={method:o,parameters:i[o]};try{if(a=e.validator.methods[o].call(this,n,t,l.parameters),"dependency-mismatch"===a&&1===s){r=!0;continue}if(r=!1,"pending"===a)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!a)return this.formatAndAdd(t,l),!1}catch(h){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+l.method+"' method.",h),h instanceof TypeError&&(h.message+=".  Exception occurred when checking element "+t.id+", check the '"+l.method+"' method."),h}}if(!r)return this.objectLength(i)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var s=this.defaultMessage(t,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,t):r.test(s)&&(s=e.validator.format(s.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:s,element:t,method:i.method}),this.errorMap[t.name]=s,this.submitted[t.name]=s},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var s,r,n,a=this.errorsFor(t),o=this.idOrName(t),l=e(t).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(i)):(a=e("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(i||""),s=a,this.settings.wrapper&&(s=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(s):this.settings.errorPlacement?this.settings.errorPlacement(s,e(t)):s.insertAfter(t),a.is("label")?a.attr("for",o):0===a.parents("label[for='"+o+"']").length&&(n=a.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),l?l.match(new RegExp("\\b"+n+"\\b"))||(l+=" "+n):l=n,e(t).attr("aria-describedby",l),r=this.groups[t.name],r&&e.each(this.groups,function(t,i){i===r&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",a.attr("id"))}))),!i&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,t)),this.toShow=this.toShow.add(a)},errorsFor:function(t){var i=this.idOrName(t),s=e(t).attr("aria-describedby"),r="label[for='"+i+"'], label[for='"+i+"'] *";return s&&(r=r+", #"+s.replace(/\s+/g,", #")),this.errors().filter(r)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(t,i){return!!e(t,i.form).length},"function":function(t,e){return t(e)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},s=e(t).attr("class");return s&&e.each(s.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(t,e,i,s){/min|max/.test(i)&&(null===e||/number|range|text/.test(e))&&(s=Number(s),isNaN(s)&&(s=void 0)),s||0===s?t[i]=s:e===i&&"range"!==e&&(t[i]=!0)},attributeRules:function(t){var i={},s=e(t),r=t.getAttribute("type"),n,a;for(n in e.validator.methods)"required"===n?(a=t.getAttribute(n),""===a&&(a=!0),a=!!a):a=s.attr(n),this.normalizeAttributeRule(i,r,n,a);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var i={},s=e(t),r=t.getAttribute("type"),n,a;for(n in e.validator.methods)a=s.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(i,r,n,a);return i},staticRules:function(t){var i={},s=e.data(t.form,"validator");return s.settings.rules&&(i=e.validator.normalizeRule(s.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(s,r){if(r===!1)return void delete t[s];if(r.param||r.depends){var n=!0;switch(typeof r.depends){case"string":n=!!e(r.depends,i.form).length;break;case"function":n=r.depends.call(i,i)}n?t[s]=void 0!==r.param?r.param:!0:delete t[s]}}),e.each(t,function(s,r){t[s]=e.isFunction(r)?r(i):r}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,s){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==s?s:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=e(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(t,i)>0:t.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i=0,s=0,r=!1,n,a;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(n=t.length-1;n>=0;n--)a=t.charAt(n),s=parseInt(a,10),r&&(s*=2)>9&&(s-=9),i+=s,r=!r;return i%10===0},minlength:function(t,i,s){var r=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||r>=s},maxlength:function(t,i,s){var r=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s>=r},rangelength:function(t,i,s){var r=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||r>=s[0]&&r<=s[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(t,i,s){var r=e(s);return this.settings.onfocusout&&r.off(".validate-equalTo").on("blur.validate-equalTo",function(){e(i).valid()}),t===r.val()},remote:function(t,i,s){if(this.optional(i))return"dependency-mismatch";var r=this.previousValue(i),n,a;return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),r.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=r.message,s="string"==typeof s&&{url:s}||s,r.old===t?r.valid:(r.old=t,n=this,this.startRequest(i),a={},a[i.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:a,context:n.currentForm,success:function(s){var a=s===!0||"true"===s,o,l,h;n.settings.messages[i.name].remote=r.originalMessage,a?(h=n.formSubmitted,n.prepareElement(i),n.formSubmitted=h,n.successList.push(i),delete n.invalid[i.name],n.showErrors()):(o={},l=s||n.defaultMessage(i,"remote"),o[i.name]=r.message=e.isFunction(l)?l(t):l,n.invalid[i.name]=!0,n.showErrors(o)),r.valid=a,n.stopRequest(i,a)}},s)),"pending")}}})}).call(this),function(){var t={},i;e.ajaxPrefilter?e.ajaxPrefilter(function(e,i,s){var r=e.port;"abort"===e.mode&&(t[r]&&t[r].abort(),t[r]=s)}):(i=e.ajax,e.ajax=function(s){var r=("mode"in s?s:e.ajaxSettings).mode,n=("port"in s?s:e.ajaxSettings).port;return"abort"===r?(t[n]&&t[n].abort(),t[n]=i.apply(this,arguments),t[n]):i.apply(this,arguments)})}.call(this),function(){e.validator.addMethod("pattern",function(t,e,i){return this.optional(e)?!0:("string"==typeof i&&(i=new RegExp("^(?:"+i+")$")),i.test(t))},"Invalid format.")}.call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["themeteorchef:jquery-validation"]={}}();

!function(){var e=Package.meteor.Meteor,n;(function(){(function(){n={},function(e){function n(e,n){var o={};if(t(e)&&e.length>0)for(var r=n?c:i,a=e.split(/;\s/g),u,f,s,g=0,p=a.length;p>g;g++){if(s=a[g].match(/([^=]+)=/i),s instanceof Array)try{u=c(s[1]),f=r(a[g].substring(s[1].length+1))}catch(m){}else u=c(a[g]),f="";u&&(o[u]=f)}return o}function t(e){return"string"==typeof e}function o(e){return t(e)&&""!==e}function r(e){if(!o(e))throw new TypeError("Cookie name must be a non-empty string")}function i(e){return e}var a=e,c=decodeURIComponent,u=encodeURIComponent;a.get=function(e,t){r(e),t="function"==typeof t?{converter:t}:t||{};var o=n(document.cookie,!t.raw);return(t.converter||i)(o[e])},a.set=function(e,n,t){r(e),t=t||{};var i=t.expires,a=t.domain,c=t.path;t.raw||(n=u(String(n)));var f=e+"="+n,s=i;return"number"==typeof s&&(s=new Date,s.setDate(s.getDate()+i)),s instanceof Date&&(f+="; expires="+s.toUTCString()),o(a)&&(f+="; domain="+a),o(c)&&(f+="; path="+c),t.secure&&(f+="; secure"),document.cookie=f,f},a.remove=function(e,n){return n=n||{},n.expires=new Date(0),this.set(e,"",n)}}(n)}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["chuangbo:cookie"]={Cookie:n}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.email={}}();

!function(){var e=Package.meteor.Meteor,t=Package.ejson.EJSON,a=Package.underscore._,n=Package.jquery.$,c=Package.jquery.jQuery,o;(function(){o={}}).call(this),function(){o._encode=function(e){var a=t.stringify(e);return encodeURIComponent(a)},o._decode=function(e){var a=decodeURIComponent(e);return a?t.parse(a):null}}.call(this),function(){e.startup(function(){var e=n('script[type="text/inject-data"]',document),t=n.trim(e.text());o._data=o._decode(t)||{}}),o.getData=function(t,a){e.startup(function(){a(o._data[t])})}}.call(this),"undefined"==typeof Package&&(Package={}),Package["meteorhacks:inject-data"]={InjectData:o}}();

!function(){var e=Package.meteor.Meteor,n=Package["meteorhacks:inject-data"].InjectData,o=Package["chuangbo:cookie"].Cookie,i=Package.minimongo.LocalCollection,t=Package.minimongo.Minimongo,a=Package.underscore._,r=Package.tracker.Tracker,c=Package.tracker.Deps,l=Package.ejson.EJSON,s=Package["accounts-base"].Accounts,g=Package["accounts-base"].AccountsClient,d,u,f,_,b,m,p;(function(){d=function(e,n){n.msg="changed",n.cleared=[],n.fields=n.fields||{},a.each(e,function(e,o){"_id"!=o&&"undefined"==typeof n.fields[o]&&n.cleared.push(o)})},u=function(e,n){var o=e?a.clone(e):{};return"added"==n.msg?a.each(n.fields,function(e,n){o[n]=e}):"changed"==n.msg?(a.each(n.fields,function(e,n){o[n]=e}),a.each(n.cleared,function(e){delete o[e]})):"removed"==n.msg&&(o=null),o},f=function e(n){var o=/#{\s*?_\s*?}/,i=Array.prototype.slice,t=Object.prototype.hasOwnProperty;return a.each(i.call(arguments,1),function(e){for(var i in e)if(t.call(e,i))if(a.isNull(n[i])||a.isUndefined(n[i])||a.isFunction(n[i])||a.isNull(e[i])||a.isDate(e[i]))n[i]=e[i];else if(a.isString(e[i])&&o.test(e[i]))a.isString(n[i])&&(n[i]=e[i].replace(o,n[i]));else if(a.isArray(n[i])||a.isArray(e[i])){if(!a.isArray(n[i])||!a.isArray(e[i]))throw"Error: Trying to combine an array with a non-array ("+i+")";n[i]=a.reject(f(n[i],e[i]),function(e){return a.isNull(e)})}else if(a.isObject(n[i])||a.isObject(e[i])){if(!a.isObject(n[i])||!a.isObject(e[i]))throw"Error: Trying to combine an object with a non-object ("+i+")";n[i]=f(n[i],e[i])}else n[i]=e[i]}),n}}).call(this),function(){if(_={},_.idParse=i._idParse,_.idStringify=i._idStringify,_.ObjectID=i._ObjectID,Package["mongo-id"]){var e=Package["mongo-id"].MongoID;_.idParse=e.idParse,_.idStringify=e.idStringify,_.ObjectID=e.ObjectID}}.call(this),function(){b={},b.enabled="undefined"!=typeof __fast_render_config,b._dataReceived=!1,b._revertedBackToOriginal=!1,b._blockDDP=void 0!=e._localStorage.getItem("__frblockddp"),b._blockDDP&&console.log("FastRender is blocking DDP messages. apply 'FastRender.debugger.unblockDDP()' to unblock again."),b._disable=void 0!=e._localStorage.getItem("__frdisable"),b._disable&&console.log("FastRender is disabled. apply 'FastRender.debugger.enableFR()' to enable it back."),b.injectDdpMessage=function(e,n){b["debugger"].log("injecting ddp message:",n);var o=e._waitingForQuiescence;e._waitingForQuiescence=function(){return!1},e._livedata_data(n),e._waitingForQuiescence=o},b.init=function(n){if(!b._disable){b._securityCheck(n),b._subscriptions=n&&n.subscriptions||{},b._subscriptionIdMap={},b._dataReceived=!0,b._payload=n;var o={};n&&a.each(n.collectionData,function(e,n){o[n]||(o[n]={}),m=o[n],e.forEach(function(e){e.forEach(function(e){m[e._id]?f(m[e._id],e):m[e._id]=e})})}),a.each(o,function(n,o){a.each(n,function(n,i){var i=_.idStringify(n._id);delete n._id;var t={msg:"added",collection:o,id:i,fields:n,frGen:!0};b.injectDdpMessage(e.connection,t)})}),"undefined"!=typeof s&&s._setLoggingIn(!1)}},b._securityCheck=function(n){if(n&&n.loginToken){var o=e._localStorage.getItem("Meteor.loginToken");if(o!=n.loginToken)throw new Error("seems like cookie tossing is happening. visit here: http://git.io/q4IRHQ")}}}.call(this),function(){b["debugger"]={},b["debugger"]._logs=[],b["debugger"].log=function n(o){"undefined"!=typeof console&&"undefined"!=typeof e._localStorage&&"1"==e._localStorage.getItem("__frlog")&&(b["debugger"]._logs.push(arguments),arguments[0]="FR: "+arguments[0],console.log.apply(console,arguments))},b["debugger"].showLogs=function(){e._localStorage.setItem("__frlog","1"),location.reload()},b["debugger"].hideLogs=function(){e._localStorage.removeItem("__frlog"),location.reload()},b["debugger"].getLogs=function(){return b["debugger"]._logs},b["debugger"].getLogsJSON=function(){return JSON.stringify(b["debugger"]._logs)},b["debugger"].blockDDP=function(){e._localStorage.setItem("__frblockddp","1"),location.reload()},b["debugger"].unblockDDP=function(){e._localStorage.removeItem("__frblockddp"),location.reload()},b["debugger"].disableFR=function(){e._localStorage.setItem("__frdisable","1"),location.reload()},b["debugger"].enableFR=function(){e._localStorage.removeItem("__frdisable"),location.reload()},b["debugger"].getPayload=function(){return b._payload},b["debugger"].getPayloadJSON=function(){return JSON.stringify(b._payload)}}.call(this),function(){var n=!1,o=e.connection._livedata_data;e.connection._livedata_data=function(e){if(b._blockDDP&&!e.frGen)return void b["debugger"].log("blocking incoming ddp",e);if("added"==e.msg){var i=_.idParse(e.id),t=this._getServerDoc(e.collection,i);if(!n&&!t){var r=this._mongo_livedata_collections[e.collection],c=this._updatesForUnknownStores[e.collection];if(r){var s=r.findOne(i);s&&(b["debugger"].log("re writing DDP for:",e),d(s,e))}else if(c){var g=null,f=a.filter(c,function(n){return n.id==e.id});a.each(f,function(e){g=u(g,e)}),g&&(b["debugger"].log("re writing DDP for:",e),d(g,e))}}}return!b._revertedBackToOriginal&&b._dataReceived&&("ready"==e.msg&&!e.frGen&&b._subscriptions&&e.subs.forEach(function(e){var n=b._subscriptionIdMap[e];if(n){b["debugger"].log("actual subscription completed:",n,e);var o=b._subscriptions[n.name]||{};delete o[n.paramsKey],l.equals(b._subscriptions[n.name],{})&&delete b._subscriptions[n.name],delete b._subscriptionIdMap[e]}}),l.equals(b._subscriptions,{})&&(b["debugger"].log("fast rendering completed!"),b._revertedBackToOriginal=!0)),o.call(this,e)};var i=e.connection._send;e.connection._send=function(e){"connect"==e.msg&&void 0!=e.session&&(b._revertedBackToOriginal=!0,n=!0);var o=this;if(!b._revertedBackToOriginal&&b._dataReceived){var t=l.stringify(e.params),a="sub"==e.msg&&b._subscriptions[e.name]&&b._subscriptions[e.name][t];b["debugger"].log("new subscription:",e.name),a&&(b["debugger"].log("sending fake ready for sub:",e.name),b.injectDdpMessage(o,{msg:"ready",subs:[e.id],frGen:!0}),b._subscriptionIdMap[e.id]={name:e.name,paramsKey:t})}return i.call(this,e)}}.call(this),function(){function n(){var n=e._localStorage.getItem("Meteor.loginToken"),o=new Date(e._localStorage.getItem("Meteor.loginTokenExpires"));n?i(n,o):i(null,-1)}function i(e,n){o.set("meteor_login_token",e,{path:"/",expires:n})}e.startup(function(){n()});var t=e._localStorage.setItem;e._localStorage.setItem=function(o,i){"Meteor.loginToken"==o&&e.defer(n),t.call(e._localStorage,o,i)};var a=e._localStorage.removeItem;e._localStorage.removeItem=function(o){"Meteor.loginToken"==o&&e.defer(n),a.call(e._localStorage,o)}}.call(this),function(){n.getData("fast-render-data",function(e){b.init(e)})}.call(this),"undefined"==typeof Package&&(Package={}),Package["meteorhacks:fast-render"]={FastRender:b,__init_fast_render:p}}();

!function(){var t=Package.meteor.Meteor,e=Package.jquery.$,n=Package.jquery.jQuery;(function(){!function(t){"use strict";function e(e,n){this.isInit=!0,this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(n),this.isInit=!1}function n(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(t){return t[n]}}}function i(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(){return n}}}function a(t){return t?l.text(t).html():""}function o(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}function r(e,n){var i=!1;return t.each(n,function(t,n){if("number"==typeof n&&e.which===n)return i=!0,!1;if(e.which===n.which){var a=!n.hasOwnProperty("altKey")||e.altKey===n.altKey,o=!n.hasOwnProperty("shiftKey")||e.shiftKey===n.shiftKey,r=!n.hasOwnProperty("ctrlKey")||e.ctrlKey===n.ctrlKey;if(a&&o&&r)return i=!0,!1}}),i}var s={tagClass:function(t){return"label label-info"},focusClass:"focus",itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},itemTitle:function(t){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(t,e){e.hide().fadeIn()},trimValue:!1,allowDuplicates:!1,triggerChange:!0};e.prototype={constructor:e,add:function(e,n,i){var o=this;if(!(o.options.maxTags&&o.itemsArray.length>=o.options.maxTags||e!==!1&&!e)){if("string"==typeof e&&o.options.trimValue&&(e=t.trim(e)),"object"==typeof e&&!o.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(o.isSelect&&!o.multiple&&o.itemsArray.length>0&&(console.log("If SELECT but not multiple, remove current tag"),o.remove(o.itemsArray[0])),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var r=o.options.delimiterRegex?o.options.delimiterRegex:o.options.delimiter,s=e.split(r);if(s.length>1){for(var l=0;l<s.length;l++)this.add(s[l],!0);return void(n||o.pushVal(o.options.triggerChange))}}var u=o.options.itemValue(e),p=o.options.itemText(e),c=o.options.tagClass(e),m=o.options.itemTitle(e),h=t.grep(o.itemsArray,function(t){return o.options.itemValue(t)===u})[0];if(!h||o.options.allowDuplicates){if(!(o.items().toString().length+e.length+1>o.options.maxInputLength)){var f=t.Event("beforeItemAdd",{item:e,cancel:!1,options:i});if(o.$element.trigger(f),!f.cancel){o.itemsArray.push(e);var d=t('<span class="tag '+a(c)+(null!==m?'" title="'+m:"")+'">'+a(p)+'<span data-role="remove"></span></span>');d.data("item",e),o.findInputWrapper().before(d),d.after(" ");var g=t('option[value="'+encodeURIComponent(u)+'"]',o.$element).length||t('option[value="'+a(u)+'"]',o.$element).length;if(o.isSelect&&!g){var v=t("<option selected>"+a(p)+"</option>");v.data("item",e),v.attr("value",u),o.$element.append(v)}n||o.pushVal(o.options.triggerChange),(o.options.maxTags===o.itemsArray.length||o.items().toString().length===o.options.maxInputLength)&&o.$container.addClass("bootstrap-tagsinput-max"),t(".typeahead, .twitter-typeahead",o.$container).length&&o.$input.typeahead("val",""),o.$element.trigger(this.isInit?t.Event("itemAddedOnInit",{item:e,options:i}):t.Event("itemAdded",{item:e,options:i}))}}}else if(o.options.onTagExists){var y=t(".tag",o.$container).filter(function(){return t(this).data("item")===h});o.options.onTagExists(e,y)}}}},remove:function(e,n,i){var a=this;if(a.objectItems&&(e="object"==typeof e?t.grep(a.itemsArray,function(t){return a.options.itemValue(t)==a.options.itemValue(e)}):t.grep(a.itemsArray,function(t){return a.options.itemValue(t)==e}),e=e[e.length-1]),e){var o=t.Event("beforeItemRemove",{item:e,cancel:!1,options:i});if(a.$element.trigger(o),o.cancel)return;t(".tag",a.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",a.$element).filter(function(){return t(this).data("item")===e}).remove(),-1!==t.inArray(e,a.itemsArray)&&a.itemsArray.splice(t.inArray(e,a.itemsArray),1)}n||a.pushVal(a.options.triggerChange),a.options.maxTags>a.itemsArray.length&&a.$container.removeClass("bootstrap-tagsinput-max"),a.$element.trigger(t.Event("itemRemoved",{item:e,options:i}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal(e.options.triggerChange)},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var n=t(this),i=n.data("item"),o=e.options.itemValue(i),r=e.options.itemText(i),s=e.options.tagClass(i);if(n.attr("class",null),n.addClass("tag "+a(s)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=a(r),e.isSelect){var l=t("option",e.$element).filter(function(){return t(this).data("item")===i});l.attr("value",o)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,n=t.map(e.items(),function(t){return"undefined"!=typeof e.options.itemValue(t)?e.options.itemValue(t).toString():void 0});e.$element.val(n,!0),e.options.triggerChange&&e.$element.trigger("change")},build:function(e){var a=this;if(a.options=t.extend({},s,e),a.objectItems,n(a.options,"itemValue"),n(a.options,"itemText"),i(a.options,"tagClass"),a.options.typeahead){var l=a.options.typeahead||{};i(l,"source"),a.$input.typeahead(t.extend({},l,{source:function(e,n){function i(t){for(var e=[],i=0;i<t.length;i++){var r=a.options.itemText(t[i]);o[r]=t[i],e.push(r)}n(e)}this.map={};var o=this.map,r=l.source(e);t.isFunction(r.success)?r.success(i):t.isFunction(r.then)?r.then(i):t.when(r).then(i)},updater:function(t){return a.add(this.map[t]),this.map[t]},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}}))}if(a.options.typeaheadjs){var u=null,p={},c=a.options.typeaheadjs;t.isArray(c)?(u=c[0],p=c[1]):p=c,a.$input.typeahead(u,p).on("typeahead:selected",t.proxy(function(t,e){a.add(p.valueKey?e[p.valueKey]:e),a.$input.typeahead("val","")},a))}a.$container.on("click",t.proxy(function(t){a.$element.attr("disabled")||a.$input.removeAttr("disabled"),a.$input.focus()},a)),a.options.addOnBlur&&a.options.freeInput&&a.$input.on("focusout",t.proxy(function(e){0===t(".typeahead, .twitter-typeahead",a.$container).length&&(a.add(a.$input.val()),a.$input.val(""))},a)),a.$container.on({focusin:function(){a.$container.addClass(a.options.focusClass)},focusout:function(){a.$container.removeClass(a.options.focusClass)}}),a.$container.on("keydown","input",t.proxy(function(e){var n=t(e.target),i=a.findInputWrapper();if(a.$element.attr("disabled"))return void a.$input.attr("disabled","disabled");switch(e.which){case 8:if(0===o(n[0])){var r=i.prev();if(r.length){var s=r.data("item");("string"==typeof s&&s==n.val()||"object"==typeof s&&s.name==n.val())&&a.remove(r.data("item"))}}break;case 46:if(0===o(n[0])){var l=i.next();l.length&&(console.log("case=46, $input.val()"),console.log(n.val()),console.log("next.data('item')"),console.log(l.data("item")),a.remove(l.data("item")))}break;case 37:var u=i.prev();0===n.val().length&&u[0]&&(u.before(i),n.focus());break;case 39:var p=i.next();0===n.val().length&&p[0]&&(p.after(i),n.focus())}var c=n.val().length,m=Math.ceil(c/5),h=c+m+1;n.attr("size",Math.max(this.inputSize,n.val().length))},a)),a.$container.on("keypress","input",t.proxy(function(e){var n=t(e.target);if(a.$element.attr("disabled"))return void a.$input.attr("disabled","disabled");var i=n.val(),o=a.options.maxChars&&i.length>=a.options.maxChars;if(a.options.freeInput&&(r(e,a.options.confirmKeys)||o)){if(0!==i.length){var s=a.$input.val();if(a.objectItems){var l=t.Event("beforeFreeInputItemAdd",{item:s,cancel:!0});if(a.$element.trigger(l),l.cancel)return;s=l.item}a.add(s),a.$input.val("")}a.options.cancelConfirmKeysOnEmpty===!1&&e.preventDefault()}var u=n.val().length,p=Math.ceil(u/5),c=u+p+1;n.attr("size",Math.max(this.inputSize,n.val().length))},a)),a.$container.on("click","[data-role=remove]",t.proxy(function(e){a.$element.attr("disabled")||(console.log("click data-remove"),a.remove(t(e.target).closest(".tag").data("item")))},a)),a.options.itemValue===s.itemValue&&("INPUT"===a.$element[0].tagName?a.add(a.$element.val()):t("option",a.$element).each(function(){a.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],n=this.$container[0];e&&e.parentNode!==n;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(n,i,a){var o=[];return this.each(function(){var r=t(this).data("tagsinput");if(r)if(n||i){if(void 0!==r[n]){if(3===r[n].length&&void 0!==a)var s=r[n](i,null,a);else var s=r[n](i);void 0!==s&&o.push(s)}}else o.push(r);else r=new e(this,n),t(this).data("tagsinput",r),o.push(r),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof n?o.length>1?o:o[0]:o},t.fn.tagsinput.Constructor=e;var l=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery)}).call(this),"undefined"==typeof Package&&(Package={}),Package["smallhacks:bootstrap-tagsinput-custom"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.jquery.$,r=Package.jquery.jQuery;(function(){(function(){!function(e,t){var r=[].slice,s={},n=e.amplify={publish:function(e){if("string"!=typeof e)throw new Error("You must provide a valid topic to publish.");var t=r.call(arguments,1),n,u,a,o=0,i;if(!s[e])return!0;for(n=s[e].slice(),a=n.length;a>o&&(u=n[o],i=u.callback.apply(u.context,t),i!==!1);o++);return i!==!1},subscribe:function(e,t,r,n){if("string"!=typeof e)throw new Error("You must provide a valid topic to create a subscription.");3===arguments.length&&"number"==typeof r&&(n=r,r=t,t=null),2===arguments.length&&(r=t,t=null),n=n||10;for(var u=0,a=e.split(/\s/),o=a.length,i;o>u;u++){e=a[u],i=!1,s[e]||(s[e]=[]);for(var c=s[e].length-1,l={callback:r,context:t,priority:n};c>=0;c--)if(s[e][c].priority<=n){s[e].splice(c+1,0,l),i=!0;break}i||s[e].unshift(l)}return r},unsubscribe:function(e,t,r){if("string"!=typeof e)throw new Error("You must provide a valid topic to remove a subscription.");if(2===arguments.length&&(r=t,t=null),s[e])for(var n=s[e].length,u=0;n>u;u++)s[e][u].callback===r&&(t&&s[e][u].context!==t||(s[e].splice(u,1),u--,n--))}}}(this),function(e,t){function r(e,r){s.addType(e,function(u,a,o){var i,c,l,p,f=a,d=(new Date).getTime();if(!u){f={},p=[],l=0;try{for(u=r.length;u=r.key(l++);)n.test(u)&&(c=JSON.parse(r.getItem(u)),c.expires&&c.expires<=d?p.push(u):f[u.replace(n,"")]=c.data);for(;u=p.pop();)r.removeItem(u)}catch(y){}return f}if(u="__amplify__"+u,a===t){if(i=r.getItem(u),c=i?JSON.parse(i):{expires:-1},!(c.expires&&c.expires<=d))return c.data;r.removeItem(u)}else if(null===a)r.removeItem(u);else{c=JSON.stringify({data:a,expires:o.expires?d+o.expires:null});try{r.setItem(u,c)}catch(y){s[e]();try{r.setItem(u,c)}catch(y){throw s.error()}}}return f})}var s=e.store=function(e,t,r){var n=s.type;return r&&r.type&&r.type in s.types&&(n=r.type),s.types[n](e,t,r||{})};s.types={},s.type=null,s.addType=function(e,t){s.type||(s.type=e),s.types[e]=t,s[e]=function(t,r,n){return n=n||{},n.type=e,s(t,r,n)}},s.error=function(){return"amplify.store quota exceeded"};var n=/^__amplify__/;for(var u in{localStorage:1,sessionStorage:1})try{window[u].setItem("__amplify__","x"),window[u].removeItem("__amplify__"),r(u,window[u])}catch(a){}if(!s.types.localStorage&&window.globalStorage)try{r("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===s.type&&(s.type="globalStorage")}catch(a){}!function(){if(!s.types.localStorage){var e=document.createElement("div"),r="amplify";e.style.display="none",document.getElementsByTagName("head")[0].appendChild(e);try{e.addBehavior("#default#userdata"),e.load(r)}catch(n){return void e.parentNode.removeChild(e)}s.addType("userData",function(n,u,a){e.load(r);var o,i,c,l,p,f=u,d=(new Date).getTime();if(!n){for(f={},p=[],l=0;o=e.XMLDocument.documentElement.attributes[l++];)i=JSON.parse(o.value),i.expires&&i.expires<=d?p.push(o.name):f[o.name]=i.data;for(;n=p.pop();)e.removeAttribute(n);return e.save(r),f}if(n=n.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),n=n.replace(/^-/,"_-"),u===t){if(o=e.getAttribute(n),i=o?JSON.parse(o):{expires:-1},!(i.expires&&i.expires<=d))return i.data;e.removeAttribute(n)}else null===u?e.removeAttribute(n):(c=e.getAttribute(n),i=JSON.stringify({data:u,expires:a.expires?d+a.expires:null}),e.setAttribute(n,i));try{e.save(r)}catch(y){null===c?e.removeAttribute(n):e.setAttribute(n,c),s.userData();try{e.setAttribute(n,i),e.save(r)}catch(y){throw null===c?e.removeAttribute(n):e.setAttribute(n,c),s.error()}}return f})}}(),function(){function e(e){return e===t?t:JSON.parse(JSON.stringify(e))}var r={},n={};s.addType("memory",function(s,u,a){return s?u===t?e(r[s]):(n[s]&&(clearTimeout(n[s]),delete n[s]),null===u?(delete r[s],null):(r[s]=u,a.expires&&(n[s]=setTimeout(function(){delete r[s],delete n[s]},a.expires)),u)):e(r)})}()}(this.amplify=this.amplify||{}),function(e,t){"use strict";function r(){}function s(e){return"[object Function]"==={}.toString.call(e)}function n(e){var t=!1;return setTimeout(function(){t=!0},1),function(){var r=this,s=arguments;t?e.apply(r,s):setTimeout(function(){e.apply(r,s)},1)}}e.request=function(t,u,a){var o=t||{};"string"==typeof o&&(s(u)&&(a=u,u={}),o={resourceId:t,data:u||{},success:a});var i={abort:r},c=e.request.resources[o.resourceId],l=o.success||r,p=o.error||r;if(o.success=n(function(t,r){r=r||"success",e.publish("request.success",o,t,r),e.publish("request.complete",o,t,r),l(t,r)}),o.error=n(function(t,r){r=r||"error",e.publish("request.error",o,t,r),e.publish("request.complete",o,t,r),p(t,r)}),!c){if(!o.resourceId)throw"amplify.request: no resourceId provided";throw"amplify.request: unknown resourceId: "+o.resourceId}return e.publish("request.before",o)?(e.request.resources[o.resourceId](o,i),i):void o.error(null,"abort")},e.request.types={},e.request.resources={},e.request.define=function(t,r,s){if("string"==typeof r){if(!(r in e.request.types))throw"amplify.request.define: unknown type: "+r;s.resourceId=t,e.request.resources[t]=e.request.types[r](s)}else e.request.resources[t]=r}}(amplify),function(e,t,r){"use strict";var s=["status","statusText","responseText","responseXML","readyState"],n=/\{([^\}]+)\}/g;e.request.types.ajax=function(n){return n=t.extend({type:"GET"},n),function(u,a){var o,i,c=n.url,l=a.abort,p=t.extend(!0,{},n,{data:u.data}),f=!1,d={readyState:0,setRequestHeader:function(e,t){return o.setRequestHeader(e,t)},getAllResponseHeaders:function(){return o.getAllResponseHeaders()},getResponseHeader:function(e){return o.getResponseHeader(e)},overrideMimeType:function(e){return o.overrideMimeType(e)},abort:function(){f=!0;try{o.abort()}catch(e){}i(null,"abort")},success:function(e,t){u.success(e,t)},error:function(e,t){u.error(e,t)}};i=function(e,n){t.each(s,function(e,t){try{d[t]=o[t]}catch(r){}}),/OK$/.test(d.statusText)&&(d.statusText="success"),e===r&&(e=null),f&&(n="abort"),/timeout|error|abort/.test(n)?d.error(e,n):d.success(e,n),i=t.noop},e.publish("request.ajax.preprocess",n,u,p,d),t.extend(p,{isJSONP:function(){return/jsonp/gi.test(this.dataType)},cacheURL:function(){if(!this.isJSONP())return this.url;var e="callback";this.hasOwnProperty("jsonp")&&(this.jsonp!==!1?e=this.jsonp:this.hasOwnProperty("jsonpCallback")&&(e=this.jsonpCallback));var t=new RegExp("&?"+e+"=[^&]*&?","gi");return this.url.replace(t,"")},success:function(e,t){i(e,t)},error:function(e,t){i(null,t)},beforeSend:function(t,r){o=t,p=r;var s=n.beforeSend?n.beforeSend.call(this,d,p):!0;return s&&e.publish("request.before.ajax",n,u,p,d)}}),p.cache&&p.isJSONP()&&t.extend(p,{cache:!0}),t.ajax(p),a.abort=function(){d.abort(),l.call(this)}}},e.subscribe("request.ajax.preprocess",function(e,r,s){var u=[],a=s.data;"string"!=typeof a&&(a=t.extend(!0,{},e.data,a),s.url=s.url.replace(n,function(e,t){return t in a?(u.push(t),a[t]):void 0}),t.each(u,function(e,t){delete a[t]}),s.data=a)}),e.subscribe("request.ajax.preprocess",function(e,r,s){var n=s.data,u=e.dataMap;u&&"string"!=typeof n&&(t.isFunction(u)?s.data=u(n):(t.each(e.dataMap,function(e,t){e in n&&(n[t]=n[e],delete n[e])}),s.data=n))});var u=e.request.cache={_key:function(e,t,r){function s(){return r.charCodeAt(u++)<<24|r.charCodeAt(u++)<<16|r.charCodeAt(u++)<<8|r.charCodeAt(u++)<<0}r=t+r;for(var n=r.length,u=0,a=s();n>u;)a^=s();return"request-"+e+"-"+a},_default:function(){var e={};return function(t,r,s,n){var a=u._key(r.resourceId,s.cacheURL(),s.data),o=t.cache;if(a in e)return n.success(e[a]),!1;var i=n.success;n.success=function(t){e[a]=t,"number"==typeof o&&setTimeout(function(){delete e[a]},o),i.apply(this,arguments)}}}()};e.store&&(t.each(e.store.types,function(t){u[t]=function(r,s,n,a){var o=u._key(s.resourceId,n.cacheURL(),n.data),i=e.store[t](o);if(i)return n.success(i),!1;var c=a.success;a.success=function(s){e.store[t](o,s,{expires:r.cache.expires}),c.apply(this,arguments)}}}),u.persist=u[e.store.type]),e.subscribe("request.before.ajax",function(e){var t=e.cache;return t?(t=t.type||t,u[t in u?t:"_default"].apply(this,arguments)):void 0}),e.request.decoders={jsend:function(e,t,r,s,n){"success"===e.status?s(e.data):"fail"===e.status?n(e.data,"fail"):"error"===e.status?(delete e.status,n(e,"error")):n(null,"error")}},e.subscribe("request.before.ajax",function(r,s,n,u){function a(e,t){i(e,t)}function o(e,t){c(e,t)}var i=u.success,c=u.error,l=t.isFunction(r.decoder)?r.decoder:r.decoder in e.request.decoders?e.request.decoders[r.decoder]:e.request.decoders._default;l&&(u.success=function(e,t){l(e,t,u,a,o)},u.error=function(e,t){l(e,t,u,a,o)})})}(amplify,r)}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package.amplify={}}();

!function(){var t=Package.meteor.Meteor,e=Package.jquery.$,i=Package.jquery.jQuery,s=Package.tracker.Tracker,a=Package.tracker.Deps,o=Package["reactive-dict"].ReactiveDict,n=Package.session.Session,r=Package.underscore._,c=Package.ejson.EJSON,p;(function(){var e=function(t){return void 0===t?"undefined":c.stringify(t)},i=function(t){return void 0===t||"undefined"===t?void 0:c.parse(t)},a=function(t){t&&t.changed()};p=function(e){function i(){if(!(amplify.store("__PSDATAVERSION__"+p._dictName)>=1)){var t=amplify.store("__PSKEYS__"+p._dictName),e=amplify.store("__PSAKEYS__"+p._dictName);r.each([t,e],function(t){r.each(t,function(t){amplify.store(t,c.stringify(amplify.store(t)))})}),amplify.store("__PSDATAVERSION__"+p._dictName,2)}}function a(){if(!(amplify.store("__PSDATAVERSION__"+p._dictName)>=n)){var t=amplify.store("__PSKEYS__"+p._dictName),e=amplify.store("__PSAKEYS__"+p._dictName);r.each([t,e],function(t){r.each(t,function(t){var e=!1;try{c.parse(amplify.store(p._dictName+t))}catch(i){e=!0}if(!e){var s=c.parse(amplify.store(p._dictName+t)),a=c.toJSONValue(s);amplify.store(p._dictName+t,a)}})}),amplify.store("__PSDATAVERSION__"+p._dictName,4)}}if(!r.isString(e))throw new Error("dictName must be a string");this._dictName=e,"session"==e?(this._dictName="",this._dict=u):this._dict=new o(e);var n=4;this.psKeys={},this.psKeyList=[],this.psaKeys={},this.psaKeyList=[],this.default_method="temporary",t.settings&&t.settings["public"]&&t.settings["public"].persistent_session&&(this.default_method=t.settings["public"].persistent_session.default_method);var p=this;return t.isClient&&t.startup(function(){var t;i(),a();var e=amplify.store("__PSKEYS__"+p._dictName);if("object"==typeof e&&void 0!==e.length)for(var s=0;s<e.length;s++)r.has(p._dict.keys,e[s])||(t=p.get(e[s]),p.set(e[s],t,!0,!1));var o=amplify.store("__PSAKEYS__"+p._dictName);if("object"==typeof o&&void 0!==o.length)for(var s=0;s<o.length;s++)r.has(p._dict.keys,o[s])||(t=p.get(o[s]),p.setAuth(o[s],t,!0,!0))}),s.autorun(function(){if(t.userId){var e=t.userId();e||p.clearAuth()}}),this},p.prototype.store=function d(t,e,i){return this.psKeyList=amplify.store("__PSKEYS__"+this._dictName)||[],this.psaKeyList=amplify.store("__PSAKEYS__"+this._dictName)||[],"get"==t?amplify.store(this._dictName+e):(this.psKeyList=r.without(this.psKeyList,e),this.psaKeyList=r.without(this.psaKeyList,e),delete this.psKeys[e],delete this.psaKeys[e],void 0===i||null===i||"temporary"==t?i=null:"persistent"==t?(this.psKeys[e]=c.toJSONValue(i),this.psKeyList=r.union(this.psKeyList,[e])):"authenticated"==t&&(this.psaKeys[e]=c.toJSONValue(i),this.psaKeyList=r.union(this.psaKeyList,[e])),amplify.store("__PSKEYS__",this.psKeyList),amplify.store("__PSAKEYS__",this.psaKeyList),amplify.store(this._dictName+e,c.toJSONValue(i)),void 0)},p.prototype.old_get=function(){return this._dict.get.apply(this._dict,arguments)},p.prototype.get=function h(t){var e=this.old_get(t),i,s=this.store("get",t);return void 0!==s&&(i=c.fromJSONValue(this.store("get",t))),void 0===i||null===i?e:i},p.prototype.old_set=function(){return this._dict.set.apply(this._dict,arguments)},p.prototype.set=function _(t,e,i,s){if("object"==typeof t&&void 0===e)return void this._setObject(t,i,s);var a=t,o="temporary";(i||void 0===i&&("persistent"==this.default_method||"authenticated"==this.default_method))&&(o=s||void 0===i&&void 0===s&&"authenticated"==this.default_method?"authenticated":"persistent"),this.store(o,a,e),this.old_set(a,e)},p.prototype.all=function y(){this._dict.allDeps&&this._dict.allDeps.depend();var t={};return r.each(this._dict.keys,function(e,s){t[s]=i(e)}),t},p.prototype._setObject=function f(t,e,i){var s=this;r.each(t,function(t,a){s.set(a,t,e,i)})},p.prototype._ensureKey=function l(t){var e=this._dict;t in e.keyDeps||(e.keyDeps[t]=new s.Dependency,e.keyValueDeps[t]={})},p.prototype.equals=function m(t,i){var a=null;if(Package.mongo&&(a=Package.mongo.Mongo.ObjectID),!("string"==typeof i||"number"==typeof i||"boolean"==typeof i||"undefined"==typeof i||i instanceof Date||a&&i instanceof a||null===i))throw new Error("ReactiveDict.equals: value must be scalar");var o=e(i);if(s.active){this._ensureKey(t),r.has(this._dict.keyValueDeps[t],o)||(this._dict.keyValueDeps[t][o]=new s.Dependency);var n=this._dict.keyValueDeps[t][o].depend();if(n){var p=this;s.onInvalidate(function(){p._dict.keyValueDeps[t][o].hasDependents()||delete p._dict.keyValueDeps[t][o]})}}var u=this.get(t);return c.equals(u,i)},p.prototype.setTemporary=function v(t,e){this.set(t,e,!1,!1)},p.prototype.setTemp=function g(t,e){this.set(t,e,!1,!1)},p.prototype.setPersistent=function k(t,e){this.set(t,e,!0,!1)},p.prototype.setAuth=function D(t,e){this.set(t,e,!0,!0)},p.prototype.makeTemp=function K(t){this.store("temporary",t)},p.prototype.makePersistent=function S(t){var e=this.get(t);this.store("persistent",t,e)},p.prototype.makeAuth=function P(t){var e=this.get(t);this.store("authenticated",t,e)},p.prototype.old_clear=function(){return this._dict.clear.apply(this._dict,arguments)},p.prototype.clear=function N(t,e){var i=this,s=i._dict.keys;if(void 0===t&&void 0===e?e=s:void 0!==t&&(e=[t]),r.isArray(e)){var o=e,e={};r.each(o,function(t){e[t]=s[t]})}r.each(e,function(t,e){i.set(e,void 0,!1,!1),a(i._dict.keyDeps[e]),i._dict.keyValueDeps[e]&&(a(i._dict.keyValueDeps[e][t]),a(i._dict.keyValueDeps[e].undefined)),delete i._dict.keys[e]}),i._dict.allDeps&&i._dict.allDeps.changed()},p.prototype.clearTemp=function A(){this.clear(void 0,r.keys(r.omit(this._dict.keys,this.psKeys,this.psaKeys)))},p.prototype.clearPersistent=function O(){this.clear(void 0,this.psKeys)},p.prototype.clearAuth=function V(){this.clear(void 0,this.psaKeys)},p.prototype.update=function b(t,e){var i,s;r.indexOf(this.psaKeyList,t)>=0&&(s=!0),(s||r.indexOf(this.psKeyList,t)>=0)&&(i=!0),this.set(t,e,i,s)},p.prototype.old_setDefault=function(){return this._dict.setDefault.apply(this._dict,arguments)},p.prototype.setDefault=function E(t,e,i,s){var a=this;return r.isObject(t)?void r.each(t,function(t,e){a.setDefault(e,t,i,s)}):void(void 0===this.get(t)&&this.set(t,e,i,s))},p.prototype.setDefaultTemp=function L(t,e){r.isObject(t)&&(e=void 0),this.setDefault(t,e,!1,!1)},p.prototype.setDefaultPersistent=function j(t,e){r.isObject(t)&&(e=void 0),this.setDefault(t,e,!0,!1)},p.prototype.setDefaultAuth=function w(t,e){r.isObject(t)&&(e=void 0),this.setDefault(t,e,!0,!0)};var u=r.clone(n);r.extend(n,new p("session"))}).call(this),"undefined"==typeof Package&&(Package={}),Package["u2622:persistent-session"]={PersistentSession:p}}();

!function(){var e=Package.meteor.Meteor,n=Package.underscore._,r,a;(function(){r={};var e=function(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")};r._encodeParams=function(r){var a=[];return n.each(r,function(n,r){a.length&&a.push("&"),a.push(e(r),"=",e(n))}),a.join("").replace(/%20/g,"+")},a=function(e,n,a,c){var t=e,o=n?n.slice(1):null;if("string"==typeof a&&(o=String(a)),c){o=o||"";var u=r._encodeParams(c);o&&u&&(o+="&"),o+=u}var i=t;return null!==o&&(i+="?"+o),i}}).call(this),function(){r._constructUrl=function(e,n,r){var c=/^(.*?)(\?.*)?$/.exec(e);return a(c[1],c[2],n,r)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.url={URL:r}}();

!function(){var t=Package.meteor.Meteor,e=Package.underscore._,n=Package.url.URL,r,a,o;(function(){r=function(t,e){var n=500,r=function(t,e){return t.length>e?t.slice(0,e)+"...":t},a="string"==typeof e?e:e.toString(),o="failed ["+t+"]";return a&&(o+=" "+r(a.replace(/\n/g," "),n)),new Error(o)},a=function(t){var n=(t.headers["content-type"]||";").split(";")[0];if(e.include(["application/json","text/javascript","application/javascript","application/x-javascript"],n))try{t.data=JSON.parse(t.content)}catch(r){t.data=null}else t.data=null},o={},o.get=function(){return o.call.apply(this,["GET"].concat(e.toArray(arguments)))},o.post=function(){return o.call.apply(this,["POST"].concat(e.toArray(arguments)))},o.put=function(){return o.call.apply(this,["PUT"].concat(e.toArray(arguments)))},o.del=function(){return o.call.apply(this,["DELETE"].concat(e.toArray(arguments)))}}).call(this),function(){o.call=function(o,c,s,i){if(i||"function"!=typeof s||(i=s,s=null),s=s||{},"function"!=typeof i)throw new Error("Can't make a blocking HTTP call from the client; callback required.");o=(o||"").toUpperCase();var u={},l=s.content;s.data&&(l=JSON.stringify(s.data),u["Content-Type"]="application/json");var p,f;if(l||"GET"===o||"HEAD"===o?p=s.params:f=s.params,c=n._constructUrl(c,s.query,p),s.followRedirects===!1)throw new Error("Option followRedirects:false not supported on client.");if(e.has(s,"npmRequestOptions"))throw new Error("Option npmRequestOptions not supported on client.");var d,h;if(s.auth){var y=s.auth.indexOf(":");if(0>y)throw new Error('auth option should be of the form "username:password"');d=s.auth.substring(0,y),h=s.auth.substring(y+1)}f&&(l=n._encodeParams(f)),e.extend(u,s.headers||{}),i=function(t){return function(e,n){e&&n&&(e.response=n),t(e,n)}}(i),i=e.once(i);try{var g;if("undefined"!=typeof XMLHttpRequest)g=new XMLHttpRequest;else{if("undefined"==typeof ActiveXObject)throw new Error("Can't create XMLHttpRequest");g=new ActiveXObject("Microsoft.XMLHttp")}g.open(o,c,!0,d,h);for(var v in u)g.setRequestHeader(v,u[v]);var w=!1,m;if(s.timeout&&(m=t.setTimeout(function(){w=!0,g.abort()},s.timeout)),g.onreadystatechange=function(n){if(4===g.readyState)if(m&&t.clearTimeout(m),w)i(new Error("timeout"));else if(g.status){var o={};o.statusCode=g.status,o.content=g.responseText,o.headers={};var c=g.getAllResponseHeaders();""===c&&g.getResponseHeader("content-type")&&(c="content-type: "+g.getResponseHeader("content-type"));var s=c.split(/\r?\n/);e.each(s,function(t){var e=/^(.*?):(?:\s+)(.*)$/.exec(t);e&&3===e.length&&(o.headers[e[1].toLowerCase()]=e[2])}),a(o);var u=null;o.statusCode>=400&&(u=r(o.statusCode,o.content)),i(u,o)}else i(new Error("network"))},s.beforeSend){var E=e.once(s.beforeSend);if(!1===E.call(null,g,s))return g.abort()}g.send(l)}catch(T){i(T)}}}.call(this),function(){t.http=o}.call(this),"undefined"==typeof Package&&(Package={}),Package.http={HTTP:o}}();

!function(){var e=Package.meteor.Meteor,n=Package.check.check,t=Package.check.Match,r=Package.tracker.Tracker,c=Package.tracker.Deps,a=Package.http.HTTP,i,o;(function(){function r(){i.loggingEnabled&&e._debug.apply(this,arguments)}function f(n){if(!o.timeTick[n]){var t=new c.Dependency;e.setInterval(function(){t.changed()},n),o.timeTick[n]=t}return o.timeTick[n]}Date.now=Date.now||function(){return+new Date},i={loggingEnabled:!0};var s=1e3;o={offset:void 0,roundTripTime:void 0,offsetDep:new c.Dependency,timeTick:{},timeCheck:function(e,n,t,r){return Math.abs(n-e-t)<r?!0:!1}},o.timeTick[s]=new c.Dependency;var u=5,d=0,p="/_timesync";e.isCordova&&(p=e.absoluteUrl("_timesync"));var v=function(){var n=Date.now();a.get(p,function(t,c){var a=Date.now();if(t)return r("Error syncing to server time: ",t),void(++d<=u?e.setTimeout(i.resync,1e3):r("Max number of time sync attempts reached. Giving up."));d=0;var f=parseInt(c.content);o.offset=Math.round((f-n+(f-a))/2),o.roundTripTime=a-n,o.offsetDep.changed()})};i.serverTime=function(e,r){return n(r,t.Optional(t.Integer)),i.isSynced()?(e||f(r||s).depend(),(+e||Date.now())+o.offset):void 0},i.serverOffset=function(){return o.offsetDep.depend(),o.offset},i.roundTripTime=function(){return o.offsetDep.depend(),o.roundTripTime},i.isSynced=function(){return o.offsetDep.depend(),void 0!==o.offset};var g=null;i.resync=function(){null!==g&&e.clearInterval(g),v(),g=e.setInterval(v,6e5)};var m=!1;c.autorun(function(){var n=e.status().connected;n&&!m&&i.resync(),m=n});var k=5e3,l=Date.now();e.setInterval(function(){var e=Date.now();o.timeCheck(l,e,s,k)?o.timeTick[s].changed():(r("Clock discrepancy detected. Attempting re-sync."),o.offset=void 0,o.offsetDep.changed(),i.resync()),l=e},s)}).call(this),"undefined"==typeof Package&&(Package={}),Package["mizzao:timesync"]={TimeSync:i,SyncInternals:o}}();

!function(){var n=Package.meteor.Meteor,e=Package["accounts-base"].Accounts,t=Package["accounts-base"].AccountsClient,r=Package.check.check,o=Package.check.Match,c=Package.underscore._,i=Package.mongo.Mongo,a=Package.tracker.Tracker,u=Package.tracker.Deps,d=Package.jquery.$,l=Package.jquery.jQuery,s=Package["mizzao:timesync"].TimeSync,v,f,g;(function(){v="object"==typeof v?v:{};var e=v,t,r,o,c,i,a,l,h,k,p,w,m,y,P;w=null,o=!1,h=void 0,p=new u.Dependency,c=new u.Dependency,t=new u.Dependency,r=!0,f={idleThreshold:null,idleOnBlur:!1,computeState:function(n,e,t){var r;return r=e-n,f.idleOnBlur&&!t?!0:r>f.idleThreshold?!0:!1},connectionChange:function(n,e){return n&&!e&&o?f.reportIdle(h):void 0},onWindowBlur:function(){return r=!1,k()},onWindowFocus:function(){return r=!0,k(!0)},reportIdle:function(e){return n.call("user-status-idle",e)},reportActive:function(e){return n.call("user-status-active",e)}},m=function(e){var r;if(!s.isSynced())throw new Error("Can't start idle monitor until synced to server");if(w)throw new Error("Idle monitor is already active. Stop it first.");e=e||{},f.idleThreshold=e.threshold||6e4,r=Math.max(e.interval||1e3,1e3),f.idleOnBlur=null!=e.idleOnBlur?e.idleOnBlur:!1,w=n.setInterval(k,r),p.changed(),null==h&&(h=u.nonreactive(function(){return s.serverTime()}),t.changed()),k()},y=function(){if(!w)throw new Error("Idle monitor is not running.");n.clearInterval(w),w=null,h=void 0,p.changed(),o&&(o=!1,c.changed(),f.reportActive(u.nonreactive(function(){return s.serverTime()})))},k=function(n){var e,i;w&&(e=u.nonreactive(function(){return s.serverTime()}),null!=e&&(!n||!r&&f.idleOnBlur||(h=e,t.changed()),i=f.computeState(h,e,r),i!==o&&(o=i,c.changed())))},P=function(){return w?k(!0):void n._debug("Cannot touch as idle monitor is not running.")},i=function(){return c.depend(),o},a=function(){return p.depend(),null!=w},l=function(){return a()?(t.depend(),h):void 0},n.startup(function(){var e;return d(window).on("click keydown",function(){return k(!0)}),d(window).blur(f.onWindowBlur),d(window).focus(f.onWindowFocus),n.isCordova&&(document.addEventListener("pause",f.onWindowBlur),document.addEventListener("resume",f.onWindowFocus)),r=document.hasFocus(),u.autorun(function(){a()&&(i()?f.reportIdle(h):f.reportActive(h))}),e=n.status().connected,u.autorun(function(){var t;t=n.status().connected,f.connectionChange(t,e),e=t})}),g={startMonitor:m,stopMonitor:y,pingMonitor:P,isIdle:i,isMonitoring:a,lastActivity:l}}).call(this),"undefined"==typeof Package&&(Package={}),Package["mizzao:user-status"]={UserStatus:g,MonitorInternals:f}}();

!function(){var t=Package.meteor.Meteor,e=Package.jquery.$,i=Package.jquery.jQuery;(function(){(function(){!function(t){t.fn.unveil=function(e,i){function n(){var e=c.filter(function(){var e=t(this);if(!e.is(":hidden")){var i=a.scrollTop(),n=i+a.height(),o=e.offset().top,u=o+e.height();return u>=i-r&&n+r>=o}});l=e.trigger("unveil"),c=c.not(l)}var a=t(window),r=e||0,o=window.devicePixelRatio>1,u=o?"data-src-retina":"data-src",c=this,l;return this.one("unveil",function(){var t=this.getAttribute(u);t=t||this.getAttribute("data-src"),t&&(this.setAttribute("src",t),"function"==typeof i&&i.call(this))}),a.on("scroll.unveil resize.unveil lookup.unveil",n),n(),this}}(window.jQuery||window.Zepto)}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["luisalmeida:unveil"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.ejson.EJSON,a=Package.underscore._,n,c;(function(){n={obj:function(e){var a=document.getElementById(e);return a?t.parse(a.innerHTML):void 0},meta:function(e){return this.metas[e]},parseMetas:function(){for(var e=document.getElementsByTagName("meta"),t=0;t<e.length;t++)this.metas[e[t].getAttribute("id")]=e[t].getAttribute("content")},metas:{}},n.parseMetas(),c={getObj:n.obj,getMeta:n.meta}}).call(this),"undefined"==typeof Package&&(Package={}),Package["meteorhacks:inject-initial"]={Injected:n,Inject:c}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,n;(function(){(function(){n=function(e){var t=this;if(!(t instanceof n))throw new Error('use "new" to construct an EventEmitter');e=e||{},t._eventEmitter={onListeners:{},onceListeners:{},maxListeners:e.maxListeners||10}};var e=function(e,t){var n=this;return n._eventEmitter.maxListeners&&t>n._eventEmitter.maxListeners?"warning: possible EventEmitter memory leak detected. "+t+' listeners added on event "'+e+'". Use emitter.setMaxListeners() to increase limit. ('+n._eventEmitter.maxListeners+")":void 0};n.prototype.setMaxListeners=function(e){this._eventEmitter.maxListeners=e};var r=function(t,n,r){return"undefined"==typeof t[n]&&(t[n]=[]),e.apply(this,[n,t[n].push(r)])};n.prototype.on=function(e,t){var n=r.apply(this,[this._eventEmitter.onListeners,e,t]);return n&&console.warn(new Error(n).stack),this},n.prototype.once=function(e,t){var n=r.apply(this,[this._eventEmitter.onceListeners,e,t]);return n&&console.warn(new Error(n).stack),this};var i=function(e,n){var r=this,i=0;return"undefined"!=typeof e&&t.each(e,function(e){i++,e.apply(r,n)}),i};n.prototype.emit=function(e){var n=this,r=t.rest(arguments),o=0,s=n._eventEmitter.onceListeners[e];return n._eventEmitter.onceListeners[e]=[],o+=i.call(n,n._eventEmitter.onListeners[e],r),o+=i.call(n,s,r),o>0};var o=function(e,t){for(var n=!1,r=[],i=0;i<e.length;i++)n||e[i]!==t?r.push(e[i]):n=!0;return r};n.prototype.off=function(e,t){var n=this;e?"function"==typeof t?("undefined"!=typeof n._eventEmitter.onListeners[e]&&(n._eventEmitter.onListeners[e]=o(n._eventEmitter.onListeners[e],t)),"undefined"!=typeof n._eventEmitter.onceListeners[e]&&(n._eventEmitter.onceListeners[e]=o(n._eventEmitter.onceListeners[e],t))):(n._eventEmitter.onListeners[e]=[],n._eventEmitter.onceListeners[e]=[]):(n._eventEmitter.onListeners={},n._eventEmitter.onceListeners={})},n.prototype.addListener=n.prototype.on,n.prototype.removeListener=n.prototype.off,n.prototype.removeAllListeners=n.prototype.off,n.prototype.one=n.prototype.once,n.prototype.trigger=n.prototype.emit}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["raix:eventemitter"]={EventEmitter:n}}();

!function(){var t=Package.meteor.Meteor,e;(function(){(function(){e={},"function"==typeof Object.create?e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.inherits=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["meteorspark:util"]={Util:e}}();

!function(){var e=Package.underscore._,n=Package.meteor.Meteor,r=Package["raix:eventemitter"].EventEmitter,t=Package["meteorspark:util"].Util,a=Package.tracker.Tracker,u=Package.tracker.Deps,s=Package.session.Session,o=Package.jquery.$,i=Package.jquery.jQuery,l=Package.templating.Template,c=Package.blaze.Blaze,f=Package.blaze.UI,p=Package.blaze.Handlebars,m=Package.spacebars.Spacebars,g=Package.htmljs.HTML,d,b,h,v;(function(){d={fallback_language:"en",langauges_tags_regex:"([a-z]{2})(-[A-Z]{2})?",project_translations_domain:"project",browser_path:"/tap-i18n",debug:!1}}).call(this),function(){b={},function(){function e(e,n){if(!n||"function"==typeof n)return e;for(var r in n)e[r]=n[r];return e}function n(e,n,r){var t,a=0,u=e.length,s=void 0===u||"[object Array]"!==Object.prototype.toString.apply(e)||"function"==typeof e;if(r)if(s){for(t in e)if(n.apply(e[t],r)===!1)break}else for(;u>a&&n.apply(e[a++],r)!==!1;);else if(s){for(t in e)if(n.call(e[t],t,e[t])===!1)break}else for(;u>a&&n.call(e[a],a,e[a++])!==!1;);return e}function r(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return M[e]}):e}function t(e){var n=function(e){if(window.XMLHttpRequest)return e(null,new XMLHttpRequest);if(window.ActiveXObject)try{return e(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(n){return e(null,new ActiveXObject("Microsoft.XMLHTTP"))}return e(new Error)},r=function(e){if("string"==typeof e)return e;var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.join("&")},t=function(e){e=e.replace(/\r\n/g,"\n");for(var n="",r=0;r<e.length;r++){var t=e.charCodeAt(r);128>t?n+=String.fromCharCode(t):t>127&&2048>t?(n+=String.fromCharCode(t>>6|192),n+=String.fromCharCode(63&t|128)):(n+=String.fromCharCode(t>>12|224),n+=String.fromCharCode(t>>6&63|128),n+=String.fromCharCode(63&t|128))}return n},a=function(e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=t(e);var r="",a,u,s,o,i,l,c,f=0;do a=e.charCodeAt(f++),u=e.charCodeAt(f++),s=e.charCodeAt(f++),o=a>>2,i=(3&a)<<4|u>>4,l=(15&u)<<2|s>>6,c=63&s,isNaN(u)?l=c=64:isNaN(s)&&(c=64),r+=n.charAt(o)+n.charAt(i)+n.charAt(l)+n.charAt(c),a=u=s="",o=i=l=c="";while(f<e.length);return r},u=function(){for(var e=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])}return e},s=function(e,t,a,o){"function"==typeof a&&(o=a,a={}),a.cache=a.cache||!1,a.data=a.data||{},a.headers=a.headers||{},a.jsonp=a.jsonp||!1,a.async=void 0===a.async?!0:a.async;var i=u({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},s.headers,a.headers),l;if(l="application/json"===i["content-type"]?JSON.stringify(a.data):r(a.data),"GET"===e){var c=[];if(l&&(c.push(l),l=null),a.cache||c.push("_="+(new Date).getTime()),a.jsonp&&(c.push("callback="+a.jsonp),c.push("jsonp="+a.jsonp)),c=c.join("&"),c.length>1&&(t+=t.indexOf("?")>-1?"&"+c:"?"+c),a.jsonp){var f=document.getElementsByTagName("head")[0],p=document.createElement("script");return p.type="text/javascript",p.src=t,void f.appendChild(p)}}n(function(n,r){if(n)return o(n);r.open(e,t,a.async);for(var u in i)i.hasOwnProperty(u)&&r.setRequestHeader(u,i[u]);r.onreadystatechange=function(){if(4===r.readyState){var e=r.responseText||"";if(!o)return;o(r.status,{text:function(){return e},json:function(){return JSON.parse(e)}})}},r.send(l)})},o={authBasic:function(e,n){s.headers.Authorization="Basic "+a(e+":"+n)},connect:function(e,n,r){return s("CONNECT",e,n,r)},del:function(e,n,r){return s("DELETE",e,n,r)},get:function(e,n,r){return s("GET",e,n,r)},head:function(e,n,r){return s("HEAD",e,n,r)},headers:function(e){s.headers=e||{}},isAllowed:function(e,n,r){this.options(e,function(e,t){r(-1!==t.text().indexOf(n))})},options:function(e,n,r){return s("OPTIONS",e,n,r)},patch:function(e,n,r){return s("PATCH",e,n,r)},post:function(e,n,r){return s("POST",e,n,r)},put:function(e,n,r){return s("PUT",e,n,r)},trace:function(e,n,r){return s("TRACE",e,n,r)}},i=e.type?e.type.toLowerCase():"get";o[i](e.url,e,function(n,r){200===n?e.success(r.json(),n,null):e.error(r.text(),n,null)})}function a(e,n){"function"==typeof e&&(n=e,e={}),e=e||{},R.extend(E,e),delete E.fixLng,"string"==typeof E.ns&&(E.ns={namespaces:[E.ns],defaultNs:E.ns}),"string"==typeof E.fallbackNS&&(E.fallbackNS=[E.fallbackNS]),("string"==typeof E.fallbackLng||"boolean"==typeof E.fallbackLng)&&(E.fallbackLng=[E.fallbackLng]),E.interpolationPrefixEscaped=R.regexEscape(E.interpolationPrefix),E.interpolationSuffixEscaped=R.regexEscape(E.interpolationSuffix),E.lng||(E.lng=R.detectLanguage()),E.lng?E.useCookie&&R.cookie.create(E.cookieName,E.lng,E.cookieExpirationTime,E.cookieDomain):(E.lng=E.fallbackLng[0],E.useCookie&&R.cookie.remove(E.cookieName)),A=R.toLanguages(E.lng),O=A[0],R.log("currentLng set to: "+O);var r=y;e.fixLng&&(r=function(e,n){return n=n||{},n.lng=n.lng||r.lng,y(e,n)},r.lng=O),z.setCurrentLng(O),P&&E.setJqueryExt&&m();var t;if(P&&P.Deferred&&(t=P.Deferred()),!E.resStore){var a=R.toLanguages(E.lng);"string"==typeof E.preload&&(E.preload=[E.preload]);for(var u=0,s=E.preload.length;s>u;u++)for(var o=R.toLanguages(E.preload[u]),i=0,l=o.length;l>i;i++)a.indexOf(o[i])<0&&a.push(o[i]);return b.sync.load(a,E,function(e,a){j=a,C=!0,n&&n(r),t&&t.resolve(r)}),t?t.promise():void 0}return j=E.resStore,C=!0,n&&n(r),t&&t.resolve(r),t?t.promise():void 0}function u(e,n){"string"==typeof e&&(e=[e]);for(var r=0,t=e.length;t>r;r++)E.preload.indexOf(e[r])<0&&E.preload.push(e[r]);return a(n)}function s(e,n,r){"string"!=typeof n?(r=n,n=E.ns.defaultNs):E.ns.namespaces.indexOf(n)<0&&E.ns.namespaces.push(n),j[e]=j[e]||{},j[e][n]=j[e][n]||{},R.extend(j[e][n],r)}function o(e,n){"string"!=typeof n&&(n=E.ns.defaultNs),j[e]=j[e]||{},j[e][n]={}}function i(e){E.ns.defaultNs=e}function l(e,n){c([e],n)}function c(e,n){var r={dynamicLoad:E.dynamicLoad,resGetPath:E.resGetPath,getAsync:E.getAsync,customLoad:E.customLoad,ns:{namespaces:e,defaultNs:""}},t=R.toLanguages(E.lng);"string"==typeof E.preload&&(E.preload=[E.preload]);for(var a=0,u=E.preload.length;u>a;a++)for(var s=R.toLanguages(E.preload[a]),o=0,i=s.length;i>o;o++)t.indexOf(s[o])<0&&t.push(s[o]);for(var l=[],c=0,f=t.length;f>c;c++){var p=!1,m=j[t[c]];if(m)for(var g=0,d=e.length;d>g;g++)m[e[g]]||(p=!0);else p=!0;p&&l.push(t[c])}l.length?b.sync._fetch(l,r,function(r,t){var a=e.length*l.length;R.each(e,function(e,r){E.ns.namespaces.indexOf(r)<0&&E.ns.namespaces.push(r),R.each(l,function(e,u){j[u]=j[u]||{},j[u][r]=t[u][r],a--,0===a&&n&&(E.useLocalStorage&&b.sync._storeLocal(j),n())})})}):n&&n()}function f(e,n,r){return"function"==typeof n?(r=n,n={}):n||(n={}),n.lng=e,a(n,r)}function p(){return O}function m(){function e(e,n,r){if(0!==n.length){var t="text";if(0===n.indexOf("[")){var a=n.split("]");n=a[1],t=a[0].substr(1,a[0].length-1)}n.indexOf(";")===n.length-1&&(n=n.substr(0,n.length-2));var u;if("html"===t)u=E.defaultValueFromContent?P.extend({defaultValue:e.html()},r):r,e.html(P.t(n,u));else if("text"===t)u=E.defaultValueFromContent?P.extend({defaultValue:e.text()},r):r,e.text(P.t(n,u));else if("prepend"===t)u=E.defaultValueFromContent?P.extend({defaultValue:e.html()},r):r,e.prepend(P.t(n,u));else if("append"===t)u=E.defaultValueFromContent?P.extend({defaultValue:e.html()},r):r,e.append(P.t(n,u));else if(0===t.indexOf("data-")){var s=t.substr("data-".length);u=E.defaultValueFromContent?P.extend({defaultValue:e.data(s)},r):r;var o=P.t(n,u);e.data(s,o),e.attr(t,o)}else u=E.defaultValueFromContent?P.extend({defaultValue:e.attr(t)},r):r,e.attr(t,P.t(n,u))}}function n(n,r){var t=n.attr(E.selectorAttr);if(t||"undefined"==typeof t||t===!1||(t=n.text()||n.val()),t){var a=n,u=n.data("i18n-target");if(u&&(a=n.find(u)||n),r||E.useDataAttrOptions!==!0||(r=n.data("i18n-options")),r=r||{},t.indexOf(";")>=0){var s=t.split(";");P.each(s,function(n,t){""!==t&&e(a,t,r)})}else e(a,t,r);E.useDataAttrOptions===!0&&n.data("i18n-options",r)}}P.t=P.t||y,P.fn.TAPi18next=function(e){return this.each(function(){n(P(this),e);var r=P(this).find("["+E.selectorAttr+"]");r.each(function(){n(P(this),e)})})}}function g(e,n,r,t){if(!e)return e;if(t=t||n,e.indexOf(t.interpolationPrefix||E.interpolationPrefix)<0)return e;var a=t.interpolationPrefix?R.regexEscape(t.interpolationPrefix):E.interpolationPrefixEscaped,u=t.interpolationSuffix?R.regexEscape(t.interpolationSuffix):E.interpolationSuffixEscaped,s="HTML"+u;return R.each(n,function(n,o){var i=r?r+E.keyseparator+n:n;"object"==typeof o&&null!==o?e=g(e,o,i,t):t.escapeInterpolation||E.escapeInterpolation?(e=e.replace(new RegExp([a,i,s].join(""),"g"),o),e=e.replace(new RegExp([a,i,u].join(""),"g"),R.escape(o))):e=e.replace(new RegExp([a,i,u].join(""),"g"),o)}),e}function d(e,n){var r=",",t="{",a="}",u=R.extend({},n);for(delete u.postProcess;-1!=e.indexOf(E.reusePrefix)&&(w++,!(w>E.maxRecursion));){var s=e.lastIndexOf(E.reusePrefix),o=e.indexOf(E.reuseSuffix,s)+E.reuseSuffix.length,i=e.substring(s,o),l=i.replace(E.reusePrefix,"").replace(E.reuseSuffix,"");if(-1!=l.indexOf(r)){var c=l.indexOf(r);if(-1!=l.indexOf(t,c)&&-1!=l.indexOf(a,c)){var f=l.indexOf(t,c),p=l.indexOf(a,f)+a.length;try{u=R.extend(u,JSON.parse(l.substring(f,p))),l=l.substring(0,c)}catch(m){}}}var g=k(l,u);e=e.replace(i,g)}return e}function h(e){return e.context&&("string"==typeof e.context||"number"==typeof e.context)}function v(e){return void 0!==e.count&&"string"!=typeof e.count&&1!==e.count}function _(e,n){n=n||{};var r=x(e,n),t=S(e,n);return void 0!==t||t===r}function y(e,n){return"undefined"==typeof n&&(n={}),C?(w=0,k.apply(null,arguments)):(R.log("i18next not finished initialization. you might have called t function before loading resources finished."),n.defaultValue||"")}function x(e,n){return void 0!==n.defaultValue?n.defaultValue:e}function N(){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return{postProcess:"sprintf",sprintf:e}}function k(e,n){if("undefined"!=typeof n&&null!==n&&"object"!=typeof n?"sprintf"===E.shortcutFunction?n=N.apply(null,arguments):"defaultValue"===E.shortcutFunction&&(n={defaultValue:n}):n=n||{},void 0===e||null===e)return"";"string"==typeof e&&(e=[e]);var r=e[0];if(e.length>1)for(var t=0;t<e.length&&(r=e[t],!_(r,n));t++);var a=x(r,n),u=S(r,n),s=n.lng?R.toLanguages(n.lng):A,o=n.ns||E.ns.defaultNs,i;r.indexOf(E.nsseparator)>-1&&(i=r.split(E.nsseparator),o=i[0],r=i[1]),void 0===u&&E.sendMissing&&(n.lng?H.postMissing(s[0],o,r,a,s):H.postMissing(E.lng,o,r,a,s));var l=n.postProcess||E.postProcess;void 0!==u&&l&&I[l]&&(u=I[l](u,r,n));var c=a;if(a.indexOf(E.nsseparator)>-1&&(i=a.split(E.nsseparator),c=i[1]),c===r&&E.parseMissingKey&&(a=E.parseMissingKey(a)),void 0===u&&(a=g(a,n),a=d(a,n),l&&I[l])){var f=x(r,n);u=I[l](f,r,n)}return void 0!==u?u:a}function S(e,n){n=n||{};var r,t,a=x(e,n),u=A;if(!j)return a;if("cimode"===u[0].toLowerCase())return a;if(n.lng&&(u=R.toLanguages(n.lng),!j[u[0]])){var s=E.getAsync;E.getAsync=!1,b.sync.load(u,E,function(e,n){R.extend(j,n),E.getAsync=s})}var o=n.ns||E.ns.defaultNs;if(e.indexOf(E.nsseparator)>-1){var i=e.split(E.nsseparator);o=i[0],e=i[1]}if(h(n)){r=R.extend({},n),delete r.context,r.defaultValue=E.contextNotFound;var l=o+E.nsseparator+e+"_"+n.context;if(t=y(l,r),t!=E.contextNotFound)return g(t,{context:n.context})}if(v(n)){r=R.extend({},n),delete r.count,r.defaultValue=E.pluralNotFound;var c=o+E.nsseparator+e+E.pluralSuffix,f=z.get(u[0],n.count);if(f>=0?c=c+"_"+f:1===f&&(c=o+E.nsseparator+e),t=y(c,r),t!=E.pluralNotFound)return g(t,{count:n.count,interpolationPrefix:n.interpolationPrefix,interpolationSuffix:n.interpolationSuffix})}for(var p,m=e.split(E.keyseparator),_=0,N=u.length;N>_&&void 0===p;_++){for(var L=u[_],T=0,P=j[L]&&j[L][o];m[T];)P=P&&P[m[T]],T++;if(void 0!==P){var O=Object.prototype.toString.apply(P);if("string"==typeof P)P=g(P,n),P=d(P,n);else if("[object Array]"!==O||E.returnObjectTrees||n.returnObjectTrees){if(null===P&&E.fallbackOnNull===!0)P=void 0;else if(null!==P)if(E.returnObjectTrees||n.returnObjectTrees){if("[object Number]"!==O&&"[object Function]"!==O&&"[object RegExp]"!==O){var w="[object Array]"===O?[]:{};R.each(P,function(r){w[r]=k(o+E.nsseparator+e+E.keyseparator+r,n)}),P=w}}else E.objectTreeKeyHandler&&"function"==typeof E.objectTreeKeyHandler?P=E.objectTreeKeyHandler(e,P,L,o,n):(P="key '"+o+":"+e+" ("+L+")' returned an object instead of string.",R.log(P))}else P=P.join("\n"),P=g(P,n),P=d(P,n);"string"==typeof P&&""===P.trim()&&E.fallbackOnEmpty===!0&&(P=void 0),p=P}}if(void 0===p&&!n.isFallbackLookup&&(E.fallbackToDefaultNS===!0||E.fallbackNS&&E.fallbackNS.length>0))if(n.isFallbackLookup=!0,E.fallbackNS.length){for(var C=0,M=E.fallbackNS.length;M>C;C++)if(p=S(E.fallbackNS[C]+E.nsseparator+e,n)){var F=p.indexOf(E.nsseparator)>-1?p.split(E.nsseparator)[1]:p,D=a.indexOf(E.nsseparator)>-1?a.split(E.nsseparator)[1]:a;if(F!==D)break}}else p=S(e,n);return p}function L(){var e,n=[];if("undefined"!=typeof window&&(!function(){for(var e=window.location.search.substring(1),r=e.split("&"),t=0;t<r.length;t++){var a=r[t].indexOf("=");if(a>0){var u=r[t].substring(0,a),s=r[t].substring(a+1);n[u]=s}}}(),n[E.detectLngQS]&&(e=n[E.detectLngQS])),!e&&"undefined"!=typeof document&&E.useCookie){var r=R.cookie.read(E.cookieName);r&&(e=r)}return e||"undefined"==typeof navigator||(e=navigator.language?navigator.language:navigator.userLanguage),e}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var n=Object(this),r=n.length>>>0;if(0===r)return-1;var t=0;if(arguments.length>0&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&t!=1/0&&t!=-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=r)return-1;for(var a=t>=0?t:Math.max(r-Math.abs(t),0);r>a;a++)if(a in n&&n[a]===e)return a;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(null==this)throw new TypeError;var n=Object(this),r=n.length>>>0;if(0===r)return-1;var t=r;arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&t!=1/0&&t!=-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))));for(var a=t>=0?Math.min(t,r-1):r-Math.abs(t);a>=0;a--)if(a in n&&n[a]===e)return a;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var T=this,P=T.jQuery||T.Zepto,j={},O,w=0,A=[],C=!1;"undefined"!=typeof module&&module.exports?module.exports=b:(P&&(P.TAPi18next=P.TAPi18next||b),T.TAPi18next=T.TAPi18next||b);var E={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:["dev"],fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,setJqueryExt:!1,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"TAPi18next",cookieDomain:void 0,objectTreeKeyHandler:void 0,postProcess:["sprintf"],parseMissingKey:void 0,shortcutFunction:"sprintf"},M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},F={create:function(e,n,r,t){var a;if(r){var u=new Date;u.setTime(u.getTime()+60*r*1e3),a="; expires="+u.toGMTString()}else a="";t=t?"domain="+t+";":"",document.cookie=e+"="+n+a+";"+t+"path=/"},read:function(e){for(var n=e+"=",r=document.cookie.split(";"),t=0;t<r.length;t++){for(var a=r[t];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return null},remove:function(e){this.create(e,"",-1)}},D={create:function(e,n,r,t){},read:function(e){return null},remove:function(e){}},R={extend:P?P.extend:e,each:P?P.each:n,ajax:P?P.ajax:"undefined"!=typeof document?t:function(){},cookie:"undefined"!=typeof document?F:D,detectLanguage:L,escape:r,log:function(e){E.debug&&"undefined"!=typeof console&&console.log(e)},toLanguages:function(e){var n=[];if("string"==typeof e&&e.indexOf("-")>-1){var r=e.split("-");e=E.lowerCaseLng?r[0].toLowerCase()+"-"+r[1].toLowerCase():r[0].toLowerCase()+"-"+r[1].toUpperCase(),"unspecific"!==E.load&&n.push(e),"current"!==E.load&&n.push(r[0])}else n.push(e);for(var t=0;t<E.fallbackLng.length;t++)-1===n.indexOf(E.fallbackLng[t])&&E.fallbackLng[t]&&n.push(E.fallbackLng[t]);return n},regexEscape:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};R.applyReplacement=g;var H={load:function(e,n,r){n.useLocalStorage?H._loadLocal(e,n,function(t,a){for(var u=[],s=0,o=e.length;o>s;s++)a[e[s]]||u.push(e[s]);u.length>0?H._fetch(u,n,function(e,n){R.extend(a,n),H._storeLocal(n),r(null,a)}):r(null,a)}):H._fetch(e,n,function(e,n){r(null,n)})},_loadLocal:function(e,n,r){var t={},a=(new Date).getTime();if(window.localStorage){var u=e.length;R.each(e,function(e,s){var o=window.localStorage.getItem("res_"+s);o&&(o=JSON.parse(o),o.i18nStamp&&o.i18nStamp+n.localStorageExpirationTime>a&&(t[s]=o)),u--,0===u&&r(null,t)})}},_storeLocal:function(e){if(window.localStorage)for(var n in e)e[n].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+n,JSON.stringify(e[n]))},_fetch:function(e,n,r){var t=n.ns,a={};if(n.dynamicLoad){var u=function(e,n){r(null,n)};if("function"==typeof n.customLoad)n.customLoad(e,t.namespaces,n,u);else{var s=g(n.resGetPath,{lng:e.join("+"),ns:t.namespaces.join("+")});R.ajax({url:s,success:function(e,n,r){R.log("loaded: "+s),u(null,e)},error:function(e,n,r){R.log("failed loading: "+s),u("failed loading resource.json error: "+r)},dataType:"json",async:n.getAsync})}}else{var o=t.namespaces.length*e.length,i;R.each(t.namespaces,function(t,u){R.each(e,function(e,t){var s=function(e,n){e&&(i=i||[],i.push(e)),a[t]=a[t]||{},a[t][u]=n,o--,0===o&&r(i,a)};"function"==typeof n.customLoad?n.customLoad(t,u,n,s):H._fetchOne(t,u,n,s)})})}},_fetchOne:function(e,n,r,t){var a=g(r.resGetPath,{lng:e,ns:n});R.ajax({url:a,success:function(e,n,r){R.log("loaded: "+a),t(null,e)},error:function(e,n,r){if(n&&200==n||e&&e.status&&200==e.status)R.log("There is a typo in: "+a);else if(n&&404==n||e&&e.status&&404==e.status)R.log("Does not exist: "+a);else{var u=n?n:e&&e.status?e.status:null;R.log(u+" when loading "+a)}t(r,{})},dataType:"json",async:r.getAsync})},postMissing:function(e,n,r,t,a){var u={};u[r]=t;var s=[];if("fallback"===E.sendMissingTo&&E.fallbackLng[0]!==!1)for(var o=0;o<E.fallbackLng.length;o++)s.push({lng:E.fallbackLng[o],url:g(E.resPostPath,{lng:E.fallbackLng[o],ns:n})});else if("current"===E.sendMissingTo||"fallback"===E.sendMissingTo&&E.fallbackLng[0]===!1)s.push({lng:e,url:g(E.resPostPath,{lng:e,ns:n})});else if("all"===E.sendMissingTo)for(var o=0,i=a.length;i>o;o++)s.push({lng:a[o],url:g(E.resPostPath,{lng:a[o],ns:n})});for(var l=0,c=s.length;c>l;l++){var f=s[l];R.ajax({url:f.url,type:E.sendType,data:u,success:function(e,a,u){R.log("posted missing key '"+r+"' to: "+f.url);for(var s=r.split("."),o=0,i=j[f.lng][n];s[o];)i=o===s.length-1?i[s[o]]=t:i[s[o]]=i[s[o]]||{},o++},error:function(e,n,t){R.log("failed posting missing key '"+r+"' to: "+f.url)},dataType:"json",async:E.postAsync})}}},z={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(e){return Number(e>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ak:{name:"Akan",numbers:[1,2],plurals:function(e){return Number(e>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(e){return Number(e>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ay:{name:"Aymar",numbers:[1],plurals:function(e){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(e){return Number(1!=e)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bo:{name:"Tibetan",numbers:[1],plurals:function(e){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(e){return Number(e>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},cgg:{name:"Chiga",numbers:[1],plurals:function(e){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},de:{name:"German",numbers:[1,2],plurals:function(e){return Number(1!=e)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(e){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(e){return Number(1!=e)}},en:{name:"English",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es:{name:"Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},et:{name:"Estonian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eu:{name:"Basque",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fa:{name:"Persian",numbers:[1],plurals:function(e){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(e){return Number(e>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fr:{name:"French",numbers:[1,2],plurals:function(e){return Number(e>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(e){return Number(1==e?0:2==e?1:7>e?2:11>e?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&20>e?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gun:{name:"Gun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(e){return Number(1!=e)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(e){return Number(1!=e)}},id:{name:"Indonesian",numbers:[1],plurals:function(e){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(e){return Number(e%10!=1||e%100==11)}},it:{name:"Italian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ja:{name:"Japanese",numbers:[1],plurals:function(e){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(e){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(e){return Number(0!==e)}},ka:{name:"Georgian",numbers:[1],plurals:function(e){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(e){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(e){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ko:{name:"Korean",numbers:[1],plurals:function(e){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(e){return Number(1==e?0:2==e?1:3==e?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(e){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(e){return Number(e>1)}},lo:{name:"Lao",numbers:[1],plurals:function(e){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(10>e%100||e%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[1,2,0],plurals:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(e){return Number(e>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(e){return Number(e>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(e){return Number(e>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(e){return Number(1==e||e%10==1?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(e){return Number(0==e?0:1==e?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ms:{name:"Malay",numbers:[1],plurals:function(e){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(e){return Number(1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(e){return Number(1!=e)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(e){return Number(1!=e)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(e){return Number(e>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(e){return Number(1!=e)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(e){return Number(1==e?0:0===e||e%100>0&&20>e%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(e){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(e){return Number(1!=e)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(e){return Number(1!=e)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},son:{name:"Songhay",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(e){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(e){return Number(1!=e)}},te:{name:"Telugu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(e){return Number(e>1)}},th:{name:"Thai",numbers:[1],plurals:function(e){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(e){return Number(e>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(e){return Number(e>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(e){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(e){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(e){return Number(e>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(e){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(e){return Number(e>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(e){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(e){return Number(1!=e)}},zh:{name:"Chinese",numbers:[1],plurals:function(e){return 0}}},addRule:function(e,n){z.rules[e]=n},setCurrentLng:function(e){if(!z.currentRule||z.currentRule.lng!==e){var n=e.split("-");z.currentRule={lng:e,rule:z.rules[n[0]]}}},get:function(e,n){function r(n,r){var t;if(t=z.currentRule&&z.currentRule.lng===e?z.currentRule.rule:z.rules[n]){var a=t.plurals(r),u=t.numbers[a];return 2===t.numbers.length&&1===t.numbers[0]&&(2===u?u=-1:1===u&&(u=1)),u}return 1===r?"1":"-1"}var t=e.split("-");return r(t[0],n)}},I={},V=function(e,n){I[e]=n},B=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,n){for(var r=[];n>0;r[--n]=e);return r.join("")}var r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,t){var a=1,u=r.length,s="",o,i=[],l,c,f,p,m,g;for(l=0;u>l;l++)if(s=e(r[l]),"string"===s)i.push(r[l]);else if("array"===s){if(f=r[l],f[2])for(o=t[a],c=0;c<f[2].length;c++){if(!o.hasOwnProperty(f[2][c]))throw B('[sprintf] property "%s" does not exist',f[2][c]);o=o[f[2][c]]}else o=f[1]?t[f[1]]:t[a++];if(/[^s]/.test(f[8])&&"number"!=e(o))throw B("[sprintf] expecting number but found %s",e(o));switch(f[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=f[7]?o.toExponential(f[7]):o.toExponential();break;case"f":o=f[7]?parseFloat(o).toFixed(f[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&f[7]?o.substring(0,f[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(f[8])&&f[3]&&o>=0?"+"+o:o,m=f[4]?"0"==f[4]?"0":f[4].charAt(1):" ",g=f[6]-String(o).length,p=f[6]?n(m,g):"",i.push(f[5]?o+p:p+o)}return i.join("")},r.cache={},r.parse=function(e){for(var n=e,r=[],t=[],a=0;n;){if(null!==(r=/^[^\x25]+/.exec(n)))t.push(r[0]);else if(null!==(r=/^\x25{2}/.exec(n)))t.push("%");else{if(null===(r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw"[sprintf] huh?";

if(r[2]){a|=1;var u=[],s=r[2],o=[];if(null===(o=/^([a-z_][a-z_\d]*)/i.exec(s)))throw"[sprintf] huh?";for(u.push(o[1]);""!==(s=s.substring(o[0].length));)if(null!==(o=/^\.([a-z_][a-z_\d]*)/i.exec(s)))u.push(o[1]);else{if(null===(o=/^\[(\d+)\]/.exec(s)))throw"[sprintf] huh?";u.push(o[1])}r[2]=u}else a|=2;if(3===a)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";t.push(r)}n=n.substring(r[0].length)}return t},r}(),G=function(e,n){return n.unshift(e),B.apply(null,n)};V("sprintf",function(e,n,r){return r.sprintf?"[object Array]"===Object.prototype.toString.apply(r.sprintf)?G(e,r.sprintf):"object"==typeof r.sprintf?B(e,r.sprintf):e:e}),b.init=a,b.setLng=f,b.preload=u,b.addResourceBundle=s,b.removeResourceBundle=o,b.loadNamespace=l,b.loadNamespaces=c,b.setDefaultNamespace=i,b.t=y,b.translate=y,b.exists=_,b.detectLanguage=R.detectLanguage,b.pluralExtensions=z,b.sync=H,b.functions=R,b.lng=p,b.addPostProcessor=V,b.options=E}()}.call(this),function(){b.init({resStore:{},fallbackLng:d.fallback_language,useCookie:!1})}.call(this),function(){h="object"==typeof h?h:{};var e=h;e.helpers={}}.call(this),h="object"==typeof h?h:{};var _=h,y;y=d.fallback_language,v=function(){return r.call(this),this._fallback_language=y,this._language_changed_tracker=new a.Dependency,this._loaded_languages=[y],this.conf=null,this.packages={},this.languages_names={},this.translations={},n.isClient&&(s.set(this._loaded_lang_session_key,null),this._languageSpecificTranslators={},this._languageSpecificTranslatorsTrackers={}),n.isServer&&(this.server_translators={},n.startup(function(e){return function(){return e._enabled()?e._registerHTTPMethod():void 0}}(this))),this.__=this._getPackageI18nextProxy(d.project_translations_domain),b.setLng(y),this},t.inherits(v,r),e.extend(v.prototype,{_loaded_lang_session_key:"TAPi18n::loaded_lang",_enable:function(e){return this.conf=e,this._onceEnabled()},_onceEnabled:function(){},_enabled:function(){return null!=this.conf},_getPackageDomain:function(e){return e.replace(/:/g,"-")},addResourceBundle:function(e,n,r){return b.addResourceBundle(e,this._getPackageDomain(n),r)},_getSpecificLangTranslator:function(e){var n,r;return n=b.lng(),r=null,b.setLng(e,{fixLng:!0},function(e){return function(e){return r=e}}(this)),b.setLng(n),r},_getProjectLanguages:function(){return this._enabled()?e.isArray(this.conf.supported_languages)?e.union([this._fallback_language],this.conf.supported_languages):e.keys(this.languages_names):[this._fallback_language]},getLanguages:function(){var e,n,r,t,a;if(!this._enabled())return null;for(r={},a=this._getProjectLanguages(),e=0,t=a.length;t>e;e++)n=a[e],r[n]={name:this.languages_names[n][1],en:this.languages_names[n][0]};return r},_loadLangFileObject:function(n,r){var t,a,u,s;s=[];for(a in r)t=r[a],t=e.extend({},t,(null!=(u=this._loadTranslations_cache[n])?u[a]:void 0)||{}),s.push(this.addResourceBundle(n,a,t));return s},_loadTranslations_cache:{},loadTranslations:function(r,t){var a,u,s,o;u=this._getProjectLanguages(),s=[];for(a in r)o=r[a],null==this._loadTranslations_cache[a]&&(this._loadTranslations_cache[a]={}),null==this._loadTranslations_cache[a][t]&&(this._loadTranslations_cache[a][t]={}),e.extend(this._loadTranslations_cache[a][t],o),this.addResourceBundle(a,t,o),s.push(n.isClient&&this.getLanguage()===a?this._language_changed_tracker.changed():void 0);return s}}),h="object"==typeof h?h:{};var _=h,x=[].indexOf||function(e){for(var n=0,r=this.length;r>n;n++)if(n in this&&this[n]===e)return n;return-1},N=[].slice;e.extend(v.prototype,{_languageSpecificTranslators:null,_languageSpecificTranslatorsTrackers:null,_getLanguageFilePath:function(e){var r;return this._enabled()?(r=null!=this.conf.cdn_path?this.conf.cdn_path:this.conf.i18n_files_route,r=r.replace(/\/$/,""),n.isCordova&&"/"===r[0]&&(r=n.absoluteUrl().replace(/\/+$/,"")+r),r+"/"+e+".json"):null},_loadLanguage:function(e){var n,r,t,a,u;return r=new o.Deferred,this._enabled()?(u=this._getProjectLanguages(),x.call(u,e)>=0?x.call(this._loaded_languages,e)<0?(a=function(n){return function(){var t;return t=o.getJSON(n._getLanguageFilePath(e)),t.done(function(t){return n._loadLangFileObject(e,t),n._loaded_languages.push(e),r.resolve()}),t.fail(function(n,t){return r.reject("Couldn't load language '"+e+"' JSON: "+t)})}}(this),t=x.call(e,"-")>=0?e.replace(/-.*/,""):y,e!==y&&x.call(u,t)>=0?(n=this._loadLanguage(t),n.done(function(e){return function(){return a()}}(this)),n.fail(function(e){return function(e){return r.reject("Loading process failed since dependency language '"+t+"' failed to load: "+e)}}(this))):a()):r.resolve():r.reject(["Language "+e+" is not supported"]),r.promise()):r.reject("tap-i18n is not enabled in the project level, check tap-i18n README")},_registerHelpers:function(n,r){var t,a,u;a=this._getPackageI18nextProxy(n!==d.project_translations_domain?this.packages[n].namespace:d.project_translations_domain),u=function(){var n,r,t;return r=arguments[0],n=2<=arguments.length?N.call(arguments,1):[],t=n.pop().hash,e.isEmpty(n)||(t.sprintf=n),a(r,t)},n!==d.project_translations_domain?null!=l[r]&&null!=l[r].helpers&&(t={},t[this.packages[n].helper_name]=u,l[r].helpers(t)):(f.registerHelper(this.conf.helper_name,u),f.registerHelper("languageTag",function(e){return function(){return e.getLanguage()}}(this)))},_getRegisterHelpersProxy:function(e){return function(n){return function(r){return n._registerHelpers(e,r)}}(this)},_prepareLanguageSpecificTranslator:function(e){var n;return n=(new o.Deferred).resolve().promise(),e in this._languageSpecificTranslatorsTrackers?n:(this._languageSpecificTranslatorsTrackers[e]=new a.Dependency,e in this._languageSpecificTranslators||(n=this._loadLanguage(e).done(function(n){return function(){return n._languageSpecificTranslators[e]=n._getSpecificLangTranslator(e),n._languageSpecificTranslatorsTrackers[e].changed()}}(this))),n)},_getPackageI18nextProxy:function(e){return function(n){return function(r,t,a){return null==a&&(a=null),null!=(null!=t?t.lang:void 0)&&null==(null!=t?t.lng:void 0)&&(t.lng=t.lang),null!=(null!=t?t.lng:void 0)&&null==a&&(a=t.lng,delete t.lng),null!=a?(n._prepareLanguageSpecificTranslator(a),n._languageSpecificTranslatorsTrackers[a].depend(),a in n._languageSpecificTranslators?n._languageSpecificTranslators[a](v._getPackageDomain(e)+":"+r,t):b.t(v._getPackageDomain(e)+":"+r,t)):(n._language_changed_tracker.depend(),b.t(v._getPackageDomain(e)+":"+r,t))}}(this)},_onceEnabled:function(){return this._registerHelpers(d.project_translations_domain)},_abortPreviousSetLang:null,setLanguage:function(e){var n,r;return r=this,"function"==typeof this._abortPreviousSetLang&&this._abortPreviousSetLang(),n=!1,this._abortPreviousSetLang=function(){return n=!0},this._loadLanguage(e).then(function(r){return function(){return n?void 0:(b.setLng(e),r._language_changed_tracker.changed(),s.set(r._loaded_lang_session_key,e))}}(this))},getLanguage:function(){var e;return this._enabled()?(e=s.get(this._loaded_lang_session_key),null!=e?e:this._fallback_language):null}}),h="object"==typeof h?h:{};var _=h;v=new v,"undefined"==typeof Package&&(Package={}),Package["tap:i18n"]={TAPi18next:b,TAPi18n:v}}();

!function(){var e=Package.meteor.Meteor,t=Package.blaze.Blaze,n=Package.blaze.UI,o=Package.blaze.Handlebars,i=Package.templating.Template,a=Package.htmljs.HTML,s=Package.spacebars.Spacebars;(function(){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.ui=e.ui||{};var t=e.ui.version="1.12.1";!function(){function t(e,t,n){return[parseFloat(e[0])*(d.test(e[0])?t/100:1),parseFloat(e[1])*(d.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function o(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var i,a=Math.max,s=Math.abs,c=/left|center|right/,l=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,d=/%$/,m=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==i)return i;var t,n,o=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=o.children()[0];return e("body").append(o),t=a.offsetWidth,o.css("overflow","scroll"),n=a.offsetWidth,t===n&&(n=o[0].clientWidth),o.remove(),i=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),o=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,a="scroll"===o||"auto"===o&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),o=e.isWindow(n[0]),i=!!n[0]&&9===n[0].nodeType,a=!o&&!i;return{element:n,isWindow:o,isDocument:i,offset:a?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(i){if(!i||!i.of)return m.apply(this,arguments);i=e.extend({},i);var d,f,p,h,g,x,v=e(i.of),b=e.position.getWithinInfo(i.within),y=e.position.getScrollInfo(b),$=(i.collision||"flip").split(" "),k={};return x=o(v),v[0].preventDefault&&(i.at="left top"),f=x.width,p=x.height,h=x.offset,g=e.extend({},h),e.each(["my","at"],function(){var e=(i[this]||"").split(" "),t,n;1===e.length&&(e=c.test(e[0])?e.concat(["center"]):l.test(e[0])?["center"].concat(e):["center","center"]),e[0]=c.test(e[0])?e[0]:"center",e[1]=l.test(e[1])?e[1]:"center",t=r.exec(e[0]),n=r.exec(e[1]),k[this]=[t?t[0]:0,n?n[0]:0],i[this]=[u.exec(e[0])[0],u.exec(e[1])[0]]}),1===$.length&&($[1]=$[0]),"right"===i.at[0]?g.left+=f:"center"===i.at[0]&&(g.left+=f/2),"bottom"===i.at[1]?g.top+=p:"center"===i.at[1]&&(g.top+=p/2),d=t(k.at,f,p),g.left+=d[0],g.top+=d[1],this.each(function(){var o,c,l=e(this),r=l.outerWidth(),u=l.outerHeight(),m=n(this,"marginLeft"),x=n(this,"marginTop"),M=r+m+n(this,"marginRight")+y.width,w=u+x+n(this,"marginBottom")+y.height,C=e.extend({},g),I=t(k.my,l.outerWidth(),l.outerHeight());"right"===i.my[0]?C.left-=r:"center"===i.my[0]&&(C.left-=r/2),"bottom"===i.my[1]?C.top-=u:"center"===i.my[1]&&(C.top-=u/2),C.left+=I[0],C.top+=I[1],o={marginLeft:m,marginTop:x},e.each(["left","top"],function(t,n){e.ui.position[$[t]]&&e.ui.position[$[t]][n](C,{targetWidth:f,targetHeight:p,elemWidth:r,elemHeight:u,collisionPosition:o,collisionWidth:M,collisionHeight:w,offset:[d[0]+I[0],d[1]+I[1]],my:i.my,at:i.at,within:b,elem:l})}),i.using&&(c=function(e){var t=h.left-C.left,n=t+f-r,o=h.top-C.top,c=o+p-u,d={target:{element:v,left:h.left,top:h.top,width:f,height:p},element:{element:l,left:C.left,top:C.top,width:r,height:u},horizontal:0>n?"left":t>0?"right":"center",vertical:0>c?"top":o>0?"bottom":"middle"};r>f&&s(t+n)<f&&(d.horizontal="center"),u>p&&s(o+c)<p&&(d.vertical="middle"),a(s(t),s(n))>a(s(o),s(c))?d.important="horizontal":d.important="vertical",i.using.call(this,e,d)}),l.offset(e.extend(C,{using:c}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,i=n.width,s=e.left-t.collisionPosition.marginLeft,c=o-s,l=s+t.collisionWidth-i-o,r;t.collisionWidth>i?c>0&&0>=l?(r=e.left+c+t.collisionWidth-i-o,e.left+=c-r):l>0&&0>=c?e.left=o:c>l?e.left=o+i-t.collisionWidth:e.left=o:c>0?e.left+=c:l>0?e.left-=l:e.left=a(e.left-s,e.left)},top:function(e,t){var n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,i=t.within.height,s=e.top-t.collisionPosition.marginTop,c=o-s,l=s+t.collisionHeight-i-o,r;t.collisionHeight>i?c>0&&0>=l?(r=e.top+c+t.collisionHeight-i-o,e.top+=c-r):l>0&&0>=c?e.top=o:c>l?e.top=o+i-t.collisionHeight:e.top=o:c>0?e.top+=c:l>0?e.top-=l:e.top=a(e.top-s,e.top)}},flip:{left:function(e,t){var n=t.within,o=n.offset.left+n.scrollLeft,i=n.width,a=n.isWindow?n.scrollLeft:n.offset.left,c=e.left-t.collisionPosition.marginLeft,l=c-a,r=c+t.collisionWidth-i-a,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,d="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,m=-2*t.offset[0],f,p;0>l?(f=e.left+u+d+m+t.collisionWidth-i-o,(0>f||f<s(l))&&(e.left+=u+d+m)):r>0&&(p=e.left-t.collisionPosition.marginLeft+u+d+m-a,(p>0||s(p)<r)&&(e.left+=u+d+m))},top:function(e,t){var n=t.within,o=n.offset.top+n.scrollTop,i=n.height,a=n.isWindow?n.scrollTop:n.offset.top,c=e.top-t.collisionPosition.marginTop,l=c-a,r=c+t.collisionHeight-i-a,u="top"===t.my[1],d=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,m="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1],p,h;0>l?(h=e.top+d+m+f+t.collisionHeight-i-o,(0>h||h<s(l))&&(e.top+=d+m+f)):r>0&&(p=e.top-t.collisionPosition.marginTop+d+m+f-a,(p>0||s(p)<r)&&(e.top+=d+m+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();var n=e.ui.position})}).call(this),function(){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function t(e){for(var t=e.split(/\s+/),n=[],o=0,i;i=t[o];o++)i=i.charAt(0).toUpperCase(),n.push(i);return n}function n(t){return t.id&&e('label[for="'+t.id+'"]').val()||t.name}function o(t,i,a){return a||(a=0),i.each(function(){var i=e(this),s=this,c=this.nodeName.toLowerCase(),l,r;switch("label"===c&&i.find("input, textarea, select").length&&(l=i.text(),i=i.children().first(),s=i.get(0),c=s.nodeName.toLowerCase()),c){case"menu":r={name:i.attr("label"),items:{}},a=o(r.items,i.children(),a);break;case"a":case"button":r={name:i.text(),disabled:!!i.attr("disabled"),callback:function(){return function(){i.get(0).click()}}()};break;case"menuitem":case"command":switch(i.attr("type")){case void 0:case"command":case"menuitem":r={name:i.attr("label"),disabled:!!i.attr("disabled"),icon:i.attr("icon"),callback:function(){return function(){i.get(0).click()}}()};break;case"checkbox":r={type:"checkbox",disabled:!!i.attr("disabled"),name:i.attr("label"),selected:!!i.attr("checked")};break;case"radio":r={type:"radio",disabled:!!i.attr("disabled"),name:i.attr("label"),radio:i.attr("radiogroup"),value:i.attr("id"),selected:!!i.attr("checked")};break;default:r=void 0}break;case"hr":r="-------";break;case"input":switch(i.attr("type")){case"text":r={type:"text",name:l||n(s),disabled:!!i.attr("disabled"),value:i.val()};break;case"checkbox":r={type:"checkbox",name:l||n(s),disabled:!!i.attr("disabled"),selected:!!i.attr("checked")};break;case"radio":r={type:"radio",name:l||n(s),disabled:!!i.attr("disabled"),radio:!!i.attr("name"),value:i.val(),selected:!!i.attr("checked")};break;default:r=void 0}break;case"select":r={type:"select",name:l||n(s),disabled:!!i.attr("disabled"),selected:i.val(),options:{}},i.children().each(function(){r.options[this.value]=e(this).text()});break;case"textarea":r={type:"textarea",name:l||n(s),disabled:!!i.attr("disabled"),value:i.val()};break;case"label":break;default:r={type:"html",html:i.clone(!0)}}r&&(a++,t["key"+a]=r)}),a}e.support.htmlMenuitem="HTMLMenuItemElement"in window,e.support.htmlCommand="HTMLCommandElement"in window,e.support.eventSelectstart="onselectstart"in document.documentElement,e.ui&&e.widget||(e.cleanData=function(t){return function(n){var o,i,a;for(a=0;null!=n[a];a++){i=n[a];try{o=e._data(i,"events"),o&&o.remove&&e(i).triggerHandler("remove")}catch(s){}}t(n)}}(e.cleanData));var i=null,a=!1,s=e(window),c=0,l={},r={},u={},d={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,hideOnSecondTrigger:!1,selectableSubMenu:!1,classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},determinePosition:function(t){if(e.ui&&e.ui.position)t.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var n=this.offset();n.top+=this.outerHeight(),n.left+=this.outerWidth()/2-t.outerWidth()/2,t.css(n)}},position:function(e,t,n){var o;if(!t&&!n)return void e.determinePosition.call(this,e.$menu);if("maintain"===t&&"maintain"===n)o=e.$menu.position();else{var i=e.$menu.offsetParent().offset();o={top:n-i.top,left:t-i.left}}var a=s.scrollTop()+s.height(),c=s.scrollLeft()+s.width(),l=e.$menu.outerHeight(),r=e.$menu.outerWidth();o.top+l>a&&(o.top-=l),o.top<0&&(o.top=0),o.left+r>c&&(o.left-=r),o.left<0&&(o.left=0),e.$menu.css(o)},positionSubmenu:function(t){if("undefined"!=typeof t)if(e.ui&&e.ui.position)t.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var n={top:-9,left:this.outerWidth()-5};t.css(n)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:e.noop,hide:e.noop,activated:e.noop},callback:null,items:{}},m={timer:null,pageX:null,pageY:null},f=function(e){for(var t=0,n=e;;)if(t=Math.max(t,parseInt(n.css("z-index"),10)||0),n=n.parent(),!n||!n.length||"html body".indexOf(n.prop("nodeName").toLowerCase())>-1)break;return t},p={abortevent:function(e){e.preventDefault(),e.stopImmediatePropagation()},contextmenu:function(t){var n=e(this);if("right"===t.data.trigger&&(t.preventDefault(),t.stopImmediatePropagation()),!("right"!==t.data.trigger&&"demand"!==t.data.trigger&&t.originalEvent||!("undefined"==typeof t.mouseButton||!t.data||"left"===t.data.trigger&&0===t.mouseButton||"right"===t.data.trigger&&2===t.mouseButton)||n.hasClass("context-menu-active")||n.hasClass("context-menu-disabled"))){if(i=n,t.data.build){var o=t.data.build(i,t);if(o===!1)return;if(t.data=e.extend(!0,{},d,t.data,o||{}),!t.data.items||e.isEmptyObject(t.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),new Error("No Items specified");t.data.$trigger=i,h.create(t.data)}h.show.call(n,t.data,t.pageX,t.pageY)}},click:function(t){t.preventDefault(),t.stopImmediatePropagation(),e(this).trigger(e.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))},mousedown:function(t){var n=e(this);i&&i.length&&!i.is(n)&&i.data("contextMenu").$menu.trigger("contextmenu:hide"),2===t.button&&(i=n.data("contextMenuActive",!0))},mouseup:function(t){var n=e(this);n.data("contextMenuActive")&&i&&i.length&&i.is(n)&&!n.hasClass("context-menu-disabled")&&(t.preventDefault(),t.stopImmediatePropagation(),i=n,n.trigger(e.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))),n.removeData("contextMenuActive")},mouseenter:function(t){var n=e(this),o=e(t.relatedTarget),a=e(document);o.is(".context-menu-list")||o.closest(".context-menu-list").length||i&&i.length||(m.pageX=t.pageX,m.pageY=t.pageY,m.data=t.data,a.on("mousemove.contextMenuShow",p.mousemove),m.timer=setTimeout(function(){m.timer=null,a.off("mousemove.contextMenuShow"),i=n,n.trigger(e.Event("contextmenu",{data:m.data,pageX:m.pageX,pageY:m.pageY}))},t.data.delay))},mousemove:function(e){m.pageX=e.pageX,m.pageY=e.pageY},mouseleave:function(t){var n=e(t.relatedTarget);if(!n.is(".context-menu-list")&&!n.closest(".context-menu-list").length){try{clearTimeout(m.timer)}catch(t){}m.timer=null}},layerClick:function(t){var n=e(this),o=n.data("contextMenuRoot"),i=t.button,a=t.pageX,c=t.pageY,l=void 0===a,r,u;t.preventDefault(),setTimeout(function(){if(l)return void(null!==o&&"undefined"!=typeof o&&null!==o.$menu&&"undefined"!=typeof o.$menu&&o.$menu.trigger("contextmenu:hide"));var n,d="left"===o.trigger&&0===i||"right"===o.trigger&&2===i;if(document.elementFromPoint&&o.$layer){if(o.$layer.hide(),r=document.elementFromPoint(a-s.scrollLeft(),c-s.scrollTop()),r.isContentEditable){var m=document.createRange(),f=window.getSelection();m.selectNode(r),m.collapse(!0),f.removeAllRanges(),f.addRange(m)}e(r).trigger(t),o.$layer.show()}if(o.hideOnSecondTrigger&&d&&null!==o.$menu&&"undefined"!=typeof o.$menu)return void o.$menu.trigger("contextmenu:hide");if(o.reposition&&d)if(document.elementFromPoint){if(o.$trigger.is(r))return void o.position.call(o.$trigger,o,a,c)}else if(u=o.$trigger.offset(),n=e(window),u.top+=n.scrollTop(),u.top<=t.pageY&&(u.left+=n.scrollLeft(),u.left<=t.pageX&&(u.bottom=u.top+o.$trigger.outerHeight(),u.bottom>=t.pageY&&(u.right=u.left+o.$trigger.outerWidth(),u.right>=t.pageX))))return void o.position.call(o.$trigger,o,a,c);r&&d&&o.$trigger.one("contextmenu:hidden",function(){e(r).contextMenu({x:a,y:c,button:i})}),null!==o&&"undefined"!=typeof o&&null!==o.$menu&&"undefined"!=typeof o.$menu&&o.$menu.trigger("contextmenu:hide")},50)},keyStop:function(e,t){t.isInput||e.preventDefault(),e.stopPropagation()},key:function(e){var t={};i&&(t=i.data("contextMenu")||{}),"undefined"==typeof t.zIndex&&(t.zIndex=0);var n=0,o=function(e){""!==e.style.zIndex?n=e.style.zIndex:null!==e.offsetParent&&"undefined"!=typeof e.offsetParent?o(e.offsetParent):null!==e.parentElement&&"undefined"!=typeof e.parentElement&&o(e.parentElement)};if(o(e.target),!(t.$menu&&parseInt(n,10)>parseInt(t.$menu.css("zIndex"),10))){switch(e.keyCode){case 9:case 38:if(p.keyStop(e,t),t.isInput){if(9===e.keyCode&&e.shiftKey)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void(null!==t.$menu&&"undefined"!=typeof t.$menu&&t.$menu.trigger("prevcommand"));if(38===e.keyCode&&"checkbox"===t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault()}else if(9!==e.keyCode||e.shiftKey)return void(null!==t.$menu&&"undefined"!=typeof t.$menu&&t.$menu.trigger("prevcommand"));break;case 40:if(p.keyStop(e,t),!t.isInput)return void(null!==t.$menu&&"undefined"!=typeof t.$menu&&t.$menu.trigger("nextcommand"));if(9===e.keyCode)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void(null!==t.$menu&&"undefined"!=typeof t.$menu&&t.$menu.trigger("nextcommand"));if(40===e.keyCode&&"checkbox"===t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault();break;case 37:if(p.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;if(!t.$selected.parent().hasClass("context-menu-root")){var a=t.$selected.parent().parent();return t.$selected.trigger("contextmenu:blur"),void(t.$selected=a)}break;case 39:if(p.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;var s=t.$selected.data("contextMenu")||{};if(s.$menu&&t.$selected.hasClass("context-menu-submenu"))return t.$selected=null,s.$selected=null,void s.$menu.trigger("nextcommand");break;case 35:case 36:return t.$selected&&t.$selected.find("input, textarea, select").length?void 0:((t.$selected&&t.$selected.parent()||t.$menu).children(":not(."+t.classNames.disabled+", ."+t.classNames.notSelectable+")")[36===e.keyCode?"first":"last"]().trigger("contextmenu:focus"),void e.preventDefault());break;case 13:if(p.keyStop(e,t),t.isInput){if(t.$selected&&!t.$selected.is("textarea, select"))return void e.preventDefault();break}return void("undefined"!=typeof t.$selected&&null!==t.$selected&&t.$selected.trigger("mouseup"));case 32:case 33:case 34:return void p.keyStop(e,t);case 27:return p.keyStop(e,t),void(null!==t.$menu&&"undefined"!=typeof t.$menu&&t.$menu.trigger("contextmenu:hide"));default:var c=String.fromCharCode(e.keyCode).toUpperCase();if(t.accesskeys&&t.accesskeys[c])return void t.accesskeys[c].$node.trigger(t.accesskeys[c].$menu?"contextmenu:focus":"mouseup")}e.stopPropagation(),"undefined"!=typeof t.$selected&&null!==t.$selected&&t.$selected.trigger(e)}},prevItem:function(t){t.stopPropagation();var n=e(this).data("contextMenu")||{},o=e(this).data("contextMenuRoot")||{};if(n.$selected){var i=n.$selected;n=n.$selected.parent().data("contextMenu")||{},n.$selected=i}for(var a=n.$menu.children(),s=n.$selected&&n.$selected.prev().length?n.$selected.prev():a.last(),c=s;s.hasClass(o.classNames.disabled)||s.hasClass(o.classNames.notSelectable)||s.is(":hidden");)if(s=s.prev().length?s.prev():a.last(),s.is(c))return;n.$selected&&p.itemMouseleave.call(n.$selected.get(0),t),p.itemMouseenter.call(s.get(0),t);var l=s.find("input, textarea, select");l.length&&l.focus()},nextItem:function(t){t.stopPropagation();var n=e(this).data("contextMenu")||{},o=e(this).data("contextMenuRoot")||{};if(n.$selected){var i=n.$selected;n=n.$selected.parent().data("contextMenu")||{},n.$selected=i}for(var a=n.$menu.children(),s=n.$selected&&n.$selected.next().length?n.$selected.next():a.first(),c=s;s.hasClass(o.classNames.disabled)||s.hasClass(o.classNames.notSelectable)||s.is(":hidden");)if(s=s.next().length?s.next():a.first(),s.is(c))return;n.$selected&&p.itemMouseleave.call(n.$selected.get(0),t),p.itemMouseenter.call(s.get(0),t);var l=s.find("input, textarea, select");l.length&&l.focus()},focusInput:function(){var t=e(this).closest(".context-menu-item"),n=t.data(),o=n.contextMenu,i=n.contextMenuRoot;i.$selected=o.$selected=t,i.isInput=o.isInput=!0},blurInput:function(){var t=e(this).closest(".context-menu-item"),n=t.data(),o=n.contextMenu,i=n.contextMenuRoot;i.isInput=o.isInput=!1},menuMouseenter:function(){var t=e(this).data().contextMenuRoot;t.hovering=!0},menuMouseleave:function(t){var n=e(this).data().contextMenuRoot;n.$layer&&n.$layer.is(t.relatedTarget)&&(n.hovering=!1)},itemMouseenter:function(t){var n=e(this),o=n.data(),i=o.contextMenu,a=o.contextMenuRoot;return a.hovering=!0,t&&a.$layer&&a.$layer.is(t.relatedTarget)&&(t.preventDefault(),t.stopImmediatePropagation()),(i.$menu?i:a).$menu.children("."+a.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur"),n.hasClass(a.classNames.disabled)||n.hasClass(a.classNames.notSelectable)?void(i.$selected=null):void n.trigger("contextmenu:focus")},itemMouseleave:function(t){var n=e(this),o=n.data(),i=o.contextMenu,a=o.contextMenuRoot;return a!==i&&a.$layer&&a.$layer.is(t.relatedTarget)?("undefined"!=typeof a.$selected&&null!==a.$selected&&a.$selected.trigger("contextmenu:blur"),t.preventDefault(),t.stopImmediatePropagation(),void(a.$selected=i.$selected=i.$node)):void(i&&i.$menu&&i.$menu.hasClass("context-menu-visible")||n.trigger("contextmenu:blur"))},itemClick:function(t){var n=e(this),o=n.data(),i=o.contextMenu,a=o.contextMenuRoot,s=o.contextMenuKey,c;if(!(!i.items[s]||n.is("."+a.classNames.disabled+", .context-menu-separator, ."+a.classNames.notSelectable)||n.is(".context-menu-submenu")&&a.selectableSubMenu===!1)){if(t.preventDefault(),t.stopImmediatePropagation(),e.isFunction(i.callbacks[s])&&Object.prototype.hasOwnProperty.call(i.callbacks,s))c=i.callbacks[s];else{if(!e.isFunction(a.callback))return;c=a.callback}c.call(a.$trigger,s,a,t)!==!1?a.$menu.trigger("contextmenu:hide"):a.$menu.parent().length&&h.update.call(a.$trigger,a)}},inputClick:function(e){e.stopImmediatePropagation()},hideMenu:function(t,n){var o=e(this).data("contextMenuRoot");h.hide.call(o.$trigger,o,n&&n.force)},focusItem:function(t){t.stopPropagation();var n=e(this),o=n.data(),i=o.contextMenu,a=o.contextMenuRoot;n.hasClass(a.classNames.disabled)||n.hasClass(a.classNames.notSelectable)||(n.addClass([a.classNames.hover,a.classNames.visible].join(" ")).parent().find(".context-menu-item").not(n).removeClass(a.classNames.visible).filter("."+a.classNames.hover).trigger("contextmenu:blur"),i.$selected=a.$selected=n,i&&i.$node&&i.$node.hasClass("context-menu-submenu")&&i.$node.addClass(a.classNames.hover),i.$node&&a.positionSubmenu.call(i.$node,i.$menu))},blurItem:function(t){t.stopPropagation();var n=e(this),o=n.data(),i=o.contextMenu,a=o.contextMenuRoot;i.autoHide&&n.removeClass(a.classNames.visible),n.removeClass(a.classNames.hover),i.$selected=null}},h={show:function(t,n,o){var a=e(this),s={};if(e("#context-menu-layer").trigger("mousedown"),t.$trigger=a,t.events.show.call(a,t)===!1)return void(i=null);var c=h.update.call(a,t);if(c===!1)return void(i=null);if(t.position.call(a,t,n,o),t.zIndex){var l=t.zIndex;"function"==typeof t.zIndex&&(l=t.zIndex.call(a,t)),s.zIndex=f(a)+l}h.layer.call(t.$menu,t,s.zIndex),t.$menu.find("ul").css("zIndex",s.zIndex+1),t.$menu.css(s)[t.animation.show](t.animation.duration,function(){a.trigger("contextmenu:visible"),h.activated(t),t.events.activated(t)}),a.data("contextMenu",t).addClass("context-menu-active"),e(document).off("keydown.contextMenu").on("keydown.contextMenu",p.key),t.autoHide&&e(document).on("mousemove.contextMenuAutoHide",function(e){var n=a.offset();n.right=n.left+a.outerWidth(),n.bottom=n.top+a.outerHeight(),!t.$layer||t.hovering||e.pageX>=n.left&&e.pageX<=n.right&&e.pageY>=n.top&&e.pageY<=n.bottom||setTimeout(function(){t.hovering||null===t.$menu||"undefined"==typeof t.$menu||t.$menu.trigger("contextmenu:hide")},50)})},hide:function(t,n){var o=e(this);if(t||(t=o.data("contextMenu")||{}),n||!t.events||t.events.hide.call(o,t)!==!1){if(o.removeData("contextMenu").removeClass("context-menu-active"),t.$layer){setTimeout(function(e){return function(){e.remove()}}(t.$layer),10);try{delete t.$layer}catch(a){t.$layer=null}}i=null,t.$menu.find("."+t.classNames.hover).trigger("contextmenu:blur"),t.$selected=null,t.$menu.find("."+t.classNames.visible).removeClass(t.classNames.visible),e(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),t.$menu&&t.$menu[t.animation.hide](t.animation.duration,function(){t.build&&(t.$menu.remove(),e.each(t,function(e){switch(e){case"ns":case"selector":case"build":case"trigger":return!0;default:t[e]=void 0;try{delete t[e]}catch(n){}return!0}})),setTimeout(function(){o.trigger("contextmenu:hidden")},10)})}},create:function(n,o){function i(t){var n=e("<span></span>");if(t._accesskey)t._beforeAccesskey&&n.append(document.createTextNode(t._beforeAccesskey)),e("<span></span>").addClass("context-menu-accesskey").text(t._accesskey).appendTo(n),t._afterAccesskey&&n.append(document.createTextNode(t._afterAccesskey));else if(t.isHtmlName){if("undefined"!=typeof t.accesskey)throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");n.html(t.name)}else n.text(t.name);return n}"undefined"==typeof o&&(o=n),n.$menu=e('<ul class="context-menu-list"></ul>').addClass(n.className||"").data({contextMenu:n,contextMenuRoot:o}),e.each(["callbacks","commands","inputs"],function(e,t){n[t]={},o[t]||(o[t]={})}),o.accesskeys||(o.accesskeys={}),e.each(n.items,function(a,s){var c=e('<li class="context-menu-item"></li>').addClass(s.className||""),l=null,r=null;if(c.on("click",e.noop),("string"==typeof s||"cm_separator"===s.type)&&(s={type:"cm_seperator"}),s.$node=c.data({contextMenu:n,contextMenuRoot:o,contextMenuKey:a}),"undefined"!=typeof s.accesskey)for(var d=t(s.accesskey),m=0,f;f=d[m];m++)if(!o.accesskeys[f]){o.accesskeys[f]=s;var g=s.name.match(new RegExp("^(.*?)("+f+")(.*)$","i"));g&&(s._beforeAccesskey=g[1],s._accesskey=g[2],s._afterAccesskey=g[3]);break}if(s.type&&u[s.type])u[s.type].call(c,s,n,o),e.each([n,o],function(t,o){o.commands[a]=s,!e.isFunction(s.callback)||"undefined"!=typeof o.callbacks[a]&&"undefined"!=typeof n.type||(o.callbacks[a]=s.callback)});else{switch("cm_seperator"===s.type?c.addClass("context-menu-separator "+o.classNames.notSelectable):"html"===s.type?c.addClass("context-menu-html "+o.classNames.notSelectable):"sub"===s.type||(s.type?(l=e("<label></label>").appendTo(c),i(s).appendTo(l),c.addClass("context-menu-input"),n.hasTypes=!0,e.each([n,o],function(e,t){t.commands[a]=s,t.inputs[a]=s})):s.items&&(s.type="sub")),s.type){case"cm_seperator":break;case"text":r=e('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+a).val(s.value||"").appendTo(l);break;case"textarea":r=e('<textarea name=""></textarea>').attr("name","context-menu-input-"+a).val(s.value||"").appendTo(l),s.height&&r.height(s.height);break;case"checkbox":r=e('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+a).val(s.value||"").prop("checked",!!s.selected).prependTo(l);break;case"radio":r=e('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+s.radio).val(s.value||"").prop("checked",!!s.selected).prependTo(l);break;case"select":r=e('<select name=""></select>').attr("name","context-menu-input-"+a).appendTo(l),s.options&&(e.each(s.options,function(t,n){e("<option></option>").val(t).text(n).appendTo(r)}),r.val(s.selected));break;case"sub":i(s).appendTo(c),s.appendTo=s.$node,c.data("contextMenu",s).addClass("context-menu-submenu"),s.callback=null,"function"==typeof s.items.then?h.processPromises(s,o,s.items):h.create(s,o);break;case"html":e(s.html).appendTo(c);break;default:e.each([n,o],function(t,o){o.commands[a]=s,!e.isFunction(s.callback)||"undefined"!=typeof o.callbacks[a]&&"undefined"!=typeof n.type||(o.callbacks[a]=s.callback)}),i(s).appendTo(c)}s.type&&"sub"!==s.type&&"html"!==s.type&&"cm_seperator"!==s.type&&(r.on("focus",p.focusInput).on("blur",p.blurInput),s.events&&r.on(s.events,n)),s.icon&&(e.isFunction(s.icon)?s._icon=s.icon.call(this,this,c,a,s):"string"==typeof s.icon&&"fa-"===s.icon.substring(0,3)?s._icon=o.classNames.icon+" "+o.classNames.icon+"--fa fa "+s.icon:s._icon=o.classNames.icon+" "+o.classNames.icon+"-"+s.icon,c.addClass(s._icon))}s.$input=r,s.$label=l,c.appendTo(n.$menu),!n.hasTypes&&e.support.eventSelectstart&&c.on("selectstart.disableTextSelect",p.abortevent)}),n.$node||n.$menu.css("display","none").addClass("context-menu-root"),n.$menu.appendTo(n.appendTo||document.body)},resize:function(t,n){var o;t.css({position:"absolute",display:"block"}),t.data("width",(o=t.get(0)).getBoundingClientRect?Math.ceil(o.getBoundingClientRect().width):t.outerWidth()+1),t.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),t.find("> li > ul").each(function(){h.resize(e(this),!0)}),n||t.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return e(this).data("width")})},update:function(t,n){var o=this;"undefined"==typeof n&&(n=t,h.resize(t.$menu));var i=!1;return t.$menu.children().each(function(){var a=e(this),s=a.data("contextMenuKey"),c=t.items[s],l=e.isFunction(c.disabled)&&c.disabled.call(o,s,n)||c.disabled===!0,r;if(r=e.isFunction(c.visible)?c.visible.call(o,s,n):"undefined"!=typeof c.visible?c.visible===!0:!0,r&&(i=!0),a[r?"show":"hide"](),a[l?"addClass":"removeClass"](n.classNames.disabled),e.isFunction(c.icon)&&(a.removeClass(c._icon),c._icon=c.icon.call(this,o,a,s,c),a.addClass(c._icon)),c.type)switch(a.find("input, select, textarea").prop("disabled",l),c.type){case"text":case"textarea":c.$input.val(c.value||"");break;case"checkbox":case"radio":c.$input.val(c.value||"").prop("checked",!!c.selected);break;case"select":c.$input.val((0===c.selected?"0":c.selected)||"")}if(c.$menu){var u=h.update.call(o,c,n);u&&(i=!0)}}),i},layer:function(t,n){var o=t.$layer=e('<div id="context-menu-layer"></div>').css({height:s.height(),width:s.width(),display:"block",position:"fixed","z-index":n,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",t).insertBefore(this).on("contextmenu",p.abortevent).on("mousedown",p.layerClick);return"undefined"==typeof document.body.style.maxWidth&&o.css({position:"absolute",height:e(document).height()}),o},processPromises:function(e,t,n){function o(e,t,n){"undefined"==typeof n&&i(void 0),a(e,t,n)}function i(e,t,n){"undefined"==typeof n?(n={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):"string"==typeof n&&(n={error:{name:n}}),a(e,t,n)}function a(e,t,n){"undefined"!=typeof t.$menu&&t.$menu.is(":visible")&&(e.$node.removeClass(t.classNames.iconLoadingClass),e.items=n,h.create(e,t,!0),h.update(e,t),t.positionSubmenu.call(e.$node,e.$menu))}e.$node.addClass(t.classNames.iconLoadingClass),n.then(o.bind(this,e,t),i.bind(this,e,t))},activated:function(t){var n=t.$menu,o=n.offset(),i=e(window).height(),a=e(window).scrollTop(),s=n.height();s>i?n.css({height:i+"px","overflow-x":"hidden","overflow-y":"auto",top:a+"px"}):(o.top<a||o.top+s>a+i)&&n.css({top:"0px"})}};e.fn.contextMenu=function(t){var n=this,o=t;if(this.length>0)if("undefined"==typeof t)this.first().trigger("contextmenu");else if("undefined"!=typeof t.x&&"undefined"!=typeof t.y)this.first().trigger(e.Event("contextmenu",{pageX:t.x,pageY:t.y,mouseButton:t.button}));else if("hide"===t){var i=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;i&&i.trigger("contextmenu:hide")}else"destroy"===t?e.contextMenu("destroy",{context:this}):e.isPlainObject(t)?(t.context=this,e.contextMenu("create",t)):t?this.removeClass("context-menu-disabled"):t||this.addClass("context-menu-disabled");else e.each(r,function(){this.selector===n.selector&&(o.data=this,e.extend(o.data,{trigger:"demand"}))}),p.contextmenu.call(o.target,o);return this},e.contextMenu=function(t,n){"string"!=typeof t&&(n=t,t="create"),"string"==typeof n?n={selector:n}:"undefined"==typeof n&&(n={});var o=e.extend(!0,{},d,n||{}),i=e(document),s=i,u=!1;switch(o.context&&o.context.length?(s=e(o.context).first(),o.context=s.get(0),u=!e(o.context).is(document)):o.context=document,t){case"update":if(u)h.update(s);else for(var m in r)r.hasOwnProperty(m)&&h.update(r[m]);break;case"create":if(!o.selector)throw new Error("No selector specified");if(o.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+o.selector+'" as it contains a reserved className');if(!o.build&&(!o.items||e.isEmptyObject(o.items)))throw new Error("No Items specified");if(c++,o.ns=".contextMenu"+c,u||(l[o.selector]=o.ns),r[o.ns]=o,o.trigger||(o.trigger="right"),!a){var f="click"===o.itemClickEvent?"click.contextMenu":"mouseup.contextMenu",g={"contextmenu:focus.contextMenu":p.focusItem,"contextmenu:blur.contextMenu":p.blurItem,"contextmenu.contextMenu":p.abortevent,"mouseenter.contextMenu":p.itemMouseenter,"mouseleave.contextMenu":p.itemMouseleave};g[f]=p.itemClick,i.on({"contextmenu:hide.contextMenu":p.hideMenu,"prevcommand.contextMenu":p.prevItem,"nextcommand.contextMenu":p.nextItem,"contextmenu.contextMenu":p.abortevent,"mouseenter.contextMenu":p.menuMouseenter,"mouseleave.contextMenu":p.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",p.inputClick).on(g,".context-menu-item"),a=!0}switch(s.on("contextmenu"+o.ns,o.selector,o,p.contextmenu),u&&s.on("remove"+o.ns,function(){e(this).contextMenu("destroy")}),o.trigger){case"hover":s.on("mouseenter"+o.ns,o.selector,o,p.mouseenter).on("mouseleave"+o.ns,o.selector,o,p.mouseleave);break;case"left":s.on("click"+o.ns,o.selector,o,p.click);break;case"touchstart":s.on("touchstart"+o.ns,o.selector,o,p.click)}o.build||h.create(o);break;case"destroy":var x;

if(u){var v=o.context;e.each(r,function(t,n){if(!n)return!0;if(!e(v).is(n.selector))return!0;x=e(".context-menu-list").filter(":visible"),x.length&&x.data().contextMenuRoot.$trigger.is(e(n.context).find(n.selector))&&x.trigger("contextmenu:hide",{force:!0});try{r[n.ns].$menu&&r[n.ns].$menu.remove(),delete r[n.ns]}catch(o){r[n.ns]=null}return e(n.context).off(n.ns),!0})}else if(o.selector){if(l[o.selector]){x=e(".context-menu-list").filter(":visible"),x.length&&x.data().contextMenuRoot.$trigger.is(o.selector)&&x.trigger("contextmenu:hide",{force:!0});try{r[l[o.selector]].$menu&&r[l[o.selector]].$menu.remove(),delete r[l[o.selector]]}catch(b){r[l[o.selector]]=null}i.off(l[o.selector])}}else i.off(".contextMenu .contextMenuAutoHide"),e.each(r,function(t,n){e(n.context).off(n.ns)}),l={},r={},c=0,a=!1,e("#context-menu-layer, .context-menu-list").remove();break;case"html5":(!e.support.htmlCommand&&!e.support.htmlMenuitem||"boolean"==typeof n&&n)&&e('menu[type="context"]').each(function(){this.id&&e.contextMenu({selector:"[contextmenu="+this.id+"]",items:e.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+t+'"')}return this},e.contextMenu.setInputValues=function(t,n){"undefined"==typeof n&&(n={}),e.each(t.inputs,function(e,t){switch(t.type){case"text":case"textarea":t.value=n[e]||"";break;case"checkbox":t.selected=n[e]?!0:!1;break;case"radio":t.selected=(n[t.radio]||"")===t.value;break;case"select":t.selected=n[e]||""}})},e.contextMenu.getInputValues=function(t,n){return"undefined"==typeof n&&(n={}),e.each(t.inputs,function(e,t){switch(t.type){case"text":case"textarea":case"select":n[e]=t.$input.val();break;case"checkbox":n[e]=t.$input.prop("checked");break;case"radio":t.$input.prop("checked")&&(n[t.radio]=t.value)}}),n},e.contextMenu.fromMenu=function(t){var n=e(t),i={};return o(i,n.children()),i},e.contextMenu.defaults=d,e.contextMenu.types=u,e.contextMenu.handle=p,e.contextMenu.op=h,e.contextMenu.menus=r})}.call(this),"undefined"==typeof Package&&(Package={}),Package["smallhacks:jquery-contextmenu"]={}}();

!function(){var a=Package.meteor.Meteor,o;(function(){(function(){o=function(){function a(a){return a.replace(/[^A-Za-z0-9]/g,function(a){return o[a]||a})}var o={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"ET","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"D","":"F","":"G","":"R","":"S","":"T","":"IS","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"E","":"O","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"C","":"E","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"A","":"L","":"M","":"V","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"IJ","":"OE","":"A","":"AE","":"B","":"B","":"C","":"D","":"E","":"F","":"G","":"G","":"H","":"I","":"R","":"J","":"K","":"L","":"L","":"M","":"N","":"O","":"OE","":"O","":"OU","":"P","":"R","":"N","":"R","":"S","":"T","":"E","":"R","":"U","":"V","":"W","":"Y","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"o","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"i","":"j","":"j","":"j","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"et","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"d","":"f","":"g","":"r","":"s","":"t","":"is","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"s","":"s","":"s","":"s","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"oo","":"e","":"e","":"o","":"o","":"ou","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"c","":"c","":"e","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"g","":"o","":"o","":"u","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"th","":"a","":"ae","":"e","":"g","":"h","":"h","":"h","":"i","":"k","":"l","":"m","":"m","":"oe","":"r","":"r","":"r","":"r","":"t","":"v","":"w","":"y","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"ue","":"um","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"ff","":"ffi","":"ffl","":"fi","":"fl","":"ij","":"oe","":"st","":"a","":"e","":"i","":"j","":"o","":"r","":"u","":"v","":"x"};return a}()}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["fds:latinize"]={latinize:o}}();

!function(){var t=Package.meteor.Meteor,e;(function(){e=function(t){e.Util.assign(this,t),this.matchValidator=new e.MatchValidator},e.prototype={constructor:e,urls:!0,email:!0,twitter:!0,newWindow:!0,stripPrefix:!0,className:"",htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,matcherRegex:function(){var t=/(^|[^\w])@(\w{1,15})/,e=/(?:[\-;:&=\+\$,\w\.]+@)/,r=/(?:[A-Za-z][-.+A-Za-z0-9]+:(?![A-Za-z][-.+A-Za-z0-9]+:\/\/)(?!\d+\/?)(?:\/\/)?)/,n=/(?:www\.)/,i=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,s=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,a=/((?:\([0-9]{1,3}\)|[0-9]{2})[ \-]*?[0-9]{4,5}(?:[\-\s\_]{1,2})?[0-9]{4}(?:(?=[^0-9])|$)|[0-9]{4,5}(?:[\-\s\_]{1,2})?[0-9]{4}(?:(?=[^0-9])|$))/,o=/[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]?!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]]/;return new RegExp(["(",t.source,")","|","(",e.source,i.source,s.source,")","|","(","(?:","(",r.source,i.source,")","|","(?:","(.?//)?",n.source,i.source,")","|","(?:","(.?//)?",i.source,s.source,")",")","(?:"+o.source+")?",")","|","(",a.source,")"].join(""),"gi")}(),charBeforeProtocolRelMatchRegex:/^(.)?\/\//,link:function(t){var r=this,n=this.getHtmlParser(),i=this.htmlCharacterEntitiesRegex,s=0,a=[];return n.parse(t,{processHtmlNode:function(t,e,r){"a"===e&&(r?s=Math.max(s-1,0):s++),a.push(t)},processTextNode:function(t){if(0===s)for(var n=e.Util.splitAndCapture(t,i),o=0,c=n.length;c>o;o++){var l=n[o],h=r.processTextNode(l);a.push(h)}else a.push(t)}}),a.join("")},getHtmlParser:function(){var t=this.htmlParser;return t||(t=this.htmlParser=new e.HtmlParser),t},getTagBuilder:function(){var t=this.tagBuilder;return t||(t=this.tagBuilder=new e.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),t},processTextNode:function(t){var e=this;return t.replace(this.matcherRegex,function(t,r,n,i,s,a,o,c,l,h){var u=e.processCandidateMatch(t,r,n,i,s,a,o,c,l,h);if(u){var g=e.createMatchReturnVal(u.match,u.matchStr);return u.prefixStr+g+u.suffixStr}return t})},processCandidateMatch:function(t,r,n,i,s,a,o,c,l,h){var u=c||l,g,m="",f="";if(r&&!this.twitter||s&&!this.email||a&&!this.urls||!this.matchValidator.isValidMatch(a,o,u))return null;if(this.matchHasUnbalancedClosingParen(t)&&(t=t.substr(0,t.length-1),f=")"),s)g=new e.match.Email({matchedText:t,email:s});else if(r)n&&(m=n,t=t.slice(1)),g=new e.match.Twitter({matchedText:t,twitterHandle:i});else if(h)g=new e.match.Phone({matchedText:t,phone:h});else{if(u){var p=u.match(this.charBeforeProtocolRelMatchRegex)[1]||"";p&&(m=p,t=t.slice(1))}g=new e.match.Url({matchedText:t,url:t,protocolUrlMatch:!!o,protocolRelativeMatch:!!u,stripPrefix:this.stripPrefix})}return{prefixStr:m,suffixStr:f,matchStr:t,match:g}},matchHasUnbalancedClosingParen:function(t){var e=t.charAt(t.length-1);if(")"===e){var r=t.match(/\(/g),n=t.match(/\)/g),i=r&&r.length||0,s=n&&n.length||0;if(s>i)return!0}return!1},createMatchReturnVal:function(t,r){var n;if(this.replaceFn&&(n=this.replaceFn.call(this,this,t)),"string"==typeof n)return n;if(n===!1)return r;if(n instanceof e.HtmlTag)return n.toString();var i=this.getTagBuilder(),s=i.build(t);return s.toString()}},e.link=function(t,r){var n=new e(r);return n.link(t)},e.match={},e.Util={abstractMethod:function(){throw"abstract"},assign:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},extend:function(t,r){var n=t.prototype,i=function(){};i.prototype=n;var s;s=r.hasOwnProperty("constructor")?r.constructor:function(){n.constructor.apply(this,arguments)};var a=s.prototype=new i;return a.constructor=s,a.superclass=n,delete r.constructor,e.Util.assign(a,r),s},ellipsis:function(t,e,r){return t.length>e&&(r=null==r?"..":r,t=t.substring(0,e-r.length)+r),t},indexOf:function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1},splitAndCapture:function(t,e){if(!e.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var r=[],n=0,i;i=e.exec(t);)r.push(t.substring(n,i.index)),r.push(i[0]),n=i.index+i[0].length;return r.push(t.substring(n)),r}},e.HtmlParser=e.Util.extend(Object,{htmlRegex:function(){var t=/[0-9a-zA-Z][0-9a-zA-Z:]*/,e=/[^\s\0"'>\/=\x01-\x1F\x7F]+/,r=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,n=e.source+"(?:\\s*=\\s*"+r.source+")?";return new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",n,"|",r.source+")",")*",">",")","|","(?:","<(/)?","("+t.source+")","(?:","\\s+",n,")*","\\s*/?",">",")"].join(""),"gi")}(),parse:function(t,e){e=e||{};for(var r=e.processHtmlNode||function(){},n=e.processTextNode||function(){},i=this.htmlRegex,s,a=0;null!==(s=i.exec(t));){var o=s[0],c=s[1]||s[3],l=!!s[2],h=t.substring(a,s.index);h&&n(h),r(o,c.toLowerCase(),l),a=s.index+o.length}if(a<t.length){var u=t.substring(a);u&&n(u)}}}),e.HtmlTag=e.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(t){e.Util.assign(this,t),this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(t){return this.tagName=t,this},getTagName:function(){return this.tagName||""},setAttr:function(t,e){var r=this.getAttrs();return r[t]=e,this},getAttr:function(t){return this.getAttrs()[t]},setAttrs:function(t){var r=this.getAttrs();return e.Util.assign(r,t),this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(t){return this.setAttr("class",t)},addClass:function(t){for(var r=this.getClass(),n=this.whitespaceRegex,i=e.Util.indexOf,s=r?r.split(n):[],a=t.split(n),o;o=a.shift();)-1===i(s,o)&&s.push(o);return this.getAttrs()["class"]=s.join(" "),this},removeClass:function(t){for(var r=this.getClass(),n=this.whitespaceRegex,i=e.Util.indexOf,s=r?r.split(n):[],a=t.split(n),o;s.length&&(o=a.shift());){var c=i(s,o);-1!==c&&s.splice(c,1)}return this.getAttrs()["class"]=s.join(" "),this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(t){return-1!==(" "+this.getClass()+" ").indexOf(" "+t+" ")},setInnerHtml:function(t){return this.innerHtml=t,this},getInnerHtml:function(){return this.innerHtml||""},toString:function(){var t=this.getTagName(),e=this.buildAttrsStr();return e=e?" "+e:"",["<",t,e,">",this.getInnerHtml(),"</",t,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var t=this.getAttrs(),e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+'="'+t[r]+'"');return e.join(" ")}}),e.MatchValidator=e.Util.extend(Object,{invalidProtocolRelMatchRegex:/^[\w]\/\//,hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]+:\/\//,uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]+:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z]/,isValidMatch:function(t,e,r){return e&&!this.isValidUriScheme(e)||this.urlMatchDoesNotHaveProtocolOrDot(t,e)||this.urlMatchDoesNotHaveAtLeastOneWordChar(t,e)||this.isInvalidProtocolRelativeMatch(r)?!1:!0},isValidUriScheme:function(t){var e=t.match(this.uriSchemeRegex)[0].toLowerCase();return"javascript:"!==e&&"vbscript:"!==e},urlMatchDoesNotHaveProtocolOrDot:function(t,e){return!(!t||e&&this.hasFullProtocolRegex.test(e)||-1!==t.indexOf("."))},urlMatchDoesNotHaveAtLeastOneWordChar:function(t,e){return t&&e?!this.hasWordCharAfterProtocolRegex.test(t):!1},isInvalidProtocolRelativeMatch:function(t){return!!t&&this.invalidProtocolRelMatchRegex.test(t)}}),e.AnchorTagBuilder=e.Util.extend(Object,{constructor:function(t){e.Util.assign(this,t)},build:function(t){var r=new e.HtmlTag({tagName:"a",attrs:this.createAttrs(t.getType(),t.getAnchorHref()),innerHtml:this.processAnchorText(t.getAnchorText())});return r},createAttrs:function(t,e){var r={href:e},n=this.createCssClass(t);return n&&(r["class"]=n),this.newWindow&&(r.target="_blank"),r},createCssClass:function(t){var e=this.className;return e?e+" "+e+"-"+t:""},processAnchorText:function(t){return t=this.doTruncate(t)},doTruncate:function(t){return e.Util.ellipsis(t,this.truncate||Number.POSITIVE_INFINITY)}}),e.match.Match=e.Util.extend(Object,{constructor:function(t){e.Util.assign(this,t)},getType:e.Util.abstractMethod,getMatchedText:function(){return this.matchedText},getAnchorHref:e.Util.abstractMethod,getAnchorText:e.Util.abstractMethod}),e.match.Email=e.Util.extend(e.match.Match,{getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+this.email},getAnchorText:function(){return this.email}}),e.match.Twitter=e.Util.extend(e.match.Match,{getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}}),e.match.Url=e.Util.extend(e.match.Match,{urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrl:function(){var t=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(t=this.url="http://"+t,this.protocolPrepended=!0),t},getAnchorHref:function(){var t=this.getUrl();return t.replace(/&amp;/g,"&")},getAnchorText:function(){var t=this.getUrl();return this.protocolRelativeMatch&&(t=this.stripProtocolRelativePrefix(t)),this.stripPrefix&&(t=this.stripUrlPrefix(t)),t=this.removeTrailingSlash(t)},stripUrlPrefix:function(t){return t.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(t){return t.replace(this.protocolRelativeRegex,"")},removeTrailingSlash:function(t){return"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t}}),e.match.Phone=e.Util.extend(e.match.Match,{getType:function(){return"phone"},getAnchorHref:function(){return"tel:"+this.phone},getAnchorText:function(){return this.phone}})}).call(this),function(){if(Package.templating){var t=Package.templating.Template,r=Package.blaze.Blaze,n=Package.htmljs.HTML;r.Template.registerHelper("autolink",new t("autolink",function(){var t=this,i="",s={},a;return this.outputMarkdown&&(s.outputMarkdown=!0),t.templateContentBlock&&(i=r._toText(t.templateContentBlock,n.TEXTMODE.STRING)),a=new e(s),n.Raw(a.link(i))}))}}.call(this),"undefined"==typeof Package&&(Package={}),Package["konecty:autolinker"]={Autolinker:e}}();

!function(){var t=Package.meteor.Meteor,e=Package.jquery.$,n=Package.jquery.jQuery;(function(){!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Popper=e()}(this,function(){"use strict";function t(t){return t&&"[object Function]"==={}.toString.call(t)}function e(t,e){if(1!==t.nodeType)return[];var n=window.getComputedStyle(t,null);return e?n[e]:n}function n(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function i(t){if(!t||-1!==["HTML","BODY","#document"].indexOf(t.nodeName))return window.document.body;var r=e(t),o=r.overflow,s=r.overflowX,a=r.overflowY;return/(auto|scroll)/.test(o+a+s)?t:i(n(t))}function r(t){var n=t&&t.offsetParent,i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TD","TABLE"].indexOf(n.nodeName)&&"static"===e(n,"position")?r(n):n:window.document.documentElement}function o(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||r(t.firstElementChild)===t)}function s(t){return null===t.parentNode?t:s(t.parentNode)}function a(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return window.document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?t:e,l=n?e:t,c=document.createRange();c.setStart(i,0),c.setEnd(l,0);var f=c.commonAncestorContainer;if(t!==f&&e!==f||i.contains(l))return o(f)?f:r(f);var u=s(t);return u.host?a(u.host,e):a(t,s(e).host)}function l(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",n="top"===e?"scrollTop":"scrollLeft",i=t.nodeName;if("BODY"===i||"HTML"===i){var r=window.document.documentElement,o=window.document.scrollingElement||r;return o[n]}return t[n]}function c(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=l(e,"top"),r=l(e,"left"),o=n?-1:1;return t.top+=i*o,t.bottom+=i*o,t.left+=r*o,t.right+=r*o,t}function f(t,e){var n="x"===e?"Left":"Top",i="Left"==n?"Right":"Bottom";return+t["border"+n+"Width"].split("px")[0]+ +t["border"+i+"Width"].split("px")[0]}function u(t,e,n,i){return Y(e["offset"+t],n["client"+t],n["offset"+t],it()?n["offset"+t]+i["margin"+("Height"===t?"Top":"Left")]+i["margin"+("Height"===t?"Bottom":"Right")]:0)}function h(){var t=window.document.body,e=window.document.documentElement,n=it()&&window.getComputedStyle(e);return{height:u("Height",t,e,n),width:u("Width",t,e,n)}}function d(t){return at({},t,{right:t.left+t.width,bottom:t.top+t.height})}function p(t){var n={};if(it())try{n=t.getBoundingClientRect();var i=l(t,"top"),r=l(t,"left");n.top+=i,n.left+=r,n.bottom+=i,n.right+=r}catch(t){}else n=t.getBoundingClientRect();var o={left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top},s="HTML"===t.nodeName?h():{},a=s.width||t.clientWidth||o.right-o.left,c=s.height||t.clientHeight||o.bottom-o.top,u=t.offsetWidth-a,p=t.offsetHeight-c;if(u||p){var g=e(t);u-=f(g,"x"),p-=f(g,"y"),o.width-=u,o.height-=p}return d(o)}function g(t,n){var r=it(),o="HTML"===n.nodeName,s=p(t),a=p(n),l=i(t),f=e(n),u=+f.borderTopWidth.split("px")[0],h=+f.borderLeftWidth.split("px")[0],g=d({top:s.top-a.top-u,left:s.left-a.left-h,width:s.width,height:s.height});if(g.marginTop=0,g.marginLeft=0,!r&&o){var m=+f.marginTop.split("px")[0],_=+f.marginLeft.split("px")[0];g.top-=u-m,g.bottom-=u-m,g.left-=h-_,g.right-=h-_,g.marginTop=m,g.marginLeft=_}return(r?n.contains(l):n===l&&"BODY"!==l.nodeName)&&(g=c(g,n)),g}function m(t){var e=window.document.documentElement,n=g(t,e),i=Y(e.clientWidth,window.innerWidth||0),r=Y(e.clientHeight,window.innerHeight||0),o=l(e),s=l(e,"left"),a={top:o-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:i,height:r};return d(a)}function _(t){var i=t.nodeName;return"BODY"===i||"HTML"===i?!1:"fixed"===e(t,"position")||_(n(t))}function v(t,e,r,o){var s={top:0,left:0},l=a(t,e);if("viewport"===o)s=m(l);else{var c;"scrollParent"===o?(c=i(n(t)),"BODY"===c.nodeName&&(c=window.document.documentElement)):c="window"===o?window.document.documentElement:o;var f=g(c,l);if("HTML"!==c.nodeName||_(l))s=f;else{var u=h(),d=u.height,p=u.width;s.top+=f.top-f.marginTop,s.bottom=d+f.top,s.left+=f.left-f.marginLeft,s.right=p+f.left}}return s.left+=r,s.top+=r,s.right-=r,s.bottom-=r,s}function E(t){var e=t.width,n=t.height;return e*n}function T(t,e,n,i,r){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=v(n,i,o,r),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},l=Object.keys(a).map(function(t){return at({key:t},a[t],{area:E(a[t])})}).sort(function(t,e){return e.area-t.area}),c=l.filter(function(t){var e=t.width,i=t.height;return e>=n.clientWidth&&i>=n.clientHeight}),f=0<c.length?c[0].key:l[0].key,u=t.split("-")[1];return f+(u?"-"+u:"")}function y(t,e,n){var i=a(e,n);return g(n,i)}function C(t){var e=window.getComputedStyle(t),n=parseFloat(e.marginTop)+parseFloat(e.marginBottom),i=parseFloat(e.marginLeft)+parseFloat(e.marginRight),r={width:t.offsetWidth+i,height:t.offsetHeight+n};return r}function A(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function O(t,e,n){n=n.split("-")[0];var i=C(t),r={width:i.width,height:i.height},o=-1!==["right","left"].indexOf(n),s=o?"top":"left",a=o?"left":"top",l=o?"height":"width",c=o?"width":"height";return r[s]=e[s]+e[l]/2-i[l]/2,r[a]=n===a?e[a]-i[c]:e[A(a)],r}function I(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function b(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var i=I(t,function(t){return t[e]===n});return t.indexOf(i)}function D(e,n,i){var r=void 0===i?e:e.slice(0,b(e,"name",i));return r.forEach(function(e){e["function"]&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=e["function"]||e.fn;e.enabled&&t(i)&&(n.offsets.popper=d(n.offsets.popper),n.offsets.reference=d(n.offsets.reference),n=i(n,e))}),n}function S(){if(!this.state.isDestroyed){var t={instance:this,styles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=y(this.state,this.popper,this.reference),t.placement=T(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.offsets.popper=O(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position="absolute",t=D(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function w(t,e){return t.some(function(t){var n=t.name,i=t.enabled;return i&&n===e})}function N(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<e.length-1;i++){var r=e[i],o=r?""+r+n:t;if("undefined"!=typeof window.document.body.style[o])return o}return null}function L(){return this.state.isDestroyed=!0,w(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.left="",this.popper.style.position="",this.popper.style.top="",this.popper.style[N("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function P(t,e,n,r){var o="BODY"===t.nodeName,s=o?window:t;s.addEventListener(e,n,{passive:!0}),o||P(i(s.parentNode),e,n,r),r.push(s)}function R(t,e,n,r){n.updateBound=r,window.addEventListener("resize",n.updateBound,{passive:!0});var o=i(t);return P(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}function H(){this.state.eventsEnabled||(this.state=R(this.reference,this.options,this.state,this.scheduleUpdate))}function k(t,e){return window.removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function W(){this.state.eventsEnabled&&(window.cancelAnimationFrame(this.scheduleUpdate),this.state=k(this.reference,this.state))}function F(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function M(t,e){Object.keys(e).forEach(function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&F(e[n])&&(i="px"),t.style[n]=e[n]+i})}function U(t,e){Object.keys(e).forEach(function(n){var i=e[n];!1===i?t.removeAttribute(n):t.setAttribute(n,e[n])})}function x(t,e,n){var i=I(t,function(t){var n=t.name;return n===e}),r=!!i&&t.some(function(t){return t.name===n&&t.enabled&&t.order<i.order});if(!r){var o="`"+e+"`";console.warn("`"+n+"` modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return r}function V(t){return"end"===t?"start":"start"===t?"end":t}function j(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=ct.indexOf(t),i=ct.slice(n+1).concat(ct.slice(0,n));return e?i.reverse():i}function B(t,e,n,i){var r=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+r[1],s=r[2];if(!o)return t;if(0===s.indexOf("%")){var a;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=i}var l=d(a);return l[e]/100*o}if("vh"===s||"vw"===s){var c;return c="vh"===s?Y(document.documentElement.clientHeight,window.innerHeight||0):Y(document.documentElement.clientWidth,window.innerWidth||0),c/100*o}return o}function G(t,e,n,i){var r=[0,0],o=-1!==["right","left"].indexOf(i),s=t.split(/(\+|\-)/).map(function(t){return t.trim()}),a=s.indexOf(I(s,function(t){return-1!==t.search(/,|\s/)}));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1===a?[s]:[s.slice(0,a).concat([s[a].split(l)[0]]),[s[a].split(l)[1]].concat(s.slice(a+1))];return c=c.map(function(t,i){var r=(1===i?!o:o)?"height":"width",s=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,s=!0,t):s?(t[t.length-1]+=e,s=!1,t):t.concat(e)},[]).map(function(t){return B(t,r,e,n)})}),c.forEach(function(t,e){t.forEach(function(n,i){F(n)&&(r[e]+=n*("-"===t[i-1]?-1:1))})}),r}for(var K=Math.min,Q=Math.floor,Y=Math.max,q=["native code","[object MutationObserverConstructor]"],X=function(t){return q.some(function(e){return-1<(t||"").toString().indexOf(e)})},z="undefined"!=typeof window,J=["Edge","Trident","Firefox"],Z=0,$=0;$<J.length;$+=1)if(z&&0<=navigator.userAgent.indexOf(J[$])){Z=1;break}var tt,et=z&&X(window.MutationObserver),nt=et?function(t){var e=!1,n=0,i=document.createElement("span"),r=new MutationObserver(function(){t(),e=!1});return r.observe(i,{attributes:!0}),function(){e||(e=!0,i.setAttribute("x-index",n),++n)}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},Z))}},it=function(){return void 0==tt&&(tt=-1!==navigator.appVersion.indexOf("MSIE 10")),tt},rt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ot=function(){function t(t,e){for(var n,i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),st=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},at=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lt=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ct=lt.slice(3),ft={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},ut=function(){function e(n,i){var r=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};rt(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=nt(this.update.bind(this)),this.options=at({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=n.jquery?n[0]:n,this.popper=i.jquery?i[0]:i,this.options.modifiers={},Object.keys(at({},e.Defaults.modifiers,o.modifiers)).forEach(function(t){r.options.modifiers[t]=at({},e.Defaults.modifiers[t]||{},o.modifiers?o.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return at({name:t},r.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(e){e.enabled&&t(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return ot(e,[{key:"update",value:function(){return S.call(this)}},{key:"destroy",value:function(){return L.call(this)}},{key:"enableEventListeners",value:function(){return H.call(this)}},{key:"disableEventListeners",value:function(){return W.call(this)}}]),e}();return ut.Utils=("undefined"==typeof window?global:window).PopperUtils,ut.placements=lt,ut.Defaults={placement:"bottom",eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],i=e.split("-")[1];if(i){var r=t.offsets,o=r.reference,s=r.popper,a=-1!==["bottom","top"].indexOf(n),l=a?"left":"top",c=a?"width":"height",f={start:st({},l,o[l]),end:st({},l,o[l]+o[c]-s[c])};t.offsets.popper=at({},s,f[i])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n,i=e.offset,r=t.placement,o=t.offsets,s=o.popper,a=o.reference,l=r.split("-")[0];return n=F(+i)?[+i,0]:G(i,s,a,l),"left"===l?(s.top+=n[0],s.left-=n[1]):"right"===l?(s.top+=n[0],s.left+=n[1]):"top"===l?(s.left+=n[0],s.top-=n[1]):"bottom"===l&&(s.left+=n[0],s.top+=n[1]),t.popper=s,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||r(t.instance.popper);t.instance.reference===n&&(n=r(n));var i=v(t.instance.popper,t.instance.reference,e.padding,n);e.boundaries=i;var o=e.priority,s=t.offsets.popper,a={primary:function(t){var n=s[t];return s[t]<i[t]&&!e.escapeWithReference&&(n=Y(s[t],i[t])),st({},t,n)},secondary:function(t){var n="right"===t?"left":"top",r=s[n];return s[t]>i[t]&&!e.escapeWithReference&&(r=K(s[n],i[t]-("right"===t?s.width:s.height))),st({},n,r)}};return o.forEach(function(t){var e=-1===["left","top"].indexOf(t)?"secondary":"primary";s=at({},s,a[e](t))}),t.offsets.popper=s,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,i=e.reference,r=t.placement.split("-")[0],o=Q,s=-1!==["top","bottom"].indexOf(r),a=s?"right":"bottom",l=s?"left":"top",c=s?"width":"height";return n[a]<o(i[l])&&(t.offsets.popper[l]=o(i[l])-n[c]),n[l]>o(i[a])&&(t.offsets.popper[l]=o(i[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){if(!x(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if("string"==typeof n){if(n=t.instance.popper.querySelector(n),!n)return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],r=t.offsets,o=r.popper,s=r.reference,a=-1!==["left","right"].indexOf(i),l=a?"height":"width",c=a?"top":"left",f=a?"left":"top",u=a?"bottom":"right",h=C(n)[l];s[u]-h<o[c]&&(t.offsets.popper[c]-=o[c]-(s[u]-h)),s[c]+h>o[u]&&(t.offsets.popper[c]+=s[c]+h-o[u]);var p=s[c]+s[l]/2-h/2,g=p-d(t.offsets.popper)[c];return g=Y(K(o[l]-h,g),0),t.arrowElement=n,t.offsets.arrow={},t.offsets.arrow[c]=Math.round(g),t.offsets.arrow[f]="",t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(w(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=v(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement),i=t.placement.split("-")[0],r=A(i),o=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case ft.FLIP:s=[i,r];break;case ft.CLOCKWISE:s=j(i);break;case ft.COUNTERCLOCKWISE:s=j(i,!0);break;default:s=e.behavior}return s.forEach(function(a,l){if(i!==a||s.length===l+1)return t;i=t.placement.split("-")[0],r=A(i);var c=t.offsets.popper,f=t.offsets.reference,u=Q,h="left"===i&&u(c.right)>u(f.left)||"right"===i&&u(c.left)<u(f.right)||"top"===i&&u(c.bottom)>u(f.top)||"bottom"===i&&u(c.top)<u(f.bottom),d=u(c.left)<u(n.left),p=u(c.right)>u(n.right),g=u(c.top)<u(n.top),m=u(c.bottom)>u(n.bottom),_="left"===i&&d||"right"===i&&p||"top"===i&&g||"bottom"===i&&m,v=-1!==["top","bottom"].indexOf(i),E=!!e.flipVariations&&(v&&"start"===o&&d||v&&"end"===o&&p||!v&&"start"===o&&g||!v&&"end"===o&&m);(h||_||E)&&(t.flipped=!0,(h||_)&&(i=s[l+1]),E&&(o=V(o)),t.placement=i+(o?"-"+o:""),t.offsets.popper=at({},t.offsets.popper,O(t.instance.popper,t.offsets.reference,t.placement)),t=D(t.instance.modifiers,t,"flip"))}),t},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],i=t.offsets,r=i.popper,o=i.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return r[s?"left":"top"]=o[e]-(a?r[s?"width":"height"]:0),t.placement=A(e),t.offsets.popper=d(r),t}},hide:{order:800,enabled:!0,fn:function(t){if(!x(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=I(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,i=e.y,o=t.offsets.popper,s=I(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==s&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a,l,c=void 0===s?e.gpuAcceleration:s,f=r(t.instance.popper),u=p(f),h={position:o.position},d={left:Q(o.left),top:Q(o.top),bottom:Q(o.bottom),right:Q(o.right)},g="bottom"===n?"top":"bottom",m="right"===i?"left":"right",_=N("transform");if(l="bottom"==g?-u.height+d.bottom:d.top,a="right"==m?-u.width+d.right:d.left,c&&_)h[_]="translate3d("+a+"px, "+l+"px, 0)",h[g]=0,h[m]=0,h.willChange="transform";else{var v="bottom"==g?-1:1,E="right"==m?-1:1;h[g]=l*v,h[m]=a*E,h.willChange=g+", "+m}var T={"x-placement":t.placement};return t.attributes=at({},T,t.attributes),t.styles=at({},h,t.styles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return M(t.instance.popper,t.styles),U(t.instance.popper,t.attributes),t.offsets.arrow&&M(t.arrowElement,t.offsets.arrow),t},onLoad:function(t,e,n,i,r){var o=y(r,e,t),s=T(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),M(e,{position:"absolute"}),n},gpuAcceleration:void 0}}},ut})}).call(this),function(){!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e(t.bootstrap={},t.jQuery,t.Popper)}(this,function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){o(t,e,n[e])})}return t}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}e=e&&e.hasOwnProperty("default")?e["default"]:e,n=n&&n.hasOwnProperty("default")?n["default"]:n;var l=function(t){function e(t){return{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()}function n(){return{bindType:o,delegateType:o,handle:function e(n){return t(n.target).is(this)?n.handleObj.handler.apply(this,arguments):void 0}}}function i(e){var n=this,i=!1;return t(this).one(l.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||l.triggerTransitionEnd(n)},e),this}function r(){t.fn.emulateTransitionEnd=i,t.event.special[l.TRANSITION_END]=n()}var o="transitionend",s=1e6,a=1e3,l={TRANSITION_END:"bsTransitionEnd",getUID:function c(t){do t+=~~(Math.random()*s);while(document.getElementById(t));return t},getSelectorFromElement:function f(e){var n=e.getAttribute("data-target");n&&"#"!==n||(n=e.getAttribute("href")||"");try{var i=t(document).find(n);return i.length>0?n:null}catch(r){return null}},getTransitionDurationFromElement:function u(e){if(!e)return 0;var n=t(e).css("transition-duration"),i=parseFloat(n);return i?(n=n.split(",")[0],parseFloat(n)*a):0},reflow:function h(t){return t.offsetHeight},triggerTransitionEnd:function d(e){t(e).trigger(o)},supportsTransitionEnd:function p(){return Boolean(o)},isElement:function g(t){return(t[0]||t).nodeType},typeCheckConfig:function m(t,n,i){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var o=i[r],s=n[r],a=s&&l.isElement(s)?"element":e(s);if(!new RegExp(o).test(a))throw new Error(t.toUpperCase()+": "+('Option "'+r+'" provided type "'+a+'" ')+('but expected type "'+o+'".'))}}};return r(),l}(e),c=function(t){var e="alert",n="4.1.0",i="bs.alert",o="."+i,s=".data-api",a=t.fn[e],c={DISMISS:'[data-dismiss="alert"]'},f={CLOSE:"close"+o,CLOSED:"closed"+o,CLICK_DATA_API:"click"+o+s},u={ALERT:"alert",FADE:"fade",SHOW:"show"},h=function(){function e(t){this._element=t}var o=e.prototype;return o.close=function s(t){t=t||this._element;var e=this._getRootElement(t),n=this._triggerCloseEvent(e);n.isDefaultPrevented()||this._removeElement(e)},o.dispose=function a(){t.removeData(this._element,i),this._element=null},o._getRootElement=function c(e){var n=l.getSelectorFromElement(e),i=!1;return n&&(i=t(n)[0]),i||(i=t(e).closest("."+u.ALERT)[0]),i},o._triggerCloseEvent=function h(e){var n=t.Event(f.CLOSE);return t(e).trigger(n),n},o._removeElement=function d(e){var n=this;if(t(e).removeClass(u.SHOW),!t(e).hasClass(u.FADE))return void this._destroyElement(e);var i=l.getTransitionDurationFromElement(e);t(e).one(l.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(i)},o._destroyElement=function p(e){t(e).detach().trigger(f.CLOSED).remove()},e._jQueryInterface=function g(n){return this.each(function(){var r=t(this),o=r.data(i);o||(o=new e(this),r.data(i,o)),"close"===n&&o[n](this)})},e._handleDismiss=function m(t){return function(e){e&&e.preventDefault(),t.close(this)}},r(e,null,[{key:"VERSION",get:function _(){return n}}]),e}();return t(document).on(f.CLICK_DATA_API,c.DISMISS,h._handleDismiss(new h)),t.fn[e]=h._jQueryInterface,t.fn[e].Constructor=h,t.fn[e].noConflict=function(){return t.fn[e]=a,h._jQueryInterface},h}(e),f=function(t){var e="button",n="4.1.0",i="bs.button",o="."+i,s=".data-api",a=t.fn[e],l={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},c={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},f={CLICK_DATA_API:"click"+o+s,FOCUS_BLUR_DATA_API:"focus"+o+s+" "+("blur"+o+s)},u=function(){function e(t){this._element=t}var o=e.prototype;return o.toggle=function s(){var e=!0,n=!0,i=t(this._element).closest(c.DATA_TOGGLE)[0];if(i){var r=t(this._element).find(c.INPUT)[0];if(r){if("radio"===r.type)if(r.checked&&t(this._element).hasClass(l.ACTIVE))e=!1;else{var o=t(i).find(c.ACTIVE)[0];o&&t(o).removeClass(l.ACTIVE)}if(e){if(r.hasAttribute("disabled")||i.hasAttribute("disabled")||r.classList.contains("disabled")||i.classList.contains("disabled"))return;r.checked=!t(this._element).hasClass(l.ACTIVE),t(r).trigger("change")}r.focus(),n=!1}}n&&this._element.setAttribute("aria-pressed",!t(this._element).hasClass(l.ACTIVE)),e&&t(this._element).toggleClass(l.ACTIVE)},o.dispose=function a(){t.removeData(this._element,i),this._element=null},e._jQueryInterface=function f(n){return this.each(function(){var r=t(this).data(i);r||(r=new e(this),t(this).data(i,r)),"toggle"===n&&r[n]()})},r(e,null,[{key:"VERSION",get:function u(){return n}}]),e}();return t(document).on(f.CLICK_DATA_API,c.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var n=e.target;t(n).hasClass(l.BUTTON)||(n=t(n).closest(c.BUTTON)),u._jQueryInterface.call(t(n),"toggle")}).on(f.FOCUS_BLUR_DATA_API,c.DATA_TOGGLE_CARROT,function(e){var n=t(e.target).closest(c.BUTTON)[0];t(n).toggleClass(l.FOCUS,/^focus(in)?$/.test(e.type))}),t.fn[e]=u._jQueryInterface,t.fn[e].Constructor=u,t.fn[e].noConflict=function(){return t.fn[e]=a,u._jQueryInterface},u}(e),u=function(t){var e="carousel",n="4.1.0",i="bs.carousel",o="."+i,a=".data-api",c=t.fn[e],f=37,u=39,h=500,d={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},p={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},g={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},m={SLIDE:"slide"+o,SLID:"slid"+o,KEYDOWN:"keydown"+o,MOUSEENTER:"mouseenter"+o,MOUSELEAVE:"mouseleave"+o,TOUCHEND:"touchend"+o,LOAD_DATA_API:"load"+o+a,CLICK_DATA_API:"click"+o+a},_={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"},v={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},E=function(){function a(e,n){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(n),this._element=t(e)[0],this._indicatorsElement=t(this._element).find(v.INDICATORS)[0],this._addEventListeners()}var c=a.prototype;return c.next=function E(){this._isSliding||this._slide(g.NEXT)},c.nextWhenVisible=function T(){!document.hidden&&t(this._element).is(":visible")&&"hidden"!==t(this._element).css("visibility")&&this.next()},c.prev=function y(){this._isSliding||this._slide(g.PREV)},c.pause=function C(e){e||(this._isPaused=!0),t(this._element).find(v.NEXT_PREV)[0]&&(l.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},c.cycle=function A(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},c.to=function O(e){var n=this;this._activeElement=t(this._element).find(v.ACTIVE_ITEM)[0];var i=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||0>e)){if(this._isSliding)return void t(this._element).one(m.SLID,function(){return n.to(e)});if(i===e)return this.pause(),void this.cycle();var r=e>i?g.NEXT:g.PREV;this._slide(r,this._items[e])}},c.dispose=function I(){t(this._element).off(o),t.removeData(this._element,i),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},c._getConfig=function b(t){return t=s({},d,t),l.typeCheckConfig(e,t,p),t},c._addEventListeners=function D(){var e=this;this._config.keyboard&&t(this._element).on(m.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&(t(this._element).on(m.MOUSEENTER,function(t){return e.pause(t)}).on(m.MOUSELEAVE,function(t){return e.cycle(t)}),"ontouchstart"in document.documentElement&&t(this._element).on(m.TOUCHEND,function(){e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},h+e._config.interval)}))},c._keydown=function S(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case f:t.preventDefault(),this.prev();break;case u:t.preventDefault(),this.next()}},c._getItemIndex=function w(e){return this._items=t.makeArray(t(e).parent().find(v.ITEM)),this._items.indexOf(e)},c._getItemByDirection=function N(t,e){var n=t===g.NEXT,i=t===g.PREV,r=this._getItemIndex(e),o=this._items.length-1,s=i&&0===r||n&&r===o;if(s&&!this._config.wrap)return e;var a=t===g.PREV?-1:1,l=(r+a)%this._items.length;return-1===l?this._items[this._items.length-1]:this._items[l]},c._triggerSlideEvent=function L(e,n){var i=this._getItemIndex(e),r=this._getItemIndex(t(this._element).find(v.ACTIVE_ITEM)[0]),o=t.Event(m.SLIDE,{relatedTarget:e,direction:n,from:r,to:i});return t(this._element).trigger(o),o},c._setActiveIndicatorElement=function P(e){if(this._indicatorsElement){t(this._indicatorsElement).find(v.ACTIVE).removeClass(_.ACTIVE);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&t(n).addClass(_.ACTIVE)}},c._slide=function R(e,n){var i=this,r=t(this._element).find(v.ACTIVE_ITEM)[0],o=this._getItemIndex(r),s=n||r&&this._getItemByDirection(e,r),a=this._getItemIndex(s),c=Boolean(this._interval),f,u,h;if(e===g.NEXT?(f=_.LEFT,u=_.NEXT,h=g.LEFT):(f=_.RIGHT,u=_.PREV,h=g.RIGHT),s&&t(s).hasClass(_.ACTIVE))return void(this._isSliding=!1);var d=this._triggerSlideEvent(s,h);if(!d.isDefaultPrevented()&&r&&s){this._isSliding=!0,c&&this.pause(),this._setActiveIndicatorElement(s);var p=t.Event(m.SLID,{relatedTarget:s,direction:h,from:o,to:a});if(t(this._element).hasClass(_.SLIDE)){t(s).addClass(u),l.reflow(s),t(r).addClass(f),t(s).addClass(f);var E=l.getTransitionDurationFromElement(r);t(r).one(l.TRANSITION_END,function(){t(s).removeClass(f+" "+u).addClass(_.ACTIVE),t(r).removeClass(_.ACTIVE+" "+u+" "+f),i._isSliding=!1,setTimeout(function(){return t(i._element).trigger(p)},0)}).emulateTransitionEnd(E)}else t(r).removeClass(_.ACTIVE),t(s).addClass(_.ACTIVE),this._isSliding=!1,t(this._element).trigger(p);c&&this.cycle()}},a._jQueryInterface=function H(e){return this.each(function(){var n=t(this).data(i),r=s({},d,t(this).data());"object"==typeof e&&(r=s({},r,e));var o="string"==typeof e?e:r.slide;if(n||(n=new a(this,r),t(this).data(i,n)),"number"==typeof e)n.to(e);else if("string"==typeof o){if("undefined"==typeof n[o])throw new TypeError('No method named "'+o+'"');n[o]()}else r.interval&&(n.pause(),n.cycle())})},a._dataApiClickHandler=function k(e){var n=l.getSelectorFromElement(this);if(n){var r=t(n)[0];if(r&&t(r).hasClass(_.CAROUSEL)){var o=s({},t(r).data(),t(this).data()),c=this.getAttribute("data-slide-to");c&&(o.interval=!1),a._jQueryInterface.call(t(r),o),c&&t(r).data(i).to(c),e.preventDefault()}}},r(a,null,[{key:"VERSION",get:function W(){return n}},{key:"Default",get:function F(){return d}}]),a}();return t(document).on(m.CLICK_DATA_API,v.DATA_SLIDE,E._dataApiClickHandler),t(window).on(m.LOAD_DATA_API,function(){t(v.DATA_RIDE).each(function(){var e=t(this);E._jQueryInterface.call(e,e.data())})}),t.fn[e]=E._jQueryInterface,t.fn[e].Constructor=E,t.fn[e].noConflict=function(){return t.fn[e]=c,E._jQueryInterface},E}(e),h=function(t){var e="collapse",n="4.1.0",i="bs.collapse",o="."+i,a=".data-api",c=t.fn[e],f={toggle:!0,parent:""},u={toggle:"boolean",parent:"(string|element)"},h={SHOW:"show"+o,SHOWN:"shown"+o,HIDE:"hide"+o,HIDDEN:"hidden"+o,CLICK_DATA_API:"click"+o+a},d={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},p={WIDTH:"width",HEIGHT:"height"},g={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},m=function(){function o(e,n){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(n),this._triggerArray=t.makeArray(t('[data-toggle="collapse"][href="#'+e.id+'"],'+('[data-toggle="collapse"][data-target="#'+e.id+'"]')));for(var i=t(g.DATA_TOGGLE),r=0;r<i.length;r++){var o=i[r],s=l.getSelectorFromElement(o);

null!==s&&t(s).filter(e).length>0&&(this._selector=s,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var a=o.prototype;return a.toggle=function c(){t(this._element).hasClass(d.SHOW)?this.hide():this.show()},a.show=function m(){var e=this;if(!this._isTransitioning&&!t(this._element).hasClass(d.SHOW)){var n,r;if(this._parent&&(n=t.makeArray(t(this._parent).find(g.ACTIVES).filter('[data-parent="'+this._config.parent+'"]')),0===n.length&&(n=null)),!(n&&(r=t(n).not(this._selector).data(i),r&&r._isTransitioning))){var s=t.Event(h.SHOW);if(t(this._element).trigger(s),!s.isDefaultPrevented()){n&&(o._jQueryInterface.call(t(n).not(this._selector),"hide"),r||t(n).data(i,null));var a=this._getDimension();t(this._element).removeClass(d.COLLAPSE).addClass(d.COLLAPSING),this._element.style[a]=0,this._triggerArray.length>0&&t(this._triggerArray).removeClass(d.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var c=function m(){t(e._element).removeClass(d.COLLAPSING).addClass(d.COLLAPSE).addClass(d.SHOW),e._element.style[a]="",e.setTransitioning(!1),t(e._element).trigger(h.SHOWN)},f=a[0].toUpperCase()+a.slice(1),u="scroll"+f,p=l.getTransitionDurationFromElement(this._element);t(this._element).one(l.TRANSITION_END,c).emulateTransitionEnd(p),this._element.style[a]=this._element[u]+"px"}}}},a.hide=function _(){var e=this;if(!this._isTransitioning&&t(this._element).hasClass(d.SHOW)){var n=t.Event(h.HIDE);if(t(this._element).trigger(n),!n.isDefaultPrevented()){var i=this._getDimension();if(this._element.style[i]=this._element.getBoundingClientRect()[i]+"px",l.reflow(this._element),t(this._element).addClass(d.COLLAPSING).removeClass(d.COLLAPSE).removeClass(d.SHOW),this._triggerArray.length>0)for(var r=0;r<this._triggerArray.length;r++){var o=this._triggerArray[r],s=l.getSelectorFromElement(o);if(null!==s){var a=t(s);a.hasClass(d.SHOW)||t(o).addClass(d.COLLAPSED).attr("aria-expanded",!1)}}this.setTransitioning(!0);var c=function u(){e.setTransitioning(!1),t(e._element).removeClass(d.COLLAPSING).addClass(d.COLLAPSE).trigger(h.HIDDEN)};this._element.style[i]="";var f=l.getTransitionDurationFromElement(this._element);t(this._element).one(l.TRANSITION_END,c).emulateTransitionEnd(f)}}},a.setTransitioning=function v(t){this._isTransitioning=t},a.dispose=function E(){t.removeData(this._element,i),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},a._getConfig=function T(t){return t=s({},f,t),t.toggle=Boolean(t.toggle),l.typeCheckConfig(e,t,u),t},a._getDimension=function y(){var e=t(this._element).hasClass(p.WIDTH);return e?p.WIDTH:p.HEIGHT},a._getParent=function C(){var e=this,n=null;l.isElement(this._config.parent)?(n=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(n=this._config.parent[0])):n=t(this._config.parent)[0];var i='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return t(n).find(i).each(function(t,n){e._addAriaAndCollapsedClass(o._getTargetFromElement(n),[n])}),n},a._addAriaAndCollapsedClass=function A(e,n){if(e){var i=t(e).hasClass(d.SHOW);n.length>0&&t(n).toggleClass(d.COLLAPSED,!i).attr("aria-expanded",i)}},o._getTargetFromElement=function O(e){var n=l.getSelectorFromElement(e);return n?t(n)[0]:null},o._jQueryInterface=function I(e){return this.each(function(){var n=t(this),r=n.data(i),a=s({},f,n.data(),"object"==typeof e&&e);if(!r&&a.toggle&&/show|hide/.test(e)&&(a.toggle=!1),r||(r=new o(this,a),n.data(i,r)),"string"==typeof e){if("undefined"==typeof r[e])throw new TypeError('No method named "'+e+'"');r[e]()}})},r(o,null,[{key:"VERSION",get:function b(){return n}},{key:"Default",get:function D(){return f}}]),o}();return t(document).on(h.CLICK_DATA_API,g.DATA_TOGGLE,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var n=t(this),r=l.getSelectorFromElement(this);t(r).each(function(){var e=t(this),r=e.data(i),o=r?"toggle":n.data();m._jQueryInterface.call(e,o)})}),t.fn[e]=m._jQueryInterface,t.fn[e].Constructor=m,t.fn[e].noConflict=function(){return t.fn[e]=c,m._jQueryInterface},m}(e),d=function(t){var e="dropdown",i="4.1.0",o="bs.dropdown",a="."+o,c=".data-api",f=t.fn[e],u=27,h=32,d=9,p=38,g=40,m=3,_=new RegExp(p+"|"+g+"|"+u),v={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK:"click"+a,CLICK_DATA_API:"click"+a+c,KEYDOWN_DATA_API:"keydown"+a+c,KEYUP_DATA_API:"keyup"+a+c},E={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},T={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},y={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},C={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},A={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},O=function(){function c(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var f=c.prototype;return f.toggle=function O(){if(!this._element.disabled&&!t(this._element).hasClass(E.DISABLED)){var e=c._getParentFromElement(this._element),i=t(this._menu).hasClass(E.SHOW);if(c._clearMenus(),!i){var r={relatedTarget:this._element},o=t.Event(v.SHOW,r);if(t(e).trigger(o),!o.isDefaultPrevented()){if(!this._inNavbar){if("undefined"==typeof n)throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)");var s=this._element;"parent"===this._config.reference?s=e:l.isElement(this._config.reference)&&(s=this._config.reference,"undefined"!=typeof this._config.reference.jquery&&(s=this._config.reference[0])),"scrollParent"!==this._config.boundary&&t(e).addClass(E.POSITION_STATIC),this._popper=new n(s,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===t(e).closest(T.NAVBAR_NAV).length&&t(document.body).children().on("mouseover",null,t.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),t(this._menu).toggleClass(E.SHOW),t(e).toggleClass(E.SHOW).trigger(t.Event(v.SHOWN,r))}}}},f.dispose=function I(){t.removeData(this._element,o),t(this._element).off(a),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},f.update=function b(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},f._addEventListeners=function D(){var e=this;t(this._element).on(v.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},f._getConfig=function S(n){return n=s({},this.constructor.Default,t(this._element).data(),n),l.typeCheckConfig(e,n,this.constructor.DefaultType),n},f._getMenuElement=function w(){if(!this._menu){var e=c._getParentFromElement(this._element);this._menu=t(e).find(T.MENU)[0]}return this._menu},f._getPlacement=function N(){var e=t(this._element).parent(),n=y.BOTTOM;return e.hasClass(E.DROPUP)?(n=y.TOP,t(this._menu).hasClass(E.MENURIGHT)&&(n=y.TOPEND)):e.hasClass(E.DROPRIGHT)?n=y.RIGHT:e.hasClass(E.DROPLEFT)?n=y.LEFT:t(this._menu).hasClass(E.MENURIGHT)&&(n=y.BOTTOMEND),n},f._detectNavbar=function L(){return t(this._element).closest(".navbar").length>0},f._getPopperConfig=function P(){var t=this,e={};"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=s({},e.offsets,t._config.offset(e.offsets)||{}),e}:e.offset=this._config.offset;var n={placement:this._getPlacement(),modifiers:{offset:e,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(n.modifiers.applyStyle={enabled:!1}),n},c._jQueryInterface=function R(e){return this.each(function(){var n=t(this).data(o),i="object"==typeof e?e:null;if(n||(n=new c(this,i),t(this).data(o,n)),"string"==typeof e){if("undefined"==typeof n[e])throw new TypeError('No method named "'+e+'"');n[e]()}})},c._clearMenus=function H(e){if(!e||e.which!==m&&("keyup"!==e.type||e.which===d))for(var n=t.makeArray(t(T.DATA_TOGGLE)),i=0;i<n.length;i++){var r=c._getParentFromElement(n[i]),s=t(n[i]).data(o),a={relatedTarget:n[i]};if(s){var l=s._menu;if(t(r).hasClass(E.SHOW)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&e.which===d)&&t.contains(r,e.target))){var f=t.Event(v.HIDE,a);t(r).trigger(f),f.isDefaultPrevented()||("ontouchstart"in document.documentElement&&t(document.body).children().off("mouseover",null,t.noop),n[i].setAttribute("aria-expanded","false"),t(l).removeClass(E.SHOW),t(r).removeClass(E.SHOW).trigger(t.Event(v.HIDDEN,a)))}}}},c._getParentFromElement=function k(e){var n,i=l.getSelectorFromElement(e);return i&&(n=t(i)[0]),n||e.parentNode},c._dataApiKeydownHandler=function W(e){if(!((/input|textarea/i.test(e.target.tagName)?e.which===h||e.which!==u&&(e.which!==g&&e.which!==p||t(e.target).closest(T.MENU).length):!_.test(e.which))||(e.preventDefault(),e.stopPropagation(),this.disabled||t(this).hasClass(E.DISABLED)))){var n=c._getParentFromElement(this),i=t(n).hasClass(E.SHOW);if(!i&&(e.which!==u||e.which!==h)||i&&(e.which===u||e.which===h)){if(e.which===u){var r=t(n).find(T.DATA_TOGGLE)[0];t(r).trigger("focus")}return void t(this).trigger("click")}var o=t(n).find(T.VISIBLE_ITEMS).get();if(0!==o.length){var s=o.indexOf(e.target);e.which===p&&s>0&&s--,e.which===g&&s<o.length-1&&s++,0>s&&(s=0),o[s].focus()}}},r(c,null,[{key:"VERSION",get:function F(){return i}},{key:"Default",get:function M(){return C}},{key:"DefaultType",get:function U(){return A}}]),c}();return t(document).on(v.KEYDOWN_DATA_API,T.DATA_TOGGLE,O._dataApiKeydownHandler).on(v.KEYDOWN_DATA_API,T.MENU,O._dataApiKeydownHandler).on(v.CLICK_DATA_API+" "+v.KEYUP_DATA_API,O._clearMenus).on(v.CLICK_DATA_API,T.DATA_TOGGLE,function(e){e.preventDefault(),e.stopPropagation(),O._jQueryInterface.call(t(this),"toggle")}).on(v.CLICK_DATA_API,T.FORM_CHILD,function(t){t.stopPropagation()}),t.fn[e]=O._jQueryInterface,t.fn[e].Constructor=O,t.fn[e].noConflict=function(){return t.fn[e]=f,O._jQueryInterface},O}(e,n),p=function(t){var e="modal",n="4.1.0",i="bs.modal",o="."+i,a=".data-api",c=t.fn[e],f=27,u={backdrop:!0,keyboard:!0,focus:!0,show:!0},h={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},d={HIDE:"hide"+o,HIDDEN:"hidden"+o,SHOW:"show"+o,SHOWN:"shown"+o,FOCUSIN:"focusin"+o,RESIZE:"resize"+o,CLICK_DISMISS:"click.dismiss"+o,KEYDOWN_DISMISS:"keydown.dismiss"+o,MOUSEUP_DISMISS:"mouseup.dismiss"+o,MOUSEDOWN_DISMISS:"mousedown.dismiss"+o,CLICK_DATA_API:"click"+o+a},p={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},g={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"},m=function(){function a(e,n){this._config=this._getConfig(n),this._element=e,this._dialog=t(e).find(g.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._scrollbarWidth=0}var c=a.prototype;return c.toggle=function m(t){return this._isShown?this.hide():this.show(t)},c.show=function _(e){var n=this;if(!this._isTransitioning&&!this._isShown){t(this._element).hasClass(p.FADE)&&(this._isTransitioning=!0);var i=t.Event(d.SHOW,{relatedTarget:e});t(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),t(document.body).addClass(p.OPEN),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(d.CLICK_DISMISS,g.DATA_DISMISS,function(t){return n.hide(t)}),t(this._dialog).on(d.MOUSEDOWN_DISMISS,function(){t(n._element).one(d.MOUSEUP_DISMISS,function(e){t(e.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(e)}))}},c.hide=function v(e){var n=this;if(e&&e.preventDefault(),!this._isTransitioning&&this._isShown){var i=t.Event(d.HIDE);if(t(this._element).trigger(i),this._isShown&&!i.isDefaultPrevented()){this._isShown=!1;var r=t(this._element).hasClass(p.FADE);if(r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),t(document).off(d.FOCUSIN),t(this._element).removeClass(p.SHOW),t(this._element).off(d.CLICK_DISMISS),t(this._dialog).off(d.MOUSEDOWN_DISMISS),r){var o=l.getTransitionDurationFromElement(this._element);t(this._element).one(l.TRANSITION_END,function(t){return n._hideModal(t)}).emulateTransitionEnd(o)}else this._hideModal()}}},c.dispose=function E(){t.removeData(this._element,i),t(window,document,this._element,this._backdrop).off(o),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},c.handleUpdate=function T(){this._adjustDialog()},c._getConfig=function y(t){return t=s({},u,t),l.typeCheckConfig(e,t,h),t},c._showElement=function C(e){var n=this,i=t(this._element).hasClass(p.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&l.reflow(this._element),t(this._element).addClass(p.SHOW),this._config.focus&&this._enforceFocus();var r=t.Event(d.SHOWN,{relatedTarget:e}),o=function a(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,t(n._element).trigger(r)};if(i){var s=l.getTransitionDurationFromElement(this._element);t(this._dialog).one(l.TRANSITION_END,o).emulateTransitionEnd(s)}else o()},c._enforceFocus=function A(){var e=this;t(document).off(d.FOCUSIN).on(d.FOCUSIN,function(n){document!==n.target&&e._element!==n.target&&0===t(e._element).has(n.target).length&&e._element.focus()})},c._setEscapeEvent=function O(){var e=this;this._isShown&&this._config.keyboard?t(this._element).on(d.KEYDOWN_DISMISS,function(t){t.which===f&&(t.preventDefault(),e.hide())}):this._isShown||t(this._element).off(d.KEYDOWN_DISMISS)},c._setResizeEvent=function I(){var e=this;this._isShown?t(window).on(d.RESIZE,function(t){return e.handleUpdate(t)}):t(window).off(d.RESIZE)},c._hideModal=function b(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){t(document.body).removeClass(p.OPEN),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(d.HIDDEN)})},c._removeBackdrop=function D(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)},c._showBackdrop=function S(e){var n=this,i=t(this._element).hasClass(p.FADE)?p.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=p.BACKDROP,i&&t(this._backdrop).addClass(i),t(this._backdrop).appendTo(document.body),t(this._element).on(d.CLICK_DISMISS,function(t){return n._ignoreBackdropClick?void(n._ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide()))}),i&&l.reflow(this._backdrop),t(this._backdrop).addClass(p.SHOW),!e)return;if(!i)return void e();var r=l.getTransitionDurationFromElement(this._backdrop);t(this._backdrop).one(l.TRANSITION_END,e).emulateTransitionEnd(r)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass(p.SHOW);var o=function a(){n._removeBackdrop(),e&&e()};if(t(this._element).hasClass(p.FADE)){var s=l.getTransitionDurationFromElement(this._backdrop);t(this._backdrop).one(l.TRANSITION_END,o).emulateTransitionEnd(s)}else o()}else e&&e()},c._adjustDialog=function w(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},c._resetAdjustments=function N(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},c._checkScrollbar=function L(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},c._setScrollbar=function P(){var e=this;if(this._isBodyOverflowing){t(g.FIXED_CONTENT).each(function(n,i){var r=t(i)[0].style.paddingRight,o=t(i).css("padding-right");t(i).data("padding-right",r).css("padding-right",parseFloat(o)+e._scrollbarWidth+"px")}),t(g.STICKY_CONTENT).each(function(n,i){var r=t(i)[0].style.marginRight,o=t(i).css("margin-right");t(i).data("margin-right",r).css("margin-right",parseFloat(o)-e._scrollbarWidth+"px")}),t(g.NAVBAR_TOGGLER).each(function(n,i){var r=t(i)[0].style.marginRight,o=t(i).css("margin-right");t(i).data("margin-right",r).css("margin-right",parseFloat(o)+e._scrollbarWidth+"px")});var n=document.body.style.paddingRight,i=t(document.body).css("padding-right");t(document.body).data("padding-right",n).css("padding-right",parseFloat(i)+this._scrollbarWidth+"px")}},c._resetScrollbar=function R(){t(g.FIXED_CONTENT).each(function(e,n){var i=t(n).data("padding-right");"undefined"!=typeof i&&t(n).css("padding-right",i).removeData("padding-right")}),t(g.STICKY_CONTENT+", "+g.NAVBAR_TOGGLER).each(function(e,n){var i=t(n).data("margin-right");"undefined"!=typeof i&&t(n).css("margin-right",i).removeData("margin-right")});var e=t(document.body).data("padding-right");"undefined"!=typeof e&&t(document.body).css("padding-right",e).removeData("padding-right")},c._getScrollbarWidth=function H(){var t=document.createElement("div");t.className=p.SCROLLBAR_MEASURER,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},a._jQueryInterface=function k(e,n){return this.each(function(){var r=t(this).data(i),o=s({},a.Default,t(this).data(),"object"==typeof e&&e);if(r||(r=new a(this,o),t(this).data(i,r)),"string"==typeof e){if("undefined"==typeof r[e])throw new TypeError('No method named "'+e+'"');r[e](n)}else o.show&&r.show(n)})},r(a,null,[{key:"VERSION",get:function W(){return n}},{key:"Default",get:function F(){return u}}]),a}();return t(document).on(d.CLICK_DATA_API,g.DATA_TOGGLE,function(e){var n=this,r,o=l.getSelectorFromElement(this);o&&(r=t(o)[0]);var a=t(r).data(i)?"toggle":s({},t(r).data(),t(this).data());("A"===this.tagName||"AREA"===this.tagName)&&e.preventDefault();var c=t(r).one(d.SHOW,function(e){e.isDefaultPrevented()||c.one(d.HIDDEN,function(){t(n).is(":visible")&&n.focus()})});m._jQueryInterface.call(t(r),a,this)}),t.fn[e]=m._jQueryInterface,t.fn[e].Constructor=m,t.fn[e].noConflict=function(){return t.fn[e]=c,m._jQueryInterface},m}(e),g=function(t){var e="tooltip",i="4.1.0",o="bs.tooltip",a="."+o,c=t.fn[e],f="bs-tooltip",u=new RegExp("(^|\\s)"+f+"\\S+","g"),h={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"},d={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},p={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},g={SHOW:"show",OUT:"out"},m={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,INSERTED:"inserted"+a,CLICK:"click"+a,FOCUSIN:"focusin"+a,FOCUSOUT:"focusout"+a,MOUSEENTER:"mouseenter"+a,MOUSELEAVE:"mouseleave"+a},_={FADE:"fade",SHOW:"show"},v={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},E={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},T=function(){function c(t,e){if("undefined"==typeof n)throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var T=c.prototype;return T.enable=function y(){this._isEnabled=!0},T.disable=function C(){this._isEnabled=!1},T.toggleEnabled=function A(){this._isEnabled=!this._isEnabled},T.toggle=function O(e){if(this._isEnabled)if(e){var n=this.constructor.DATA_KEY,i=t(e.currentTarget).data(n);i||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(t(this.getTipElement()).hasClass(_.SHOW))return void this._leave(null,this);this._enter(null,this)}},T.dispose=function I(){clearTimeout(this._timeout),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},T.show=function b(){var e=this;if("none"===t(this.element).css("display"))throw new Error("Please use show on visible elements");var i=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){t(this.element).trigger(i);var r=t.contains(this.element.ownerDocument.documentElement,this.element);if(i.isDefaultPrevented()||!r)return;var o=this.getTipElement(),s=l.getUID(this.constructor.NAME);o.setAttribute("id",s),this.element.setAttribute("aria-describedby",s),this.setContent(),this.config.animation&&t(o).addClass(_.FADE);var a="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,c=this._getAttachment(a);this.addAttachmentClass(c);var f=this.config.container===!1?document.body:t(this.config.container);t(o).data(this.constructor.DATA_KEY,this),t.contains(this.element.ownerDocument.documentElement,this.tip)||t(o).appendTo(f),t(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new n(this.element,o,{placement:c,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:v.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function d(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function p(t){e._handlePopperPlacementChange(t)}}),t(o).addClass(_.SHOW),"ontouchstart"in document.documentElement&&t(document.body).children().on("mouseover",null,t.noop);var u=function m(){e.config.animation&&e._fixTransition();var n=e._hoverState;e._hoverState=null,t(e.element).trigger(e.constructor.Event.SHOWN),n===g.OUT&&e._leave(null,e)};if(t(this.tip).hasClass(_.FADE)){var h=l.getTransitionDurationFromElement(this.tip);t(this.tip).one(l.TRANSITION_END,u).emulateTransitionEnd(h)}else u()}},T.hide=function D(e){var n=this,i=this.getTipElement(),r=t.Event(this.constructor.Event.HIDE),o=function a(){n._hoverState!==g.SHOW&&i.parentNode&&i.parentNode.removeChild(i),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),t(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),e&&e()};if(t(this.element).trigger(r),!r.isDefaultPrevented()){if(t(i).removeClass(_.SHOW),"ontouchstart"in document.documentElement&&t(document.body).children().off("mouseover",null,t.noop),this._activeTrigger[E.CLICK]=!1,this._activeTrigger[E.FOCUS]=!1,this._activeTrigger[E.HOVER]=!1,t(this.tip).hasClass(_.FADE)){var s=l.getTransitionDurationFromElement(i);t(i).one(l.TRANSITION_END,o).emulateTransitionEnd(s)}else o();this._hoverState=""}},T.update=function S(){null!==this._popper&&this._popper.scheduleUpdate()},T.isWithContent=function w(){return Boolean(this.getTitle())},T.addAttachmentClass=function N(e){t(this.getTipElement()).addClass(f+"-"+e)},T.getTipElement=function L(){return this.tip=this.tip||t(this.config.template)[0],this.tip},T.setContent=function P(){var e=t(this.getTipElement());this.setElementContent(e.find(v.TOOLTIP_INNER),this.getTitle()),e.removeClass(_.FADE+" "+_.SHOW)},T.setElementContent=function R(e,n){var i=this.config.html;"object"==typeof n&&(n.nodeType||n.jquery)?i?t(n).parent().is(e)||e.empty().append(n):e.text(t(n).text()):e[i?"html":"text"](n)},T.getTitle=function H(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},T._getAttachment=function k(t){return d[t.toUpperCase()]},T._setListeners=function W(){var e=this,n=this.config.trigger.split(" ");n.forEach(function(n){if("click"===n)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,function(t){return e.toggle(t)});else if(n!==E.MANUAL){var i=n===E.HOVER?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,r=n===E.HOVER?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(i,e.config.selector,function(t){return e._enter(t)}).on(r,e.config.selector,function(t){return e._leave(t)})}t(e.element).closest(".modal").on("hide.bs.modal",function(){return e.hide()})}),this.config.selector?this.config=s({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},T._fixTitle=function F(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},T._enter=function M(e,n){var i=this.constructor.DATA_KEY;return n=n||t(e.currentTarget).data(i),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusin"===e.type?E.FOCUS:E.HOVER]=!0),t(n.getTipElement()).hasClass(_.SHOW)||n._hoverState===g.SHOW?void(n._hoverState=g.SHOW):(clearTimeout(n._timeout),n._hoverState=g.SHOW,n.config.delay&&n.config.delay.show?void(n._timeout=setTimeout(function(){n._hoverState===g.SHOW&&n.show()},n.config.delay.show)):void n.show())},T._leave=function U(e,n){var i=this.constructor.DATA_KEY;return n=n||t(e.currentTarget).data(i),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusout"===e.type?E.FOCUS:E.HOVER]=!1),n._isWithActiveTrigger()?void 0:(clearTimeout(n._timeout),n._hoverState=g.OUT,n.config.delay&&n.config.delay.hide?void(n._timeout=setTimeout(function(){n._hoverState===g.OUT&&n.hide()},n.config.delay.hide)):void n.hide())},T._isWithActiveTrigger=function x(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},T._getConfig=function V(n){return n=s({},this.constructor.Default,t(this.element).data(),n),"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),"number"==typeof n.title&&(n.title=n.title.toString()),"number"==typeof n.content&&(n.content=n.content.toString()),l.typeCheckConfig(e,n,this.constructor.DefaultType),n},T._getDelegateConfig=function j(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},T._cleanTipClass=function B(){var e=t(this.getTipElement()),n=e.attr("class").match(u);null!==n&&n.length>0&&e.removeClass(n.join(""))},T._handlePopperPlacementChange=function G(t){this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},T._fixTransition=function K(){var e=this.getTipElement(),n=this.config.animation;null===e.getAttribute("x-placement")&&(t(e).removeClass(_.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=n)},c._jQueryInterface=function Q(e){return this.each(function(){var n=t(this).data(o),i="object"==typeof e&&e;if((n||!/dispose|hide/.test(e))&&(n||(n=new c(this,i),t(this).data(o,n)),"string"==typeof e)){if("undefined"==typeof n[e])throw new TypeError('No method named "'+e+'"');n[e]()}})},r(c,null,[{key:"VERSION",get:function Y(){return i}},{key:"Default",get:function q(){return p}},{key:"NAME",get:function X(){return e}},{key:"DATA_KEY",get:function z(){return o}},{key:"Event",get:function J(){return m}},{key:"EVENT_KEY",get:function Z(){return a}},{key:"DefaultType",get:function $(){return h}}]),c}();return t.fn[e]=T._jQueryInterface,t.fn[e].Constructor=T,t.fn[e].noConflict=function(){return t.fn[e]=c,T._jQueryInterface},T}(e,n),m=function(t){var e="popover",n="4.1.0",i="bs.popover",o="."+i,l=t.fn[e],c="bs-popover",f=new RegExp("(^|\\s)"+c+"\\S+","g"),u=s({},g.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),h=s({},g.DefaultType,{content:"(string|element|function)"}),d={FADE:"fade",SHOW:"show"},p={TITLE:".popover-header",CONTENT:".popover-body"},m={HIDE:"hide"+o,HIDDEN:"hidden"+o,SHOW:"show"+o,SHOWN:"shown"+o,INSERTED:"inserted"+o,CLICK:"click"+o,FOCUSIN:"focusin"+o,FOCUSOUT:"focusout"+o,MOUSEENTER:"mouseenter"+o,MOUSELEAVE:"mouseleave"+o},_=function(s){function l(){return s.apply(this,arguments)||this}a(l,s);var g=l.prototype;return g.isWithContent=function _(){return this.getTitle()||this._getContent()},g.addAttachmentClass=function v(e){t(this.getTipElement()).addClass(c+"-"+e)},g.getTipElement=function E(){return this.tip=this.tip||t(this.config.template)[0],this.tip},g.setContent=function T(){var e=t(this.getTipElement());this.setElementContent(e.find(p.TITLE),this.getTitle());var n=this._getContent();"function"==typeof n&&(n=n.call(this.element)),this.setElementContent(e.find(p.CONTENT),n),e.removeClass(d.FADE+" "+d.SHOW)},g._getContent=function y(){return this.element.getAttribute("data-content")||this.config.content},g._cleanTipClass=function C(){var e=t(this.getTipElement()),n=e.attr("class").match(f);null!==n&&n.length>0&&e.removeClass(n.join(""))},l._jQueryInterface=function A(e){return this.each(function(){var n=t(this).data(i),r="object"==typeof e?e:null;if((n||!/destroy|hide/.test(e))&&(n||(n=new l(this,r),t(this).data(i,n)),"string"==typeof e)){if("undefined"==typeof n[e])throw new TypeError('No method named "'+e+'"');n[e]()}})},r(l,null,[{key:"VERSION",get:function O(){return n}},{key:"Default",get:function I(){return u}},{key:"NAME",get:function b(){return e}},{key:"DATA_KEY",get:function D(){return i}},{key:"Event",get:function S(){return m}},{key:"EVENT_KEY",get:function w(){return o}},{key:"DefaultType",get:function N(){return h}}]),l}(g);return t.fn[e]=_._jQueryInterface,t.fn[e].Constructor=_,t.fn[e].noConflict=function(){return t.fn[e]=l,_._jQueryInterface},_}(e),_=function(t){var e="scrollspy",n="4.1.0",i="bs.scrollspy",o="."+i,a=".data-api",c=t.fn[e],f={offset:10,method:"auto",target:""},u={offset:"number",method:"string",target:"(string|element)"},h={ACTIVATE:"activate"+o,SCROLL:"scroll"+o,LOAD_DATA_API:"load"+o+a},d={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},p={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},g={OFFSET:"offset",POSITION:"position"},m=function(){function a(e,n){var i=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(n),this._selector=this._config.target+" "+p.NAV_LINKS+","+(this._config.target+" "+p.LIST_ITEMS+",")+(this._config.target+" "+p.DROPDOWN_ITEMS),this._offsets=[],
this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(h.SCROLL,function(t){return i._process(t)}),this.refresh(),this._process()}var c=a.prototype;return c.refresh=function m(){var e=this,n=this._scrollElement===this._scrollElement.window?g.OFFSET:g.POSITION,i="auto"===this._config.method?n:this._config.method,r=i===g.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var o=t.makeArray(t(this._selector));o.map(function(e){var n,o=l.getSelectorFromElement(e);if(o&&(n=t(o)[0]),n){var s=n.getBoundingClientRect();if(s.width||s.height)return[t(n)[i]().top+r,o]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},c.dispose=function _(){t.removeData(this._element,i),t(this._scrollElement).off(o),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},c._getConfig=function v(n){if(n=s({},f,n),"string"!=typeof n.target){var i=t(n.target).attr("id");i||(i=l.getUID(e),t(n.target).attr("id",i)),n.target="#"+i}return l.typeCheckConfig(e,n,u),n},c._getScrollTop=function E(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},c._getScrollHeight=function T(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},c._getOffsetHeight=function y(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},c._process=function C(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){var i=this._targets[this._targets.length-1];return void(this._activeTarget!==i&&this._activate(i))}if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var r=this._offsets.length;r--;){var o=this._activeTarget!==this._targets[r]&&t>=this._offsets[r]&&("undefined"==typeof this._offsets[r+1]||t<this._offsets[r+1]);o&&this._activate(this._targets[r])}},c._activate=function A(e){this._activeTarget=e,this._clear();var n=this._selector.split(",");n=n.map(function(t){return t+'[data-target="'+e+'"],'+(t+'[href="'+e+'"]')});var i=t(n.join(","));i.hasClass(d.DROPDOWN_ITEM)?(i.closest(p.DROPDOWN).find(p.DROPDOWN_TOGGLE).addClass(d.ACTIVE),i.addClass(d.ACTIVE)):(i.addClass(d.ACTIVE),i.parents(p.NAV_LIST_GROUP).prev(p.NAV_LINKS+", "+p.LIST_ITEMS).addClass(d.ACTIVE),i.parents(p.NAV_LIST_GROUP).prev(p.NAV_ITEMS).children(p.NAV_LINKS).addClass(d.ACTIVE)),t(this._scrollElement).trigger(h.ACTIVATE,{relatedTarget:e})},c._clear=function O(){t(this._selector).filter(p.ACTIVE).removeClass(d.ACTIVE)},a._jQueryInterface=function I(e){return this.each(function(){var n=t(this).data(i),r="object"==typeof e&&e;if(n||(n=new a(this,r),t(this).data(i,n)),"string"==typeof e){if("undefined"==typeof n[e])throw new TypeError('No method named "'+e+'"');n[e]()}})},r(a,null,[{key:"VERSION",get:function b(){return n}},{key:"Default",get:function D(){return f}}]),a}();return t(window).on(h.LOAD_DATA_API,function(){for(var e=t.makeArray(t(p.DATA_SPY)),n=e.length;n--;){var i=t(e[n]);m._jQueryInterface.call(i,i.data())}}),t.fn[e]=m._jQueryInterface,t.fn[e].Constructor=m,t.fn[e].noConflict=function(){return t.fn[e]=c,m._jQueryInterface},m}(e),v=function(t){var e="tab",n="4.1.0",i="bs.tab",o="."+i,s=".data-api",a=t.fn[e],c={HIDE:"hide"+o,HIDDEN:"hidden"+o,SHOW:"show"+o,SHOWN:"shown"+o,CLICK_DATA_API:"click"+o+s},f={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},u={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},h=function(){function e(t){this._element=t}var o=e.prototype;return o.show=function s(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&t(this._element).hasClass(f.ACTIVE)||t(this._element).hasClass(f.DISABLED))){var n,i,r=t(this._element).closest(u.NAV_LIST_GROUP)[0],o=l.getSelectorFromElement(this._element);if(r){var s="UL"===r.nodeName?u.ACTIVE_UL:u.ACTIVE;i=t.makeArray(t(r).find(s)),i=i[i.length-1]}var a=t.Event(c.HIDE,{relatedTarget:this._element}),h=t.Event(c.SHOW,{relatedTarget:i});if(i&&t(i).trigger(a),t(this._element).trigger(h),!h.isDefaultPrevented()&&!a.isDefaultPrevented()){o&&(n=t(o)[0]),this._activate(this._element,r);var d=function p(){var n=t.Event(c.HIDDEN,{relatedTarget:e._element}),r=t.Event(c.SHOWN,{relatedTarget:i});t(i).trigger(n),t(e._element).trigger(r)};n?this._activate(n,n.parentNode,d):d()}}},o.dispose=function a(){t.removeData(this._element,i),this._element=null},o._activate=function h(e,n,i){var r=this,o;o="UL"===n.nodeName?t(n).find(u.ACTIVE_UL):t(n).children(u.ACTIVE);var s=o[0],a=i&&s&&t(s).hasClass(f.FADE),c=function d(){return r._transitionComplete(e,s,i)};if(s&&a){var h=l.getTransitionDurationFromElement(s);t(s).one(l.TRANSITION_END,c).emulateTransitionEnd(h)}else c()},o._transitionComplete=function d(e,n,i){if(n){t(n).removeClass(f.SHOW+" "+f.ACTIVE);var r=t(n.parentNode).find(u.DROPDOWN_ACTIVE_CHILD)[0];r&&t(r).removeClass(f.ACTIVE),"tab"===n.getAttribute("role")&&n.setAttribute("aria-selected",!1)}if(t(e).addClass(f.ACTIVE),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),l.reflow(e),t(e).addClass(f.SHOW),e.parentNode&&t(e.parentNode).hasClass(f.DROPDOWN_MENU)){var o=t(e).closest(u.DROPDOWN)[0];o&&t(o).find(u.DROPDOWN_TOGGLE).addClass(f.ACTIVE),e.setAttribute("aria-expanded",!0)}i&&i()},e._jQueryInterface=function p(n){return this.each(function(){var r=t(this),o=r.data(i);if(o||(o=new e(this),r.data(i,o)),"string"==typeof n){if("undefined"==typeof o[n])throw new TypeError('No method named "'+n+'"');o[n]()}})},r(e,null,[{key:"VERSION",get:function g(){return n}}]),e}();return t(document).on(c.CLICK_DATA_API,u.DATA_TOGGLE,function(e){e.preventDefault(),h._jQueryInterface.call(t(this),"show")}),t.fn[e]=h._jQueryInterface,t.fn[e].Constructor=h,t.fn[e].noConflict=function(){return t.fn[e]=a,h._jQueryInterface},h}(e);!function(t){if("undefined"==typeof t)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=t.fn.jquery.split(" ")[0].split("."),n=1,i=2,r=9,o=1,s=4;if(e[0]<i&&e[1]<r||e[0]===n&&e[1]===r&&e[2]<o||e[0]>=s)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(e),t.Util=l,t.Alert=c,t.Button=f,t.Carousel=u,t.Collapse=h,t.Dropdown=d,t.Modal=p,t.Popover=m,t.Scrollspy=_,t.Tab=v,t.Tooltip=g,Object.defineProperty(t,"__esModule",{value:!0})})}.call(this),"undefined"==typeof Package&&(Package={}),Package["alexwine:bootstrap-4"]={}}();

!function(){var e=Package.meteor.Meteor;(function(){!function(e,t){"use strict";function n(e,t){for(var n,r=[],i=0;i<e.length;++i){if(n=s[e[i]]||o(e[i]),!n)throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){s[e]=i.apply(null,arguments)})}function i(e){return!!s[e]}function o(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function a(n){var r,i,o,a,l;for(r=0;r<n.length;r++){i=e,o=n[r],a=o.split(/[.\/]/);for(var c=0;c<a.length-1;++c)i[a[c]]===t&&(i[a[c]]={}),i=i[a[c]];i[a[a.length-1]]=s[o]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(o in s)l[o]=s[o];for(r=0;r<n.length;r++)delete l[n[r]];e.privateModules=l}}var s={},l="tinymce/geom/Rect",c="tinymce/util/Promise",u="tinymce/util/Delay",d="tinymce/Env",f="tinymce/dom/EventUtils",m="tinymce/dom/Sizzle",g="tinymce/util/Arr",p="tinymce/util/Tools",h="tinymce/dom/DomQuery",v="tinymce/html/Styles",y="tinymce/dom/TreeWalker",b="tinymce/dom/Range",x="tinymce/html/Entities",w="tinymce/dom/StyleSheetLoader",C="tinymce/dom/DOMUtils",k="tinymce/dom/ScriptLoader",N="tinymce/AddOnManager",S="tinymce/dom/NodeType",_="tinymce/text/Zwsp",T="tinymce/caret/CaretContainer",E="tinymce/dom/RangeUtils",R="tinymce/NodeChange",A="tinymce/html/Node",B="tinymce/html/Schema",P="tinymce/html/SaxParser",M="tinymce/html/DomParser",D="tinymce/html/Writer",I="tinymce/html/Serializer",L="tinymce/dom/Serializer",O="tinymce/dom/TridentSelection",H="tinymce/util/VK",F="tinymce/dom/ControlSelection",z="tinymce/util/Fun",U="tinymce/caret/CaretCandidate",W="tinymce/geom/ClientRect",$="tinymce/text/ExtendingChar",j="tinymce/caret/CaretPosition",V="tinymce/caret/CaretBookmark",q="tinymce/dom/BookmarkManager",Y="tinymce/dom/Selection",K="tinymce/dom/ElementUtils",X="tinymce/fmt/Preview",G="tinymce/fmt/Hooks",J="tinymce/Formatter",Z="tinymce/undo/Diff",Q="tinymce/undo/Fragments",ee="tinymce/undo/Levels",te="tinymce/UndoManager",ne="tinymce/EnterKey",re="tinymce/ForceBlocks",ie="tinymce/caret/CaretUtils",oe="tinymce/caret/CaretWalker",ae="tinymce/InsertList",se="tinymce/InsertContent",le="tinymce/EditorCommands",ce="tinymce/util/URI",ue="tinymce/util/Class",de="tinymce/util/EventDispatcher",fe="tinymce/data/Binding",me="tinymce/util/Observable",ge="tinymce/data/ObservableObject",pe="tinymce/ui/Selector",he="tinymce/ui/Collection",ve="tinymce/ui/DomUtils",ye="tinymce/ui/BoxUtils",be="tinymce/ui/ClassList",xe="tinymce/ui/ReflowQueue",we="tinymce/ui/Control",Ce="tinymce/ui/Factory",ke="tinymce/ui/KeyboardNavigation",Ne="tinymce/ui/Container",Se="tinymce/ui/DragHelper",_e="tinymce/ui/Scrollable",Te="tinymce/ui/Panel",Ee="tinymce/ui/Movable",Re="tinymce/ui/Resizable",Ae="tinymce/ui/FloatPanel",Be="tinymce/ui/Window",Pe="tinymce/ui/MessageBox",Me="tinymce/WindowManager",De="tinymce/ui/Tooltip",Ie="tinymce/ui/Widget",Le="tinymce/ui/Progress",Oe="tinymce/ui/Notification",He="tinymce/NotificationManager",Fe="tinymce/dom/NodePath",ze="tinymce/util/Quirks",Ue="tinymce/EditorObservable",We="tinymce/Mode",$e="tinymce/Shortcuts",je="tinymce/file/Uploader",Ve="tinymce/file/Conversions",qe="tinymce/file/ImageScanner",Ye="tinymce/file/BlobCache",Ke="tinymce/file/UploadStatus",Xe="tinymce/ErrorReporter",Ge="tinymce/EditorUpload",Je="tinymce/caret/FakeCaret",Ze="tinymce/dom/Dimensions",Qe="tinymce/caret/LineWalker",et="tinymce/caret/LineUtils",tt="tinymce/dom/MousePosition",nt="tinymce/DragDropOverrides",rt="tinymce/SelectionOverrides",it="tinymce/util/Uuid",ot="tinymce/ui/Sidebar",at="tinymce/Editor",st="tinymce/util/I18n",lt="tinymce/FocusManager",ct="tinymce/EditorManager",ut="tinymce/LegacyInput",dt="tinymce/util/XHR",ft="tinymce/util/JSON",mt="tinymce/util/JSONRequest",gt="tinymce/util/JSONP",pt="tinymce/util/LocalStorage",ht="tinymce/Compat",vt="tinymce/ui/Layout",yt="tinymce/ui/AbsoluteLayout",bt="tinymce/ui/Button",xt="tinymce/ui/ButtonGroup",wt="tinymce/ui/Checkbox",Ct="tinymce/ui/ComboBox",kt="tinymce/ui/ColorBox",Nt="tinymce/ui/PanelButton",St="tinymce/ui/ColorButton",_t="tinymce/util/Color",Tt="tinymce/ui/ColorPicker",Et="tinymce/ui/Path",Rt="tinymce/ui/ElementPath",At="tinymce/ui/FormItem",Bt="tinymce/ui/Form",Pt="tinymce/ui/FieldSet",Mt="tinymce/content/LinkTargets",Dt="tinymce/ui/FilePicker",It="tinymce/ui/FitLayout",Lt="tinymce/ui/FlexLayout",Ot="tinymce/ui/FlowLayout",Ht="tinymce/fmt/FontInfo",Ft="tinymce/ui/FormatControls",zt="tinymce/ui/GridLayout",Ut="tinymce/ui/Iframe",Wt="tinymce/ui/InfoBox",$t="tinymce/ui/Label",jt="tinymce/ui/Toolbar",Vt="tinymce/ui/MenuBar",qt="tinymce/ui/MenuButton",Yt="tinymce/ui/MenuItem",Kt="tinymce/ui/Throbber",Xt="tinymce/ui/Menu",Gt="tinymce/ui/ListBox",Jt="tinymce/ui/Radio",Zt="tinymce/ui/ResizeHandle",Qt="tinymce/ui/SelectBox",en="tinymce/ui/Slider",tn="tinymce/ui/Spacer",nn="tinymce/ui/SplitButton",rn="tinymce/ui/StackLayout",on="tinymce/ui/TabPanel",an="tinymce/ui/TextBox",sn="tinymce/Register";r(l,[],function(){function e(e,t,n){var r,i,a,s,l,u;return r=t.x,i=t.y,a=e.w,s=e.h,l=t.w,u=t.h,n=(n||"").split(""),"b"===n[0]&&(i+=u),"r"===n[1]&&(r+=l),"c"===n[0]&&(i+=c(u/2)),"c"===n[1]&&(r+=c(l/2)),"b"===n[3]&&(i-=s),"r"===n[4]&&(r-=a),"c"===n[3]&&(i-=c(s/2)),"c"===n[4]&&(r-=c(a/2)),o(r,i,a,s)}function t(t,n,r,i){var o,a;for(a=0;a<i.length;a++)if(o=e(t,n,i[a]),o.x>=r.x&&o.x+o.w<=r.w+r.x&&o.y>=r.y&&o.y+o.h<=r.h+r.y)return i[a];return null}function n(e,t,n){return o(e.x-t,e.y-n,e.w+2*t,e.h+2*n)}function r(e,t){var n,r,i,a;return n=l(e.x,t.x),r=l(e.y,t.y),i=s(e.x+e.w,t.x+t.w),a=s(e.y+e.h,t.y+t.h),0>i-n||0>a-r?null:o(n,r,i-n,a-r)}function i(e,t,n){var r,i,a,s,c,u,d,f,m,g;return c=e.x,u=e.y,d=e.x+e.w,f=e.y+e.h,m=t.x+t.w,g=t.y+t.h,r=l(0,t.x-c),i=l(0,t.y-u),a=l(0,d-m),s=l(0,f-g),c+=r,u+=i,n&&(d+=r,f+=i,c-=a,u-=s),d-=a,f-=s,o(c,u,d-c,f-u)}function o(e,t,n,r){return{x:e,y:t,w:n,h:r}}function a(e){return o(e.left,e.top,e.width,e.height)}var s=Math.min,l=Math.max,c=Math.round;return{inflate:n,relativePosition:e,findBestRelativePosition:t,intersect:r,clamp:i,create:o,fromClientRect:a}}),r(c,[],function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(t,e(r,this),e(i,this))}function n(e){var t=this;return null===this._state?void this._deferreds.push(e):void l(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(i){return void e.reject(i)}e.resolve(r)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void s(e(n,t),e(r,this),e(i,this))}this._state=!0,this._value=t,o.call(this)}catch(a){i.call(this,a)}}function i(e){this._state=!1,this._value=e,o.call(this)}function o(){for(var e=0,t=this._deferreds.length;t>e;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function s(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(i){if(r)return;r=!0,n(i)}}if(window.Promise)return window.Promise;var l=t.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return t.prototype["catch"]=function(e){return this.then(null,e)},t.prototype.then=function(e,r){var i=this;return new t(function(t,o){n.call(i,new a(e,r,t,o))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new t(function(t,n){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(o,e)},n)}e[o]=a,0===--i&&t(e)}catch(l){n(l)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)r(o,e[o])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=0,i=e.length;i>r;r++)e[r].then(t,n)})},t}),r(u,[c],function(e){function t(e,t){function n(e){window.setTimeout(e,0)}var r,i=window.requestAnimationFrame,o=["ms","moz","webkit"];for(r=0;r<o.length&&!i;r++)i=window[o[r]+"RequestAnimationFrame"];i||(i=n),i(e,t)}function n(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)}function r(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)}function i(e){return clearTimeout(e)}function o(e){return clearInterval(e)}function a(e,t){var r,i;return i=function(){var i=arguments;clearTimeout(r),r=n(function(){e.apply(this,i)},t)},i.stop=function(){clearTimeout(r)},i}var s;return{requestAnimationFrame:function(n,r){return s?void s.then(n):void(s=new e(function(e){r||(r=document.body),t(e,r)}).then(n))},setTimeout:n,setInterval:r,setEditorTimeout:function(e,t,r){return n(function(){e.removed||t()},r)},setEditorInterval:function(e,t,n){var i;return i=r(function(){e.removed?clearInterval(i):t()},n)},debounce:a,throttle:a,clearInterval:o,clearTimeout:i}}),r(d,[],function(){function e(e){return"matchMedia"in window&&matchMedia(e).matches}var t=navigator,n=t.userAgent,r,i,o,a,s,l,c,u,d,f,m,g,p;r=window.opera&&window.opera.buildNumber,d=/Android/.test(n),i=/WebKit/.test(n),o=!i&&!r&&/MSIE/gi.test(n)&&/Explorer/gi.test(t.appName),o=o&&/MSIE (\w+)\./.exec(n)[1],a=-1!=n.indexOf("Trident/")&&(-1!=n.indexOf("rv:")||-1!=t.appName.indexOf("Netscape"))&&11,s=-1!=n.indexOf("Edge/")&&!o&&!a&&12,o=o||a||s,l=!i&&!a&&/Gecko/.test(n),c=-1!=n.indexOf("Mac"),u=/(iPad|iPhone)/.test(n),f="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,m=e("only screen and (max-device-width: 480px)")&&(d||u),g=e("only screen and (min-width: 800px)")&&(d||u),p=-1!=n.indexOf("Windows Phone"),s&&(i=!1);var h=!u||f||n.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:r,webkit:i,ie:o,gecko:l,mac:c,iOS:u,android:d,contentEditable:h,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=o,range:window.getSelection&&"Range"in window,documentMode:o&&!s?document.documentMode||7:10,fileApi:f,ceFalse:o===!1||o>8,canHaveCSP:o===!1||o>11,desktop:!m&&!g,windowsPhone:p}}),r(f,[u,d],function(e,t){function n(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function r(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function i(e,t){var n,r=t;return n=e.path,n&&n.length>0&&(r=n[0]),e.deepPath&&(n=e.deepPath(),n&&n.length>0&&(r=n[0])),r}function o(e,n){function r(){return!1}function o(){return!0}var a,s=n||{},l;for(a in e)u[a]||(s[a]=e[a]);if(s.target||(s.target=s.srcElement||document),t.experimentalShadowDom&&(s.target=i(e,s.target)),e&&c.test(e.type)&&e.pageX===l&&e.clientX!==l){var d=s.target.ownerDocument||document,f=d.documentElement,m=d.body;s.pageX=e.clientX+(f&&f.scrollLeft||m&&m.scrollLeft||0)-(f&&f.clientLeft||m&&m.clientLeft||0),s.pageY=e.clientY+(f&&f.scrollTop||m&&m.scrollTop||0)-(f&&f.clientTop||m&&m.clientTop||0)}return s.preventDefault=function(){s.isDefaultPrevented=o,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=o,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=o,s.stopPropagation()},s.isDefaultPrevented||(s.isDefaultPrevented=r,s.isPropagationStopped=r,s.isImmediatePropagationStopped=r),"undefined"==typeof s.metaKey&&(s.metaKey=!1),s}function a(t,i,o){function a(){o.domLoaded||(o.domLoaded=!0,i(u))}function s(){("complete"===c.readyState||"interactive"===c.readyState&&c.body)&&(r(c,"readystatechange",s),a())}function l(){try{c.documentElement.doScroll("left")}catch(t){return void e.setTimeout(l)}a()}var c=t.document,u={type:"ready"};return o.domLoaded?void i(u):(c.addEventListener?"complete"===c.readyState?a():n(t,"DOMContentLoaded",a):(n(c,"readystatechange",s),c.documentElement.doScroll&&t.self===t.top&&l()),void n(t,"load",a))}function s(){function e(e,t){var n,r,o,a,s=i[t];if(n=s&&s[e.type])for(r=0,o=n.length;o>r;r++)if(a=n[r],a&&a.func.call(a.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var t=this,i={},s,c,u,d,f;c=l+(+new Date).toString(32),d="onmouseenter"in document.documentElement,u="onfocusin"in document.documentElement,f={mouseenter:"mouseover",mouseleave:"mouseout"},s=1,t.domLoaded=!1,t.events=i,t.bind=function(r,l,m,g){function p(t){e(o(t||k.event),h)}var h,v,y,b,x,w,C,k=window;if(r&&3!==r.nodeType&&8!==r.nodeType){for(r[c]?h=r[c]:(h=s++,r[c]=h,i[h]={}),g=g||r,l=l.split(" "),y=l.length;y--;)b=l[y],w=p,x=C=!1,"DOMContentLoaded"===b&&(b="ready"),t.domLoaded&&"ready"===b&&"complete"==r.readyState?m.call(g,o({type:b})):(d||(x=f[b],x&&(w=function(t){var n,r;if(n=t.currentTarget,r=t.relatedTarget,r&&n.contains)r=n.contains(r);else for(;r&&r!==n;)r=r.parentNode;r||(t=o(t||k.event),t.type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=n,e(t,h))})),u||"focusin"!==b&&"focusout"!==b||(C=!0,x="focusin"===b?"focus":"blur",w=function(t){t=o(t||k.event),t.type="focus"===t.type?"focusin":"focusout",e(t,h)}),v=i[h][b],v?"ready"===b&&t.domLoaded?m({type:b}):v.push({func:m,scope:g}):(i[h][b]=v=[{func:m,scope:g}],v.fakeName=x,v.capture=C,v.nativeHandler=w,"ready"===b?a(r,w,t):n(r,x||b,w,C)));return r=v=0,m}},t.unbind=function(e,n,o){var a,s,l,u,d,f;if(!e||3===e.nodeType||8===e.nodeType)return t;if(a=e[c]){if(f=i[a],n){for(n=n.split(" "),l=n.length;l--;)if(d=n[l],s=f[d]){if(o)for(u=s.length;u--;)if(s[u].func===o){var m=s.nativeHandler,g=s.fakeName,p=s.capture;s=s.slice(0,u).concat(s.slice(u+1)),s.nativeHandler=m,s.fakeName=g,s.capture=p,f[d]=s}o&&0!==s.length||(delete f[d],r(e,s.fakeName||d,s.nativeHandler,s.capture))}}else{for(d in f)s=f[d],r(e,s.fakeName||d,s.nativeHandler,s.capture);f={}}for(d in f)return t;delete i[a];try{delete e[c]}catch(h){e[c]=null}}return t},t.fire=function(n,r,i){var a;if(!n||3===n.nodeType||8===n.nodeType)return t;i=o(null,i),i.type=r,i.target=n;do a=n[c],a&&e(i,a),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow;while(n&&!i.isPropagationStopped());return t},t.clean=function(e){var n,r,i=t.unbind;if(!e||3===e.nodeType||8===e.nodeType)return t;if(e[c]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),r=e.getElementsByTagName("*"),n=r.length;n--;)e=r[n],e[c]&&i(e);return t},t.destroy=function(){i={}},t.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var l="mce-data-",c=/^(?:mouse|contextmenu)|click/,u={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1};return s.Event=new s,s.Event.bind(window,"ready",function(){}),s}),r(m,[],function(){function e(e,t,n,r){var i,o,a,s,l,c,d,m,g,p;if((t?t.ownerDocument||t:z)!==P&&B(t),t=t||P,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(D&&!r){if(i=ve.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&H(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&w.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!I||!I.test(e))){if(m=d=F,g=t,p=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=S(e),(d=t.getAttribute("id"))?m=d.replace(be,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",l=c.length;l--;)c[l]=m+f(c[l]);g=ye.test(e)&&u(t.parentNode)||t,p=c.join(",")}if(p)try{return Q.apply(n,g.querySelectorAll(p)),n}catch(h){}finally{d||t.removeAttribute("id")}}}return T(e.replace(se,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[F]=!0,e}function i(e){var t=P.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)C.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function u(e){return e&&typeof e.getElementsByTagName!==Y&&e}function d(){}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function m(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=W++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,c=[U,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[F]||(t[F]={}),(s=l[r])&&s[0]===U&&s[1]===o)return c[2]=s[2];if(l[r]=c,c[2]=e(t,n,a))return!0}}}function g(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function p(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function h(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function v(e,t,n,i,o,a){return i&&!i[F]&&(i=v(i)),o&&!o[F]&&(o=v(o,a)),r(function(r,a,s,l){var c,u,d,f=[],m=[],g=a.length,v=r||p(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:h(v,f,e,s,l),b=n?o||(r?e:g||i)?[]:a:y;if(n&&n(y,b,s,l),i)for(c=h(b,m),i(c,[],s,l),u=c.length;u--;)(d=c[u])&&(b[m[u]]=!(y[m[u]]=d));if(r){if(o||e){if(o){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(y[u]=d);o(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=o?te.call(r,d):f[u])>-1&&(r[c]=!(a[c]=d))}}else b=h(b===a?b.splice(g,b.length):b),o?o(null,a,b,l):Q.apply(a,b)})}function y(e){for(var t,n,r,i=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,l=m(function(e){return e===t},a,!0),c=m(function(e){return te.call(t,e)>-1},a,!0),u=[function(e,n,r){return!o&&(r||n!==E)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];i>s;s++)if(n=C.relative[e[s].type])u=[m(g(u),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[F]){for(r=++s;i>r&&!C.relative[e[r].type];r++);return v(s>1&&g(u),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&f(e))}u.push(n)}return g(u)}function b(t,n){var i=n.length>0,o=t.length>0,a=function(r,a,s,l,c){var u,d,f,m=0,g="0",p=r&&[],v=[],y=E,b=r||o&&C.find.TAG("*",c),x=U+=null==y?1:Math.random()||.1,w=b.length;for(c&&(E=a!==P&&a);g!==w&&null!=(u=b[g]);g++){if(o&&u){for(d=0;f=t[d++];)if(f(u,a,s)){l.push(u);break}c&&(U=x)}i&&((u=!f&&u)&&m--,r&&p.push(u))}if(m+=g,i&&g!==m){for(d=0;f=n[d++];)f(p,v,a,s);if(r){if(m>0)for(;g--;)p[g]||v[g]||(v[g]=J.call(l));v=h(v)}Q.apply(l,v),c&&!r&&v.length>0&&m+n.length>1&&e.uniqueSort(l)}return c&&(U=x,E=y),p};return i?r(a):a}var x,w,C,k,N,S,_,T,E,R,A,B,P,M,D,I,L,O,H,F="sizzle"+-new Date,z=window.document,U=0,W=0,$=n(),j=n(),V=n(),q=function(e,t){return e===t&&(A=!0),0},Y=typeof t,K=1<<31,X={}.hasOwnProperty,G=[],J=G.pop,Z=G.push,Q=G.push,ee=G.slice,te=G.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+re+"*("+ie+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+re+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),le=new RegExp("^"+re+"*,"+re+"*"),ce=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),ue=new RegExp("="+re+"*([^\\]'\"]*?)"+re+"*\\]","g"),de=new RegExp(ae),fe=new RegExp("^"+ie+"$"),me={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),we=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Q.apply(G=ee.call(z.childNodes),z.childNodes),G[z.childNodes.length].nodeType}catch(Ce){Q={apply:G.length?function(e,t){Z.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=e.support={},N=e.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},B=e.setDocument=function(e){function t(e){try{return e.top}catch(t){}return null}var n,r=e?e.ownerDocument||e:z,o=r.defaultView;return r!==P&&9===r.nodeType&&r.documentElement?(P=r,M=r.documentElement,D=!N(r),o&&o!==t(o)&&(o.addEventListener?o.addEventListener("unload",function(){B()},!1):o.attachEvent&&o.attachEvent("onunload",function(){B()})),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=he.test(r.getElementsByClassName),w.getById=i(function(e){return M.appendChild(e).id=F,!r.getElementsByName||!r.getElementsByName(F).length}),w.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==Y&&D){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(xe,we);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(xe,we);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},C.find.CLASS=w.getElementsByClassName&&function(e,t){return D?t.getElementsByClassName(e):void 0},L=[],I=[],(w.qsa=he.test(r.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||I.push("\\["+re+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||I.push(":checked")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&I.push("name"+re+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(w.matchesSelector=he.test(O=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&i(function(e){w.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),L.push("!=",ae)}),I=I.length&&new RegExp(I.join("|")),L=L.length&&new RegExp(L.join("|")),n=he.test(M.compareDocumentPosition),H=n||he.test(M.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=n?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===z&&H(z,e)?-1:t===r||t.ownerDocument===z&&H(z,t)?1:R?te.call(R,e)-te.call(R,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,i=0,o=e.parentNode,s=t.parentNode,l=[e],c=[t];if(!o||!s)return e===r?-1:t===r?1:o?-1:s?1:R?te.call(R,e)-te.call(R,t):0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[i]===c[i];)i++;return i?a(l[i],c[i]):l[i]===z?-1:c[i]===z?1:0},r):P},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==P&&B(t),n=n.replace(ue,"='$1']"),!(!w.matchesSelector||!D||L&&L.test(n)||I&&I.test(n)))try{var r=O.call(t,n);if(r||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,P,null,[t]).length>0},e.contains=function(e,t){return(e.ownerDocument||e)!==P&&B(e),H(e,t)},e.attr=function(e,n){(e.ownerDocument||e)!==P&&B(e);var r=C.attrHandle[n.toLowerCase()],i=r&&X.call(C.attrHandle,n.toLowerCase())?r(e,n,!D):t;return i!==t?i:w.attributes||!D?e.getAttribute(n):(i=e.getAttributeNode(n))&&i.specified?i.value:null},e.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},e.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!w.detectDuplicates,R=!w.sortStable&&e.slice(0),e.sort(q),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return R=null,e},k=e.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=k(t);return n},C=e.selectors={cacheLength:50,createPseudo:r,match:me,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,we),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(e){var t,n=!e[6]&&e[2];return me.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&$(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,f,m,g,p=o!==a?"nextSibling":"previousSibling",h=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(h){if(o){for(;p;){for(d=t;d=d[p];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;g=p="only"===e&&!g&&"nextSibling"}return!0}if(g=[a?h.firstChild:h.lastChild],a&&y){for(u=h[F]||(h[F]={}),c=u[e]||[],m=c[0]===U&&c[1],f=c[0]===U&&c[2],d=m&&h.childNodes[m];d=++m&&d&&d[p]||(f=m=0)||g.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[U,m,f];break}}else if(y&&(c=(t[F]||(t[F]={}))[e])&&c[0]===U)f=c[1];else for(;(d=++m&&d&&d[p]||(f=m=0)||g.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[F]||(d[F]={}))[e]=[U,f]),d!==t)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(t,n){var i,o=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[F]?o(n):o.length>1?(i=[t,t,"",n],C.setFilters.hasOwnProperty(t.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=te.call(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=_(e.replace(se,"$1"));return i[F]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(e){return e=e.replace(xe,we),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:r(function(t){return fe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xe,we).toLowerCase(),function(e){var n;do if(n=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===M},focus:function(e){return e===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},C.pseudos.nth=C.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})C.pseudos[x]=l(x);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,S=e.tokenize=function(t,n){var r,i,o,a,s,l,c,u=j[t+" "];if(u)return n?0:u.slice(0);for(s=t,l=[],c=C.preFilter;s;){r&&!(i=le.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(se," ")}),s=s.slice(r.length));for(a in C.filter)!(i=me[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):j(t,l).slice(0)},_=e.compile=function(e,t){var n,r=[],i=[],o=V[e+" "];if(!o){for(t||(t=S(e)),n=t.length;n--;)o=y(t[n]),o[F]?r.push(o):i.push(o);o=V(e,b(i,r)),o.selector=e}return o},T=e.select=function(e,t,n,r){
var i,o,a,s,l,c="function"==typeof e&&e,d=!r&&S(e=c.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&D&&C.relative[o[1].type]){if(t=(C.find.ID(a.matches[0].replace(xe,we),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=me.needsContext.test(e)?0:o.length;i--&&(a=o[i],!C.relative[s=a.type]);)if((l=C.find[s])&&(r=l(a.matches[0].replace(xe,we),ye.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&f(o),!e)return Q.apply(n,r),n;break}}return(c||_(e,d))(r,t,!D,n,ye.test(e)&&u(t.parentNode)||t),n},w.sortStable=F.split("").sort(q).join("")===F,w.detectDuplicates=!!A,B(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(P.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),e}),r(g,[],function(){function e(e){var t=e,n,r;if(!u(e))for(t=[],n=0,r=e.length;r>n;n++)t[n]=e[n];return t}function n(e,n,r){var i,o;if(!e)return 0;if(r=r||e,e.length!==t){for(i=0,o=e.length;o>i;i++)if(n.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return 0;return 1}function r(e,t){var r=[];return n(e,function(n,i){r.push(t(n,i,e))}),r}function i(e,t){var r=[];return n(e,function(n,i){t&&!t(n,i,e)||r.push(n)}),r}function o(e,t){var n,r;if(e)for(n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function a(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n}function s(e,t,n){var r,i;for(r=0,i=e.length;i>r;r++)if(t.call(n,e[r],r,e))return r;return-1}function l(e,n,r){var i=s(e,n,r);return-1!==i?e[i]:t}function c(e){return e[e.length-1]}var u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{isArray:u,toArray:e,each:n,map:r,filter:i,indexOf:o,reduce:a,findIndex:s,find:l,last:c}}),r(p,[d,g],function(e,n){function r(e){return null===e||e===t?"":(""+e).replace(g,"")}function i(e,r){return r?!("array"!=r||!n.isArray(e))||typeof e==r:e!==t}function o(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e,t,n){var r=this,i,o,a,s,l,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),a=e[3].match(/(^|\.)(\w+)$/i)[2],o=r.createNS(e[3].replace(/\.\w+$/,""),n),!o[a]){if("static"==e[2])return o[a]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[a]));t[a]||(t[a]=function(){},c=1),o[a]=t[a],r.extend(o[a].prototype,t),e[5]&&(i=r.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],l=o[a],c?o[a]=function(){return i[s].apply(this,arguments)}:o[a]=function(){return this.parent=i[s],l.apply(this,arguments)},o[a].prototype[a]=o[a],r.each(i,function(e,t){o[a].prototype[t]=i[t]}),r.each(t,function(e,t){i[t]?o[a].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=a&&(o[a].prototype[t]=e)})),r.each(t["static"],function(e,t){o[a][t]=e})}}function l(e,n){var r,i,o,a=arguments,s;for(r=1,i=a.length;i>r;r++){n=a[r];for(o in n)n.hasOwnProperty(o)&&(s=n[o],s!==t&&(e[o]=s))}return e}function c(e,t,r,i){i=i||this,e&&(r&&(e=e[r]),n.each(e,function(e,n){return t.call(i,e,n,r)!==!1&&void c(e,t,r,i)}))}function u(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t}function d(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;r>n&&(t=t[e[n]]);n++);return t}function f(e,t){return!e||i(e,"array")?e:n.map(e.split(t||","),r)}function m(t){var n=e.cacheSuffix;return n&&(t+=(-1===t.indexOf("?")?"?":"&")+n),t}var g=/^\s*|\s*$/g;return{trim:r,isArray:n.isArray,is:i,toArray:n.toArray,makeMap:o,each:n.each,map:n.map,grep:n.filter,inArray:n.indexOf,hasOwn:a,extend:l,create:s,walk:c,createNS:u,resolve:d,explode:f,_addCacheSuffix:m}}),r(h,[f,m,p,d],function(e,n,r,i){function o(e){return"undefined"!=typeof e}function a(e){return"string"==typeof e}function s(e){return e&&e==e.window}function l(e,t){var n,r,i;for(t=t||C,i=t.createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return n}function c(e,t,n,r){var i;if(a(t))t=l(t,v(e[0]));else if(t.length&&!t.nodeType){if(t=f.makeArray(t),r)for(i=t.length-1;i>=0;i--)c(e,t[i],n,r);else for(i=0;i<t.length;i++)c(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e}function u(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function d(e,t,n){var r,i;return t=f(t)[0],e.each(function(){var e=this;n&&r==e.parentNode?i.appendChild(e):(r=e.parentNode,i=t.cloneNode(!1),e.parentNode.insertBefore(i,e),i.appendChild(e))}),e}function f(e,t){return new f.fn.init(e,t)}function m(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function g(e){return null===e||e===T?"":(""+e).replace(I,"")}function p(e,t){var n,r,i,o,a;if(e)if(n=e.length,n===o){for(r in e)if(e.hasOwnProperty(r)&&(a=e[r],t.call(a,r,a)===!1))break}else for(i=0;n>i&&(a=e[i],t.call(a,i,a)!==!1);i++);return e}function h(e,t){var n=[];return p(e,function(e,r){t(r,e)&&n.push(r)}),n}function v(e){return e?9==e.nodeType?e:e.ownerDocument:C}function y(e,n,r){var i=[],o=e[n];for("string"!=typeof r&&r instanceof f&&(r=r[0]);o&&9!==o.nodeType;){if(r!==t){if(o===r)break;if("string"==typeof r&&f(o).is(r))break}1===o.nodeType&&i.push(o),o=o[n]}return i}function b(e,n,r,i){var o=[];for(i instanceof f&&(i=i[0]);e;e=e[n])if(!r||e.nodeType===r){if(i!==t){if(e===i)break;if("string"==typeof i&&f(e).is(i))break}o.push(e)}return o}function x(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function w(e,t,n){p(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})}var C=document,k=Array.prototype.push,N=Array.prototype.slice,S=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,_=e.Event,T,E=r.makeMap("children,contents,next,prev"),R=r.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),A=r.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),B={"for":"htmlFor","class":"className",readonly:"readOnly"},P={"float":"cssFloat"},M={},D={},I=/^\s*|\s*$/g;return f.fn=f.prototype={constructor:f,selector:"",context:null,length:0,init:function(e,t){var n=this,r,i;if(!e)return n;if(e.nodeType)return n.context=n[0]=e,n.length=1,n;if(t&&t.nodeType)n.context=t;else{if(t)return f(e).attr(t);n.context=t=document}if(a(e)){if(n.selector=e,r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:S.exec(e),!r)return f(t).find(e);if(r[1])for(i=l(e,v(t)).firstChild;i;)k.call(n,i),i=i.nextSibling;else{if(i=v(t).getElementById(r[2]),!i)return n;if(i.id!==r[2])return n.find(e);n.length=1,n[0]=i}}else this.add(e,!1);return n},toArray:function(){return r.toArray(this)},add:function(e,t){var n=this,r,i;if(a(e))return n.add(f(e));if(t!==!1)for(r=f.unique(n.toArray().concat(f.makeArray(e))),n.length=r.length,i=0;i<r.length;i++)n[i]=r[i];else k.apply(n,f.makeArray(e));return n},attr:function(e,t){var n=this,r;if("object"==typeof e)p(e,function(e,t){n.attr(e,t)});else{if(!o(t)){if(n[0]&&1===n[0].nodeType){if(r=M[e],r&&r.get)return r.get(n[0],e);if(A[e])return n.prop(e)?e:T;t=n[0].getAttribute(e,2),null===t&&(t=T)}return t}this.each(function(){var n;if(1===this.nodeType){if(n=M[e],n&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return n},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=B[e]||e,"object"==typeof e)p(e,function(e,t){n.prop(e,t)});else{if(!o(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){function n(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function r(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var i=this,a,s;if("object"==typeof e)p(e,function(e,t){i.css(e,t)});else if(o(t))e=n(e),"number"!=typeof t||R[e]||(t+="px"),i.each(function(){var n=this.style;if(s=D[e],s&&s.set)return void s.set(this,t);try{this.style[P[e]||e]=t}catch(i){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(r(e)):n.removeAttribute(e))});else{if(a=i[0],s=D[e],s&&s.get)return s.get(a);if(a.ownerDocument.defaultView)try{return a.ownerDocument.defaultView.getComputedStyle(a,null).getPropertyValue(r(e))}catch(l){return T}else if(a.currentStyle)return a.currentStyle[n(e)]}return i},remove:function(){for(var e=this,t,n=this.length;n--;)t=e[n],_.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var e=this,t,n=this.length;n--;)for(t=e[n];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(e){var t=this,n;if(o(e)){n=t.length;try{for(;n--;)t[n].innerHTML=e}catch(r){f(t[n]).empty().append(e)}return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this,n;if(o(e)){for(n=t.length;n--;)"innerText"in t[n]?t[n].innerText=e:t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return c(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return c(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?c(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?c(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return f(e).append(this),this},prependTo:function(e){return f(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return d(this,e)},wrapAll:function(e){return d(this,e,!0)},wrapInner:function(e){return this.each(function(){f(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){f(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),f(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?p(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var i,o;o=u(r,e),o!==t&&(i=r.className,o?r.className=g((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e)}),n)},hasClass:function(e){return u(this[0],e)},each:function(e){return p(this,e)},on:function(e,t){return this.each(function(){_.bind(this,e,t)})},off:function(e,t){return this.each(function(){_.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?_.fire(this,e.type,e):_.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new f(N.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;n>t;t++)f.find(e,this[t],r);return f(r)},filter:function(e){return f("function"==typeof e?h(this.toArray(),function(t,n){return e(n,t)}):f.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof f&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&f(r).is(e)){t.push(r);break}if(r==e){t.push(r);break}r=r.parentNode}}),f(t)},offset:function(e){var t,n,r,i=0,o=0,a;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,r=n.documentElement,t.getBoundingClientRect&&(a=t.getBoundingClientRect(),i=a.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,o=a.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:i,top:o})},push:k,sort:[].sort,splice:[].splice},r.extend(f,{extend:r.extend,makeArray:function(e){return s(e)||e.nodeType?[e]:r.toArray(e)},inArray:m,isArray:r.isArray,each:p,trim:g,grep:h,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!=t[r].nodeType&&t.splice(r,1);return t=1===t.length?f.find.matchesSelector(t[0],e)?[t[0]]:[]:f.find.matches(e,t)}}),p({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return y(e,"parentNode")},next:function(e){return x(e,"nextSibling",1)},prev:function(e){return x(e,"previousSibling",1)},children:function(e){return b(e.firstChild,"nextSibling",1)},contents:function(e){return r.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){f.fn[e]=function(n){var r=this,i=[];return r.each(function(){var e=t.call(i,this,n,i);e&&(f.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(E[e]||(i=f.unique(i)),0===e.indexOf("parents")&&(i=i.reverse())),i=f(i),n?i.filter(n):i}}),p({parentsUntil:function(e,t){return y(e,"parentNode",t)},nextUntil:function(e,t){return b(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return b(e,"previousSibling",1,t).slice(1)}},function(e,t){f.fn[e]=function(n,r){var i=this,o=[];return i.each(function(){var e=t.call(o,this,n,o);e&&(f.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(o=f.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())),o=f(o),r?o.filter(r):o}}),f.fn.is=function(e){return!!e&&this.filter(e).length>0},f.fn.init.prototype=f.fn,f.overrideDefaults=function(e){function t(r,i){return n=n||e(),0===arguments.length&&(r=n.element),i||(i=n.context),new t.fn.init(r,i)}var n;return f.extend(t,this),t},i.ie&&i.ie<8&&(w(M,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?T:t},size:function(e){var t=e.size;return 20===t?T:t},"class":function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?T:t}}),w(M,"set",{"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),i.ie&&i.ie<9&&(P["float"]="styleFloat",w(D,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),f.attrHooks=M,f.cssHooks=D,f}),r(v,[],function(){return function(e,t){function n(e,t,n,r){function i(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,i=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,s,l={},c,u,d,f="\ufeff";for(e=e||{},t&&(u=t.getValidStyles(),d=t.getInvalidStyles()),c=("\\\" \\' \\; \\: ; : "+f).split(" "),s=0;s<c.length;s++)l[c[s]]=f+s,l[f+s]=c[s];return{toHex:function(e){return e.replace(r,n)},parse:function(t){function c(e,t,n){var r,i,o,a;if(r=y[e+"-top"+t],r&&(i=y[e+"-right"+t],i&&(o=y[e+"-bottom"+t],o&&(a=y[e+"-left"+t])))){var l=[r,i,o,a];for(s=l.length-1;s--&&l[s]===l[s+1];);s>-1&&n||(y[e+t]=-1==s?l[0]:l.join(" "),delete y[e+"-top"+t],delete y[e+"-right"+t],delete y[e+"-bottom"+t],delete y[e+"-left"+t])}}function u(e){var t=y[e],n;if(t){for(t=t.split(" "),n=t.length;n--;)if(t[n]!==t[0])return!1;return y[e]=t[0],!0}}function d(e,t,n,r){u(t)&&u(n)&&u(r)&&(y[e]=y[t]+" "+y[n]+" "+y[r],delete y[t],delete y[n],delete y[r])}function m(e){return C=!0,l[e]}function g(e,t){return C&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return l[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(e){return String.fromCharCode(parseInt(e.slice(1),16))}function h(e){return e.replace(/\\[0-9a-f]+/gi,p)}function v(t,n,r,i,o,a){if(o=o||a)return o=g(o),"'"+o.replace(/\'/g,"\\'")+"'";if(n=g(n||r||i),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return k&&(n=k.call(N,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var y={},b,x,w,C,k=e.url_converter,N=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,m).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,m)});b=o.exec(t);)if(o.lastIndex=b.index+b[0].length,x=b[1].replace(a,"").toLowerCase(),w=b[2].replace(a,""),x&&w){if(x=h(x),w=h(w),-1!==x.indexOf(f)||-1!==x.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"==x||/expression\s*\(|\/\*|\*\//.test(w)))continue;"font-weight"===x&&"700"===w?w="bold":"color"!==x&&"background-color"!==x||(w=w.toLowerCase()),w=w.replace(r,n),w=w.replace(i,v),y[x]=C?g(w,!0):w}c("border","",!0),c("border","-width"),c("border","-color"),c("border","-style"),c("padding",""),c("margin",""),d("border","border-width","border-style","border-color"),"medium none"===y.border&&delete y.border,"none"===y["border-image"]&&delete y["border-image"]}return y},serialize:function(e,t){function n(t){var n,r,o,a;if(n=u[t])for(r=0,o=n.length;o>r;r++)t=n[r],a=e[t],a&&(i+=(i.length>0?" ":"")+t+": "+a+";")}function r(e,t){var n;return n=d["*"],!(n&&n[e]||(n=d[t],n&&n[e]))}var i="",o,a;if(t&&u)n("*"),n(t);else for(o in e)a=e[o],!a||d&&!r(o,t)||(i+=(i.length>0?" ":"")+o+": "+a+";");return i}}}}),r(y,[],function(){return function(e,t){function n(e,n,r,i){var o,a;if(e){if(!i&&e[n])return e[n];if(e!=t){if(o=e[r])return o;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(o=a[r])return o}}}function r(e,n,r,i){var o,a,s;if(e){if(o=e[r],t&&o===t)return;if(o){if(!i)for(s=o[n];s;s=s[n])if(!s[n])return s;return o}if(a=e.parentNode,a&&a!==t)return a}}var i=e;this.current=function(){return i},this.next=function(e){return i=n(i,"firstChild","nextSibling",e)},this.prev=function(e){return i=n(i,"lastChild","previousSibling",e)},this.prev2=function(e){return i=r(i,"lastChild","previousSibling",e)}}}),r(b,[p],function(e){function t(n){function r(){return I.createDocumentFragment()}function i(e,t){k(F,e,t)}function o(e,t){k(z,e,t)}function a(e){i(e.parentNode,q(e))}function s(e){i(e.parentNode,q(e)+1)}function l(e){o(e.parentNode,q(e))}function c(e){o(e.parentNode,q(e)+1)}function u(e){e?(D[$]=D[W],D[j]=D[U]):(D[W]=D[$],D[U]=D[j]),D.collapsed=F}function d(e){a(e),c(e)}function f(e){i(e,0),o(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function m(e,t){var n=D[W],r=D[U],i=D[$],o=D[j],a=t.startContainer,s=t.startOffset,l=t.endContainer,c=t.endOffset;return 0===e?C(n,r,a,s):1===e?C(i,o,a,s):2===e?C(i,o,l,c):3===e?C(n,r,l,c):void 0}function g(){N(H)}function p(){return N(L)}function h(){return N(O)}function v(e){var t=this[W],r=this[U],i,o;3!==t.nodeType&&4!==t.nodeType||!t.nodeValue?(t.childNodes.length>0&&(o=t.childNodes[r]),o?t.insertBefore(e,o):3==t.nodeType?n.insertAfter(e,t):t.appendChild(e)):r?r>=t.nodeValue.length?n.insertAfter(e,t):(i=t.splitText(r),t.parentNode.insertBefore(e,i)):t.parentNode.insertBefore(e,t)}function y(e){var t=D.extractContents();D.insertNode(e),e.appendChild(t),D.selectNode(e)}function b(){return V(new t(n),{startContainer:D[W],startOffset:D[U],endContainer:D[$],endOffset:D[j],collapsed:D.collapsed,commonAncestorContainer:D.commonAncestorContainer})}function x(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function w(){return D[W]==D[$]&&D[U]==D[j]}function C(e,t,r,i){var o,a,s,l,c,u;if(e==r)return t==i?0:i>t?-1:1;for(o=r;o&&o.parentNode!=e;)o=o.parentNode;if(o){for(a=0,s=e.firstChild;s!=o&&t>a;)a++,s=s.nextSibling;return a>=t?-1:1}for(o=e;o&&o.parentNode!=r;)o=o.parentNode;if(o){for(a=0,s=r.firstChild;s!=o&&i>a;)a++,s=s.nextSibling;return i>a?-1:1}for(l=n.findCommonAncestor(e,r),c=e;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),u=r;u&&u.parentNode!=l;)u=u.parentNode;if(u||(u=l),c==u)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==u)return 1;s=s.nextSibling}}function k(e,t,r){var i,o;for(e?(D[W]=t,D[U]=r):(D[$]=t,D[j]=r),i=D[$];i.parentNode;)i=i.parentNode;for(o=D[W];o.parentNode;)o=o.parentNode;o==i?C(D[W],D[U],D[$],D[j])>0&&D.collapse(e):D.collapse(e),D.collapsed=w(),D.commonAncestorContainer=n.findCommonAncestor(D[W],D[$])}function N(e){var t,n=0,r=0,i,o,a,s,l,c;if(D[W]==D[$])return S(e);for(t=D[$],i=t.parentNode;i;t=i,i=i.parentNode){if(i==D[W])return _(t,e);++n}for(t=D[W],i=t.parentNode;i;t=i,i=i.parentNode){if(i==D[$])return T(t,e);++r}for(o=r-n,a=D[W];o>0;)a=a.parentNode,o--;for(s=D[$];0>o;)s=s.parentNode,o++;for(l=a.parentNode,c=s.parentNode;l!=c;l=l.parentNode,c=c.parentNode)a=l,s=c;return E(a,s,e)}function S(e){var t,n,i,o,a,s,l,c,u;if(e!=H&&(t=r()),D[U]==D[j])return t;if(3==D[W].nodeType){if(n=D[W].nodeValue,i=n.substring(D[U],D[j]),e!=O&&(o=D[W],c=D[U],u=D[j]-D[U],0===c&&u>=o.nodeValue.length-1?o.parentNode.removeChild(o):o.deleteData(c,u),D.collapse(F)),e==H)return;return i.length>0&&t.appendChild(I.createTextNode(i)),t}for(o=x(D[W],D[U]),a=D[j]-D[U];o&&a>0;)s=o.nextSibling,l=P(o,e),t&&t.appendChild(l),--a,o=s;return e!=O&&D.collapse(F),t}function _(e,t){var n,i,o,a,s,l;if(t!=H&&(n=r()),i=R(e,t),n&&n.appendChild(i),o=q(e),a=o-D[U],0>=a)return t!=O&&(D.setEndBefore(e),D.collapse(z)),n;for(i=e.previousSibling;a>0;)s=i.previousSibling,l=P(i,t),n&&n.insertBefore(l,n.firstChild),--a,i=s;return t!=O&&(D.setEndBefore(e),D.collapse(z)),n}function T(e,t){var n,i,o,a,s,l;for(t!=H&&(n=r()),o=A(e,t),n&&n.appendChild(o),i=q(e),++i,a=D[j]-i,o=e.nextSibling;o&&a>0;)s=o.nextSibling,l=P(o,t),n&&n.appendChild(l),--a,o=s;return t!=O&&(D.setStartAfter(e),D.collapse(F)),n}function E(e,t,n){var i,o,a,s,l,c,u;for(n!=H&&(o=r()),i=A(e,n),o&&o.appendChild(i),a=q(e),s=q(t),++a,l=s-a,c=e.nextSibling;l>0;)u=c.nextSibling,i=P(c,n),o&&o.appendChild(i),c=u,--l;return i=R(t,n),o&&o.appendChild(i),n!=O&&(D.setStartAfter(e),D.collapse(F)),o}function R(e,t){var n=x(D[$],D[j]-1),r,i,o,a,s,l=n!=D[$];if(n==e)return B(n,l,z,t);for(r=n.parentNode,i=B(r,z,z,t);r;){for(;n;)o=n.previousSibling,a=B(n,l,z,t),t!=H&&i.insertBefore(a,i.firstChild),l=F,n=o;if(r==e)return i;n=r.previousSibling,r=r.parentNode,s=B(r,z,z,t),t!=H&&s.appendChild(i),i=s}}function A(e,t){var n=x(D[W],D[U]),r=n!=D[W],i,o,a,s,l;if(n==e)return B(n,r,F,t);for(i=n.parentNode,o=B(i,z,F,t);i;){for(;n;)a=n.nextSibling,s=B(n,r,F,t),t!=H&&o.appendChild(s),r=F,n=a;if(i==e)return o;n=i.nextSibling,i=i.parentNode,l=B(i,z,F,t),t!=H&&l.appendChild(o),o=l}}function B(e,t,r,i){var o,a,s,l,c;if(t)return P(e,i);if(3==e.nodeType){if(o=e.nodeValue,r?(l=D[U],a=o.substring(l),s=o.substring(0,l)):(l=D[j],a=o.substring(0,l),s=o.substring(l)),i!=O&&(e.nodeValue=s),i==H)return;return c=n.clone(e,z),c.nodeValue=a,c}return i!=H?n.clone(e,z):void 0}function P(e,t){return t!=H?t==O?n.clone(e,F):e:void e.parentNode.removeChild(e)}function M(){return n.create("body",null,h()).outerText}var D=this,I=n.doc,L=0,O=1,H=2,F=!0,z=!1,U="startOffset",W="startContainer",$="endContainer",j="endOffset",V=e.extend,q=n.nodeIndex;return V(D,{startContainer:I,startOffset:0,endContainer:I,endOffset:0,collapsed:F,commonAncestorContainer:I,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:i,setEnd:o,setStartBefore:a,setStartAfter:s,setEndBefore:l,setEndAfter:c,collapse:u,selectNode:d,selectNodeContents:f,compareBoundaryPoints:m,deleteContents:g,extractContents:p,cloneContents:h,insertNode:v,surroundContents:y,cloneRange:b,toStringIE:M}),D}return t.prototype.toString=function(){return this.toStringIE()},t}),r(x,[p],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,r,i,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),o[r]||(i="&"+e[n+1]+";",a[r]=i,a[i]=r);return a}}var r=e.makeMap,i,o,a,s=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,u=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,d={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};o={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},a={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var f={encodeRaw:function(e,t){return e.replace(t?s:l,function(e){return o[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return o[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":o[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||i,e.replace(t?s:l,function(e){return o[e]||n[e]||e})},getEncodeFunc:function(e,t){function a(e,n){return e.replace(n?s:l,function(e){return o[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,n){return f.encodeNamed(e,n,t)}return t=n(t)||i,e=r(e.replace(/\+/g,",")),e.named&&e.numeric?a:e.named?t?c:f.encodeNamed:e.numeric?f.encodeNumeric:f.encodeRaw},decode:function(e){return e.replace(u,function(e,n){return n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):d[n]||String.fromCharCode(n)):a[e]||i[e]||t(e)})}};return f}),r(w,[p,u],function(e,t){return function(n,r){function i(e){n.getElementsByTagName("head")[0].appendChild(e)}function o(r,o,c){function u(){for(var e=b.passed,t=e.length;t--;)e[t]();b.status=2,b.passed=[],b.failed=[]}function d(){for(var e=b.failed,t=e.length;t--;)e[t]();b.status=3,b.passed=[],b.failed=[]}function f(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function m(e,n){e()||((new Date).getTime()-y<l?t.setTimeout(n):d())}function g(){m(function(){for(var e=n.styleSheets,t,r=e.length,i;r--;)if(t=e[r],i=t.ownerNode?t.ownerNode:t.owningElement,i&&i.id===h.id)return u(),!0},g)}function p(){m(function(){try{var e=v.sheet.cssRules;return u(),!!e}catch(t){}},p)}var h,v,y,b;if(r=e._addCacheSuffix(r),s[r]?b=s[r]:(b={passed:[],failed:[]},s[r]=b),o&&b.passed.push(o),c&&b.failed.push(c),1!=b.status){if(2==b.status)return void u();if(3==b.status)return void d();if(b.status=1,h=n.createElement("link"),h.rel="stylesheet",h.type="text/css",h.id="u"+a++,h.async=!1,h.defer=!1,y=(new Date).getTime(),"onload"in h&&!f())h.onload=g,h.onerror=d;else{if(navigator.userAgent.indexOf("Firefox")>0)return v=n.createElement("style"),v.textContent='@import "'+r+'"',p(),void i(v);g()}i(h),h.href=r}}var a=0,s={},l;r=r||{},l=r.maxLoadTime||5e3,this.load=o}}),r(C,[m,h,v,f,y,b,x,d,p,w],function(e,n,r,i,o,a,s,l,c,u){function d(e,t){var n={},r=t.keep_values,i;return i={set:function(n,r,i){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||e,r,i,n[0])),n.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},n={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(r&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},r&&(n.href=n.src=i),n}function f(e,t){var n=t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName),n||(n=null),t.attr("data-mce-style",n)}function m(e,t){var n=0,r,i;if(e)for(r=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)i=e.nodeType,(!t||3!=i||i!=r&&e.nodeValue.length)&&(n++,r=i);return n}function g(e,t){var o=this,a;o.doc=e,o.win=window,o.files={},o.counter=0,o.stdMode=!b||e.documentMode>=8,o.boxModel=!b||"CSS1Compat"==e.compatMode||o.stdMode,o.styleSheetLoader=new u(e),o.boundEvents=[],o.settings=t=t||{},o.schema=t.schema,o.styles=new r({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),o.fixDoc(e),o.events=t.ownEvents?new i(t.proxy):i.Event,o.attrHooks=d(o,t),a=t.schema?t.schema.getBlockElements():{},o.$=n.overrideDefaults(function(){return{context:e,element:o.getRoot()}}),o.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!a[e.nodeName]):!!a[e]}}var p=c.each,h=c.is,v=c.grep,y=c.trim,b=l.ie,x=/^([a-z0-9],?)+$/i,w=/^[ \t\r\n]*$/;return g.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t=this.settings,n;if(b&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement(n)}},clone:function(e,t){var n=this,r,i;return!b||1!==e.nodeType||t?e.cloneNode(t):(i=n.doc,t?r.firstChild:(r=i.createElement(e.nodeName),p(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),r))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,r;return e=t.get(e),n=t.getPos(e),r=t.getSize(e),{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;return e=t.get(e),n=t.getStyle(e,"width"),r=t.getStyle(e,"height"),-1===n.indexOf("px")&&(n=0),-1===r.indexOf("px")&&(r=0),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight
}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,r,i){var o=this,a,s=[];for(e=o.get(e),i=i===t,r=r||("BODY"!=o.getRoot().nodeName?o.getRoot().parentNode:null),h(n,"string")&&(a=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return o.is(e,a)});e&&e!=r&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!i)return e;s.push(e)}e=e.parentNode}return i?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e(t,r.get(n)||r.settings.root_element||r.doc,[])},is:function(n,r){var i;if(n.length===t){if("*"===r)return 1==n.nodeType;if(x.test(r)){for(r=r.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),i=r.length-1;i>=0;i--)if(r[i]==n)return!0;return!1}}if(n.nodeType&&1!=n.nodeType)return!1;var o=n.nodeType?[n]:n;return e(r,o[0].ownerDocument||o[0],null,o).length>0},add:function(e,t,n,r,i){var o=this;return this.run(e,function(e){var a;return a=h(t,"string")?o.doc.createElement(t):t,o.setAttribs(a,n),r&&(r.nodeType?a.appendChild(r):o.setHTML(a,r)),i?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i;r+="<"+e;for(i in t)t.hasOwnProperty(i)&&null!==t[i]&&"undefined"!=typeof t[i]&&(r+=" "+i+'="'+this.encode(t[i])+'"');return"undefined"!=typeof n?r+">"+n+"</"+e+">":r+" />"},createFragment:function(e){var t,n,r=this.doc,i;for(i=r.createElement("div"),t=r.createDocumentFragment(),e&&(i.innerHTML=e);n=i.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&f(this,e)},getStyle:function(e,n,r){return e=this.$$(e),r?e.css(n):(n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=l.ie&&l.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[n]:t)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&f(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r=this,i,o,a=r.settings;""===n&&(n=null),e=r.$$(e),i=e.attr(t),e.length&&(o=r.attrHooks[t],o&&o.set?o.set(e,n,t):e.attr(t,n),i!=n&&a.onSetAttrib&&a.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,r){p(t,function(e,t){n.setAttrib(r,t,e)})})},getAttrib:function(e,t,n){var r=this,i,o;return e=r.$$(e),e.length&&(i=r.attrHooks[t],o=i&&i.get?i.get(e,t):e.attr(t)),"undefined"==typeof o&&(o=n||""),o},getPos:function(e,t){var r=this,i=0,o=0,a,s=r.doc,l=s.body,c;if(e=r.get(e),t=t||l,e){if(t===l&&e.getBoundingClientRect&&"static"===n(l).css("position"))return c=e.getBoundingClientRect(),t=r.boxModel?s.documentElement:l,i=c.left+(s.documentElement.scrollLeft||l.scrollLeft)-t.clientLeft,o=c.top+(s.documentElement.scrollTop||l.scrollTop)-t.clientTop,{x:i,y:o};for(a=e;a&&a!=t&&a.nodeType;)i+=a.offsetLeft||0,o+=a.offsetTop||0,a=a.offsetParent;for(a=e.parentNode;a&&a!=t&&a.nodeType;)i-=a.scrollLeft||0,o-=a.scrollTop||0,a=a.parentNode}return{x:i,y:o}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this,n=t.doc,r,i;if(t!==g.DOM&&n===document){var o=g.DOM.addedStyles;if(o=o||[],o[e])return;o[e]=!0,g.DOM.addedStyles=o}i=n.getElementById("mceDefaultStyles"),i||(i=n.createElement("style"),i.id="mceDefaultStyles",i.type="text/css",r=n.getElementsByTagName("head")[0],r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(n.createTextNode(e))},loadCSS:function(e){var t=this,n=t.doc,r;return t!==g.DOM&&n===document?void g.DOM.loadCSS(e):(e||(e=""),r=n.getElementsByTagName("head")[0],void p(e.split(","),function(e){var i;e=c._addCacheSuffix(e),t.files[e]||(t.files[e]=!0,i=t.create("link",{rel:"stylesheet",href:e}),b&&n.documentMode&&n.recalc&&(i.onload=function(){n.recalc&&n.recalc(),i.onload=null}),r.appendChild(i))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,r){this.$$(e).toggleClass(t,r).each(function(){""===this.className&&n(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),b?e.each(function(e,r){if(r.canHaveHTML!==!1){for(;r.firstChild;)r.removeChild(r.firstChild);try{r.innerHTML="<br>"+t,r.removeChild(r.firstChild)}catch(i){n("<div></div>").html("<br>"+t).contents().slice(1).appendTo(r)}return t}}):e.html(t)},getOuterHTML:function(e){return e=this.get(e),1==e.nodeType&&"outerHTML"in e?e.outerHTML:n("<div></div>").append(n(e).clone()).html()},setOuterHTML:function(e,t){var r=this;r.$$(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}r.remove(n(this).html(t),!0)})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){var r=this;return r.run(t,function(t){return h(t,"array")&&(e=e.cloneNode(!0)),n&&p(v(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this,r;return e.nodeName!=t.toUpperCase()&&(r=n.create(t),p(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),n.replace(r,e,1)),r||e},findCommonAncestor:function(e,t){for(var n=e,r;n;){for(r=t;r&&n!=r;)r=r.parentNode;if(n==r)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){return this.styles.toHex(c.trim(e))},run:function(e,t,n){var r=this,i;return"string"==typeof e&&(e=r.get(e)),!!e&&(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],p(e,function(e,o){e&&("string"==typeof e&&(e=r.get(e)),i.push(t.call(n,e,o)))}),i))},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(b){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n=this,r,i,a,s,l,c,u=0;if(e=e.firstChild){l=new o(e,e.parentNode),t=t||(n.schema?n.schema.getNonEmptyElements():null),s=n.schema?n.schema.getWhiteSpaceElements():{};do{if(a=e.nodeType,1===a){var d=e.getAttribute("data-mce-bogus");if(d){e=l.next("all"===d);continue}if(c=e.nodeName.toLowerCase(),t&&t[c]){if("br"===c){u++,e=l.next();continue}return!1}for(i=n.getAttribs(e),r=i.length;r--;)if(c=i[r].nodeName,"name"===c||"data-mce-bookmark"===c)return!1}if(8==a)return!1;if(3===a&&!w.test(e.nodeValue))return!1;if(3===a&&e.parentNode&&s[e.parentNode.nodeName]&&w.test(e.nodeValue))return!1;e=l.next()}while(e)}return 1>=u},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new a(this)},nodeIndex:m,split:function(e,t,n){function r(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,o=e.childNodes,a=e.nodeType;if(1!=a||"bookmark"!=e.getAttribute("data-mce-type")){for(n=o.length-1;n>=0;n--)r(o[n]);if(9!=a){if(3==a&&e.nodeValue.length>0){var s=y(e.nodeValue).length;if(!i.isBlock(e.parentNode)||s>0||0===s&&t(e))return}else if(1==a&&(o=e.childNodes,1==o.length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(o[0],e),o.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;i.remove(e)}return e}}var i=this,o=i.createRng(),a,s,l;return e&&t?(o.setStart(e.parentNode,i.nodeIndex(e)),o.setEnd(t.parentNode,i.nodeIndex(t)),a=o.extractContents(),o=i.createRng(),o.setStart(t.parentNode,i.nodeIndex(t)+1),o.setEnd(e.parentNode,i.nodeIndex(e)+1),s=o.extractContents(),l=e.parentNode,l.insertBefore(r(a),e),n?l.insertBefore(n,e):l.insertBefore(t,e),l.insertBefore(r(s),e),i.remove(e),n||t):void 0},bind:function(e,t,n,r){var i=this;if(c.isArray(e)){for(var o=e.length;o--;)e[o]=i.bind(e[o],t,n,r);return e}return!i.settings.collect||e!==i.doc&&e!==i.win||i.boundEvents.push([e,t,n,r]),i.events.bind(e,t,n,r||i)},unbind:function(e,t,n){var r=this,i;if(c.isArray(e)){for(i=e.length;i--;)e[i]=r.unbind(e[i],t,n);return e}if(r.boundEvents&&(e===r.doc||e===r.win))for(i=r.boundEvents.length;i--;){var o=r.boundEvents[i];e!=o[0]||t&&t!=o[1]||n&&n!=o[2]||this.events.unbind(o[0],o[1],o[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&(n=this.getContentEditable(e),null===n);e=e.parentNode);return n},destroy:function(){var t=this;if(t.boundEvents){for(var n=t.boundEvents.length;n--;){var r=t.boundEvents[n];this.events.unbind(r[0],r[1],r[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e)for("string"==typeof i&&(i=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(i(e))return e;return null}},g.DOM=new g(document),g.nodeIndex=m,g}),r(k,[C,p],function(e,t){function n(){function e(e,n,i){function o(){l.remove(u),c&&(c.onreadystatechange=c.onload=c=null),n()}function s(){a(i)?i():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)}var l=r,c,u;u=l.uniqueId(),c=document.createElement("script"),c.id=u,c.type="text/javascript",c.src=t._addCacheSuffix(e),"onreadystatechange"in c?c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&o()}:c.onload=o,c.onerror=s,(document.getElementsByTagName("head")[0]||document.body).appendChild(c)}var n=0,s=1,l=2,c=3,u={},d=[],f={},m=[],g=0,p;this.isDone=function(e){return u[e]==l},this.markDone=function(e){u[e]=l},this.add=this.load=function(e,t,r,i){var o=u[e];o==p&&(d.push(e),u[e]=n),t&&(f[e]||(f[e]=[]),f[e].push({success:t,failure:i,scope:r||this}))},this.remove=function(e){delete u[e],delete f[e]},this.loadQueue=function(e,t,n){this.loadScripts(d,e,t,n)},this.loadScripts=function(t,n,r,d){function h(e,t){i(f[t],function(t){a(t[e])&&t[e].call(t.scope)}),f[t]=p}var v,y=[];m.push({success:n,failure:d,scope:r||this}),(v=function(){var n=o(t);t.length=0,i(n,function(t){return u[t]===l?void h("success",t):u[t]===c?void h("failure",t):void(u[t]!==s&&(u[t]=s,g++,e(t,function(){u[t]=l,g--,h("success",t),v()},function(){u[t]=c,g--,y.push(t),h("failure",t),v()})))}),g||(i(m,function(e){0===y.length?a(e.success)&&e.success.call(e.scope):a(e.failure)&&e.failure.call(e.scope,y)}),m.length=0)})()}}var r=e.DOM,i=t.each,o=t.grep,a=function(e){return"function"==typeof e};return n.ScriptLoader=new n,n}),r(N,[k,p],function(e,n){function r(){var e=this;e.items=[],e.urls={},e.lookup={}}var i=n.each;return r.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,n){var i=r.language;if(i&&r.languageLoad!==!1){if(n)if(n=","+n+",",-1!=n.indexOf(","+i.substr(0,2)+","))i=i.substr(0,2);else if(-1==n.indexOf(","+i+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+i+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},remove:function(e){delete this.urls[e],delete this.lookup[e]},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];i(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(n,o,a,s,l){function c(){var r=u.dependencies(n);i(r,function(e){var n=u.createUrl(o,e);u.load(n.resource,n,t,t)}),a&&a.call(s?s:e)}var u=this,d=o;u.urls[n]||("object"==typeof o&&(d=o.prefix+o.resource+o.suffix),0!==d.indexOf("/")&&-1==d.indexOf("://")&&(d=r.baseURL+"/"+d),u.urls[n]=d.substring(0,d.lastIndexOf("/")),u.lookup[n]?c():e.ScriptLoader.add(d,c,s,l))}},r.PluginManager=new r,r.ThemeManager=new r,r}),r(S,[],function(){function e(e){return function(t){return!!t&&t.nodeType==e}}function t(e){return e=e.toLowerCase().split(" "),function(t){var n,r;if(t&&t.nodeType)for(r=t.nodeName.toLowerCase(),n=0;n<e.length;n++)if(r===e[n])return!0;return!1}}function n(e,t){return t=t.toLowerCase().split(" "),function(n){var r,i;if(s(n))for(r=0;r<t.length;r++)if(i=getComputedStyle(n,null).getPropertyValue(e),i===t[r])return!0;return!1}}function r(e,t){return function(n){return s(n)&&n[e]===t}}function i(e,t){return function(n){return s(n)&&n.getAttribute(e)===t}}function o(e){return s(e)&&e.hasAttribute("data-mce-bogus")}function a(e){return function(t){if(s(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}}var s=e(1);return{isText:e(3),isElement:s,isComment:e(8),isBr:t("br"),isContentEditableTrue:a("true"),isContentEditableFalse:a("false"),matchNodeNames:t,hasPropValue:r,hasAttributeValue:i,matchStyleValues:n,isBogus:o}}),r(_,[],function(){function e(e){return e==n}function t(e){return e.replace(new RegExp(n,"g"),"")}var n="\ufeff";return{isZwsp:e,ZWSP:n,trim:t}}),r(T,[S,_],function(e,t){function n(e){return y(e)&&(e=e.parentNode),v(e)&&e.hasAttribute("data-mce-caret")}function r(e){return y(e)&&t.isZwsp(e.data)}function i(e){return n(e)||r(e)}function o(e){var t=e.parentNode;t&&t.removeChild(e)}function a(e){try{return e.nodeValue}catch(t){return""}}function s(e,t){0===t.length?o(e):e.nodeValue=t}function l(e,n){var r,o,a,s;if(r=e.ownerDocument,a=r.createTextNode(t.ZWSP),s=e.parentNode,n){if(o=e.previousSibling,y(o)){if(i(o))return o;if(g(o))return o.splitText(o.data.length-1)}s.insertBefore(a,e)}else{if(o=e.nextSibling,y(o)){if(i(o))return o;if(m(o))return o.splitText(1),o}e.nextSibling?s.insertBefore(a,e.nextSibling):s.appendChild(a)}return a}function c(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e}function u(e,t,n){var r,i,o;return r=t.ownerDocument,i=r.createElement(e),i.setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(c()),o=t.parentNode,n?o.insertBefore(i,t):t.nextSibling?o.insertBefore(i,t.nextSibling):o.appendChild(i),i}function d(t){return t.firstChild!==t.lastChild||!e.isBr(t.firstChild)}function f(e){if(v(e)&&i(e)&&(d(e)?e.removeAttribute("data-mce-caret"):o(e)),y(e)){var n=t.trim(a(e));s(e,n)}}function m(e){return y(e)&&e.data[0]==t.ZWSP}function g(e){return y(e)&&e.data[e.data.length-1]==t.ZWSP}function p(t){var n=t.getElementsByTagName("br"),r=n[n.length-1];e.isBogus(r)&&r.parentNode.removeChild(r)}function h(e){return e&&e.hasAttribute("data-mce-caret")?(p(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null}var v=e.isElement,y=e.isText;return{isCaretContainer:i,isCaretContainerBlock:n,isCaretContainerInline:r,showCaretContainerBlock:h,insertInline:l,insertBlock:u,hasContent:d,remove:f,startsWithCaretContainer:m,endsWithCaretContainer:g}}),r(E,[p,y,S,b,T],function(e,t,n,r,i){function o(e){return p(e)||h(e)}function a(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:0>t&&(t=0),n[t]||e}function s(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}function l(e,t,n){return null!==s(e,t,n)}function c(e){return"_mce_caret"===e.id}function u(e,t){return v(e)&&l(e,t,c)===!1}function d(e){this.walk=function(t,n){function r(e){var t;return t=e[0],3===t.nodeType&&t===l&&c>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===d&&e.length>0&&t===u&&3===t.nodeType&&e.splice(e.length-1,1),e}function i(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r}function o(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function s(e,t,o){var a=o?"nextSibling":"previousSibling";for(h=e,v=h.parentNode;h&&h!=t;h=v)v=h.parentNode,y=i(h==e?h:h[a],a),y.length&&(o||y.reverse(),n(r(y)))}var l=t.startContainer,c=t.startOffset,u=t.endContainer,d=t.endOffset,f,m,p,h,v,y,b;if(b=e.select("td[data-mce-selected],th[data-mce-selected]"),b.length>0)return void g(b,function(e){n([e])});if(1==l.nodeType&&l.hasChildNodes()&&(l=l.childNodes[c]),1==u.nodeType&&u.hasChildNodes()&&(u=a(u,d)),l==u)return n(r([l]));for(f=e.findCommonAncestor(l,u),h=l;h;h=h.parentNode){if(h===u)return s(l,f,!0);if(h===f)break}for(h=u;h;h=h.parentNode){if(h===l)return s(u,f);if(h===f)break}m=o(l,f)||l,p=o(u,f)||u,s(l,m,!0),y=i(m==l?m:m.nextSibling,"nextSibling",p==u?p.nextSibling:p),y.length&&n(r(y)),s(u,p)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset;return n==i&&3==n.nodeType?r>0&&r<n.nodeValue.length&&(i=t(n,r),n=i.previousSibling,o>r?(o-=r,n=i=t(i,o).previousSibling,o=i.nodeValue.length,r=0):o=0):(3==n.nodeType&&r>0&&r<n.nodeValue.length&&(n=t(n,r),r=0),3==i.nodeType&&o>0&&o<i.nodeValue.length&&(i=t(i,o).previousSibling,o=i.nodeValue.length)),{startContainer:n,startOffset:r,endContainer:i,endOffset:o}},this.normalize=function(n){function r(r){function a(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function s(n,r){for(var i=new t(n,e.getParent(n.parentNode,e.isBlock)||p);n=i[r?"prev":"next"]();)if("BR"===n.nodeName)return!0}function l(e){for(;e&&e!=p;){if(h(e))return!0;e=e.parentNode}return!1}function c(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function d(n,r){var a,s,l;if(r=r||f,l=e.getParent(r.parentNode,e.isBlock)||p,n&&"BR"==r.nodeName&&w&&e.isEmpty(l))return f=r.parentNode,m=e.nodeIndex(r),void(i=!0);for(a=new t(r,l);y=a[n?"prev":"next"]();){if("false"===e.getContentEditableParent(y)||u(y,e.getRoot()))return;if(3===y.nodeType&&y.nodeValue.length>0)return f=y,m=n?y.nodeValue.length:0,void(i=!0);if(e.isBlock(y)||b[y.nodeName.toLowerCase()])return;s=y}o&&s&&(f=s,i=!0,m=0)}var f,m,g,p=e.getRoot(),y,b,x,w;if(f=n[(r?"start":"end")+"Container"],m=n[(r?"start":"end")+"Offset"],w=1==f.nodeType&&m===f.childNodes.length,b=e.schema.getNonEmptyElements(),x=r,!v(f)){if(1==f.nodeType&&m>f.childNodes.length-1&&(x=!1),9===f.nodeType&&(f=e.getRoot(),m=0),f===p){if(x&&(y=f.childNodes[m>0?m-1:0])){if(v(y))return;if(b[y.nodeName]||"TABLE"==y.nodeName)return}if(f.hasChildNodes()){if(m=Math.min(!x&&m>0?m-1:m,f.childNodes.length-1),f=f.childNodes[m],m=0,!o&&f===p.lastChild&&"TABLE"===f.nodeName)return;if(l(f)||v(f))return;if(f.hasChildNodes()&&!/TABLE/.test(f.nodeName)){y=f,g=new t(f,p);do{if(h(y)||v(y)){i=!1;break}if(3===y.nodeType&&y.nodeValue.length>0){m=x?0:y.nodeValue.length,f=y,i=!0;break}if(b[y.nodeName.toLowerCase()]&&!a(y)){m=e.nodeIndex(y),f=y.parentNode,"IMG"!=y.nodeName||x||m++,i=!0;break}}while(y=x?g.next():g.prev())}}}o&&(3===f.nodeType&&0===m&&d(!0),1===f.nodeType&&(y=f.childNodes[m],y||(y=f.childNodes[m-1]),!y||"BR"!==y.nodeName||c(y,"A")||s(y)||s(y,!0)||d(!0,y))),x&&!o&&3===f.nodeType&&m===f.nodeValue.length&&d(!1),i&&n["set"+(r?"Start":"End")](f,m)}}var i,o;return o=n.collapsed,r(!0),o||r(),i&&o&&n.collapse(!0),i}}function f(t,n,r){var i,o,a;if(i=r.elementFromPoint(t,n),o=r.body.createTextRange(),i&&"HTML"!=i.tagName||(i=r.body),o.moveToElementText(i),a=e.toArray(o.getClientRects()),a=a.sort(function(e,t){return e=Math.abs(Math.max(e.top-n,e.bottom-n)),t=Math.abs(Math.max(t.top-n,t.bottom-n)),e-t}),a.length>0){n=(a[0].bottom+a[0].top)/2;try{return o.moveToPoint(t,n),o.collapse(!0),o}catch(s){}}return null}function m(e,t){var n=e&&e.parentElement?e.parentElement():null;return h(s(n,t,o))?null:e}var g=e.each,p=n.isContentEditableTrue,h=n.isContentEditableFalse,v=i.isCaretContainer;return d.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},d.getCaretRangeFromPoint=function(e,t,n){var r,i;if(n.caretPositionFromPoint)i=n.caretPositionFromPoint(e,t),r=n.createRange(),r.setStart(i.offsetNode,i.offset),r.collapse(!0);else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(n.body.createTextRange){r=n.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(o){r=f(e,t,n)}return m(r,n.body)}return r},d.getSelectedNode=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset==n+1?t.childNodes[n]:null},d.getNode=function(e,t){return 1==e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},d}),r(R,[E,d,u],function(e,t,n){return function(r){function i(e){var t,n;if(n=r.$(e).parentsUntil(r.getBody()).add(e),n.length===a.length){for(t=n.length;t>=0&&n[t]===a[t];t--);if(-1===t)return a=n,!0}return a=n,!1}var o,a=[];"onselectionchange"in r.getDoc()||r.on("NodeChange Click MouseUp KeyUp Focus",function(t){var n,i;n=r.selection.getRng(),i={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"!=t.type&&e.compareRanges(i,o)||r.fire("SelectionChange"),o=i}),r.on("contextmenu",function(){r.fire("SelectionChange")}),r.on("SelectionChange",function(){var e=r.selection.getStart(!0);!t.range&&r.selection.isCollapsed()||!i(e)&&r.dom.isChildOf(e,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"==r.selection.getNode().nodeName?n.setEditorTimeout(r,function(){r.nodeChanged()}):r.nodeChanged())}),this.nodeChanged=function(e){var t=r.selection,n,i,o;r.initialized&&t&&!r.settings.disable_nodechange&&!r.readonly&&(o=r.getBody(),n=t.getStart()||o,n.ownerDocument==r.getDoc()&&r.dom.isChildOf(n,o)||(n=o),"IMG"==n.nodeName&&t.isCollapsed()&&(n=n.parentNode),i=[],r.dom.getParent(n,function(e){return e===o||void i.push(e)}),e=e||{},e.element=n,e.parents=i,r.fire("NodeChange",e))}}}),r(A,[],function(){function e(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,r,i,o;if("string"!=typeof e){for(i in e)n.attr(i,e[i]);return n}if(r=n.attributes){if(t!==o){if(null===t){if(e in r.map)for(delete r.map[e],i=r.length;i--;)if(r[i].name===e)return r=r.splice(i,1),n;return n}if(e in r.map){for(i=r.length;i--;)if(r[i].name===e){r[i].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}},clone:function(){var e=this,n=new t(e.name,e.type),r,i,o,a,s;if(o=e.attributes){for(s=[],s.map={},r=0,i=o.length;i>r;r++)a=o[r],"id"!==a.name&&(s[s.length]={name:a.name,value:a.value},s.map[a.name]=a.value);n.attributes=s}return n.value=e.value,n.shortEnded=e.shortEnded,n},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(t){var n=this,r,i=[];for(r=n.firstChild;r;r=e(r,n))r.name===t&&i.push(r);return i},empty:function(){var t=this,n,r,i;if(t.firstChild){for(n=[],i=t.firstChild;i;i=e(i,t))n.push(i);for(r=n.length;r--;)i=n[r],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return t.firstChild=t.lastChild=null,t},isEmpty:function(t,r){var i=this,o=i.firstChild,a,s;if(r=r||{},o)do{if(1===o.type){if(o.attributes.map["data-mce-bogus"])continue;if(t[o.name])return!1;for(a=o.attributes.length;a--;)if(s=o.attributes[a].name,"name"===s||0===s.indexOf("data-mce-bookmark"))return!1}if(8===o.type)return!1;if(3===o.type&&!n.test(o.value))return!1;if(3===o.type&&o.parent&&r[o.parent.name]&&n.test(o.value))return!1}while(o=e(o,i));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var i,o;if(i=new t(e,r[e]||1),n)for(o in n)i.attr(o,n[o]);return i},t}),r(B,[p],function(e){function t(t,n){return t=e.trim(t),t?t.split(n||" "):[]}function n(e){function n(e,n,r){function i(e,t){var n={},r,i;for(r=0,i=e.length;i>r;r++)n[e[r]]=t||{};return n}var s,c,u;for(r=r||[],n=n||"","string"==typeof r&&(r=t(r)),e=t(e),s=e.length;s--;)c=t([l,n].join(" ")),u={attributes:i(c),attributesOrder:c,children:i(r,o)},a[e[s]]=u}function r(e,n){var r,i,o,s;for(e=t(e),r=e.length,n=t(n);r--;)for(i=a[e[r]],o=0,s=n.length;s>o;o++)i.attributes[n[o]]={},i.attributesOrder.push(n[o])}var a={},l,c,u,d,f,m;return i[e]?i[e]:(l="id accesskey class dir lang style tabindex title",c="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",u="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!=e&&(l+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",c+=" article aside details dialog figure header footer hgroup section nav",u+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!=e&&(l+=" xml:lang",m="acronym applet basefont big font strike tt",u=[u,m].join(" "),s(t(m),function(e){n(e,"",u)}),f="center dir isindex noframes",c=[c,f].join(" "),d=[c,u].join(" "),s(t(f),function(e){n(e,"",d)})),d=d||[c,u].join(" "),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",d),n("address dt dd div caption","",d),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",u),n("blockquote","cite",d),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",d),n("dl","","dt dd"),n("a","href target rel media hreflang type",u),n("q","cite",u),n("ins del","cite datetime",d),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",d),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",[d,"param"].join(" ")),n("param","name value"),n("map","name",[d,"area"].join(" ")),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",d),n("th","colspan rowspan headers scope abbr",d),n("form","accept-charset action autocomplete enctype method name novalidate target",d),n("fieldset","disabled form name",[d,"legend"].join(" ")),n("label","form for",u),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?d:u),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",[d,"li"].join(" ")),n("noscript","",d),"html4"!=e&&(n("wbr"),n("ruby","",[u,"rt rp"].join(" ")),n("figcaption","",d),n("mark rt rp summary bdi","",u),n("canvas","width height",d),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[d,"track source"].join(" ")),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[d,"track source"].join(" ")),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",[u,"option"].join(" ")),n("article section nav aside header footer","",d),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",[d,"figcaption"].join(" ")),n("time","datetime",u),n("dialog","open",d),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",u),n("progress","value max",u),n("meter","value min max low high optimum",u),n("details","open",[d,"summary"].join(" ")),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(r("script","language xml:space"),r("style","xml:space"),r("object","declare classid code codebase codetype archive standby align border hspace vspace"),r("embed","align name hspace vspace"),r("param","valuetype type"),r("a","charset name rev shape coords"),r("br","clear"),r("applet","codebase archive code object alt name width height align hspace vspace"),r("img","name longdesc align border hspace vspace"),r("iframe","longdesc frameborder marginwidth marginheight scrolling align"),r("font basefont","size color face"),r("input","usemap align"),r("select","onchange"),r("textarea"),r("h1 h2 h3 h4 h5 h6 div p legend caption","align"),r("ul","type compact"),r("li","type"),r("ol dl menu dir","compact"),r("pre","width xml:space"),r("hr","align noshade size width"),r("isindex","prompt"),r("table","summary width frame rules cellspacing cellpadding align bgcolor"),r("col","width align char charoff valign"),r("colgroup","width align char charoff valign"),r("thead","align char charoff valign"),r("tr","align char charoff valign bgcolor"),r("th","axis align char charoff valign nowrap bgcolor width height"),r("form","accept"),r("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),r("tfoot","align char charoff valign"),r("tbody","align char charoff valign"),r("area","nohref"),r("body","background bgcolor text link vlink alink")),"html4"!=e&&(r("input button select textarea","autofocus"),r("input textarea","placeholder"),r("a","download"),r("link script img","crossorigin"),r("iframe","sandbox seamless allowfullscreen")),s(t("a form meter progress dfn"),function(e){
a[e]&&delete a[e].children[e]}),delete a.caption.children.table,delete a.script,i[e]=a,a)}function r(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),s(e,function(e,r){n[r]=n[r.toUpperCase()]="map"==t?a(e,/[, ]/):c(e,/[, ]/)})),n}var i={},o={},a=e.makeMap,s=e.each,l=e.extend,c=e.explode,u=e.inArray;return function(e){function o(t,n,r){var o=e[t];return o?o=a(o,/[, ]/,a(o.toUpperCase(),/[, ]/)):(o=i[t],o||(o=a(n," ",a(n.toUpperCase()," ")),o=l(o,r),i[t]=o)),o}function d(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function f(e){var n,r,i,o,s,l,c,f,m,g,p,h,v,b,w,C,k,N,S,_=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,T=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,E=/[*?+]/;if(e)for(e=t(e,","),y["@"]&&(C=y["@"].attributes,k=y["@"].attributesOrder),n=0,r=e.length;r>n;n++)if(s=_.exec(e[n])){if(b=s[1],m=s[2],w=s[3],f=s[5],h={},v=[],l={attributes:h,attributesOrder:v},"#"===b&&(l.paddEmpty=!0),"-"===b&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),C){for(N in C)h[N]=C[N];v.push.apply(v,k)}if(f)for(f=t(f,"|"),i=0,o=f.length;o>i;i++)if(s=T.exec(f[i])){if(c={},p=s[1],g=s[2].replace(/::/g,":"),b=s[3],S=s[4],"!"===p&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(g),c.required=!0),"-"===p){delete h[g],v.splice(u(v,g),1);continue}b&&("="===b&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:g,value:S}),c.defaultValue=S),":"===b&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:g,value:S}),c.forcedValue=S),"<"===b&&(c.validValues=a(S,"?"))),E.test(g)?(l.attributePatterns=l.attributePatterns||[],c.pattern=d(g),l.attributePatterns.push(c)):(h[g]||v.push(g),h[g]=c)}C||"@"!=m||(C=h,k=v),w&&(l.outputName=m,y[w]=l),E.test(m)?(l.pattern=d(m),x.push(l)):y[m]=l}}function m(e){y={},x=[],f(e),s(k,function(e,t){b[t]=e.children})}function g(e){var n=/^(~)?(.+)$/;e&&(i.text_block_elements=i.block_elements=null,s(t(e,","),function(e){var t=n.exec(e),r="~"===t[1],i=r?"span":"div",o=t[2];if(b[o]=b[i],D[o]=i,r||(R[o.toUpperCase()]={},R[o]={}),!y[o]){var a=y[i];a=l({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,y[o]=a}s(b,function(e,t){e[i]&&(b[t]=e=l({},b[t]),e[o]=e[i])})}))}function p(n){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;i[e.schema]=null,n&&s(t(n,","),function(e){var n=r.exec(e),i,o;n&&(o=n[1],i=o?b[n[2]]:b[n[2]]={"#comment":{}},i=b[n[2]],s(t(n[3],"|"),function(e){"-"===o?delete i[e]:i[e]={}}))})}function h(e){var t=y[e],n;if(t)return t;for(n=x.length;n--;)if(t=x[n],t.pattern.test(e))return t}var v=this,y={},b={},x=[],w,C,k,N,S,_,T,E,R,A,B,P,M,D={},I={};e=e||{},k=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),w=r(e.valid_styles),C=r(e.invalid_styles,"map"),E=r(e.valid_classes,"map"),N=o("whitespace_elements","pre script noscript style textarea video audio iframe object code"),S=o("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),_=o("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),T=o("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),A=o("non_empty_elements","td th iframe video audio object script pre code",_),B=o("move_caret_before_on_enter_elements","table",A),P=o("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),R=o("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",P),M=o("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),s((e.special||"script noscript style textarea").split(" "),function(e){I[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?m(e.valid_elements):(s(k,function(e,t){y[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},b[t]=e.children}),"html5"!=e.schema&&s(t("strong/b em/i"),function(e){e=t(e,"/"),y[e[1]].outputName=e[0]}),s(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){y[e]&&(y[e].removeEmpty=!0)}),s(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){y[e].paddEmpty=!0}),s(t("span"),function(e){y[e].removeEmptyAttrs=!0})),g(e.custom_elements),p(e.valid_children),f(e.extended_valid_elements),p("+ol[ul|ol],+ul[ul|ol]"),s({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,n){y[n]&&(y[n].parentsRequired=t(e))}),e.invalid_elements&&s(c(e.invalid_elements),function(e){y[e]&&delete y[e]}),h("span")||f("span[!data-mce-type|*]"),v.children=b,v.getValidStyles=function(){return w},v.getInvalidStyles=function(){return C},v.getValidClasses=function(){return E},v.getBoolAttrs=function(){return T},v.getBlockElements=function(){return R},v.getTextBlockElements=function(){return P},v.getTextInlineElements=function(){return M},v.getShortEndedElements=function(){return _},v.getSelfClosingElements=function(){return S},v.getNonEmptyElements=function(){return A},v.getMoveCaretBeforeOnEnterElements=function(){return B},v.getWhiteSpaceElements=function(){return N},v.getSpecialElements=function(){return I},v.isValidChild=function(e,t){var n=b[e];return!(!n||!n[t])},v.isValid=function(e,t){var n,r,i=h(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},v.getElementRule=h,v.getCustomElements=function(){return D},v.addValidElements=f,v.setValidElements=m,v.addCustomElements=g,v.addValidChildren=p,v.elements=y}}),r(P,[B,x,p],function(e,t,n){function r(e,t,n){var r=1,i,o,a,s;for(s=e.getShortEndedElements(),a=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,a.lastIndex=i=n;o=a.exec(t);){if(i=a.lastIndex,"/"===o[1])r--;else if(!o[1]){if(o[2]in s)continue;r++}if(0===r)break}return i}function i(i,a){function s(){}var l=this;i=i||{},l.schema=a=a||new e,i.fix_self_closing!==!1&&(i.fix_self_closing=!0),o("comment cdata text start end pi doctype".split(" "),function(e){e&&(l[e]=i[e]||s)}),l.parse=function(e){function o(e){var t,n;for(t=m.length;t--&&m[t].name!==e;);if(t>=0){for(n=m.length-1;n>=t;n--)e=m[n],e.valid&&l.end(e.name);m.length=t}}function s(e,t,n,r,o){var a,s,l=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in w?t:z(n||r||o||""),k&&!y&&0!==t.indexOf("data-")){if(a=E[t],!a&&R){for(s=R.length;s--&&(a=R[s],!a.pattern.test(t)););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(W[t]&&!i.allow_script_urls){var c=n.replace(l,"");try{c=decodeURIComponent(c)}catch(u){c=unescape(c)}if($.test(c))return;if(!i.allow_html_data_urls&&j.test(c)&&!/^data:image\//i.test(c))return}g.map[t]=n,g.push({name:t,value:n})}var l=this,c,u=0,d,f,m=[],g,p,h,v,y,b,x,w,C,k,N,S,_,T,E,R,A,B,P,M,D,I,L,O,H,F=0,z=t.decode,U,W=n.makeMap("src,href,data,background,formaction,poster"),$=/((java|vb)script|mhtml):/i,j=/^data:/i;for(I=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),L=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,x=a.getShortEndedElements(),D=i.self_closing_elements||a.getSelfClosingElements(),w=a.getBoolAttrs(),k=i.validate,b=i.remove_internals,U=i.fix_self_closing,O=a.getSpecialElements();c=I.exec(e);){if(u<c.index&&l.text(z(e.substr(u,c.index-u))),d=c[6])d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),o(d);else if(d=c[7]){if(d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),C=d in x,U&&D[d]&&m.length>0&&m[m.length-1].name===d&&o(d),!k||(N=a.getElementRule(d))){if(S=!0,k&&(E=N.attributes,R=N.attributePatterns),(T=c[8])?(y=-1!==T.indexOf("data-mce-type"),y&&b&&(S=!1),g=[],g.map={},T.replace(L,s)):(g=[],g.map={}),k&&!y){if(A=N.attributesRequired,B=N.attributesDefault,P=N.attributesForced,M=N.removeEmptyAttrs,M&&!g.length&&(S=!1),P)for(p=P.length;p--;)_=P[p],v=_.name,H=_.value,"{$uid}"===H&&(H="mce_"+F++),g.map[v]=H,g.push({name:v,value:H});if(B)for(p=B.length;p--;)_=B[p],v=_.name,v in g.map||(H=_.value,"{$uid}"===H&&(H="mce_"+F++),g.map[v]=H,g.push({name:v,value:H}));if(A){for(p=A.length;p--&&!(A[p]in g.map););-1===p&&(S=!1)}if(_=g.map["data-mce-bogus"]){if("all"===_){u=r(a,e,I.lastIndex),I.lastIndex=u;continue}S=!1}}S&&l.start(d,g,C)}else S=!1;if(f=O[d]){f.lastIndex=u=c.index+c[0].length,(c=f.exec(e))?(S&&(h=e.substr(u,c.index-u)),u=c.index+c[0].length):(h=e.substr(u),u=e.length),S&&(h.length>0&&l.text(h,!0),l.end(d)),I.lastIndex=u;continue}C||(T&&T.indexOf("/")==T.length-1?S&&l.end(d):m.push({name:d,valid:S}))}else(d=c[1])?(">"===d.charAt(0)&&(d=" "+d),i.allow_conditional_comments||"[if"!==d.substr(0,3).toLowerCase()||(d=" "+d),l.comment(d)):(d=c[2])?l.cdata(d):(d=c[3])?l.doctype(d):(d=c[4])&&l.pi(d,c[5]);u=c.index+c[0].length}for(u<e.length&&l.text(z(e.substr(u))),p=m.length-1;p>=0;p--)d=m[p],d.valid&&l.end(d.name)}}var o=n.each;return i.findEndTag=r,i}),r(M,[A,B,P,p],function(e,t,n,r){var i=r.makeMap,o=r.each,a=r.explode,s=r.extend,l=function(t,n){t.padd_empty_with_br?n.empty().append(new e("br","1")).shortEnded=!0:n.empty().append(new e("#text","3")).value=""},c=function(e,t){return e&&e.firstChild===e.lastChild&&e.firstChild.name===t};return function(u,d){function f(t){var n,r,o,a,s,l,u,f,g,p,h,v,y,b,x,w;for(v=i("tr,td,th,tbody,thead,tfoot,table"),p=d.getNonEmptyElements(),h=d.getWhiteSpaceElements(),y=d.getTextBlockElements(),b=d.getSpecialElements(),n=0;n<t.length;n++)if(r=t[n],r.parent&&!r.fixed)if(y[r.name]&&"li"==r.parent.name){for(x=r.next;x&&y[x.name];)x.name="li",x.fixed=!0,r.parent.insert(x,r.parent),x=x.next;r.unwrap(r)}else{for(a=[r],o=r.parent;o&&!d.isValidChild(o.name,r.name)&&!v[o.name];o=o.parent)a.push(o);if(o&&a.length>1){for(a.reverse(),s=l=m.filterNode(a[0].clone()),g=0;g<a.length-1;g++){for(d.isValidChild(l.name,a[g].name)?(u=m.filterNode(a[g].clone()),l.append(u)):u=l,f=a[g].firstChild;f&&f!=a[g+1];)w=f.next,u.append(f),f=w;l=u}s.isEmpty(p,h)?o.insert(r,a[0],!0):(o.insert(s,a[0],!0),o.insert(r,s)),o=a[0],(o.isEmpty(p,h)||c(o,"br"))&&o.empty().remove()}else if(r.parent){if("li"===r.name){if(x=r.prev,x&&("ul"===x.name||"ul"===x.name)){x.append(r);continue}if(x=r.next,x&&("ul"===x.name||"ul"===x.name)){x.insert(r,x.firstChild,!0);continue}r.wrap(m.filterNode(new e("ul",1)));continue}d.isValidChild(r.parent.name,"div")&&d.isValidChild("div",r.name)?r.wrap(m.filterNode(new e("div",1))):b[r.name]?r.empty().remove():r.unwrap()}}}var m=this,g={},p=[],h={},v={};u=u||{},u.validate=!("validate"in u)||u.validate,u.root_name=u.root_name||"body",m.schema=d=d||new t,m.filterNode=function(e){var t,n,r;n in g&&(r=h[n],r?r.push(e):h[n]=[e]),t=p.length;for(;t--;)n=p[t].name,n in e.attributes.map&&(r=v[n],r?r.push(e):v[n]=[e]);return e},m.addNodeFilter=function(e,t){o(a(e),function(e){var n=g[e];n||(g[e]=n=[]),n.push(t)})},m.addAttributeFilter=function(e,t){o(a(e),function(e){var n;for(n=0;n<p.length;n++)if(p[n].name===e)return void p[n].callbacks.push(t);p.push({name:e,callbacks:[t]})})},m.parse=function(t,r){function o(){function e(e){e&&(t=e.firstChild,t&&3==t.type&&(t.value=t.value.replace(A,"")),t=e.lastChild,t&&3==t.type&&(t.value=t.value.replace(M,"")))}var t=b.firstChild,n,r;if(d.isValidChild(b.name,F.toLowerCase())){for(;t;)n=t.next,3==t.type||1==t.type&&"p"!==t.name&&!R[t.name]&&!t.attr("data-mce-type")?r?r.append(t):(r=a(F,1),r.attr(u.forced_root_block_attrs),b.insert(r,t),r.append(t)):(e(r),r=null),t=n;e(r)}}function a(t,n){var r=new e(t,n),i;return t in g&&(i=h[t],i?i.push(r):h[t]=[r]),r}function c(e){var t,n,r,i,o=d.getBlockElements();for(t=e.prev;t&&3===t.type;){if(r=t.value.replace(M,""),r.length>0)return void(t.value=r);if(n=t.next){if(3==n.type&&n.value.length){t=t.prev;continue}if(!o[n.name]&&"script"!=n.name&&"style"!=n.name){t=t.prev;continue}}i=t.prev,t.remove(),t=i}}function m(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var y,b,x,w,C,k,N,S,_,T,E,R,A,B=[],P,M,D,I,L,O,H,F;if(r=r||{},h={},v={},R=s(i("script,style,head,html,body,title,meta,param"),d.getBlockElements()),H=d.getNonEmptyElements(),O=d.children,E=u.validate,F="forced_root_block"in r?r.forced_root_block:u.forced_root_block,L=d.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,I=/^[ \t\r\n]+$/,y=new n({validate:E,allow_script_urls:u.allow_script_urls,allow_conditional_comments:u.allow_conditional_comments,self_closing_elements:m(d.getSelfClosingElements()),cdata:function(e){x.append(a("#cdata",4)).value=e},text:function(e,t){var n;P||(e=e.replace(D," "),x.lastChild&&R[x.lastChild.name]&&(e=e.replace(A,""))),0!==e.length&&(n=a("#text",3),n.raw=!!t,x.append(n).value=e)},comment:function(e){x.append(a("#comment",8)).value=e},pi:function(e,t){x.append(a(e,7)).value=t,c(x)},doctype:function(e){var t;t=x.append(a("#doctype",10)),t.value=e,c(x)},start:function(e,t,n){var r,i,o,s,l;if(o=E?d.getElementRule(e):{}){for(r=a(o.outputName||e,1),r.attributes=t,r.shortEnded=n,x.append(r),l=O[x.name],l&&O[r.name]&&!l[r.name]&&B.push(r),i=p.length;i--;)s=p[i].name,s in t.map&&(_=v[s],_?_.push(r):v[s]=[r]);R[e]&&c(r),n||(x=r),!P&&L[e]&&(P=!0)}},end:function(e){var t,n,r,i,o;if(n=E?d.getElementRule(e):{}){if(R[e]&&!P){if(t=x.firstChild,t&&3===t.type)if(r=t.value.replace(A,""),r.length>0)t.value=r,t=t.next;else for(i=t.next,t.remove(),t=i;t&&3===t.type;)r=t.value,i=t.next,(0===r.length||I.test(r))&&(t.remove(),t=i),t=i;if(t=x.lastChild,t&&3===t.type)if(r=t.value.replace(M,""),r.length>0)t.value=r,t=t.prev;else for(i=t.prev,t.remove(),t=i;t&&3===t.type;)r=t.value,i=t.prev,(0===r.length||I.test(r))&&(t.remove(),t=i),t=i}if(P&&L[e]&&(P=!1),(n.removeEmpty||n.paddEmpty)&&x.isEmpty(H,L))if(n.paddEmpty)l(u,x);else if(!x.attributes.map.name&&!x.attributes.map.id)return o=x.parent,R[x.name]?x.empty().remove():x.unwrap(),void(x=o);x=x.parent}}},d),b=x=new e(r.context||u.root_name,11),y.parse(t),E&&B.length&&(r.context?r.invalid=!0:f(B)),F&&("body"==b.name||r.isRootContent)&&o(),!r.invalid){for(T in h){for(_=g[T],w=h[T],N=w.length;N--;)w[N].parent||w.splice(N,1);for(C=0,k=_.length;k>C;C++)_[C](w,T,r)}for(C=0,k=p.length;k>C;C++)if(_=p[C],_.name in v){for(w=v[_.name],N=w.length;N--;)w[N].parent||w.splice(N,1);for(N=0,S=_.callbacks.length;S>N;N++)_.callbacks[N](w,_.name,r)}}return b},u.remove_trailing_brs&&m.addNodeFilter("br",function(t){var n,r=t.length,i,o=s({},d.getBlockElements()),a=d.getNonEmptyElements(),c,f,m,g,p=d.getNonEmptyElements(),h,v;for(o.body=1,n=0;r>n;n++)if(i=t[n],c=i.parent,o[i.parent.name]&&i===c.lastChild){for(m=i.prev;m;){if(g=m.name,"span"!==g||"bookmark"!==m.attr("data-mce-type")){if("br"!==g)break;if("br"===g){i=null;break}}m=m.prev}i&&(i.remove(),c.isEmpty(a,p)&&(h=d.getElementRule(c.name),h&&(h.removeEmpty?c.remove():h.paddEmpty&&l(u,c))))}else{for(f=i;c&&c.firstChild===f&&c.lastChild===f&&(f=c,!o[c.name]);)c=c.parent;f===c&&u.padd_empty_with_br!==!0&&(v=new e("#text",3),v.value="",i.replace(v))}}),u.allow_unsafe_link_target||m.addAttributeFilter("href",function(e){function t(e){return e=n(e),e?[e,l].join(" "):l}function n(e){var t=new RegExp("("+l.replace(" ","|")+")","g");return e&&(e=r.trim(e.replace(t,""))),e?e:null}function i(e,r){return r?t(e):n(e)}for(var o=e.length,a,s,l="noopener noreferrer";o--;)a=e[o],s=a.attr("rel"),"a"===a.name&&a.attr("rel",i(s,"_blank"==a.attr("target")))}),u.allow_html_in_named_anchor||m.addAttributeFilter("id,name",function(e){for(var t=e.length,n,r,i,o;t--;)if(o=e[t],"a"===o.name&&o.firstChild&&!o.attr("href")){i=o.parent,n=o.lastChild;do r=n.prev,i.insert(n,o),n=r;while(n)}}),u.fix_list_elements&&m.addNodeFilter("ul,ol",function(t){for(var n=t.length,r,i;n--;)if(r=t[n],i=r.parent,"ul"===i.name||"ol"===i.name)if(r.prev&&"li"===r.prev.name)r.prev.append(r);else{var o=new e("li",1);o.attr("style","list-style-type: none"),r.wrap(o)}}),u.validate&&d.getValidClasses()&&m.addAttributeFilter("class",function(e){for(var t=e.length,n,r,i,o,a,s=d.getValidClasses(),l,c;t--;){for(n=e[t],r=n.attr("class").split(" "),a="",i=0;i<r.length;i++)o=r[i],c=!1,l=s["*"],l&&l[o]&&(c=!0),l=s[n.name],!c&&l&&l[o]&&(c=!0),c&&(a&&(a+=" "),a+=o);a.length||(a=null),n.attr("class",a)}})}}),r(D,[x,p],function(e,t){var n=t.makeMap;return function(t){var r=[],i,o,a,s,l;return t=t||{},i=t.indent,o=n(t.indent_before||""),a=n(t.indent_after||""),s=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),l="html"==t.element_format,{start:function(e,t,n){var c,u,d,f;if(i&&o[e]&&r.length>0&&(f=r[r.length-1],f.length>0&&"\n"!==f&&r.push("\n")),r.push("<",e),t)for(c=0,u=t.length;u>c;c++)d=t[c],r.push(" ",d.name,'="',s(d.value,!0),'"');!n||l?r[r.length]=">":r[r.length]=" />",n&&i&&a[e]&&r.length>0&&(f=r[r.length-1],f.length>0&&"\n"!==f&&r.push("\n"))},end:function(e){var t;r.push("</",e,">"),i&&a[e]&&r.length>0&&(t=r[r.length-1],t.length>0&&"\n"!==t&&r.push("\n"))},text:function(e,t){e.length>0&&(r[r.length]=t?e:s(e))},cdata:function(e){r.push("<![CDATA[",e,"]]>")},comment:function(e){r.push("<!--",e,"-->")},pi:function(e,t){t?r.push("<?",e," ",s(t),"?>"):r.push("<?",e,"?>"),i&&r.push("\n")},doctype:function(e){r.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}}}),r(I,[D,B],function(e,t){return function(n,r){var i=this,o=new e(n);n=n||{},n.validate=!("validate"in n)||n.validate,i.schema=r=r||new t,i.writer=o,i.serialize=function(e){function t(e){var n=i[e.type],s,l,c,u,d,f,m,g,p;if(n)n(e);else{if(s=e.name,l=e.shortEnded,c=e.attributes,a&&c&&c.length>1&&(f=[],f.map={},p=r.getElementRule(e.name))){for(m=0,g=p.attributesOrder.length;g>m;m++)u=p.attributesOrder[m],u in c.map&&(d=c.map[u],f.map[u]=d,f.push({name:u,value:d}));for(m=0,g=c.length;g>m;m++)u=c[m].name,u in f.map||(d=c.map[u],f.map[u]=d,f.push({name:u,value:d}));c=f}if(o.start(e.name,c,l),!l){if(e=e.firstChild)do t(e);while(e=e.next);o.end(s)}}}var i,a;return a=n.validate,i={3:function(e){o.text(e.value,e.raw)},8:function(e){o.comment(e.value)},7:function(e){o.pi(e.name,e.value)},10:function(e){o.doctype(e.value)},4:function(e){o.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},o.reset(),1!=e.type||n.inner?i[11](e):t(e),o.getContent()}}}),r(L,[C,M,P,x,I,A,B,d,p,_],function(e,t,n,r,i,o,a,s,l,c){function u(e){function t(e){return e&&"br"===e.name}var n,r;n=e.lastChild,t(n)&&(r=n.prev,t(r)&&(n.remove(),r.remove()))}var d=l.each,f=l.trim,m=e.DOM;return function(e,o){function g(e){var t=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[\ufeff]+<\\/span>","\\s?("+w.join("|")+')="[^"]+"'].join("|"),"gi");return e=c.trim(e.replace(t,""))}function p(e){var t=e,r=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,i,a,s,l,c,u=o.schema;for(t=g(t),c=u.getShortEndedElements();l=r.exec(t);)a=r.lastIndex,s=l[0].length,i=c[l[1]]?a:n.findEndTag(u,t,a),t=t.substring(0,a-s)+t.substring(i),r.lastIndex=a-s;return t}function h(){return p(o.getBody().innerHTML)}function v(e){-1===l.inArray(w,e)&&(x.addAttributeFilter(e,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),w.push(e))}var y,b,x,w=["data-mce-selected"];return o&&(y=o.dom,b=o.schema),y=y||m,b=b||new a(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,x=new t(e,b),x.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n=e.length,r;n--;)r=e[n],r.attr("tabindex",r.attributes.map["data-mce-tabindex"]),r.attr(t,null)}),x.addAttributeFilter("src,href,style",function(t,n){for(var r=t.length,i,o,a="data-mce-"+n,s=e.url_converter,l=e.url_converter_scope,c;r--;)i=t[r],o=i.attributes.map[a],o!==c?(i.attr(n,o.length>0?o:null),i.attr(a,null)):(o=i.attributes.map[n],"style"===n?o=y.serializeStyle(y.parseStyle(o),i.name):s&&(o=s.call(l,o,n,i.name)),i.attr(n,o.length>0?o:null))}),x.addAttributeFilter("class",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.attr("class"),r&&(r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null))}),x.addAttributeFilter("data-mce-type",function(e,t,n){for(var r=e.length,i;r--;)i=e[r],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),x.addNodeFilter("noscript",function(e){for(var t=e.length,n;t--;)n=e[t].firstChild,n&&(n.value=r.decode(n.value))}),x.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var r=e.length,i,o,a;r--;)i=e[r],o=i.firstChild?i.firstChild.value:"","script"===t?(a=i.attr("type"),a&&i.attr("type","mce-no/type"==a?null:a.replace(/^mce\-/,"")),o.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(o)+"\n// ]]>")):o.length>0&&(i.firstChild.value="<!--\n"+n(o)+"\n-->")}),x.addNodeFilter("#comment",function(e){for(var t=e.length,n;t--;)n=e[t],0===n.value.indexOf("[CDATA[")?(n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===n.value.indexOf("mce:protected ")&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))}),x.addNodeFilter("xml:namespace,input",function(e,t){for(var n=e.length,r;n--;)r=e[n],7===r.type?r.remove():1===r.type&&("input"!==t||"type"in r.attributes.map||r.attr("type","text"))}),x.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:b,addNodeFilter:x.addNodeFilter,addAttributeFilter:x.addAttributeFilter,serialize:function(t,n){var r=this,o,a,l,m,g,p;return s.ie&&y.select("script,style,select,map").length>0?(g=t.innerHTML,t=t.cloneNode(!1),y.setHTML(t,g)):t=t.cloneNode(!0),o=document.implementation,o.createHTMLDocument&&(a=o.createHTMLDocument(""),d("BODY"==t.nodeName?t.childNodes:[t],function(e){a.body.appendChild(a.importNode(e,!0))}),t="BODY"!=t.nodeName?a.body.firstChild:a.body,l=y.doc,y.doc=a),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,r.onPreProcess(n)),p=x.parse(f(n.getInner?t.innerHTML:y.getOuterHTML(t)),n),u(p),m=new i(e,b),n.content=m.serialize(p),n.cleanup||(n.content=c.trim(n.content),n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||r.onPostProcess(n),l&&(y.doc=l),n.node=null,n.content},addRules:function(e){b.addValidElements(e)},setRules:function(e){b.setValidElements(e)},onPreProcess:function(e){o&&o.fire("PreProcess",e)},onPostProcess:function(e){o&&o.fire("PostProcess",e)},addTempAttr:v,trimHtml:g,getTrimmedContent:h,trimContent:p}}}),r(O,[],function(){function e(e){function t(t,n){var r,i=0,o,a,s,l,c,u,d=-1,f;if(r=t.duplicate(),r.collapse(n),f=r.parentElement(),f.ownerDocument===e.dom.doc){for(;"false"===f.contentEditable;)f=f.parentNode;if(!f.hasChildNodes())return{node:f,inside:1};for(s=f.children,o=s.length-1;o>=i;)if(u=Math.floor((i+o)/2),l=s[u],r.moveToElementText(l),d=r.compareEndPoints(n?"StartToStart":"EndToEnd",t),d>0)o=u-1;else{if(!(0>d))return{node:l};i=u+1}if(0>d)for(l?r.collapse(!1):(r.moveToElementText(f),r.collapse(!0),l=f,a=!0),c=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&f==r.parentElement();)c++;else for(r.collapse(!0),c=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&f==r.parentElement();)c++;return{node:l,position:d,offset:c,inside:a}}}function n(){function n(e){var n=t(o,e),r,i,s=0,l,c,u;if(r=n.node,i=n.offset,n.inside&&!r.hasChildNodes())return void a[e?"setStart":"setEnd"](r,0);if(i===c)return void a[e?"setStartBefore":"setEndAfter"](r);if(n.position<0){if(l=n.inside?r.firstChild:r.nextSibling,!l)return void a[e?"setStartAfter":"setEndAfter"](r);if(!i)return void(3==l.nodeType?a[e?"setStart":"setEnd"](l,0):a[e?"setStartBefore":"setEndBefore"](l));for(;l;){if(3==l.nodeType&&(u=l.nodeValue,s+=u.length,s>=i)){r=l,s-=i,s=u.length-s;break}l=l.nextSibling}}else{if(l=r.previousSibling,!l)return a[e?"setStartBefore":"setEndBefore"](r);if(!i)return void(3==r.nodeType?a[e?"setStart":"setEnd"](l,r.nodeValue.length):a[e?"setStartAfter":"setEndAfter"](l));for(;l;){if(3==l.nodeType&&(s+=l.nodeValue.length,s>=i)){r=l,s-=i;break}l=l.previousSibling}}a[e?"setStart":"setEnd"](r,s)}var o=e.getRng(),a=i.createRng(),s,l,c,u,d;if(s=o.item?o.item(0):o.parentElement(),s.ownerDocument!=i.doc)return a;if(l=e.isCollapsed(),o.item)return a.setStart(s.parentNode,i.nodeIndex(s)),a.setEnd(a.startContainer,a.startOffset+1),a;try{n(!0),l||n()}catch(f){if(-2147024809!=f.number)throw f;d=r.getBookmark(2),c=o.duplicate(),c.collapse(!0),s=c.parentElement(),l||(c=o.duplicate(),c.collapse(!1),u=c.parentElement(),u.innerHTML=u.innerHTML),s.innerHTML=s.innerHTML,r.moveToBookmark(d),o=e.getRng(),n(!0),l||n()}return a}var r=this,i=e.dom,o=!1;this.getBookmark=function(n){function r(e){var t,n,r,o,a=[];for(t=e.parentNode,n=i.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(r=t.children,o=r.length;o--;)if(e===r[o]){a.push(o);break}e=t,t=t.parentNode}return a}function o(e){var n;return(n=t(a,e))?{position:n.position,offset:n.offset,indexes:r(n.node),inside:n.inside}:void 0}var a=e.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:r(a.item(0))}:(s.start=o(!0),e.isCollapsed()||(s.end=o()))),s},this.moveToBookmark=function(e){function t(e){var t,n,r,o;for(t=i.getRoot(),n=e.length-1;n>=0;n--)o=t.children,r=e[n],r<=o.length-1&&(t=o[r]);return t}function n(n){var i=e[n?"start":"end"],a,s,l,c;i&&(a=i.position>0,s=o.createTextRange(),s.moveToElementText(t(i.indexes)),c=i.offset,c!==l?(s.collapse(i.inside||a),s.moveStart("character",a?-c:c)):s.collapse(n),r.setEndPoint(n?"StartToStart":"EndToStart",s),n&&r.collapse(!0))}var r,o=i.doc.body;e.start&&(e.start.ctrl?(r=o.createControlRange(),r.addElement(t(e.start.indexes)),r.select()):(r=o.createTextRange(),n(!0),n(),r.select()))},this.addRange=function(t){function n(e){var t,n,a,d,g;a=i.create("a"),t=e?s:c,n=e?l:u,d=r.duplicate(),t!=f&&t!=f.documentElement||(t=m,n=0),3==t.nodeType?(t.parentNode.insertBefore(a,t),d.moveToElementText(a),d.moveStart("character",n),i.remove(a),r.setEndPoint(e?"StartToStart":"EndToEnd",d)):(g=t.childNodes,g.length?(n>=g.length?i.insertAfter(a,g[g.length-1]):t.insertBefore(a,g[n]),d.moveToElementText(a)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",a=t.firstChild,d.moveToElementText(a),d.collapse(o)),r.setEndPoint(e?"StartToStart":"EndToEnd",d),i.remove(a))}var r,a,s,l,c,u,d,f=e.dom.doc,m=f.body,g,p;if(s=t.startContainer,l=t.startOffset,c=t.endContainer,u=t.endOffset,r=m.createTextRange(),s==c&&1==s.nodeType){if(l==u&&!s.hasChildNodes()){if(s.canHaveHTML)return d=s.previousSibling,d&&!d.hasChildNodes()&&i.isBlock(d)?d.innerHTML="&#xFEFF;":d=null,s.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",r.moveToElementText(s.lastChild),r.select(),i.doc.selection.clear(),s.innerHTML="",void(d&&(d.innerHTML=""));l=i.nodeIndex(s),s=s.parentNode}if(l==u-1)try{if(p=s.childNodes[l],a=m.createControlRange(),a.addElement(p),a.select(),g=e.getRng(),g.item&&p===g.item(0))return}catch(h){}}n(!0),n(),r.select()},this.getRangeAt=n}return e}),r(H,[d],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),r(F,[H,p,u,d,S],function(e,t,n,r,i){function o(e,t){for(;t&&t!=e;){if(s(t)||a(t))return t;t=t.parentNode}return null}var a=i.isContentEditableFalse,s=i.isContentEditableTrue;return function(i,s){function l(e){var t=s.settings.object_resizing;return t!==!1&&!r.iOS&&("string"!=typeof t&&(t="table,img,div"),"false"!==e.getAttribute("data-mce-resize")&&e!=s.getBody()&&s.dom.is(e,t))}function c(t){var n,r,i,o,a;n=t.screenX-M,r=t.screenY-D,U=n*B[2]+O,W=r*B[3]+H,U=5>U?5:U,W=5>W?5:W,i="IMG"==T.nodeName&&s.settings.resize_img_proportional!==!1?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==T.nodeName&&B[2]*B[3]!==0,i&&(q(n)>q(r)?(W=Y(U*F),U=Y(W/F)):(U=Y(W/F),W=Y(U*F))),S.setStyles(E,{width:U,height:W}),o=B.startPos.x+n,a=B.startPos.y+r,o=o>0?o:0,a=a>0?a:0,S.setStyles(R,{left:o,top:a,display:"block"}),R.innerHTML=U+" &times; "+W,B[2]<0&&E.clientWidth<=U&&S.setStyle(E,"left",I+(O-U)),B[3]<0&&E.clientHeight<=W&&S.setStyle(E,"top",L+(H-W)),n=K.scrollWidth-X,r=K.scrollHeight-G,n+r!==0&&S.setStyles(R,{left:o-n,top:a-r}),z||(s.fire("ObjectResizeStart",{target:T,width:O,height:H}),z=!0)}function u(){function e(e,t){t&&(T.style[e]||!s.schema.isValid(T.nodeName.toLowerCase(),e)?S.setStyle(T,e,t):S.setAttrib(T,e,t))}z=!1,e("width",U),e("height",W),S.unbind($,"mousemove",c),S.unbind($,"mouseup",u),j!=$&&(S.unbind(j,"mousemove",c),S.unbind(j,"mouseup",u)),S.remove(E),S.remove(R),V&&"TABLE"!=T.nodeName||d(T),s.fire("ObjectResized",{target:T,width:U,height:W}),S.setAttrib(T,"style",S.getAttrib(T,"style")),s.nodeChanged()}function d(e,t,n){var i,o,a,d,m;f(),w(),i=S.getPos(e,K),I=i.x,L=i.y,m=e.getBoundingClientRect(),o=m.width||m.right-m.left,a=m.height||m.bottom-m.top,T!=e&&(x(),T=e,U=W=0),d=s.fire("ObjectSelected",{target:e}),l(e)&&!d.isDefaultPrevented()?_(A,function(e,i){function s(t){M=t.screenX,D=t.screenY,O=T.clientWidth,H=T.clientHeight,F=H/O,B=e,e.startPos={x:o*e[0]+I,y:a*e[1]+L},X=K.scrollWidth,G=K.scrollHeight,E=T.cloneNode(!0),S.addClass(E,"mce-clonedresizable"),S.setAttrib(E,"data-mce-bogus","all"),E.contentEditable=!1,E.unSelectabe=!0,S.setStyles(E,{left:I,top:L,margin:0}),E.removeAttribute("data-mce-selected"),K.appendChild(E),S.bind($,"mousemove",c),S.bind($,"mouseup",u),j!=$&&(S.bind(j,"mousemove",c),S.bind(j,"mouseup",u)),R=S.add(K,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},O+" &times; "+H)}var l;return t?void(i==t&&s(n)):(l=S.get("mceResizeHandle"+i),l&&S.remove(l),l=S.add(K,"div",{id:"mceResizeHandle"+i,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+i+"-resize; margin:0; padding:0"}),r.ie&&(l.contentEditable=!1),S.bind(l,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),s(e)}),e.elm=l,void S.setStyles(l,{left:o*e[0]+I-l.offsetWidth/2,top:a*e[1]+L-l.offsetHeight/2}))}):f(),T.setAttribute("data-mce-selected","1")}function f(){var e,t;w(),T&&T.removeAttribute("data-mce-selected");for(e in A)t=S.get("mceResizeHandle"+e),t&&(S.unbind(t),S.remove(t))}function m(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var n,r;return z||s.removed?void 0:(_(S.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),r="mousedown"==e.type?e.target:i.getNode(),r=S.$(r).closest(V?"table":"table,img,hr")[0],t(r,K)&&(C(),n=i.getStart(!0),t(n,r)&&t(i.getEnd(!0),r)&&(!V||r!=n&&"IMG"!==n.nodeName))?void d(r):void f())}function g(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function p(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function h(e){var t=e.srcElement,n,r,i,o,a,l,c;n=t.getBoundingClientRect(),l=P.clientX-n.left,c=P.clientY-n.top;for(r in A)if(i=A[r],o=t.offsetWidth*i[0],a=t.offsetHeight*i[1],q(o-l)<8&&q(a-c)<8){B=i;break}z=!0,s.fire("ObjectResizeStart",{target:T,width:T.clientWidth,height:T.clientHeight}),s.getDoc().selection.empty(),d(t,r,P)}function v(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function y(e){return a(o(s.getBody(),e))}function b(e){var t=e.srcElement;if(y(t))return void v(e);if(t!=T){if(s.fire("ObjectSelected",{target:t}),x(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);"IMG"!=t.nodeName&&"TABLE"!=t.nodeName||(f(),T=t,g(t,"resizestart",h))}}function x(){p(T,"resizestart",h)}function w(){
for(var e in A){var t=A[e];t.elm&&(S.unbind(t.elm),delete t.elm)}}function C(){try{s.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function k(e){var t;if(V){t=$.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function N(){T=E=null,V&&(x(),p(K,"controlselect",b))}var S=s.dom,_=t.each,T,E,R,A,B,P,M,D,I,L,O,H,F,z,U,W,$=s.getDoc(),j=document,V=r.ie&&r.ie<11,q=Math.abs,Y=Math.round,K=s.getBody(),X,G;A={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var J=".mce-content-body";return s.contentStyles.push(J+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: box-sizing;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+J+" .mce-resizehandle:hover {background: #000}"+J+" img[data-mce-selected],"+J+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+J+" .mce-clonedresizable {position: absolute;"+(r.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+J+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),s.on("init",function(){V?(s.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(f(),k(e.target))}),g(K,"controlselect",b),s.on("mousedown",function(e){P=e})):(C(),r.ie>=11&&(s.on("mousedown click",function(e){var t=e.target,n=t.nodeName;z||!/^(TABLE|IMG|HR)$/.test(n)||y(t)||(s.selection.select(t,"TABLE"==n),"mousedown"==e.type&&s.nodeChanged())}),s.dom.bind(K,"mscontrolselect",function(e){function t(e){n.setEditorTimeout(s,function(){s.selection.select(e)})}return y(e.target)?(e.preventDefault(),void t(e.target)):void(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&t(e.target)))})));var e=n.throttle(function(e){s.composing||m(e)});s.on("nodechange ResizeEditor ResizeWindow drop",e),s.on("keyup compositionend",function(t){T&&"TABLE"==T.nodeName&&e(t)}),s.on("hide blur",f)}),s.on("remove",w),{isResizable:l,showResizeRect:d,hideResizeRect:f,updateResizeRect:m,controlSelect:k,destroy:N}}}),r(z,[],function(){function e(e){return function(){return e}}function t(e){return function(t){return!e(t)}}function n(e,t){return function(n){return e(t(n))}}function r(){var e=s.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}}function i(){var e=s.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}}function o(e){var t=s.call(arguments);return t.length-1>=e.length?e.apply(this,t.slice(1)):function(){var e=t.concat([].slice.call(arguments));return o.apply(this,e)}}function a(){}var s=[].slice;return{constant:e,negate:t,and:i,or:r,curry:o,compose:n,noop:a}}),r(U,[S,g,T],function(e,t,n){function r(e){return!p(e)&&(d(e)?!f(e.parentNode):m(e)||u(e)||g(e)||c(e))}function i(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(c(e))return!1;if(l(e))return!0}return!0}function o(e){return!!c(e)&&t.reduce(e.getElementsByTagName("*"),function(e,t){return e||l(t)},!1)!==!0}function a(e){return m(e)||o(e)}function s(e,t){return r(e)&&i(e,t)}var l=e.isContentEditableTrue,c=e.isContentEditableFalse,u=e.isBr,d=e.isText,f=e.matchNodeNames("script style textarea"),m=e.matchNodeNames("img input textarea hr iframe video audio object"),g=e.matchNodeNames("table"),p=n.isCaretContainer;return{isCaretCandidate:r,isInEditable:i,isAtomic:a,isEditableCaretCandidate:s}}),r(W,[],function(){function e(e){return e?{left:u(e.left),top:u(e.top),bottom:u(e.bottom),right:u(e.right),width:u(e.width),height:u(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function t(t,n){return t=e(t),n?t.right=t.left:(t.left=t.left+t.width,t.right=t.left),t.width=0,t}function n(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right}function r(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2}function i(e,t){return e.bottom<t.top||!(e.top>t.bottom)&&r(t.top-e.bottom,e,t)}function o(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&r(t.bottom-e.top,e,t)}function a(e,t){return e.left<t.left}function s(e,t){return e.right>t.right}function l(e,t){return i(e,t)?-1:o(e,t)?1:a(e,t)?-1:s(e,t)?1:0}function c(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}var u=Math.round;return{clone:e,collapse:t,isEqual:n,isAbove:i,isBelow:o,isLeft:a,isRight:s,compare:l,containsXY:c}}),r($,[],function(){function e(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&t.test(e)}var t=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]");return{isExtendingChar:e}}),r(j,[z,S,C,E,U,W,$],function(e,t,n,r,i,o,a){function s(e){return"createRange"in e?e.createRange():n.DOM.createRng()}function l(e){return e&&/[\r\n\t ]/.test(e)}function c(e){var t=e.startContainer,n=e.startOffset,r;return!!(l(e.toString())&&v(t.parentNode)&&(r=t.data,l(r[n-1])||l(r[n+1])))}function u(e){function t(e){var t=e.ownerDocument,n=s(t),r=t.createTextNode(""),i=e.parentNode,a;return i.insertBefore(r,e),n.setStart(r,0),n.setEnd(r,1),a=o.clone(n.getBoundingClientRect()),i.removeChild(r),a}function n(e){var n,r;return r=e.getClientRects(),n=o.clone(r.length>0?r[0]:e.getBoundingClientRect()),b(e)&&0===n.left?t(e):n}function r(e,t){return e=o.collapse(e,t),e.width=1,e.right=e.left+1,e}function i(e){0!==e.height&&(u.length>0&&o.isEqual(e,u[u.length-1])||u.push(e))}function l(e,t){var o=s(e.ownerDocument);if(t<e.data.length){if(a.isExtendingChar(e.data[t]))return u;if(a.isExtendingChar(e.data[t-1])&&(o.setStart(e,t),o.setEnd(e,t+1),!c(o)))return i(r(n(o),!1)),u}t>0&&(o.setStart(e,t-1),o.setEnd(e,t),c(o)||i(r(n(o),!1))),t<e.data.length&&(o.setStart(e,t),o.setEnd(e,t+1),c(o)||i(r(n(o),!0)))}var u=[],d,m;if(y(e.container()))return l(e.container(),e.offset()),u;if(f(e.container()))if(e.isAtEnd())m=w(e.container(),e.offset()),y(m)&&l(m,m.data.length),h(m)&&!b(m)&&i(r(n(m),!1));else{if(m=w(e.container(),e.offset()),y(m)&&l(m,0),h(m)&&e.isAtEnd())return i(r(n(m),!1)),u;d=w(e.container(),e.offset()-1),h(d)&&!b(d)&&(g(d)||g(m)||!h(m))&&i(r(n(d),!1)),h(m)&&i(r(n(m),!0))}return u}function d(t,n,r){function i(){return y(t)?0===n:0===n}function o(){return y(t)?n>=t.data.length:n>=t.childNodes.length}function a(){var e;return e=s(t.ownerDocument),e.setStart(t,n),e.setEnd(t,n),e}function l(){return r||(r=u(new d(t,n))),r}function c(){return l().length>0}function f(e){return e&&t===e.container()&&n===e.offset()}function m(e){return w(t,e?n-1:n)}return{container:e.constant(t),offset:e.constant(n),toRange:a,getClientRects:l,isVisible:c,isAtStart:i,isAtEnd:o,isEqual:f,getNode:m}}var f=t.isElement,m=i.isCaretCandidate,g=t.matchStyleValues("display","block table"),p=t.matchStyleValues("float","left right"),h=e.and(f,m,e.negate(p)),v=e.negate(t.matchStyleValues("white-space","pre pre-line pre-wrap")),y=t.isText,b=t.isBr,x=n.nodeIndex,w=r.getNode;return d.fromRangeStart=function(e){return new d(e.startContainer,e.startOffset)},d.fromRangeEnd=function(e){return new d(e.endContainer,e.endOffset)},d.after=function(e){return new d(e.parentNode,x(e)+1)},d.before=function(e){return new d(e.parentNode,x(e))},d}),r(V,[S,C,z,g,j],function(e,t,n,r,i){function o(e){var t=e.parentNode;return v(t)?o(t):t}function a(e){return e?r.reduce(e.childNodes,function(e,t){return v(t)&&"BR"!=t.nodeName?e=e.concat(a(t)):e.push(t),e},[]):[]}function s(e,t){for(;(e=e.previousSibling)&&h(e);)t+=e.data.length;return t}function l(e){return function(t){return e===t}}function c(t){var n,i,s;return n=a(o(t)),i=r.findIndex(n,l(t),t),n=n.slice(0,i+1),s=r.reduce(n,function(e,t,r){return h(t)&&h(n[r-1])&&e++,e},0),n=r.filter(n,e.matchNodeNames(t.nodeName)),i=r.findIndex(n,l(t),t),i-s}function u(e){var t;return t=h(e)?"text()":e.nodeName.toLowerCase(),t+"["+c(e)+"]"}function d(e,t,n){var r=[];for(t=t.parentNode;!(t==e||n&&n(t));t=t.parentNode)r.push(t);return r}function f(t,i){var o,a,l=[],c,f,m;return o=i.container(),a=i.offset(),h(o)?c=s(o,a):(f=o.childNodes,a>=f.length?(c="after",a=f.length-1):c="before",o=f[a]),l.push(u(o)),m=d(t,o),m=r.filter(m,n.negate(e.isBogus)),l=l.concat(r.map(m,function(e){return u(e)})),l.reverse().join("/")+","+c}function m(t,n,i){var o=a(t);return o=r.filter(o,function(e,t){return!h(e)||!h(o[t-1])}),o=r.filter(o,e.matchNodeNames(n)),o[i]}function g(e,t){for(var n=e,r=0,o;h(n);){if(o=n.data.length,t>=r&&r+o>=t){e=n,t-=r;break}if(!h(n.nextSibling)){e=n,t=o;break}r+=o,n=n.nextSibling}return t>e.data.length&&(t=e.data.length),new i(e,t)}function p(e,t){var n,o,a;return t?(n=t.split(","),t=n[0].split("/"),a=n.length>1?n[1]:"before",o=r.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),m(e,t[1],parseInt(t[2],10))):null},e),o?h(o)?g(o,parseInt(a,10)):(a="after"===a?y(o)+1:y(o),new i(o.parentNode,a)):null):null}var h=e.isText,v=e.isBogus,y=t.nodeIndex;return{create:f,resolve:p}}),r(q,[d,p,T,V,j,S,E],function(e,t,n,r,i,o,a){function s(s){var c=s.dom;this.getBookmark=function(e,u){function d(e,n){var r=0;return t.each(c.select(e),function(e){return"all"!==e.getAttribute("data-mce-bogus")?e!=n&&void r++:void 0}),r}function f(e){function t(t){var n,r,i,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(i=n.childNodes,n=i[Math.min(t?r:r-1,i.length-1)],n&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))}return t(!0),t(),e}function m(e){function t(e,t){var r=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"],o=[],a,s,l=0;if(3==r.nodeType){if(u)for(a=r.previousSibling;a&&3==a.nodeType;a=a.previousSibling)i+=a.nodeValue.length;o.push(i)}else s=r.childNodes,i>=s.length&&s.length&&(l=1,i=Math.max(0,s.length-1)),o.push(c.nodeIndex(s[i],u)+l);for(;r&&r!=n;r=r.parentNode)o.push(c.nodeIndex(r,u));return o}var n=c.getRoot(),r={};return r.start=t(e,!0),s.isCollapsed()||(r.end=t(e)),r}function g(e){function t(e,t){var r;if(o.isElement(e)&&(e=a.getNode(e,t),l(e)))return e;if(n.isCaretContainer(e)){if(o.isText(e)&&n.isCaretContainerBlock(e)&&(e=e.parentNode),r=e.previousSibling,l(r))return r;if(r=e.nextSibling,l(r))return r}}return t(e.startContainer,e.startOffset)||t(e.endContainer,e.endOffset)}var p,h,v,y,b,x,w="&#xFEFF;",C;if(2==e)return x=s.getNode(),b=x?x.nodeName:null,p=s.getRng(),l(x)||"IMG"==b?{name:b,index:d(b,x)}:s.tridentSel?s.tridentSel.getBookmark(e):(x=g(p),x?(b=x.tagName,{name:b,index:d(b,x)}):m(p));if(3==e)return p=s.getRng(),{start:r.create(c.getRoot(),i.fromRangeStart(p)),end:r.create(c.getRoot(),i.fromRangeEnd(p))};if(e)return{rng:s.getRng()};if(p=s.getRng(),v=c.uniqueId(),y=s.isCollapsed(),C="overflow:hidden;line-height:0px",p.duplicate||p.item){if(p.item)return x=p.item(0),b=x.nodeName,{name:b,index:d(b,x)};h=p.duplicate();try{p.collapse(),p.pasteHTML('<span data-mce-type="bookmark" id="'+v+'_start" style="'+C+'">'+w+"</span>"),y||(h.collapse(!1),p.moveToElementText(h.parentElement()),0===p.compareEndPoints("StartToEnd",h)&&h.move("character",-1),h.pasteHTML('<span data-mce-type="bookmark" id="'+v+'_end" style="'+C+'">'+w+"</span>"))}catch(k){return null}}else{if(x=s.getNode(),b=x.nodeName,"IMG"==b)return{name:b,index:d(b,x)};h=f(p.cloneRange()),y||(h.collapse(!1),h.insertNode(c.create("span",{"data-mce-type":"bookmark",id:v+"_end",style:C},w))),p=f(p),p.collapse(!0),p.insertNode(c.create("span",{"data-mce-type":"bookmark",id:v+"_start",style:C},w))}return s.moveToBookmark({id:v,keep:1}),{id:v}},this.moveToBookmark=function(n){function i(e){var t=n[e?"start":"end"],r,i,o,a;if(t){for(o=t[0],i=d,r=t.length-1;r>=1;r--){if(a=i.childNodes,t[r]>a.length-1)return;i=a[t[r]]}3===i.nodeType&&(o=Math.min(t[0],i.nodeValue.length)),1===i.nodeType&&(o=Math.min(t[0],i.childNodes.length)),e?u.setStart(i,o):u.setEnd(i,o)}return!0}function o(r){var i=c.get(n.id+"_"+r),o,a,s,l,u=n.keep;if(i&&(o=i.parentNode,"start"==r?(u?(o=i.firstChild,a=1):a=c.nodeIndex(i),f=m=o,g=p=a):(u?(o=i.firstChild,a=1):a=c.nodeIndex(i),m=o,p=a),!u)){for(l=i.previousSibling,s=i.nextSibling,t.each(t.grep(i.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});i=c.get(n.id+"_"+r);)c.remove(i,1);l&&s&&l.nodeType==s.nodeType&&3==l.nodeType&&!e.opera&&(a=l.nodeValue.length,l.appendData(s.nodeValue),c.remove(s),"start"==r?(f=m=l,g=p=a):(m=l,p=a))}}function a(t){return!c.isBlock(t)||t.innerHTML||e.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}function l(){var e,t;return e=c.createRng(),t=r.resolve(c.getRoot(),n.start),e.setStart(t.container(),t.offset()),t=r.resolve(c.getRoot(),n.end),e.setEnd(t.container(),t.offset()),e}var u,d,f,m,g,p;if(n)if(t.isArray(n.start)){if(u=c.createRng(),d=c.getRoot(),s.tridentSel)return s.tridentSel.moveToBookmark(n);i(!0)&&i()&&s.setRng(u)}else"string"==typeof n.start?s.setRng(l(n)):n.id?(o("start"),o("end"),f&&(u=c.createRng(),u.setStart(a(f),g),u.setEnd(a(m),p),s.setRng(u))):n.name?s.select(c.select(n.name)[n.index]):n.rng&&s.setRng(n.rng)}}var l=o.isContentEditableFalse;return s.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},s}),r(Y,[y,O,F,E,q,S,d,p,j],function(e,n,r,i,o,a,s,l,c){function u(e,t,i,a){var s=this;s.dom=e,s.win=t,s.serializer=i,s.editor=a,s.bookmarkManager=new o(s),s.controlSelection=new r(s,a),s.win.getSelection||(s.tridentSel=new n(s))}var d=l.each,f=l.trim,m=s.ie;return u.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();e?(r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)):(n._moveEndPoint(r,n.editor.getBody(),!0),n.setRng(r))},getContent:function(e){var n=this,r=n.getRng(),i=n.dom.create("body"),o=n.getSel(),a,s,l;return e=e||{},a=s="",e.get=!0,e.format=e.format||"html",e.selection=!0,n.editor.fire("BeforeGetContent",e),"text"==e.format?n.isCollapsed()?"":r.text||(o.toString?o.toString():""):(r.cloneContents?(l=r.cloneContents(),l&&i.appendChild(l)):r.item!==t||r.htmlText!==t?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),/^\s/.test(i.innerHTML)&&(a=" "),/\s+$/.test(i.innerHTML)&&(s=" "),e.getInner=!0,e.content=n.isCollapsed()?"":a+n.serializer.serialize(i,e)+s,n.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n=this,r=n.getRng(),i,o=n.win.document,a,s;if(t=t||{format:"html"},t.set=!0,t.selection=!0,t.content=e,t.no_events||n.editor.fire("BeforeSetContent",t),e=t.content,r.insertNode){e+='<span id="__caret">_</span>',r.startContainer==o&&r.endContainer==o?o.body.innerHTML=e:(r.deleteContents(),0===o.body.childNodes.length?o.body.innerHTML=e:r.createContextualFragment?r.insertNode(r.createContextualFragment(e)):(a=o.createDocumentFragment(),s=o.createElement("div"),a.appendChild(s),s.outerHTML=e,r.insertNode(a))),i=n.dom.get("__caret"),r=o.createRange(),r.setStartBefore(i),r.setEndBefore(i),n.setRng(r),n.dom.remove("__caret");try{n.setRng(r)}catch(l){}}else r.item&&(o.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(e)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):r.pasteHTML(e);t.no_events||n.editor.fire("SetContent",t)},getStart:function(e){var t=this,n=t.getRng(),r,i,o,a;if(n.duplicate||n.item){if(n.item)return n.item(0);for(o=n.duplicate(),o.collapse(1),r=o.parentElement(),r.ownerDocument!==t.dom.doc&&(r=t.dom.getRoot()),i=a=n.parentElement();a=a.parentNode;)if(a==r){r=i;break}return r}return r=n.startContainer,1==r.nodeType&&r.hasChildNodes()&&(e&&n.collapsed||(r=r.childNodes[Math.min(r.childNodes.length-1,n.startOffset)])),r&&3==r.nodeType?r.parentNode:r},getEnd:function(e){var t=this,n=t.getRng(),r,i;return n.duplicate||n.item?n.item?n.item(0):(n=n.duplicate(),n.collapse(0),r=n.parentElement(),r.ownerDocument!==t.dom.doc&&(r=t.dom.getRoot()),r&&"BODY"==r.nodeName?r.lastChild||r:r):(r=n.endContainer,i=n.endOffset,1==r.nodeType&&r.hasChildNodes()&&(e&&n.collapsed||(r=r.childNodes[i>0?i-1:i])),r&&3==r.nodeType?r.parentNode:r)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n=this,r=n.dom,i=r.createRng(),o;if(n.lastFocusBookmark=null,e){if(!t&&n.controlSelection.controlSelect(e))return;o=r.nodeIndex(e),i.setStart(e.parentNode,o),i.setEnd(e.parentNode,o+1),t&&(n._moveEndPoint(i,e,!0),n._moveEndPoint(i,e)),n.setRng(i)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed)},collapse:function(e){var t=this,n=t.getRng(),r;n.item&&(r=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(r)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(r){return-1}}var n=this,r,i,o,a,s,l;if(!n.win)return null;if(a=n.win.document,"undefined"==typeof a||null===a)return null;if(!e&&n.lastFocusBookmark){var c=n.lastFocusBookmark;return c.startContainer?(i=a.createRange(),i.setStart(c.startContainer,c.startOffset),i.setEnd(c.endContainer,c.endOffset)):i=c,i}if(e&&n.tridentSel)return n.tridentSel.getRangeAt(0);try{(r=n.getSel())&&(i=r.rangeCount>0?r.getRangeAt(0):r.createRange?r.createRange():a.createRange())}catch(u){}if(l=n.editor.fire("GetSelectionRange",{range:i}),l.range!==i)return l.range;if(m&&i&&i.setStart&&a.selection){try{s=a.selection.createRange()}catch(u){}s&&s.item&&(o=s.item(0),i=a.createRange(),i.setStartBefore(o),i.setEndAfter(o))}return i||(i=a.createRange?a.createRange():a.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=n.dom.getRoot(),i.setStart(o,0),i.setEnd(o,0)),n.selectedRange&&n.explicitRange&&(0===t(i.START_TO_START,i,n.selectedRange)&&0===t(i.END_TO_END,i,n.selectedRange)?i=n.explicitRange:(n.selectedRange=null,n.explicitRange=null)),i},setRng:function(e,t){var n=this,r,i,o;if(e)if(e.select){n.explicitRange=null;try{e.select()}catch(a){}}else if(n.tridentSel){if(e.cloneRange)try{n.tridentSel.addRange(e)}catch(a){}}else{if(r=n.getSel(),o=n.editor.fire("SetSelectionRange",{range:e}),e=o.range,r){n.explicitRange=e;try{r.removeAllRanges(),r.addRange(e)}catch(a){}t===!1&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),n.selectedRange=r.rangeCount>0?r.getRangeAt(0):null}e.collapsed||e.startContainer!=e.endContainer||!r.setBaseAndExtent||s.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(i=e.startContainer.childNodes[e.startOffset],i&&"IMG"==i.tagName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode!==e.startContainer&&r.setBaseAndExtent(i,0,i,1))),n.editor.fire("AfterSetSelectionRange",{range:e})}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t=this,n=t.getRng(),r,i,o,a,s,l=t.dom.getRoot();return n?(i=n.startContainer,o=n.endContainer,a=n.startOffset,s=n.endOffset,n.setStart?(r=n.commonAncestorContainer,!n.collapsed&&(i==o&&2>s-a&&i.hasChildNodes()&&(r=i.childNodes[a]),3===i.nodeType&&3===o.nodeType&&(i=i.length===a?e(i.nextSibling,!0):i.parentNode,o=0===s?e(o.previousSibling,!1):o.parentNode,i&&i===o))?i:r&&3==r.nodeType?r.parentNode:r):(r=n.item?n.item(0):n.parentElement(),r.ownerDocument!==t.win.document&&(r=l),r)):l},getSelectedBlocks:function(t,n){var r=this,i=r.dom,o,a,s=[];if(a=i.getRoot(),t=i.getParent(t||r.getStart(),i.isBlock),n=i.getParent(n||r.getEnd(),i.isBlock),t&&t!=a&&s.push(t),t&&n&&t!=n){o=t;for(var l=new e(t,a);(o=l.next())&&o!=n;)i.isBlock(o)&&s.push(o)}return n&&t!=n&&n!=a&&s.push(n),s},isForward:function(){var e=this.dom,t=this.getSel(),n,r;return!(t&&t.anchorNode&&t.focusNode)||(n=e.createRng(),n.setStart(t.anchorNode,t.anchorOffset),n.collapse(!0),r=e.createRng(),r.setStart(t.focusNode,t.focusOffset),r.collapse(!0),n.compareBoundaryPoints(n.START_TO_START,r)<=0)},normalize:function(){var e=this,t=e.getRng();return s.range&&new i(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n=this,r;return n.selectorChangedData||(n.selectorChangedData={},r={},n.editor.on("NodeChange",function(e){var t=e.element,i=n.dom,o=i.getParents(t,null,i.getRoot()),a={};d(n.selectorChangedData,function(e,t){d(o,function(n){return i.is(n,t)?(r[t]||(d(e,function(e){e(!0,{node:n,selector:t,parents:o})}),r[t]=e),a[t]=e,!1):void 0})}),d(r,function(e,n){a[n]||(delete r[n],d(e,function(e){e(!1,{node:t,selector:n,parents:o})}))})})),n.selectorChangedData[e]||(n.selectorChangedData[e]=[]),n.selectorChangedData[e].push(t),n},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){function n(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}}var r,i,o=this,s=o.dom,l=s.getRoot(),c,u,d=0;if(a.isElement(e)){if(t===!1&&(d=e.offsetHeight),"BODY"!=l.nodeName){var f=o.getScrollContainer();if(f)return r=n(e).y-n(f).y+d,u=f.clientHeight,c=f.scrollTop,void((c>r||r+25>c+u)&&(f.scrollTop=c>r?r:r-u+25))}i=s.getViewPort(o.editor.getWin()),r=s.getPos(e).y+d,c=i.y,u=i.h,(r<i.y||r+25>c+u)&&o.editor.getWin().scrollTo(0,c>r?r:r-u+25)}},placeCaretAt:function(e,t){this.setRng(i.getCaretRangeFromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(t,n,r){var i=n,o=new e(n,i),a=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==f(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"==n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(s.ie&&s.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?o.next():o.prev());"BODY"==i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},getBoundingClientRect:function(){var e=this.getRng();return e.collapsed?c.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},u}),r(K,[q,p],function(e,t){function n(t){this.compare=function(n,i){function o(e){var n={};return r(t.getAttribs(e),function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&0!==i.indexOf("data-")&&(n[i]=t.getAttrib(e,i))}),n}function a(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(n=t[r],"undefined"==typeof n)return!1;if(e[r]!=n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0}return!(n.nodeName!=i.nodeName||!a(o(n),o(i))||!a(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(i,"style")))||e.isBookmarkNode(n)||e.isBookmarkNode(i))}}var r=t.each;return n}),r(X,[C,p,B],function(e,t,n){function r(e,r){function i(e,t){t.classes.length&&c.addClass(e,t.classes.join(" ")),c.setAttribs(e,t.attrs)}function o(e){var t;return u="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=c.create(u.name),i(t,u),t}function a(e,n){var r="string"!=typeof e?e.nodeName.toLowerCase():e,i=f.getElementRule(r),o=i.parentsRequired;return!(!o||!o.length)&&(n&&-1!==t.inArray(o,n)?n:o[0])}function s(e,n,r){var i,l,u,d=n.length&&n[0],f=d&&d.name;if(u=a(e,f))f==u?(l=n[0],n=n.slice(1)):l=u;else if(d)l=n[0],n=n.slice(1);else if(!r)return e;return l&&(i=o(l),i.appendChild(e)),r&&(i||(i=c.create("div"),i.appendChild(e)),t.each(r,function(t){var n=o(t);i.insertBefore(n,e)})),s(i,n,l&&l.siblings)}var l,u,d,f=r&&r.schema||new n({});return e&&e.length?(u=e[0],l=o(u),d=c.create("div"),d.appendChild(s(l,e.slice(1),u.siblings)),d):""}function i(e,t){return r(a(e),t)}function o(e){var n,r={classes:[],attrs:{}};return e=r.selector=t.trim(e),"*"!==e&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,n,i,o,a){switch(n){case"#":r.attrs.id=i;break;case".":r.classes.push(i);break;case":":-1!==t.inArray("checked disabled enabled read-only required".split(" "),i)&&(r.attrs[i]=i)}if("["==o){var s=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);s&&(r.attrs[s[1]]=s[2])}return""})),r.name=n||"div",r}function a(e){return e&&"string"==typeof e?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),t.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var n=t.map(e.split(/(?:~\+|~|\+)/),o),r=n.pop();return n.length&&(r.siblings=n),r}).reverse()):[]}function s(e,t){function n(e){return e.replace(/%(\w+)/g,"")}var i,o,s,u,d="",f,m;if(m=e.settings.preview_styles,m===!1)return"";if("string"!=typeof m&&(m="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return"preview"in t&&(m=t.preview,m===!1)?"":(i=t.block||t.inline||"span",u=a(t.selector),u.length?(u[0].name||(u[0].name=i),i=t.selector,o=r(u,e)):o=r([i],e),s=c.select(i,o)[0]||o.firstChild,l(t.styles,function(e,t){e=n(e),e&&c.setStyle(s,t,e)}),l(t.attributes,function(e,t){e=n(e),e&&c.setAttrib(s,t,e)}),l(t.classes,function(e){e=n(e),c.hasClass(s,e)||c.addClass(s,e)}),e.fire("PreviewFormats"),c.setStyles(o,{position:"absolute",left:-65535}),e.getBody().appendChild(o),f=c.getStyle(e.getBody(),"fontSize",!0),f=/px$/.test(f)?parseInt(f,10):0,l(m.split(" "),function(t){var n=c.getStyle(s,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=c.getStyle(e.getBody(),t,!0),"#ffffff"==c.toHex(n).toLowerCase())||"color"==t&&"#000000"==c.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===f)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*f+"px"}"border"==t&&n&&(d+="padding:0 2px;"),d+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),c.remove(o),d)}var l=t.each,c=e.DOM;return{getCssText:s,parseSelector:a,selectorToHtml:i}}),r(G,[g,S,h],function(e,t,n){function r(e,t){var n=o[e];n||(o[e]=n=[]),o[e].push(t)}function i(e,t){s(o[e],function(e){e(t)})}var o={},a=e.filter,s=e.each;return r("pre",function(r){function i(t){return c(t.previousSibling)&&-1!=e.indexOf(u,t.previousSibling)}function o(e,t){n(t).remove(),n(e).append("<br><br>").append(t.childNodes)}var l=r.selection.getRng(),c,u;c=t.matchNodeNames("pre"),l.collapsed||(u=r.selection.getSelectedBlocks(),s(a(a(u,c),i),function(e){o(e.previousSibling,e)}))}),{postProcess:i}}),r(J,[y,E,q,K,z,p,X,G],function(e,t,n,r,i,o,a,s){return function(l){function c(e){return e.nodeType&&(e=e.nodeName),!!l.schema.getTextBlockElements()[e.toLowerCase()]}function u(e){return/^(TH|TD)$/.test(e.nodeName)}function d(e){return e&&/^(IMG)$/.test(e.nodeName)}function f(e,t){return Z.getParents(e,t,Z.getRoot())}function m(e){return 1===e.nodeType&&"_mce_caret"===e.id}function g(){v({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){pe(n,function(t,n){Z.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),pe("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){v(e,{block:e,remove:"all"})}),v(l.settings.formats)}function p(){l.addShortcut("meta+b","bold_desc","Bold"),l.addShortcut("meta+i","italic_desc","Italic"),l.addShortcut("meta+u","underline_desc","Underline");for(var e=1;6>=e;e++)l.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);l.addShortcut("access+7","",["FormatBlock",!1,"p"]),l.addShortcut("access+8","",["FormatBlock",!1,"div"]),l.addShortcut("access+9","",["FormatBlock",!1,"address"])}function h(e){return e?J[e]:J}function v(e,t){e&&("string"!=typeof e?pe(e,function(e,t){v(t,e)}):(t=t.length?t:[t],pe(t,function(e){e.deep===ue&&(e.deep=!e.selector),e.split===ue&&(e.split=!e.selector||e.inline),e.remove===ue&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),J[e]=t))}function y(e){return e&&J[e]&&delete J[e],J}function b(e,t){var n=h(t);if(n)for(var r=0;r<n.length;r++)if(n[r].inherit===!1&&Z.is(e,n[r].selector))return!0;return!1}function x(e){var t;return l.dom.getParent(e,function(e){return t=l.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function w(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=x(e.parentNode),l.dom.getStyle(e,"color")&&t?l.dom.setStyle(e,"text-decoration",t):l.dom.getStyle(e,"text-decoration")===t&&l.dom.setStyle(e,"text-decoration",null))}function C(t,n,r){function i(e,t){if(t=t||f,e){if(t.onformat&&t.onformat(e,t,n,r),pe(t.styles,function(t,r){Z.setStyle(e,r,F(t,n))}),t.styles){var i=Z.getAttrib(e,"style");i&&e.setAttribute("data-mce-style",i)}pe(t.attributes,function(t,r){Z.setAttrib(e,r,F(t,n))}),pe(t.classes,function(t){t=F(t,n),Z.hasClass(e,t)||Z.addClass(e,t)})}}function o(e,t){var n=!1;return!!f.selector&&(pe(e,function(e){
return"collapsed"in e&&e.collapsed!==v?void 0:Z.is(t,e.selector)&&!m(t)?(i(t,e),n=!0,!1):void 0}),n)}function a(){function t(t,n){var i=new e(n);for(r=i.prev2();r;r=i.prev2()){if(3==r.nodeType&&r.data.length>0)return r;if(r.childNodes.length>1||r==t||"BR"==r.tagName)return r}}var n=l.selection.getRng(),i=n.startContainer,o=n.endContainer;if(i!=o&&0===n.endOffset){var a=t(i,o),s=3==a.nodeType?a.data.length:a.childNodes.length;n.setEnd(a,s)}return n}function u(e,r,a){var s=[],l,u,g=!0;l=f.inline||f.block,u=Z.create(l),i(u),ee.walk(e,function(e){function r(e){var h,v,y,b;if(b=g,h=e.nodeName.toLowerCase(),v=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&de(e)&&(b=g,g="true"===de(e),y=!0),P(h,"br"))return p=0,void(f.block&&Z.remove(e));if(f.wrapper&&S(e,t,n))return void(p=0);if(g&&!y&&f.block&&!f.wrapper&&c(h)&&te(v,l))return e=Z.rename(e,l),i(e),s.push(e),void(p=0);if(f.selector){var x=o(d,e);if(!f.inline||x)return void(p=0)}!g||y||!te(l,h)||!te(v,l)||!a&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||m(e)||f.inline&&ne(e)?(p=0,pe(he(e.childNodes),r),y&&(g=b),p=0):(p||(p=Z.clone(u,se),e.parentNode.insertBefore(p,e),s.push(p)),p.appendChild(e))}var p;pe(e,r)}),f.links===!0&&pe(s,function(e){function t(e){"A"===e.nodeName&&i(e,f),pe(he(e.childNodes),t)}t(e)}),pe(s,function(e){function r(e){var t=0;return pe(e.childNodes,function(e){z(e)||ge(e)||t++}),t}function o(e){var t=!1;return pe(e.childNodes,function(e){return D(e)?(t=e,!1):void 0}),t}function a(e,t){do{if(1!==r(e))break;if(e=o(e),!e)break;if(t(e))return e}while(e);return null}function l(e){var t,n;return t=o(e),t&&!ge(t)&&B(t,f)&&(n=Z.clone(t,se),i(n),Z.replace(n,e,le),Z.remove(t,1)),n||e}var c;if(c=r(e),(s.length>1||!ne(e))&&0===c)return void Z.remove(e,1);if(!ne(e)&&!O(e,"fontSize")){var u=a(e,I("fontSize"));u&&C("fontsize",{value:O(u,"fontSize")},e)}(f.inline||f.wrapper)&&(f.exact||1!==c||(e=l(e)),pe(d,function(t){pe(Z.select(t.inline,e),function(e){ge(e)||j(t,n,e,t.exact?e:null)})}),S(e.parentNode,t,n)&&j(f,n,e)&&(e=0),f.merge_with_parents&&Z.getParent(e.parentNode,function(r){return S(r,t,n)?(j(f,n,e)&&(e=0),le):void 0}),e&&f.merge_siblings!==!1&&(e=Y(q(e),e),e=Y(e,q(e,le))))})}var d=h(t),f=d[0],g,p,v=!r&&Q.isCollapsed();if("false"!==de(Q.getNode())){if(f){if(r)r.nodeType?o(d,r)||(p=Z.createRng(),p.setStartBefore(r),p.setEndAfter(r),u(W(p,d),null,!0)):u(r,null,!0);else if(v&&f.inline&&!Z.select("td[data-mce-selected],th[data-mce-selected]").length)X("apply",t,n);else{var y=l.selection.getNode();re||!d[0].defaultBlock||Z.getParent(y,Z.isBlock)||C(d[0].defaultBlock),l.selection.setRng(a()),g=Q.getBookmark(),u(W(Q.getRng(le),d),g),f.styles&&((f.styles.color||f.styles.textDecoration)&&(ve(y,w,"childNodes"),w(y)),f.styles.backgroundColor&&M(y,I("fontSize"),L("backgroundColor",F(f.styles.backgroundColor,n)))),Q.moveToBookmark(g),G(Q.getRng(le)),l.nodeChanged()}s.postProcess(t,l)}}else{r=Q.getNode();for(var b=0,x=d.length;x>b;b++)if(d[b].ceFalseOverride&&Z.is(r,d[b].selector))return void i(r,d[b])}}function k(e,t,n,r){function i(e){var n,r,o,a,s;if(1===e.nodeType&&de(e)&&(a=y,y="true"===de(e),s=!0),n=he(e.childNodes),y&&!s)for(r=0,o=m.length;o>r&&!j(m[r],t,e,e);r++);if(g.deep&&n.length){for(r=0,o=n.length;o>r;r++)i(n[r]);s&&(y=a)}}function o(n){var i;return pe(f(n.parentNode).reverse(),function(n){var o;i||"_start"==n.id||"_end"==n.id||(o=S(n,e,t,r),o&&o.split!==!1&&(i=n))}),i}function a(e,n,r,i){var o,a,s,l,c,u;if(e){for(u=e.parentNode,o=n.parentNode;o&&o!=u;o=o.parentNode){for(a=Z.clone(o,se),c=0;c<m.length;c++)if(j(m[c],t,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}!i||g.mixed&&ne(e)||(n=Z.split(e,n)),s&&(r.parentNode.insertBefore(s,r),l.appendChild(r))}return n}function s(e){return a(o(e),e,e,!0)}function c(e){var t=Z.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return ge(n)&&(n=n[e?"firstChild":"lastChild"]),3==n.nodeType&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),Z.remove(t,!0),n}function d(e){var t,n,r=e.commonAncestorContainer;if(e=W(e,m,le),g.split){if(t=K(e,le),n=K(e),t!=n){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&u(n)&&n.firstChild&&(n=n.firstChild||n),Z.isChildOf(t,n)&&!ne(n)&&!u(t)&&!u(n))return t=U(t,"span",{id:"_start","data-mce-type":"bookmark"}),s(t),void(t=c(le));t=U(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=U(n,"span",{id:"_end","data-mce-type":"bookmark"}),s(t),s(n),t=c(le),n=c()}else t=n=s(t);e.startContainer=t.parentNode?t.parentNode:t,e.startOffset=ie(t),e.endContainer=n.parentNode?n.parentNode:n,e.endOffset=ie(n)+1}ee.walk(e,function(e){pe(e,function(e){i(e),1===e.nodeType&&"underline"===l.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===x(e.parentNode)&&j({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var m=h(e),g=m[0],p,v,y=!0;if(n)return void(n.nodeType?(v=Z.createRng(),v.setStartBefore(n),v.setEndAfter(n),d(v)):d(n));if("false"!==de(Q.getNode()))Q.isCollapsed()&&g.inline&&!Z.select("td[data-mce-selected],th[data-mce-selected]").length?X("remove",e,t,r):(p=Q.getBookmark(),d(Q.getRng(le)),Q.moveToBookmark(p),g.inline&&_(e,t,Q.getStart())&&G(Q.getRng(!0)),l.nodeChanged());else{n=Q.getNode();for(var b=0,w=m.length;w>b&&(!m[b].ceFalseOverride||!j(m[b],t,n,n));b++);}}function N(e,t,n){var r=h(e);!_(e,t,n)||"toggle"in r[0]&&!r[0].toggle?C(e,t,n):k(e,t,n)}function S(e,t,n,r){function i(e,t,i){var o,a,s=t[i],l;if(t.onmatch)return t.onmatch(e,t,i);if(s)if(s.length===ue){for(o in s)if(s.hasOwnProperty(o)){if(a="attributes"===i?Z.getAttrib(e,o):O(e,o),r&&!a&&!t.exact)return;if((!r||t.exact)&&!P(a,H(F(s[o],n),o)))return}}else for(l=0;l<s.length;l++)if("attributes"===i?Z.getAttrib(e,s[l]):O(e,s[l]))return t;return t}var o=h(t),a,s,l;if(o&&e)for(s=0;s<o.length;s++)if(a=o[s],B(e,a)&&i(e,a,"attributes")&&i(e,a,"styles")){if(l=a.classes)for(s=0;s<l.length;s++)if(!Z.hasClass(e,l[s]))return;return a}}function _(e,t,n){function r(n){var r=Z.getRoot();return n!==r&&(n=Z.getParent(n,function(n){return!!b(n,e)||n.parentNode===r||!!S(n,e,t,!0)}),S(n,e,t))}var i;return n?r(n):(n=Q.getNode(),r(n)?le:(i=Q.getStart(),i!=n&&r(i)?le:se))}function T(e,t){var n,r=[],i={};return n=Q.getStart(),Z.getParent(n,function(n){var o,a;for(o=0;o<e.length;o++)a=e[o],!i[a]&&S(n,a,t)&&(i[a]=!0,r.push(a))},Z.getRoot()),r}function E(e){var t=h(e),n,r,i,o,a;if(t)for(n=Q.getStart(),r=f(n),o=t.length-1;o>=0;o--){if(a=t[o].selector,!a||t[o].defaultBlock)return le;for(i=r.length-1;i>=0;i--)if(Z.is(r[i],a))return le}return se}function R(e,t,n){var r;return ce||(ce={},r={},l.on("NodeChange",function(e){var t=f(e.element),n={};t=o.grep(t,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}),pe(ce,function(e,i){pe(t,function(o){return S(o,i,{},e.similar)?(r[i]||(pe(e,function(e){e(!0,{node:o,format:i,parents:t})}),r[i]=e),n[i]=e,!1):!b(o,i)&&void 0})}),pe(r,function(i,o){n[o]||(delete r[o],pe(i,function(n){n(!1,{node:e.element,format:o,parents:t})}))})})),pe(e.split(","),function(e){ce[e]||(ce[e]=[],ce[e].similar=n),ce[e].push(t)}),this}function A(e){return a.getCssText(l,e)}function B(e,t){return P(e,t.inline)?le:P(e,t.block)?le:t.selector?1==e.nodeType&&Z.is(e,t.selector):void 0}function P(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function M(e,t,n){pe(e.childNodes,function(e){D(e)&&(t(e)&&n(e),e.hasChildNodes()&&M(e,t,n))})}function D(e){return 1==e.nodeType&&!ge(e)&&!z(e)&&!m(e)}function I(e){return i.curry(function(e,t){return!(!t||!O(t,e))},e)}function L(e,t){return i.curry(function(e,t,n){Z.setStyle(n,e,t)},e,t)}function O(e,t){return H(Z.getStyle(e,t),t)}function H(e,t){return"color"!=t&&"backgroundColor"!=t||(e=Z.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function F(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function z(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function U(e,t,n){var r=Z.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function W(t,n,r){function i(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var r,i,o,a,s;if(r=i=e?h:y,a=e?"previousSibling":"nextSibling",s=Z.getRoot(),3==r.nodeType&&!z(r)&&(e?v>0:b<r.nodeValue.length))return r;for(;;){if(!n[0].block_expand&&ne(i))return i;for(o=i[a];o;o=o[a])if(!ge(o)&&!z(o)&&!t(o))return i;if(i==s||i.parentNode==s){r=i;break}i=i.parentNode}return r}function o(e,t){for(t===ue&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function a(e){for(var t=e;t;){if(1===t.nodeType&&de(t))return"false"===de(t)?t:e;t=t.parentNode}return e}function s(t,n,i){function o(e,t){var n,o,a=e.nodeValue;return"undefined"==typeof t&&(t=i?a.length:0),i?(n=a.lastIndexOf(" ",t),o=a.lastIndexOf("",t),n=n>o?n:o,-1===n||r||n++):(n=a.indexOf(" ",t),o=a.indexOf("",t),n=-1!==n&&(-1===o||o>n)?n:o),n}var a,s,c,u;if(3===t.nodeType){if(c=o(t,n),-1!==c)return{container:t,offset:c};u=t}for(a=new e(t,Z.getParent(t,ne)||l.getBody());s=a[i?"prev":"next"]();)if(3===s.nodeType){if(u=s,c=o(s),-1!==c)return{container:s,offset:c}}else if(ne(s))break;return u?(n=i?0:u.length,{container:u,offset:n}):void 0}function u(e,r){var i,o,a,s;for(3==e.nodeType&&0===e.nodeValue.length&&e[r]&&(e=e[r]),i=f(e),o=0;o<i.length;o++)for(a=0;a<n.length;a++)if(s=n[a],!("collapsed"in s&&s.collapsed!==t.collapsed)&&Z.is(i[o],s.selector))return i[o];return e}function d(e,t){var r,i=Z.getRoot();if(n[0].wrapper||(r=Z.getParent(e,n[0].block,i)),r||(r=Z.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=i&&c(e)})),r&&n[0].wrapper&&(r=f(r,"ul,ol").reverse()[0]||r),!r)for(r=e;r[t]&&!ne(r[t])&&(r=r[t],!P(r,"br")););return r||e}var m,g,p,h=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==h.nodeType&&h.hasChildNodes()&&(m=h.childNodes.length-1,h=h.childNodes[v>m?m:v],3==h.nodeType&&(v=0)),1==y.nodeType&&y.hasChildNodes()&&(m=y.childNodes.length-1,y=y.childNodes[b>m?m:b-1],3==y.nodeType&&(b=y.nodeValue.length)),h=a(h),y=a(y),(ge(h.parentNode)||ge(h))&&(h=ge(h)?h:h.parentNode,h=h.nextSibling||h,3==h.nodeType&&(v=0)),(ge(y.parentNode)||ge(y))&&(y=ge(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&(p=s(h,v,!0),p&&(h=p.container,v=p.offset),p=s(y,b),p&&(y=p.container,b=p.offset)),g=o(y,b),g.node)){for(;g.node&&0===g.offset&&g.node.previousSibling;)g=o(g.node.previousSibling);g.node&&g.offset>0&&3===g.node.nodeType&&" "===g.node.nodeValue.charAt(g.offset-1)&&g.offset>1&&(y=g.node,y.splitText(g.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==h.nodeType&&0!==v||(h=i(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=i())),n[0].selector&&n[0].expand!==se&&!n[0].inline&&(h=u(h,"previousSibling"),y=u(y,"nextSibling")),(n[0].block||n[0].selector)&&(h=d(h,"previousSibling"),y=d(y,"nextSibling"),n[0].block&&(ne(h)||(h=i(!0)),ne(y)||(y=i()))),1==h.nodeType&&(v=ie(h),h=h.parentNode),1==y.nodeType&&(b=ie(y)+1,y=y.parentNode),{startContainer:h,startOffset:v,endContainer:y,endOffset:b}}function $(e,t){return t.links&&"A"==e.tagName}function j(e,t,n,r){var i,o,a;if(!B(n,e)&&!$(n,e))return se;if("all"!=e.remove)for(pe(e.styles,function(i,o){i=H(F(i,t),o),"number"==typeof o&&(o=i,r=0),(e.remove_similar||!r||P(O(r,o),i))&&Z.setStyle(n,o,""),a=1}),a&&""===Z.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),pe(e.attributes,function(e,i){var o;if(e=F(e,t),"number"==typeof i&&(i=e,r=0),!r||P(Z.getAttrib(r,i),e)){if("class"==i&&(e=Z.getAttrib(n,i),e&&(o="",pe(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}),o)))return void Z.setAttrib(n,i,o);"class"==i&&n.removeAttribute("className"),ae.test(i)&&n.removeAttribute("data-mce-"+i),n.removeAttribute(i)}}),pe(e.classes,function(e){e=F(e,t),r&&!Z.hasClass(r,e)||Z.removeClass(n,e)}),o=Z.getAttribs(n),i=0;i<o.length;i++){var s=o[i].nodeName;if(0!==s.indexOf("_")&&0!==s.indexOf("data-"))return se}return"none"!=e.remove?(V(n,e),le):void 0}function V(e,t){function n(e,t,n){return e=q(e,t,n),!e||"BR"==e.nodeName||ne(e)}var r=e.parentNode,i;t.block&&(re?r==Z.getRoot()&&(t.list_block&&P(e,t.list_block)||pe(he(e.childNodes),function(e){te(re,e.nodeName.toLowerCase())?i?i.appendChild(e):(i=U(e,re),Z.setAttribs(i,l.settings.forced_root_block_attrs)):i=0})):ne(e)&&!ne(r)&&(n(e,se)||n(e.firstChild,le,1)||e.insertBefore(Z.create("br"),e.firstChild),n(e,le)||n(e.lastChild,se,1)||e.appendChild(Z.create("br")))),t.selector&&t.inline&&!P(t.inline,e)||Z.remove(e,1)}function q(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!z(e))return e}function Y(e,t){function n(e,t){for(i=e;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return e;if(1==i.nodeType&&!ge(i))return i}return e}var i,o,a=new r(Z);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),a.compare(e,t))){for(i=e.nextSibling;i&&i!=t;)o=i,i=i.nextSibling,e.appendChild(o);return Z.remove(t),pe(he(t.childNodes),function(t){e.appendChild(t)}),e}return t}function K(t,n){var r,i,o;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1==r.nodeType&&(o=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>o?o:i]),3===r.nodeType&&n&&i>=r.nodeValue.length&&(r=new e(r,l.getBody()).next()||r),3!==r.nodeType||n||0!==i||(r=new e(r,l.getBody()).prev()||r),r}function X(t,n,r,i){function o(e){var t=Z.create("span",{id:p,"data-mce-bogus":!0,style:v?"color:red":""});return e&&t.appendChild(l.getDoc().createTextNode(oe)),t}function a(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==oe||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function s(e){for(;e;){if(e.id===p)return e;e=e.parentNode}}function u(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function d(e,t){var n,r;if(e)r=Q.getRng(!0),a(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),Z.remove(e)):(n=u(e),n.nodeValue.charAt(0)===oe&&(n.deleteData(0,1),r.startContainer==n&&r.startOffset>0&&r.setStart(n,r.startOffset-1),r.endContainer==n&&r.endOffset>0&&r.setEnd(n,r.endOffset-1)),Z.remove(e,1)),Q.setRng(r);else if(e=s(Q.getStart()),!e)for(;e=Z.get(p);)d(e,!1)}function f(){var e,t,i,a,l,c,d;e=Q.getRng(!0),a=e.startOffset,c=e.startContainer,d=c.nodeValue,t=s(Q.getStart()),t&&(i=u(t));var f=/[^\s\u00a0\u00ad\u200b\ufeff]/;d&&a>0&&a<d.length&&f.test(d.charAt(a))&&f.test(d.charAt(a-1))?(l=Q.getBookmark(),e.collapse(!0),e=W(e,h(n)),e=ee.split(e),C(n,r,e),Q.moveToBookmark(l)):(t&&i.nodeValue===oe?C(n,r,t):(t=o(!0),i=t.firstChild,e.insertNode(t),a=1,C(n,r,t)),Q.setCursorLocation(i,a))}function m(){var e=Q.getRng(!0),t,a,s,l,u,d,f=[],m,g;for(t=e.startContainer,a=e.startOffset,u=t,3==t.nodeType&&(a!=t.nodeValue.length&&(l=!0),u=u.parentNode);u;){if(S(u,n,r,i)){d=u;break}u.nextSibling&&(l=!0),f.push(u),u=u.parentNode}if(d)if(l)s=Q.getBookmark(),e.collapse(!0),e=W(e,h(n),!0),e=ee.split(e),k(n,r,e),Q.moveToBookmark(s);else{for(g=o(),u=g,m=f.length-1;m>=0;m--)u.appendChild(Z.clone(f[m],!1)),u=u.firstChild;u.appendChild(Z.doc.createTextNode(oe)),u=u.firstChild;var p=Z.getParent(d,c);p&&Z.isEmpty(p)?d.parentNode.replaceChild(g,d):Z.insertAfter(g,d),Q.setCursorLocation(u,1),Z.isEmpty(d)&&Z.remove(d)}}function g(){var e;e=s(Q.getStart()),e&&!Z.isEmpty(e)&&ve(e,function(e){1!=e.nodeType||e.id===p||Z.isEmpty(e)||Z.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var p="_mce_caret",v=l.settings.caret_debug;l._hasCaretEvents||(me=function(){var e=[],t;if(a(s(Q.getStart()),e))for(t=e.length;t--;)Z.setAttrib(e[t],"data-mce-bogus","1")},fe=function(e){var t=e.keyCode;d(),8==t&&Q.isCollapsed()&&Q.getStart().innerHTML==oe&&d(s(Q.getStart())),37!=t&&39!=t||d(s(Q.getStart())),g()},l.on("SetContent",function(e){e.selection&&g()}),l._hasCaretEvents=!0),"apply"==t?f():m()}function G(t){var n=t.startContainer,r=t.startOffset,i,o,a,s,l;if((t.startContainer!=t.endContainer||!d(t.startContainer.childNodes[t.startOffset]))&&(3==n.nodeType&&r>=n.nodeValue.length&&(r=ie(n),n=n.parentNode,i=!0),1==n.nodeType))for(s=n.childNodes,n=s[Math.min(r,s.length-1)],o=new e(n,Z.getParent(n,Z.isBlock)),(r>s.length-1||i)&&o.next(),a=o.current();a;a=o.next())if(3==a.nodeType&&!z(a))return l=Z.create("a",{"data-mce-bogus":"all"},oe),a.parentNode.insertBefore(l,a),t.setStart(a,0),Q.setRng(t),void Z.remove(l)}var J={},Z=l.dom,Q=l.selection,ee=new t(Z),te=l.schema.isValidChild,ne=Z.isBlock,re=l.settings.forced_root_block,ie=Z.nodeIndex,oe="\ufeff",ae=/^(src|href|style)$/,se=!1,le=!0,ce,ue,de=Z.getContentEditable,fe,me,ge=n.isBookmarkNode,pe=o.each,he=o.grep,ve=o.walk,ye=o.extend;ye(this,{get:h,register:v,unregister:y,apply:C,remove:k,toggle:N,match:_,matchAll:T,matchNode:S,canApply:E,formatChanged:R,getCssText:A}),g(),p(),l.on("BeforeGetContent",function(e){me&&"raw"!=e.format&&me()}),l.on("mouseup keydown",function(e){fe&&fe(e)})}}),r(Z,[],function(){var e=0,t=1,n=2,r=function(r,i){var o=r.length+i.length+2,a=new Array(o),s=new Array(o),l=function(e,t,n){return{start:e,end:t,diag:n}},c=function(o,a,s,l,u){var f=d(o,a,s,l);if(null===f||f.start===a&&f.diag===a-l||f.end===o&&f.diag===o-s)for(var m=o,g=s;a>m||l>g;)a>m&&l>g&&r[m]===i[g]?(u.push([e,r[m]]),++m,++g):a-o>l-s?(u.push([n,r[m]]),++m):(u.push([t,i[g]]),++g);else{c(o,f.start,s,f.start-f.diag,u);for(var p=f.start;p<f.end;++p)u.push([e,r[p]]);c(f.end,a,f.end-f.diag,l,u)}},u=function(e,t,n,o){for(var a=e;o>a-t&&n>a&&r[a]===i[a-t];)++a;return l(e,a,t)},d=function(e,t,n,o){var l=t-e,c=o-n;if(0===l||0===c)return null;var d=l-c,f=c+l,m=(f%2===0?f:f+1)/2;a[1+m]=e,s[1+m]=t+1;for(var g=0;m>=g;++g){for(var p=-g;g>=p;p+=2){var h=p+m;p===-g||p!=g&&a[h-1]<a[h+1]?a[h]=a[h+1]:a[h]=a[h-1]+1;for(var v=a[h],y=v-e+n-p;t>v&&o>y&&r[v]===i[y];)a[h]=++v,++y;if(d%2!=0&&p>=d-g&&d+g>=p&&s[h-d]<=a[h])return u(s[h-d],p+e-n,t,o)}for(p=d-g;d+g>=p;p+=2){for(h=p+m-d,p===d-g||p!=d+g&&s[h+1]<=s[h-1]?s[h]=s[h+1]-1:s[h]=s[h-1],v=s[h]-1,y=v-e+n-p;v>=e&&y>=n&&r[v]===i[y];)s[h]=v--,y--;if(d%2===0&&p>=-g&&g>=p&&s[h]<=a[h+d])return u(s[h],p+e-n,t,o)}}},f=[];return c(0,r.length,0,i.length,f),f};return{KEEP:e,DELETE:n,INSERT:t,diff:r}}),r(Q,[g,x,Z],function(e,t,n){var r=function(e){return 1===e.nodeType?e.outerHTML:3===e.nodeType?t.encodeRaw(e.data,!1):8===e.nodeType?"<!--"+e.data+"-->":""},i=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},o=function(e,t,n){var r=i(t);if(e.hasChildNodes()&&n<e.childNodes.length){var o=e.childNodes[n];o.parentNode.insertBefore(r,o)}else e.appendChild(r)},a=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},s=function(t,r){var i=0;e.each(t,function(e){e[0]===n.KEEP?i++:e[0]===n.INSERT?(o(r,e[1],i),i++):e[0]===n.DELETE&&a(r,i)})},l=function(t){return e.map(t.childNodes,r)},c=function(t,i){var o=e.map(i.childNodes,r);return s(n.diff(o,t),i),i};return{read:l,write:c}}),r(ee,[g,Q],function(e,t){var n=function(e){return-1!==e.indexOf("</iframe>")},r=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},i=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},o=function(o){var a,s,l;return a=t.read(o.getBody()),l=e.map(a,function(e){return o.serializer.trimContent(e)}),s=l.join(""),n(s)?r(l):i(s)},a=function(e,n,r){"fragmented"===n.type?t.write(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw"}),e.selection.moveToBookmark(r?n.beforeBookmark:n.bookmark)},s=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},l=function(e,t){return s(e)===s(t)};return{createFragmentedLevel:r,createCompleteLevel:i,createFromEditor:o,applyToEditor:a,isEq:l}}),r(te,[H,p,ee],function(e,t,n){return function(e){function r(t){e.setDirty(t)}function i(e){a.typing=!1,a.add({},e)}function o(){a.typing&&(a.typing=!1,a.add())}var a=this,s=0,l=[],c,u,d=0;return e.on("init",function(){a.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(o(),a.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&i(e)}),e.on("ObjectResizeStart Cut",function(){a.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("DragEnd",i),e.on("KeyUp",function(t){var o=t.keyCode;t.isDefaultPrevented()||((o>=33&&36>=o||o>=37&&40>=o||45===o||t.ctrlKey)&&(i(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),u&&a.typing&&(e.isDirty()||(r(l[0]&&!n.isEq(n.createFromEditor(e),l[0])),e.isDirty()&&e.fire("change",{level:l[0],lastLevel:null})),e.fire("TypingUndo"),u=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&36>=t||t>=37&&40>=t||45===t)return void(a.typing&&i(e));var n=e.ctrlKey&&!e.altKey||e.metaKey;!(16>t||t>20)||224===t||91===t||a.typing||n||(a.beforeChange(),a.typing=!0,a.add({},e),u=!0)}}),e.on("MouseDown",function(e){a.typing&&i(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),a={data:l,typing:!1,beforeChange:function(){d||(c=e.selection.getBookmark(2,!0))},add:function(i,o){var a,u=e.settings,f,m;if(m=n.createFromEditor(e),i=i||{},i=t.extend(i,m),d||e.removed)return null;if(f=l[s],e.fire("BeforeAddUndo",{level:i,lastLevel:f,originalEvent:o}).isDefaultPrevented())return null;if(f&&n.isEq(f,i))return null;if(l[s]&&(l[s].beforeBookmark=c),u.custom_undo_redo_levels&&l.length>u.custom_undo_redo_levels){for(a=0;a<l.length-1;a++)l[a]=l[a+1];l.length--,s=l.length}i.bookmark=e.selection.getBookmark(2,!0),s<l.length-1&&(l.length=s+1),l.push(i),s=l.length-1;var g={level:i,lastLevel:f,originalEvent:o};return e.fire("AddUndo",g),s>0&&(r(!0),e.fire("change",g)),i},undo:function(){var t;return a.typing&&(a.add(),a.typing=!1),s>0&&(t=l[--s],n.applyToEditor(e,t,!0),r(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return s<l.length-1&&(t=l[++s],n.applyToEditor(e,t,!1),r(!0),e.fire("redo",{level:t})),t},clear:function(){l=[],s=0,a.typing=!1,a.data=l,e.fire("ClearUndos")},hasUndo:function(){return s>0||a.typing&&l[0]&&!n.isEq(n.createFromEditor(e),l[0])},hasRedo:function(){return s<l.length-1&&!a.typing},transact:function(e){o(),a.beforeChange();try{d++,e()}finally{d--}return a.add()},extra:function(t,r){var i,o;a.transact(t)&&(o=l[s].bookmark,i=l[s-1],n.applyToEditor(e,i,!0),a.transact(r)&&(l[s-1].beforeBookmark=o))}}}}),r(ne,[y,E,T,d],function(e,t,n,r){var i=r.ie&&r.ie<11;return function(o){function a(a){function g(e){return e&&s.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==s.getContentEditable(e)}function p(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function h(e){var t;s.isBlock(e)&&(t=l.getRng(),e.appendChild(s.create("span",null,"")),l.select(e),e.lastChild.outerHTML="",l.setRng(t))}function v(e){var t=e,n=[],r;if(t){for(;t=t.firstChild;){if(s.isBlock(t))return;1!=t.nodeType||f[t.nodeName.toLowerCase()]||n.push(t)}for(r=n.length;r--;)t=n[r],!t.hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue?s.remove(t):"A"==t.nodeName&&" "===(t.innerText||t.textContent)&&s.remove(t)}}function y(t){function n(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var i,o,a,c=t,u;if(t){if(r.ie&&r.ie<9&&I&&I.firstChild&&I.firstChild==I.lastChild&&"BR"==I.firstChild.tagName&&s.remove(I.firstChild),/^(LI|DT|DD)$/.test(t.nodeName)){var d=n(t.firstChild);d&&/^(UL|OL|DL)$/.test(d.nodeName)&&t.insertBefore(s.doc.createTextNode(""),t.firstChild)}if(a=s.createRng(),r.ie||t.normalize(),t.hasChildNodes()){for(i=new e(t,t);o=i.current();){if(3==o.nodeType){a.setStart(o,0),a.setEnd(o,0);break}if(m[o.nodeName.toLowerCase()]){a.setStartBefore(o),a.setEndBefore(o);break}c=o,o=i.next()}o||(a.setStart(c,0),a.setEnd(c,0))}else"BR"==t.nodeName?t.nextSibling&&s.isBlock(t.nextSibling)?((!L||9>L)&&(u=s.create("br"),t.parentNode.insertBefore(u,t)),a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)):(a.setStart(t,0),a.setEnd(t,0));l.setRng(a),s.remove(u),l.scrollIntoView(t)}}function b(e){var t=c.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&s.setAttribs(e,c.forced_root_block_attrs)}function x(e){e.innerHTML=i?"":'<br data-mce-bogus="1">'}function w(e){var t=M,n,r,o,a=d.getTextInlineElements();if(e||"TABLE"==U?(n=s.create(e||$),b(n)):n=I.cloneNode(!1),o=n,c.keep_styles!==!1)do if(a[t.nodeName]){if("_mce_caret"==t.id)continue;r=t.cloneNode(!1),s.setAttrib(r,"id",""),n.hasChildNodes()?(r.appendChild(n.firstChild),n.appendChild(r)):(o=r,n.appendChild(r))}while((t=t.parentNode)&&t!=P);return i||(o.innerHTML='<br data-mce-bogus="1">'),n}function C(t){var n,r,i;if(3==M.nodeType&&(t?D>0:D<M.nodeValue.length))return!1;if(M.parentNode==I&&j&&!t)return!0;if(t&&1==M.nodeType&&M==I.firstChild)return!0;if("TABLE"===M.nodeName||M.previousSibling&&"TABLE"==M.previousSibling.nodeName)return j&&!t||!j&&t;for(n=new e(M,I),3==M.nodeType&&(t&&0===D?n.prev():t||D!=M.nodeValue.length||n.next());r=n.current();){if(1===r.nodeType){if(!r.getAttribute("data-mce-bogus")&&(i=r.nodeName.toLowerCase(),f[i]&&"br"!==i))return!1}else if(3===r.nodeType&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?n.prev():n.next()}return!0}function k(e,t){var n,r,i,a,l,c,u=$||"P";if(r=s.getParent(e,s.isBlock),!r||!g(r)){if(r=r||P,c=r==o.getBody()||p(r)?r.nodeName.toLowerCase():r.parentNode.nodeName.toLowerCase(),!r.hasChildNodes())return n=s.create(u),b(n),r.appendChild(n),A.setStart(n,0),A.setEnd(n,0),n;for(a=e;a.parentNode!=r;)a=a.parentNode;for(;a&&!s.isBlock(a);)i=a,a=a.previousSibling;if(i&&d.isValidChild(c,u.toLowerCase())){for(n=s.create(u),b(n),i.parentNode.insertBefore(n,i),a=i;a&&!s.isBlock(a);)l=a.nextSibling,n.appendChild(a),a=l;A.setStart(e,t),A.setEnd(e,t)}}return e}function N(){function e(e){for(var t=z[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===I}function t(){var e=z.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:z}if(z!=o.getBody()){var n=z.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&($="LI"),H=$?w($):s.create("BR"),e(!0)&&e()?"LI"==n?s.insertAfter(H,t()):s.replace(H,z):e(!0)?"LI"==n?(s.insertAfter(H,t()),H.appendChild(s.doc.createTextNode(" ")),H.appendChild(z)):z.parentNode.insertBefore(H,z):e()?(s.insertAfter(H,t()),h(H)):(z=t(),B=A.cloneRange(),B.setStartAfter(I),B.setEndAfter(z),F=B.extractContents(),"LI"==$&&"LI"==F.firstChild.nodeName?(H=F.firstChild,s.insertAfter(F,z)):(s.insertAfter(F,z),s.insertAfter(H,z))),s.remove(I),y(H),u.add()}}function S(){o.execCommand("InsertLineBreak",!1,a)}function _(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function T(e){var t=s.getRoot(),n,r;for(n=e;n!==t&&"false"!==s.getContentEditable(n);)"true"===s.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==t?r:t}function E(e){var t;i||(e.normalize(),t=e.lastChild,t&&!/^(left|right)$/gi.test(s.getStyle(t,"float",!0))||s.add(e,"br"))}function R(){H=/^(H[1-6]|PRE|FIGURE)$/.test(U)&&"HGROUP"!=W?w($):w(),c.end_container_on_empty_block&&g(z)&&s.isEmpty(I)?H=s.split(z,I):s.insertAfter(H,I),y(H)}var A,B,P,M,D,I,L,O,H,F,z,U,W,$,j;if(A=l.getRng(!0),!a.isDefaultPrevented()){if(!A.collapsed)return void o.execCommand("Delete");if(new t(s).normalize(A),M=A.startContainer,D=A.startOffset,$=(c.force_p_newlines?"p":"")||c.forced_root_block,$=$?$.toUpperCase():"",L=s.doc.documentMode,O=a.shiftKey,1==M.nodeType&&M.hasChildNodes()&&(j=D>M.childNodes.length-1,M=M.childNodes[Math.min(D,M.childNodes.length-1)]||M,D=j&&3==M.nodeType?M.nodeValue.length:0),P=T(M)){if(u.beforeChange(),!s.isBlock(P)&&P!=s.getRoot())return void($&&!O||S());if(($&&!O||!$&&O)&&(M=k(M,D)),I=s.getParent(M,s.isBlock),z=I?s.getParent(I.parentNode,s.isBlock):null,U=I?I.nodeName.toUpperCase():"",W=z?z.nodeName.toUpperCase():"","LI"!=W||a.ctrlKey||(I=z,U=W),o.undoManager.typing&&(o.undoManager.typing=!1,o.undoManager.add()),/^(LI|DT|DD)$/.test(U)){if(!$&&O)return void S();if(s.isEmpty(I))return void N()}if("PRE"==U&&c.br_in_pre!==!1){if(!O)return void S()}else if(!$&&!O&&"LI"!=U||$&&O)return void S();$&&I===o.getBody()||($=$||"P",n.isCaretContainerBlock(I)?(H=n.showCaretContainerBlock(I),s.isEmpty(I)&&x(I),y(H)):C()?R():C(!0)?(H=I.parentNode.insertBefore(w(),I),h(H),y(I)):(B=A.cloneRange(),B.setEndAfter(I),F=B.extractContents(),_(F),H=F.firstChild,s.insertAfter(F,I),v(H),E(I),s.isEmpty(I)&&x(I),H.normalize(),s.isEmpty(H)?(s.remove(H),R()):y(H)),s.setAttrib(H,"id",""),o.fire("NewBlock",{newBlock:H}),u.typing=!1,u.add())}}}var s=o.dom,l=o.selection,c=o.settings,u=o.undoManager,d=o.schema,f=d.getNonEmptyElements(),m=d.getMoveCaretBeforeOnEnterElements();o.on("keydown",function(e){13==e.keyCode&&a(e)!==!1&&e.preventDefault()})}}),r(re,[],function(){return function(e){function t(){var t=i.getStart(),s=e.getBody(),l,c,u,d,f,m,g,p=-16777215,h,v,y,b,x;if(x=n.forced_root_block,t&&1===t.nodeType&&x){for(;t&&t!=s;){if(a[t.nodeName])return;t=t.parentNode}if(l=i.getRng(),l.setStart){c=l.startContainer,u=l.startOffset,d=l.endContainer,f=l.endOffset;try{v=e.getDoc().activeElement===s}catch(w){}}else l.item&&(t=l.item(0),l=e.getDoc().body.createTextRange(),l.moveToElementText(t)),v=l.parentElement().ownerDocument===e.getDoc(),y=l.duplicate(),y.collapse(!0),u=-1*y.move("character",p),y.collapsed||(y=l.duplicate(),y.collapse(!1),f=-1*y.move("character",p)-u);for(t=s.firstChild,b=s.nodeName.toLowerCase();t;)if((3===t.nodeType||1==t.nodeType&&!a[t.nodeName])&&o.isValidChild(b,x.toLowerCase())){if(3===t.nodeType&&0===t.nodeValue.length){g=t,t=t.nextSibling,r.remove(g);continue}m||(m=r.create(x,e.settings.forced_root_block_attrs),t.parentNode.insertBefore(m,t),h=!0),g=t,t=t.nextSibling,m.appendChild(g)}else m=null,t=t.nextSibling;if(h&&v){if(l.setStart)l.setStart(c,u),l.setEnd(d,f),i.setRng(l);else try{l=e.getDoc().body.createTextRange(),l.moveToElementText(s),l.collapse(!0),l.moveStart("character",u),f>0&&l.moveEnd("character",f),l.select()}catch(w){}e.nodeChanged()}}}var n=e.settings,r=e.dom,i=e.selection,o=e.schema,a=o.getBlockElements();n.forced_root_block&&e.on("NodeChange",t)}}),r(ie,[z,y,S,j,T,U],function(e,t,n,r,i,o){function a(e){return e>0}function s(e){return 0>e}function l(e,t){for(var n;n=e(t);)if(!N(n))return n;return null}function c(e,n,r,i,o){var c=new t(e,i);if(s(n)){if((w(e)||N(e))&&(e=l(c.prev,!0),r(e)))return e;for(;e=l(c.prev,o);)if(r(e))return e}if(a(n)){if((w(e)||N(e))&&(e=l(c.next,!0),r(e)))return e;for(;e=l(c.next,o);)if(r(e))return e}return null}function u(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(x(e))return e;return t}function d(e,t){for(;e&&e!=t;){if(C(e))return e;e=e.parentNode}return null}function f(e,t,n){return d(e.container(),n)==d(t.container(),n)}function m(e,t,n){return u(e.container(),n)==u(t.container(),n)}function g(e,t){var n,r;return t?(n=t.container(),r=t.offset(),_(n)?n.childNodes[r+e]:null):null}function p(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n}function h(e,t,n){return d(t,e)==d(n,e)}function v(e,t,n){var r,i;for(i=e?"previousSibling":"nextSibling";n&&n!=t;){if(r=n[i],k(r)&&(r=r[i]),w(r)){if(h(t,r,n))return r;break}if(T(r))break;n=n.parentNode}return null}function y(e,t,r){var o,a,s,l,c=S(v,!0,t),u=S(v,!1,t);if(a=r.startContainer,s=r.startOffset,i.isCaretContainerBlock(a)){if(_(a)||(a=a.parentNode),l=a.getAttribute("data-mce-caret"),"before"==l&&(o=a.nextSibling,w(o)))return E(o);if("after"==l&&(o=a.previousSibling,w(o)))return R(o)}if(!r.collapsed)return r;if(n.isText(a)){
if(k(a)){if(1===e){if(o=u(a))return E(o);if(o=c(a))return R(o)}if(-1===e){if(o=c(a))return R(o);if(o=u(a))return E(o)}return r}if(i.endsWithCaretContainer(a)&&s>=a.data.length-1)return 1===e&&(o=u(a))?E(o):r;if(i.startsWithCaretContainer(a)&&1>=s)return-1===e&&(o=c(a))?R(o):r;if(s===a.data.length)return o=u(a),o?E(o):r;if(0===s)return o=c(a),o?R(o):r}return r}function b(e,t){return w(g(e,t))}var x=n.isContentEditableTrue,w=n.isContentEditableFalse,C=n.matchStyleValues("display","block table table-cell table-caption"),k=i.isCaretContainer,N=i.isCaretContainerBlock,S=e.curry,_=n.isElement,T=o.isCaretCandidate,E=S(p,!0),R=S(p,!1);return{isForwards:a,isBackwards:s,findNode:c,getEditingHost:u,getParentBlock:d,isInSameBlock:f,isInSameEditingHost:m,isBeforeContentEditableFalse:S(b,0),isAfterContentEditableFalse:S(b,-1),normalizeRange:y}}),r(oe,[S,U,j,ie,g,z],function(e,t,n,r,i,o){function a(e,t){for(var n=[];e&&e!=t;)n.push(e),e=e.parentNode;return n}function s(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null}function l(e,t){if(p(e)){if(v(t.previousSibling)&&!f(t.previousSibling))return n.before(t);if(f(t))return n(t,0)}if(h(e)){if(v(t.nextSibling)&&!f(t.nextSibling))return n.after(t);if(f(t))return n(t,t.data.length)}return h(e)?g(t)?n.before(t):n.after(t):n.before(t)}function c(t,i){var o;return!!e.isBr(t)&&(o=u(1,n.after(t),i),!!o&&!r.isInSameBlock(n.before(t),n.before(o),i))}function u(e,t,g){var x,w,C,k,N,S,_;if(!m(g)||!t)return null;if(_=t,x=_.container(),w=_.offset(),f(x)){if(h(e)&&w>0)return n(x,--w);if(p(e)&&w<x.length)return n(x,++w);C=x}else{if(h(e)&&w>0&&(k=s(x,w-1),v(k)))return!y(k)&&(N=r.findNode(k,e,b,k))?f(N)?n(N,N.data.length):n.after(N):f(k)?n(k,k.data.length):n.before(k);if(p(e)&&w<x.childNodes.length&&(k=s(x,w),v(k)))return c(k,g)?u(e,n.after(k),g):!y(k)&&(N=r.findNode(k,e,b,k))?f(N)?n(N,0):n.before(N):f(k)?n(k,0):n.after(k);C=_.getNode()}return(p(e)&&_.isAtEnd()||h(e)&&_.isAtStart())&&(C=r.findNode(C,e,o.constant(!0),g,!0),b(C))?l(e,C):(k=r.findNode(C,e,b,g),S=i.last(i.filter(a(x,g),d)),!S||k&&S.contains(k)?k?l(e,k):null:_=p(e)?n.after(S):n.before(S))}var d=e.isContentEditableFalse,f=e.isText,m=e.isElement,g=e.isBr,p=r.isForwards,h=r.isBackwards,v=t.isCaretCandidate,y=t.isAtomic,b=t.isEditableCaretCandidate;return function(e){return{next:function(t){return u(1,t,e)},prev:function(t){return u(-1,t,e)}}}}),r(ae,[p,oe,j],function(e,t,n){var r=function(e){var t=e.firstChild,n=e.lastChild;return t&&"meta"===t.name&&(t=t.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),!(!t||t!==n||"ul"!==t.name&&"ol"!==t.name)},i=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},o=function(e,t,n){var r=t.serialize(n),o=e.createFragment(r);return i(o)},a=function(t){return e.grep(t.childNodes,function(e){return"LI"===e.nodeName})},s=function(e){return!e.firstChild},l=function(e){return e.length>0&&s(e[e.length-1])?e.slice(0,-1):e},c=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},u=function(e,t){return!!c(e,t)},d=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},f=function(e,r){var i=n.before(e),o=new t(r),a=o.next(i);return a?a.toRange():null},m=function(e,r){var i=n.after(e),o=new t(r),a=o.prev(i);return a?a.toRange():null},g=function(t,n,r,i){var o=d(t,i),a=t.parentNode;return a.insertBefore(o[0],t),e.each(n,function(e){a.insertBefore(e,t)}),a.insertBefore(o[1],t),a.removeChild(t),m(n[n.length-1],r)},p=function(t,n,r){var i=t.parentNode;return e.each(n,function(e){i.insertBefore(e,t)}),f(t,r)},h=function(e,t,n,r){return r.insertAfter(t.reverse(),e),m(t[0],n)},v=function(e,r,i,s){var u=o(r,e,s),d=c(r,i.startContainer),f=l(a(u.firstChild)),m=1,v=2,y=r.getRoot(),b=function(e){var o=n.fromRangeStart(i),a=new t(r.getRoot()),s=e===m?a.prev(o):a.next(o);return!s||c(r,s.getNode())!==d};return b(m)?p(d,f,y):b(v)?h(d,f,y,r):g(d,f,y,i)};return{isListFragment:r,insertAtCaret:v,isParentBlockLi:u,trimListItems:l,listItems:a}}),r(se,[d,p,I,oe,j,K,S,ae],function(e,t,n,r,i,o,a,s){var l=a.matchNodeNames("td th"),c=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,i=n.lastChild;!r||r===i&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},u=function(a,u,d){function f(e){function t(e){return r[e]&&3==r[e].nodeType}var n,r,i;return n=M.getRng(!0),r=n.startContainer,i=n.startOffset,3==r.nodeType&&(i>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),i<r.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function m(){var e,t,n;e=M.getRng(!0),t=e.startContainer,n=e.startOffset,3==t.nodeType&&e.collapsed&&(""===t.data[n]?(t.deleteData(n,1),/[\u00a0| ]$/.test(u)||(u+=" ")):""===t.data[n-1]&&(t.deleteData(n-1,1),/[\u00a0| ]$/.test(u)||(u=" "+u)))}function g(){if(B){var e=a.getBody(),n=new o(D);t.each(D.select("*[data-mce-fragment]"),function(t){for(var r=t.parentNode;r&&r!=e;r=r.parentNode)P[t.nodeName.toLowerCase()]&&n.compare(r,t)&&D.remove(t,!0)})}}function p(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}function h(e){t.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})}function v(e){return!!e.getAttribute("data-mce-fragment")}function y(e){return e&&!a.schema.getShortEndedElements()[e.nodeName]}function b(t){function n(e){for(var t=a.getBody();e&&e!==t;e=e.parentNode)if("false"===a.dom.getContentEditable(e))return e;return null}function o(e){var t=i.fromRangeStart(e),n=new r(a.getBody());return(t=n.next(t))?t.toRange():void 0}var s,c,u;if(t){if(M.scrollIntoView(t),s=n(t))return D.remove(t),void M.select(s);T=D.createRng(),E=t.previousSibling,E&&3==E.nodeType?(T.setStart(E,E.nodeValue.length),e.ie||(R=t.nextSibling,R&&3==R.nodeType&&(E.appendData(R.data),R.parentNode.removeChild(R)))):(T.setStartBefore(t),T.setEndBefore(t)),c=D.getParent(t,D.isBlock),D.remove(t),c&&D.isEmpty(c)&&(a.$(c).empty(),T.setStart(c,0),T.setEnd(c,0),l(c)||v(c)||!(u=o(T))?D.add(c,D.create("br",{"data-mce-bogus":"1"})):(T=u,D.remove(c))),M.setRng(T)}}var x,w,C,k,N,S,_,T,E,R,A,B,P=a.schema.getTextInlineElements(),M=a.selection,D=a.dom;/^ | $/.test(u)&&(u=f(u)),x=a.parser,B=d.merge,w=new n({validate:a.settings.validate},a.schema),A='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',S={content:u,format:"html",selection:!0},a.fire("BeforeSetContent",S),u=S.content,-1==u.indexOf("{$caret}")&&(u+="{$caret}"),u=u.replace(/\{\$caret\}/,A),T=M.getRng();var I=T.startContainer||(T.parentElement?T.parentElement():null),L=a.getBody();I===L&&M.isCollapsed()&&D.isBlock(L.firstChild)&&y(L.firstChild)&&D.isEmpty(L.firstChild)&&(T=D.createRng(),T.setStart(L.firstChild,0),T.setEnd(L.firstChild,0),M.setRng(T)),M.isCollapsed()||(a.selection.setRng(a.selection.getRng()),a.getDoc().execCommand("Delete",!1,null),m()),C=M.getNode();var O={context:C.nodeName.toLowerCase(),data:d.data};if(N=x.parse(u,O),d.paste===!0&&s.isListFragment(N)&&s.isParentBlockLi(D,C))return T=s.insertAtCaret(w,D,a.selection.getRng(!0),N),a.selection.setRng(T),void a.fire("SetContent",S);if(p(N),E=N.lastChild,"mce_marker"==E.attr("id"))for(_=E,E=E.prev;E;E=E.walk(!0))if(3==E.type||!D.isBlock(E.name)){a.schema.isValidChild(E.parent.name,"span")&&E.parent.insert(_,E,"br"===E.name);break}if(a._selectionOverrides.showBlockCaretContainer(C),O.invalid){for(M.setContent(A),C=M.getNode(),k=a.getBody(),9==C.nodeType?C=E=k:E=C;E!==k;)C=E,E=E.parentNode;u=C==k?k.innerHTML:D.getOuterHTML(C),u=w.serialize(x.parse(u.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return w.serialize(N)}))),C==k?D.setHTML(k,u):D.setOuterHTML(C,u)}else u=w.serialize(N),c(a,u,C);g(),b(D.get("mce_marker")),h(a.getBody()),a.fire("SetContent",S),a.addVisual()},d=function(e){var n;return"string"!=typeof e?(n=t.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:n}):{content:e,details:{}}},f=function(e,t){var n=d(t);u(e,n.content,n.details)};return{insertAtCaret:f}}),r(le,[d,p,E,y,se,S],function(e,n,r,i,o,a){var s=n.each,l=n.extend,c=n.map,u=n.inArray,d=n.explode,f=e.ie&&e.ie<11,m=!0,g=!1;return function(n){function p(e,t,r,i){var o,a,l=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||i&&i.skip_focus||n.focus(),i=n.fire("BeforeExecCommand",{command:e,ui:t,value:r}),i.isDefaultPrevented())return!1;if(a=e.toLowerCase(),o=P.exec[a])return o(a,t,r),n.fire("ExecCommand",{command:e,ui:t,value:r}),!0;if(s(n.plugins,function(i){return i.execCommand&&i.execCommand(e,t,r)?(n.fire("ExecCommand",{command:e,ui:t,value:r}),l=!0,!1):void 0}),l)return l;if(n.theme&&n.theme.execCommand&&n.theme.execCommand(e,t,r))return n.fire("ExecCommand",{command:e,ui:t,value:r}),!0;try{l=n.getDoc().execCommand(e,t,r)}catch(c){}return!!l&&(n.fire("ExecCommand",{command:e,ui:t,value:r}),!0)}function h(e){var t;if(!n.quirks.isHidden()){if(e=e.toLowerCase(),t=P.state[e])return t(e);try{return n.getDoc().queryCommandState(e)}catch(r){}return!1}}function v(e){var t;if(!n.quirks.isHidden()){if(e=e.toLowerCase(),t=P.value[e])return t(e);try{return n.getDoc().queryCommandValue(e)}catch(r){}}}function y(e,t){t=t||"exec",s(e,function(e,n){s(n.toLowerCase().split(","),function(n){P[t][n]=e})})}function b(e,t,r){e=e.toLowerCase(),P.exec[e]=function(e,i,o,a){return t.call(r||n,i,o,a)}}function x(e){if(e=e.toLowerCase(),P.exec[e])return!0;try{return n.getDoc().queryCommandSupported(e)}catch(t){}return!1}function w(e,t,r){e=e.toLowerCase(),P.state[e]=function(){return t.call(r||n)}}function C(e,t,r){e=e.toLowerCase(),P.value[e]=function(){return t.call(r||n)}}function k(e){return e=e.toLowerCase(),!!P.exec[e]}function N(e,r,i){return r===t&&(r=g),i===t&&(i=null),n.getDoc().execCommand(e,r,i)}function S(e){return B.match(e)}function _(e,r){B.toggle(e,r?{value:r}:t),n.nodeChanged()}function T(e){D=A.getBookmark(e)}function E(){A.moveToBookmark(D)}var R,A,B,P={state:{},exec:{},value:{}},M=n.settings,D;n.on("PreInit",function(){R=n.dom,A=n.selection,M=n.settings,B=n.formatter}),l(this,{execCommand:p,queryCommandState:h,queryCommandValue:v,queryCommandSupported:x,addCommands:y,addCommand:b,addQueryStateHandler:w,addQueryValueHandler:C,hasCustomCommand:k}),y({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(t){var r=n.getDoc(),i;try{N(t)}catch(o){i=m}if("paste"!==t||r.queryCommandEnabled(t)||(i=!0),i||!r.queryCommandSupported(t)){var a=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");e.mac&&(a=a.replace(/Ctrl\+/g,"+")),n.notificationManager.open({text:a,type:"error"})}},unlink:function(){if(A.isCollapsed()){var e=n.dom.getParent(n.selection.getStart(),"a");return void(e&&n.dom.remove(e,!0))}B.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"==t&&(t="justify"),s("left,center,right,justify".split(","),function(e){t!=e&&B.remove("align"+e)}),"none"!=t&&_("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;N(e),t=R.getParent(A.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(T(),R.split(n,t),E()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){_(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){_(e,n)},FontSize:function(e,t,n){var r,i;n>=1&&7>=n&&(i=d(M.font_size_style_values),r=d(M.font_size_classes),n=r?r[n-1]||n:i[n-1]||n),_(e,n)},RemoveFormat:function(e){B.remove(e)},mceBlockQuote:function(){_("blockquote")},FormatBlock:function(e,t,n){return _(n||"p")},mceCleanup:function(){var e=A.getBookmark();n.setContent(n.getContent({cleanup:m}),{cleanup:m}),A.moveToBookmark(e)},mceRemoveNode:function(e,t,r){var i=r||A.getNode();i!=n.getBody()&&(T(),n.dom.remove(i,m),E())},mceSelectNodeDepth:function(e,t,r){var i=0;R.getParent(A.getNode(),function(e){return 1==e.nodeType&&i++==r?(A.select(e),g):void 0},n.getBody())},mceSelectNode:function(e,t,n){A.select(n)},mceInsertContent:function(e,t,r){o.insertAtCaret(n,r)},mceInsertRawHTML:function(e,t,r){A.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return r}))},mceToggleFormat:function(e,t,n){_(n)},mceSetContent:function(e,t,r){n.setContent(r)},"Indent,Outdent":function(e){var t,r,i;t=M.indentation,r=/[a-z%]+$/i.exec(t),t=parseInt(t,10),h("InsertUnorderedList")||h("InsertOrderedList")?N(e):(M.forced_root_block||R.getParent(A.getNode(),R.isBlock)||B.apply("div"),s(A.getSelectedBlocks(),function(o){if("false"!==R.getContentEditable(o)&&"LI"!==o.nodeName){var a=n.getParam("indent_use_margin",!1)?"margin":"padding";a="TABLE"===o.nodeName?"margin":a,a+="rtl"==R.getStyle(o,"direction",!0)?"Right":"Left","outdent"==e?(i=Math.max(0,parseInt(o.style[a]||0,10)-t),R.setStyle(o,a,i?i+r:"")):(i=parseInt(o.style[a]||0,10)+t+r,R.setStyle(o,a,i))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(e,t,r){n.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,A.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=R.getParent(A.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||B.remove("link"),n.href&&B.apply("link",n,r)},selectAll:function(){var e=R.getRoot(),t;if(A.getRng().setStart){var n=R.getParent(A.getStart(),a.isContentEditableTrue);n&&(t=R.createRng(),t.selectNodeContents(n),A.setRng(t))}else t=A.getRng(),t.item||(t.moveToElementText(e),t.select())},"delete":function(){N("Delete");var e=n.getBody();R.isEmpty(e)&&(n.setContent(""),e.firstChild&&R.isBlock(e.firstChild)?n.selection.setCursorLocation(e.firstChild,0):n.selection.setCursorLocation(e,0))},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(e,t,o){function a(){for(var e=new i(p,v),t,r=n.schema.getNonEmptyElements();t=e.next();)if(r[t.nodeName.toLowerCase()]||t.length>0)return!0}var s=o,l,c,u,d=A.getRng(!0);new r(R).normalize(d);var g=d.startOffset,p=d.startContainer;if(1==p.nodeType&&p.hasChildNodes()){var h=g>p.childNodes.length-1;p=p.childNodes[Math.min(g,p.childNodes.length-1)]||p,g=h&&3==p.nodeType?p.nodeValue.length:0}var v=R.getParent(p,R.isBlock),y=v?v.nodeName.toUpperCase():"",b=v?R.getParent(v.parentNode,R.isBlock):null,x=b?b.nodeName.toUpperCase():"",w=s&&s.ctrlKey;"LI"!=x||w||(v=b,y=x),p&&3==p.nodeType&&g>=p.nodeValue.length&&(f||a()||(l=R.create("br"),d.insertNode(l),d.setStartAfter(l),d.setEndAfter(l),c=!0)),l=R.create("br"),d.insertNode(l);var C=R.doc.documentMode;return f&&"PRE"==y&&(!C||8>C)&&l.parentNode.insertBefore(R.doc.createTextNode("\r"),l),u=R.create("span",{},"&nbsp;"),l.parentNode.insertBefore(u,l),A.scrollIntoView(u),R.remove(u),c?(d.setStartBefore(l),d.setEndBefore(l)):(d.setStartAfter(l),d.setEndAfter(l)),A.setRng(d),n.undoManager.add(),m}}),y({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=A.isCollapsed()?[R.getParent(A.getNode(),R.isBlock)]:A.getSelectedBlocks(),r=c(n,function(e){return!!B.matchNode(e,t)});return-1!==u(r,m)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return S(e)},mceBlockQuote:function(){return S("blockquote")},Outdent:function(){var e;if(M.inline_styles){if((e=R.getParent(A.getStart(),R.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m;if((e=R.getParent(A.getEnd(),R.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m}return h("InsertUnorderedList")||h("InsertOrderedList")||!M.inline_styles&&!!R.getParent(A.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=R.getParent(A.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),y({"FontSize,FontName":function(e){var t=0,n;return(n=R.getParent(A.getNode(),"span"))&&(t="fontsize"==e?n.style.fontSize:n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),t}},"value"),y({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}),r(ce,[p],function(e){function t(e,o){var a=this,s,l;if(e=r(e),o=a.settings=o||{},s=o.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(a.source=e);var c=0===e.indexOf("//");0!==e.indexOf("/")||c||(e=(s?s.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(l=o.base_uri?o.base_uri.path:new t(location.href).directory,""===o.base_uri.protocol?e="//mce_host"+a.toAbsPath(l,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(s&&s.protocol||"http")+"://mce_host"+a.toAbsPath(l,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(i,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),a[t]=r}),s&&(a.protocol||(a.protocol=s.protocol),a.userInfo||(a.userInfo=s.userInfo),a.port||"mce_host"!==a.host||(a.port=s.port),a.host&&"mce_host"!==a.host||(a.host=s.host),a.source=""),c&&(a.protocol="")}var n=e.each,r=e.trim,i="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),o={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n=this,r;if("./"===e)return e;if(e=new t(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var i=n.getURI(),o=e.getURI();return i==o||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==o?i:(r=n.toRelPath(n.path,e.path),e.query&&(r+="?"+e.query),e.anchor&&(r+="#"+e.anchor),r)},toAbsolute:function(e,n){return e=new t(e,{base_uri:this}),e.getURI(n&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=o[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r=0,i="",o,a;if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(o=0,a=e.length;a>o;o++)if(o>=n.length||e[o]!=n[o]){r=o+1;break}if(e.length<n.length)for(o=0,a=n.length;a>o;o++)if(o>=e.length||e[o]!=n[o]){r=o+1;break}if(1===r)return t;for(o=0,a=e.length-(r-1);a>o;o++)i+="../";for(o=r-1,a=n.length;a>o;o++)i+=o!=r-1?"/"+n[o]:n[o];return i},toAbsPath:function(e,t){var r,i=0,o=[],a,s;for(a=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&o.push(e)}),e=o,r=t.length-1,o=[];r>=0;r--)0!==t[r].length&&"."!==t[r]&&(".."!==t[r]?i>0?i--:o.push(t[r]):i++);return r=e.length-i,s=0>=r?o.reverse().join("/"):e.slice(0,r).join("/")+"/"+o.reverse().join("/"),0!==s.indexOf("/")&&(s="/"+s),a&&s.lastIndexOf("/")!==s.length-1&&(s+=a),s},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},t.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},t}),r(ue,[p],function(e){function t(){}var n=e.each,r=e.extend,i,o;return t.extend=i=function(e){function t(){var e,t,n,r=this;if(!o&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)}function a(){return this}function s(e,t){return function(){var n=this,r=n._super,i;return n._super=c[e],i=t.apply(n,arguments),n._super=r,i}}var l=this,c=l.prototype,u,d,f;o=!0,u=new l,o=!1,e.Mixins&&(n(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),c.Mixins&&(e.Mixins=c.Mixins.concat(e.Mixins))),e.Methods&&n(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&n(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this,r;return e!==r?(t[n]=e,t):t[n]}}),e.Statics&&n(e.Statics,function(e,n){t[n]=e}),e.Defaults&&c.Defaults&&(e.Defaults=r({},c.Defaults,e.Defaults));for(d in e)f=e[d],"function"==typeof f&&c[d]?u[d]=s(d,f):u[d]=f;return t.prototype=u,t.constructor=t,t.extend=i,t},t}),r(de,[p],function(e){function t(t){function n(){return!1}function r(){return!0}function i(e,i){var o,s,l,c;if(e=e.toLowerCase(),i=i||{},i.type=e,i.target||(i.target=u),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=r},i.stopPropagation=function(){i.isPropagationStopped=r},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=r},i.isDefaultPrevented=n,i.isPropagationStopped=n,i.isImmediatePropagationStopped=n),t.beforeFire&&t.beforeFire(i),o=d[e])for(s=0,l=o.length;l>s;s++){if(c=o[s],c.once&&a(e,c.func),i.isImmediatePropagationStopped())return i.stopPropagation(),i;if(c.func.call(u,i)===!1)return i.preventDefault(),i}return i}function o(t,r,i,o){var a,s,l;if(r===!1&&(r=n),r)for(r={func:r},o&&e.extend(r,o),s=t.toLowerCase().split(" "),l=s.length;l--;)t=s[l],a=d[t],a||(a=d[t]=[],f(t,!0)),i?a.unshift(r):a.push(r);return c}function a(e,t){var n,r,i,o,a;if(e)for(o=e.toLowerCase().split(" "),n=o.length;n--;){if(e=o[n],r=d[e],!e){for(i in d)f(i,!1),delete d[i];return c}if(r){if(t)for(a=r.length;a--;)r[a].func===t&&(r=r.slice(0,a).concat(r.slice(a+1)),d[e]=r);else r.length=0;r.length||(f(e,!1),delete d[e])}}else{for(e in d)f(e,!1);d={}}return c}function s(e,t,n){return o(e,t,n,{once:!0})}function l(e){return e=e.toLowerCase(),!(!d[e]||0===d[e].length)}var c=this,u,d={},f;t=t||{},u=t.scope||c,f=t.toggleEvent||n,c.fire=i,c.on=o,c.off=a,c.once=s,c.has=l}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),r(fe,[],function(){function e(e){this.create=e.create}return e.create=function(t,n){return new e({create:function(e,r){function i(t){e.set(r,t.value)}function o(e){t.set(n,e.value)}var a;return e.on("change:"+r,o),t.on("change:"+n,i),a=e._bindings,a||(a=e._bindings=[],e.on("destroy",function(){for(var e=a.length;e--;)a[e]()})),a.push(function(){t.off("change:"+n,i)}),t.get(n)}})},e}),r(me,[de],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,r){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,r)}})),t._eventDispatcher}return{fire:function(e,n,r){var i=this;if(i.removed&&"remove"!==e)return n;if(n=t(i).fire(e,n,r),r!==!1&&i.parent)for(var o=i.parent();o&&!n.isPropagationStopped();)o.fire(e,n,!1),o=o.parent();return n},on:function(e,n,r){return t(this).on(e,n,r)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),r(ge,[fe,me,ue,p],function(e,t,n,r){function i(e){return e.nodeType>0}function o(e,t){var n,a;if(e===t)return!0;if(null===e||null===t)return e===t;if("object"!=typeof e||"object"!=typeof t)return e===t;if(r.isArray(t)){if(e.length!==t.length)return!1;for(n=e.length;n--;)if(!o(e[n],t[n]))return!1}if(i(e)||i(t))return e===t;a={};for(n in t){if(!o(e[n],t[n]))return!1;a[n]=!0}for(n in e)if(!a[n]&&!o(e[n],t[n]))return!1;return!0}return n.extend({Mixins:[t],init:function(t){var n,r;t=t||{};for(n in t)r=t[n],r instanceof e&&(t[n]=r.create(this,n));this.data=t},set:function(t,n){var r,i,a=this.data[t];if(n instanceof e&&(n=n.create(this,t)),"object"==typeof t){for(r in t)this.set(r,t[r]);return this}return o(a,n)||(this.data[t]=n,i={target:this,name:t,value:n,oldValue:a},this.fire("change:"+t,i),this.fire("change",i)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(t){return e.create(this,t)},destroy:function(){this.fire("destroy")}})}),r(pe,[ue],function(e){function t(e){for(var t=[],n=e.length,r;n--;)r=e[n],r.__checked||(t.push(r),r.__checked=1);for(n=t.length;n--;)delete t[n].__checked;return t}var n=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i=/^\s*|\s*$/g,o,a=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function o(e){return e?function(t){return t._name===e}:void 0}function a(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}):void 0}function s(e,t,n){return e?function(r){var i=r[e]?r[e]():"";return t?"="===t?i===n:"*="===t?i.indexOf(n)>=0:"~="===t?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===t?i!=n:"^="===t?0===i.indexOf(n):"$="===t&&i.substr(i.length-n.length)===n:!!n}:void 0}function l(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=u(e[1],[]),function(e){return!d(e,t)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2===0:"odd"===e?n%2===1:!!t[e]&&t[e]()})):void 0}function c(e,r,c){function u(e){e&&r.push(e)}var d;return d=n.exec(e.replace(i,"")),u(t(d[1])),u(o(d[2])),u(a(d[3])),u(s(d[4],d[5],d[6])),u(l(d[7])),r.pseudo=!!d[7],r.direct=c,r}function u(e,t){var n=[],i,o,a;do if(r.exec(""),o=r.exec(e),o&&(e=o[3],n.push(o[1]),o[2])){i=o[3];break}while(o);for(i&&u(i,t),e=[],a=0;a<n.length;a++)">"!=n[a]&&e.push(c(n[a],[],">"===n[a-1]));return t.push(e),t}var d=this.match;this._selectors=u(e,[])},match:function(e,t){var n,r,i,o,a,s,l,c,u,d,f,m,g;for(t=t||this._selectors,n=0,r=t.length;r>n;n++){for(a=t[n],o=a.length,g=e,m=0,i=o-1;i>=0;i--)for(c=a[i];g;){if(c.pseudo)for(f=g.parent().items(),u=d=f.length;u--&&f[u]!==g;);for(s=0,l=c.length;l>s;s++)if(!c[s](g,u,d)){s=l+1;break}if(s===l){m++;break}if(i===o-1)break;g=g.parent()}if(m===o)return!0}return!1},find:function(e){function n(e,t,i){var o,a,s,l,c,u=t[i];for(o=0,a=e.length;a>o;o++){for(c=e[o],s=0,l=u.length;l>s;s++)if(!u[s](c,o,a)){s=l+1;break}if(s===l)i==t.length-1?r.push(c):c.items&&n(c.items(),t,i+1);else if(u.direct)return;c.items&&n(c.items(),t,i)}}var r=[],i,s,l=this._selectors;if(e.items){for(i=0,s=l.length;s>i;i++)n(e.items(),l[i],0);s>1&&(r=t(r))}return o||(o=a.Collection),new o(r)}});return a}),r(he,[p,pe,ue],function(e,t,n){var r,i,o=Array.prototype.push,a=Array.prototype.slice;return i={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?o.apply(n,t):t instanceof r?n.add(t.toArray()):o.call(n,t),n},set:function(e){var t=this,n=t.length,r;for(t.length=0,t.add(e),r=t.length;n>r;r++)delete t[r];return t},filter:function(e){var n=this,i,o,a=[],s,l;for("string"==typeof e?(e=new t(e),l=function(t){return e.match(t)}):l=e,i=0,o=n.length;o>i;i++)s=n[i],l(s)&&a.push(s);return new r(a)},slice:function(){return new r(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new r(e.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n=this,r,i;return t!==r?(n.each(function(n){n[e]&&n[e](t)}),n):(i=n[0],i&&i[e]?i[e]():void 0)},exec:function(t){var n=this,r=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,r)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},e.each("fire on off show hide append prepend before after reflow".split(" "),function(t){i[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){i[e]=function(t){return this.prop(e,t)}}),r=n.extend(i),t.Collection=r,r}),r(ve,[d,p,C],function(e,t,n){var r=0,i={id:function(){return"mceu_"+r++},create:function(e,r,i){var o=document.createElement(e);return n.DOM.setAttribs(o,r),"string"==typeof i?o.innerHTML=i:t.each(i,function(e){e.nodeType&&o.appendChild(e)}),o},createFragment:function(e){return n.DOM.createFragment(e)},getWindowSize:function(){return n.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return n.DOM.getPos(e,t||i.getContainer())},getContainer:function(){return e.container?e.container:document.body},getViewPort:function(e){return n.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return n.DOM.addClass(e,t)},removeClass:function(e,t){return n.DOM.removeClass(e,t)},hasClass:function(e,t){return n.DOM.hasClass(e,t)},toggleClass:function(e,t,r){return n.DOM.toggleClass(e,t,r)},css:function(e,t,r){return n.DOM.setStyle(e,t,r)},getRuntimeStyle:function(e,t){return n.DOM.getStyle(e,t,!0)},on:function(e,t,r,i){return n.DOM.bind(e,t,r,i)},off:function(e,t,r){return n.DOM.unbind(e,t,r)},fire:function(e,t,r){return n.DOM.fire(e,t,r)},innerHtml:function(e,t){n.DOM.setHTML(e,t)}};return i}),r(ye,[],function(){return{parseBox:function(e){var t,n=10;return e?"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0}):void 0},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function r(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}}}}),r(be,[p],function(e){function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}return e.extend(n.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e},n}),r(xe,[u],function(e){var t={},n;return{add:function(r){var i=r.parent();if(i){if(!i._layout||i._layout.isNative())return;t[i._id]||(t[i._id]=i),n||(n=!0,e.requestAnimationFrame(function(){var e,r;n=!1;for(e in t)r=t[e],
r.state.get("rendered")&&r.reflow();t={}},document.body))}},remove:function(e){t[e._id]&&delete t[e._id]}}}),r(we,[ue,p,de,ge,he,ve,h,ye,be,xe],function(e,t,n,r,i,o,a,s,l,c){function u(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,r){r&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&d(e))}})),e._eventDispatcher}function d(e){function t(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function n(){var e=c._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),c._lastHoverCtrl=null)}function r(t){var n=e.getParentCtrl(t.target),r=c._lastHoverCtrl,i=0,o,a,s;if(n!==r){if(c._lastHoverCtrl=n,a=n.parents().toArray().reverse(),a.push(n),r){for(s=r.parents().toArray().reverse(),s.push(r),i=0;i<s.length&&a[i]===s[i];i++);for(o=s.length-1;o>=i;o--)r=s[o],r.fire("mouseleave",{target:r.getEl()})}for(o=i;o<a.length;o++)n=a[o],n.fire("mouseenter",{target:n.getEl()})}}function i(t){t.preventDefault(),"mousewheel"==t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var o,s,l,c,u,d;if(u=e._nativeEvents){for(l=e.parents().toArray(),l.unshift(e),o=0,s=l.length;!c&&s>o;o++)c=l[o]._eventsRoot;for(c||(c=l[l.length-1]||e),e._eventsRoot=c,s=o,o=0;s>o;o++)l[o]._eventsRoot=c;var g=c._delegates;g||(g=c._delegates={});for(d in u){if(!u)return!1;"wheel"!==d||m?("mouseenter"===d||"mouseleave"===d?c._hasMouseEnter||(a(c.getEl()).on("mouseleave",n).on("mouseover",r),c._hasMouseEnter=1):g[d]||(a(c.getEl()).on(d,t),g[d]=!0),u[d]=!1):f?a(e.getEl()).on("mousewheel",i):a(e.getEl()).on("DOMMouseScroll",i)}}}var f="onmousewheel"in document,m=!1,g="mce-",p,h=0,v={Statics:{classPrefix:g},isRtl:function(){return p.rtl},classPrefix:g,init:function(e){function n(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)i.classes.add(e[t])}var i=this,o,c;i.settings=e=t.extend({},i.Defaults,e),i._id=e.id||"mceu_"+h++,i._aria={role:e.role},i._elmCache={},i.$=a,i.state=new r({visible:!0,active:!1,disabled:!1,value:""}),i.data=new r(e.data),i.classes=new l(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,o=e.classes,o&&(i.Defaults&&(c=i.Defaults.classes,c&&o!=c&&n(c)),n(o)),t.each("title text name visible disabled active value".split(" "),function(t){t in e&&i[t](e[t])}),i.on("click",function(){return i.disabled()?!1:void 0}),i.settings=e,i.borderBox=s.parseBox(e.border),i.paddingBox=s.parseBox(e.padding),i.marginBox=s.parseBox(e.margin),e.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){return o.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e=this,t=e.settings,n,r,i=e.getEl(),a,l,c,u,d,f,m,g;n=e.borderBox=e.borderBox||s.measureBox(i,"border"),e.paddingBox=e.paddingBox||s.measureBox(i,"padding"),e.marginBox=e.marginBox||s.measureBox(i,"margin"),g=o.getSize(i),f=t.minWidth,m=t.minHeight,c=f||g.width,u=m||g.height,a=t.width,l=t.height,d=t.autoResize,d="undefined"!=typeof d?d:!a&&!l,a=a||c,l=l||u;var p=n.left+n.right,h=n.top+n.bottom,v=t.maxWidth||65535,y=t.maxHeight||65535;return e._layoutRect=r={x:t.x||0,y:t.y||0,w:a,h:l,deltaW:p,deltaH:h,contentW:a-p,contentH:l-h,innerW:a-p,innerH:l-h,startMinWidth:f||0,startMinHeight:m||0,minW:Math.min(c,v),minH:Math.min(u,y),maxW:v,maxH:y,autoResize:d,scrollW:0},e._lastLayoutRect={},r},layoutRect:function(e){var t=this,n=t._layoutRect,r,i,o,a,s,l;return n||(n=t.initLayoutRect()),e?(o=n.deltaW,a=n.deltaH,e.x!==s&&(n.x=e.x),e.y!==s&&(n.y=e.y),e.minW!==s&&(n.minW=e.minW),e.minH!==s&&(n.minH=e.minH),i=e.w,i!==s&&(i=i<n.minW?n.minW:i,i=i>n.maxW?n.maxW:i,n.w=i,n.innerW=i-o),i=e.h,i!==s&&(i=i<n.minH?n.minH:i,i=i>n.maxH?n.maxH:i,n.h=i,n.innerH=i-a),i=e.innerW,i!==s&&(i=i<n.minW-o?n.minW-o:i,i=i>n.maxW-o?n.maxW-o:i,n.innerW=i,n.w=i+o),i=e.innerH,i!==s&&(i=i<n.minH-a?n.minH-a:i,i=i>n.maxH-a?n.maxH-a:i,n.innerH=i,n.h=i+a),e.contentW!==s&&(n.contentW=e.contentW),e.contentH!==s&&(n.contentH=e.contentH),r=t._lastLayoutRect,r.x===n.x&&r.y===n.y&&r.w===n.w&&r.h===n.h||(l=p.repaintControls,l&&l.map&&!l.map[t._id]&&(l.push(t),l.map[t._id]=!0),r.x=n.x,r.y=n.y,r.w=n.w,r.h=n.h),t):n},repaint:function(){var e=this,t,n,r,i,o,a,s,l,c,u;c=document.createRange?function(e){return e}:Math.round,t=e.getEl().style,i=e._layoutRect,l=e._lastRepaintRect||{},o=e.borderBox,a=o.left+o.right,s=o.top+o.bottom,i.x!==l.x&&(t.left=c(i.x)+"px",l.x=i.x),i.y!==l.y&&(t.top=c(i.y)+"px",l.y=i.y),i.w!==l.w&&(u=c(i.w-a),t.width=(u>=0?u:0)+"px",l.w=i.w),i.h!==l.h&&(u=c(i.h-s),t.height=(u>=0?u:0)+"px",l.h=i.h),e._hasBody&&i.innerW!==l.innerW&&(u=c(i.innerW),r=e.getEl("body"),r&&(n=r.style,n.width=(u>=0?u:0)+"px"),l.innerW=i.innerW),e._hasBody&&i.innerH!==l.innerH&&(u=c(i.innerH),r=r||e.getEl("body"),r&&(n=n||r.style,n.height=(u>=0?u:0)+"px"),l.innerH=i.innerH),e._lastRepaintRect=l,e.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,o.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(i){return t||r.parentsAndSelf().each(function(r){var i=r.settings.callbacks;return i&&(t=i[e])?(n=r,!1):void 0}),t?t.call(n,i):(i.action=e,void this.fire("execute",i))}}var r=this;return u(r).on(e,n(t)),r},off:function(e,t){return u(this).off(e,t),this},fire:function(e,t,n){var r=this;if(t=t||{},t.control||(t.control=r),t=u(r).fire(e,t),n!==!1&&r.parent)for(var i=r.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},hasEventListeners:function(e){return u(this).has(e)},parents:function(e){var t=this,n,r=new i;for(n=t.parent();n;n=n.parent())r.add(n);return e&&(r=r.filter(e)),r},parentsAndSelf:function(e){return new i(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=a("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&r.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return p.translate?p.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e=this,t=e.getEl(),n=e.parent(),r,i;if(e.items){var o=e.items().toArray();for(i=o.length;i--;)o[i].remove()}n&&n.items&&(r=[],n.items().each(function(t){t!==e&&r.push(t)}),n.items().set(r),n._lastRect=null),e._eventsRoot&&e._eventsRoot==e&&a(t).off();var s=e.getRoot().controlIdLookup;return s&&delete s[e._id],t&&t.parentNode&&t.parentNode.removeChild(t),e.state.set("rendered",!1),e.state.destroy(),e.fire("remove"),e},renderBefore:function(e){return a(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return a(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e=this,t=e.settings,n,r,i,o,s;e.$el=a(e.getEl()),e.state.set("rendered",!0);for(o in t)0===o.indexOf("on")&&e.on(o.substr(2),t[o]);if(e._eventsRoot){for(i=e.parent();!s&&i;i=i.parent())s=i._eventsRoot;if(s)for(o in s._nativeEvents)e._nativeEvents[o]=!0}d(e),t.style&&(n=e.getEl(),n&&(n.setAttribute("style",t.style),n.style.cssText=t.style)),e.settings.border&&(r=e.borderBox,e.$el.css({"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left}));var l=e.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[e._id]=e;for(var u in e._aria)e.aria(u,e._aria[u]);e.state.get("visible")===!1&&(e.getEl().style.display="none"),e.bindStates(),e.state.on("change:visible",function(t){var n=t.value,r;e.state.get("rendered")&&(e.getEl().style.display=n===!1?"none":"",e.getEl().getBoundingClientRect()),r=e.parent(),r&&(r._lastRect=null),e.fire(n?"show":"hide"),c.add(e)}),e.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){function t(e,t){var n,r,i=e;for(n=r=0;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}var n=this.getEl(),r=n.parentNode,i,o,a,s,l,c,u=t(n,r);return i=u.x,o=u.y,a=n.offsetWidth,s=n.offsetHeight,l=r.clientWidth,c=r.clientHeight,"end"==e?(i-=l-a,o-=c-s):"center"==e&&(i-=l/2-a/2,o-=c/2-s/2),r.scrollLeft=i,r.scrollTop=o,this},getRoot:function(){for(var e=this,t,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var r=n.length;r--;)n[r].rootControl=t;return t},reflow:function(){c.remove(this);var e=this.parent();return e._layout&&!e._layout.isNative()&&e.reflow(),this}};return t.each("text title visible disabled active value".split(" "),function(e){v[e]=function(t){return 0===arguments.length?this.state.get(e):("undefined"!=typeof t&&this.state.set(e,t),this)}}),p=e.extend(v)}),r(Ce,[],function(){var e={},t;return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(n,r){var i,o,a;if(!t){a=tinymce.ui;for(o in a)e[o.toLowerCase()]=a[o];t=!0}if("string"==typeof n?(r=r||{},r.type=n):(r=n,n=r.type),n=n.toLowerCase(),i=e[n],!i)throw new Error("Could not find control by type: "+n);return i=new i(r),i.type=n,i}}}),r(ke,[],function(){return function(e){function t(e){return e&&1===e.nodeType}function n(e){return e=e||x,t(e)?e.getAttribute("role"):null}function r(e){for(var t,r=e||x;r=r.parentNode;)if(t=n(r))return t}function i(e){var n=x;return t(n)?n.getAttribute("aria-"+e):void 0}function o(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t||"SELECT"==t}function a(e){return!(!o(e)||e.hidden)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(n(e))}function s(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display&&!e.disabled){a(e)&&n.push(e);for(var r=0;r<e.childNodes.length;r++)t(e.childNodes[r])}}var n=[];return t(e||b.getEl()),n}function l(e){var t,n;e=e||w,n=e.parents().toArray(),n.unshift(e);for(var r=0;r<n.length&&(t=n[r],!t.settings.ariaRoot);r++);return t}function c(e){var t=l(e),n=s(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?u(t.lastAriaIndex,n):u(0,n)}function u(e,t){return 0>e?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n=-1,r=l();t=t||s(r.getEl());for(var i=0;i<t.length;i++)t[i]===x&&(n=i);n+=e,r.lastAriaIndex=u(n,t)}function f(){var e=r();"tablist"==e?d(-1,s(x.parentNode)):w.parent().submenu?v():d(-1)}function m(){var e=n(),t=r();"tablist"==t?d(1,s(x.parentNode)):"menuitem"==e&&"menu"==t&&i("haspopup")?y():d(1)}function g(){d(-1)}function p(){var e=n(),t=r();"menuitem"==e&&"menubar"==t?y():"button"==e&&i("haspopup")?y({key:"down"}):d(1)}function h(e){var t=r();if("tablist"==t){var n=s(w.getEl("body"))[0];n&&n.focus()}else d(e.shiftKey?-1:1)}function v(){w.fire("cancel")}function y(e){e=e||{},w.fire("click",{target:x,aria:e})}var b=e.root,x,w;try{x=document.activeElement}catch(C){x=document.body}return w=b.getParentCtrl(x),b.on("keydown",function(e){function t(e,t){o(x)||"slider"!==n(x)&&t(e)!==!1&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,f);break;case 39:t(e,m);break;case 38:t(e,g);break;case 40:t(e,p);break;case 27:v();break;case 14:case 13:case 32:t(e,y);break;case 9:h(e)!==!1&&e.preventDefault()}}),b.on("focusin",function(e){x=e.target,w=e.control}),{focusFirst:c}}}),r(Ne,[we,he,pe,Ce,ke,p,h,be,xe],function(e,t,n,r,i,o,a,s,l){var c={};return e.extend({init:function(e){var n=this;n._super(e),e=n.settings,e.fixed&&n.state.set("fixed",!0),n._items=new t,n.isRtl()&&n.classes.add("rtl"),n.bodyClasses=new s(function(){n.state.get("rendered")&&(n.getEl("body").className=this.toString())}),n.bodyClasses.prefix=n.classPrefix,n.classes.add("container"),n.bodyClasses.add("container-body"),e.containerCls&&n.classes.add(e.containerCls),n._layout=r.create((e.layout||"")+"layout"),n.add(n.settings.items?n.settings.items:n.render()),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=c[e]=c[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t=this,n,r,i;return e&&(r=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav)?void r.focusFirst(t):(i=t.find("*"),t.statusbar&&i.add(t.statusbar.items()),i.each(function(e){return e.settings.autofocus?(n=null,!1):void(e.canFocus&&(n=n||e))}),n&&n.focus(),t)},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n=this,i,a=[];return o.isArray(t)||(t=[t]),o.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),i=o.extend({},n.settings.defaults,t),t.type=i.type=i.type||t.type||n.settings.defaultType||(i.defaults?i.defaults.type:null),t=r.create(i)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var r;t.parent(e),t.state.get("rendered")||(r=e.getEl("body"),r.hasChildNodes()&&n<=r.childNodes.length-1?a(r.childNodes[n]).before(t.renderHtml()):a(r).append(t.renderHtml()),t.postRender(),l.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r=this,i,o,a;return e=r.create(e),i=r.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(o=i.slice(0,t).toArray(),a=i.slice(t).toArray(),i.set(o.concat(e,a))),r.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),r=e.value();n&&"undefined"!=typeof r&&(t[n]=r)}),t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this,t;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e.state.set("rendered",!0),e.settings.style&&e.$el.css(e.settings.style),e.settings.border&&(t=e.borderBox,e.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),e.parent()||(e.keyboardNav=new i({root:e})),e},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;return n&&n.w==t.w&&n.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t;if(l.remove(this),this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),r(Se,[h],function(e){function t(e){var t,n,r,i,o,a,s,l,c=Math.max;return t=e.documentElement,n=e.body,r=c(t.scrollWidth,n.scrollWidth),i=c(t.clientWidth,n.clientWidth),o=c(t.offsetWidth,n.offsetWidth),a=c(t.scrollHeight,n.scrollHeight),s=c(t.clientHeight,n.clientHeight),l=c(t.offsetHeight,n.offsetHeight),{width:o>r?i:r,height:l>a?s:a}}function n(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}return function(r,i){function o(){return s.getElementById(i.handle||r)}var a,s=i.document||document,l,c,u,d,f,m;i=i||{},c=function(r){var c=t(s),g,p;n(r),r.preventDefault(),l=r.button,g=o(),f=r.screenX,m=r.screenY,p=window.getComputedStyle?window.getComputedStyle(g,null).getPropertyValue("cursor"):g.runtimeStyle.cursor,a=e("<div></div>").css({position:"absolute",top:0,left:0,width:c.width,height:c.height,zIndex:2147483647,opacity:1e-4,cursor:p}).appendTo(s.body),e(s).on("mousemove touchmove",d).on("mouseup touchend",u),i.start(r)},d=function(e){return n(e),e.button!==l?u(e):(e.deltaX=e.screenX-f,e.deltaY=e.screenY-m,e.preventDefault(),void i.drag(e))},u=function(t){n(t),e(s).off("mousemove touchmove",d).off("mouseup touchend",u),a.remove(),i.stop&&i.stop(t)},this.destroy=function(){e(o()).off()},e(o()).on("mousedown touchstart",c)}}),r(_e,[h,Se],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,a,s,l,c,u){var d,f,m,g,p,h,v,y,b;if(f=i.getEl("scroll"+t)){if(y=a.toLowerCase(),b=s.toLowerCase(),e(i.getEl("absend")).css(y,i.layoutRect()[l]-1),!c)return void e(f).css("display","none");e(f).css("display","block"),d=i.getEl("body"),m=i.getEl("scroll"+t+"t"),g=d["client"+s]-2*o,g-=n&&r?f["client"+u]:0,p=d["scroll"+s],h=g/p,v={},v[y]=d["offset"+a]+o,v[b]=g,e(f).css(v),v={},v[y]=d["scroll"+a]*h,v[b]=g*h,e(m).css(v)}}var n,r,a;a=i.getEl("body"),n=a.scrollWidth>a.clientWidth,r=a.scrollHeight>a.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",r,"Width")}function r(){function n(n,r,a,s,l){var c,u=i._id+"-scroll"+n,d=i.classPrefix;e(i.getEl()).append('<div id="'+u+'" class="'+d+"scrollbar "+d+"scrollbar-"+n+'"><div id="'+u+'t" class="'+d+'scrollbar-thumb"></div></div>'),i.draghelper=new t(u+"t",{start:function(){c=i.getEl("body")["scroll"+r],e("#"+u).addClass(d+"active")},drag:function(e){var t,u,d,f,m=i.layoutRect();u=m.contentW>m.innerW,d=m.contentH>m.innerH,f=i.getEl("body")["client"+a]-2*o,f-=u&&d?i.getEl("scroll"+n)["client"+l]:0,t=f/i.getEl("body")["scroll"+a],i.getEl("body")["scroll"+r]=c+e["delta"+s]/t},stop:function(){e("#"+u).removeClass(d+"active")}})}i.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var i=this,o=2;i.settings.autoScroll&&(i._hasScroll||(i._hasScroll=!0,r(),i.on("wheel",function(e){var t=i.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e(i.getEl("body")).on("scroll",n)),n())}}}),r(Te,[Ne,_e],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),r(Ee,[ve],function(e){function t(t,n,r){var i,o,a,s,l,c,u,d,f,m;return f=e.getViewPort(),o=e.getPos(n),a=o.x,s=o.y,t.state.get("fixed")&&"static"==e.getRuntimeStyle(document.body,"position")&&(a-=f.x,s-=f.y),i=t.getEl(),m=e.getSize(i),l=m.width,c=m.height,m=e.getSize(n),u=m.width,d=m.height,r=(r||"").split(""),"b"===r[0]&&(s+=d),"r"===r[1]&&(a+=u),"c"===r[0]&&(s+=Math.round(d/2)),"c"===r[1]&&(a+=Math.round(u/2)),"b"===r[3]&&(s-=c),"r"===r[4]&&(a-=l),"c"===r[3]&&(s-=Math.round(c/2)),"c"===r[4]&&(a-=Math.round(l/2)),{x:a,y:s,w:l,h:c}}return{testMoveRel:function(n,r){for(var i=e.getViewPort(),o=0;o<r.length;o++){var a=t(this,n,r[o]);if(this.state.get("fixed")){if(a.x>0&&a.x+a.w<i.w&&a.y>0&&a.y+a.h<i.h)return r[o]}else if(a.x>i.x&&a.x+a.w<i.w+i.x&&a.y>i.y&&a.y+a.h<i.h+i.y)return r[o]}return r[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var r=t(this,e,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(t,n){function r(e,t,n){return 0>e?0:e+n>t?(e=t-n,0>e?0:e):e}var i=this;if(i.settings.constrainToViewport){var o=e.getViewPort(window),a=i.layoutRect();t=r(t,o.w+o.x,a.w),n=r(n,o.h+o.y,a.h)}return i.state.get("rendered")?i.layoutRect({x:t,y:n}).repaint():(i.settings.x=t,i.settings.y=n),i.fire("move",{x:t,y:n}),i}}}),r(Re,[ve],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var r=e.getWindowSize();t=1>=t?t*r.w:t,n=1>=n?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}}}),r(Ae,[Te,Ee,Re,ve,h,u],function(e,t,n,r,i,o){function a(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function s(e){for(var t=v.length;t--;){var n=v[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r&&(a(r,n)||n.parent()===r))continue;e=n.fire("autohide",{target:e.target}),e.isDefaultPrevented()||n.hide()}}}function l(){g||(g=function(e){2!=e.button&&s(e)},i(document).on("click touchstart",g))}function c(){p||(p=function(){var e;for(e=v.length;e--;)d(v[e])},i(window).on("scroll",p))}function u(){if(!h){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;h=function(){document.all&&t==e.clientWidth&&n==e.clientHeight||(t=e.clientWidth,n=e.clientHeight,x.hideAll())},i(window).on("resize",h)}}function d(e){function t(t,n){for(var r,i=0;i<v.length;i++)if(v[i]!=e)for(r=v[i].parent();r&&(r=r.parent());)r==e&&v[i].fixed(t).moveBy(0,n).repaint()}var n=r.getViewPort().y;e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function f(e,t){var n,r=x.zIndex||65535,o;if(e)y.push(t);else for(n=y.length;n--;)y[n]===t&&y.splice(n,1);if(y.length)for(n=0;n<y.length;n++)y[n].modal&&(r++,o=y[n]),y[n].getEl().style.zIndex=r,y[n].zIndex=r,r++;var a=i("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];o?i(a).css("z-index",o.zIndex-1):a&&(a.parentNode.removeChild(a),b=!1),x.currentZIndex=r}function m(e){var t;for(t=v.length;t--;)v[t]===e&&v.splice(t,1);for(t=y.length;t--;)y[t]===e&&y.splice(t,1)}var g,p,h,v=[],y=[],b,x=e.extend({Mixins:[t,n],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(l(),u(),v.push(t)),e.autofix&&(c(),t.on("move",function(){d(this)})),t.on("postrender show",function(e){if(e.control==t){var n,r=t.classPrefix;t.modal&&!b&&(n=i("#"+r+"modal-block",t.getContainerElm()),n[0]||(n=i('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(t.getContainerElm())),o.setTimeout(function(){n.addClass(r+"in"),i(t.getEl()).addClass(r+"in")}),b=!0),f(!0,t)}}),t.on("show",function(){t.parents().each(function(e){return e.state.get("fixed")?(t.fixed(!0),!1):void 0})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!=e){if(t.state.get("rendered")){var n=r.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e=this,t,n=e._super();for(t=v.length;t--&&v[t]!==e;);return-1===t&&v.push(e),n},hide:function(){return m(this),f(!1,this),this._super()},hideAll:function(){x.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),f(!1,e)),e},remove:function(){m(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return x.hideAll=function(){for(var e=v.length;e--;){var t=v[e];t&&t.settings.autohide&&(t.hide(),v.splice(e,1))}},x}),r(Be,[Ae,Te,ve,h,Se,ye,d,u],function(e,t,n,r,i,o,a,s){function l(e){var t="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",n=r("meta[name=viewport]")[0],i;a.overrideViewPort!==!1&&(n||(n=document.createElement("meta"),n.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),i=n.getAttribute("content"),i&&"undefined"!=typeof m&&(m=i),n.setAttribute("content",e?t:m))}function c(e,t){u()&&t===!1&&r([document.documentElement,document.body]).removeClass(e+"fullscreen")}function u(){for(var e=0;e<f.length;e++)if(f[e]._fullscreen)return!0;return!1}function d(){function e(){var e,t=n.getWindowSize(),r;for(e=0;e<f.length;e++)r=f[e].layoutRect(),f[e].moveTo(f[e].settings.x||Math.max(0,t.w/2-r.w/2),f[e].settings.y||Math.max(0,t.h/2-r.h/2))}if(!a.desktop){var t={w:window.innerWidth,h:window.innerHeight};s.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w==e&&t.h==n||(t={w:e,h:n},r(window).trigger("resize"))},100)}r(window).on("resize",e)}var f=[],m="",g=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var r=this;r._super(e),r.isRtl()&&r.classes.add("rtl"),r.classes.add("window"),r.bodyClasses.add("window-body"),r.state.set("fixed",!0),e.buttons&&(r.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:r.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),r.statusbar.classes.add("foot"),r.statusbar.parent(r)),r.on("click",function(e){var t=r.classPrefix+"close";(n.hasClass(e.target,t)||n.hasClass(e.target.parentNode,t))&&r.close()}),r.on("cancel",function(){r.close()}),r.aria("describedby",r.describedBy||r._id+"-none"),r.aria("label",e.title),r._fullscreen=!1},recalc:function(){var e=this,t=e.statusbar,r,i,o,a;e._fullscreen&&(e.layoutRect(n.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH),e._super(),r=e.layoutRect(),e.settings.title&&!e._fullscreen&&(i=r.headerW,i>r.w&&(o=r.x-Math.max(0,i/2),e.layoutRect({w:i,x:o}),a=!0)),t&&(t.layoutRect({w:e.layoutRect().innerW}).recalc(),i=t.layoutRect().minW+r.deltaW,i>r.w&&(o=r.x-Math.max(0,i-r.w),e.layoutRect({w:i,x:o}),a=!0)),a&&e.recalc()},initLayoutRect:function(){var e=this,t=e._super(),r=0,i;if(e.settings.title&&!e._fullscreen){i=e.getEl("head");var o=n.getSize(i);t.headerW=o.width,t.headerH=o.height,r+=t.headerH}e.statusbar&&(r+=e.statusbar.layoutRect().h),t.deltaH+=r,t.minH+=r,t.h+=r;var a=n.getWindowSize();return t.x=e.settings.x||Math.max(0,a.w/2-t.w/2),t.y=e.settings.y||Math.max(0,a.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,i=e.settings,o="",a="",s=i.html;return e.preRender(),t.preRender(e),i.title&&(o='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(i.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),i.url&&(s='<iframe src="'+i.url+'" tabindex="-1"></iframe>'),"undefined"==typeof s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var t=this,i=document.documentElement,a,l=t.classPrefix,c;if(e!=t._fullscreen)if(r(window).on("resize",function(){var e;if(t._fullscreen)if(a)t._timer||(t._timer=s.setTimeout(function(){var e=n.getWindowSize();t.moveTo(0,0).resizeTo(e.w,e.h),t._timer=0},50));else{e=(new Date).getTime();var r=n.getWindowSize();t.moveTo(0,0).resizeTo(r.w,r.h),(new Date).getTime()-e>50&&(a=!0)}}),c=t.layoutRect(),t._fullscreen=e,e){t._initial={x:c.x,y:c.y,w:c.w,h:c.h},t.borderBox=o.parseBox("0"),t.getEl("head").style.display="none",c.deltaH-=c.headerH+2,r([i,document.body]).addClass(l+"fullscreen"),t.classes.add("fullscreen");var u=n.getWindowSize();t.moveTo(0,0).resizeTo(u.w,u.h)}else t.borderBox=o.parseBox(t.settings.border),t.getEl("head").style.display="",c.deltaH+=c.headerH,r([i,document.body]).removeClass(l+"fullscreen"),t.classes.remove("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h);return t.reflow()},postRender:function(){var e=this,t;setTimeout(function(){e.classes.add("in"),e.fire("open")},0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new i(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()}),f.push(e),l(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t;for(e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),c(e.classPrefix,!1),t=f.length;t--;)f[t]===e&&f.splice(t,1);l(f.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return d(),g}),r(Pe,[Be],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function r(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),o(t)}}}var i,o=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:i=[r("Ok",!0,!0),r("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:i=[r("Yes",1,!0),r("No",0)],n.buttons==t.YES_NO_CANCEL&&i.push(r("Cancel",-1));break;default:i=[r("Ok",!0,!0)]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:i,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){o(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),r(Me,[Be,Pe],function(e,t){return function(n){function r(){return s.length?s[s.length-1]:void 0}function i(e){n.fire("OpenWindow",{win:e})}function o(e){n.fire("CloseWindow",{win:e})}var a=this,s=[];a.windows=s,n.on("remove",function(){for(var e=s.length;e--;)s[e].close()}),a.open=function(t,r){var a;return n.editorManager.setActive(n),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){a.find("form")[0].submit()}},{text:"Cancel",onclick:function(){a.close()}}]),a=new e(t),s.push(a),a.on("close",function(){for(var e=s.length;e--;)s[e]===a&&s.splice(e,1);s.length||n.focus(),o(a)}),t.data&&a.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),a.features=t||{},a.params=r||{},1===s.length&&n.nodeChanged(),a=a.renderTo().reflow(),
i(a),a},a.alert=function(e,r,a){var s;s=t.alert(e,function(){r?r.call(a||this):n.focus()}),s.on("close",function(){o(s)}),i(s)},a.confirm=function(e,n,r){var a;a=t.confirm(e,function(e){n.call(r||this,e)}),a.on("close",function(){o(a)}),i(a)},a.close=function(){r()&&r().close()},a.getParams=function(){return r()?r().params:null},a.setParams=function(e){r()&&(r().params=e)},a.getWindows=function(){return s}}}),r(De,[we,Ee],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=131070}})}),r(Ie,[we,De],function(e,t){var n,r=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&r.tooltips!==!1&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control==t){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"==i),r.classes.toggle("tooltip-nw","bc-tl"==i),r.classes.toggle("tooltip-ne","bc-tr"==i),r.moveRel(t.getEl(),i)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){function e(e){n.aria("disabled",e),n.classes.toggle("disabled",e)}function t(e){n.aria("pressed",e),n.classes.toggle("active",e)}var n=this;return n.state.on("change:disabled",function(t){e(t.value)}),n.state.on("change:active",function(e){t(e.value)}),n.state.get("disabled")&&e(!0),n.state.get("active")&&t(!0),n._super()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return r}),r(Le,[Ie],function(e){return e.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"></div></div><div class="'+n+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}var t=this;return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}})}),r(Oe,[we,Ee,Le,u],function(e,t,n,r){return e.extend({Mixins:[t],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new n),t.on("click",function(e){-1!=e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",r="",i="",o="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),e.color&&(o=' style="background-color: '+e.color+'"'),e.closeButton&&(r='<button type="button" class="'+t+'close" aria-hidden="true"></button>'),e.progressBar&&(i=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+o+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+i+r+"</div>"},postRender:function(){var e=this;return r.setTimeout(function(){e.$el.addClass(e.classPrefix+"in")}),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().childNodes[1].innerHTML=t.value}),e.progressBar&&e.progressBar.bindStates(),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=65534}})}),r(He,[Oe,u,p],function(e,t,n){return function(r){function i(){return f.length?f[f.length-1]:void 0}function o(){t.requestAnimationFrame(function(){a(),s()})}function a(){for(var e=0;e<f.length;e++)f[e].moveTo(0,0)}function s(){if(f.length>0){var e=f.slice(0,1)[0],t=r.inline?r.getElement():r.getContentAreaContainer();if(e.moveRel(t,"tc-tc"),f.length>1)for(var n=1;n<f.length;n++)f[n].moveRel(f[n-1].getEl(),"bc-tc")}}function l(e,t){if(!u(t))return null;var r=n.grep(e,function(e){return c(t,e)});return 0===r.length?null:r[0]}function c(e,t){return e.type===t.settings.type&&e.text===t.settings.text}function u(e){return!e.progressBar&&!e.timeout}var d=this,f=[];d.notifications=f,r.on("remove",function(){for(var e=f.length;e--;)f[e].close()}),r.on("ResizeEditor",s),r.on("ResizeWindow",o),d.open=function(t){if(!r.removed){var n;r.editorManager.setActive(r);var i=l(f,t);return null===i?(n=new e(t),f.push(n),t.timeout>0&&(n.timer=setTimeout(function(){n.close()},t.timeout)),n.on("close",function(){var e=f.length;for(n.timer&&r.getWin().clearTimeout(n.timer);e--;)f[e]===n&&f.splice(e,1);s()}),n.renderTo(),s()):n=i,n}},d.close=function(){i()&&i().close()},d.getNotifications=function(){return f},r.on("SkinLoaded",function(){var e=r.settings.service_message;e&&r.notificationManager.open({text:e,type:"warning",timeout:0,icon:""})})}}),r(Fe,[C],function(e){function t(t,n,r){for(var i=[];n&&n!=t;n=n.parentNode)i.push(e.nodeIndex(n,r));return i}function n(e,t){var n,r,i;for(r=e,n=t.length-1;n>=0;n--){if(i=r.childNodes,t[n]>i.length-1)return null;r=i[t[n]]}return r}return{create:t,resolve:n}}),r(ze,[H,E,y,Fe,A,x,d,p,u,T,j,oe],function(e,t,n,r,i,o,a,s,l,c,u,d){return function(f){function m(e,t){try{f.getDoc().execCommand(e,!1,t)}catch(n){}}function g(){var e=f.getDoc().documentMode;return e?e:6}function p(e){return e.isDefaultPrevented()}function h(e){var t,n;e.dataTransfer&&(f.selection.isCollapsed()&&"IMG"==e.target.tagName&&re.select(e.target),t=f.selection.getContent(),t.length>0&&(n=ue+escape(f.id)+","+escape(t),e.dataTransfer.setData(de,n)))}function v(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(de),t&&t.indexOf(ue)>=0)?(t=t.substr(ue.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}function y(e){f.queryCommandSupported("mceInsertClipboardContent")?f.execCommand("mceInsertClipboardContent",!1,{content:e}):f.execCommand("mceInsertContent",!1,e)}function b(){function i(e){var t=w.schema.getBlockElements(),n=f.getBody();if("BR"!=e.nodeName)return!1;for(;e!=n&&!t[e.nodeName];e=e.parentNode)if(e.nextSibling)return!1;return!0}function o(e,t){var n;for(n=e.nextSibling;n&&n!=t;n=n.nextSibling)if((3!=n.nodeType||0!==Q.trim(n.data).length)&&n!==t)return!1;return n===t}function a(e,t,r){var o,a,s;if(w.isChildOf(e,f.getBody()))for(s=w.schema.getNonEmptyElements(),o=new n(r||e,e);a=o[t?"next":"prev"]();){if(s[a.nodeName]&&!i(a))return a;if(3==a.nodeType&&a.data.length>0)return a}}function c(e){var n,r,i,o,s;return!e.collapsed&&(n=w.getParent(t.getNode(e.startContainer,e.startOffset),w.isBlock),r=w.getParent(t.getNode(e.endContainer,e.endOffset),w.isBlock),s=f.schema.getTextBlockElements(),n!=r&&s[n.nodeName]&&s[r.nodeName]&&"false"!==w.getContentEditable(n)&&"false"!==w.getContentEditable(r))?(e.deleteContents(),i=a(n,!1),o=a(r,!0),w.isEmpty(r)||Q(n).append(r.childNodes),Q(r).remove(),i?1==i.nodeType?"BR"==i.nodeName?(e.setStartBefore(i),e.setEndBefore(i)):(e.setStartAfter(i),e.setEndAfter(i)):(e.setStart(i,i.data.length),e.setEnd(i,i.data.length)):o&&(1==o.nodeType?(e.setStartBefore(o),e.setEndBefore(o)):(e.setStart(o,0),e.setEnd(o,0))),C.setRng(e),!0):void 0}function u(e,n){var r,i,s,l,c,u;if(!e.collapsed)return e;if(c=e.startContainer,u=e.startOffset,3==c.nodeType)if(n){if(u<c.data.length)return e}else if(u>0)return e;r=t.getNode(c,u),s=w.getParent(r,w.isBlock),i=a(f.getBody(),n,r),l=w.getParent(i,w.isBlock);var d=1===c.nodeType&&u>c.childNodes.length-1;if(!r||!i)return e;if(l&&s!=l)if(n){if(!o(s,l))return e;1==r.nodeType?"BR"==r.nodeName?e.setStartBefore(r):e.setStartAfter(r):e.setStart(r,r.data.length),1==i.nodeType?e.setEnd(i,0):e.setEndBefore(i)}else{if(!o(l,s))return e;1==i.nodeType?"BR"==i.nodeName?e.setStartBefore(i):e.setStartAfter(i):e.setStart(i,i.data.length),1==r.nodeType&&d?e.setEndAfter(r):e.setEndBefore(r)}return e}function d(e){var t=C.getRng();return t=u(t,e),c(t)?!0:void 0}function m(e,t){function n(e,n){return p=Q(n).parents().filter(function(e,t){return!!f.schema.getTextInlineElements()[t.nodeName]}),l=e.cloneNode(!1),p=s.map(p,function(e){return e=e.cloneNode(!1),l.hasChildNodes()?(e.appendChild(l.firstChild),l.appendChild(e)):l.appendChild(e),l.appendChild(e),e}),p.length?(g=w.create("br"),p[0].appendChild(g),w.replace(l,e),t.setStartBefore(g),t.setEndBefore(g),f.selection.setRng(t),g):null}function i(e){return e&&f.schema.getTextBlockElements()[e.tagName]}var o,a,l,c,u,d,m,g,p;if(t.collapsed&&(d=t.startContainer,m=t.startOffset,a=w.getParent(d,w.isBlock),i(a)))if(1==d.nodeType){if(d=d.childNodes[m],d&&"BR"!=d.tagName)return;if(u=e?a.nextSibling:a.previousSibling,w.isEmpty(a)&&i(u)&&w.isEmpty(u)&&n(a,d))return w.remove(u),!0}else if(3==d.nodeType){if(o=r.create(a,d),c=a.cloneNode(!0),d=r.resolve(c,o),e){if(m>=d.data.length)return;d.deleteData(m,1)}else{if(0>=m)return;d.deleteData(m-1,1)}if(w.isEmpty(c))return n(a,d)}}function g(e){var t,n,r;d(e)||(s.each(f.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&f.dom.setAttrib(e,"style",f.dom.getAttrib(e,"style"))}),t=new k(function(){}),t.observe(f.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),f.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null),n=f.selection.getRng(),r=n.startContainer.parentNode,s.each(t.takeRecords(),function(e){if(w.isChildOf(e.target,f.getBody())){if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}s.each(e.addedNodes,function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,i;e==r&&(t=n.startOffset,i=e.firstChild),w.remove(e,!0),i&&(n.setStart(i,t),n.setEnd(i,t),f.selection.setRng(n))}})}}),t.disconnect(),s.each(f.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")}))}function b(e){f.undoManager.transact(function(){g(e)})}var x=f.getDoc(),w=f.dom,C=f.selection,k=window.MutationObserver,N,S;k||(N=!0,k=function(){function e(e){var t=e.relatedNode||e.target;n.push({target:t,addedNodes:[t]})}function t(e){var t=e.relatedNode||e.target;n.push({target:t,attributeName:e.attrName})}var n=[],r;this.observe=function(n){r=n,r.addEventListener("DOMSubtreeModified",e,!1),r.addEventListener("DOMNodeInsertedIntoDocument",e,!1),r.addEventListener("DOMNodeInserted",e,!1),r.addEventListener("DOMAttrModified",t,!1)},this.disconnect=function(){r.removeEventListener("DOMSubtreeModified",e,!1),r.removeEventListener("DOMNodeInsertedIntoDocument",e,!1),r.removeEventListener("DOMNodeInserted",e,!1),r.removeEventListener("DOMAttrModified",t,!1)},this.takeRecords=function(){return n}}),f.on("keydown",function(e){var t=e.keyCode==te,n=e.ctrlKey||e.metaKey;if(!p(e)&&(t||e.keyCode==ee)){var r=f.selection.getRng(),i=r.startContainer,o=r.startOffset;if(t&&e.shiftKey)return;if(m(t,r))return void e.preventDefault();if(!n&&r.collapsed&&3==i.nodeType&&(t?o<i.data.length:o>0))return;e.preventDefault(),n&&f.selection.getSel().modify("extend",t?"forward":"backward",e.metaKey?"lineboundary":"word"),g(t)}}),f.on("keypress",function(t){if(!p(t)&&!C.isCollapsed()&&t.charCode>31&&!e.metaKeyPressed(t)){var n,r,i,o,a,s;n=f.selection.getRng(),s=String.fromCharCode(t.charCode),t.preventDefault(),r=Q(n.startContainer).parents().filter(function(e,t){return!!f.schema.getTextInlineElements()[t.nodeName]}),g(!0),r=r.filter(function(e,t){return!Q.contains(f.getBody(),t)}),r.length?(i=w.createFragment(),r.each(function(e,t){t=t.cloneNode(!1),i.hasChildNodes()?(t.appendChild(i.firstChild),i.appendChild(t)):(a=t,i.appendChild(t)),i.appendChild(t)}),a.appendChild(f.getDoc().createTextNode(s)),o=w.getParent(n.startContainer,w.isBlock),w.isEmpty(o)?Q(o).empty().append(i):n.insertNode(i),n.setStart(a.firstChild,1),n.setEnd(a.firstChild,1),f.selection.setRng(n)):f.selection.setContent(s)}}),f.addCommand("Delete",function(){g()}),f.addCommand("ForwardDelete",function(){g(!0)}),N||(f.on("dragstart",function(e){S=C.getRng(),h(e)}),f.on("drop",function(e){if(!p(e)){var n=v(e);n&&(e.preventDefault(),l.setEditorTimeout(f,function(){var r=t.getCaretRangeFromPoint(e.x,e.y,x);S&&(C.setRng(S),S=null,b()),C.setRng(r),y(n.html)}))}}),f.on("cut",function(e){p(e)||!e.clipboardData||f.selection.isCollapsed()||(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",f.selection.getContent()),e.clipboardData.setData("text/plain",f.selection.getContent({format:"text"})),l.setEditorTimeout(f,function(){b(!0)}))}))}function x(){function e(e){var t=ne.create("body"),n=e.cloneContents();return t.appendChild(n),re.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var r=n.duplicate();return r.moveToElementText(f.getBody()),t.compareRanges(n,r)}var i=e(n),o=ne.createRng();o.selectNode(f.getBody());var a=e(o);return i===a}f.on("keydown",function(e){var t=e.keyCode,r,i;if(!p(e)&&(t==te||t==ee)){if(r=f.selection.isCollapsed(),i=f.getBody(),r&&!ne.isEmpty(i))return;if(!r&&!n(f.selection.getRng()))return;e.preventDefault(),f.setContent(""),i.firstChild&&ne.isBlock(i.firstChild)?f.selection.setCursorLocation(i.firstChild,0):f.selection.setCursorLocation(i,0),f.nodeChanged()}})}function w(){f.shortcuts.add("meta+a",null,"SelectAll")}function C(){f.settings.content_editable||ne.bind(f.getDoc(),"mousedown mouseup",function(e){var t;if(e.target==f.getDoc().documentElement)if(t=re.getRng(),f.getBody().focus(),"mousedown"==e.type){if(c.isCaretContainer(t.startContainer))return;re.placeCaretAt(e.clientX,e.clientY)}else re.setRng(t)})}function k(){f.on("keydown",function(e){if(!p(e)&&e.keyCode===ee){if(!f.getBody().getElementsByTagName("hr").length)return;if(re.isCollapsed()&&0===re.getRng(!0).startOffset){var t=re.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return ne.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(ne.remove(n),e.preventDefault())}}})}function N(){window.Range.prototype.getClientRects||f.on("mousedown",function(e){if(!p(e)&&"HTML"===e.target.nodeName){var t=f.getBody();t.blur(),l.setEditorTimeout(f,function(){t.focus()})}})}function S(){f.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==ne.getContentEditableParent(t)&&(e.preventDefault(),re.select(t),f.nodeChanged()),"A"==t.nodeName&&ne.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),re.select(t))})}function _(){function e(){var e=ne.getAttribs(re.getStart().cloneNode(!1));return function(){var t=re.getStart();t!==f.getBody()&&(ne.setAttrib(t,"style",null),Z(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!re.isCollapsed()&&ne.getParent(re.getStart(),ne.isBlock)!=ne.getParent(re.getEnd(),ne.isBlock)}f.on("keypress",function(n){var r;return p(n)||8!=n.keyCode&&46!=n.keyCode||!t()?void 0:(r=e(),f.getDoc().execCommand("delete",!1,null),r(),n.preventDefault(),!1)}),ne.bind(f.getDoc(),"cut",function(n){var r;!p(n)&&t()&&(r=e(),l.setEditorTimeout(f,function(){r()}))})}function T(){document.body.setAttribute("role","application")}function E(){f.on("keydown",function(e){if(!p(e)&&e.keyCode===ee&&re.isCollapsed()&&0===re.getRng(!0).startOffset){var t=re.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function R(){g()>7||(m("RespectVisibilityInDesign",!0),f.contentStyles.push(".mceHideBrInPre pre br {display: none}"),ne.addClass(f.getBody(),"mceHideBrInPre"),oe.addNodeFilter("pre",function(e){for(var t=e.length,n,r,o,a;t--;)for(n=e[t].getAll("br"),r=n.length;r--;)o=n[r],a=o.prev,a&&3===a.type&&"\n"!=a.value.charAt(a.value-1)?a.value+="\n":o.parent.insert(new i("#text",3),o,!0).value="\n"}),ae.addNodeFilter("pre",function(e){for(var t=e.length,n,r,i,o;t--;)for(n=e[t].getAll("br"),r=n.length;r--;)i=n[r],o=i.prev,o&&3==o.type&&(o.value=o.value.replace(/\r?\n$/,""))}))}function A(){ne.bind(f.getBody(),"mouseup",function(){var e,t=re.getNode();"IMG"==t.nodeName&&((e=ne.getStyle(t,"width"))&&(ne.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),ne.setStyle(t,"width","")),(e=ne.getStyle(t,"height"))&&(ne.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),ne.setStyle(t,"height","")))})}function B(){f.on("keydown",function(t){var n,r,i,o,a;if(!p(t)&&t.keyCode==e.BACKSPACE&&(n=re.getRng(),r=n.startContainer,i=n.startOffset,o=ne.getRoot(),a=r,n.collapsed&&0===i)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=o;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(f.formatter.toggle("blockquote",null,a),n=ne.createRng(),n.setStart(r,0),n.setEnd(r,0),re.setRng(n))}})}function P(){function e(){X(),m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),ie.object_resizing||m("enableObjectResizing",!1)}ie.readonly||f.on("BeforeExecCommand MouseDown",e)}function M(){function e(){Z(ne.select("a"),function(e){var t=e.parentNode,n=ne.getRoot();if(t.lastChild===e){for(;t&&!ne.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}ne.add(t,"br",{"data-mce-bogus":1})}})}f.on("SetContent ExecCommand",function(t){"setcontent"!=t.type&&"mceInsertLink"!==t.command||e()})}function D(){ie.forced_root_block&&f.on("init",function(){m("DefaultParagraphSeparator",ie.forced_root_block)})}function I(){f.on("keydown",function(e){var t;p(e)||e.keyCode!=ee||(t=f.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),f.undoManager.beforeChange(),ne.remove(t.item(0)),f.undoManager.add()))})}function L(){var e;g()>=10&&(e="",Z("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),f.contentStyles.push(e+"{padding-right: 1px !important}"))}function O(){g()<9&&(oe.addNodeFilter("noscript",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.firstChild,r&&n.attr("data-mce-innertext",r.value)}),ae.addNodeFilter("noscript",function(e){for(var t=e.length,n,r,a;t--;)n=e[t],r=e[t].firstChild,r?r.value=o.decode(r.value):(a=n.attributes.map["data-mce-innertext"],a&&(n.attr("data-mce-innertext",null),r=new i("#text",3),r.value=a,r.raw=!0,n.append(r)))}))}function H(){function e(e,t){var n=i.createTextRange();try{n.moveToPoint(e,t)}catch(r){n=null}return n}function t(t){var r;t.button?(r=e(t.x,t.y),r&&(r.compareEndPoints("StartToStart",a)>0?r.setEndPoint("StartToStart",a):r.setEndPoint("EndToEnd",a),r.select())):n()}function n(){var e=r.selection.createRange();a&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&a.select(),ne.unbind(r,"mouseup",n),ne.unbind(r,"mousemove",t),a=o=0}var r=ne.doc,i=r.body,o,a,s;r.documentElement.unselectable=!0,ne.bind(r,"mousedown contextmenu",function(i){if("HTML"===i.target.nodeName){if(o&&n(),s=r.documentElement,s.scrollHeight>s.clientHeight)return;o=1,a=e(i.x,i.y),a&&(ne.bind(r,"mouseup",n),ne.bind(r,"mousemove",t),ne.getRoot().focus(),a.select())}})}function F(){f.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||re.normalize()},!0)}function z(){f.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function U(){f.inline||f.on("keydown",function(){document.activeElement==document.body&&f.getWin().focus()})}function W(){f.inline||(f.contentStyles.push("body {min-height: 150px}"),f.on("click",function(e){var t;if("HTML"==e.target.nodeName){if(a.ie>11)return void f.getBody().focus();t=f.selection.getRng(),f.getBody().focus(),f.selection.setRng(t),f.selection.normalize(),f.nodeChanged()}}))}function $(){a.mac&&f.on("keydown",function(t){!e.metaKeyPressed(t)||t.shiftKey||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),f.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","lineboundary"))})}function j(){m("AutoUrlDetect",!1)}function V(){f.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),f.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function q(){f.on("init",function(){f.dom.bind(f.getBody(),"submit",function(e){e.preventDefault()})})}function Y(){oe.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}function K(){f.on("dragstart",function(e){h(e)}),f.on("drop",function(e){if(!p(e)){var n=v(e);if(n&&n.id!=f.id){e.preventDefault();var r=t.getCaretRangeFromPoint(e.x,e.y,f.getDoc());re.setRng(r),y(n.html)}}})}function X(){}function G(){var e;return se?(e=f.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}function J(){function t(e){var t=new d(e.getBody()),n=e.selection.getRng(),r=u.fromRangeStart(n),i=u.fromRangeEnd(n),o=t.prev(r),a=t.next(i);return!e.selection.isCollapsed()&&(!o||o.isAtStart()&&r.isEqual(o))&&(!a||a.isAtEnd()&&r.isEqual(a))}f.on("keypress",function(n){!p(n)&&!re.isCollapsed()&&n.charCode>31&&!e.metaKeyPressed(n)&&t(f)&&(n.preventDefault(),f.setContent(String.fromCharCode(n.charCode)),f.selection.select(f.getBody(),!0),f.selection.collapse(!1),f.nodeChanged())}),f.on("keydown",function(e){var n=e.keyCode;p(e)||n!=te&&n!=ee||t(f)&&(e.preventDefault(),f.setContent(""),f.nodeChanged())})}var Z=s.each,Q=f.$,ee=e.BACKSPACE,te=e.DELETE,ne=f.dom,re=f.selection,ie=f.settings,oe=f.parser,ae=f.serializer,se=a.gecko,le=a.ie,ce=a.webkit,ue="data:text/mce-internal,",de=le?"Text":"URL";return B(),x(),a.windowsPhone||F(),ce&&(J(),b(),C(),S(),D(),q(),E(),Y(),a.iOS?(U(),W(),V()):w()),le&&a.ie<11&&(k(),T(),R(),A(),I(),L(),O(),H()),a.ie>=11&&(W(),E()),a.ie&&(w(),j(),K()),se&&(J(),k(),N(),_(),P(),M(),z(),$(),E()),{refreshContentEditable:X,isHidden:G}}}),r(Ue,[me,C,p],function(e,t,n){function r(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=o.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function i(e,t){function n(e){return!e.hidden&&!e.readonly}var i=r(e,t),s;if(e.delegates||(e.delegates={}),!e.delegates[t])if(e.settings.event_root){if(a||(a={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&a){for(t in a)e.dom.unbind(r(e,t));a=null}})),a[t])return;s=function(r){for(var i=r.target,a=e.editorManager.editors,s=a.length;s--;){var l=a[s].getBody();(l===i||o.isChildOf(i,l))&&n(a[s])&&a[s].fire(t,r)}},a[t]=s,o.bind(i,t,s)}else s=function(r){n(e)&&e.fire(t,r)},o.bind(i,t,s),e.delegates[t]=s}var o=t.DOM,a,s={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){i(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!=e&&"blur"!=e&&(t?n.initialized?i(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(r(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e=this,t;if(e.delegates){for(t in e.delegates)e.dom.unbind(r(e,t),t,e.delegates[t]);delete e.delegates}e.inline||(e.getBody().onload=null,e.dom.unbind(e.getWin()),e.dom.unbind(e.getDoc())),e.dom.unbind(e.getBody()),e.dom.unbind(e.getContainer())}};return s=n.extend({},e,s)}),r(We,[],function(){function e(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(r){}}function t(e){var t,n;return t=e.getBody(),n=function(t){e.dom.getParents(t.target,"a").length>0&&t.preventDefault()},e.dom.bind(t,"click",n),{unbind:function(){e.dom.unbind(t,"click",n)}}}function n(n,r){n._clickBlocker&&(n._clickBlocker.unbind(),n._clickBlocker=null),r?(n._clickBlocker=t(n),n.selection.controlSelection.hideResizeRect(),n.readonly=!0,n.getBody().contentEditable=!1):(n.readonly=!1,n.getBody().contentEditable=!0,e(n,"StyleWithCSS",!1),e(n,"enableInlineTableEditing",!1),e(n,"enableObjectResizing",!1),n.focus(),n.nodeChanged())}function r(e,t){var r=e.readonly?"readonly":"design";t!=r&&(e.initialized?n(e,"readonly"==t):e.on("init",function(){n(e,"readonly"==t)}),e.fire("SwitchMode",{mode:t}))}return{setMode:r}}),r($e,[p,d],function(e,t){var n=e.each,r=e.explode,i={f9:120,f10:121,f11:122},o=e.makeMap("alt,ctrl,shift,meta,access");return function(a){function s(e){var a,s,l={};n(r(e,"+"),function(e){e in o?l[e]=!0:/^[0-9]{2,}$/.test(e)?l.keyCode=parseInt(e,10):(l.charCode=e.charCodeAt(0),l.keyCode=i[e]||e.toUpperCase().charCodeAt(0))}),a=[l.keyCode];for(s in o)l[s]?a.push(s):l[s]=!1;return l.id=a.join(","),l.access&&(l.alt=!0,t.mac?l.ctrl=!0:l.shift=!0),l.meta&&(t.mac?l.meta=!0:(l.ctrl=!0,l.meta=!1)),l}function l(t,n,i,o){var l;return l=e.map(r(t,">"),s),l[l.length-1]=e.extend(l[l.length-1],{func:i,scope:o||a}),e.extend(l[0],{desc:a.translate(n),subpatterns:l.slice(1)})}function c(e){return e.altKey||e.ctrlKey||e.metaKey}function u(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}function d(e,t){return!!t&&t.ctrl==e.ctrlKey&&t.meta==e.metaKey&&t.alt==e.altKey&&t.shift==e.shiftKey&&!!(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode)&&(e.preventDefault(),!0)}function f(e){return e.func?e.func.call(e.scope):null}var m=this,g={},p=[];a.on("keyup keypress keydown",function(e){!c(e)&&!u(e)||e.isDefaultPrevented()||(n(g,function(t){return d(e,t)?(p=t.subpatterns.slice(0),"keydown"==e.type&&f(t),!0):void 0}),d(e,p[0])&&(1===p.length&&"keydown"==e.type&&f(p[0]),p.shift()))}),m.add=function(t,i,o,s){var c;return c=o,"string"==typeof o?o=function(){a.execCommand(c,!1,null)}:e.isArray(c)&&(o=function(){a.execCommand(c[0],c[1],c[2])}),n(r(e.trim(t.toLowerCase())),function(e){var t=l(e,i,o,s);g[t.id]=t}),!0},m.remove=function(e){var t=l(e);return!!g[t.id]&&(delete g[t.id],!0)}}}),r(je,[c,p,z],function(e,t,n){return function(r,i){function o(e){var t,n;return n={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"},t=n[e.blob().type.toLowerCase()]||"dat",e.filename()+"."+t}function a(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t}function s(e){return{id:e.id,blob:e.blob,base64:e.base64,filename:n.constant(o(e))}}function l(e,t,n,r){var o,s;o=new XMLHttpRequest,o.open("POST",i.url),o.withCredentials=i.credentials,o.upload.onprogress=function(e){r(e.loaded/e.total*100)},o.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e;return 200!=o.status?void n("HTTP Error: "+o.status):(e=JSON.parse(o.responseText),e&&"string"==typeof e.location?void t(a(i.basePath,e.location)):void n("Invalid JSON: "+o.responseText))},s=new FormData,s.append("file",e.blob(),e.filename()),o.send(s)}function c(){return new e(function(e){e([])})}function u(e,t){return{url:t,blobInfo:e,status:!0}}function d(e,t){return{url:"",blobInfo:e,status:!1,error:t}}function f(e,n){t.each(y[e],function(e){e(n)}),delete y[e]}function m(t,n,i){return r.markPending(t.blobUri()),new e(function(e){var o,a,l=function(){};try{var c=function(){o&&(o.close(),a=l)},m=function(n){c(),r.markUploaded(t.blobUri(),n),f(t.blobUri(),u(t,n)),e(u(t,n))},g=function(n){c(),r.removeFailed(t.blobUri()),f(t.blobUri(),d(t,n)),e(d(t,n))};a=function(e){0>e||e>100||(o||(o=i()),o.progressBar.value(e))},n(s(t),m,g,a)}catch(p){e(d(t,p.message))}})}function g(e){return e===l}function p(t){var n=t.blobUri();return new e(function(e){y[n]=y[n]||[],y[n].push(e)})}function h(n,o){return n=t.grep(n,function(e){return!r.isUploaded(e.blobUri())}),e.all(t.map(n,function(e){return r.isPending(e.blobUri())?p(e):m(e,i.handler,o)}))}function v(e,t){return!i.url&&g(i.handler)?c():h(e,t)}var y={};return i=t.extend({credentials:!1,handler:l},i),{upload:v}}}),r(Ve,[c],function(e){function t(t){return new e(function(e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200==this.status&&e(this.response)},n.send()})}function n(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}}function r(t){return new e(function(e){var r,i,o;t=n(t);try{r=atob(t.data)}catch(a){return void e(new Blob([]))}for(i=new Uint8Array(r.length),o=0;o<i.length;o++)i[o]=r.charCodeAt(o);e(new Blob([i],{type:t.type}))})}function i(e){return 0===e.indexOf("blob:")?t(e):0===e.indexOf("data:")?r(e):null}function o(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}return{uriToBlob:i,blobToDataUri:o,parseDataUri:n}}),r(qe,[c,g,z,Ve,d],function(e,t,n,r,i){var o=0,a=function(e){return(e||"blobid")+o++};return function(o,s){function l(l,u){function d(e,t){var n,i;return 0===e.src.indexOf("blob:")?(i=s.getByUri(e.src),void(i?t({image:e,blobInfo:i}):r.uriToBlob(e.src).then(function(o){r.blobToDataUri(o).then(function(l){n=r.parseDataUri(l).data,i=s.create(a(),o,n),s.add(i),t({image:e,blobInfo:i})})}))):(n=r.parseDataUri(e.src).data,i=s.findFirst(function(e){return e.base64()===n}),void(i?t({image:e,blobInfo:i}):r.uriToBlob(e.src).then(function(r){i=s.create(a(),r,n),s.add(i),t({image:e,blobInfo:i})})))}var f,m;return u||(u=n.constant(!0)),f=t.filter(l.getElementsByTagName("img"),function(e){var t=e.src;return!(!i.fileApi||e.hasAttribute("data-mce-bogus")||e.hasAttribute("data-mce-placeholder")||!t||t==i.transparentSrc||(0===t.indexOf("blob:")?o.isUploaded(t):0!==t.indexOf("data:")||!u(e)))}),m=t.map(f,function(t){var n;return c[t.src]?new e(function(e){c[t.src].then(function(n){e({image:t,blobInfo:n.blobInfo})})}):(n=new e(function(e){d(t,e)}).then(function(e){return delete c[e.image.src],e})["catch"](function(e){return delete c[t.src],e}),c[t.src]=n,n)}),e.all(m)}var c={};return{findAll:l}}}),r(Ye,[g,z],function(e,t){return function(){function n(e,t,n,r){return{id:u(e),filename:u(r||e),blob:u(t),base64:u(n),blobUri:u(URL.createObjectURL(t))}}function r(e){i(e.id())||c.push(e)}function i(e){return o(function(t){return t.id()===e})}function o(t){return e.filter(c,t)[0]}function a(e){return o(function(t){return t.blobUri()==e})}function s(t){c=e.filter(c,function(e){return e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)})}function l(){e.each(c,function(e){URL.revokeObjectURL(e.blobUri())}),c=[]}var c=[],u=t.constant;return{create:n,add:r,get:i,getByUri:a,findFirst:o,removeByUri:s,destroy:l}}}),r(Ke,[],function(){return function(){function e(e,t){return{status:e,resultUri:t}}function t(e){return e in d}function n(e){var t=d[e];return t?t.resultUri:null}function r(e){return!!t(e)&&d[e].status===c}function i(e){return!!t(e)&&d[e].status===u}function o(t){d[t]=e(c,null)}function a(t,n){d[t]=e(u,n)}function s(e){delete d[e]}function l(){d={}}var c=1,u=2,d={};return{hasBlobUri:t,getResultUri:n,isPending:r,isUploaded:i,markPending:o,markUploaded:a,removeFailed:s,destroy:l}}}),r(Xe,[N],function(e){var t=e.PluginManager,n=function(e,n){for(var r in t.urls){var i=t.urls[r]+"/plugin"+n+".js";if(i===e)return r}return null},r=function(e,t){var r=n(t,e.suffix);return r?"Failed to load plugin: "+r+" from url "+t:"Failed to load plugin url: "+t},i=function(e,t){e.notificationManager.open({type:"error",text:t})},o=function(e,t){e._skinLoaded?i(e,t):e.on("SkinLoaded",function(){i(e,t)})},a=function(e,t){o(e,"Failed to upload image: "+t)},s=function(e,t){o(e,r(e,t))};return{pluginLoadError:s,uploadError:a}}),r(Ge,[g,je,qe,Ye,Ke,Xe],function(e,t,n,r,i,o){return function(a){function s(e){return function(t){return a.selection?e(t):[]}}function l(){return"?"+(new Date).getTime();

}function c(e,t,n){var r=0;do r=e.indexOf(t,r),-1!==r&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1);while(-1!==r);return e}function u(e,t,n){return e=c(e,'src="'+t+'"','src="'+n+'"'),e=c(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')}function d(t,n){e.each(a.undoManager.data,function(r){"fragmented"===r.type?r.fragments=e.map(r.fragments,function(e){return u(e,t,n)}):r.content=u(r.content,t,n)})}function f(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}function m(e,t){x.removeByUri(e.src),d(e.src,t),a.$(e).attr({src:k.images_reuse_filename?t+l():t,"data-mce-src":a.convertURL(t,"src")})}function g(n){return w||(w=new t(N,{url:k.images_upload_url,basePath:k.images_upload_base_path,credentials:k.images_upload_credentials,handler:k.images_upload_handler})),v().then(s(function(t){var r;return r=e.map(t,function(e){return e.blobInfo}),w.upload(r,f).then(s(function(r){return r=e.map(r,function(e,n){var r=t[n].image;return e.status&&a.settings.images_replace_blob_uris!==!1?m(r,e.url):e.error&&o.uploadError(a,e.error),{element:r,status:e.status}}),n&&n(r),r}))}))}function p(e){return k.automatic_uploads!==!1?g(e):void 0}function h(e){return!k.images_dataimg_filter||k.images_dataimg_filter(e)}function v(){return C||(C=new n(N,x)),C.findAll(a.getBody(),h).then(s(function(t){return e.each(t,function(e){d(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))}function y(){x.destroy(),N.destroy(),C=w=null}function b(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var r=N.getResultUri(n);if(r)return'src="'+r+'"';var i=x.getByUri(n);return i||(i=e.reduce(a.editorManager.editors,function(e,t){return e||t.editorUpload.blobCache.getByUri(n)},null)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t})}var x=new r,w,C,k=a.settings,N=new i;return a.on("setContent",function(){a.settings.automatic_uploads!==!1?p():v()}),a.on("RawSaveContent",function(e){e.content=b(e.content)}),a.on("getContent",function(e){e.source_view||"raw"==e.format||(e.content=b(e.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(t){e.each(t,function(e){var t=e.attr("src");if(!x.getByUri(t)){var n=N.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:x,uploadImages:g,uploadImagesAuto:p,scanForImages:v,destroy:y}}}),r(Je,[T,j,S,E,h,W,u],function(e,t,n,r,i,o,a){var s=n.isContentEditableFalse;return function(t,n){function r(e,n){var r=o.collapse(e.getBoundingClientRect(),n),i,a,s,l,c;return"BODY"==t.tagName?(i=t.ownerDocument.documentElement,a=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop):(c=t.getBoundingClientRect(),a=t.scrollLeft-c.left,s=t.scrollTop-c.top),r.left+=a,r.right+=a,r.top+=s,r.bottom+=s,r.width=1,l=e.offsetWidth-e.clientWidth,l>0&&(n&&(l*=-1),r.left+=l,r.right+=l),r}function l(){var n,r,o,a,s;for(n=i("*[contentEditable=false]",t),a=0;a<n.length;a++)r=n[a],o=r.previousSibling,e.endsWithCaretContainer(o)&&(s=o.data,1==s.length?o.parentNode.removeChild(o):o.deleteData(s.length-1,1)),o=r.nextSibling,e.startsWithCaretContainer(o)&&(s=o.data,1==s.length?o.parentNode.removeChild(o):o.deleteData(0,1));return null}function c(o,a){var l,c;return u(),n(a)?(h=e.insertBlock("p",a,o),l=r(a,o),i(h).css("top",l.top),p=i('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(l).appendTo(t),o&&p.addClass("mce-visual-caret-before"),d(),c=a.ownerDocument.createRange(),c.setStart(h,0),c.setEnd(h,0),c):(h=e.insertInline(a,o),c=a.ownerDocument.createRange(),s(h.nextSibling)?(c.setStart(h,0),c.setEnd(h,0)):(c.setStart(h,1),c.setEnd(h,1)),c)}function u(){l(),h&&(e.remove(h),h=null),p&&(p.remove(),p=null),clearInterval(g)}function d(){g=a.setInterval(function(){i("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden")},500)}function f(){a.clearInterval(g)}function m(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"}var g,p,h;return{show:c,hide:u,getCss:m,destroy:f}}}),r(Ze,[g,S,W],function(e,t,n){function r(i){function o(t){return e.map(t,function(e){return e=n.clone(e),e.node=i,e})}if(e.isArray(i))return e.reduce(i,function(e,t){return e.concat(r(t))},[]);if(t.isElement(i))return o(i.getClientRects());if(t.isText(i)){var a=i.ownerDocument.createRange();return a.setStart(i,0),a.setEnd(i,i.data.length),o(a.getClientRects())}}return{getClientRects:r}}),r(Qe,[z,g,Ze,U,ie,oe,j,W],function(e,t,n,r,i,o,a,s){function l(e,t,n,o){for(;o=i.findNode(o,e,r.isEditableCaretCandidate,t);)if(n(o))return}function c(e,r,i,o,a,s){function c(o){var s,l,c;for(c=n.getClientRects(o),-1==e&&(c=c.reverse()),s=0;s<c.length;s++)if(l=c[s],!i(l,m)){if(f.length>0&&r(l,t.last(f))&&u++,l.line=u,a(l))return!0;f.push(l)}}var u=0,d,f=[],m;return(m=t.last(s.getClientRects()))?(d=s.getNode(),c(d),l(e,o,c,d),f):f}function u(e,t){return t.line>e}function d(e,t){return t.line===e}function f(e,n,r,i){function l(n){return t.last(1==e?n.getClientRects():n.getClientRects())}var c=new o(n),u,d,f,m,g=[],p=0,h,v;1==e?(u=c.next,d=s.isBelow,f=s.isAbove,m=a.after(i)):(u=c.prev,d=s.isAbove,f=s.isBelow,m=a.before(i)),v=l(m);do if(m.isVisible()&&(h=l(m),!f(h,v))){if(g.length>0&&d(h,t.last(g))&&p++,h=s.clone(h),h.position=m,h.line=p,r(h))return g;g.push(h)}while(m=u(m));return g}var m=e.curry,g=m(c,-1,s.isAbove,s.isBelow),p=m(c,1,s.isBelow,s.isAbove);return{upUntil:g,downUntil:p,positionsUntil:f,isAboveLine:m(u),isLine:m(d)}}),r(et,[z,g,S,Ze,W,ie,U],function(e,t,n,r,i,o,a){function s(e,t){return Math.abs(e.left-t)}function l(e,t){return Math.abs(e.right-t)}function c(e,n){function r(e,t){return e>=t.left&&e<=t.right}return t.reduce(e,function(e,t){var i,o;return i=Math.min(s(e,n),l(e,n)),o=Math.min(s(t,n),l(t,n)),r(n,t)?t:r(n,e)?e:o==i&&p(t.node)?t:i>o?t:e})}function u(e,t,n,r){for(;r=h(r,e,a.isEditableCaretCandidate,t);)if(n(r))return}function d(e,n){function o(e,i){var o;return o=t.filter(r.getClientRects(i),function(t){return!e(t,n)}),a=a.concat(o),0===o.length}var a=[];return a.push(n),u(-1,e,v(o,i.isAbove),n.node),u(1,e,v(o,i.isBelow),n.node),a}function f(e){return t.filter(t.toArray(e.getElementsByTagName("*")),p)}function m(e,t){return{node:e.node,before:s(e,t)<l(e,t)}}function g(e,n,i){var o,a;return o=r.getClientRects(f(e)),o=t.filter(o,function(e){return i>=e.top&&i<=e.bottom}),a=c(o,n),a&&(a=c(d(e,a),n),a&&p(a.node))?m(a,n):null}var p=n.isContentEditableFalse,h=o.findNode,v=e.curry;return{findClosestClientRect:c,findLineNodeRects:d,closestCaret:g}}),r(tt,[],function(){var e=function(e){var t,n,r,i;return i=e.getBoundingClientRect(),t=e.ownerDocument,n=t.documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}},t=function(t){return t.inline?e(t.getBody()):{left:0,top:0}},n=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},r=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i},i=function(t,n){if(n.target.ownerDocument!==t.getDoc()){var i=e(t.getContentAreaContainer()),o=r(t);return{left:n.pageX-i.left+o.left,top:n.pageY-i.top+o.top}}return{left:n.pageX,top:n.pageY}},o=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},a=function(e,r){return o(t(e),n(e),i(e,r))};return{calc:a}}),r(nt,[S,g,z,u,C,tt],function(e,t,n,r,i,o){var a=e.isContentEditableFalse,s=e.isContentEditableTrue,l=function(e,t){return a(t)&&t!==e},c=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!a(t)},u=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},d=function(e,t,n,r){var i=t.cloneNode(!0);e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null);var o=e.dom.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o},f=function(e,t){e.parentNode!==t&&t.appendChild(e)},m=function(e,t,n,r,i,o){var a=0,s=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>i&&(a=t.pageX+n-i),t.pageY+r>o&&(s=t.pageY+r-o),e.style.width=n-a+"px",e.style.height=r-s+"px"},g=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},p=function(e){return 0===e.button},h=function(e){return e.element},v=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},y=function(e,r){return function(i){if(p(i)){var o=t.find(r.dom.getParents(i.target),n.or(a,s));if(l(r.getBody(),o)){var c=r.dom.getPos(o),u=r.getBody(),f=r.getDoc().documentElement;e.element=o,e.screenX=i.screenX,e.screenY=i.screenY,e.maxX=(r.inline?u.scrollWidth:f.offsetWidth)-2,e.maxY=(r.inline?u.scrollHeight:f.offsetHeight)-2,e.relX=i.pageX-c.x,e.relY=i.pageY-c.y,e.width=o.offsetWidth,e.height=o.offsetHeight,e.ghost=d(r,o,e.width,e.height)}}}},b=function(e,t){var n=r.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(r){var i=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(h(e)&&!e.dragging&&i>10){var a=t.fire("dragstart",{target:e.element});if(a.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var s=v(e,o.calc(t,r));f(e.ghost,t.getBody()),m(e.ghost,s,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}},x=function(e){var t=e.getSel().getRangeAt(0),n=t.startContainer;return 3===n.nodeType?n.parentNode:n},w=function(e,t){return function(n){if(e.dragging&&c(t,x(t.selection),e.element)){var r=u(e.element),i=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});i.isDefaultPrevented()||(r=i.targetClone,t.undoManager.transact(function(){g(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}k(e)}},C=function(e,t){return function(){k(e),e.dragging&&t.fire("dragend")}},k=function(e){e.dragging=!1,e.element=null,g(e.ghost)},N=function(e){var t={},n,r,o,a,s,l;n=i.DOM,l=document,r=y(t,e),o=b(t,e),a=w(t,e),s=C(t,e),e.on("mousedown",r),e.on("mousemove",o),e.on("mouseup",a),n.bind(l,"mousemove",o),n.bind(l,"mouseup",s),e.on("remove",function(){n.unbind(l,"mousemove",o),n.unbind(l,"mouseup",s)})},S=function(e){e.on("drop",function(t){var n="undefined"!=typeof t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(a(n)||a(e.dom.getContentEditableParent(n)))&&t.preventDefault()})},_=function(e){N(e),S(e)};return{init:_}}),r(rt,[d,oe,j,T,ie,Je,Qe,et,S,E,W,H,z,g,u,nt],function(e,t,n,r,i,o,a,s,l,c,u,d,f,m,g,p){function h(e,t){for(;t=e(t);)if(t.isVisible())return t;return t}function v(c){function v(e){return c.dom.hasClass(e,"mce-offscreen-selection")}function S(){var e=c.dom.get(le);return e?e.getElementsByTagName("*")[0]:e}function _(e){return c.dom.isBlock(e)}function T(e){e&&c.selection.setRng(e)}function E(){return c.selection.getRng()}function R(e,t){c.selection.scrollIntoView(e,t)}function A(e,t,n){var r;return r=c.fire("ShowCaret",{target:t,direction:e,before:n}),r.isDefaultPrevented()?null:(R(t,-1===e),se.show(n,t))}function B(e){var t;return t=c.fire("BeforeObjectSelected",{target:e}),t.isDefaultPrevented()?null:P(e)}function P(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}function M(e,t){var n=i.isInSameBlock(e,t);return!(n||!l.isBr(e.getNode()))||n}function D(e,t){return t=i.normalizeRange(e,re,t),-1==e?n.fromRangeStart(t):n.fromRangeEnd(t)}function I(e){return r.isCaretContainerBlock(e.startContainer)}function L(e,t,n,r){var i,o,a,s;return!r.collapsed&&(i=N(r),x(i))?A(e,i,-1==e):(s=I(r),o=D(e,r),n(o)?B(o.getNode(-1==e)):(o=t(o))?n(o)?A(e,o.getNode(-1==e),1==e):(a=t(o),n(a)&&M(o,a)?A(e,a.getNode(-1==e),1==e):s?j(o.toRange()):null):s?r:null)}function O(e,t,n){var r,i,o,l,c,u,d,f,g;if(g=N(n),r=D(e,n),i=t(re,a.isAboveLine(1),r),o=m.filter(i,a.isLine(1)),c=m.last(r.getClientRects()),k(r)&&(g=r.getNode()),C(r)&&(g=r.getNode(!0)),!c)return null;if(u=c.left,l=s.findClosestClientRect(o,u),l&&x(l.node))return d=Math.abs(u-l.left),f=Math.abs(u-l.right),A(e,l.node,f>d);if(g){var p=a.positionsUntil(e,re,a.isAboveLine(1),g);if(l=s.findClosestClientRect(m.filter(p,a.isLine(1)),u))return j(l.position.toRange());if(l=m.last(m.filter(p,a.isLine(0))))return j(l.position.toRange())}}function H(t,r){function i(){var t=c.dom.create(c.settings.forced_root_block);return(!e.ie||e.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t}var o,a,s;if(r.collapsed&&c.settings.forced_root_block){if(o=c.dom.getParent(r.startContainer,"PRE"),!o)return;a=1==t?oe(n.fromRangeStart(r)):ae(n.fromRangeStart(r)),a||(s=i(),1==t?c.$(o).after(s):c.$(o).before(s),c.selection.select(s,!0),c.selection.collapse())}}function F(e,t,n,r){var i;return(i=L(e,t,n,r))?i:(i=H(e,r),i?i:null)}function z(e,t,n){var r;return(r=O(e,t,n))?r:(r=H(e,n),r?r:null)}function U(){return ue("*[data-mce-caret]")[0]}function W(e){e.hasAttribute("data-mce-caret")&&(r.showCaretContainerBlock(e),T(E()),R(e[0]))}function $(e){var t,r;return e=i.normalizeRange(1,re,e),t=n.fromRangeStart(e),x(t.getNode())?A(1,t.getNode(),!t.isAtEnd()):x(t.getNode(!0))?A(1,t.getNode(!0),!1):(r=c.dom.getParent(t.getNode(),f.or(x,b)),x(r)?A(1,r,!1):null)}function j(e){var t;return e&&e.collapsed?(t=$(e),t?t:e):e}function V(e){var t,i,o,a;return x(e)?(x(e.previousSibling)&&(o=e.previousSibling),i=ae(n.before(e)),i||(t=oe(n.after(e))),t&&w(t.getNode())&&(a=t.getNode()),r.remove(e.previousSibling),r.remove(e.nextSibling),c.dom.remove(e),c.dom.isEmpty(c.getBody())?(c.setContent(""),void c.focus()):o?n.after(o).toRange():a?n.before(a).toRange():i?i.toRange():t?t.toRange():null):null}function q(e){var t=c.schema.getTextBlockElements();return e.nodeName in t}function Y(e){return c.dom.isEmpty(e)}function K(e,t,r){var i=c.dom,o,a,s,l;if(o=i.getParent(t.getNode(),i.isBlock),a=i.getParent(r.getNode(),i.isBlock),-1===e){if(l=r.getNode(!0),C(r)&&_(l))return q(o)?(Y(o)&&i.remove(o),n.after(l).toRange()):V(r.getNode(!0))}else if(l=t.getNode(),k(t)&&_(l))return q(a)?(Y(a)&&i.remove(a),n.before(l).toRange()):V(t.getNode());if(o===a||!q(o)||!q(a))return null;for(;s=o.firstChild;)a.appendChild(s);return c.dom.remove(o),r.toRange()}function X(e,t,n,i){var o,a,s,l;return!i.collapsed&&(o=N(i),x(o))?j(V(o)):(a=D(e,i),n(a)&&r.isCaretContainerBlock(i.startContainer)?(l=-1==e?ie.prev(a):ie.next(a),l?j(l.toRange()):i):t(a)?j(V(a.getNode(-1==e))):(s=-1==e?ie.prev(a):ie.next(a),t(s)?-1===e?K(e,a,s):K(e,s,a):void 0))}function G(){function i(e,t){var n=t(E());n&&!e.isDefaultPrevented()&&(e.preventDefault(),T(n))}function o(e){for(var t=c.getBody();e&&e!=t;){if(b(e)||x(e))return e;e=e.parentNode}return null}function l(e,t,n){return!n.collapsed&&m.reduce(n.getClientRects(),function(n,r){return n||u.containsXY(r,e,t)},!1)}function f(e){var t=!1;e.on("touchstart",function(){t=!1}),e.on("touchmove",function(){t=!0}),e.on("touchend",function(e){var n=o(e.target);x(n)&&(t||(e.preventDefault(),Q(B(n))))})}function h(){var e,t=o(c.selection.getNode());b(t)&&_(t)&&c.dom.isEmpty(t)&&(e=c.dom.create("br",{"data-mce-bogus":"1"}),c.$(t).empty().append(e),c.selection.setRng(n.before(e).toRange()))}function w(e){var t=U();return t?"compositionstart"==e.type?(e.preventDefault(),e.stopPropagation(),void W(t)):void(r.hasContent(t)&&W(t)):void 0}function N(e){var t;switch(e.keyCode){case d.DELETE:t=h();break;case d.BACKSPACE:t=h()}t&&e.preventDefault()}var R=y(F,1,oe,k),P=y(F,-1,ae,C),M=y(X,1,k,C),D=y(X,-1,C,k),I=y(z,-1,a.upUntil),L=y(z,1,a.downUntil);c.on("mouseup",function(){var e=E();e.collapsed&&T($(e))}),c.on("click",function(e){var t;t=o(e.target),t&&(x(t)&&(e.preventDefault(),c.focus()),b(t)&&c.dom.isChildOf(t,c.selection.getNode())&&ee())}),c.on("blur NewBlock",function(){ee(),ne()});var O=function(e){var r=new t(e);if(!e.firstChild)return!1;var i=n.before(e.firstChild),o=r.next(i);return o&&!k(o)&&!C(o)},H=function(e,t){var n=c.dom.getParent(e,c.dom.isBlock),r=c.dom.getParent(t,c.dom.isBlock);return n===r},q=function(e){return!(e.keyCode>=112&&e.keyCode<=123)},Y=function(e,t){var n=c.dom.getParent(e,c.dom.isBlock),r=c.dom.getParent(t,c.dom.isBlock);return n&&!H(n,r)&&O(n)};f(c),c.on("mousedown",function(e){var t;if(t=o(e.target))x(t)?(e.preventDefault(),Q(B(t))):l(e.clientX,e.clientY,c.selection.getRng())||c.selection.placeCaretAt(e.clientX,e.clientY);else{ee(),ne();var n=s.closestCaret(re,e.clientX,e.clientY);n&&(Y(e.target,n.node)||(e.preventDefault(),c.getBody().focus(),T(A(1,n.node,n.before))))}}),c.on("keydown",function(e){if(!d.modifierPressed(e))switch(e.keyCode){case d.RIGHT:i(e,R);break;case d.DOWN:i(e,L);break;case d.LEFT:i(e,P);break;case d.UP:i(e,I);break;case d.DELETE:i(e,M);break;case d.BACKSPACE:i(e,D);break;default:x(c.selection.getNode())&&q(e)&&e.preventDefault()}}),c.on("keyup compositionstart",function(e){w(e),N(e)},!0),c.on("cut",function(){var e=c.selection.getNode();x(e)&&g.setEditorTimeout(c,function(){T(j(V(e)))})}),c.on("getSelectionRange",function(e){var t=e.range;if(ce){if(!ce.parentNode)return void(ce=null);t=t.cloneRange(),t.selectNode(ce),e.range=t}}),c.on("setSelectionRange",function(e){var t;t=Q(e.range),t&&(e.range=t)}),c.on("AfterSetSelectionRange",function(e){var t=e.range;Z(t)||ne(),v(t.startContainer.parentNode)||ee()}),c.on("focus",function(){g.setEditorTimeout(c,function(){c.selection.setRng(j(c.selection.getRng()))},0)}),c.on("copy",function(t){var n=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!e.ie){var r=S();r&&(t.preventDefault(),n.clearData(),n.setData("text/html",r.outerHTML),n.setData("text/plain",r.outerText))}}),p.init(c)}function J(){var e=c.contentStyles,t=".mce-content-body";e.push(se.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")}function Z(e){return r.isCaretContainer(e.startContainer)||r.isCaretContainer(e.endContainer)}function Q(t){var n,r=c.$,i=c.dom,o,a,s,l,u,d,f,m,g;if(!t)return null;if(t.collapsed){if(!Z(t)){if(f=D(1,t),x(f.getNode()))return A(1,f.getNode(),!f.isAtEnd());if(x(f.getNode(!0)))return A(1,f.getNode(!0),!1)}return null}return s=t.startContainer,l=t.startOffset,u=t.endOffset,3==s.nodeType&&0==l&&x(s.parentNode)&&(s=s.parentNode,l=i.nodeIndex(s),s=s.parentNode),1!=s.nodeType?null:(u==l+1&&(n=s.childNodes[l]),x(n)?(m=g=n.cloneNode(!0),d=c.fire("ObjectSelected",{target:n,targetClone:m}),d.isDefaultPrevented()?null:(m=d.targetClone,o=r("#"+le),0===o.length&&(o=r('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",le),o.appendTo(c.getBody())),t=c.dom.createRng(),m===g&&e.ie?(o.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(m),t.setStartAfter(o[0].firstChild.firstChild),t.setEndAfter(m)):(o.empty().append("").append(m).append(""),t.setStart(o[0].firstChild,1),t.setEnd(o[0].lastChild,0)),o.css({top:i.getPos(n,c.getBody()).y}),o[0].focus(),a=c.selection.getSel(),a.removeAllRanges(),a.addRange(t),c.$("*[data-mce-selected]").removeAttr("data-mce-selected"),n.setAttribute("data-mce-selected",1),ce=n,ne(),t)):null)}function ee(){ce&&(ce.removeAttribute("data-mce-selected"),c.$("#"+le).remove(),ce=null)}function te(){se.destroy(),ce=null}function ne(){se.hide()}var re=c.getBody(),ie=new t(re),oe=y(h,ie.next),ae=y(h,ie.prev),se=new o(c.getBody(),_),le="sel-"+c.dom.uniqueId(),ce,ue=c.$;return e.ceFalse&&(G(),J()),{showBlockCaretContainer:W,hideFakeCaret:ne,destroy:te}}var y=f.curry,b=l.isContentEditableTrue,x=l.isContentEditableFalse,w=l.isElement,C=i.isAfterContentEditableFalse,k=i.isBeforeContentEditableFalse,N=c.getSelectedNode;return v}),r(it,[],function(){var e=0,t=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)},t=(new Date).getTime();return"s"+t.toString(36)+e()+e()+e()},n=function(n){return n+e++ +t()};return{uuid:n}}),r(ot,[],function(){var e=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r};return{add:e}}),r(at,[C,h,N,R,A,L,I,Y,J,te,ne,re,le,ce,k,f,Me,He,B,M,ze,d,p,u,Ue,We,$e,Ge,rt,it,ot,Xe],function(e,n,r,i,o,a,s,l,c,u,d,f,m,g,p,h,v,y,b,x,w,C,k,N,S,_,T,E,R,A,B,P){function M(e,t,i){var o=this,a,s,l;a=o.documentBaseUrl=i.documentBaseURL,s=i.baseURI,l=i.defaultSettings,t=O({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:o.convertURL,url_converter_scope:o,ie7_compat:!0},l,t),l&&l.external_plugins&&t.external_plugins&&(t.external_plugins=O({},l.external_plugins,t.external_plugins)),o.settings=t,r.language=t.language||"en",r.languageLoad=t.language_load,r.baseURL=i.baseURL,o.id=t.id=e,o.setDirty(!1),o.plugins={},o.documentBaseURI=new g(t.document_base_url||a,{base_uri:s}),o.baseURI=s,o.contentCSS=[],o.contentStyles=[],o.shortcuts=new T(o),o.loadedCSS={},o.editorCommands=new m(o),o.suffix=i.suffix,o.editorManager=i,o.inline=t.inline,o.settings.content_editable=o.inline,t.cache_suffix&&(C.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),t.override_viewport===!1&&(C.overrideViewPort=!1),i.fire("SetupEditor",o),o.execCallback("setup",o),o.$=n.overrideDefaults(function(){return{context:o.inline?o.getBody():o.getDoc(),element:o.getBody()}})}var D=e.DOM,I=r.ThemeManager,L=r.PluginManager,O=k.extend,H=k.each,F=k.explode,z=k.inArray,U=k.trim,W=k.resolve,$=h.Event,j=C.gecko,V=C.ie;return M.prototype={render:function(){function e(){D.unbind(window,"ready",e),n.render()}function t(){var e=p.ScriptLoader;if(r.language&&"en"!=r.language&&!r.language_url&&(r.language_url=n.editorManager.baseURL+"/langs/"+r.language+".js"),r.language_url&&e.add(r.language_url),r.theme&&"function"!=typeof r.theme&&"-"!=r.theme.charAt(0)&&!I.urls[r.theme]){var t=r.theme_url;t=t?n.documentBaseURI.toAbsolute(t):"themes/"+r.theme+"/theme"+o+".js",I.load(r.theme,t)}k.isArray(r.plugins)&&(r.plugins=r.plugins.join(" ")),H(r.external_plugins,function(e,t){L.load(t,e),r.plugins+=" "+t}),H(r.plugins.split(/[ ,]/),function(e){if(e=U(e),e&&!L.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=L.dependencies(e);H(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"};e=L.createUrl(t,e),L.load(e.resource,e)})}else L.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"})}),e.loadQueue(function(){n.removed||n.init()},n,function(e){P.pluginLoadError(n,e[0]),n.removed||n.init()})}var n=this,r=n.settings,i=n.id,o=n.suffix;if(!$.domLoaded)return void D.bind(window,"ready",e);if(n.getElement()&&C.contentEditable){r.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var a=n.getElement().form||D.getParent(i,"form");a&&(n.formElement=a,r.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(D.insertAfter(D.create("input",{type:"hidden",name:i}),i),n.hasHiddenInput=!0),n.formEventDelegate=function(e){n.fire(e.type,e)},D.bind(a,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!r.submit_patch||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return n.editorManager.triggerSave(),n.setDirty(!1),a._mceOldSubmit(a)})),n.windowManager=new v(n),n.notificationManager=new y(n),"xml"==r.encoding&&n.on("GetContent",function(e){e.save&&(e.content=D.encode(e.content))}),r.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),r.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),n.editorManager.add(n),t()}},init:function(){function e(n){var r=L.get(n),i,o;if(i=L.urls[n]||t.documentBaseUrl.replace(/\/$/,""),n=U(n),r&&-1===z(p,n)){if(H(L.dependencies(n),function(t){e(t)}),t.plugins[n])return;o=new r(t,i,t.$),t.plugins[n]=o,o.init&&(o.init(t,i),p.push(n))}}var t=this,n=t.settings,r=t.getElement(),i,o,a,s,l,c,u,d,f,m,g,p=[];if(t.rtl=n.rtl_ui||t.editorManager.i18n.rtl,t.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||D.getAttrib(r,"aria-label",t.getLang("aria.rich_text_area")),t.fire("ScriptsLoaded"),n.theme&&("function"!=typeof n.theme?(n.theme=n.theme.replace(/-/,""),c=I.get(n.theme),t.theme=new c(t,I.urls[n.theme]),t.theme.init&&t.theme.init(t,I.urls[n.theme]||t.documentBaseUrl.replace(/\/$/,""),t.$)):t.theme=n.theme),H(n.plugins.replace(/\-/g,"").split(/[ ,]/),e),n.render_ui&&t.theme&&(t.orgDisplay=r.style.display,"function"!=typeof n.theme?(i=n.width||r.style.width||r.offsetWidth,o=n.height||r.style.height||r.offsetHeight,a=n.min_height||100,m=/^[0-9\.]+(|px)$/i,m.test(""+i)&&(i=Math.max(parseInt(i,10),100)),m.test(""+o)&&(o=Math.max(parseInt(o,10),a)),l=t.theme.renderUI({targetNode:r,width:i,height:o,deltaWidth:n.delta_width,deltaHeight:n.delta_height}),n.content_editable||(o=(l.iframeHeight||o)+("number"==typeof o?l.deltaHeight||0:""),a>o&&(o=a))):(l=n.theme(t,r),l.editorContainer.nodeType&&(l.editorContainer.id=l.editorContainer.id||t.id+"_parent"),l.iframeContainer.nodeType&&(l.iframeContainer.id=l.iframeContainer.id||t.id+"_iframecontainer"),o=l.iframeHeight||r.offsetHeight),t.editorContainer=l.editorContainer),n.content_css&&H(F(n.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),n.content_style&&t.contentStyles.push(n.content_style),n.content_editable)return r=s=l=null,t.initContentBody();if(t.iframeHTML=n.doctype+"<html><head>",n.document_base_url!=t.documentBaseUrl&&(t.iframeHTML+='<base href="'+t.documentBaseURI.getURI()+'" />'),!C.caretAfter&&n.ie7_compat&&(t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),t.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',!/#$/.test(document.location.href))for(g=0;g<t.contentCSS.length;g++){var h=t.contentCSS[g];t.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+k._addCacheSuffix(h)+'" />',t.loadedCSS[h]=!0}d=n.body_id||"tinymce",-1!=d.indexOf("=")&&(d=t.getParam("body_id","","hash"),d=d[t.id]||d),f=n.body_class||"",-1!=f.indexOf("=")&&(f=t.getParam("body_class","","hash"),f=f[t.id]||""),n.content_security_policy&&(t.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+n.content_security_policy+'" />'),t.iframeHTML+='</head><body id="'+d+'" class="mce-content-body '+f+'" data-id="'+t.id+'"><br></body></html>';var v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&C.ie&&C.ie<12&&(u=v);var y=D.create("iframe",{id:t.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:t.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:o,display:"block"}});if(y.onload=function(){y.onload=null,t.fire("load")},D.setAttrib(y,"src",u||'javascript:""'),t.contentAreaContainer=l.iframeContainer,t.iframeElement=y,s=D.add(l.iframeContainer,y),V)try{t.getDoc()}catch(b){s.src=u=v}l.editorContainer&&(D.get(l.editorContainer).style.display=t.orgDisplay,t.hidden=D.isHidden(l.editorContainer)),t.getElement().style.display="none",D.setAttrib(t.id,"aria-hidden",!0),u||t.initContentBody(),r=s=l=null},initContentBody:function(t){var n=this,r=n.settings,s=n.getElement(),m=n.getDoc(),g,p;r.inline||(n.getElement().style.visibility=n.orgVisibility),t||r.content_editable||(m.open(),m.write(n.iframeHTML),m.close()),r.content_editable&&(n.on("remove",function(){var e=this.getBody();D.removeClass(e,"mce-content-body"),D.removeClass(e,"mce-edit-focus"),D.setAttrib(e,"contentEditable",null)}),D.addClass(s,"mce-content-body"),n.contentDocument=m=r.content_document||document,n.contentWindow=r.content_window||window,n.bodyElement=s,r.content_document=r.content_window=null,r.root_name=s.nodeName.toLowerCase()),g=n.getBody(),g.disabled=!0,n.readonly=r.readonly,n.readonly||(n.inline&&"static"==D.getStyle(g,"position",!0)&&(g.style.position="relative"),g.contentEditable=n.getParam("content_editable_state",!0)),g.disabled=!1,n.editorUpload=new E(n),n.schema=new b(r),n.dom=new e(m,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:!0,root_element:n.inline?n.getBody():null,collect:r.content_editable,schema:n.schema,onSetAttrib:function(e){n.fire("SetAttrib",e)}}),n.parser=new x(r,n.schema),n.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var r=e.length,i,o=n.dom,a,s;r--;)if(i=e[r],a=i.attr(t),s="data-mce-"+t,!i.attributes.map[s]){if(0===a.indexOf("data:")||0===a.indexOf("blob:"))continue;"style"===t?(a=o.serializeStyle(o.parseStyle(a),i.name),a.length||(a=null),i.attr(s,a),i.attr(t,a)):"tabindex"===t?(i.attr(s,a),i.attr(t,null)):i.attr(s,n.convertURL(a,t,i.name))}}),n.parser.addNodeFilter("script",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.attr("type")||"no/type",0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}),n.parser.addNodeFilter("#cdata",function(e){for(var t=e.length,n;t--;)n=e[t],n.type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"}),n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t=e.length,r,i=n.schema.getNonEmptyElements();t--;)r=e[t],r.isEmpty(i)&&0===r.getAll("br").length&&(r.append(new o("br",1)).shortEnded=!0)}),n.serializer=new a(r,n),n.selection=new l(n.dom,n.getWin(),n.serializer,n),n.formatter=new c(n),n.undoManager=new u(n),n.forceBlocks=new f(n),n.enterKey=new d(n),n._nodeChangeDispatcher=new i(n),n._selectionOverrides=new R(n),n.fire("PreInit"),r.browser_spellcheck||r.gecko_spellcheck||(m.body.spellcheck=!1,D.setAttrib(g,"spellcheck","false")),n.quirks=new w(n),n.fire("PostRender"),r.directionality&&(g.dir=r.directionality),r.nowrap&&(g.style.whiteSpace="nowrap"),r.protect&&n.on("BeforeSetContent",function(e){H(r.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),n.on("SetContent",function(){n.addVisual(n.getBody())}),r.padd_empty_editor&&n.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),n.load({initial:!0,format:"html"}),n.startContent=n.getContent({format:"raw"}),n.initialized=!0,n.bindPendingEventDelegates(),n.fire("init"),n.focus(!0),n.nodeChanged({initial:!0}),n.execCallback("init_instance_callback",n),n.on("compositionstart compositionend",function(e){n.composing="compositionstart"===e.type}),n.contentStyles.length>0&&(p="",H(n.contentStyles,function(e){p+=e+"\r\n"}),n.dom.addStyle(p)),H(n.contentCSS,function(e){n.loadedCSS[e]||(n.dom.loadCSS(e),n.loadedCSS[e]=!0)}),r.auto_focus&&N.setEditorTimeout(n,function(){var e;e=r.auto_focus===!0?n:n.editorManager.get(r.auto_focus),
e.destroyed||e.focus()},100),s=m=g=null},focus:function(e){function t(e){return n.dom.getParent(e,function(e){return"true"===n.dom.getContentEditable(e)})}var n=this,r=n.selection,i=n.settings.content_editable,o,a,s=n.getDoc(),l=n.getBody(),c;if(!e){if(o=r.getRng(),o.item&&(a=o.item(0)),n.quirks.refreshContentEditable(),c=t(r.getNode()),n.$.contains(l,c))return c.focus(),r.normalize(),void n.editorManager.setActive(n);if(i||(C.opera||n.getBody().focus(),n.getWin().focus()),j||i){if(l.setActive)try{l.setActive()}catch(u){l.focus()}else l.focus();i&&r.normalize()}a&&a.ownerDocument==s&&(o=s.body.createControlRange(),o.addElement(a),o.select())}n.editorManager.setActive(n)},execCallback:function(e){var t=this,n=t.settings[e],r;return n?(t.callbackLookup&&(r=t.callbackLookup[e])&&(n=r.func,r=r.scope),"string"==typeof n&&(r=n.replace(/\.\w+$/,""),r=r?W(r):0,n=W(n),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[e]={func:n,scope:r}),n.apply(r||t,Array.prototype.slice.call(arguments,1))):void 0},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?(e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"}),this.editorManager.translate(e)):""},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var r=e in this.settings?this.settings[e]:t,i;return"hash"===n?(i={},"string"==typeof r?H(r.split(r.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(e){e=e.split("="),e.length>1?i[U(e[0])]=U(e[1]):i[U(e[0])]=U(e)}):i=r,i):r},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return B.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addContextToolbar:function(e,t){var n=this,r;n.contextToolbars=n.contextToolbars||[],"string"==typeof e&&(r=e,e=function(e){return n.dom.is(e,r)}),n.contextToolbars.push({id:A.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(D.show(e.getContainer()),D.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(V&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(D.hide(e.getContainer()),D.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n=this,r=n.getElement(),i;return r?(e=e||{},e.load=!0,i=n.setContent(r.value!==t?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,i):void 0},save:function(e){var t=this,n=t.getElement(),r,i;return n&&t.initialized?(e=e||{},e.save=!0,e.element=n,r=e.content=t.getContent(e),e.no_events||t.fire("SaveContent",e),"raw"==e.format&&t.fire("RawSaveContent",e),r=e.content,/TEXTAREA|INPUT/i.test(n.nodeName)?n.value=r:(t.inline||(n.innerHTML=r),(i=D.getParent(t.id,"form"))&&H(i.elements,function(e){return e.name==t.id?(e.value=r,!1):void 0})),e.element=n=null,e.set_dirty!==!1&&t.setDirty(!1),r):void 0},setContent:function(e,t){var n=this,r=n.getBody(),i,o;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(o=V&&11>V?"":'<br data-mce-bogus="1">',"TABLE"==r.nodeName?e="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(r.nodeName)&&(e="<li>"+o+"</li>"),i=n.settings.forced_root_block,i&&n.schema.isValidChild(r.nodeName.toLowerCase(),i.toLowerCase())?(e=o,e=n.dom.createHTML(i,n.settings.forced_root_block_attrs,e)):V||e||(e='<br data-mce-bogus="1">'),n.dom.setHTML(r,e),n.fire("SetContent",t)):("raw"!==t.format&&(e=new s({validate:n.validate},n.schema).serialize(n.parser.parse(e,{isRootContent:!0}))),t.content=U(e),n.dom.setHTML(r,t.content),t.no_events||n.fire("SetContent",t)),t.content},getContent:function(e){var t=this,n,r=t.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),n="raw"==e.format?k.trim(t.serializer.getTrimmedContent()):"text"==e.format?r.innerText||r.textContent:t.serializer.serialize(r,e),"text"!=e.format?e.content=U(n):e.content=n,e.no_events||t.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=O({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!=t&&this.fire("dirty")},setMode:function(e){_.setMode(this,e)},getContainer:function(){var e=this;return e.container||(e.container=D.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=D.get(this.id)),this.targetElm},getWin:function(){var e=this,t;return e.contentWindow||(t=e.iframeElement,t&&(e.contentWindow=t.contentWindow)),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n=this,r=n.settings,i=n.dom,o;e=e||n.getBody(),n.hasVisual===t&&(n.hasVisual=r.visual),H(i.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return o=r.visual_table_class||"mce-item-table",t=i.getAttrib(e,"border"),void(t&&"0"!=t||!n.hasVisual?i.removeClass(e,o):i.addClass(e,o));case"A":return void(i.getAttrib(e,"href",!1)||(t=i.getAttrib(e,"name")||e.id,o=r.visual_anchor_class||"mce-item-anchor",t&&n.hasVisual?i.addClass(e,o):i.removeClass(e,o)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&D.remove(e.getElement().nextSibling),e.inline||(V&&10>V&&e.getDoc().execCommand("SelectAll",!1,null),D.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),D.remove(e.getContainer()),e._selectionOverrides.destroy(),e.editorUpload.destroy(),e.destroy())},destroy:function(e){var t=this,n;if(!t.destroyed){if(!e&&!t.removed)return void t.remove();e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy()),n=t.formElement,n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null),D.unbind(n,"submit reset",t.formEventDelegate)),t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1}},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},O(M.prototype,S),M}),r(st,[p],function(e){var t={},n="en";return{setCode:function(e){e&&(n=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return n},rtl:!1,add:function(e,n){var r=t[e];r||(t[e]=r={});for(var i in n)r[i]=n[i];this.setCode(e)},translate:function(r){function i(t){return e.is(t,"function")?Object.prototype.toString.call(t):o(t)?"":""+t}function o(t){return""===t||null===t||e.is(t,"undefined")}function a(t){return t=i(t),e.hasOwn(s,t)?i(s[t]):t}var s=t[n]||{};if(o(r))return"";if(e.is(r,"object")&&e.hasOwn(r,"raw"))return i(r.raw);if(e.is(r,"array")){var l=r.slice(1);r=a(r[0]).replace(/\{([0-9]+)\}/g,function(t,n){return e.hasOwn(l,n)?i(l[n]):t})}return a(r).replace(/{context:\w+}$/,"")},data:t}}),r(lt,[C,u,d],function(e,t,n){function r(e){function r(){try{return document.activeElement}catch(e){return document.body}}function c(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function u(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function d(d){var f=d.editor;f.on("init",function(){(f.inline||n.ie)&&("onbeforedeactivate"in document&&n.ie<9?f.dom.bind(f.getBody(),"beforedeactivate",function(e){if(e.target==f.getBody())try{f.lastRng=f.selection.getRng()}catch(t){}}):f.on("nodechange mouseup keyup",function(e){var t=r();"nodechange"==e.type&&e.selectionChange||(t&&t.id==f.id+"_ifr"&&(t=f.getBody()),f.dom.isChildOf(t,f.getBody())&&(f.lastRng=f.selection.getRng()))}),n.webkit&&!i&&(i=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(f.lastRng=n)}},s.bind(document,"selectionchange",i)))}),f.on("setcontent",function(){f.lastRng=null}),f.on("mousedown",function(){f.selection.lastFocusBookmark=null}),f.on("focusin",function(){var t=e.focusedEditor,n;f.selection.lastFocusBookmark&&(n=u(f,f.selection.lastFocusBookmark),f.selection.lastFocusBookmark=null,f.selection.setRng(n)),t!=f&&(t&&t.fire("blur",{focusedEditor:f}),e.setActive(f),e.focusedEditor=f,f.fire("focus",{blurredEditor:t}),f.focus(!0)),f.lastRng=null}),f.on("focusout",function(){t.setEditorTimeout(f,function(){var t=e.focusedEditor;l(f,r())||t!=f||(f.fire("blur",{focusedEditor:null}),e.focusedEditor=null,f.selection&&(f.selection.lastFocusBookmark=null))})}),o||(o=function(t){var n=e.activeEditor,r;r=t.target,n&&r.ownerDocument==document&&(n.selection&&r!=n.getBody()&&(n.selection.lastFocusBookmark=c(n.dom,n.lastRng)),r==document.body||l(n,r)||e.focusedEditor!=n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},s.bind(document,"focusin",o)),f.inline&&!a&&(a=function(t){var n=e.activeEditor,r=n.dom;if(n.inline&&r&&!r.isChildOf(t.target,n.getBody())){var i=n.selection.getRng();i.collapsed||(n.lastRng=i)}},s.bind(document,"mouseup",a))}function f(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(s.unbind(document,"selectionchange",i),s.unbind(document,"focusin",o),s.unbind(document,"mouseup",a),i=o=a=null)}e.on("AddEditor",d),e.on("RemoveEditor",f)}var i,o,a,s=e.DOM,l=function(e,t){var n=e?e.settings.custom_ui_selector:"",i=s.getParent(t,function(t){return r.isEditorUIElement(t)||!!n&&e.dom.is(t,n)});return null!==i};return r.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},r._isUIElement=l,r}),r(ct,[at,h,C,ce,d,p,c,me,st,lt,N],function(e,t,n,r,i,o,a,s,l,c,u){function d(e){v(w.editors,function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})}function f(e,n){n!==C&&(n?t(window).on("resize scroll",d):t(window).off("resize scroll",d),C=n)}function m(e){var t=w.editors,n;delete t[e.id];for(var r=0;r<t.length;r++)if(t[r]==e){t.splice(r,1),n=!0;break}return w.activeEditor==e&&(w.activeEditor=t[0]),w.focusedEditor==e&&(w.focusedEditor=null),n}function g(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(m(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e}var p=n.DOM,h=o.explode,v=o.each,y=o.extend,b=0,x,w,C=!1;return w={$:t,majorVersion:"4",minorVersion:"5.4",releaseDate:"2017-02-23",editors:[],i18n:l,activeEditor:null,setup:function(){var e=this,t,n,i="",o,a;if(n=r.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),o=window.tinymce||window.tinyMCEPreInit)t=o.base||o.baseURL,i=o.suffix;else{for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){a=s[l].src;var u=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){-1!=u.indexOf(".min")&&(i=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}!t&&document.currentScript&&(a=document.currentScript.src,-1!=a.indexOf(".min")&&(i=".min"),t=a.substring(0,a.lastIndexOf("/")))}e.baseURL=new r(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new r(e.baseURL),e.suffix=i,e.focusManager=new c(e)},overrideDefaults:function(e){var t,n;t=e.base_url,t&&(this.baseURL=new r(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new r(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var i=e.plugin_base_urls;for(var o in i)u.PluginManager.urls[o]=i[o]},init:function(n){function r(e,t){return e.inline&&t.tagName.toLowerCase()in x}function i(e,t){window.console&&!window.test&&window.console.log(e,t)}function s(e){var t=e.id;return t||(t=e.name,t=t&&!p.get(t)?e.name:p.uniqueId(),e.setAttribute("id",t)),t}function l(e){var t=n[e];return t?t.apply(f,Array.prototype.slice.call(arguments,2)):void 0}function c(e,t){return t.constructor===RegExp?t.test(e.className):p.hasClass(e,t)}function u(e){var t,n=[];if(e.types)return v(e.types,function(e){n=n.concat(p.select(e.selector))}),n;if(e.selector)return p.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":t=e.elements||"",t.length>0&&v(h(t),function(e){var t;(t=p.get(e))?n.push(t):v(document.forms,function(t){v(t.elements,function(t){t.name===e&&(e="mce_editor_"+b++,p.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":v(p.select("textarea"),function(t){e.editor_deselector&&c(t,e.editor_deselector)||e.editor_selector&&!c(t,e.editor_selector)||n.push(t)})}return n}function d(){function a(t,n,r){var i=new e(t,n,f);m.push(i),i.on("init",function(){++c===h.length&&w(m)}),i.targetElm=i.targetElm||r,i.render()}var c=0,m=[],h;return p.unbind(window,"ready",d),l("onpageload"),h=t.unique(u(n)),n.types?void v(n.types,function(e){o.each(h,function(t){return!p.is(t,e.selector)||(a(s(t),y({},n,e),t),!1)})}):(o.each(h,function(e){g(f.get(e.id))}),h=o.grep(h,function(e){return!f.get(e.id)}),void v(h,function(e){r(n,e)?i("Could not initialize inline editor on invalid inline target element",e):a(s(e),n,e)}))}var f=this,m,x;x=o.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var w=function(e){m=e};return f.settings=n,p.bind(window,"ready",d),new a(function(e){m?e(m):w=function(t){e(t)}})},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),f(n,!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),x||(x=function(){t.fire("BeforeUnload")},p.bind(window,"beforeunload",x)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t=this,n,r=t.editors,i;if(e)return"string"==typeof e?(e=e.selector||e,void v(p.select(e),function(e){i=r[e.id],i&&t.remove(i)})):(i=e,r[i.id]?(m(i)&&t.fire("RemoveEditor",{editor:i}),r.length||p.unbind(window,"beforeunload",x),i.remove(),f(r,r.length>0),i):null);for(n=r.length-1;n>=0;n--)t.remove(r[n])},execCommand:function(t,n,r){var i=this,o=i.get(r);switch(t){case"mceAddEditor":return i.get(r)||new e(r,i.settings,i).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(i.execCommand("mceAddEditor",0,r),!0)}return!!i.activeEditor&&i.activeEditor.execCommand(t,n,r)},triggerSave:function(){v(this.editors,function(e){e.save()})},addI18n:function(e,t){l.add(e,t)},translate:function(e){return l.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},y(w,s),w.setup(),window.tinymce=window.tinyMCE=w,w}),r(ut,[ct,p],function(e,t){var n=t.each,r=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&s.setStyle(e,n,t)}),s.rename(e,"span")}function i(e){s=t.dom,l.convert_fonts_to_spans&&n(s.select("font,u,strike",e.node),function(e){o[e.nodeName.toLowerCase()](s,e)})}var o,a,s,l=t.settings;l.inline_styles&&(a=r(l.font_size_legacy_values),o={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(n,r){"html4"===t.settings.schema&&e(r,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",i))})})}),r(dt,[me,p],function(e,t){var n={send:function(e){function r(){!e.async||4==i.readyState||o++>1e4?(e.success&&1e4>o&&200==i.status?e.success.call(e.success_scope,""+i.responseText,i,e):e.error&&e.error.call(e.error_scope,o>1e4?"TIMED_OUT":"GENERAL",i,e),i=null):setTimeout(r,10)}var i,o=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async!==!1,e.data=e.data||"",n.fire("beforeInitialize",{settings:e}),i=new XMLHttpRequest){if(i.overrideMimeType&&i.overrideMimeType(e.content_type),i.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(i.withCredentials=!0),e.content_type&&i.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&t.each(e.requestheaders,function(e){i.setRequestHeader(e.key,e.value)}),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i=n.fire("beforeSend",{xhr:i,settings:e}).xhr,i.send(e.data),!e.async)return r();setTimeout(r,10)}}};return t.extend(n,e),n}),r(ft,[],function(){function e(t,n){var r,i,o,a;if(n=n||'"',null===t)return"null";if(o=typeof t,"string"==o)return i="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=i.indexOf(t),r+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==o){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,i="[";r<t.length;r++)i+=(r>0?",":"")+e(t[r],n);return i+"]"}i="{";for(a in t)t.hasOwnProperty(a)&&(i+="function"!=typeof t[a]?(i.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return i+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),r(mt,[ft,dt,p],function(e,t,n){function r(e){this.settings=i({},e),this.count=0}var i=n.extend;return r.sendRPC=function(e){return(new r).send(e)},r.prototype={send:function(n){var r=n.error,o=n.success;n=i(this.settings,n),n.success=function(t,i){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?r.call(n.error_scope||n.scope,t.error,i):o.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},r}),r(gt,[C],function(e){return{callbacks:{},count:0,send:function(n){var r=this,i=e.DOM,o=n.count!==t?n.count:r.count,a="tinymce_jsonp_"+o;r.callbacks[o]=function(e){i.remove(a),delete r.callbacks[o],n.callback(e)},i.add(i.doc.body,"script",{id:a,src:n.url,type:"text/javascript"}),r.count++}}}),r(pt,[],function(){function e(){s=[];for(var e in a)s.push(e);i.length=s.length}function n(){function n(e){var n,r;return r=e!==t?u+e:i.indexOf(",",u),-1===r||r>i.length?null:(n=i.substring(u,r),u=r+1,n)}var r,i,s,u=0;if(a={},c){o.load(l),i=o.getAttribute(l)||"";do{var d=n();if(null===d)break;if(r=n(parseInt(d,32)||0),null!==r){if(d=n(),null===d)break;s=n(parseInt(d,32)||0),r&&(a[r]=s)}}while(null!==r);e()}}function r(){var t,n="";if(c){for(var r in a)t=a[r],n+=(n?",":"")+r.length.toString(32)+","+r+","+t.length.toString(32)+","+t;o.setAttribute(l,n);try{o.save(l)}catch(i){}e()}}var i,o,a,s,l,c;try{if(window.localStorage)return localStorage}catch(u){}return l="tinymce",o=document.documentElement,c=!!o.addBehavior,c&&o.addBehavior("#default#userData"),i={key:function(e){return s[e]},getItem:function(e){return e in a?a[e]:null},setItem:function(e,t){a[e]=""+t,r()},removeItem:function(e){delete a[e],r()},clear:function(){a={},r()}},n(),i}),r(ht,[C,f,k,N,p,d],function(e,t,n,r,i,o){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=r.PluginManager,a.ThemeManager=r.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,i.each("trim isArray is toArray makeMap each map grep inArray extend create walk createNS resolve explode _addCacheSuffix".split(" "),function(e){a[e]=i[e]}),i.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=o[e.substr(2).toLowerCase()]}),{}}),r(vt,[ue,p],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t=this,n=t.settings,r,i,o,a;r=n.firstControlClass,i=n.lastControlClass,e.each(function(e){e.classes.remove(r).remove(i).add(n.controlClass),e.visible()&&(o||(o=e),a=e)}),o&&o.classes.add(r),a&&a.classes.add(i)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}})}),r(yt,[vt],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),r(bt,[Ie],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this,n;t._super(e),e=t.settings,n=t.settings.size,t.on("click mousedown",function(e){e.preventDefault()}),t.on("touchstart",function(e){t.fire("click",e),e.preventDefault()}),e.subtype&&t.classes.add(e.subtype),n&&t.classes.add("btn-"+n),e.icon&&t.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e=this.getEl().firstChild,t;e&&(t=e.style,t.width=t.height="100%"),this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("icon"),i,o=e.state.get("text"),a="";return i=e.settings.image,i?(r="none","string"!=typeof i&&(i=window.getSelection?i[0]:i[1]),i=" style=\"background-image: url('"+i+"')\""):i="",o&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(o)+"</span>"),r=r?n+"ico "+n+"i-"+r:"",'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+a+"</button></div>"},bindStates:function(){function e(e){var i=n("span."+r,t.getEl());e?(i[0]||(n("button:first",t.getEl()).append('<span class="'+r+'"></span>'),i=n("span."+r,t.getEl())),i.html(t.encode(e))):i.remove(),t.classes.toggle("btn-has-text",!!e)}var t=this,n=t.$,r=t.classPrefix+"txt";return t.state.on("change:text",function(t){e(t.value)}),t.state.on("change:icon",function(n){var r=n.value,i=t.classPrefix;t.settings.icon=r,r=r?i+"ico "+i+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,a=o.getElementsByTagName("i")[0];r?(a&&a==o.firstChild||(a=document.createElement("i"),o.insertBefore(a,o.firstChild)),a.className=r):a&&o.removeChild(a),e(t.state.get("text"))}),t._super()}})}),r(xt,[Ne],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),r(wt,[Ie],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}var t=this;return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,r=t.classPrefix;if("undefined"==typeof n)return t.settings.icon;t.settings.icon=n,n=n?r+"ico "+r+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,o=i.getElementsByTagName("i")[0];n?(o&&o==i.firstChild||(o=document.createElement("i"),i.insertBefore(o,i.firstChild)),o.className=n):o&&i.removeChild(o)}),t.state.get("checked")&&e(!0),t._super()}})}),r(Ct,[Ie,Ce,ve,h,H,p],function(e,t,n,r,i,o){return e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var i=n.target,o=t.getEl();if(r.contains(o,i)||i==o)for(;i&&i!=o;)i.id&&-1!=i.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),i=i.parentNode}),t.on("keydown",function(e){var n;13==e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){return e.toJSON?(n=e,!1):void 0}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"==e.target.nodeName){var n=t.state.get("value"),r=e.target.value;r!==n&&(t.state.set("value",r),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var r=t.statusMessage()||"Ok",i=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"==i),n.classes.toggle("tooltip-nw","bc-tl"==i),n.classes.toggle("tooltip-ne","bc-tr"==i),n.moveRel(e.target,i)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e=this,n=e.settings,r;e.menu||(r=n.menu||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",e.menu=t.create(r).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()==e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){"INPUT"==t.target.tagName.toUpperCase()&&e.menu.hide()}),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,t=e.getEl(),i=e.getEl("open"),o=e.layoutRect(),a,s,l=0,c=t.firstChild;e.statusLevel()&&"none"!==e.statusLevel()&&(l=parseInt(n.getRuntimeStyle(c,"padding-right"),10)-parseInt(n.getRuntimeStyle(c,"padding-left"),10)),a=i?o.w-n.getSize(i).width-10:o.w-10;var u=document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(s=e.layoutRect().h-2+"px"),r(c).css({width:a-l,lineHeight:s}),e._super(),e},postRender:function(){var e=this;return r(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=e.state.get("value")||"",o,a,s="",l="",c="";return"spellcheck"in n&&(l+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(l+=' maxlength="'+n.maxLength+'"'),n.size&&(l+=' size="'+n.size+'"'),n.subtype&&(l+=' type="'+n.subtype+'"'),c='<i id="'+t+'-status" class="mce-status mce-ico" style="display: none"></i>',e.disabled()&&(l+=' disabled="disabled"'),o=n.icon,o&&"caret"!=o&&(o=r+"ico "+r+"i-"+n.icon),a=e.state.get("text"),(o||a)&&(s='<div id="'+t+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+t+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=o?'<i class="'+o+'"></i>':'<i class="'+r+'caret"></i>')+(a?(o?" ":"")+a:"")+"</button></div>",e.classes.add("has-open")),'<div id="'+t+'" class="'+e.classes+'"><input id="'+t+'-inp" class="'+r+'textbox" value="'+e.encode(i,!1)+'" hidefocus="1"'+l+' placeholder="'+e.encode(n.placeholder)+'" />'+c+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,n){var r=this;if(0===e.length)return void r.hideMenu();var i=function(e,t){return function(){r.fire("selectitem",{title:t,value:e})}};r.menu?r.menu.items().remove():r.menu=t.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(r).renderTo(),o.each(e,function(e){r.menu.add({text:e.title,url:e.previewUrl,match:n,classes:"menu-item-ellipsis",onclick:i(e.value,e.title)})}),r.menu.renderNew(),r.hideMenu(),r.menu.on("cancel",function(e){e.control.parent()===r.menu&&(e.stopPropagation(),r.focus(),r.hideMenu())}),r.menu.on("select",function(){r.focus()});var a=r.layoutRect().w;r.menu.layoutRect({w:a,minW:0,maxW:a}),r.menu.reflow(),r.menu.show(),r.menu.moveRel(r.getEl(),r.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!=t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var r=e.getEl("status"),i=e.classPrefix,o=t.value;n.css(r,"display","none"===o?"none":""),n.toggleClass(r,i+"i-checkmark","ok"===o),n.toggleClass(r,i+"i-warning","warn"===o),n.toggleClass(r,i+"i-error","error"===o),e.classes.toggle("has-status","none"!==o),e.repaint()}),n.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===i.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===i.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){r(this.getEl("inp")).off(),
this.menu&&this.menu.remove(),this._super()}})}),r(kt,[Ct],function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(r){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}})}),r(Nt,[bt,Ae],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var r=n.panel;r.type&&(r={layout:"grid",items:r}),r.role=r.role||"dialog",r.popover=!0,r.autohide=!0,r.ariaRoot=!0,e.panel=new t(r).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),r(St,[Nt,C],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),i=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(r){r.aria&&"down"==r.aria.key||r.control!=e||n.getParent(r.target,"."+e.classPrefix+"open")||(r.stopImmediatePropagation(),t.call(e,r))}),delete e.settings.onclick,e._super()}})}),r(_t,[],function(){function e(e){function i(e,i,o){var a,s,l,c,u,d;return a=0,s=0,l=0,e/=255,i/=255,o/=255,u=t(e,t(i,o)),d=n(e,n(i,o)),u==d?(l=u,{h:0,s:0,v:100*l}):(c=e==u?i-o:o==u?e-i:o-e,a=e==u?3:o==u?1:5,a=60*(a-c/(d-u)),s=(d-u)/d,l=d,{h:r(a),s:r(100*s),v:r(100*l)})}function o(e,i,o){var a,s,l,c;if(e=(parseInt(e,10)||0)%360,i=parseInt(i,10)/100,o=parseInt(o,10)/100,i=n(0,t(i,1)),o=n(0,t(o,1)),0===i)return void(d=f=m=r(255*o));switch(a=e/60,s=o*i,l=s*(1-Math.abs(a%2-1)),c=o-s,Math.floor(a)){case 0:d=s,f=l,m=0;break;case 1:d=l,f=s,m=0;break;case 2:d=0,f=s,m=l;break;case 3:d=0,f=l,m=s;break;case 4:d=l,f=0,m=s;break;case 5:d=s,f=0,m=l;break;default:d=f=m=0}d=r(255*(d+c)),f=r(255*(f+c)),m=r(255*(m+c))}function a(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(d)+e(f)+e(m)}function s(){return{r:d,g:f,b:m}}function l(){return i(d,f,m)}function c(e){var t;return"object"==typeof e?"r"in e?(d=e.r,f=e.g,m=e.b):"v"in e&&o(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(d=parseInt(t[1],10),f=parseInt(t[2],10),m=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(d=parseInt(t[1],16),f=parseInt(t[2],16),m=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(d=parseInt(t[1]+t[1],16),f=parseInt(t[2]+t[2],16),m=parseInt(t[3]+t[3],16)),d=0>d?0:d>255?255:d,f=0>f?0:f>255?255:f,m=0>m?0:m>255?255:m,u}var u=this,d=0,f=0,m=0;e&&c(e),u.toRgb=s,u.toHsv=l,u.toHex=a,u.parse=c}var t=Math.min,n=Math.max,r=Math.round;return e}),r(Tt,[Ie,Se,ve,_t],function(e,t,n,r){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var r=n.getPos(e),i,o;return i=t.pageX-r.x,o=t.pageY-r.y,i=Math.max(0,Math.min(i/e.clientWidth,1)),o=Math.max(0,Math.min(o/e.clientHeight,1)),{x:i,y:o}}function i(e,t){var i=(360-e.h)/360;n.css(d,{top:100*i+"%"}),t||n.css(m,{left:e.s+"%",top:100-e.v+"%"}),f.style.background=new r({s:100,v:100,h:e.h}).toHex(),s.color().parse({s:e.s,v:e.v,h:e.h})}function o(t){var n;n=e(f,t),c.s=100*n.x,c.v=100*(1-n.y),i(c),s.fire("change")}function a(t){var n;n=e(u,t),c=l.toHsv(),c.h=360*(1-n.y),i(c,!0),s.fire("change")}var s=this,l=s.color(),c,u,d,f,m;u=s.getEl("h"),d=s.getEl("hp"),f=s.getEl("sv"),m=s.getEl("svp"),s._repaint=function(){c=l.toHsv(),i(c)},s._super(),s._svdraghelper=new t(s._id+"-sv",{start:o,drag:o}),s._hdraghelper=new t(s._id+"-h",{start:a,drag:a}),s._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new r),this._color},renderHtml:function(){function e(){var e,t,n="",i,a;for(i="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",a=o.split(","),e=0,t=a.length-1;t>e;e++)n+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/t+"%;"+i+a[e]+",endColorstr="+a[e+1]+");-ms-"+i+a[e]+",endColorstr="+a[e+1]+')"></div>';return n}var t=this,n=t._id,r=t.classPrefix,i,o="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",a="background: -ms-linear-gradient(top,"+o+");background: linear-gradient(to bottom,"+o+");";return i='<div id="'+n+'-h" class="'+r+'colorpicker-h" style="'+a+'">'+e()+'<div id="'+n+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+t.classes+'"><div id="'+n+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+i+"</div>"}})}),r(Et,[Ie],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter=""),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n,r=e.target;(n=r.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t=this,n=e||[],r,i,o="",a=t.classPrefix;for(r=0,i=n.length;i>r;r++)o+=(r>0?'<div class="'+a+'divider" aria-hidden="true"> '+t.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(r==i-1?" "+a+"last":"")+'" data-index="'+r+'" tabindex="-1" id="'+t._id+"-"+r+'" aria-level="'+(r+1)+'">'+n[r].name+"</div>";return o||(o='<div class="'+a+'path-item"></div>'),o}})}),r(Rt,[Et],function(e){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var t=this,n=t.settings.editor;return n.settings.elementpath!==!1&&(t.on("select",function(e){n.focus(),n.selection.select(this.row()[e.index].element),n.nodeChanged()}),n.on("nodeChange",function(r){for(var i=[],o=r.parents,a=o.length;a--;)if(1==o[a].nodeType&&!e(o[a])){var s=n.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(s.isDefaultPrevented()||i.push({name:s.name,element:o[a]}),s.isPropagationStopped())break}t.row(i)})),t._super()}})}),r(At,[Ne],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),r(Bt,[Ne,At,p],function(e,t,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,r=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),r.each(function(r){var i,o=r.settings.label;o&&(i=new t(n.extend({items:{type:"label",id:r._id+"-l",text:o,flex:0,forId:r._id,disabled:r.disabled()}},e.settings.formItemDefaults)),i.type="formitem",r.aria("labelledby",r._id+"-l"),"undefined"==typeof r.settings.flex&&(r.settings.flex=1),e.replace(r,i),i.add(r))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){function e(){var e=0,n=[],r,i,o;if(t.settings.labelGapCalc!==!1)for(o="children"==t.settings.labelGapCalc?t.find("formitem"):t.items(),o.filter("formitem").each(function(t){var r=t.items()[0],i=r.getEl().clientWidth;e=i>e?i:e,n.push(r)}),i=t.settings.labelGap||0,r=n.length;r--;)n[r].settings.minWidth=e+i}var t=this;t._super(),t.on("show",e),e()}})}),r(Pt,[Bt],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),r(Mt,[C,z,g,it,p,S],function(e,t,n,r,i,o){var a=i.trim,s=function(e,t,n,r,i){return{type:e,title:t,url:n,level:r,attach:i}},l=function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return o.isContentEditableTrue(e)}return!1},c=function(t,n){return e.DOM.select(t,n)},u=function(e){return e.innerText||e.textContent},d=function(e){return e.id?e.id:r.uuid("h")},f=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},m=function(e){return f(e)&&p(e)},g=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},p=function(e){return l(e)&&!o.isContentEditableFalse(e)},h=function(e){return g(e)&&p(e)},v=function(e){return g(e)?parseInt(e.nodeName.substr(1),10):0},y=function(e){var t=d(e),n=function(){e.id=t};return s("header",u(e),"#"+t,v(e),n)},b=function(e){var n=e.id||e.name,r=u(e);return s("anchor",r?r:"#"+n,"#"+n,0,t.noop)},x=function(e){return n.map(n.filter(e,h),y)},w=function(e){return n.map(n.filter(e,m),b)},C=function(e){var t=c("h1,h2,h3,h4,h5,h6,a:not([href])",e);return t},k=function(e){return a(e.title).length>0},N=function(e){var t=C(e);return n.filter(x(t).concat(w(t)),k)};return{find:N}}),r(Dt,[Ct,p,g,z,H,Mt],function(e,t,n,r,i,o){var a={},s=5,l=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},c=function(e){return t.map(e,l)},u=function(e,t){return{title:e,value:{title:e,url:t,attach:r.noop}}},d=function(e,t){var r=n.find(t,function(t){return t.url===e});return!r},f=function(e,t,n){var r=t in e?e[t]:n;return r===!1?null:r},m=function(e,i,o,s){var l={title:"-"},m=function(e){var a=n.filter(e[o],function(e){return d(e,i)});return t.map(a,function(e){return{title:e,value:{title:e,url:e,attach:r.noop}}})},g=function(e){var t=n.filter(i,function(t){return t.type==e});return c(t)},h=function(){var e=g("anchor"),t=f(s,"anchor_top","#top"),n=f(s,"anchor_bottom","#bottom");return null!==t&&e.unshift(u("<top>",t)),null!==n&&e.push(u("<bottom>",n)),e},v=function(e){return n.reduce(e,function(e,t){var n=0===e.length||0===t.length;return n?e.concat(t):e.concat(l,t)},[])};return s.typeahead_urls===!1?[]:"file"===o?v([p(e,m(a)),p(e,g("header")),p(e,h())]):p(e,m(a))},g=function(e,t){var r=a[t];/^https?/.test(e)&&(r?-1===n.indexOf(r,e)&&(a[t]=r.slice(0,s).concat(e)):a[t]=[e])},p=function(e,n){var r=e.toLowerCase(),i=t.grep(n,function(e){return-1!==e.title.toLowerCase().indexOf(r)});return 1===i.length&&i[0].title===e?[]:i},h=function(e){var t=e.title;return t.raw?t.raw:t},v=function(e,t,n,r){var i=function(i){var a=o.find(n),s=m(i,a,r,t);e.showAutoComplete(s,i)};e.on("autocomplete",function(){i(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var i=h(n);"image"===r?e.fire("change",{meta:{alt:i,attach:n.attach}}):e.fire("change",{meta:{text:i,attach:n.attach}}),e.focus()}),e.on("click",function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&i("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){t.isDefaultPrevented()||g(e.value(),r)})})},y=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}},b=function(e,t,n){var r=t.filepicker_validator_handler;if(r){var i=function(t){return 0===t.length?void e.statusLevel("none"):void r({url:t,type:n},function(t){var n=y(t);e.statusMessage(n.message),e.statusLevel(n.status)})};e.state.on("change:value",function(e){i(e.value)})}};return e.extend({init:function(e){var n=this,r=tinymce.activeEditor,i=r.settings,o,a,s,l=e.filetype;e.spellcheck=!1,s=i.file_picker_types||i.file_browser_callback_types,s&&(s=t.makeMap(s,/[, ]/)),s&&!s[l]||(a=i.file_picker_callback,!a||s&&!s[l]?(a=i.file_browser_callback,!a||s&&!s[l]||(o=function(){a(n.getEl("inp").id,n.value(),l,window)})):o=function(){var e=n.fire("beforecall").meta;e=t.extend({filetype:l},e),a.call(r,function(e,t){n.value(e).fire("change",{meta:t})},n.value(),e)}),o&&(e.icon="browse",e.onaction=o),n._super(e),v(n,i,r.getBody(),l),b(n,i,l)}})}),r(It,[yt],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),r(Lt,[yt],function(e){return e.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,u,d,f,m,g,p,h,v=[],y,b,x,w,C,k,N,S,_,T,E,R,A,B,P,M,D,I,L,O,H,F,z=Math.max,U=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),o=e.paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,"row-reversed"!=f&&"column-reverse"!=f||(r=r.set(r.toArray().reverse()),f=f.split("-")[0]),"column"==f?(_="y",N="h",S="minH",T="maxH",R="innerH",E="top",A="deltaH",B="contentH",L="left",D="w",P="x",M="innerW",I="minW",O="right",H="deltaW",F="contentW"):(_="x",N="w",S="minW",T="maxW",R="innerW",E="left",A="deltaW",B="contentW",L="top",D="h",P="y",M="innerH",I="minH",O="bottom",H="deltaH",F="contentH"),d=i[R]-o[E]-o[E],k=u=0,t=0,n=r.length;n>t;t++)m=r[t],g=m.layoutRect(),p=m.settings,h=p.flex,d-=n-1>t?c:0,h>0&&(u+=h,g[T]&&v.push(m),g.flex=h),d-=g[S],y=o[L]+g[I]+o[O],y>k&&(k=y);if(w={},0>d?w[S]=i[S]-d+i[A]:w[S]=i[R]-d+i[A],w[I]=k+i[H],w[B]=i[R]-d,w[F]=k,w.minW=U(w.minW,i.maxW),w.minH=U(w.minH,i.maxH),w.minW=z(w.minW,i.startMinWidth),w.minH=z(w.minH,i.startMinHeight),!i.autoResize||w.minW==i.minW&&w.minH==i.minH){for(x=d/u,t=0,n=v.length;n>t;t++)m=v[t],g=m.layoutRect(),b=g[T],y=g[S]+g.flex*x,y>b?(d-=g[T]-g[S],u-=g.flex,g.flex=0,g.maxFlexSize=b):g.maxFlexSize=0;for(x=d/u,C=o[E],w={},0===u&&("end"==l?C=d+o[E]:"center"==l?(C=Math.round(i[R]/2-(i[R]-d)/2)+o[E],0>C&&(C=o[E])):"justify"==l&&(C=o[E],c=Math.floor(d/(r.length-1)))),w[P]=o[L],t=0,n=r.length;n>t;t++)m=r[t],g=m.layoutRect(),y=g.maxFlexSize||g[S],"center"===s?w[P]=Math.round(i[M]/2-g[D]/2):"stretch"===s?(w[D]=z(g[I]||0,i[M]-o[L]-o[O]),w[P]=o[L]):"end"===s&&(w[P]=i[M]-g[D]-o.top),g.flex>0&&(y+=g.flex*x),w[N]=y,w[_]=C,m.layoutRect(w),m.recalc&&m.recalc(),C+=y+c}else if(w.w=w.minW,w.h=w.minH,e.layoutRect(w),this.recalc(e),null===e._lastRect){var W=e.parent();W&&(W._lastRect=null,W.recalc())}}})}),r(Ot,[vt],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}})}),r(Ht,[C],function(e){var n=function(e,t,n){for(;n!==t;){if(n.style[e])return n.style[e];n=n.parentNode}return""},r=function(e){return/[0-9.]+px$/.test(e)?Math.round(72*parseInt(e,10)/96)+"pt":e},i=function(e){return e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")},o=function(t,n){return e.DOM.getStyle(n,t,!0)},a=function(e,t){var r=n("fontSize",e,t);return""!==r?r:o("fontSize",t)},s=function(e,r){var a=n("fontFamily",e,r),s=""!==a?a:o("fontFamily",r);return s!==t?i(s):""};return{getFontSize:a,getFontFamily:s,toPt:r}}),r(Ft,[we,Ie,Ae,p,g,C,ct,d,Ht],function(e,t,n,r,i,o,a,s,l){function c(e){e.settings.ui_container&&(s.container=o.DOM.select(e.settings.ui_container)[0])}function u(t){t.on("ScriptsLoaded",function(){t.rtl&&(e.rtl=!0)})}function d(e){function t(t,n){return function(){var r=this;e.on("nodeChange",function(i){var o=e.formatter,a=null;f(i.parents,function(e){return f(t,function(t){return n?o.matchNode(e,n,{value:t.value})&&(a=t.value):o.matchNode(e,t.value)&&(a=t.value),a?!1:void 0}),a?!1:void 0}),r.value(a)})}}function i(t){return function(){var n=this,r=function(e){return e?e.split(",")[0]:""};e.on("nodeChange",function(i){var o,a=null;o=l.getFontFamily(e.getBody(),i.element),f(t,function(e){e.value.toLowerCase()===o.toLowerCase()&&(a=e.value)}),f(t,function(e){a||r(e.value).toLowerCase()!==r(o).toLowerCase()||(a=e.value)}),n.value(a),!a&&o&&n.text(r(o))})}}function o(t){return function(){var n=this;e.on("nodeChange",function(r){var i,o,a=null;i=l.getFontSize(e.getBody(),r.element),o=l.toPt(i),f(t,function(e){e.value===i?a=i:e.value===o&&(a=o)}),n.value(a),a||n.text(o)})}}function a(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function s(){function t(e){var n=[];return e?(f(e,function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=t(e.items);else{var a=e.format||"custom"+r++;e.format||(e.name=a,i.push(e)),o.format=a,o.cmd=e.cmd}n.push(o)}),n):void 0}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?o.concat(e.settings.style_formats):o:e.settings.style_formats||o)}var r=0,i=[],o=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){f(i,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){return this.settings.format?e.formatter.getCssText(this.settings.format):void 0},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,r;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),r=t.settings.cmd,r&&t.active(e.queryCommandState(r))})},onclick:function(){this.settings.format&&g(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function c(t){return function(){var n=this;e.formatter?e.formatter.formatChanged(t,function(e){n.active(e)}):e.on("init",function(){e.formatter.formatChanged(t,function(e){n.active(e)})})}}function u(t){return function(){function n(){var n="redo"==t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()}var r=this;r.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){r.disabled(e.readonly||!n())})}}function d(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function g(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}function p(t){var n=t.length;return r.each(t,function(t){t.menu&&(t.hidden=0===p(t.menu));var r=t.format;r&&(t.hidden=!e.formatter.canApply(r)),t.hidden&&n--}),n}function h(t){var n=t.items().length;return t.items().each(function(t){t.menu&&t.visible(h(t.menu)>0),!t.menu&&t.settings.menu&&t.visible(p(t.settings.menu)>0);var r=t.settings.format;r&&t.visible(e.formatter.canApply(r)),t.visible()||n--}),n}var v;v=s(),f({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:c(n),onclick:function(){g(n)}})}),f({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),f({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:c(n)})});var y=function(e){var t=e;return t.length>0&&"-"===t[0].text&&(t=t.slice(1)),t.length>0&&"-"===t[t.length-1].text&&(t=t.slice(0,t.length-1)),t},b=function(t){var n,i;if("string"==typeof t)i=t.split(" ");else if(r.isArray(t))return m(r.map(t,b));return n=r.grep(i,function(t){return"|"===t||t in e.menuItems}),r.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},x=function(t){var n=[{text:"-"}],i=r.grep(e.menuItems,function(e){return e.context===t});return r.each(i,function(e){"before"==e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"==e.separator&&n.push({text:"|"})}),n},w=function(e){return y(e.insert_button_items?b(e.insert_button_items):x("insert"))};e.addButton("undo",{tooltip:"Undo",onPostRender:u("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:u("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:u("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:u("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:d,cmd:"mceToggleVisualAid"}),e.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(w(e.settings)),this.menu.renderNew()}}),f({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:v,onShowMenu:function(){e.settings.style_formats_autohide&&h(this.menu)}}),e.addButton("formatselect",function(){var n=[],r=a(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return f(r,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:r[0][0],values:n,fixedWidth:!0,onselect:g,onPostRender:t(n)}}),e.addButton("fontselect",function(){var t="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",n=[],r=a(e.settings.font_formats||t);return f(r,function(e){n.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:i(n),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var t=[],n="8pt 10pt 12pt 14pt 18pt 24pt 36pt",r=e.settings.fontsize_formats||n;return f(r.split(" "),function(e){var n=e,r=e,i=e.split("=");i.length>1&&(n=i[0],r=i[1]),t.push({text:n,value:r})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:o(t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:v})}var f=r.each,m=function(e){return i.reduce(e,function(e,t){return e.concat(t)},[])};a.on("AddEditor",function(e){var t=e.editor;u(t),d(t),c(t)}),e.translate=function(e){return a.translate(e)},t.tooltips=!s.iOS}),r(zt,[yt],function(e){return e.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,u,d,f,m,g,p,h,v,y,b,x,w,C,k,N=[],S=[],_,T,E,R,A,B;t=e.settings,i=e.items().filter(":visible"),o=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,x=t.alignH||t.align,w=t.alignV||t.align,h=e.paddingBox,A="reverseRows"in t?t.reverseRows:e.isRtl(),x&&"string"==typeof x&&(x=[x]),w&&"string"==typeof w&&(w=[w]);for(d=0;r>d;d++)N.push(0);for(f=0;n>f;f++)S.push(0);for(f=0;n>f;f++)for(d=0;r>d&&(u=i[f*r+d]);d++)c=u.layoutRect(),_=c.minW,T=c.minH,N[d]=_>N[d]?_:N[d],S[f]=T>S[f]?T:S[f];for(E=o.innerW-h.left-h.right,C=0,d=0;r>d;d++)C+=N[d]+(d>0?y:0),E-=(d>0?y:0)+N[d];for(R=o.innerH-h.top-h.bottom,k=0,f=0;n>f;f++)k+=S[f]+(f>0?b:0),R-=(f>0?b:0)+S[f];if(C+=h.left+h.right,k+=h.top+h.bottom,l={},l.minW=C+(o.w-o.innerW),l.minH=k+(o.h-o.innerH),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH,l.minW=Math.min(l.minW,o.maxW),l.minH=Math.min(l.minH,o.maxH),l.minW=Math.max(l.minW,o.startMinWidth),l.minH=Math.max(l.minH,o.startMinHeight),!o.autoResize||l.minW==o.minW&&l.minH==o.minH){o.autoResize&&(l=e.layoutRect(l),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH);var P;P="start"==t.packV?0:R>0?Math.floor(R/n):0;var M=0,D=t.flexWidths;if(D)for(d=0;d<D.length;d++)M+=D[d];else M=r;var I=E/M;for(d=0;r>d;d++)N[d]+=D?D[d]*I:I;for(g=h.top,f=0;n>f;f++){for(m=h.left,s=S[f]+P,d=0;r>d&&(B=A?f*r+r-1-d:f*r+d,u=i[B]);d++)p=u.settings,c=u.layoutRect(),a=Math.max(N[d],c.startMinWidth),c.x=m,c.y=g,v=p.alignH||(x?x[d]||x[0]:null),"center"==v?c.x=m+a/2-c.w/2:"right"==v?c.x=m+a-c.w:"stretch"==v&&(c.w=a),v=p.alignV||(w?w[d]||w[0]:null),"center"==v?c.y=g+s/2-c.h/2:"bottom"==v?c.y=g+s-c.h:"stretch"==v&&(c.h=s),u.layoutRect(c),m+=a+y,u.recalc&&u.recalc();g+=s+b}}else if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var L=e.parent();L&&(L._lastRect=null,L.recalc())}}})}),r(Ut,[Ie,u],function(e,t){return e.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,n){var r=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=e,n&&n()):t.setTimeout(function(){r.html(e)}),this}})}),r(Wt,[Ie],function(e){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),r($t,[Ie,ve],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){var r=t.getSize(e.getEl());r.width>n.maxW&&(n.minW=n.maxW,e.classes.add("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e=this,t,n,r=e.settings.forId;return!r&&(n=e.settings.forName)&&(t=e.getRoot().find("#"+n)[0],t&&(r=t._id)),r?'<label id="'+e._id+'" class="'+e.classes+'"'+(r?' for="'+r+'"':"")+">"+e.encode(e.state.get("text"))+"</label>":'<span id="'+e._id+'" class="'+e.classes+'">'+e.encode(e.state.get("text"))+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),r(jt,[Ne],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}})}),r(Vt,[jt],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),r(qt,[bt,Ce,Vt],function(e,t,n){function r(e,t){for(;e;){
if(t===e)return!0;e=e.parentNode}return!1}var i=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var n=this,r;return n.menu&&n.menu.visible()&&e!==!1?n.hideMenu():(n.menu||(r=n.state.get("menu")||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",r.renderTo?n.menu=r.parent(n).show().renderTo():n.menu=t.create(r).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control==n.menu&&n.activeMenu("show"==e.type),n.aria("expanded","show"==e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),void n.fire("showmenu"))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e=this,t=e._id,r=e.classPrefix,i=e.settings.icon,o,a=e.state.get("text"),s="";return o=e.settings.image,o?(i="none","string"!=typeof o&&(o=window.getSelection?o[0]:o[1]),o=" style=\"background-image: url('"+o+"')\""):o="",a&&(e.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+e.encode(a)+"</span>"),i=e.settings.icon?r+"ico "+r+"i-"+i:"",e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+o+"></i>":"")+s+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&r(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n=t.control,r=e.parent(),o;n&&r&&n instanceof i&&n.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=n&&(e.menu&&e.menu.visible()&&(o=!0),e.hideMenu())}),o&&(n.focus(),n.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),r(Yt,[Ie,Ce,d,u],function(e,t,n,r){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this,n;t._super(e),e=t.settings,t.classes.add("menu-item"),e.menu&&t.classes.add("menu-item-expand"),e.preview&&t.classes.add("menu-item-preview"),n=t.state.get("text"),"-"!==n&&"|"!==n||(t.classes.add("menu-item-sep"),t.aria("role","separator"),t.state.set("text","-")),e.selectable&&(t.aria("role","menuitemcheckbox"),t.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.classes.add("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this,n=e.settings,r,i=e.parent();if(i.items().each(function(t){t!==e&&t.hideMenu()}),n.menu){r=e.menu,r?r.show():(r=n.menu,r.length?r={type:"menu",items:r}:r.type=r.type||"menu",i.settings.itemDefaults&&(r.itemDefaults=i.settings.itemDefaults),r=e.menu=t.create(r).parent(e).renderTo(),r.reflow(),r.on("cancel",function(t){t.stopPropagation(),e.focus(),r.hide()}),r.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),r.on("hide",function(t){t.control===r&&e.classes.remove("selected")}),r.submenu=!0),r._parentMenu=i,r.classes.add("menu-sub");var o=r.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);r.moveRel(e.getEl(),o),r.rel=o,o="menu-sub-"+o,r.classes.remove(r._lastRel).add(o),r._lastRel=o,e.classes.add("selected"),e.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){function e(e){var t,r,i={};for(i=n.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)r=i[e[t].toLowerCase()],r&&(e[t]=r);return e.join("+")}function t(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){var n=s.match||"";return n?e.replace(new RegExp(t(n),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function i(e){return e.replace(new RegExp(t("!mce~match["),"g"),"<b>").replace(new RegExp(t("]mce~match!"),"g"),"</b>")}var o=this,a=o._id,s=o.settings,l=o.classPrefix,c=o.state.get("text"),u=o.settings.icon,d="",f=s.shortcut,m=o.encode(s.url),g="";return u&&o.parent().classes.add("menu-has-icons"),s.image&&(d=" style=\"background-image: url('"+s.image+"')\""),f&&(f=e(f)),u=l+"ico "+l+"i-"+(o.settings.icon||"none"),g="-"!==c?'<i class="'+u+'"'+d+"></i>":"",c=i(o.encode(r(c))),m=i(o.encode(r(m))),'<div id="'+a+'" class="'+o.classes+'" tabindex="-1">'+g+("-"!==c?'<span id="'+a+'-text" class="'+l+'text">'+c+"</span>":"")+(f?'<div id="'+a+'-shortcut" class="'+l+'menu-shortcut">'+f+"</div>":"")+(s.menu?'<div class="'+l+'caret"></div>':"")+(m?'<div class="'+l+'menu-item-link">'+m+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var i=e.getEl("text");i&&i.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),r.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",!0),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),r(Kt,[h,we,u],function(e,t,n){return function(r,i){var o=this,a,s=t.classPrefix,l;o.show=function(t,c){function u(){a&&(e(r).append('<div class="'+s+"throbber"+(i?" "+s+"throbber-inline":"")+'"></div>'),c&&c())}return o.hide(),a=!0,t?l=n.setTimeout(u,t):u(),o},o.hide=function(){var e=r.lastChild;return n.clearTimeout(l),e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),a=!1,o}}}),r(Xt,[Ae,Yt,Kt,p],function(e,t,n,r){return e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var n=e.items,i=n.length;i--;)n[i]=r.extend({},e.itemDefaults,n[i]);t._super(e),t.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){function e(){t.throbber&&(t.throbber.hide(),t.throbber=null)}var t=this,r,i;i=t.settings.itemsFactory,i&&(t.throbber||(t.throbber=new n(t.getEl("body"),!0),0===t.items().length?(t.throbber.show(),t.fire("loading")):t.throbber.show(100,function(){t.items().remove(),t.fire("loading")}),t.on("hide close",e)),t.requestTime=r=(new Date).getTime(),t.settings.itemsFactory(function(n){return 0===n.length?void t.hide():void(t.requestTime===r&&(t.getEl().style.width="",t.getEl("body").style.width="",e(),t.items().remove(),t.getEl("body").innerHTML="",t.add(n),t.renderNew(),t.fire("loaded")))}))},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;return n.icon||n.image||n.selectable?(e._hasIcons=!0,!1):void 0}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e._super()}})}),r(Gt,[qt,Xt],function(e,t){return e.extend({init:function(e){function t(r){for(var a=0;a<r.length;a++){if(i=r[a].selected||e.value===r[a].value)return o=o||r[a].text,n.state.set("value",r[a].value),!0;if(r[a].menu&&t(r[a].menu))return!0}}var n=this,r,i,o,a;n._super(e),e=n.settings,n._values=r=e.values,r&&("undefined"!=typeof e.value&&t(r),!i&&r.length>0&&(o=r[0].text,n.state.set("value",r[0].value)),n.state.set("menu",r)),n.state.set("text",e.text||o),n.classes.add("listbox"),n.on("select",function(t){var r=t.control;a&&(t.lastControl=a),e.multiple?r.active(!r.active()):n.value(t.control.value()),a=r})},bindStates:function(){function e(e,n){e instanceof t&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===n)})}function n(e,t){var r;if(e)for(var i=0;i<e.length;i++){if(e[i].value===t)return e[i];if(e[i].menu&&(r=n(e[i].menu,t)))return r}}var r=this;return r.on("show",function(t){e(t.control,r.value())}),r.state.on("change:value",function(e){var t=n(r.state.get("menu"),e.value);r.text(t?t.text:r.settings.text)}),r._super()}})}),r(Jt,[wt],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),r(Zt,[Ie,Se],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"==e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),r(Qt,[Ie],function(e){function t(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}return e.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){return e.toJSON?(n=e,!1):void 0}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e=this,n,r="";return n=t(e._options),e.size&&(r=' size = "'+e.size+'"'),'<select id="'+e._id+'" class="'+e.classes+'"'+r+">"+n+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(n){e.getEl().innerHTML=t(n.value)}),e._super()}})}),r(en,[Ie,Se,ve],function(e,t,n){function r(e,t,n){return t>e&&(e=t),e>n&&(e=n),e}function i(e,t,n){e.setAttribute("aria-"+t,n)}function o(e,t){var r,o,a,s,l,c;"v"==e.settings.orientation?(s="top",a="height",o="h"):(s="left",a="width",o="w"),c=e.getEl("handle"),r=(e.layoutRect()[o]||100)-n.getSize(c)[a],l=r*((t-e._minValue)/(e._maxValue-e._minValue))+"px",c.style[s]=l,c.style.height=e.layoutRect().h+"px",i(c,"valuenow",t),i(c,"valuetext",""+e.settings.previewFilter(t)),i(c,"valuemin",e._minValue),i(c,"valuemax",e._maxValue)}return e.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"==e.orientation&&t.classes.add("vertical"),t._minValue=e.minValue||0,t._maxValue=e.maxValue||100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){function e(e,t,n){return(n+e)/(t-e)}function i(e,t,n){return n*(t-e)-e}function o(t,n){function o(o){var a;a=s.value(),a=i(t,n,e(t,n,a)+.05*o),a=r(a,t,n),s.value(a),s.fire("dragstart",{value:a}),s.fire("drag",{value:a}),s.fire("dragend",{value:a})}s.on("keydown",function(e){switch(e.keyCode){case 37:case 38:o(-1);break;case 39:case 40:o(1)}})}function a(e,i,o){var a,l,c,g,p;s._dragHelper=new t(s._id,{handle:s._id+"-handle",start:function(e){a=e[u],l=parseInt(s.getEl("handle").style[d],10),c=(s.layoutRect()[m]||100)-n.getSize(o)[f],s.fire("dragstart",{value:p})},drag:function(t){var n=t[u]-a;g=r(l+n,0,c),o.style[d]=g+"px",p=e+g/c*(i-e),s.value(p),s.tooltip().text(""+s.settings.previewFilter(p)).show().moveRel(o,"bc tc"),s.fire("drag",{value:p})},stop:function(){s.tooltip().hide(),s.fire("dragend",{value:p})}})}var s=this,l,c,u,d,f,m;l=s._minValue,c=s._maxValue,"v"==s.settings.orientation?(u="screenY",d="top",f="height",m="h"):(u="screenX",d="left",f="width",m="w"),s._super(),o(l,c,s.getEl("handle")),a(l,c,s.getEl("handle"))},repaint:function(){this._super(),o(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){o(e,t.value)}),e._super()}})}),r(tn,[Ie],function(e){return e.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}})}),r(nn,[qt,ve,h],function(e,t,n){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e=this,r=e.getEl(),i=e.layoutRect(),o,a;return e._super(),o=r.firstChild,a=r.lastChild,n(o).css({width:i.w-t.getSize(a).width,height:i.h-2}),n(a).css({height:i.h-2}),e},activeMenu:function(e){var t=this;n(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r,i=e.state.get("icon"),o=e.state.get("text"),a="";return r=e.settings.image,r?(i="none","string"!=typeof r&&(r=window.getSelection?r[0]:r[1]),r=" style=\"background-image: url('"+r+"')\""):r="",i=e.settings.icon?n+"ico "+n+"i-"+i:"",o&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(o)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+r+"></i>":"")+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(i?"":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),r(rn,[Ot],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})}),r(on,[Te,h,ve],function(e,t,n){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t(n).removeClass(this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t(n).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){var o=e._id+"-t"+i;t.aria("role","tabpanel"),t.aria("labelledby",o),n+='<div id="'+o+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id==e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]==t.target&&e.activateTab(r)})},initLayoutRect:function(){var e=this,t,r,i;r=n.getSize(e.getEl("head")).width,r=0>r?0:r,i=0,e.items().each(function(e){r=Math.max(r,e.layoutRect().minW),i=Math.max(i,e.layoutRect().minH)}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=r,e.settings.h=i,e.layoutRect({x:0,y:0,w:r,h:i})});var o=n.getSize(e.getEl("head")).height;return e.settings.minWidth=r,e.settings.minHeight=i+o,t=e._super(),t.deltaH+=o,t.innerH=t.h-t.deltaH,t}})}),r(an,[Ie,p,ve],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){return e.toJSON?(n=e,!1):void 0}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e=this,t,n,r,i,o=0,a;t=e.getEl().style,n=e._layoutRect,a=e._lastRepaintRect||{};var s=document;return!e.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(t.lineHeight=n.h-o+"px"),r=e.borderBox,i=r.left+r.right+8,o=r.top+r.bottom+(e.settings.multiline?8:0),n.x!==a.x&&(t.left=n.x+"px",a.x=n.x),n.y!==a.y&&(t.top=n.y+"px",a.y=n.y),n.w!==a.w&&(t.width=n.w-i+"px",a.w=n.w),n.h!==a.h&&(t.height=n.h-o+"px",a.h=n.h),e._lastRepaintRect=a,e.fire("repaint",{},!1),e},renderHtml:function(){var e=this,r=e.settings,i,o;return i={id:e._id,hidefocus:"1"},t.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){i[e]=r[e]}),e.disabled()&&(i.disabled="disabled"),r.subtype&&(i.type=r.subtype),o=n.create(r.multiline?"textarea":"input",i),o.value=e.state.get("value"),o.className=e.classes,o.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!=t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}})}),r(sn,[],function(){var e=this||window,t=function(){return e.tinymce};return"function"==typeof e.define&&(e.define.amd||e.define("ephox/tinymce",[],t)),"object"==typeof module&&(module.exports=window.tinymce),{}}),a([l,c,u,d,f,m,p,h,v,y,x,C,k,N,E,A,B,P,M,D,I,L,H,F,q,Y,J,te,le,ce,ue,de,me,pe,he,xe,we,Ce,ke,Ne,Se,_e,Te,Ee,Re,Ae,Be,Pe,Me,De,Ie,Le,Oe,He,Ue,$e,at,st,lt,ct,dt,ft,mt,gt,pt,ht,vt,yt,bt,xt,wt,Ct,kt,Nt,St,_t,Tt,Et,Rt,At,Bt,Pt,Dt,It,Lt,Ot,Ft,zt,Ut,Wt,$t,jt,Vt,qt,Yt,Kt,Xt,Gt,Jt,Zt,Qt,en,tn,nn,rn,on,an])}(window)}).call(this),function(){tinymce.PluginManager.add("advlist",function(e){function t(t){return e.$.contains(e.getBody(),t)}function n(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&t(e)}function r(e,t){var n=[];return t&&tinymce.each(t.split(/[ ,]/),function(e){n.push({text:e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}),data:"default"==e?"":e})}),n}function i(t,n){e.undoManager.transact(function(){var r,i=e.dom,o=e.selection;if(r=i.getParent(o.getNode(),"ol,ul"),!r||r.nodeName!=t||n===!1){var a={"list-style-type":n?n:""};e.execCommand("UL"==t?"InsertUnorderedList":"InsertOrderedList",!1,a)}r=i.getParent(o.getNode(),"ol,ul"),r&&tinymce.util.Tools.each(i.select("ol,ul",r).concat([r]),function(e){e.nodeName!==t&&n!==!1&&(e=i.rename(e,t)),i.setStyle(e,"listStyleType",n?n:null),e.removeAttribute("data-mce-style")}),e.focus()})}function o(t){var n=e.dom.getStyle(e.dom.getParent(e.selection.getNode(),"ol,ul"),"listStyleType")||"";t.control.items().each(function(e){e.active(e.settings.data===n)})}var a,s,l=function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return-1!==tinymce.util.Tools.inArray(n.split(/[ ,]/),t)};a=r("OL",e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),s=r("UL",e.getParam("advlist_bullet_styles","default,circle,disc,square"));var c=function(t){return function(){var r=this;e.on("NodeChange",function(e){var i=tinymce.util.Tools.grep(e.parents,n);r.active(i.length>0&&i[0].nodeName===t)})}};l(e,"lists")&&(e.addCommand("ApplyUnorderedListStyle",function(e,t){i("UL",t["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",function(e,t){i("OL",t["list-style-type"])}),e.addButton("numlist",{type:a.length>0?"splitbutton":"button",tooltip:"Numbered list",menu:a,onPostRender:c("OL"),onshow:o,onselect:function(e){i("OL",e.control.settings.data)},onclick:function(){i("OL",!1)}}),e.addButton("bullist",{type:s.length>0?"splitbutton":"button",tooltip:"Bullet list",onPostRender:c("UL"),menu:s,onshow:o,onselect:function(e){i("UL",e.control.settings.data)},onclick:function(){i("UL",!1)}}))})}.call(this),function(){tinymce.PluginManager.add("autoresize",function(e){function t(){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}function n(r){var a,s,l,c,u,d,f,m,g,p,h,v,y=tinymce.DOM;if(s=e.getDoc()){if(l=s.body,c=s.documentElement,u=i.autoresize_min_height,!l||r&&"setcontent"===r.type&&r.initial||t())return void(l&&c&&(l.style.overflowY="auto",c.style.overflowY="auto"));f=e.dom.getStyle(l,"margin-top",!0),m=e.dom.getStyle(l,"margin-bottom",!0),g=e.dom.getStyle(l,"padding-top",!0),p=e.dom.getStyle(l,"padding-bottom",!0),h=e.dom.getStyle(l,"border-top-width",!0),v=e.dom.getStyle(l,"border-bottom-width",!0),d=l.offsetHeight+parseInt(f,10)+parseInt(m,10)+parseInt(g,10)+parseInt(p,10)+parseInt(h,10)+parseInt(v,10),(isNaN(d)||0>=d)&&(d=tinymce.Env.ie?l.scrollHeight:tinymce.Env.webkit&&0===l.clientHeight?0:l.offsetHeight),d>i.autoresize_min_height&&(u=d),i.autoresize_max_height&&d>i.autoresize_max_height?(u=i.autoresize_max_height,l.style.overflowY="auto",c.style.overflowY="auto"):(l.style.overflowY="hidden",c.style.overflowY="hidden",l.scrollTop=0),u!==o&&(a=u-o,y.setStyle(e.iframeElement,"height",u+"px"),o=u,tinymce.isWebKit&&0>a&&n(r))}}function r(t,i,o){tinymce.util.Delay.setEditorTimeout(e,function(){n({}),t--?r(t,i,o):o&&o()},i)}var i=e.settings,o=0;e.settings.inline||(i.autoresize_min_height=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10),i.autoresize_max_height=parseInt(e.getParam("autoresize_max_height",0),10),e.on("init",function(){var t,n;t=e.getParam("autoresize_overflow_padding",1),n=e.getParam("autoresize_bottom_margin",50),t!==!1&&e.dom.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),n!==!1&&e.dom.setStyles(e.getBody(),{paddingBottom:n})}),e.on("nodechange setcontent keyup FullscreenStateChanged",n),e.getParam("autoresize_on_init",!0)&&e.on("init",function(){r(20,100,function(){r(5,1e3)})}),e.addCommand("mceAutoResize",n))})}.call(this),function(){tinymce.PluginManager.add("charmap",function(e){function t(){return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]}function n(e){return tinymce.util.Tools.grep(e,function(e){return l(e)&&2==e.length})}function r(e){return l(e)?[].concat(n(e)):"function"==typeof e?e():[]}function i(t){var n=e.settings;return n.charmap&&(t=r(n.charmap)),n.charmap_append?[].concat(t).concat(r(n.charmap_append)):t}function o(){return i(t())}function a(t){e.fire("insertCustomChar",{chr:t}).chr,e.execCommand("mceInsertContent",!1,t)}function s(){function t(e){for(;e;){if("TD"==e.nodeName)return e;e=e.parentNode}}var n,r,i,s;n='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>';var l=o(),c=Math.min(l.length,25),u=Math.ceil(l.length/c);for(i=0;u>i;i++){for(n+="<tr>",r=0;c>r;r++){var d=i*c+r;if(d<l.length){var f=l[d],m=f?String.fromCharCode(parseInt(f[0],10)):"&nbsp;";n+='<td title="'+f[1]+'"><div tabindex="-1" title="'+f[1]+'" role="button" data-chr="'+m+'">'+m+"</div></td>"}else n+="<td />"}n+="</tr>"}n+="</tbody></table>";var g={type:"container",html:n,onclick:function(e){var n=e.target;/^(TD|DIV)$/.test(n.nodeName)&&t(n).firstChild&&(a(n.getAttribute("data-chr")),e.ctrlKey||s.close())},onmouseover:function(e){var n=t(e.target);n&&n.firstChild?(s.find("#preview").text(n.firstChild.firstChild.data),s.find("#previewTitle").text(n.title)):(s.find("#preview").text(" "),s.find("#previewTitle").text(" "))}};s=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[g,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"label",name:"previewTitle",text:" ",style:"text-align: center",border:1,minWidth:140,minHeight:80}]}],buttons:[{text:"Close",onclick:function(){s.close()}}]})}var l=tinymce.util.Tools.isArray;return e.addCommand("mceShowCharmap",s),e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"}),{getCharMap:o,insertChar:a}})}.call(this),function(){tinymce.PluginManager.add("colorpicker",function(e){function t(t,n){function r(e){var t=new tinymce.util.Color(e),n=t.toRgb();o.fromJSON({r:n.r,g:n.g,b:n.b,hex:t.toHex().substr(1)}),i(t.toHex())}function i(e){o.find("#preview")[0].getEl().style.background=e}var o=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:n,onchange:function(){var e=this.rgb();o&&(o.find("#r").value(e.r),o.find("#g").value(e.g),o.find("#b").value(e.b),o.find("#hex").value(this.value().substr(1)),i(this.value()))}},{type:"form",
padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=o.find("colorpicker")[0];return e=this.name(),t=this.value(),"hex"==e?(t="#"+t,r(t),void n.value(t)):(t={r:o.find("#r").value(),g:o.find("#g").value(),b:o.find("#b").value()},n.value(t),void r(t))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+this.toJSON().hex)}});r(n)}e.settings.color_picker_callback||(e.settings.color_picker_callback=t)})}.call(this),function(){tinymce.PluginManager.add("emoticons",function(e,t){function n(){var e;return e='<table role="list" class="mce-grid">',tinymce.each(r,function(n){e+="<tr>",tinymce.each(n,function(n){var r=t+"/img/smiley-"+n+".gif";e+='<td><a href="#" data-mce-url="'+r+'" data-mce-alt="'+n+'" tabindex="-1" role="option" aria-label="'+n+'"><img src="'+r+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),e+="</tr>"}),e+="</table>"}var r=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];e.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:n,onclick:function(t){var n=e.dom.getParent(t.target,"a");n&&(e.insertContent('<img src="'+n.getAttribute("data-mce-url")+'" alt="'+n.getAttribute("data-mce-alt")+'" />'),this.hide())}},tooltip:"Emoticons"})})}.call(this),function(){tinymce.PluginManager.add("fullpage",function(e){function t(){var t=n();e.windowManager.open({title:"Document properties",data:t,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(e){r(tinymce.extend(t,e.data))}})}function n(){function t(e,t){var n=e.attr(t);return n||""}var n,r,o=i(),a={};return a.fontface=e.getParam("fullpage_default_fontface",""),a.fontsize=e.getParam("fullpage_default_fontsize",""),n=o.firstChild,7==n.type&&(a.xml_pi=!0,r=/encoding="([^"]+)"/.exec(n.value),r&&(a.docencoding=r[1])),n=o.getAll("#doctype")[0],n&&(a.doctype="<!DOCTYPE"+n.value+">"),n=o.getAll("title")[0],n&&n.firstChild&&(a.title=n.firstChild.value),u(o.getAll("meta"),function(e){var t,n=e.attr("name"),r=e.attr("http-equiv");n?a[n.toLowerCase()]=e.attr("content"):"Content-Type"==r&&(t=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")),t&&(a.docencoding=t[1]))}),n=o.getAll("html")[0],n&&(a.langcode=t(n,"lang")||t(n,"xml:lang")),a.stylesheets=[],tinymce.each(o.getAll("link"),function(e){"stylesheet"==e.attr("rel")&&a.stylesheets.push(e.attr("href"))}),n=o.getAll("body")[0],n&&(a.langdir=t(n,"dir"),a.style=t(n,"style"),a.visited_color=t(n,"vlink"),a.link_color=t(n,"link"),a.active_color=t(n,"alink")),a}function r(t){function n(e,t,n){e.attr(t,n?n:void 0)}function r(e){a.firstChild?a.insert(e,a.firstChild):a.append(e)}var o,a,s,c,f,m=e.dom;o=i(),a=o.getAll("head")[0],a||(c=o.getAll("html")[0],a=new d("head",1),c.firstChild?c.insert(a,c.firstChild,!0):c.append(a)),c=o.firstChild,t.xml_pi?(f='version="1.0"',t.docencoding&&(f+=' encoding="'+t.docencoding+'"'),7!=c.type&&(c=new d("xml",7),o.insert(c,o.firstChild,!0)),c.value=f):c&&7==c.type&&c.remove(),c=o.getAll("#doctype")[0],t.doctype?(c||(c=new d("#doctype",10),t.xml_pi?o.insert(c,o.firstChild):r(c)),c.value=t.doctype.substring(9,t.doctype.length-1)):c&&c.remove(),c=null,u(o.getAll("meta"),function(e){"Content-Type"==e.attr("http-equiv")&&(c=e)}),t.docencoding?(c||(c=new d("meta",1),c.attr("http-equiv","Content-Type"),c.shortEnded=!0,r(c)),c.attr("content","text/html; charset="+t.docencoding)):c&&c.remove(),c=o.getAll("title")[0],t.title?(c?c.empty():(c=new d("title",1),r(c)),c.append(new d("#text",3)).value=t.title):c&&c.remove(),u("keywords,description,author,copyright,robots".split(","),function(e){var n,i,a=o.getAll("meta"),s=t[e];for(n=0;n<a.length;n++)if(i=a[n],i.attr("name")==e)return void(s?i.attr("content",s):i.remove());s&&(c=new d("meta",1),c.attr("name",e),c.attr("content",s),c.shortEnded=!0,r(c))});var g={};tinymce.each(o.getAll("link"),function(e){"stylesheet"==e.attr("rel")&&(g[e.attr("href")]=e)}),tinymce.each(t.stylesheets,function(e){g[e]||(c=new d("link",1),c.attr({rel:"stylesheet",text:"text/css",href:e}),c.shortEnded=!0,r(c)),delete g[e]}),tinymce.each(g,function(e){e.remove()}),c=o.getAll("body")[0],c&&(n(c,"dir",t.langdir),n(c,"style",t.style),n(c,"vlink",t.visited_color),n(c,"link",t.link_color),n(c,"alink",t.active_color),m.setAttribs(e.getBody(),{style:t.style,dir:t.dir,vLink:t.visited_color,link:t.link_color,aLink:t.active_color})),c=o.getAll("html")[0],c&&(n(c,"lang",t.langcode),n(c,"xml:lang",t.langcode)),a.firstChild||a.remove(),s=new tinymce.html.Serializer({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(o),l=s.substring(0,s.indexOf("</body>"))}function i(){return new tinymce.html.DomParser({validate:!1,root_name:"#document"}).parse(l)}function o(t){function n(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})}var r,o,s,d,f=t.content,m="",g=e.dom;if(!t.selection&&!("raw"==t.format&&l||t.source_view&&e.getParam("fullpage_hide_in_source_view"))){0!==f.length||t.source_view||(f=tinymce.trim(l)+"\n"+tinymce.trim(f)+"\n"+tinymce.trim(c)),f=f.replace(/<(\/?)BODY/gi,"<$1body"),r=f.indexOf("<body"),-1!=r?(r=f.indexOf(">",r),l=n(f.substring(0,r+1)),o=f.indexOf("</body",r),-1==o&&(o=f.length),t.content=f.substring(r+1,o),c=n(f.substring(o))):(l=a(),c="\n</body>\n</html>"),s=i(),u(s.getAll("style"),function(e){e.firstChild&&(m+=e.firstChild.value)}),d=s.getAll("body")[0],d&&g.setAttribs(e.getBody(),{style:d.attr("style")||"",dir:d.attr("dir")||"",vLink:d.attr("vlink")||"",link:d.attr("link")||"",aLink:d.attr("alink")||""}),g.remove("fullpage_styles");var p=e.getDoc().getElementsByTagName("head")[0];m&&(g.add(p,"style",{id:"fullpage_styles"},m),d=g.get("fullpage_styles"),d.styleSheet&&(d.styleSheet.cssText=m));var h={};tinymce.each(p.getElementsByTagName("link"),function(e){"stylesheet"==e.rel&&e.getAttribute("data-mce-fullpage")&&(h[e.href]=e)}),tinymce.each(s.getAll("link"),function(e){var t=e.attr("href");return!t||(h[t]||"stylesheet"!=e.attr("rel")||g.add(p,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),void delete h[t])}),tinymce.each(h,function(e){e.parentNode.removeChild(e)})}}function a(){var t,n="",r="";return e.getParam("fullpage_default_xml_pi")&&(n+='<?xml version="1.0" encoding="'+e.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'),n+=e.getParam("fullpage_default_doctype","<!DOCTYPE html>"),n+="\n<html>\n<head>\n",(t=e.getParam("fullpage_default_title"))&&(n+="<title>"+t+"</title>\n"),(t=e.getParam("fullpage_default_encoding"))&&(n+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=e.getParam("fullpage_default_font_family"))&&(r+="font-family: "+t+";"),(t=e.getParam("fullpage_default_font_size"))&&(r+="font-size: "+t+";"),(t=e.getParam("fullpage_default_text_color"))&&(r+="color: "+t+";"),n+="</head>\n<body"+(r?' style="'+r+'"':"")+">\n"}function s(t){t.selection||t.source_view&&e.getParam("fullpage_hide_in_source_view")||(t.content=tinymce.trim(l)+"\n"+tinymce.trim(t.content)+"\n"+tinymce.trim(c))}var l,c,u=tinymce.each,d=tinymce.html.Node;e.addCommand("mceFullPageProperties",t),e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"}),e.on("BeforeSetContent",o),e.on("GetContent",s)})}.call(this),function(){tinymce.PluginManager.add("image",function(e){function t(e,t){function n(e,n){r.parentNode&&r.parentNode.removeChild(r),t({width:e,height:n})}var r=document.createElement("img");r.onload=function(){n(Math.max(r.width,r.clientWidth),Math.max(r.height,r.clientHeight))},r.onerror=function(){n()};var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left=0,i.width=i.height="auto",document.body.appendChild(r),r.src=e}function n(e,t,n){function r(e,n){return n=n||[],tinymce.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t(i)),n.push(i)}),n}return r(e,n||[])}function r(t){return function(){var n=e.settings.image_list;"string"==typeof n?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):"function"==typeof n?n(t):t(n)}}function i(r){function i(){var e,t,n,r;e=f.find("#width")[0],t=f.find("#height")[0],e&&t&&(n=e.value(),r=t.value(),f.find("#constrain")[0].checked()&&p&&h&&n&&r&&(p!=n?(r=Math.round(n/p*r),isNaN(r)||t.value(r)):(n=Math.round(r/h*n),isNaN(n)||e.value(n))),p=n,h=r)}function o(){function t(t){function n(){t.onload=t.onerror=null,e.selection&&(e.selection.select(t),e.nodeChanged())}t.onload=function(){b.width||b.height||!w||x.setAttribs(t,{width:t.clientWidth,height:t.clientHeight}),n()},t.onerror=n}var n,r;u(),i(),b=tinymce.extend(b,f.toJSON()),b.alt||(b.alt=""),b.title||(b.title=""),""===b.width&&(b.width=null),""===b.height&&(b.height=null),b.style||(b.style=null),b={src:b.src,alt:b.alt,title:b.title,width:b.width,height:b.height,style:b.style,caption:b.caption,"class":b["class"]},e.undoManager.transact(function(){function i(t){return e.schema.getTextBlockElements()[t.nodeName]}if(!b.src)return void(m&&(x.remove(m),e.focus(),e.nodeChanged()));if(""===b.title&&(b.title=null),m?x.setAttribs(m,b):(b.id="__mcenew",e.focus(),e.selection.setContent(x.createHTML("img",b)),m=x.get("__mcenew"),x.setAttrib(m,"id",null)),e.editorUpload.uploadImagesAuto(),b.caption===!1&&x.is(m.parentNode,"figure.image")&&(n=m.parentNode,x.insertAfter(m,n),x.remove(n)),b.caption!==!0)t(m);else if(!x.is(m.parentNode,"figure.image")){r=m,m=m.cloneNode(!0),n=x.create("figure",{"class":"image"}),n.appendChild(m),n.appendChild(x.create("figcaption",{contentEditable:!0},"Caption")),n.contentEditable=!1;var o=x.getParent(r,i);o?x.split(o,r,n):x.replace(n,r),e.selection.select(n)}})}function a(e){return e&&(e=e.replace(/px$/,"")),e}function s(n){var r,i,o,a=n.meta||{};v&&v.value(e.convertURL(this.value(),"src")),tinymce.each(a,function(e,t){f.find("#"+t).value(e)}),a.width||a.height||(r=e.convertURL(this.value(),"src"),i=e.settings.image_prepend_url,o=new RegExp("^(?:[a-z]+:)?//","i"),i&&!o.test(r)&&r.substring(0,i.length)!==i&&(r=i+r),this.value(r),t(e.documentBaseURI.toAbsolute(this.value()),function(e){e.width&&e.height&&w&&(p=e.width,h=e.height,f.find("#width").value(p),f.find("#height").value(h))}))}function l(e){e.meta=f.toJSON()}function c(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e}function u(){function t(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e}if(e.settings.image_advtab){var n=f.toJSON(),r=x.parseStyle(n.style);r=c(r),n.vspace&&(r["margin-top"]=r["margin-bottom"]=t(n.vspace)),n.hspace&&(r["margin-left"]=r["margin-right"]=t(n.hspace)),n.border&&(r["border-width"]=t(n.border)),f.find("#style").value(x.serializeStyle(x.parseStyle(x.serializeStyle(r))))}}function d(){if(e.settings.image_advtab){var t=f.toJSON(),n=x.parseStyle(t.style);f.find("#vspace").value(""),f.find("#hspace").value(""),n=c(n),(n["margin-top"]&&n["margin-bottom"]||n["margin-right"]&&n["margin-left"])&&(f.find("#vspace").value(n["margin-top"]===n["margin-bottom"]?a(n["margin-top"]):""),f.find("#hspace").value(n["margin-right"]===n["margin-left"]?a(n["margin-right"]):"")),n["border-width"]&&f.find("#border").value(a(n["border-width"])),f.find("#style").value(x.serializeStyle(x.parseStyle(x.serializeStyle(n))))}}var f,m,g,p,h,v,y,b={},x=e.dom,w=e.settings.image_dimensions!==!1;m=e.selection.getNode(),g=x.getParent(m,"figure.image"),g&&(m=x.select("img",g)[0]),m&&("IMG"!=m.nodeName||m.getAttribute("data-mce-object")||m.getAttribute("data-mce-placeholder"))&&(m=null),m&&(p=x.getAttrib(m,"width"),h=x.getAttrib(m,"height"),b={src:x.getAttrib(m,"src"),alt:x.getAttrib(m,"alt"),title:x.getAttrib(m,"title"),"class":x.getAttrib(m,"class"),width:p,height:h,caption:!!g}),r&&(v={type:"listbox",label:"Image list",values:n(r,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:b.src&&e.convertURL(b.src,"src"),onselect:function(e){var t=f.find("#alt");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),f.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){v=this}}),e.settings.image_class_list&&(y={name:"class",type:"listbox",label:"Class",values:n(e.settings.image_class_list,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})})});var C=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:s,onbeforecall:l},v];e.settings.image_description!==!1&&C.push({name:"alt",type:"textbox",label:"Image description"}),e.settings.image_title&&C.push({name:"title",type:"textbox",label:"Image Title"}),w&&C.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:i,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:i,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),C.push(y),e.settings.image_caption&&tinymce.Env.ceFalse&&C.push({name:"caption",type:"checkbox",label:"Caption"}),e.settings.image_advtab?(m&&(m.style.marginLeft&&m.style.marginRight&&m.style.marginLeft===m.style.marginRight&&(b.hspace=a(m.style.marginLeft)),m.style.marginTop&&m.style.marginBottom&&m.style.marginTop===m.style.marginBottom&&(b.vspace=a(m.style.marginTop)),m.style.borderWidth&&(b.border=a(m.style.borderWidth)),b.style=e.dom.serializeStyle(e.dom.parseStyle(e.dom.getAttrib(m,"style")))),f=e.windowManager.open({title:"Insert/edit image",data:b,bodyType:"tabpanel",body:[{title:"General",type:"form",items:C},{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:d},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:u},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}],onSubmit:o})):f=e.windowManager.open({title:"Insert/edit image",data:b,body:C,onSubmit:o})}e.on("preInit",function(){function t(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)}function n(e){return function(n){function r(t){t.attr("contenteditable",e?"true":null)}for(var i,o=n.length;o--;)i=n[o],t(i)&&(i.attr("contenteditable",e?"false":null),tinymce.each(i.getAll("figcaption"),r))}}e.parser.addNodeFilter("figure",n(!0)),e.serializer.addNodeFilter("figure",n(!1))}),e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:r(i),stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:r(i),context:"insert",prependToContext:!0}),e.addCommand("mceImage",r(i))})}.call(this),function(){tinymce.PluginManager.add("insertdatetime",function(e){function t(t,n){function r(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}return n=n||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+n.getFullYear()),t=t.replace("%y",""+n.getYear()),t=t.replace("%m",r(n.getMonth()+1,2)),t=t.replace("%d",r(n.getDate(),2)),t=t.replace("%H",""+r(n.getHours(),2)),t=t.replace("%M",""+r(n.getMinutes(),2)),t=t.replace("%S",""+r(n.getSeconds(),2)),t=t.replace("%I",""+((n.getHours()+11)%12+1)),t=t.replace("%p",""+(n.getHours()<12?"AM":"PM")),t=t.replace("%B",""+e.translate(l[n.getMonth()])),t=t.replace("%b",""+e.translate(s[n.getMonth()])),t=t.replace("%A",""+e.translate(a[n.getDay()])),t=t.replace("%a",""+e.translate(o[n.getDay()])),t=t.replace("%%","%")}function n(n){var r=t(n);if(e.settings.insertdatetime_element){var i;i=t(/%[HMSIp]/.test(n)?"%Y-%m-%dT%H:%M":"%Y-%m-%d"),r='<time datetime="'+i+'">'+r+"</time>";var o=e.dom.getParent(e.selection.getStart(),"time");if(o)return void e.dom.setOuterHTML(o,r)}e.insertContent(r)}var r,i,o="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),a="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),s="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),l="January February March April May June July August September October November December".split(" "),c=[];e.addCommand("mceInsertDate",function(){n(e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d")))}),e.addCommand("mceInsertTime",function(){n(e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S")))}),e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",onclick:function(){n(r||i)},menu:c}),tinymce.each(e.settings.insertdatetime_formats||["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"],function(e){i||(i=e),c.push({text:t(e),onclick:function(){r=e,n(e)}})}),e.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:c,context:"insert"})})}.call(this),function(){!function(){var e={},t=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),l=0;a>l;++l)s[l]=r(i[l]);var c=o.apply(null,s);if(void 0===c)throw"module ["+t+"] returned undefined";n.instance=c},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},i=function(e,t){for(var n=e.length,i=new Array(n),o=0;n>o;++o)i.push(r(e[o]));t.apply(null,t)},o={};o.bolt={module:{api:{define:n,require:i,demand:r}}};var a=n,s=function(e,t){a(e,[],function(){return t})};s("1",tinymce.PluginManager),s("2",tinymce.util.Tools),s("3",tinymce.util.VK),a("4",[],function(){var e=function(e){return e&&3===e.nodeType},t=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},n=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},r=function(e){return e&&"BR"===e.nodeName},i=function(e){return e.parentNode.firstChild===e},o=function(e){return e.parentNode.lastChild===e},a=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},s=function(e,t){return!!r(t)&&!(!e.isBlock(t.nextSibling)||r(t.previousSibling))},l=function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},c=function(e,t){return e.isChildOf(t,e.getRoot())};return{isTextNode:e,isListNode:t,isListItemNode:n,isBr:r,isFirstChild:i,isLastChild:o,isTextBlock:a,isBogusBr:s,isEmpty:l,isChildOfBody:c}}),s("9",tinymce.dom.TreeWalker),s("a",tinymce.dom.RangeUtils),a("b",["2","4"],function(e,t){var n=function(n){return e.grep(n.selection.getSelectedBlocks(),function(e){return t.isListItemNode(e)})};return{getSelectedListItems:n}}),s("h",tinymce.dom.DOMUtils.DOM),a("d",["a","4"],function(e,t){var n=function(n,r){var i=e.getNode(n,r);if(t.isListItemNode(n)&&t.isTextNode(i)){var o=r>=n.childNodes.length?i.data.length:0;return{container:i,offset:o}}return{container:n,offset:r}},r=function(e){var t=e.cloneRange(),r=n(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);var i=n(e.endContainer,e.endOffset);return t.setEnd(i.container,i.offset),t};return{getNormalizedEndPoint:n,normalizeRange:r}}),a("c",["h","4","d"],function(e,t,n){var r=function(t){var n={},r=function(r){var i,o,a;o=t[r?"startContainer":"endContainer"],a=t[r?"startOffset":"endOffset"],1===o.nodeType&&(i=e.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(a=Math.min(a,o.childNodes.length-1),r?o.insertBefore(i,o.childNodes[a]):e.insertAfter(i,o.childNodes[a])):o.appendChild(i),o=i,a=0),n[r?"startContainer":"endContainer"]=o,n[r?"startOffset":"endOffset"]=a};return r(!0),t.collapsed||r(),n},i=function(t){function r(n){var r,i,o,a=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1};r=o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],r&&(1===r.nodeType&&(i=a(r),r=r.parentNode,e.remove(o)),t[n?"startContainer":"endContainer"]=r,t[n?"startOffset":"endOffset"]=i)}r(!0),r();var i=e.createRng();return i.setStart(t.startContainer,t.startOffset),t.endContainer&&i.setEnd(t.endContainer,t.endOffset),n.normalizeRange(i)};return{createBookmark:r,resolveBookmark:i}}),a("e",["h","2","4"],function(e,t,n){var r=function(t,r){var i,o=r.parentNode;"LI"===o.nodeName&&o.firstChild===r&&(i=o.previousSibling,i&&"LI"===i.nodeName?(i.appendChild(r),n.isEmpty(t,o)&&e.remove(o)):e.setStyle(o,"listStyleType","none")),n.isListNode(o)&&(i=o.previousSibling,i&&"LI"===i.nodeName&&i.appendChild(r))},i=function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){r(e,t)})};return{normalizeList:r,normalizeLists:i}}),s("f",tinymce.dom.BookmarkManager),s("j",tinymce.Env),a("i",["h","j"],function(e,t){var n=function(n,r,i){var o,a,s,l=e.createFragment(),c=n.schema.getBlockElements();if(n.settings.forced_root_block&&(i=i||n.settings.forced_root_block),i&&(a=e.create(i),a.tagName===n.settings.forced_root_block&&e.setAttribs(a,n.settings.forced_root_block_attrs),l.appendChild(a)),r)for(;o=r.firstChild;){var u=o.nodeName;s||"SPAN"===u&&"bookmark"===o.getAttribute("data-mce-type")||(s=!0),c[u]?(l.appendChild(o),a=null):i?(a||(a=e.create(i),l.appendChild(a)),a.appendChild(o)):l.appendChild(o)}return n.settings.forced_root_block?s||t.ie&&!(t.ie>10)||a.appendChild(e.create("br",{"data-mce-bogus":"1"})):l.appendChild(e.create("br")),l};return{createNewTextBlock:n}}),a("g",["h","2","i","4"],function(e,t,n,r){var i=function(i,o,a,s){var l,c,u,d,f=function(n){t.each(u,function(e){n.parentNode.insertBefore(e,a.parentNode)}),e.remove(n)};for(u=e.select('span[data-mce-type="bookmark"]',o),s=s||n.createNewTextBlock(i,a),l=e.createRng(),l.setStartAfter(a),l.setEndAfter(o),c=l.extractContents(),d=c.firstChild;d;d=d.firstChild)if("LI"===d.nodeName&&i.dom.isEmpty(d)){e.remove(d);break}i.dom.isEmpty(c)||e.insertAfter(c,o),e.insertAfter(s,o),r.isEmpty(i.dom,a.parentNode)&&f(a.parentNode),e.remove(a),r.isEmpty(i.dom,o)&&e.remove(o)};return{splitList:i}}),a("7",["h","4","c","b","g","e","i"],function(e,t,n,r,i,o,a){var s=function(n,r){t.isEmpty(n,r)&&e.remove(r)},l=function(n,r){var l,c=r.parentNode,u=c.parentNode;return!(c!==n.getBody()&&("DD"===r.nodeName?(e.rename(r,"DT"),0):t.isFirstChild(r)&&t.isLastChild(r)?("LI"===u.nodeName?(e.insertAfter(r,u),s(n.dom,u),e.remove(c)):t.isListNode(u)?e.remove(c,!0):(u.insertBefore(a.createNewTextBlock(n,r),c),e.remove(c)),0):t.isFirstChild(r)?("LI"===u.nodeName?(e.insertAfter(r,u),r.appendChild(c),s(n.dom,u)):t.isListNode(u)?u.insertBefore(r,c):(u.insertBefore(a.createNewTextBlock(n,r),c),e.remove(r)),0):t.isLastChild(r)?("LI"===u.nodeName?e.insertAfter(r,u):t.isListNode(u)?e.insertAfter(r,c):(e.insertAfter(a.createNewTextBlock(n,r),c),e.remove(r)),0):("LI"===u.nodeName?(c=u,l=a.createNewTextBlock(n,r,"LI")):l=t.isListNode(u)?a.createNewTextBlock(n,r,"LI"):a.createNewTextBlock(n,r),i.splitList(n,c,r,l),o.normalizeLists(n.dom,c.parentNode),0)))},c=function(e){var t=r.getSelectedListItems(e);if(t.length){var i,o,a=n.createBookmark(e.selection.getRng(!0)),s=e.getBody();for(i=t.length;i--;)for(var c=t[i].parentNode;c&&c!==s;){for(o=t.length;o--;)if(t[o]===c){t.splice(i,1);break}c=c.parentNode}for(i=0;i<t.length&&(l(e,t[i])||0!==i);i++);return e.selection.setRng(n.resolveBookmark(a)),e.nodeChanged(),!0}};return{outdent:l,outdentSelection:c}}),a("8",["2","f","b","4","c","g","e","7"],function(e,t,n,r,i,o,a,s){var l=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},c=function(t,n){e.each(n,function(e,n){t.setAttribute(n,e)})},u=function(t,n,r){c(n,r["list-attributes"]),e.each(t.select("li",n),function(e){c(e,r["list-item-attributes"])})},d=function(e,t,n){l(e,t,n),u(e,t,n)},f=function(e,t,n){var i,o,a=e.getBody();for(i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===i.nodeType&&(i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i);i.parentNode!==a;){if(r.isTextBlock(e,i))return i;if(/^(TD|TH)$/.test(i.parentNode.nodeName))return i;i=i.parentNode}return i},m=function(n,i){for(var o,a=[],s=n.getBody(),l=n.dom,c=f(n,i,!0),u=f(n,i,!1),d=[],m=c;m&&(d.push(m),m!==u);m=m.nextSibling);return e.each(d,function(e){if(r.isTextBlock(n,e))return a.push(e),void(o=null);if(l.isBlock(e)||r.isBr(e))return r.isBr(e)&&l.remove(e),void(o=null);var i=e.nextSibling;return t.isBookmarkNode(e)&&(r.isTextBlock(n,i)||!i&&e.parentNode===s)?void(o=null):(o||(o=l.create("p"),e.parentNode.insertBefore(o,e),a.push(o)),void o.appendChild(e))}),a},g=function(t,n,o){var a,s=t.selection.getRng(!0),l="LI",c=t.dom;o=o?o:{},"false"!==c.getContentEditable(t.selection.getNode())&&(n=n.toUpperCase(),"DL"===n&&(l="DT"),a=i.createBookmark(s),e.each(m(t,s),function(e){var i,a,s=function(e){var t=c.getStyle(e,"list-style-type"),n=o?o["list-style-type"]:"";return n=null===n?"":n,t===n};a=e.previousSibling,a&&r.isListNode(a)&&a.nodeName===n&&s(a)?(i=a,e=c.rename(e,l),a.appendChild(e)):(i=c.create(n),e.parentNode.insertBefore(i,e),i.appendChild(e),e=c.rename(e,l)),d(c,i,o),x(t.dom,i)}),t.selection.setRng(i.resolveBookmark(a)))},p=function(t){var l=i.createBookmark(t.selection.getRng(!0)),c=t.getBody(),u=n.getSelectedListItems(t),d=e.grep(u,function(e){return t.dom.isEmpty(e)});u=e.grep(u,function(e){return!t.dom.isEmpty(e)}),e.each(d,function(e){return r.isEmpty(t.dom,e)?void s.outdent(t,e):void 0}),e.each(u,function(e){var n,i;if(e.parentNode!==t.getBody()){for(n=e;n&&n!==c;n=n.parentNode)r.isListNode(n)&&(i=n);o.splitList(t,i,e),a.normalizeLists(t.dom,i.parentNode)}}),t.selection.setRng(i.resolveBookmark(l))},h=function(e,t){return e&&t&&r.isListNode(e)&&e.nodeName===t.nodeName},v=function(e,t,n){var r=e.getStyle(t,"list-style-type",!0),i=e.getStyle(n,"list-style-type",!0);return r===i},y=function(e,t){return e.className===t.className},b=function(e,t,n){return h(t,n)&&v(e,t,n)&&y(t,n)},x=function(e,t){var n,r;if(n=t.nextSibling,b(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,b(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},w=function(e,t,n){var r=e.dom.getParent(e.selection.getStart(),"OL,UL,DL");if(n=n?n:{},r!==e.getBody())if(r)if(r.nodeName===t)p(e,t);else{var o=i.createBookmark(e.selection.getRng(!0));d(e.dom,r,n),x(e.dom,e.dom.rename(r,t)),e.selection.setRng(i.resolveBookmark(o))}else g(e,t,n)};return{toggleList:w,removeList:p,mergeWithAdjacentLists:x}}),a("5",["9","a","3","b","4","c","d","e","8"],function(e,t,n,r,i,o,a,s,l){var c=function(n,r,o){var a,s,l=r.startContainer,c=r.startOffset;if(3===l.nodeType&&(o?c<l.data.length:c>0))return l;for(a=n.schema.getNonEmptyElements(),1===l.nodeType&&(l=t.getNode(l,c)),s=new e(l,n.getBody()),o&&i.isBogusBr(n.dom,l)&&s.next();l=s[o?"next":"prev2"]();){if("LI"===l.nodeName&&!l.hasChildNodes())return l;if(a[l.nodeName])return l;if(3===l.nodeType&&l.data.length>0)return l}},u=function(e,t,n){var r,o,a=t.parentNode;if(i.isChildOfBody(e,t)&&i.isChildOfBody(e,n)){if(i.isListNode(n.lastChild)&&(o=n.lastChild),a===n.lastChild&&i.isBr(a.previousSibling)&&e.remove(a.previousSibling),r=n.lastChild,r&&i.isBr(r)&&t.hasChildNodes()&&e.remove(r),i.isEmpty(e,n,!0)&&e.$(n).empty(),!i.isEmpty(e,t,!0))for(;r=t.firstChild;)n.appendChild(r);o&&n.appendChild(o),e.remove(t),i.isEmpty(e,a)&&a!==e.getRoot()&&e.remove(a)}},d=function(e,t){var n,r,s,d=e.dom,f=e.selection,m=d.getParent(f.getStart(),"LI");if(m){if(n=m.parentNode,n===e.getBody()&&i.isEmpty(d,n))return!0;if(r=a.normalizeRange(f.getRng(!0)),s=d.getParent(c(e,r,t),"LI"),s&&s!==m){var g=o.createBookmark(r);return t?u(d,s,m):u(d,m,s),e.selection.setRng(o.resolveBookmark(g)),!0}if(!s&&!t&&l.removeList(e,n.nodeName))return!0}return!1},f=function(e,t){var n=e.dom,r=n.getParent(e.selection.getStart(),n.isBlock);if(r&&n.isEmpty(r)){var i=a.normalizeRange(e.selection.getRng(!0)),o=n.getParent(c(e,i,t),"LI");if(o)return e.undoManager.transact(function(){n.remove(r),l.mergeWithAdjacentLists(n,o.parentNode),e.selection.select(o,!0),e.selection.collapse(t)}),!0}return!1},m=function(e,t){return d(e,t)||f(e,t)},g=function(e){var t=e.dom.getParent(e.selection.getStart(),"LI,DT,DD");return!!(t||r.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),s.normalizeLists(e.dom,e.getBody())}),!0)},p=function(e,t){return e.selection.isCollapsed()?m(e,t):g(e)},h=function(e){e.on("keydown",function(t){t.keyCode===n.BACKSPACE?p(e,!1)&&t.preventDefault():t.keyCode===n.DELETE&&p(e,!0)&&t.preventDefault()})};return{setup:h,backspaceDelete:p}}),a("6",["h","4","c","b"],function(e,t,n,r){var i=function(n,r){var i;if(t.isListNode(n)){for(;i=n.firstChild;)r.appendChild(i);e.remove(n)}},o=function(n){var r,o,a;return"DT"===n.nodeName?(e.rename(n,"DD"),!0):(r=n.previousSibling,r&&t.isListNode(r)?(r.appendChild(n),!0):r&&"LI"===r.nodeName&&t.isListNode(r.lastChild)?(r.lastChild.appendChild(n),i(n.lastChild,r.lastChild),!0):(r=n.nextSibling,r&&t.isListNode(r)?(r.insertBefore(n,r.firstChild),!0):(r=n.previousSibling,!(!r||"LI"!==r.nodeName||(o=e.create(n.parentNode.nodeName),a=e.getStyle(n.parentNode,"listStyleType"),a&&e.setStyle(o,"listStyleType",a),r.appendChild(o),o.appendChild(n),i(n.lastChild,o),0)))))},a=function(e){var t=r.getSelectedListItems(e);if(t.length){for(var i=n.createBookmark(e.selection.getRng(!0)),a=0;a<t.length&&(o(t[a])||0!==a);a++);return e.selection.setRng(n.resolveBookmark(i)),e.nodeChanged(),!0}};return{indentSelection:a}}),a("0",["1","2","3","4","5","6","7","8"],function(e,t,n,r,i,o,a,s){var l=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},c=function(e){e.on("BeforeExecCommand",function(t){var n,r=t.command.toLowerCase();return"indent"===r?o.indentSelection(e)&&(n=!0):"outdent"===r&&a.outdentSelection(e)&&(n=!0),n?(e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0):void 0}),e.addCommand("InsertUnorderedList",function(t,n){s.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){s.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){s.toggleList(e,"DL",n)})},u=function(e){e.addQueryStateHandler("InsertUnorderedList",l(e,"UL")),e.addQueryStateHandler("InsertOrderedList",l(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",l(e,"DL"))},d=function(e){e.on("keydown",function(t){9!==t.keyCode||n.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?a.outdentSelection(e):o.indentSelection(e))})},f=function(e){var n=function(n){return function(){var i=this;e.on("NodeChange",function(e){var o=t.grep(e.parents,r.isListNode);i.active(o.length>0&&o[0].nodeName===n)})}},i=function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),n)};

i(e,"advlist")||(e.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:n("OL")}),e.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:n("UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){var n=t.control;e.on("nodechange",function(){for(var t=e.selection.getSelectedBlocks(),i=!1,o=0,a=t.length;!i&&a>o;o++){var s=t[o].nodeName;i="LI"===s&&r.isFirstChild(t[o])||"UL"===s||"OL"===s||"DD"===s}n.disabled(i)})}})};return e.add("lists",function(e){return f(e),i.setup(e),e.on("init",function(){c(e),u(e),d(e)}),{backspaceDelete:function(t){i.backspaceDelete(e,t)}}}),function(){}}),r("0")()}()}.call(this),function(){tinymce.PluginManager.add("noneditable",function(e){function t(e){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(e)}}function n(t){function n(t){var n=arguments,r=n[n.length-2],i=r>0?a.charAt(r-1):"";if('"'===i)return t;if(">"===i){var o=a.lastIndexOf("<",r);if(-1!==o){var l=a.substring(o,r);if(-1!==l.indexOf('contenteditable="false"'))return t}}return'<span class="'+s+'" data-mce-content="'+e.dom.encode(n[0])+'">'+e.dom.encode("string"==typeof n[1]?n[1]:n[0])+"</span>"}var r=o.length,a=t.content,s=tinymce.trim(i);if("raw"!=t.format){for(;r--;)a=a.replace(o[r],n);t.content=a}}var r,i,o,a="contenteditable";r=" "+tinymce.trim(e.getParam("noneditable_editable_class","mceEditable"))+" ",i=" "+tinymce.trim(e.getParam("noneditable_noneditable_class","mceNonEditable"))+" ";var s=t(r),l=t(i);o=e.getParam("noneditable_regexp"),o&&!o.length&&(o=[o]),e.on("PreInit",function(){o&&e.on("BeforeSetContent",n),e.parser.addAttributeFilter("class",function(e){for(var t,n=e.length;n--;)t=e[n],s(t)?t.attr(a,"true"):l(t)&&t.attr(a,"false")}),e.serializer.addAttributeFilter(a,function(e){for(var t,n=e.length;n--;)t=e[n],(s(t)||l(t))&&(o&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr(a,null))})})})}.call(this),function(){tinymce.PluginManager.add("preview",function(e){var t=e.settings,n=!tinymce.Env.ie;e.addCommand("mcePreview",function(){e.windowManager.open({title:"Preview",width:parseInt(e.getParam("plugin_preview_width","650"),10),height:parseInt(e.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"'+(n?' sandbox="allow-scripts"':"")+"></iframe>",buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var r,i="";i+='<base href="'+e.documentBaseURI.getURI()+'">',tinymce.each(e.contentCSS,function(t){i+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'});var o=t.body_id||"tinymce";-1!=o.indexOf("=")&&(o=e.getParam("body_id","","hash"),o=o[e.id]||o);var a=t.body_class||"";-1!=a.indexOf("=")&&(a=e.getParam("body_class","","hash"),a=a[e.id]||"");var s='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);</script> ',l=e.settings.directionality?' dir="'+e.settings.directionality+'"':"";if(r="<!DOCTYPE html><html><head>"+i+'</head><body id="'+o+'" class="mce-content-body '+a+'"'+l+">"+e.getContent()+s+"</body></html>",n)this.getEl("body").firstChild.src="data:text/html;charset=utf-8,"+encodeURIComponent(r);else{var c=this.getEl("body").firstChild.contentWindow.document;c.open(),c.write(r),c.close()}}})}),e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})})}.call(this),function(){!function(){function e(e){return e&&1==e.nodeType&&"false"===e.contentEditable}function t(t,n,r,i,o){function a(e,t){if(t=t||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n=e.index;if(t>0){var r=e[t];if(!r)throw"Invalid capture group";n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}function s(t){var n;if(3===t.nodeType)return t.data;if(g[t.nodeName]&&!m[t.nodeName])return"";if(n="",e(t))return"\n";if((m[t.nodeName]||p[t.nodeName])&&(n+="\n"),t=t.firstChild)do n+=s(t);while(t=t.nextSibling);return n}function l(t,n,r){var i,o,a,s,l=[],c=0,u=t,d=n.shift(),f=0;e:for(;;){if((m[u.nodeName]||p[u.nodeName]||e(u))&&c++,3===u.nodeType&&(!o&&u.length+c>=d[1]?(o=u,s=d[1]-c):i&&l.push(u),!i&&u.length+c>d[0]&&(i=u,a=d[0]-c),c+=u.length),i&&o){if(u=r({startNode:i,startNodeIndex:a,endNode:o,endNodeIndex:s,innerNodes:l,match:d[2],matchIndex:f}),c-=o.length-s,i=null,o=null,l=[],d=n.shift(),f++,!d)break}else if(g[u.nodeName]&&!m[u.nodeName]||!u.firstChild){if(u.nextSibling){u=u.nextSibling;continue}}else if(!e(u)){u=u.firstChild;continue}for(;;){if(u.nextSibling){u=u.nextSibling;break}if(u.parentNode===t)break e;u=u.parentNode}}}function c(e){var t;if("function"!=typeof e){var n=e.nodeType?e:f.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(f.createTextNode(e)),r}}else t=e;return function(e){var n,r,i,o=e.startNode,a=e.endNode,s=e.matchIndex;if(o===a){var l=o;i=l.parentNode,e.startNodeIndex>0&&(n=f.createTextNode(l.data.substring(0,e.startNodeIndex)),i.insertBefore(n,l));var c=t(e.match[0],s);return i.insertBefore(c,l),e.endNodeIndex<l.length&&(r=f.createTextNode(l.data.substring(e.endNodeIndex)),i.insertBefore(r,l)),l.parentNode.removeChild(l),c}n=f.createTextNode(o.data.substring(0,e.startNodeIndex)),r=f.createTextNode(a.data.substring(e.endNodeIndex));for(var u=t(o.data.substring(e.startNodeIndex),s),d=[],m=0,g=e.innerNodes.length;g>m;++m){var p=e.innerNodes[m],h=t(p.data,s);p.parentNode.replaceChild(h,p),d.push(h)}var v=t(a.data.substring(0,e.endNodeIndex),s);return i=o.parentNode,i.insertBefore(n,o),i.insertBefore(u,o),i.removeChild(o),i=a.parentNode,i.insertBefore(v,a),i.insertBefore(r,a),i.removeChild(a),v}}var u,d,f,m,g,p,h=[],v=0;if(f=n.ownerDocument,m=o.getBlockElements(),g=o.getWhiteSpaceElements(),p=o.getShortEndedElements(),d=s(n)){if(t.global)for(;u=t.exec(d);)h.push(a(u,i));else u=d.match(t),h.push(a(u,i));return h.length&&(v=h.length,l(n,h,c(r))),v}}function n(e){function n(){function t(){o.statusbar.find("#next").disabled(!a(d+1).length),o.statusbar.find("#prev").disabled(!a(d-1).length)}function n(){e.windowManager.alert("Could not find the specified string.",function(){o.find("#find")[0].focus()})}var r,i={};r=tinymce.trim(e.selection.getContent({format:"text"}));var o=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),u.done()},onSubmit:function(e){var r,s,l,c;return e.preventDefault(),s=o.find("#case").checked(),c=o.find("#words").checked(),l=o.find("#find").value(),l.length?i.text==l&&i.caseState==s&&i.wholeWord==c?0===a(d+1).length?void n():(u.next(),void t()):(r=u.find(l,s,c),r||n(),o.statusbar.items().slice(1).disabled(0===r),t(),void(i={text:l,caseState:s,wholeWord:c})):(u.done(!1),void o.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){o.submit()}},{text:"Replace",disabled:!0,onclick:function(){u.replace(o.find("#replace").value())||(o.statusbar.items().slice(1).disabled(!0),d=-1,i={})}},{text:"Replace all",disabled:!0,onclick:function(){u.replace(o.find("#replace").value(),!0,!0),o.statusbar.items().slice(1).disabled(!0),i={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){u.prev(),t()}},{text:"Next",name:"next",disabled:!0,onclick:function(){u.next(),t()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:r},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}function r(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function i(n){var r,i;return i=e.dom.create("span",{"data-mce-bogus":1}),i.className="mce-match-marker",r=e.getBody(),u.done(!1),t(n,r,i,!1,e.schema)}function o(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function a(t){var n,i=[];if(n=tinymce.toArray(e.getBody().getElementsByTagName("span")),n.length)for(var o=0;o<n.length;o++){var a=r(n[o]);null!==a&&a.length&&a===t.toString()&&i.push(n[o])}return i}function s(t){var n=d,r=e.dom;t=t!==!1,t?n++:n--,r.removeClass(a(d),"mce-match-marker-selected");var i=a(n);return i.length?(r.addClass(a(n),"mce-match-marker-selected"),e.selection.scrollIntoView(i[0]),n):-1}function l(t){var n=e.dom,r=t.parentNode;n.remove(t),n.isEmpty(r)&&n.remove(r)}function c(e){var t=r(e);return null!==t&&t.length>0}var u=this,d=-1;u.init=function(e){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:n,separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Meta+F",onclick:n}),e.addCommand("SearchReplace",n),e.shortcuts.add("Meta+F","",n)},u.find=function(e,t,n){e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e=n?"\\b"+e+"\\b":e;var r=i(new RegExp(e,t?"g":"gi"));return r&&(d=-1,d=s(!0)),r},u.next=function(){var e=s(!0);-1!==e&&(d=e)},u.prev=function(){var e=s(!1);-1!==e&&(d=e)},u.replace=function(t,n,i){var s,f,m,g,p,h,v=d;for(n=n!==!1,m=e.getBody(),f=tinymce.grep(tinymce.toArray(m.getElementsByTagName("span")),c),s=0;s<f.length;s++){var y=r(f[s]);if(g=p=parseInt(y,10),i||g===d){for(t.length?(f[s].firstChild.nodeValue=t,o(f[s])):l(f[s]);f[++s];){if(g=parseInt(r(f[s]),10),g!==p){s--;break}l(f[s])}n&&v--}else p>d&&f[s].setAttribute("data-mce-index",p-1)}return e.undoManager.add(),d=v,n?(h=a(v+1).length>0,u.next()):(h=a(v-1).length>0,u.prev()),!i&&h},u.done=function(t){var n,i,a,s;for(i=tinymce.toArray(e.getBody().getElementsByTagName("span")),n=0;n<i.length;n++){var l=r(i[n]);null!==l&&l.length&&(l===d.toString()&&(a||(a=i[n].firstChild),s=i[n].firstChild),o(i[n]))}if(a&&s){var c=e.dom.createRng();return c.setStart(a,0),c.setEnd(s,s.data.length),t!==!1&&e.selection.setRng(c),c}}}tinymce.PluginManager.add("searchreplace",n)}()}.call(this),function(){!function(e,t){"use strict";function n(e,t){for(var n,r=[],a=0;a<e.length;++a){if(n=o[e[a]]||i(e[a]),!n)throw"module definition dependecy not found: "+e[a];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){o[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}var o={};r("tinymce/tableplugin/Utils",["tinymce/Env"],function(e){function t(t){(!e.ie||e.ie>9)&&(t.hasChildNodes()||(t.innerHTML='<br data-mce-bogus="1" />'))}var n=function(e){return function(t,n){t&&(n=parseInt(n,10),1===n||0===n?t.removeAttribute(e,1):t.setAttribute(e,n,1))}},r=function(e){return function(t){return parseInt(t.getAttribute(e)||1,10)}};return{setColSpan:n("colSpan"),setRowSpan:n("rowspan"),getColSpan:r("colSpan"),getRowSpan:r("rowSpan"),setSpanVal:function(e,t,r){n(t)(e,r)},getSpanVal:function(e,t){return r(t)(e)},paddCell:t}}),r("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,t){var n=function(e,t,n){return e[n]?e[n][t]:null},r=function(e,t,r){var i=n(e,t,r);return i?i.elm:null},i=function(e,t,i,o){var a,s,l=0,c=r(e,t,i);for(a=i;(o>0?a<e.length:a>=0)&&(s=n(e,t,a),c===s.elm);a+=o)l++;return l},o=function(e,t,n){for(var r,i=e[n],o=t;o<i.length;o++)if(r=i[o],r.real)return r.elm;return null},a=function(e,n){for(var r,o=[],a=e[n],s=0;s<a.length;s++)r=a[s],o.push({elm:r.elm,above:i(e,s,n,-1)-1,below:i(e,s,n,1)-1}),s+=t.getColSpan(r.elm)-1;return o},s=function(e,n){var r=e.elm.ownerDocument,i=r.createElement("td");return t.setColSpan(i,t.getColSpan(e.elm)),t.setRowSpan(i,n),t.paddCell(i),i},l=function(e,t,n,r){var i=o(e,n+1,r);i?i.parentNode.insertBefore(t,i):(i=o(e,0,r),i.parentNode.appendChild(t))},c=function(e,n,r,i){if(0!==n.above){t.setRowSpan(n.elm,n.above);var o=s(n,n.below+1);return l(e,o,r,i),o}return null},u=function(e,n,r,i){if(0!==n.below){t.setRowSpan(n.elm,n.above+1);var o=s(n,n.below);return l(e,o,r,i+1),o}return null},d=function(t,n,i,o){var s=a(t,i),l=r(t,n,i).parentNode,d=[];return e.each(s,function(e,n){var r=o?c(t,e,n,i):u(t,e,n,i);null!==r&&d.push(d)}),{cells:d,row:l}};return{splitAt:d}}),r("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(e,n,r,i){var o=e.each,a=r.getSpanVal,s=r.setSpanVal;return function(l,c,u){function d(){l.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function f(e){return e===l.getBody()}function m(t,n){return t?(n=e.map(n.split(","),function(e){return e.toLowerCase()}),e.grep(t.childNodes,function(t){return-1!==e.inArray(n,t.nodeName.toLowerCase())})):[]}function g(){var e=0;Z=[],Q=0,o(["thead","tbody","tfoot"],function(t){var n=m(c,t)[0],r=m(n,"tr");o(r,function(n,r){r+=e,o(m(n,"td,th"),function(e,n){var i,o,s,l;if(Z[r])for(;Z[r][n];)n++;for(s=a(e,"rowspan"),l=a(e,"colspan"),o=r;r+s>o;o++)for(Z[o]||(Z[o]=[]),i=n;n+l>i;i++)Z[o][i]={part:t,real:o==r&&i==n,elm:e,rowspan:s,colspan:l};Q=Math.max(Q,n+1)})}),e+=r.length})}function p(e){return l.fire("newrow",{node:e}),e}function h(e){return l.fire("newcell",{node:e}),e}function v(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function y(e,t){var n;return(n=Z[t])?n[e]:void 0}function b(e,t){return e[t]?e[t]:null}function x(e,t){for(var n=[],r=0;r<e.length;r++)n.push(y(t,r));return n}function w(e){return e&&(!!re.getAttrib(e.elm,"data-mce-selected")||e==u)}function C(){var e=[];return o(c.rows,function(t){o(t.cells,function(n){return re.getAttrib(n,"data-mce-selected")||u&&n==u.elm?(e.push(t),!1):void 0})}),e}function k(){var e=0;return o(Z,function(t){return o(t,function(t){w(t)&&e++}),e?!1:void 0}),e}function N(){var e=re.createRng();f(c)||(e.setStartAfter(c),e.setEndAfter(c),ne.setRng(e),re.remove(c))}function S(t){var i,a={};return l.settings.table_clone_elements!==!1&&(a=e.makeMap((l.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(t,function(e){var r;return 3==e.nodeType?(o(re.getParents(e.parentNode,null,t).reverse(),function(e){a[e.nodeName]&&(e=v(e,!1),i?r&&r.appendChild(e):i=r=e,r=e)}),r&&(r.innerHTML=n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),t=v(t,!1),h(t),s(t,"rowSpan",1),s(t,"colSpan",1),i?t.appendChild(i):r.paddCell(t),t}function _(){var e,t=re.createRng();return o(re.select("tr",c),function(e){0===e.cells.length&&re.remove(e)}),0===re.select("tr",c).length?(t.setStartBefore(c),t.setEndBefore(c),ne.setRng(t),void re.remove(c)):(o(re.select("thead,tbody,tfoot",c),function(e){0===e.rows.length&&re.remove(e)}),g(),void(ee&&(e=Z[Math.min(Z.length-1,ee.y)],e&&(ne.select(e[Math.min(e.length-1,ee.x)].elm,!0),ne.collapse(!0)))))}function T(e,t,n,r){var i,o,a,s,l;for(i=Z[t][e].elm.parentNode,a=1;n>=a;a++)if(i=re.getNext(i,"tr")){for(o=e;o>=0;o--)if(l=Z[t+a][o].elm,l.parentNode==i){for(s=1;r>=s;s++)re.insertAfter(S(l),l);break}if(-1==o)for(s=1;r>=s;s++)i.insertBefore(S(i.cells[0]),i.cells[0])}}function E(){o(Z,function(e,t){o(e,function(e,n){var r,i,o;if(w(e)&&(e=e.elm,r=a(e,"colspan"),i=a(e,"rowspan"),r>1||i>1)){for(s(e,"rowSpan",1),s(e,"colSpan",1),o=0;r-1>o;o++)re.insertAfter(S(e),e);T(n,t,i-1,r)}})})}function R(e,t,n){for(var r=[],i=0;i<e.length;i++)(t>i||i>n)&&r.push(e[i]);return r}function A(t){return e.grep(t,function(e){return e.real===!1})}function B(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].elm;t[t.length-1]!==r&&t.push(r)}return t}function P(t,n,i,o,a){var s=0;if(1>a-i)return 0;for(var l=i+1;a>=l;l++){var c=R(b(t,l),n,o),u=A(c);c.length===u.length&&(e.each(B(u),function(e){r.setRowSpan(e,r.getRowSpan(e)-1)}),s++)}return s}function M(t,n,i,o,a){var s=0;if(1>o-n)return 0;for(var l=n+1;o>=l;l++){var c=R(x(t,l),i,a),u=A(c);c.length===u.length&&(e.each(B(u),function(e){r.setColSpan(e,r.getColSpan(e)-1)}),s++)}return s}function D(t,n,r){var i,a,l,c,u,d,f,m,p,h,v,b,x;if(t?(i=q(t),a=i.x,l=i.y,c=a+(n-1),u=l+(r-1)):(ee=te=null,o(Z,function(e,t){o(e,function(e,n){w(e)&&(ee||(ee={x:n,y:t}),te={x:n,y:t})})}),ee&&(a=ee.x,l=ee.y,c=te.x,u=te.y)),m=y(a,l),p=y(c,u),m&&p&&m.part==p.part){E(),g(),b=P(Z,a,l,c,u),x=M(Z,a,l,c,u),m=y(a,l).elm;var C=c-a-x+1,k=u-l-b+1;for(C===Q&&k===Z.length&&(C=1,k=1),C===Q&&k>1&&(k=1),s(m,"colSpan",C),s(m,"rowSpan",k),f=l;u>=f;f++)for(d=a;c>=d;d++)Z[f]&&Z[f][d]&&(t=Z[f][d].elm,t!=m&&(h=e.grep(t.childNodes),o(h,function(e){m.appendChild(e)}),h.length&&(h=e.grep(m.childNodes),v=0,o(h,function(e){"BR"==e.nodeName&&v++<h.length-1&&m.removeChild(e)})),re.remove(t)));_()}}function I(e){var n,r,i,l,c,u,d,f,m,g;if(o(Z,function(r,i){return o(r,function(t){return w(t)&&(t=t.elm,c=t.parentNode,u=p(v(c,!1)),n=i,e)?!1:void 0}),e?n===t:void 0}),n!==t){for(l=0,g=0;l<Z[0].length;l+=g)if(Z[n][l]&&(r=Z[n][l].elm,g=a(r,"colspan"),r!=i)){if(e){if(n>0&&Z[n-1][l]&&(f=Z[n-1][l].elm,m=a(f,"rowSpan"),m>1)){s(f,"rowSpan",m+1);continue}}else if(m=a(r,"rowspan"),m>1){s(r,"rowSpan",m+1);continue}d=S(r),s(d,"colSpan",r.colSpan),u.appendChild(d),i=r}u.hasChildNodes()&&(e?c.parentNode.insertBefore(u,c):re.insertAfter(u,c))}}function L(e,t){t=t||C().length||1;for(var n=0;t>n;n++)I(e)}function O(e){var n,r;o(Z,function(r){return o(r,function(t,r){return w(t)&&(n=r,e)?!1:void 0}),e?n===t:void 0}),o(Z,function(t,i){var o,l,c;t[n]&&(o=t[n].elm,o!=r&&(c=a(o,"colspan"),l=a(o,"rowspan"),1==c?e?(o.parentNode.insertBefore(S(o),o),T(n,i,l-1,c)):(re.insertAfter(S(o),o),T(n,i,l-1,c)):s(o,"colSpan",o.colSpan+1),r=o))})}function H(e,t){t=t||k()||1;for(var n=0;t>n;n++)O(e)}function F(t){return e.grep(z(t),w)}function z(e){var t=[];return o(e,function(e){o(e,function(e){t.push(e)})}),t}function U(){var t=[];if(f(c)){if(1==Z[0].length)return;if(F(Z).length==z(Z).length)return}o(Z,function(n){o(n,function(n,r){w(n)&&-1===e.inArray(t,r)&&(o(Z,function(e){var t,n=e[r].elm;t=a(n,"colSpan"),t>1?s(n,"colSpan",t-1):re.remove(n)}),t.push(r))})}),_()}function W(){function e(e){var t,n;o(e.cells,function(e){var n=a(e,"rowSpan");n>1&&(s(e,"rowSpan",n-1),t=q(e),T(t.x,t.y,1,1))}),t=q(e.cells[0]),o(Z[t.y],function(e){var t;e=e.elm,e!=n&&(t=a(e,"rowSpan"),1>=t?re.remove(e):s(e,"rowSpan",t-1),n=e)})}var t;t=C(),f(c)&&t.length==c.rows.length||(o(t.reverse(),function(t){e(t)}),_())}function $(){var e=C();return f(c)&&e.length==c.rows.length?void 0:(re.remove(e),_(),e)}function j(){var e=C();return o(e,function(t,n){e[n]=v(t,!0)}),e}function V(t,n){var r,a,l;t&&(r=i.splitAt(Z,ee.x,ee.y,n),a=r.row,e.each(r.cells,h),l=e.map(t,function(e){return e.cloneNode(!0)}),n||l.reverse(),o(l,function(e){var t,r,i=e.cells.length;for(p(e),t=0;i>t;t++)r=e.cells[t],h(r),s(r,"colSpan",1),s(r,"rowSpan",1);for(t=i;Q>t;t++)e.appendChild(h(S(e.cells[i-1])));for(t=Q;i>t;t++)re.remove(e.cells[t]);n?a.parentNode.insertBefore(e,a):re.insertAfter(e,a)}),d())}function q(e){var t;return o(Z,function(n,r){return o(n,function(n,i){return n.elm==e?(t={x:i,y:r},!1):void 0}),!t}),t}function Y(e){ee=q(e)}function K(){var e,t;return e=t=0,o(Z,function(n,r){o(n,function(n,i){var o,a;w(n)&&(n=Z[r][i],i>e&&(e=i),r>t&&(t=r),n.real&&(o=n.colspan-1,a=n.rowspan-1,o&&i+o>e&&(e=i+o),a&&r+a>t&&(t=r+a)))})}),{x:e,y:t}}function X(e){var t,n,r,i,o,a,s,l,c,u;if(te=q(e),ee&&te){for(t=Math.min(ee.x,te.x),n=Math.min(ee.y,te.y),r=Math.max(ee.x,te.x),i=Math.max(ee.y,te.y),o=r,a=i,u=n;i>=u;u++)for(c=t;r>=c;c++)e=Z[u][c],e.real&&(s=e.colspan-1,l=e.rowspan-1,s&&c+s>o&&(o=c+s),l&&u+l>a&&(a=u+l));for(d(),u=n;a>=u;u++)for(c=t;o>=c;c++)Z[u][c]&&re.setAttrib(Z[u][c].elm,"data-mce-selected","1")}}function G(e,t){var n,r,i;n=q(e),r=n.y*Q+n.x;do{if(r+=t,i=y(r%Q,Math.floor(r/Q)),!i)break;if(i.elm!=e)return ne.select(i.elm,!0),re.isEmpty(i.elm)&&ne.collapse(!0),!0}while(i.elm==e);return!1}function J(t){if(ee){var n=i.splitAt(Z,ee.x,ee.y,t);e.each(n.cells,h)}}var Z,Q,ee,te,ne=l.selection,re=ne.dom;c=c||re.getParent(ne.getStart(!0),"table"),g(),u=u||re.getParent(ne.getStart(!0),"th,td"),u&&(ee=q(u),te=K(),u=y(ee.x,ee.y)),e.extend(this,{deleteTable:N,split:E,merge:D,insertRow:I,insertRows:L,insertCol:O,insertCols:H,splitCols:J,deleteCols:U,deleteRows:W,cutRows:$,copyRows:j,pasteRows:V,getPos:q,setStartCell:Y,setEndCell:X,moveRelIdx:G,refresh:g})}}),r("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,t,n,r,i){var o=r.each,a=i.getSpanVal;return function(s){function l(){function n(n){function r(e,t){var r=e?"previousSibling":"nextSibling",o=s.dom.getParent(t,"tr"),a=o[r];if(a)return v(s,t,a,e),n.preventDefault(),!0;var l=s.dom.getParent(o,"table"),d=o.parentNode,f=d.nodeName.toLowerCase();if("tbody"===f||f===(e?"tfoot":"thead")){var m=i(e,l,d,"tbody");if(null!==m)return c(e,m,t)}return u(e,o,r,l)}function i(e,t,n,r){var i=s.dom.select(">"+r,t),o=i.indexOf(n);if(e&&0===o||!e&&o===i.length-1)return l(e,t);if(-1===o){var a="thead"===n.tagName.toLowerCase()?0:i.length-1;return i[a]}return i[o+(e?-1:1)]}function l(e,t){var n=e?"thead":"tfoot",r=s.dom.select(">"+n,t);return 0!==r.length?r[0]:null}function c(e,t,r){var i=d(t,e);return i&&v(s,r,i,e),n.preventDefault(),!0}function u(e,t,i,o){var a=o[i];if(a)return f(a),!0;var l=s.dom.getParent(o,"td,th");if(l)return r(e,l,n);var c=d(t,!e);return f(c),n.preventDefault(),!1}function d(e,t){var n=e&&e[t?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?s.dom.getParent(n,"td,th"):n}function f(e){s.selection.setCursorLocation(e,0)}function m(){return x==e.UP||x==e.DOWN}function g(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"tr");return null!==n}function p(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=a(n,"colspan");return t}function h(e,t){var n=0,r=0;return o(e.children,function(e,i){return n+=a(e,"colspan"),r=i,n>t?!1:void 0}),r}function v(e,t,n,r){var i=p(s.dom.getParent(t,"td,th")),o=h(n,i),a=n.childNodes[o],l=d(a,r);f(l||a)}function y(e){var t=s.selection.getNode(),n=s.dom.getParent(t,"td,th"),r=s.dom.getParent(e,"td,th");return n&&n!==r&&b(n,r)}function b(e,t){return s.dom.getParent(e,"TABLE")===s.dom.getParent(t,"TABLE")}var x=n.keyCode;if(m()&&g(s)){var w=s.selection.getNode();t.setEditorTimeout(s,function(){y(w)&&r(!n.shiftKey&&x===e.UP,w,n)},0)}}s.on("KeyDown",function(e){n(e)})}function c(){function e(e,t){var n,r=t.ownerDocument,i=r.createRange();return i.setStartBefore(t),i.setEnd(e.endContainer,e.endOffset),n=r.createElement("body"),n.appendChild(i.cloneContents()),0===n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}s.on("KeyDown",function(t){var n,r,i=s.dom;37!=t.keyCode&&38!=t.keyCode||(n=s.selection.getRng(),r=i.getParent(n.startContainer,"table"),r&&s.getBody().firstChild==r&&e(n,r)&&(n=i.createRng(),n.setStartBefore(r),n.setEndBefore(r),s.selection.setRng(n),t.preventDefault()))})}function u(){s.on("KeyDown SetContent VisualAid",function(){var e;for(e=s.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(s.settings.forced_root_block?s.dom.add(s.getBody(),s.settings.forced_root_block,s.settings.forced_root_block_attrs,n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):s.dom.add(s.getBody(),"br",{"data-mce-bogus":"1"}))}),s.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||""==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&s.dom.remove(t)})}function d(){function e(e,t,n,r){var i,o,a,s=3,l=e.dom.getParent(t.startContainer,"TABLE");return l&&(i=l.parentNode),o=t.startContainer.nodeType==s&&0===t.startOffset&&0===t.endOffset&&r&&("TR"==n.nodeName||n==i),a=("TD"==n.nodeName||"TH"==n.nodeName)&&!r,o||a}function t(){var t=s.selection.getRng(),n=s.selection.getNode(),r=s.dom.getParent(t.startContainer,"TD,TH");if(e(s,t,n,r)){r||(r=n);for(var i=r.lastChild;i.lastChild;)i=i.lastChild;3==i.nodeType&&(t.setEnd(i,i.data.length),s.selection.setRng(t))}}s.on("KeyDown",function(){t()}),s.on("MouseDown",function(e){2!=e.button&&t()})}function f(){function t(e){s.selection.select(e,!0),s.selection.collapse(!0)}function n(e){s.$(e).empty(),i.paddCell(e)}s.on("keydown",function(i){if((i.keyCode==e.DELETE||i.keyCode==e.BACKSPACE)&&!i.isDefaultPrevented()){var o,a,l,c;if(o=s.dom.getParent(s.selection.getStart(),"table")){if(a=s.dom.select("td,th",o),l=r.grep(a,function(e){return!!s.dom.getAttrib(e,"data-mce-selected")}),0===l.length)return c=s.dom.getParent(s.selection.getStart(),"td,th"),void(s.selection.isCollapsed()&&c&&s.dom.isEmpty(c)&&(i.preventDefault(),n(c),t(c)));i.preventDefault(),s.undoManager.transact(function(){a.length==l.length?s.execCommand("mceTableDelete"):(r.each(l,n),t(l[0]))})}}})}function m(){var t=function(e){return e&&"CAPTION"==e.nodeName&&"TABLE"==e.parentNode.nodeName},r=function(e,t){var n=s.selection.getRng(),r=e.ownerDocument.createTextNode("");n.startOffset?e.insertBefore(r,e.firstChild):e.appendChild(r),t&&(s.selection.select(r,!0),s.selection.collapse(!0))},i=function(t){return(t.keyCode==e.DELETE||t.keyCode==e.BACKSPACE)&&!t.isDefaultPrevented()},o=function(e){return e.firstChild===e.lastChild&&e.firstChild},a=function(e){return e&&3===e.nodeType},l=function(e){var t=o(e);return a(t)&&1===t.data.length?t.data:null},c=function(e){var t=o(e),n=l(e);return t&&!a(t)||n&&!d(n)},u=function(e){return s.dom.isEmpty(e)||d(l(e))},d=function(e){return""===e};s.on("keydown",function(e){if(i(e)){var o=s.dom.getParent(s.selection.getStart(),"caption");t(o)&&(n.ie&&(s.selection.isCollapsed()?c(o)&&r(o):(s.undoManager.transact(function(){s.execCommand("Delete"),u(o)&&r(o,!0)}),e.preventDefault())),u(o)&&e.preventDefault())}})}f(),m(),n.webkit&&(l(),d()),n.gecko&&(c(),u()),n.ie>9&&(c(),u())}}),r("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(e,t,n){return function(e,r){function i(t){e.getBody().style.webkitUserSelect="",(t||g)&&(e.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),g=!1)}function o(e,t){return!(!e||!t)&&e===m.getParent(t,"table")}function a(t){var n,i,a=t.target;if(!d&&!f&&a!==u&&(u=a,c&&l)){if(i=m.getParent(a,"td,th"),o(c,i)||(i=m.getParent(c,"td,th")),l===i&&!g)return;if(r(!0),o(c,i)){t.preventDefault(),s||(s=new p(e,c,l),e.getBody().style.webkitUserSelect="none"),s.setEndCell(i),g=!0,n=e.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(p){}}}}var s,l,c,u,d,f,m=e.dom,g=!0,p=function(){l=s=c=u=null,r(!1)};return e.on("SelectionChange",function(e){g&&e.stopImmediatePropagation()},!0),e.on("MouseDown",function(e){2==e.button||d||f||(i(),l=m.getParent(e.target,"td,th"),c=m.getParent(l,"table"))}),e.on("mouseover",a),e.on("remove",function(){m.unbind(e.getDoc(),"mouseover",a),i()}),e.on("MouseUp",function(){function r(e,r){var o=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return void(r?i.setStart(e,0):i.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(r?i.setStartBefore(e):i.setEndBefore(e))}while(e=r?o.next():o.prev())}var i,o,a,c,u,d=e.selection;if(l){if(s&&(e.getBody().style.webkitUserSelect=""),o=m.select("td[data-mce-selected],th[data-mce-selected]"),o.length>0){i=m.createRng(),c=o[0],i.setStartBefore(c),i.setEndAfter(c),r(c,1),a=new t(c,m.getParent(o[0],"table"));do if("TD"==c.nodeName||"TH"==c.nodeName){if(!m.getAttrib(c,"data-mce-selected"))break;u=c}while(c=a.next());r(u),d.setRng(i)}e.nodeChanged(),p()}}),e.on("KeyUp Drop SetContent",function(e){i("setcontent"==e.type),p(),d=!1}),e.on("ObjectResizeStart ObjectResized",function(e){d="objectresized"!=e.type}),e.on("dragstart",function(){f=!0}),e.on("drop dragend",function(){f=!1}),{clear:i}}}),r("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each;return function(r){function i(){var e=r.settings.color_picker_callback;return e?function(){var t=this;e.call(r,function(e){t.value(e).fire("change")},t.value())}:void 0}function o(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){d(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:i()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:i()}]}]}}function a(e){return e?e.replace(/px$/,""):""}function s(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function l(e){n("left center right".split(" "),function(t){r.formatter.remove("align"+t,{},e)})}function c(e){n("top middle bottom".split(" "),function(t){r.formatter.remove("valign"+t,{},e)})}function u(t,n,r){function i(t,r){return r=r||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=i(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r}return i(t,r||[])}function d(e,t,n){var r=t.toJSON(),i=e.parseStyle(r.style);n?(t.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change")):(i["border-color"]=r.borderColor,i["background-color"]=r.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(i))))}function f(e,t,n){var r=e.parseStyle(e.getAttrib(n,"style"));r["border-color"]&&(t.borderColor=r["border-color"]),r["background-color"]&&(t.backgroundColor=r["background-color"]),t.style=e.serializeStyle(r)}function m(e,t,r){var i=e.parseStyle(e.getAttrib(t,"style"));n(r,function(e){i[e.name]=e.value}),e.setAttrib(t,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(i))))}var g=this;g.tableProps=function(){g.table(!0)},g.table=function(i){function c(){function n(e,t,r){if("TD"===e.tagName||"TH"===e.tagName)w.setStyle(e,t,r);else if(e.children)for(var i=0;i<e.children.length;i++)n(e.children[i],t,r)}var i;d(w,this),C=e.extend(C,this.toJSON()),C["class"]===!1&&delete C["class"],r.undoManager.transact(function(){if(p||(p=r.plugins.table.insertTable(C.cols||1,C.rows||1)),r.dom.setAttribs(p,{style:C.style,"class":C["class"]}),r.settings.table_style_by_css){if(x=[],x.push({name:"border",value:C.border}),x.push({name:"border-spacing",value:s(C.cellspacing)}),m(w,p,x),w.setAttribs(p,{"data-mce-border-color":C.borderColor,"data-mce-cell-padding":C.cellpadding,"data-mce-border":C.border}),p.children)for(var e=0;e<p.children.length;e++)n(p.children[e],"border",C.border),n(p.children[e],"padding",s(C.cellpadding))}else r.dom.setAttribs(p,{border:C.border,cellpadding:C.cellpadding,cellspacing:C.cellspacing});w.getAttrib(p,"width")&&!r.settings.table_style_by_css?w.setAttrib(p,"width",a(C.width)):w.setStyle(p,"width",s(C.width)),w.setStyle(p,"height",s(C.height)),i=w.select("caption",p)[0],i&&!C.caption&&w.remove(i),!i&&C.caption&&(i=w.create("caption"),i.innerHTML=t.ie?"":'<br data-mce-bogus="1"/>',p.insertBefore(i,p.firstChild)),l(p),C.align&&r.formatter.apply("align"+C.align,{},p),r.focus(),r.addVisual()})}function g(e,t){function n(e,n){for(var r=0;r<n.length;r++){var i=w.getStyle(n[r],t);if("undefined"==typeof e&&(e=i),e!=i)return""}return e}var i,o=r.dom.select("td,th",e);return i=n(i,o)}var p,h,v,y,b,x,w=r.dom,C={};i===!0?(p=w.getParent(r.selection.getStart(),"table"),p&&(C={width:a(w.getStyle(p,"width")||w.getAttrib(p,"width")),height:a(w.getStyle(p,"height")||w.getAttrib(p,"height")),cellspacing:a(w.getStyle(p,"border-spacing")||w.getAttrib(p,"cellspacing")),cellpadding:w.getAttrib(p,"data-mce-cell-padding")||w.getAttrib(p,"cellpadding")||g(p,"padding"),
border:w.getAttrib(p,"data-mce-border")||w.getAttrib(p,"border")||g(p,"border"),borderColor:w.getAttrib(p,"data-mce-border-color"),caption:!!w.select("caption",p)[0],"class":w.getAttrib(p,"class")},n("left center right".split(" "),function(e){r.formatter.matchNode(p,"align"+e)&&(C.align=e)}))):(h={label:"Cols",name:"cols"},v={label:"Rows",name:"rows"}),r.settings.table_class_list&&(C["class"]&&(C["class"]=C["class"].replace(/\s*mce\-item\-table\s*/g,"")),y={name:"class",type:"listbox",label:"Class",values:u(r.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"table",classes:[e.value]})})})}),b={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:r.settings.table_appearance_options!==!1?[h,v,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[h,v,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},y]},r.settings.table_advtab!==!1?(f(w,C,p),r.windowManager.open({title:"Table properties",data:C,bodyType:"tabpanel",body:[{title:"General",type:"form",items:b},o(w)],onsubmit:c})):r.windowManager.open({title:"Table properties",data:C,body:b,onsubmit:c})},g.merge=function(e,t){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();r.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},g.cell=function(){function t(e,t,n){(1===y.length||n)&&v.setAttrib(e,t,n)}function i(e,t,n){(1===y.length||n)&&v.setStyle(e,t,n)}function m(){d(v,this),p=e.extend(p,this.toJSON()),r.undoManager.transact(function(){n(y,function(e){t(e,"scope",p.scope),t(e,"style",p.style),t(e,"class",p["class"]),i(e,"width",s(p.width)),i(e,"height",s(p.height)),p.type&&e.nodeName.toLowerCase()!==p.type&&(e=v.rename(e,p.type)),1===y.length&&(l(e),c(e)),p.align&&r.formatter.apply("align"+p.align,{},e),p.valign&&r.formatter.apply("valign"+p.valign,{},e)}),r.focus()})}var g,p,h,v=r.dom,y=[];if(y=r.dom.select("td[data-mce-selected],th[data-mce-selected]"),g=r.dom.getParent(r.selection.getStart(),"td,th"),!y.length&&g&&y.push(g),g=g||y[0]){y.length>1?p={width:"",height:"",scope:"","class":"",align:"",style:"",type:g.nodeName.toLowerCase()}:(p={width:a(v.getStyle(g,"width")||v.getAttrib(g,"width")),height:a(v.getStyle(g,"height")||v.getAttrib(g,"height")),scope:v.getAttrib(g,"scope"),"class":v.getAttrib(g,"class")},p.type=g.nodeName.toLowerCase(),n("left center right".split(" "),function(e){r.formatter.matchNode(g,"align"+e)&&(p.align=e)}),n("top middle bottom".split(" "),function(e){r.formatter.matchNode(g,"valign"+e)&&(p.valign=e)}),f(v,p,g)),r.settings.table_cell_class_list&&(h={name:"class",type:"listbox",label:"Class",values:u(r.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"td",classes:[e.value]})})})});var b={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},h]};r.windowManager.open(r.settings.table_cell_advtab!==!1?{title:"Cell properties",bodyType:"tabpanel",data:p,body:[{title:"General",type:"form",items:b},o(v)],onsubmit:m}:{title:"Cell properties",data:p,body:b,onsubmit:m})}},g.row=function(){function t(e,t,n){(1===x.length||n)&&b.setAttrib(e,t,n)}function i(e,t,n){(1===x.length||n)&&b.setStyle(e,t,n)}function c(){var o,a,c;d(b,this),v=e.extend(v,this.toJSON()),r.undoManager.transact(function(){var e=v.type;n(x,function(n){t(n,"scope",v.scope),t(n,"style",v.style),t(n,"class",v["class"]),i(n,"height",s(v.height)),e!==n.parentNode.nodeName.toLowerCase()&&(o=b.getParent(n,"table"),a=n.parentNode,c=b.select(e,o)[0],c||(c=b.create(e),o.firstChild?o.insertBefore(c,o.firstChild):o.appendChild(c)),c.appendChild(n),a.hasChildNodes()||b.remove(a)),1===x.length&&l(n),v.align&&r.formatter.apply("align"+v.align,{},n)}),r.focus()})}var m,g,p,h,v,y,b=r.dom,x=[];m=r.dom.getParent(r.selection.getStart(),"table"),g=r.dom.getParent(r.selection.getStart(),"td,th"),n(m.rows,function(e){n(e.cells,function(t){return b.getAttrib(t,"data-mce-selected")||t==g?(x.push(e),!1):void 0})}),p=x[0],p&&(x.length>1?v={height:"",scope:"","class":"",align:"",type:p.parentNode.nodeName.toLowerCase()}:(v={height:a(b.getStyle(p,"height")||b.getAttrib(p,"height")),scope:b.getAttrib(p,"scope"),"class":b.getAttrib(p,"class")},v.type=p.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){r.formatter.matchNode(p,"align"+e)&&(v.align=e)}),f(b,v,p)),r.settings.table_row_class_list&&(h={name:"class",type:"listbox",label:"Class",values:u(r.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"tr",classes:[e.value]})})})}),y={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},h]},r.windowManager.open(r.settings.table_row_advtab!==!1?{title:"Row properties",data:v,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},o(b)],onsubmit:c}:{title:"Row properties",data:v,body:y,onsubmit:c}))}}}),r("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(e,n){var r;return function(i){function o(e,t){return{index:e,y:i.dom.getPos(t).y}}function a(e,t){return{index:e,y:i.dom.getPos(t).y+t.offsetHeight}}function s(e,t){return{index:e,x:i.dom.getPos(t).x}}function l(e,t){return{index:e,x:i.dom.getPos(t).x+t.offsetWidth}}function c(){var e=i.getBody().dir;return"rtl"===e}function u(){return i.inline}function d(){return u?i.getBody().ownerDocument.body:i.getBody()}function f(e,t){return c()?l(e,t):s(e,t)}function m(e,t){return c()?s(e,t):l(e,t)}function g(e,t){return p(e,"width")/p(t,"width")*100}function p(e,t){var n=i.dom.getStyle(e,t,!0),r=parseInt(n,10);return r}function h(e){var t=p(e,"width"),n=p(e.parentElement,"width");return t/n*100}function v(e,t){var n=p(e,"width");return t/n*100}function y(e,t){var n=p(e.parentElement,"width");return t/n*100}function b(e,t,n){for(var r=[],i=1;i<n.length;i++){var o=n[i].element;r.push(e(i-1,o))}var a=n[n.length-1];return r.push(t(n.length-1,a.element)),r}function x(){var t=i.dom.select("."+fe,d());e.each(t,function(e){i.dom.remove(e)})}function w(e){x(),B(e)}function C(e,t,n,r,i,o,a,s){var l={"data-mce-bogus":"all","class":fe+" "+e,unselectable:"on","data-mce-resize":!1,style:"cursor: "+t+"; margin: 0; padding: 0; position: absolute; left: "+n+"px; top: "+r+"px; height: "+i+"px; width: "+o+"px; "};return l[a]=s,l}function k(t,n,r){e.each(t,function(e){var t=r.x,o=e.y-we/2,a=we,s=n;i.dom.add(d(),"div",C(me,ge,t,o,a,s,pe,e.index))})}function N(t,n,r){e.each(t,function(e){var t=e.x-we/2,o=r.y,a=n,s=we;i.dom.add(d(),"div",C(ve,ye,t,o,a,s,be,e.index))})}function S(t){return e.map(t.rows,function(t){var n=e.map(t.cells,function(e){var t=e.hasAttribute("rowspan")?parseInt(e.getAttribute("rowspan"),10):1,n=e.hasAttribute("colspan")?parseInt(e.getAttribute("colspan"),10):1;return{element:e,rowspan:t,colspan:n}});return{element:t,cells:n}})}function _(n){function r(e,t){return e+","+t}function i(e,t){return s[r(e,t)]}function o(){var t=[];return e.each(l,function(e){t=t.concat(e.cells)}),t}function a(){return l}var s={},l=[],c=0,u=0;return e.each(n,function(n,i){var o=[];e.each(n.cells,function(e){for(var n=0;s[r(i,n)]!==t;)n++;for(var a={element:e.element,colspan:e.colspan,rowspan:e.rowspan,rowIndex:i,colIndex:n},l=0;l<e.colspan;l++)for(var d=0;d<e.rowspan;d++){var f=i+d,m=n+l;s[r(f,m)]=a,c=Math.max(c,f+1),u=Math.max(u,m+1)}o.push(a)}),l.push({element:n.element,cells:o})}),{grid:{maxRows:c,maxCols:u},getAt:i,getAllCells:o,getAllRows:a}}function T(e,t){for(var n=[],r=e;t>r;r++)n.push(r);return n}function E(e,t,n){for(var r,i=e(),o=0;o<i.length;o++)t(i[o])&&(r=i[o]);return r?r:n()}function R(t){var n=T(0,t.grid.maxCols),r=T(0,t.grid.maxRows);return e.map(n,function(e){function n(){for(var n=[],i=0;i<r.length;i++){var o=t.getAt(i,e);o&&o.colIndex===e&&n.push(o)}return n}function i(e){return 1===e.colspan}function o(){for(var n,i=0;i<r.length;i++)if(n=t.getAt(i,e))return n;return null}return E(n,i,o)})}function A(t){var n=T(0,t.grid.maxCols),r=T(0,t.grid.maxRows);return e.map(r,function(e){function r(){for(var r=[],i=0;i<n.length;i++){var o=t.getAt(e,i);o&&o.rowIndex===e&&r.push(o)}return r}function i(e){return 1===e.rowspan}function o(){return t.getAt(e,0)}return E(r,i,o)})}function B(e){var t=S(e),n=_(t),r=A(n),s=R(n),l=i.dom.getPos(e),c=r.length>0?b(o,a,r):[],u=s.length>0?b(f,m,s):[];k(c,e.offsetWidth,l),N(u,e.offsetHeight,l)}function P(e,t,n,r){if(0>t||t>=e.length-1)return"";var i=e[t];if(i)i={value:i,delta:0};else for(var o=e.slice(0,t).reverse(),a=0;a<o.length;a++)o[a]&&(i={value:o[a],delta:a+1});var s=e[t+1];if(s)s={value:s,delta:1};else for(var l=e.slice(t+1),c=0;c<l.length;c++)l[c]&&(s={value:l[c],delta:c+1});var u=s.delta-i.delta,d=Math.abs(s.value-i.value)/u;return n?d/p(r,"width")*100:d}function M(e,t){var n=i.dom.getStyle(e,t);return n||(n=i.dom.getAttrib(e,t)),n||(n=i.dom.getStyle(e,t,!0)),n}function D(e,t,n){var r=M(e,"width"),i=parseInt(r,10),o=t?g(e,n):p(e,"width");return(t&&!$(r)||!t&&!j(r))&&(i=0),!isNaN(i)&&i>0?i:o}function I(t,n,r){for(var i=R(t),o=e.map(i,function(e){return f(e.colIndex,e.element).x}),a=[],s=0;s<i.length;s++){var l=i[s].element.hasAttribute("colspan")?parseInt(i[s].element.getAttribute("colspan"),10):1,c=l>1?P(o,s):D(i[s].element,n,r);c=c?c:Ce,a.push(c)}return a}function L(e){var t=M(e,"height"),n=parseInt(t,10);return $(t)&&(n=0),!isNaN(n)&&n>0?n:p(e,"height")}function O(t){for(var n=A(t),r=e.map(n,function(e){return o(e.rowIndex,e.element).y}),i=[],a=0;a<n.length;a++){var s=n[a].element.hasAttribute("rowspan")?parseInt(n[a].element.getAttribute("rowspan"),10):1,l=s>1?P(r,a):L(n[a].element);l=l?l:ke,i.push(l)}return i}function H(t,n,r,i,o){function a(t){return e.map(t,function(){return 0})}function s(){var e;if(o)e=[100-d[0]];else{var t=Math.max(i,d[0]+r);e=[t-d[0]]}return e}function l(e,t){var n,o=a(d.slice(0,e)),s=a(d.slice(t+1));if(r>=0){var l=Math.max(i,d[t]-r);n=o.concat([r,l-d[t]]).concat(s)}else{var c=Math.max(i,d[e]+r),u=d[e]-c;n=o.concat([c-d[e],u]).concat(s)}return n}function c(e,t){var n,o=a(d.slice(0,t));if(r>=0)n=o.concat([r]);else{var s=Math.max(i,d[t]+r);n=o.concat([s-d[t]])}return n}var u,d=t.slice(0);return u=0===t.length?[]:1===t.length?s():0===n?l(0,1):n>0&&n<t.length-1?l(n,n+1):n===t.length-1?c(n-1,n):[]}function F(e,t,n){for(var r=0,i=e;t>i;i++)r+=n[i];return r}function z(t,n){var r=t.getAllCells();return e.map(r,function(e){var t=F(e.colIndex,e.colIndex+e.colspan,n);return{element:e.element,width:t,colspan:e.colspan}})}function U(t,n){var r=t.getAllCells();return e.map(r,function(e){var t=F(e.rowIndex,e.rowIndex+e.rowspan,n);return{element:e.element,height:t,rowspan:e.rowspan}})}function W(t,n){var r=t.getAllRows();return e.map(r,function(e,t){return{element:e.element,height:n[t]}})}function $(e){return Se.test(e)}function j(e){return _e.test(e)}function V(t,n,r){function o(t,n){e.each(t,function(e){i.dom.setStyle(e.element,"width",e.width+n),i.dom.setAttrib(e.element,"width",null)})}function a(){return r<u.grid.maxCols-1?h(t):h(t)+y(t,n)}function s(){return r<u.grid.maxCols-1?p(t,"width"):p(t,"width")+n}function l(e,n,o){r!=u.grid.maxCols-1&&o||(i.dom.setStyle(t,"width",e+n),i.dom.setAttrib(t,"width",null))}for(var c=S(t),u=_(c),d=$(t.width)||$(t.style.width),f=I(u,d,t),m=d?v(t,n):n,g=H(f,r,m,Ce,d,t),b=[],x=0;x<g.length;x++)b.push(g[x]+f[x]);var w=z(u,b),C=d?"%":"px",k=d?a():s();i.undoManager.transact(function(){o(w,C),l(k,C,d)})}function q(t,n,r){for(var o=S(t),a=_(o),s=O(a),l=[],c=0,u=0;u<s.length;u++)l.push(u===r?n+s[u]:s[u]),c+=c[u];var d=U(a,l),f=W(a,l);i.undoManager.transact(function(){e.each(f,function(e){i.dom.setStyle(e.element,"height",e.height+"px"),i.dom.setAttrib(e.element,"height",null)}),e.each(d,function(e){i.dom.setStyle(e.element,"height",e.height+"px"),i.dom.setAttrib(e.element,"height",null)}),i.dom.setStyle(t,"height",c+"px"),i.dom.setAttrib(t,"height",null)})}function Y(){ae=setTimeout(function(){J()},200)}function K(){clearTimeout(ae)}function X(){var e=document.createElement("div");return e.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),e.setAttribute("data-mce-bogus","all"),e}function G(e,t){i.dom.bind(e,"mouseup",function(){J()}),i.dom.bind(e,"mousemove",function(e){K(),se&&t(e)}),i.dom.bind(e,"mouseout",function(){Y()})}function J(){if(i.dom.remove(le),se){i.dom.removeClass(ce,Ne),se=!1;var e,t;if(Q(ce)){var n=parseInt(i.dom.getAttrib(ce,xe),10),o=i.dom.getPos(ce).x;e=parseInt(i.dom.getAttrib(ce,be),10),t=c()?n-o:o-n,Math.abs(t)>=1&&V(r,t,e)}else if(ee(ce)){var a=parseInt(i.dom.getAttrib(ce,he),10),s=i.dom.getPos(ce).y;e=parseInt(i.dom.getAttrib(ce,pe),10),t=s-a,Math.abs(t)>=1&&q(r,t,e)}w(r),i.nodeChanged()}}function Z(e,t){le=le?le:X(),se=!0,i.dom.addClass(e,Ne),ce=e,G(le,t),i.dom.add(d(),le)}function Q(e){return i.dom.hasClass(e,ve)}function ee(e){return i.dom.hasClass(e,me)}function te(e){ue=ue!==t?ue:e.clientX;var n=e.clientX-ue;ue=e.clientX;var r=i.dom.getPos(ce).x;i.dom.setStyle(ce,"left",r+n+"px")}function ne(e){de=de!==t?de:e.clientY;var n=e.clientY-de;de=e.clientY;var r=i.dom.getPos(ce).y;i.dom.setStyle(ce,"top",r+n+"px")}function re(e){ue=t,Z(e,te)}function ie(e){de=t,Z(e,ne)}function oe(e){var t=e.target,n=i.getBody();if(i.$.contains(n,r)||r===n)if(Q(t)){e.preventDefault();var o=i.dom.getPos(t).x;i.dom.setAttrib(t,xe,o),re(t)}else if(ee(t)){e.preventDefault();var a=i.dom.getPos(t).y;i.dom.setAttrib(t,he,a),ie(t)}else x()}var ae,se,le,ce,ue,de,fe="mce-resize-bar",me="mce-resize-bar-row",ge="row-resize",pe="data-row",he="data-initial-top",ve="mce-resize-bar-col",ye="col-resize",be="data-col",xe="data-initial-left",we=4,Ce=10,ke=10,Ne="mce-resize-bar-dragging",Se=new RegExp(/(\d+(\.\d+)?%)/),_e=new RegExp(/px|em/);return i.on("init",function(){i.dom.bind(d(),"mousedown",oe)}),i.on("ObjectResized",function(t){var n=t.target;if("TABLE"===n.nodeName){var r=[];e.each(n.rows,function(t){e.each(t.cells,function(e){var t=i.dom.getStyle(e,"width",!0);r.push({cell:e,width:t})})}),e.each(r,function(e){i.dom.setStyle(e.cell,"width",e.width),i.dom.setAttrib(e.cell,"width",null)})}}),i.on("mouseover",function(e){if(!se){var t=i.dom.getParent(e.target,"table");("TABLE"===e.target.nodeName||t)&&(r=t,w(t))}}),i.on("keydown",function(e){switch(e.keyCode){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:x()}}),i.on("remove",function(){x(),i.dom.unbind(d(),"mousedown",oe)}),{adjustWidth:V,adjustHeight:q,clearBars:x,drawBars:B,determineDeltas:H,getTableGrid:_,getTableDetails:S,getWidths:I,getPixelHeights:O,isPercentageBasedSize:$,isPixelBasedSize:j,recalculateWidths:z,recalculateCellHeights:U,recalculateRowHeights:W}}}),r("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(e,t,n,r,i,o,a,s,l){function c(o){function a(e){return function(){o.execCommand(e)}}function l(e,t){var n,r,i,a;for(i='<table id="__mce"><tbody>',n=0;t>n;n++){for(i+="<tr>",r=0;e>r;r++)i+="<td>"+(s.ie&&s.ie<10?"&nbsp;":"<br>")+"</td>";i+="</tr>"}return i+="</tbody></table>",o.undoManager.transact(function(){o.insertContent(i),a=o.dom.get("__mce"),o.dom.setAttrib(a,"id",null),o.$("tr",a).each(function(e,t){o.fire("newrow",{node:t}),o.$("th,td",t).each(function(e,t){o.fire("newcell",{node:t})})}),o.dom.setAttribs(a,o.settings.table_default_attributes||{}),o.dom.setStyles(a,o.settings.table_default_styles||{})}),a}function c(e,t,n){function r(){var r,i,a,s={},l=0;i=o.dom.select("td[data-mce-selected],th[data-mce-selected]"),r=i[0],r||(r=o.selection.getStart()),n&&i.length>0?(u(i,function(e){return s[e.parentNode.parentNode.nodeName]=1}),u(s,function(e){l+=e}),a=1!==l):a=!o.dom.getParent(r,t),e.disabled(a),o.selection.selectorChanged(t,function(t){e.disabled(!t)})}o.initialized?r():o.on("init",r)}function d(){c(this,"table")}function f(){c(this,"td,th")}function m(){c(this,"td,th",!0)}function g(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;10>t;t++){e+="<tr>";for(var n=0;10>n;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function p(e,t,n){var r,i,a,s,l,c=n.getEl().getElementsByTagName("table")[0],u=n.isRtl()||"tl-tr"==n.parent().rel;for(c.nextSibling.innerHTML=e+1+" x "+(t+1),u&&(e=9-e),i=0;10>i;i++)for(r=0;10>r;r++)s=c.rows[i].childNodes[r].firstChild,l=(u?r>=e:e>=r)&&t>=i,o.dom.toggleClass(s,"mce-active",l),l&&(a=s);return a.parentNode}function h(){o.addButton("tableprops",{title:"Table properties",onclick:N.tableProps,icon:"table"}),o.addButton("tabledelete",{title:"Delete table",onclick:a("mceTableDelete")}),o.addButton("tablecellprops",{title:"Cell properties",onclick:a("mceTableCellProps")}),o.addButton("tablemergecells",{title:"Merge cells",onclick:a("mceTableMergeCells")}),o.addButton("tablesplitcells",{title:"Split cell",onclick:a("mceTableSplitCells")}),o.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:a("mceTableInsertRowBefore")}),o.addButton("tableinsertrowafter",{title:"Insert row after",onclick:a("mceTableInsertRowAfter")}),o.addButton("tabledeleterow",{title:"Delete row",onclick:a("mceTableDeleteRow")}),o.addButton("tablerowprops",{title:"Row properties",onclick:a("mceTableRowProps")}),o.addButton("tablecutrow",{title:"Cut row",onclick:a("mceTableCutRow")}),o.addButton("tablecopyrow",{title:"Copy row",onclick:a("mceTableCopyRow")}),o.addButton("tablepasterowbefore",{title:"Paste row before",onclick:a("mceTablePasteRowBefore")}),o.addButton("tablepasterowafter",{title:"Paste row after",onclick:a("mceTablePasteRowAfter")}),o.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:a("mceTableInsertColBefore")}),o.addButton("tableinsertcolafter",{title:"Insert column after",onclick:a("mceTableInsertColAfter")}),o.addButton("tabledeletecol",{title:"Delete column",onclick:a("mceTableDeleteCol")})}function v(e){var t=o.dom.is(e,"table")&&o.getBody().contains(e);return t}function y(){var e=o.settings.table_toolbar;""!==e&&e!==!1&&(e||(e="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),o.addContextToolbar(v,e))}function b(){return w}function x(e){w=e}var w,C,k=this,N=new r(o);!o.settings.object_resizing||o.settings.table_resize_bars===!1||o.settings.object_resizing!==!0&&"table"!==o.settings.object_resizing||(C=i(o)),o.settings.table_grid===!1?o.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",onclick:N.table}):o.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),N.table())},onshow:function(){p(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");o.dom.removeClass(e,"mce-active"),o.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:g(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,r=e.target;"A"==r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),n=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),t===this.lastX&&n===this.lastY||(p(t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),o.undoManager.transact(function(){l(t.lastX+1,t.lastY+1)}),o.addVisual())}}]}),o.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:d,onclick:N.tableProps}),o.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:d,cmd:"mceTableDelete"}),o.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:a("mceTableCellProps"),onPostRender:f},{text:"Merge cells",onclick:a("mceTableMergeCells"),onPostRender:m},{text:"Split cell",onclick:a("mceTableSplitCells"),onPostRender:f}]}),o.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:a("mceTableInsertRowBefore"),onPostRender:f},{text:"Insert row after",onclick:a("mceTableInsertRowAfter"),onPostRender:f},{text:"Delete row",onclick:a("mceTableDeleteRow"),onPostRender:f},{text:"Row properties",onclick:a("mceTableRowProps"),onPostRender:f},{text:"-"},{text:"Cut row",onclick:a("mceTableCutRow"),onPostRender:f},{text:"Copy row",onclick:a("mceTableCopyRow"),onPostRender:f},{text:"Paste row before",onclick:a("mceTablePasteRowBefore"),onPostRender:f},{text:"Paste row after",onclick:a("mceTablePasteRowAfter"),onPostRender:f}]}),o.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:a("mceTableInsertColBefore"),onPostRender:f},{text:"Insert column after",onclick:a("mceTableInsertColAfter"),onPostRender:f},{text:"Delete column",onclick:a("mceTableDeleteCol"),onPostRender:f}]});var S=[];u("inserttable tableprops deletetable | cell row column".split(" "),function(e){S.push("|"==e?{text:"-"}:o.menuItems[e])}),o.addButton("table",{type:"menubutton",title:"Table",menu:S}),s.isIE||o.on("click",function(e){e=e.target,"TABLE"===e.nodeName&&(o.selection.select(e),o.nodeChanged())}),k.quirks=new t(o),o.on("Init",function(){k.cellSelection=new n(o,function(e){e&&C&&C.clearBars()}),k.resizeBars=C}),o.on("PreInit",function(){o.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})}),u({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t;t=o.dom.getParent(o.selection.getStart(),"th,td"),o.dom.select("td[data-mce-selected],th[data-mce-selected]").length?e.merge():N.merge(e,t)},mceTableInsertRowBefore:function(e){e.insertRows(!0)},mceTableInsertRowAfter:function(e){e.insertRows()},mceTableInsertColBefore:function(e){e.insertCols(!0)},mceTableInsertColAfter:function(e){e.insertCols()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){w=e.cutRows()},mceTableCopyRow:function(e){w=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(w,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(w)},mceSplitColsBefore:function(e){e.splitCols(!0)},mceSplitColsAfter:function(e){e.splitCols(!1)},mceTableDelete:function(e){C&&C.clearBars(),e.deleteTable()}},function(t,n){o.addCommand(n,function(){var n=new e(o);n&&(t(n),o.execCommand("mceRepaint"),k.cellSelection.clear())})}),u({mceInsertTable:N.table,mceTableProps:function(){N.table(!0)},mceTableRowProps:N.row,mceTableCellProps:N.cell},function(e,t){o.addCommand(t,function(t,n){e(n)})}),h(),y(),o.settings.table_tab_navigation!==!1&&o.on("keydown",function(t){var n,r,i;9==t.keyCode&&(n=o.dom.getParent(o.selection.getStart(),"th,td"),n&&(t.preventDefault(),r=new e(o),i=t.shiftKey?-1:1,o.undoManager.transact(function(){!r.moveRelIdx(n,i)&&i>0&&(r.insertRow(),r.refresh(),r.moveRelIdx(n,i))})))}),k.insertTable=l,k.setClipboardRows=x,k.getClipboardRows=b}var u=o.each;l.add("table",c)})}(window)}.call(this),function(){tinymce.PluginManager.add("textpattern",function(e){function t(){return c&&(l.sort(function(e,t){return e.start.length>t.start.length?-1:e.start.length<t.start.length?1:0}),c=!1),l}function n(e){for(var n=t(),r=0;r<n.length;r++)if(0===e.indexOf(n[r].start)&&(!n[r].end||e.lastIndexOf(n[r].end)==e.length-n[r].end.length))return n[r]}function r(e,n,r){var i,o,a;for(i=t(),a=0;a<i.length;a++)if(o=i[a],o.end&&e.substr(n-o.end.length-r,o.end.length)==o.end)return o}function i(t){function i(){l=l.splitText(u),l.splitText(c-u-g),l.deleteData(0,m.start.length),l.deleteData(l.data.length-m.end.length,m.end.length)}var o,a,s,l,c,u,d,f,m,g,p;return o=e.selection,a=e.dom,o.isCollapsed()&&(s=o.getRng(!0),l=s.startContainer,c=s.startOffset,d=l.data,g=t?1:0,3==l.nodeType&&(m=r(d,c,g),m&&(u=Math.max(0,c-g),u=d.lastIndexOf(m.start,u-m.end.length-1),-1!==u&&(f=a.createRng(),f.setStart(l,u),f.setEnd(l,c-g),m=n(f.toString()),m&&m.end&&!(l.data.length<=m.start.length+m.end.length)))))?(p=e.formatter.get(m.format),p&&p[0].inline?(i(),e.formatter.apply(m.format,{},l),l):void 0):void 0}function o(){var t,r,i,o,a,s,l,c,u,d,f;if(t=e.selection,r=e.dom,t.isCollapsed()&&(l=r.getParent(t.getStart(),"p"))){for(u=new tinymce.dom.TreeWalker(l,l);a=u.next();)if(3==a.nodeType){o=a;break}if(o){if(c=n(o.data),!c)return;if(d=t.getRng(!0),i=d.startContainer,f=d.startOffset,o==i&&(f=Math.max(0,f-c.start.length)),tinymce.trim(o.data).length==c.start.length)return;c.format&&(s=e.formatter.get(c.format),s&&s[0].block&&(o.deleteData(0,c.start.length),e.formatter.apply(c.format,{},o),d.setStart(i,f),d.collapse(!0),t.setRng(d))),c.cmd&&e.undoManager.transact(function(){o.deleteData(0,c.start.length),e.execCommand(c.cmd)})}}}function a(){var t,n;n=i(),n&&(t=e.dom.createRng(),t.setStart(n,n.data.length),t.setEnd(n,n.data.length),e.selection.setRng(t)),o()}function s(){var t,n,r,o,a;t=i(!0),t&&(a=e.dom,n=t.data.slice(-1),/[\u00a0 ]/.test(n)&&(t.deleteData(t.data.length-1,1),r=a.doc.createTextNode(n),t.nextSibling?a.insertAfter(r,t.nextSibling):t.parentNode.appendChild(r),o=a.createRng(),o.setStart(r,1),o.setEnd(r,1),e.selection.setRng(o)))}var l,c=!0;l=e.settings.textpattern_patterns||[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],e.on("keydown",function(e){13!=e.keyCode||tinymce.util.VK.modifierPressed(e)||a()},!0),e.on("keyup",function(e){32!=e.keyCode||tinymce.util.VK.modifierPressed(e)||s()}),this.getPatterns=t,this.setPatterns=function(e){l=e,c=!0}})}.call(this),function(){tinymce.PluginManager.add("visualchars",function(e){function t(t){function n(e){return'<span data-mce-bogus="1" class="mce-'+m[e]+'">'+e+"</span>"}function o(){var e,t="";for(e in m)t+=e;return new RegExp("["+t+"]","g")}function a(){var e,t="";for(e in m)t&&(t+=","),t+="span.mce-"+m[e];return t}var s,l,c,u,d,f,m,g,p=e.getBody(),h=e.selection;if(m={"":"nbsp","":"shy"},r=!r,i.state=r,e.fire("VisualChars",{state:r}),g=o(),t&&(f=h.getBookmark()),r)for(l=[],tinymce.walk(p,function(e){3==e.nodeType&&e.nodeValue&&g.test(e.nodeValue)&&l.push(e)},"childNodes"),c=0;c<l.length;c++){for(u=l[c].nodeValue,u=u.replace(g,n),d=e.dom.create("div",null,u);s=d.lastChild;)e.dom.insertAfter(s,l[c]);e.dom.remove(l[c])}else for(l=e.dom.select(a(),p),c=l.length-1;c>=0;c--)e.dom.remove(l[c],1);h.moveToBookmark(f)}function n(){var t=this;e.on("VisualChars",function(e){t.active(e.state)})}var r,i=this;e.addCommand("mceVisualChars",t),e.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:n}),e.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:n,selectable:!0,context:"view",prependToContext:!0})})}.call(this),function(){tinymce.PluginManager.add("anchor",function(e){var t=function(e){return!e.attr("href")&&(e.attr("id")||e.attr("name"))&&!e.firstChild},n=function(e){return function(n){for(var r=0;r<n.length;r++)t(n[r])&&n[r].attr("contenteditable",e)}},r=function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},i=function(){var t=e.selection.getNode(),n="A"==t.tagName&&""===e.dom.getAttrib(t,"href"),i="";n&&(i=t.id||t.name||""),e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:i},onsubmit:function(i){var o=i.data.id;return r(o)?void(n?(t.removeAttribute("name"),t.id=o):(e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:o})))):(i.preventDefault(),void e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."))}})};tinymce.Env.ceFalse&&e.on("PreInit",function(){e.parser.addNodeFilter("a",n("false")),e.serializer.addNodeFilter("a",n(null))}),e.addCommand("mceAnchor",i),e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:i,stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:i})})}.call(this),function(){tinymce._beforeUnloadHandler=function(){var e;return tinymce.each(tinymce.editors,function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft(),!e&&t.isDirty()&&t.getParam("autosave_ask_before_unload",!0)&&(e=t.translate("You have unsaved changes are you sure you want to navigate away?"))}),e},tinymce.PluginManager.add("autosave",function(e){function t(e,t){var n={s:1e3,m:6e4};return e=/^(\d+)([ms]?)$/.exec(""+(e||t)),(e[2]?n[e[2]]:1)*parseInt(e,10)}function n(){var e=parseInt(m.getItem(u+"time"),10)||0;return!((new Date).getTime()-e>f.autosave_retention&&(r(!1),1))}function r(t){m.removeItem(u+"draft"),m.removeItem(u+"time"),t!==!1&&e.fire("RemoveDraft")}function i(){!c()&&e.isDirty()&&(m.setItem(u+"draft",e.getContent({format:"raw",no_events:!0})),m.setItem(u+"time",(new Date).getTime()),e.fire("StoreDraft"))}function o(){n()&&(e.setContent(m.getItem(u+"draft"),{format:"raw"}),e.fire("RestoreDraft"))}function a(){d||(setInterval(function(){e.removed||i()},f.autosave_interval),d=!0)}function s(){var t=this;t.disabled(!n()),e.on("StoreDraft RestoreDraft RemoveDraft",function(){t.disabled(!n())}),a()}function l(){e.undoManager.beforeChange(),o(),r(),e.undoManager.add()}function c(t){var n=e.settings.forced_root_block;return t=tinymce.trim("undefined"==typeof t?e.getBody().innerHTML:t),""===t||new RegExp("^<"+n+"[^>]*>((|&nbsp;|[ 	]|<br[^>]*>)+?|)</"+n+">|<br>$","i").test(t)}var u,d,f=e.settings,m=tinymce.util.LocalStorage;u=f.autosave_prefix||"tinymce-autosave-{path}{query}-{id}-",u=u.replace(/\{path\}/g,document.location.pathname),
u=u.replace(/\{query\}/g,document.location.search),u=u.replace(/\{id\}/g,e.id),f.autosave_interval=t(f.autosave_interval,"30s"),f.autosave_retention=t(f.autosave_retention,"20m"),e.addButton("restoredraft",{title:"Restore last draft",onclick:l,onPostRender:s}),e.addMenuItem("restoredraft",{text:"Restore last draft",onclick:l,onPostRender:s,context:"file"}),e.settings.autosave_restore_when_empty!==!1&&(e.on("init",function(){n()&&c()&&o()}),e.on("saveContent",function(){r()})),window.onbeforeunload=tinymce._beforeUnloadHandler,this.hasDraft=n,this.storeDraft=i,this.restoreDraft=o,this.removeDraft=r,this.isEmpty=c})}.call(this),function(){tinymce.PluginManager.add("code",function(e){function t(){var t=e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:e.getParam("code_dialog_width",600),minHeight:e.getParam("code_dialog_height",Math.min(tinymce.DOM.getViewPort().h-200,500)),spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){e.focus(),e.undoManager.transact(function(){e.setContent(t.data.code)}),e.selection.setCursorLocation(),e.nodeChanged()}});t.find("#code").value(e.getContent({source_view:!0}))}e.addCommand("mceCodeEditor",t),e.addButton("code",{icon:"code",tooltip:"Source code",onclick:t}),e.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:t})})}.call(this),function(){tinymce.PluginManager.add("contextmenu",function(e){var t,n,r=e.settings.contextmenu_never_use_native,i=function(e){return e.ctrlKey&&!r},o=function(){return tinymce.Env.mac&&tinymce.Env.webkit},a=function(){return n===!0};return e.on("mousedown",function(t){o()&&2===t.button&&!i(t)&&e.selection.isCollapsed()&&e.once("contextmenu",function(t){e.selection.placeCaretAt(t.clientX,t.clientY)})}),e.on("contextmenu",function(r){var o;if(!i(r)){if(r.preventDefault(),o=e.settings.contextmenu||"link openlink image inserttable | cell row column deletetable",t)t.show();else{var a=[];tinymce.each(o.split(/[ ,]/),function(t){var n=e.menuItems[t];"|"==t&&(n={text:t}),n&&(n.shortcut="",a.push(n))});for(var s=0;s<a.length;s++)"|"==a[s].text&&(0!==s&&s!=a.length-1||a.splice(s,1));t=new tinymce.ui.Menu({items:a,context:"contextmenu",classes:"contextmenu"}).renderTo(),t.on("hide",function(e){e.control===this&&(n=!1)}),e.on("remove",function(){t.remove(),t=null})}var l={x:r.pageX,y:r.pageY};e.inline||(l=tinymce.DOM.getPos(e.getContentAreaContainer()),l.x+=r.clientX,l.y+=r.clientY),t.moveTo(l.x,l.y),n=!0}}),{isContextMenuVisible:a}})}.call(this),function(){tinymce.PluginManager.add("fullscreen",function(e){function t(){var e,t,n=window,r=document,i=r.body;return i.offsetWidth&&(e=i.offsetWidth,t=i.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}}function n(){var e=tinymce.DOM.getViewPort();return{x:e.x,y:e.y}}function r(e){scrollTo(e.x,e.y)}function i(){function i(){f.setStyle(p,"height",t().h-(g.clientHeight-p.clientHeight))}var m,g,p,h,v=document.body,y=document.documentElement;d=!d,g=e.getContainer(),m=g.style,p=e.getContentAreaContainer().firstChild,h=p.style,d?(u=n(),o=h.width,a=h.height,h.width=h.height="100%",l=m.width,c=m.height,m.width=m.height="",f.addClass(v,"mce-fullscreen"),f.addClass(y,"mce-fullscreen"),f.addClass(g,"mce-fullscreen"),f.bind(window,"resize",i),i(),s=i):(h.width=o,h.height=a,l&&(m.width=l),c&&(m.height=c),f.removeClass(v,"mce-fullscreen"),f.removeClass(y,"mce-fullscreen"),f.removeClass(g,"mce-fullscreen"),f.unbind(window,"resize",s),r(u)),e.fire("FullscreenStateChanged",{state:d})}var o,a,s,l,c,u,d=!1,f=tinymce.DOM;return e.settings.inline?void 0:(e.on("init",function(){e.addShortcut("Ctrl+Shift+F","",i)}),e.on("remove",function(){s&&f.unbind(window,"resize",s)}),e.addCommand("mceFullScreen",i),e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,onClick:function(){i(),e.focus()},onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})},context:"view"}),e.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Shift+F",onClick:i,onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})}}),{isFullscreen:function(){return d}})})}.call(this),function(){!function(){var e={},t=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),l=0;a>l;++l)s[l]=r(i[l]);var c=o.apply(null,s);if(void 0===c)throw"module ["+t+"] returned undefined";n.instance=c},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},i=function(e,t){for(var n=e.length,i=new Array(n),o=0;n>o;++o)i.push(r(e[o]));t.apply(null,t)},o={};o.bolt={module:{api:{define:n,require:i,demand:r}}};var a=n,s=function(e,t){a(e,[],function(){return t})};s("1",tinymce.PluginManager),s("2",tinymce.Env),s("3",tinymce.util.Promise),s("4",tinymce.util.URI),s("5",tinymce.util.Tools),s("6",tinymce.util.Delay),a("m",[],function(){function e(e,t){return r(document.createElement("canvas"),e,t)}function t(e){return e.getContext("2d")}function n(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t}function r(e,t,n){return e.width=t,e.height=n,e}return{create:e,resize:r,get2dContext:t,get3dContext:n}}),a("n",[],function(){function e(e){return e.naturalWidth||e.width}function t(e){return e.naturalHeight||e.height}return{getWidth:e,getHeight:t}}),a("o",[],function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(t,e(r,this),e(i,this))}function n(e){var t=this;return null===this._state?void this._deferreds.push(e):void l(function(){var t=r._state?e.onFulfilled:e.onRejected;if(null===t)return void(r._state?e.resolve:e.reject)(r._value);var n;try{n=t(r._value)}catch(r){return void e.reject(r)}e.resolve(n)})}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void s(n(t,e),n(r,this),n(i,this))}this._state=!0,this._value=e,o.call(this)}catch(n){i.call(this,n)}}function i(e){this._state=!1,this._value=e,o.call(this)}function o(){for(var e=0,t=this._deferreds.length;t>e;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function s(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}if(window.Promise)return window.Promise;var l=t.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return t.prototype["catch"]=function(e){return this.then(null,e)},t.prototype.then=function(e,r){var i=this;return new t(function(t,o){n.call(i,new a(e,r,t,o))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new t(function(t,n){function r(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,function(t){r(e,t)},n)}s[e]=o,0===--i&&t(s)}catch(s){n(s)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)r(o,e[o])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=0,i=e.length;i>r;r++)e[r].then(t,n)})},t}),a("p",[],function(){function e(e){var t=document.createElement("a");return t.href=e,t.pathname}function t(t){var n=e(t).split("."),r=n[n.length-1],i={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png"};return r&&(r=r.toLowerCase()),i[r]}return{guessMimeType:t}}),a("e",["o","m","p","n"],function(e,t,n,r){function i(t){return new e(function(e){function n(){t.removeEventListener("load",n),e(t)}t.complete?e(t):t.addEventListener("load",n)})}function o(e){return i(e).then(function(e){var n,i;return i=t.create(r.getWidth(e),r.getHeight(e)),n=t.get2dContext(i),n.drawImage(e,0,0),i})}function a(e){return i(e).then(function(e){var t=e.src;return 0===t.indexOf("blob:")?l(t):0===t.indexOf("data:")?c(t):o(e).then(function(e){return c(e.toDataURL(n.guessMimeType(t)))})})}function s(t){return new e(function(e){function n(){r.removeEventListener("load",n),e(r)}var r=new Image;r.addEventListener("load",n),r.src=URL.createObjectURL(t),r.complete&&n()})}function l(t){return new e(function(e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200==this.status&&e(this.response)},n.send()})}function c(t){return new e(function(e){var n,r,i,o,a,s;if(t=t.split(","),o=/data:([^;]+)/.exec(t[0]),o&&(a=o[1]),n=atob(t[1]),window.WebKitBlobBuilder){for(s=new WebKitBlobBuilder,r=new ArrayBuffer(n.length),i=0;i<r.length;i++)r[i]=n.charCodeAt(i);return s.append(r),void e(s.getBlob(a))}for(r=new Uint8Array(n.length),i=0;i<r.length;i++)r[i]=n.charCodeAt(i);e(new Blob([r],{type:a}))})}function u(e){return 0===e.indexOf("blob:")?l(e):0===e.indexOf("data:")?c(e):null}function d(e,t){return c(e.toDataURL(t))}function f(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}function m(e){return f(e).then(function(e){return e.split(",")[1]})}function g(e){URL.revokeObjectURL(e.src)}return{blobToImage:s,imageToBlob:a,blobToDataUri:f,blobToBase64:m,imageToCanvas:o,canvasToBlob:d,revokeImageUrl:g,uriToBlob:u}}),a("q",[],function(){function e(e,t,n){return e=parseFloat(e),e>n?e=n:t>e&&(e=t),e}function t(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}function n(e,t){var n,r,i,o,a=[],s=new Array(10);for(n=0;5>n;n++){for(r=0;5>r;r++)a[r]=t[r+5*n];for(r=0;5>r;r++){for(o=0,i=0;5>i;i++)o+=e[r+5*i]*a[i];s[r+5*n]=o}}return s}function r(t,n){return n=e(n,0,1),t.map(function(t,r){return r%6===0?t=1-(1-t)*n:t*=n,e(t,0,1)})}function i(t,r){var i;return r=e(r,-1,1),r*=100,0>r?i=127+r/100*127:(i=r%1,i=0===i?d[r]:d[Math.floor(r)]*(1-i)+d[Math.floor(r)+1]*i,i=127*i+127),n(t,[i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1])}function o(t,r){var i,o,a,s;return r=e(r,-1,1),i=1+(r>0?3*r:r),o=.3086,a=.6094,s=.082,n(t,[o*(1-i)+i,a*(1-i),s*(1-i),0,0,o*(1-i),a*(1-i)+i,s*(1-i),0,0,o*(1-i),a*(1-i),s*(1-i)+i,0,0,0,0,0,1,0,0,0,0,0,1])}function a(t,r){var i,o,a,s,l;return r=e(r,-180,180)/180*Math.PI,i=Math.cos(r),o=Math.sin(r),a=.213,s=.715,l=.072,n(t,[a+i*(1-a)+o*-a,s+i*-s+o*-s,l+i*-l+o*(1-l),0,0,a+i*-a+.143*o,s+i*(1-s)+.14*o,l+i*-l+o*-.283,0,0,a+i*-a+o*-(1-a),s+i*-s+o*s,l+i*(1-l)+o*l,0,0,0,0,0,1,0,0,0,0,0,1])}function s(t,r){return r=e(255*r,-255,255),n(t,[1,0,0,0,r,0,1,0,0,r,0,0,1,0,r,0,0,0,1,0,0,0,0,0,1])}function l(t,r,i,o){return r=e(r,0,2),i=e(i,0,2),o=e(o,0,2),n(t,[r,0,0,0,0,0,i,0,0,0,0,0,o,0,0,0,0,0,1,0,0,0,0,0,1])}function c(t,i){return i=e(i,0,1),n(t,r([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],i))}function u(t,i){return i=e(i,0,1),n(t,r([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],i))}var d=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];return{identity:t,adjust:r,multiply:n,adjustContrast:i,adjustBrightness:s,adjustSaturation:o,adjustHue:a,adjustColors:l,adjustSepia:c,adjustGrayscale:u}}),a("c",["m","n","e","q"],function(e,t,n,r){function i(r,i){return n.blobToImage(r).then(function(r){function o(e,t){var n,r,i,o,a,s=e.data,l=t[0],c=t[1],u=t[2],d=t[3],f=t[4],m=t[5],g=t[6],p=t[7],h=t[8],v=t[9],y=t[10],b=t[11],x=t[12],w=t[13],C=t[14],k=t[15],N=t[16],S=t[17],_=t[18],T=t[19];for(a=0;a<s.length;a+=4)n=s[a],r=s[a+1],i=s[a+2],o=s[a+3],s[a]=n*l+r*c+i*u+o*d+f,s[a+1]=n*m+r*g+i*p+o*h+v,s[a+2]=n*y+r*b+i*x+o*w+C,s[a+3]=n*k+r*N+i*S+o*_+T;return e}var a,s=e.create(t.getWidth(r),t.getHeight(r)),l=e.get2dContext(s);return l.drawImage(r,0,0),u(r),a=o(l.getImageData(0,0,s.width,s.height),i),l.putImageData(a,0,0),n.canvasToBlob(s)})}function o(r,i){return n.blobToImage(r).then(function(r){function o(e,t,n){function r(e,t,n){return e>n?e=n:t>e&&(e=t),e}var i,o,a,s,l,c,u,d,f,m,g,p,h,v,y,b,x;for(a=Math.round(Math.sqrt(n.length)),s=Math.floor(a/2),i=e.data,o=t.data,b=e.width,x=e.height,c=0;x>c;c++)for(l=0;b>l;l++){for(u=d=f=0,g=0;a>g;g++)for(m=0;a>m;m++)p=r(l+m-s,0,b-1),h=r(c+g-s,0,x-1),v=4*(h*b+p),y=n[g*a+m],u+=i[v]*y,d+=i[v+1]*y,f+=i[v+2]*y;v=4*(c*b+l),o[v]=r(u,0,255),o[v+1]=r(d,0,255),o[v+2]=r(f,0,255)}return t}var a,s,l=e.create(t.getWidth(r),t.getHeight(r)),c=e.get2dContext(l);return c.drawImage(r,0,0),u(r),a=c.getImageData(0,0,l.width,l.height),s=c.getImageData(0,0,l.width,l.height),s=o(a,s,i),c.putImageData(s,0,0),n.canvasToBlob(l)})}function a(r){return function(i,o){return n.blobToImage(i).then(function(i){function a(e,t){var n,r=e.data;for(n=0;n<r.length;n+=4)r[n]=t[r[n]],r[n+1]=t[r[n+1]],r[n+2]=t[r[n+2]];return e}var s,l,c=e.create(t.getWidth(i),t.getHeight(i)),d=e.get2dContext(c),f=new Array(256);for(l=0;l<f.length;l++)f[l]=r(l,o);return d.drawImage(i,0,0),u(i),s=a(d.getImageData(0,0,c.width,c.height),f),d.putImageData(s,0,0),n.canvasToBlob(c)})}}function s(e){return function(t,n){return i(t,e(r.identity(),n))}}function l(e){return function(t){return i(t,e)}}function c(e){return function(t){return o(t,e)}}var u=n.revokeImageUrl;return{invert:l([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:s(r.adjustBrightness),hue:s(r.adjustHue),saturate:s(r.adjustSaturation),contrast:s(r.adjustContrast),grayscale:s(r.adjustGrayscale),sepia:s(r.adjustSepia),colorize:function(e,t,n,o){return i(e,r.adjustColors(r.identity(),t,n,o))},sharpen:c([0,-1,0,-1,5,-1,0,-1,0]),emboss:c([-2,-1,0,-1,1,1,0,1,2]),gamma:a(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:a(function(e,t){return 255*(1-Math.exp(-(e/255)*t))}),colorFilter:i,convoluteFilter:o}}),a("r",["o","e","m","n"],function(e,t,n,r){function i(e,t,n){var a=r.getWidth(e),s=r.getHeight(e),l=t/a,c=n/s,u=!1;(.5>l||l>2)&&(l=.5>l?.5:2,u=!0),(.5>c||c>2)&&(c=.5>c?.5:2,u=!0);var d=o(e,l,c);return u?d.then(function(e){return i(e,t,n)}):d}function o(t,i,o){return new e(function(e){var a=r.getWidth(t),s=r.getHeight(t),l=Math.floor(a*i),c=Math.floor(s*o),u=n.create(l,c),d=n.get2dContext(u);d.drawImage(t,0,0,a,s,0,0,l,c),e(u)})}return{scale:i}}),a("d",["e","m","n","r"],function(e,t,n,r){function i(r,i){return e.blobToImage(r).then(function(o){var a=t.create(n.getWidth(o),n.getHeight(o)),s=t.get2dContext(a),c=0,u=0;return i=0>i?360+i:i,90!=i&&270!=i||t.resize(a,a.height,a.width),90!=i&&180!=i||(c=a.width),270!=i&&180!=i||(u=a.height),s.translate(c,u),s.rotate(i*Math.PI/180),s.drawImage(o,0,0),l(o),e.canvasToBlob(a,r.type)})}function o(r,i){return e.blobToImage(r).then(function(r){var o=t.create(n.getWidth(r),n.getHeight(r)),a=t.get2dContext(o);return"v"==i?(a.scale(1,-1),a.drawImage(r,0,-o.height)):(a.scale(-1,1),a.drawImage(r,-o.width,0)),l(r),e.canvasToBlob(o)})}function a(n,r,i,o,a){return e.blobToImage(n).then(function(n){var s=t.create(o,a),c=t.get2dContext(s);return c.drawImage(n,-r,-i),l(n),e.canvasToBlob(s)})}function s(t,n,i){return e.blobToImage(t).then(function(o){var a;return a=r.scale(o,n,i).then(function(n){return e.canvasToBlob(n,t.type)}).then(c(o))["catch"](c(o))})}var l=e.revokeImageUrl,c=function(e){return function(t){return l(e),t}};return{rotate:i,flip:o,crop:a,resize:s}}),a("7",["c","d"],function(e,t){var n=function(t){return e.invert(t)},r=function(t){return e.sharpen(t)},i=function(t){return e.emboss(t)},o=function(t,n){return e.gamma(t,n)},a=function(t,n){return e.exposure(t,n)},s=function(t,n,r,i){return e.colorize(t,n,r,i)},l=function(t,n){return e.brightness(t,n)},c=function(t,n){return e.hue(t,n)},u=function(t,n){return e.saturate(t,n)},d=function(t,n){return e.contrast(t,n)},f=function(t,n){return e.grayscale(t,n)},m=function(t,n){return e.sepia(t,n)},g=function(e,n){return t.flip(e,n)},p=function(e,n,r,i,o){return t.crop(e,n,r,i,o)},h=function(e,n,r){return t.resize(e,n,r)},v=function(e,n){return t.rotate(e,n)};return{invert:n,sharpen:r,emboss:i,brightness:l,hue:c,saturate:u,contrast:d,grayscale:f,sepia:m,colorize:s,gamma:o,exposure:a,flip:g,crop:p,resize:h,rotate:v}}),a("8",["e"],function(e){var t=function(t){return e.blobToImage(t)},n=function(t){return e.imageToBlob(t)},r=function(t){return e.blobToDataUri(t)},i=function(t){return e.blobToBase64(t)};return{blobToImage:t,imageToBlob:n,blobToDataUri:r,blobToBase64:i}}),s("f",tinymce.dom.DOMUtils),s("g",tinymce.ui.Factory),s("h",tinymce.ui.Form),s("i",tinymce.ui.Container),s("s",tinymce.ui.Control),s("t",tinymce.ui.DragHelper),s("u",tinymce.geom.Rect),s("w",tinymce.dom.DomQuery),s("x",tinymce.util.Observable),s("y",tinymce.util.VK),a("v",["w","t","u","5","x","y"],function(e,t,n,r,i,o){var a=0;return function(s,l,c,u,d){function f(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}function m(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function g(){return m(c,s)}function p(e,t,r,i){var o,a,l,u,d;o=t.x,a=t.y,l=t.w,u=t.h,o+=r*e.deltaX,a+=i*e.deltaY,l+=r*e.deltaW,u+=i*e.deltaH,20>l&&(l=20),20>u&&(u=20),d=s=n.clamp({x:o,y:a,w:l,h:u},c,"move"==e.name),d=m(c,d),N.fire("updateRect",{rect:d}),w(d)}function h(){function n(e){var n;return new t(R,{document:u.ownerDocument,handle:R+"-"+e.name,start:function(){n=s},drag:function(t){p(e,n,t.deltaX,t.deltaY)}})}e('<div id="'+R+'" class="'+E+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(u),r.each(T,function(t){e("#"+R,u).append('<div id="'+R+"-"+t+'"class="'+E+'croprect-block" style="display: none" data-mce-bogus="all">')}),r.each(S,function(t){e("#"+R,u).append('<div id="'+R+"-"+t.name+'" class="'+E+"croprect-handle "+E+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false">')}),_=r.map(S,n),y(s),e(u).on("focusin focusout",function(t){e(t.target).attr("aria-grabbed","focus"===t.type)}),e(u).on("keydown",function(e){function t(e,t,r,i,o){e.stopPropagation(),e.preventDefault(),p(n,r,i,o)}var n;switch(r.each(S,function(t){return e.target.id==R+"-"+t.name?(n=t,!1):void 0}),e.keyCode){case o.LEFT:t(e,n,s,-10,0);break;case o.RIGHT:t(e,n,s,10,0);break;case o.UP:t(e,n,s,0,-10);break;case o.DOWN:t(e,n,s,0,10);break;case o.ENTER:case o.SPACEBAR:e.preventDefault(),d()}})}function v(t){var n;n=r.map(S,function(e){return"#"+R+"-"+e.name}).concat(r.map(T,function(e){return"#"+R+"-"+e})).join(","),t?e(n,u).show():e(n,u).hide()}function y(t){function n(t,n){n.h<0&&(n.h=0),n.w<0&&(n.w=0),e("#"+R+"-"+t,u).css({left:n.x,top:n.y,width:n.w,height:n.h})}r.each(S,function(n){e("#"+R+"-"+n.name,u).css({left:t.w*n.xMul+t.x,top:t.h*n.yMul+t.y})}),n("top",{x:l.x,y:l.y,w:l.w,h:t.y-l.y}),n("right",{x:t.x+t.w,y:t.y,w:l.w-t.x-t.w+l.x,h:t.h}),n("bottom",{x:l.x,y:t.y+t.h,w:l.w,h:l.h-t.y-t.h+l.y}),n("left",{x:l.x,y:t.y,w:t.x-l.x,h:t.h}),n("move",t)}function b(e){s=e,y(s)}function x(e){l=e,y(s)}function w(e){b(f(c,e))}function C(e){c=e,y(s)}function k(){r.each(_,function(e){e.destroy()}),_=[]}var N,S,_,T,E="mce-",R=E+"crid-"+a++;return S=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],T=["top","right","bottom","left"],h(u),N=r.extend({toggleVisibility:v,setClampRect:C,setRect:b,getInnerRect:g,setInnerRect:w,setViewPortRect:x,destroy:k},i)}}),a("j",["s","t","u","5","3","v"],function(e,t,n,r,i,o){function a(e){return new i(function(t){function n(){e.removeEventListener("load",n),t(e)}e.complete?t(e):e.addEventListener("load",n)})}return e.extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(e){var t=this,r=new Image;r.src=e,a(r).then(function(){var e,i,o=t.state.get("viewRect");if(i=t.$el.find("img"),i[0])i.replaceWith(r);else{var a=document.createElement("div");a.className="mce-imagepanel-bg",t.getEl().appendChild(a),t.getEl().appendChild(r)}e={x:0,y:0,w:r.naturalWidth,h:r.naturalHeight},t.state.set("viewRect",e),t.state.set("rect",n.inflate(e,-20,-20)),o&&o.w==e.w&&o.h==e.h||t.zoomFit(),t.repaintImage(),t.fire("load")})},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e,t,n,r,i,o,a,s=this;a=10,e=s.$el.find("img"),t=s.getEl().clientWidth,n=s.getEl().clientHeight,r=e[0].naturalWidth,i=e[0].naturalHeight,o=Math.min((t-a)/r,(n-a)/i),o>=1&&(o=1),s.zoom(o)},repaintImage:function(){var e,t,n,r,i,o,a,s,l,c,u;u=this.getEl(),l=this.zoom(),c=this.state.get("rect"),a=this.$el.find("img"),s=this.$el.find(".mce-imagepanel-bg"),i=u.offsetWidth,o=u.offsetHeight,n=a[0].naturalWidth*l,r=a[0].naturalHeight*l,e=Math.max(0,i/2-n/2),t=Math.max(0,o/2-r/2),a.css({left:e,top:t,width:n,height:r}),s.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:c.x*l+e,y:c.y*l+t,w:c.w*l,h:c.h*l}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:i,h:o}))},bindStates:function(){function e(e){t.cropRect=new o(e,t.state.get("viewRect"),t.state.get("viewRect"),t.getEl(),function(){t.fire("crop")}),t.cropRect.on("updateRect",function(e){var n=e.rect,r=t.zoom();n={x:Math.round(n.x/r),y:Math.round(n.y/r),w:Math.round(n.w/r),h:Math.round(n.h/r)},t.state.set("rect",n)}),t.on("remove",t.cropRect.destroy)}var t=this;t.state.on("change:cropEnabled",function(e){t.cropRect.toggleVisibility(e.value),t.repaintImage()}),t.state.on("change:zoom",function(){t.repaintImage()}),t.state.on("change:rect",function(n){var r=n.value;t.cropRect||e(r),t.cropRect.setRect(r)})}})}),a("k",[],function(){return function(){function e(e){var t;return t=o.splice(++a),o.push(e),{state:e,removed:t}}function t(){return r()?o[--a]:void 0}function n(){return i()?o[++a]:void 0}function r(){return a>0}function i(){return-1!=a&&a<o.length-1}var o=[],a=-1;return{data:o,add:e,undo:t,redo:n,canUndo:r,canRedo:i}}}),a("9",["f","5","3","g","h","i","j","7","8","k"],function(e,t,n,r,i,o,a,s,l,c){function u(e){return{blob:e,url:URL.createObjectURL(e)}}function d(e){e&&URL.revokeObjectURL(e.url)}function f(e){t.each(e,d)}function m(n,l,m){function g(e){var t,n,r,i;t=O.find("#w")[0],n=O.find("#h")[0],r=parseInt(t.value(),10),i=parseInt(n.value(),10),O.find("#constrain")[0].checked()&&ae&&se&&r&&i&&("w"==e.control.settings.name?(i=Math.round(r*le),n.value(i)):(r=Math.round(i*ce),t.value(r))),ae=r,se=i}function p(e){return Math.round(100*e)+"%"}function h(){O.find("#undo").disabled(!ue.canUndo()),O.find("#redo").disabled(!ue.canRedo()),O.statusbar.find("#save").disabled(!ue.canUndo())}function v(){O.find("#undo").disabled(!0),O.find("#redo").disabled(!0)}function y(e){e&&j.imageSrc(e.url)}function b(e){return function(){var n=t.grep(oe,function(t){return t.settings.name!=e});t.each(n,function(e){e.hide()}),e.show(),e.focus()}}function x(e){z=u(e),y(z)}function w(e){n=u(e),y(n),f(ue.add(n).removed),h()}function C(){var e=j.selection();s.crop(n.blob,e.x,e.y,e.w,e.h).then(function(e){w(e),S()})}function k(e){var t=[].slice.call(arguments,1);return function(){var r=z||n;e.apply(this,[r.blob].concat(t)).then(x)}}function N(e){var t=[].slice.call(arguments,1);return function(){e.apply(this,[n.blob].concat(t)).then(w)}}function S(){y(n),d(z),b(H)(),h()}function _(){z&&(w(z.blob),S())}function T(){var e=j.zoom();2>e&&(e+=.1),j.zoom(e)}function E(){var e=j.zoom();e>.1&&(e-=.1),j.zoom(e)}function R(){n=ue.undo(),y(n),h()}function A(){n=ue.redo(),y(n),h()}function B(){l(n.blob),O.close()}function P(e){return new i({layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}function M(e,t){return P([{text:"Back",onclick:S},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:_}]).hide().on("show",function(){v(),t(n.blob).then(function(e){var t=u(e);y(t),d(z),z=t})})}function D(e,t,r,i,o){function a(e){t(n.blob,e).then(function(e){var t=u(e);y(t),d(z),z=t})}return P([{text:"Back",onclick:S},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){a(e.value)},minValue:i,maxValue:o,value:r,previewFilter:p},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:_}]).hide().on("show",function(){this.find("slider").value(r),v()})}function I(e,t){function r(){var e,r,i;e=O.find("#r")[0].value(),r=O.find("#g")[0].value(),i=O.find("#b")[0].value(),t(n.blob,e,r,i).then(function(e){var t=u(e);y(t),d(z),z=t})}return P([{text:"Back",onclick:S},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:p},{type:"slider",label:"G",name:"g",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:p},{type:"slider",label:"B",name:"b",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:p},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:_}]).hide().on("show",function(){O.find("#r,#g,#b").value(1),v()})}function L(e){e.control.value()===!0&&(le=se/ae,ce=ae/se)}var O,H,F,z,U,W,$,j,V,q,Y,K,X,G,J,Z,Q,ee,te,ne,re,ie,oe,ae,se,le,ce,ue=new c;U=P([{text:"Back",onclick:S},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:C}]).hide().on("show hide",function(e){j.toggleCropRect("show"==e.type)}).on("show",v),W=P([{text:"Back",onclick:S},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:g},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:g},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:L},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}]).hide().on("submit",function(e){var t=parseInt(O.find("#w").value(),10),n=parseInt(O.find("#h").value(),10);e.preventDefault(),N(s.resize,t,n)(),S()}).on("show",v),$=P([{text:"Back",onclick:S},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:k(s.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:k(s.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:k(s.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:k(s.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:_}]).hide().on("show",v),Y=M("Invert",s.invert),te=M("Sharpen",s.sharpen),ne=M("Emboss",s.emboss),K=D("Brightness",s.brightness,0,-1,1),X=D("Hue",s.hue,180,0,360),G=D("Saturate",s.saturate,0,-1,1),J=D("Contrast",s.contrast,0,-1,1),Z=D("Grayscale",s.grayscale,0,0,1),Q=D("Sepia",s.sepia,0,0,1),ee=I("Colorize",s.colorize),re=D("Gamma",s.gamma,0,-1,1),ie=D("Exposure",s.exposure,1,0,2),F=P([{text:"Back",onclick:S},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:b(X)},{text:"saturate",icon:"saturate",onclick:b(G)},{text:"sepia",icon:"sepia",onclick:b(Q)},{text:"emboss",icon:"emboss",onclick:b(ne)},{text:"exposure",icon:"exposure",onclick:b(ie)},{type:"spacer",flex:1}]).hide(),H=P([{tooltip:"Crop",icon:"crop",onclick:b(U)},{tooltip:"Resize",icon:"resize2",onclick:b(W)},{tooltip:"Orientation",icon:"orientation",onclick:b($)},{tooltip:"Brightness",icon:"sun",onclick:b(K)},{tooltip:"Sharpen",icon:"sharpen",onclick:b(te)},{tooltip:"Contrast",icon:"contrast",onclick:b(J)},{tooltip:"Color levels",icon:"drop",onclick:b(ee)},{tooltip:"Gamma",icon:"gamma",onclick:b(re)},{tooltip:"Invert",icon:"invert",onclick:b(Y)}]),j=new a({flex:1,imageSrc:n.url}),V=new o({layout:"flex",direction:"column",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:R},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:A},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:T},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:E}]}),q=new o({type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:[V,j]}),oe=[H,U,W,$,F,Y,K,X,G,J,Z,Q,ee,te,ne,re,ie],O=r.create("window",{layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(e.DOM.getViewPort().w,800),minHeight:Math.min(e.DOM.getViewPort().h,650),title:"Edit image",items:oe.concat([q]),buttons:[{text:"Save",name:"save",subtype:"primary",onclick:B},{text:"Cancel",onclick:"close"}]}),O.renderTo(document.body).reflow(),O.on("close",function(){m(),f(ue.data),ue=null,z=null}),ue.add(n),h(),j.on("load",function(){ae=j.imageSize().w,se=j.imageSize().h,le=se/ae,ce=ae/se,O.find("#w").value(ae),O.find("#h").value(se)}),j.on("crop",C)}function g(e){return new n(function(t,n){m(u(e),t,n)})}return{edit:g}}),a("a",[],function(){function e(e){function t(e){return/^[0-9\.]+px$/.test(e)}var n,r;return n=e.style.width,r=e.style.height,n||r?t(n)&&t(r)?{w:parseInt(n,10),h:parseInt(r,10)}:null:(n=e.width,r=e.height,n&&r?{w:parseInt(n,10),h:parseInt(r,10)}:null)}function t(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))}function n(e){return{w:e.naturalWidth,h:e.naturalHeight}}return{getImageSize:e,setImageSize:t,getNaturalImageSize:n}}),a("l",["3","5"],function(e,t){var n=function(e){return null!==e&&void 0!==e},r=function(e,t){var r;return r=t.reduce(function(e,t){return n(e)?e[t]:void 0},e),n(r)?r:null},i=function(n,r){return new e(function(e){var i;i=new XMLHttpRequest,i.onreadystatechange=function(){4===i.readyState&&e({status:i.status,blob:this.response})},i.open("GET",n,!0),t.each(r,function(e,t){i.setRequestHeader(t,e)}),i.responseType="blob",i.send()})},o=function(t){return new e(function(e){var n=new FileReader;n.onload=function(t){var n=t.target;e(n.result)},n.readAsText(t)})},a=function(e){var t;try{t=JSON.parse(e)}catch(e){}return t};return{traverse:r,readBlob:o,requestUrlAsBlob:i,parseJson:a}}),a("b",["3","5","l"],function(e,t,n){function r(t){return n.requestUrlAsBlob(t,{}).then(function(t){return t.status>=400?o(t.status):e.resolve(t.blob)})}var i=function(e){return 400===e||403===e||500===e},o=function(t){return e.reject("ImageProxy HTTP error: "+t)},a=function(t){e.reject("ImageProxy Service error: "+t)},s=function(e,t){return n.readBlob(t).then(function(e){var t=n.parseJson(e),r=n.traverse(t,["error","type"]);return a(r?r:"Invalid JSON")})},l=function(e,t){return i(e)?s(e,t):o(e)},c=function(t,r){return n.requestUrlAsBlob(t,{"Content-Type":"application/json;charset=UTF-8","tiny-api-key":r}).then(function(t){return t.status>=400?l(t.status,t.blob):e.resolve(t.blob)})},u=function(e,t){return t?c(e,t):r(e)};return{getUrl:u}}),a("0",["1","2","3","4","5","6","7","8","9","a","b"],function(e,t,n,r,i,o,a,s,l,c,u){var d=function(e){function d(t){e.notificationManager.open({text:t,type:"error"})}function f(){return e.selection.getNode();

}function m(t){var n=t.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return n?e.dom.encode(n[1]):null}function g(){return"imagetools"+M++}function p(t){var n=t.src;return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new r(n).host===e.documentBaseURI.host}function h(t){return-1!==i.inArray(e.settings.imagetools_cors_hosts,new r(t.src).host)}function v(){return e.settings.api_key||e.settings.imagetools_api_key}function y(t){var n,r=t.src;return h(t)?u.getUrl(t.src,null):p(t)?s.imageToBlob(t):(r=e.settings.imagetools_proxy,r+=(-1===r.indexOf("?")?"?":"&")+"url="+encodeURIComponent(t.src),n=v(),u.getUrl(r,n))}function b(){var t;return t=e.editorUpload.blobCache.getByUri(f().src),t?t.blob():y(f())}function x(){B=o.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},e.settings.images_upload_timeout||3e4)}function w(){clearTimeout(B)}function C(t,n){return s.blobToDataUri(t).then(function(i){var o,a,s,l,c,u;return u=f(),l=e.editorUpload.blobCache,c=l.getByUri(u.src),s=r.parseDataUri(i).data,o=g(),e.settings.images_reuse_filename&&(a=c?c.filename():m(u.src)),c=l.create(o,t,s,a),l.add(c),e.undoManager.transact(function(){function t(){e.$(u).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(w(),x())}e.$(u).on("load",t),e.$(u).attr({src:c.blobUri()}).removeAttr("data-mce-src")}),c})}function k(t){return function(){return e._scanForImages().then(b).then(t).then(C,d)}}function N(e){return function(){return k(function(t){var n=c.getImageSize(f());return n&&c.setImageSize(f(),{w:n.h,h:n.w}),a.rotate(t,e)})()}}function S(e){return function(){return k(function(t){return a.flip(t,e)})()}}function _(){var e=f(),t=c.getNaturalImageSize(e),r=function(r){return new n(function(n){s.blobToImage(r).then(function(i){var o=c.getNaturalImageSize(i);t.w==o.w&&t.h==o.h||c.getImageSize(e)&&c.setImageSize(e,o),URL.revokeObjectURL(i.src),n(r)})})},i=function(e){return l.edit(e).then(r).then(function(e){C(e,!0)},function(){})};e&&y(e).then(i,d)}function T(){e.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),e.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),e.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),e.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),e.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),e.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})}function E(){e.on("NodeChange",function(t){P&&P.src!=t.element.src&&(w(),e.editorUpload.uploadImagesAuto(),P=void 0),R(t.element)&&(P=t.element)})}function R(t){var n=e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])");return n&&(p(t)||h(t)||e.settings.imagetools_proxy)}function A(){var t=e.settings.imagetools_toolbar;t||(t="rotateleft rotateright | flipv fliph | crop editimage imageoptions"),e.addContextToolbar(R,t)}var B,P,M=0;t.fileApi&&(i.each({mceImageRotateLeft:N(-90),mceImageRotateRight:N(90),mceImageFlipVertical:S("v"),mceImageFlipHorizontal:S("h"),mceEditImage:_},function(t,n){e.addCommand(n,t)}),T(),A(),E())};return e.add("imagetools",d),function(){}}),r("0")()}()}.call(this),function(){!function(e){e.PluginManager.add("legacyoutput",function(t,n,r){t.settings.inline_styles=!1,t.on("init",function(){var n="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",r=e.explode(t.settings.font_size_style_values),i=t.schema;t.formatter.register({alignleft:{selector:n,attributes:{align:"left"}},aligncenter:{selector:n,attributes:{align:"center"}},alignright:{selector:n,attributes:{align:"right"}},alignjustify:{selector:n,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return e.inArray(r,t.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),e.each("b,i,u,strike".split(","),function(e){i.addValidElements(e+"[*]")}),i.getElementRule("font")||i.addValidElements("font[face|size|color|style]"),e.each(n.split(","),function(e){var t=i.getElementRule(e);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})}),t.addButton("fontsizeselect",function(){var e=[],n="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7",r=t.settings.fontsize_formats||n;return t.$.each(r.split(" "),function(t,n){var r=n,i=n,o=n.split("=");o.length>1&&(r=o[0],i=o[1]),e.push({text:r,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:function(){var e=this;t.on("NodeChange",function(){var n;n=t.dom.getParent(t.selection.getNode(),"font"),e.value(n?n.size:"")})},onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}}),t.addButton("fontselect",function(){function e(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}var n="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",i=[],o=e(t.settings.font_formats||n);return r.each(o,function(e,t){i.push({text:{raw:t[0]},value:t[1],textStyle:-1==t[1].indexOf("dings")?"font-family:"+t[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:i,fixedWidth:!0,onPostRender:function(){var e=this;t.on("NodeChange",function(){var n;n=t.dom.getParent(t.selection.getNode(),"font"),e.value(n?n.face:"")})},onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})})}(tinymce)}.call(this),function(){!function(){var e={},t=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),l=0;a>l;++l)s[l]=r(i[l]);var c=o.apply(null,s);if(void 0===c)throw"module ["+t+"] returned undefined";n.instance=c},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},i=function(e,t){for(var n=e.length,i=new Array(n),o=0;n>o;++o)i.push(r(e[o]));t.apply(null,t)},o={};o.bolt={module:{api:{define:n,require:i,demand:r}}};var a=n,s=function(e,t){a(e,[],function(){return t})};s("1",tinymce.PluginManager),s("6",tinymce.util.Delay),s("e",tinymce.util.Tools),s("9",tinymce.html.SaxParser),s("a",tinymce.html.Schema),s("b",tinymce.dom.DOMUtils.DOM),a("h",[],function(){var e=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]};return{getVideoScriptMatch:e}}),a("c",[],function(){var e=function(e){return e.replace(/px$/,"")},t=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},n=function(t){return function(n){return n?e(n.style[t]):""}},r=function(e){return function(n,r){n&&(n.style[e]=t(r))}};return{getMaxWidth:n("maxWidth"),getMaxHeight:n("maxHeight"),setMaxWidth:r("maxWidth"),setMaxHeight:r("maxHeight")}}),a("7",["e","9","a","b","h","c"],function(e,t,n,r,i,o){var a=function(e){return r.getAttrib(e,"data-ephox-embed-iri")},s=function(e){var t=r.createFragment(e);return""!==a(t.firstChild)},l=function(n,r){var o={};return new t({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,r){if(o.source1||"param"!==t||(o.source1=r.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(o.type||(o.type=t),o=e.extend(r.map,o)),"script"===t){var a=i.getVideoScriptMatch(n,r.map.src);if(!a)return;o={type:"script",source1:r.map.src,width:a.width,height:a.height}}"source"===t&&(o.source1?o.source2||(o.source2=r.map.src):o.source1=r.map.src),"img"!==t||o.poster||(o.poster=r.map.src)}}).parse(r),o.source1=o.source1||o.src||o.data,o.source2=o.source2||"",o.poster=o.poster||"",o},c=function(e){var t=r.createFragment(e),n=t.firstChild;return{type:"ephox-embed-iri",source1:a(n),source2:"",poster:"",width:o.getMaxWidth(n),height:o.getMaxHeight(n)}},u=function(e,t){return s(t)?c(t):l(e,t)};return{htmlToData:u}}),s("8",tinymce.html.Writer),a("4",["8","9","a","b","c"],function(e,t,n,r,i){var o=function(e,t){var n,r,i,o;for(n in t)if(i=""+t[n],e.map[n])for(r=e.length;r--;)o=e[r],o.name===n&&(i?(e.map[n]=i,o.value=i):(delete e.map[n],e.splice(r,1)));else i&&(e.push({name:n,value:i}),e.map[n]=i)},a=function(n){var r=new e,i=new t(r);return i.parse(n),r.getContent()},s=function(r,i,a){var s,l=new e,c=0;return new t({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){l.comment(e)},cdata:function(e){l.cdata(e)},text:function(e,t){l.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":o(t,{width:i.width,height:i.height})}if(a)switch(e){case"video":o(t,{poster:i.poster,src:""}),i.source2&&o(t,{src:""});break;case"iframe":o(t,{src:i.source1});break;case"source":if(c++,2>=c&&(o(t,{src:i["source"+c],type:i["source"+c+"mime"]}),!i["source"+c]))return;break;case"img":if(!i.poster)return;s=!0}l.start(e,t,n)},end:function(e){if("video"===e&&a)for(var t=1;2>=t;t++)if(i["source"+t]){var n=[];n.map={},t>c&&(o(n,{src:i["source"+t],type:i["source"+t+"mime"]}),l.start("source",n,!0))}if(i.poster&&"object"===e&&a&&!s){var r=[];r.map={},o(r,{src:i.poster,width:i.width,height:i.height}),l.start("img",r,!0)}l.end(e)}},new n({})).parse(r),l.getContent()},l=function(e){var t=r.createFragment(e);return""!==r.getAttrib(t.firstChild,"data-ephox-embed-iri")},c=function(e,t){var n=r.createFragment(e),o=n.firstChild;return i.setMaxWidth(o,t.width),i.setMaxHeight(o,t.height),a(o.outerHTML)},u=function(e,t,n){return l(e)?c(e,t):s(e,t,n)};return{updateHtml:u}}),a("l",[],function(){var e=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n=e.toLowerCase().split(".").pop(),r=t[n];return r?r:""};return{guess:e}}),a("m",[],function(){var e=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\-_]+(?:\?.+)?)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowfullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowfullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}];return{urlPatterns:e}}),a("j",["l","7","m","h","4","e"],function(e,t,n,r,i,o){var a=function(a,s){var l="",c=o.extend({},s);if(!c.source1&&(o.extend(c,t.htmlToData(a.settings.media_scripts,c.embed)),!c.source1))return"";if(c.source2||(c.source2=""),c.poster||(c.poster=""),c.source1=a.convertURL(c.source1,"source"),c.source2=a.convertURL(c.source2,"source"),c.source1mime=e.guess(c.source1),c.source2mime=e.guess(c.source2),c.poster=a.convertURL(c.poster,"poster"),o.each(n.urlPatterns,function(e){var t,n,r=e.regex.exec(c.source1);if(r){for(n=e.url,t=0;r[t];t++)n=n.replace("$"+t,function(){return r[t]});c.source1=n,c.type=e.type,c.allowFullscreen=e.allowFullscreen,c.width=c.width||e.w,c.height=c.height||e.h}}),c.embed)l=i.updateHtml(c.embed,c,!0);else{var u=r.getVideoScriptMatch(a.settings.media_scripts,c.source1);if(u&&(c.type="script",c.width=u.width,c.height=u.height),c.width=c.width||300,c.height=c.height||150,o.each(c,function(e,t){c[t]=a.dom.encode(e)}),"iframe"===c.type){var d=c.allowFullscreen?' allowFullscreen="1"':"";l+='<iframe src="'+c.source1+'" width="'+c.width+'" height="'+c.height+'"'+d+"></iframe>"}else"application/x-shockwave-flash"===c.source1mime?(l+='<object data="'+c.source1+'" width="'+c.width+'" height="'+c.height+'" type="application/x-shockwave-flash">',c.poster&&(l+='<img src="'+c.poster+'" width="'+c.width+'" height="'+c.height+'" />'),l+="</object>"):-1!==c.source1mime.indexOf("audio")?a.settings.audio_template_callback?l=a.settings.audio_template_callback(c):l+='<audio controls="controls" src="'+c.source1+'">'+(c.source2?'\n<source src="'+c.source2+'"'+(c.source2mime?' type="'+c.source2mime+'"':"")+" />\n":"")+"</audio>":"script"===c.type?l+='<script src="'+c.source1+'"></script>':l=a.settings.video_template_callback?a.settings.video_template_callback(c):'<video width="'+c.width+'" height="'+c.height+'"'+(c.poster?' poster="'+c.poster+'"':"")+' controls="controls">\n<source src="'+c.source1+'"'+(c.source1mime?' type="'+c.source1mime+'"':"")+" />\n"+(c.source2?'<source src="'+c.source2+'"'+(c.source2mime?' type="'+c.source2mime+'"':"")+" />\n":"")+"</video>"}return l};return{dataToHtml:a}}),s("k",tinymce.util.Promise),a("d",["j","k"],function(e,t){var n=function(e,n,r){var i={};return new t(function(t,o){var a=function(r){return r.html&&(i[e.source1]=r),t({url:e.source1,html:r.html?r.html:n(e)})};i[e.source1]?a(i[e.source1]):r({url:e.source1},a,o)})},r=function(e,n){return new t(function(t){t({html:n(e),url:e.source1})})},i=function(t){return function(n){return e.dataToHtml(t,n)}},o=function(e,t){var o=e.settings.media_url_resolver;return o?n(t,i(e),o):r(t,i(e))};return{getEmbedHtml:o}}),s("f",tinymce.Env),a("g",[],function(){var e=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},t=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],i=e.find("#constrain")[0];n&&r&&i&&t(n,r,i.checked())},n=function(t,n,r){var i=t.state.get("oldVal"),o=n.state.get("oldVal"),a=t.value(),s=n.value();r&&i&&o&&a&&s&&(a!==i?(s=Math.round(a/i*s),isNaN(s)||n.value(s)):(a=Math.round(s/o*a),isNaN(a)||t.value(a))),e(t,n)},r=function(n){t(n,e)},i=function(e){t(e,n)},o=function(e){var t=function(){e(function(e){i(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}};return{createUi:o,syncSize:r,updateSize:i}}),a("2",["6","7","4","d","c","e","f","g"],function(e,t,n,r,i,o,a,s){var l=a.ie&&a.ie<=8?"onChange":"onInput",c=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},u=function(e){var n=e.selection.getNode(),r=n.getAttribute("data-ephox-embed-iri");return r?{source1:r,"data-ephox-embed-iri":r,width:i.getMaxWidth(n),height:i.getMaxHeight(n)}:n.getAttribute("data-mce-object")?t.htmlToData(e.settings.media_scripts,e.serializer.serialize(n,{selection:!0})):{}},d=function(e){var t=e.selection.getNode();return t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri")?e.selection.getContent():void 0},f=function(e,n){return function(r){var i=r.html,a=e.find("#embed")[0],l=o.extend(t.htmlToData(n.settings.media_scripts,i),{source1:r.url});e.fromJSON(l),a&&(a.value(i),s.updateSize(e))}},m=function(e,t){var n,r,i=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=i.length-1;r>=0;r--)t[n]===i[r]&&i.splice(r,1);e.selection.select(i[0])},g=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),m(e,n),e.nodeChanged()},p=function(e,t){var i=e.toJSON();i.embed=n.updateHtml(i.embed,i),i.embed?g(t,i.embed):r.getEmbedHtml(t,i).then(function(e){g(t,e.html)})["catch"](c(t))},h=function(e,t){o.each(t,function(t,n){e.find("#"+n).value(t)})},v=function(e){var i,a,m=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){r.getEmbedHtml(e,i.toJSON()).then(f(i,e))["catch"](c(e))},1)},onchange:function(t){r.getEmbedHtml(e,i.toJSON()).then(f(i,e))["catch"](c(e)),h(i,t.meta)},onbeforecall:function(e){e.meta=i.toJSON()}}],g=[],v=function(e){e(i),a=i.toJSON(),i.find("#embed").value(n.updateHtml(a.embed,a))};if(e.settings.media_alt_source!==!1&&g.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),e.settings.media_poster!==!1&&g.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),e.settings.media_dimensions!==!1){var y=s.createUi(v);m.push(y)}a=u(e);var b={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:d(e),multiline:!0,rows:5,label:"Source"},x=function(){a=o.extend({},t.htmlToData(e.settings.media_scripts,this.value())),this.parent().parent().fromJSON(a)};b[l]=x,i=e.windowManager.open({title:"Insert/edit media",data:a,bodyType:"tabpanel",body:[{title:"General",type:"form",items:m},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},b]},{title:"Advanced",type:"form",items:g}],onSubmit:function(){s.updateSize(i),p(i,e)}}),s.syncSize(i)};return{showDialog:v}}),a("3",["e","8","9","a"],function(e,t,n,r){var i=function(e,i){if(e.settings.media_filter_html===!1)return i;var o,a=new t;return new n({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){a.comment(e)},cdata:function(e){a.cdata(e)},text:function(e,t){a.text(e,t)},start:function(t,n,r){if(o=!0,"script"!==t&&"noscript"!==t){for(var i=0;i<n.length;i++){if(0===n[i].name.indexOf("on"))return;"style"===n[i].name&&(n[i].value=e.dom.serializeStyle(e.dom.parseStyle(n[i].value),t))}a.start(t,n,r),o=!1}},end:function(e){o||a.end(e)}},new r({})).parse(i),a.getContent()};return{sanitize:i}}),s("i",tinymce.html.Node),a("5",["3","h","i","f"],function(e,t,n,r){var i=function(e,t){var i,o=t.name;return i=new n("img",1),i.shortEnded=!0,a(e,t,i),i.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===o?"30":"150"),style:t.attr("style"),src:r.transparentSrc,"data-mce-object":o,"class":"mce-object mce-object-"+o}),i},o=function(e,t){var r,i,o,s=t.name;return r=new n("span",1),r.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":s,"class":"mce-preview-object mce-object-"+s}),a(e,t,r),i=new n(s,1),i.attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),width:t.attr("width")||"300",height:t.attr("height")||("audio"===s?"30":"150"),frameborder:"0"}),o=new n("span",1),o.attr("class","mce-shim"),r.append(i),r.append(o),r},a=function(t,n,r){var i,o,a,s,l;for(a=n.attributes,s=a.length;s--;)i=a[s].name,o=a[s].value,"width"!==i&&"height"!==i&&"style"!==i&&("data"!==i&&"src"!==i||(o=t.convertURL(o,i)),r.attr("data-mce-p-"+i,o));l=n.firstChild&&n.firstChild.value,l&&(r.attr("data-mce-html",escape(e.sanitize(t,l))),r.firstChild=null)},s=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},l=function(e){return function(n){for(var a,l,c=n.length;c--;)a=n[c],a.parent&&(a.parent.attr("data-mce-object")||("script"!==a.name||(l=t.getVideoScriptMatch(e.settings.media_scripts,a.attr("src"))))&&(l&&(l.width&&a.attr("width",l.width.toString()),l.height&&a.attr("height",l.height.toString())),"iframe"===a.name&&e.settings.media_live_embeds!==!1&&r.ceFalse?s(a)||a.replace(o(e,a)):s(a)||a.replace(i(e,a))))}};return{createPreviewIframeNode:o,createPlaceholderNode:i,placeHolderConverter:l}}),a("0",["1","2","3","4","5"],function(e,t,n,r,i){var o=function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),e.on("preInit",function(){var t=e.schema.getSpecialElements();tinymce.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var r=e.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){r[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",i.placeHolderConverter(e)),e.serializer.addAttributeFilter("data-mce-object",function(t,r){for(var i,o,a,s,l,c,u,d,f=t.length;f--;)if(i=t[f],i.parent){for(u=i.attr(r),o=new tinymce.html.Node(u,1),"audio"!==u&&"script"!==u&&(d=i.attr("class"),o.attr(d&&-1!==d.indexOf("mce-preview-object")?{width:i.firstChild.attr("width"),height:i.firstChild.attr("height")}:{width:i.attr("width"),height:i.attr("height")})),o.attr({style:i.attr("style")}),s=i.attributes,a=s.length;a--;){var m=s[a].name;0===m.indexOf("data-mce-p-")&&o.attr(m.substr(11),s[a].value)}"script"===u&&o.attr("type","text/javascript"),l=i.attr("data-mce-html"),l&&(c=new tinymce.html.Node("#text",3),c.raw=!0,c.value=n.sanitize(e,unescape(l)),o.append(c)),i.replace(o)}})}),e.on("click keyup",function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),e.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"),t&&(t=unescape(t),n.setAttribute("data-mce-html",escape(r.updateHtml(t,{width:e.width,height:e.height})))))}),this.showDialog=function(){t.showDialog(e)},e.addButton("media",{tooltip:"Insert/edit media",onclick:this.showDialog,stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",onclick:this.showDialog,context:"insert",prependToContext:!0}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,n){var r=e.$(n);0===r.find("span.mce-shim",n).length&&r.append('<span class="mce-shim"></span>')})}),e.addCommand("mceMedia",this.showDialog)};return e.add("media",o),function(){}}),r("0")()}()}.call(this),function(){tinymce.PluginManager.add("pagebreak",function(e){var t="mce-pagebreak",n=e.getParam("pagebreak_separator","<!-- pagebreak -->"),r=new RegExp(n.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi"),i='<img src="'+tinymce.Env.transparentSrc+'" class="'+t+'" data-mce-resize="false" data-mce-placeholder />';e.addCommand("mcePageBreak",function(){e.insertContent(e.settings.pagebreak_split_block?"<p>"+i+"</p>":i)}),e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"}),e.on("ResolveName",function(n){"IMG"==n.target.nodeName&&e.dom.hasClass(n.target,t)&&(n.name="pagebreak")}),e.on("click",function(n){n=n.target,"IMG"===n.nodeName&&e.dom.hasClass(n,t)&&e.selection.select(n)}),e.on("BeforeSetContent",function(e){e.content=e.content.replace(r,i)}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(t){for(var r,i,o=t.length;o--;)if(r=t[o],i=r.attr("class"),i&&-1!==i.indexOf("mce-pagebreak")){var a=r.parent;if(e.schema.getBlockElements()[a.name]&&e.settings.pagebreak_split_block){a.type=3,a.value=n,a.raw=!0,r.remove();continue}r.type=3,r.value=n,r.raw=!0}})})})}.call(this),function(){tinymce.PluginManager.add("print",function(e){e.addCommand("mcePrint",function(){e.getWin().print()}),e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addShortcut("Meta+P","","mcePrint"),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print",shortcut:"Meta+P",context:"file"})})}.call(this),function(){!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){var r,i,o,s,l;for(r=0;r<n.length;r++){i=e,o=n[r],s=o.split(/[.\/]/);for(var c=0;c<s.length-1;++c)i[s[c]]===t&&(i[s[c]]={}),i=i[s[c]];i[s[s.length-1]]=a[o]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(o in a)l[o]=a[o];for(r=0;r<n.length;r++)delete l[n[r]];e.privateModules=l}}var a={};r("tinymce/spellcheckerplugin/DomTextMatcher",[],function(){function e(e){return e&&1==e.nodeType&&"false"===e.contentEditable}return function(t,n){function r(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:e.index,end:e.index+e[0].length,text:e[0],data:t}}function i(t){var n;if(3===t.nodeType)return t.data;if(N[t.nodeName]&&!k[t.nodeName])return"";if(e(t))return"\n";if(n="",(k[t.nodeName]||S[t.nodeName])&&(n+="\n"),t=t.firstChild)do n+=i(t);while(t=t.nextSibling);return n}function o(t,n,r){var i,o,a,s,l,c=[],u=0,d=t,f=0;n=n.slice(0),n.sort(function(e,t){return e.start-t.start}),l=n.shift();e:for(;;){if((k[d.nodeName]||S[d.nodeName]||e(d))&&u++,3===d.nodeType&&(!o&&d.length+u>=l.end?(o=d,s=l.end-u):i&&c.push(d),!i&&d.length+u>l.start&&(i=d,a=l.start-u),u+=d.length),i&&o){if(d=r({startNode:i,startNodeIndex:a,endNode:o,endNodeIndex:s,innerNodes:c,match:l.text,matchIndex:f}),u-=o.length-s,i=null,o=null,c=[],l=n.shift(),f++,!l)break}else if(N[d.nodeName]&&!k[d.nodeName]||!d.firstChild){if(d.nextSibling){d=d.nextSibling;continue}}else if(!e(d)){d=d.firstChild;continue}for(;;){if(d.nextSibling){d=d.nextSibling;break}if(d.parentNode===t)break e;d=d.parentNode}}}function a(e){function t(t,n){var r=_[n];r.stencil||(r.stencil=e(r));var i=r.stencil.cloneNode(!1);return i.setAttribute("data-mce-index",n),t&&i.appendChild(T.doc.createTextNode(t)),i}return function(e){var n,r,i,o=e.startNode,a=e.endNode,s=e.matchIndex,l=T.doc;if(o===a){var c=o;i=c.parentNode,e.startNodeIndex>0&&(n=l.createTextNode(c.data.substring(0,e.startNodeIndex)),i.insertBefore(n,c));var u=t(e.match,s);return i.insertBefore(u,c),e.endNodeIndex<c.length&&(r=l.createTextNode(c.data.substring(e.endNodeIndex)),i.insertBefore(r,c)),c.parentNode.removeChild(c),u}n=l.createTextNode(o.data.substring(0,e.startNodeIndex)),r=l.createTextNode(a.data.substring(e.endNodeIndex));for(var d=t(o.data.substring(e.startNodeIndex),s),f=[],m=0,g=e.innerNodes.length;g>m;++m){var p=e.innerNodes[m],h=t(p.data,s);p.parentNode.replaceChild(h,p),f.push(h)}var v=t(a.data.substring(0,e.endNodeIndex),s);return i=o.parentNode,i.insertBefore(n,o),i.insertBefore(d,o),i.removeChild(o),i=a.parentNode,i.insertBefore(v,a),i.insertBefore(r,a),i.removeChild(a),v}}function s(e){var t=e.parentNode;t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function l(e){var n=t.getElementsByTagName("*"),r=[];e="number"==typeof e?""+e:null;for(var i=0;i<n.length;i++){var o=n[i],a=o.getAttribute("data-mce-index");null!==a&&a.length&&(a!==e&&null!==e||r.push(o))}return r}function c(e){for(var t=_.length;t--;)if(_[t]===e)return t;return-1}function u(e){var t=[];return d(function(n,r){e(n,r)&&t.push(n)}),_=t,this}function d(e){for(var t=0,n=_.length;n>t&&e(_[t],t)!==!1;t++);return this}function f(e){return _.length&&o(t,_,a(e)),this}function m(e,t){if(C&&e.global)for(;w=e.exec(C);)_.push(r(w,t));return this}function g(e){var t,n=l(e?c(e):null);for(t=n.length;t--;)s(n[t]);return this}function p(e){return _[e.getAttribute("data-mce-index")]}function h(e){return l(c(e))[0]}function v(e,t,n){return _.push({start:e,end:e+t,text:C.substr(e,t),data:n}),this}function y(e){var t=l(c(e)),r=n.dom.createRng();return r.setStartBefore(t[0]),r.setEndAfter(t[t.length-1]),r}function b(e,t){var r=y(e);return r.deleteContents(),t.length>0&&r.insertNode(n.dom.doc.createTextNode(t)),r}function x(){return _.splice(0,_.length),g(),this}var w,C,k,N,S,_=[],T=n.dom;return k=n.schema.getBlockElements(),N=n.schema.getWhiteSpaceElements(),S=n.schema.getShortEndedElements(),C=i(t),{text:C,matches:_,each:d,filter:u,reset:x,matchFromElement:p,elementFromMatch:h,find:m,add:v,wrap:f,unwrap:g,replace:b,rangeFromMatch:y,indexOf:c}}}),r("tinymce/spellcheckerplugin/Plugin",["tinymce/spellcheckerplugin/DomTextMatcher","tinymce/PluginManager","tinymce/util/Tools","tinymce/ui/Menu","tinymce/dom/DOMUtils","tinymce/util/XHR","tinymce/util/URI","tinymce/util/JSON"],function(e,t,n,r,i,o,a,s){t.add("spellchecker",function(l,c){function u(){return B.textMatcher||(B.textMatcher=new e(l.getBody(),l)),B.textMatcher}function d(e,t){var r=[];return n.each(t,function(e){r.push({selectable:!0,text:e.name,data:e.value})}),r}function f(e){for(var t in e)return!1;return!0}function m(e,t){var o=[],a=T[e];n.each(a,function(e){o.push({text:e,onclick:function(){l.insertContent(l.dom.encode(e)),l.dom.remove(t),y()}})}),o.push({text:"-"}),A&&o.push({text:"Add to Dictionary",onclick:function(){b(e,t)}}),o.push.apply(o,[{text:"Ignore",onclick:function(){x(e,t)}},{text:"Ignore all",onclick:function(){x(e,t,!0)}}]),R=new r({items:o,context:"contextmenu",onautohide:function(e){-1!=e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){R.remove(),R=null}}),R.renderTo(document.body);var s=i.DOM.getPos(l.getContentAreaContainer()),c=l.dom.getPos(t[0]),u=l.dom.getRoot();"BODY"==u.nodeName?(c.x-=u.ownerDocument.documentElement.scrollLeft||u.scrollLeft,c.y-=u.ownerDocument.documentElement.scrollTop||u.scrollTop):(c.x-=u.scrollLeft,c.y-=u.scrollTop),s.x+=c.x,s.y+=c.y,R.moveTo(s.x,s.y+t[0].offsetHeight)}function g(){return l.getParam("spellchecker_wordchar_pattern")||new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`]+',"g")}function p(e,t,r,i){var u={method:e,lang:P.spellchecker_language},d="";u["addToDictionary"==e?"word":"text"]=t,n.each(u,function(e,t){d&&(d+="&"),d+=t+"="+encodeURIComponent(e)}),o.send({url:new a(c).toAbsolute(P.spellchecker_rpc_url),type:"post",content_type:"application/x-www-form-urlencoded",data:d,success:function(e){if(e=s.parse(e))e.error?i(e.error):r(e);else{var t=l.translate("Server response wasn't proper JSON.");i(t)}},error:function(){var e=l.translate("The spelling service was not found: (")+P.spellchecker_rpc_url+l.translate(")");i(e)}})}function h(e,t,n,r){var i=P.spellchecker_callback||p;i.call(B,e,t,n,r)}function v(){function e(e){l.notificationManager.open({text:e,type:"error"}),l.setProgressState(!1),w()}w()||(l.setProgressState(!0),h("spellcheck",u().text,S,e),l.focus())}function y(){l.dom.select("span.mce-spellchecker-word").length||w()}function b(e,t){l.setProgressState(!0),h("addToDictionary",e,function(){l.setProgressState(!1),l.dom.remove(t,!0),y()},function(e){l.notificationManager.open({text:e,type:"error"}),l.setProgressState(!1)})}function x(e,t,r){l.selection.collapse(),r?n.each(l.dom.select("span.mce-spellchecker-word"),function(t){t.getAttribute("data-mce-word")==e&&l.dom.remove(t,!0)}):l.dom.remove(t,!0),y()}function w(){return u().reset(),B.textMatcher=null,E?(E=!1,l.fire("SpellcheckEnd"),!0):void 0}function C(e){var t=e.getAttribute("data-mce-index");

return"number"==typeof t?""+t:t}function k(e){var t,r=[];if(t=n.toArray(l.getBody().getElementsByTagName("span")),t.length)for(var i=0;i<t.length;i++){var o=C(t[i]);null!==o&&o.length&&o===e.toString()&&r.push(t[i])}return r}function N(e){var t=P.spellchecker_language;e.control.items().each(function(e){e.active(e.settings.data===t)})}function S(e){var t;if(e.words?(A=!!e.dictionary,t=e.words):t=e,l.setProgressState(!1),f(t)){var n=l.translate("No misspellings found.");return l.notificationManager.open({text:n,type:"info"}),void(E=!1)}T=t,u().find(g()).filter(function(e){return!!t[e.text]}).wrap(function(e){return l.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":e.text})}),E=!0,l.fire("SpellcheckStart")}var _,T,E,R,A,B=this,P=l.settings;if(/(^|[ ,])tinymcespellchecker([, ]|$)/.test(P.plugins)&&t.get("tinymcespellchecker"))return void("undefined"!=typeof console&&console.log&&console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."));var M=P.spellchecker_languages||"English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv";_=d("Language",n.map(M.split(","),function(e){return e=e.split("="),{name:e[0],value:e[1]}})),l.on("click",function(e){var t=e.target;if("mce-spellchecker-word"==t.className){e.preventDefault();var n=k(C(t));if(n.length>0){var r=l.dom.createRng();r.setStartBefore(n[0]),r.setEndAfter(n[n.length-1]),l.selection.setRng(r),m(t.getAttribute("data-mce-word"),n)}}}),l.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:v,selectable:!0,onPostRender:function(){var e=this;e.active(E),l.on("SpellcheckStart SpellcheckEnd",function(){e.active(E)})}});var D={tooltip:"Spellcheck",onclick:v,onPostRender:function(){var e=this;l.on("SpellcheckStart SpellcheckEnd",function(){e.active(E)})}};_.length>1&&(D.type="splitbutton",D.menu=_,D.onshow=N,D.onselect=function(e){P.spellchecker_language=e.control.settings.data}),l.addButton("spellchecker",D),l.addCommand("mceSpellCheck",v),l.on("remove",function(){R&&(R.remove(),R=null)}),l.on("change",y),this.getTextMatcher=u,this.getWordCharPattern=g,this.markErrors=S,this.getLanguage=function(){return P.spellchecker_language},P.spellchecker_language=P.spellchecker_language||P.language||"en"})}),o(["tinymce/spellcheckerplugin/DomTextMatcher"])}(window)}.call(this),function(){tinymce.PluginManager.add("template",function(e){function t(t){return function(){var n=e.settings.templates;return"function"==typeof n?void n(t):void("string"==typeof n?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):t(n))}}function n(t){function n(t){function n(t){if(-1==t.indexOf("<html>")){var n="";tinymce.each(e.contentCSS,function(t){n+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'});var i=e.settings.body_class||"";-1!=i.indexOf("=")&&(i=e.getParam("body_class","","hash"),i=i[e.id]||""),t="<!DOCTYPE html><html><head>"+n+'</head><body class="'+i+'">'+t+"</body></html>"}t=o(t,"template_preview_replace_values");var a=r.find("iframe")[0].getEl().contentWindow.document;a.open(),a.write(t),a.close()}var a=t.control.value();a.url?tinymce.util.XHR.send({url:a.url,success:function(e){i=e,n(i)}}):(i=a.content,n(i)),r.find("#description")[0].text(t.control.value().description)}var r,i,s=[];if(!t||0===t.length){var l=e.translate("No templates defined.");return void e.notificationManager.open({text:l,type:"info"})}tinymce.each(t,function(e){s.push({selected:!s.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})}),r=e.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:s,onselect:n}}]},{type:"label",name:"description",label:"Description",text:""},{type:"iframe",flex:1,border:1}],onsubmit:function(){a(!1,i)},minWidth:Math.min(tinymce.DOM.getViewPort().w,e.getParam("template_popup_width",600)),minHeight:Math.min(tinymce.DOM.getViewPort().h,e.getParam("template_popup_height",500))}),r.find("listbox")[0].fire("select")}function r(t,n){function r(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}var i="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),s="January February March April May June July August September October November December".split(" ");return n=n||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+n.getFullYear()),t=t.replace("%y",""+n.getYear()),t=t.replace("%m",r(n.getMonth()+1,2)),t=t.replace("%d",r(n.getDate(),2)),t=t.replace("%H",""+r(n.getHours(),2)),t=t.replace("%M",""+r(n.getMinutes(),2)),t=t.replace("%S",""+r(n.getSeconds(),2)),t=t.replace("%I",""+((n.getHours()+11)%12+1)),t=t.replace("%p",""+(n.getHours()<12?"AM":"PM")),t=t.replace("%B",""+e.translate(s[n.getMonth()])),t=t.replace("%b",""+e.translate(a[n.getMonth()])),t=t.replace("%A",""+e.translate(o[n.getDay()])),t=t.replace("%a",""+e.translate(i[n.getDay()])),t=t.replace("%%","%")}function i(t){var n=e.dom,r=e.getParam("template_replace_values");s(n.select("*",t),function(e){s(r,function(t,i){n.hasClass(e,i)&&"function"==typeof r[i]&&r[i](e)})})}function o(t,n){return s(e.getParam(n),function(e,n){"function"==typeof e&&(e=e(n)),t=t.replace(new RegExp("\\{\\$"+n+"\\}","g"),e)}),t}function a(t,n){function a(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)}var l,c,u=e.dom,d=e.selection.getContent();n=o(n,"template_replace_values"),l=u.create("div",null,n),c=u.select(".mceTmpl",l),c&&c.length>0&&(l=u.create("div",null),l.appendChild(c[0].cloneNode(!0))),s(u.select("*",l),function(t){a(t,e.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(t.innerHTML=r(e.getParam("template_cdate_format",e.getLang("template.cdate_format")))),a(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=r(e.getParam("template_mdate_format",e.getLang("template.mdate_format")))),a(t,e.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(t.innerHTML=d)}),i(l),e.execCommand("mceInsertContent",!1,l.innerHTML),e.addVisual()}var s=tinymce.each;e.addCommand("mceInsertTemplate",a),e.addButton("template",{title:"Insert template",onclick:t(n)}),e.addMenuItem("template",{text:"Template",onclick:t(n),context:"insert"}),e.on("PreProcess",function(t){var n=e.dom;s(n.select("div",t.node),function(t){n.hasClass(t,"mceTmpl")&&(s(n.select("*",t),function(t){n.hasClass(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=r(e.getParam("template_mdate_format",e.getLang("template.mdate_format"))))}),i(t))})})})}.call(this),function(){tinymce.PluginManager.add("toc",function(e){function t(t){return e.schema.isValidChild("div",t)}function n(t){return t&&e.dom.is(t,"."+d.className)&&e.getBody().contains(t)}function r(){var t=this;t.disabled(e.readonly||!o()),e.on("LoadContent SetContent change",function(){t.disabled(e.readonly||!o())})}function i(e){var t,n=[];for(t=1;e>=t;t++)n.push("h"+t);return n.join(",")}function o(){return!(!d||!a(d).length)}function a(t){var n=i(t.depth),r=f(n);return r.length&&/^h[1-9]$/i.test(t.headerTag)&&(r=r.filter(function(n,r){return!e.dom.hasClass(r.parentNode,t.className)})),tinymce.map(r,function(e){return e.id||(e.id=p()),{id:e.id,level:parseInt(e.nodeName.replace(/^H/i,""),10),title:f.text(e)}})}function s(e){var t,n=9;for(t=0;t<e.length;t++)if(e[t].level<n&&(n=e[t].level),1==n)return n;return n}function l(t,n){var r="<"+t+' contenteditable="true">',i="</"+t+">";return r+e.dom.encode(n)+i}function c(e){var t=u(e);return'<div class="'+e.className+'" contenteditable="false">'+t+"</div>"}function u(e){var t,n,r,i,o="",c=a(e),u=s(c)-1;if(!c.length)return"";for(o+=l(e.headerTag,tinymce.translate("Table of Contents")),t=0;t<c.length;t++){if(r=c[t],i=c[t+1]&&c[t+1].level,u===r.level)o+="<li>";else for(n=u;n<r.level;n++)o+="<ul><li>";if(o+='<a href="#'+r.id+'">'+r.title+"</a>",i!==r.level&&i)for(n=r.level;n>i;n--)o+="</li></ul><li>";else o+="</li>",i||(o+="</ul>");u=r.level}return o}var d,f=e.$,m={depth:3,headerTag:"h2",className:"mce-toc"},g=function(e){var t=0;return function(){var n=(new Date).getTime().toString(32);return e+n+(t++).toString(32)}},p=g("mcetoc_");e.on("PreInit",function(){var n=e.settings,r=parseInt(n.toc_depth,10)||0;d={depth:r>=1&&9>=r?r:m.depth,headerTag:t(n.toc_header)?n.toc_header:m.headerTag,className:n.toc_class?e.dom.encode(n.toc_class):m.className}}),e.on("PreProcess",function(e){var t=f("."+d.className,e.node);t.length&&(t.removeAttr("contentEditable"),t.find("[contenteditable]").removeAttr("contentEditable"))}),e.on("SetContent",function(){var e=f("."+d.className);e.length&&(e.attr("contentEditable",!1),e.children(":first-child").attr("contentEditable",!0))});var h=function(t){return!t.length||e.dom.getParents(t[0],".mce-offscreen-selection").length>0};e.addCommand("mceInsertToc",function(){var t=f("."+d.className);h(t)?e.insertContent(c(d)):e.execCommand("mceUpdateToc")}),e.addCommand("mceUpdateToc",function(){var t=f("."+d.className);t.length&&e.undoManager.transact(function(){t.html(u(d))})}),e.addButton("toc",{tooltip:"Table of Contents",cmd:"mceInsertToc",icon:"toc",onPostRender:r}),e.addButton("tocupdate",{tooltip:"Update",cmd:"mceUpdateToc",icon:"reload"}),e.addContextToolbar(n,"tocupdate"),e.addMenuItem("toc",{text:"Table of Contents",context:"insert",cmd:"mceInsertToc",onPostRender:r})})}.call(this),function(){!function(){var e={},t=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),l=0;a>l;++l)s[l]=r(i[l]);var c=o.apply(null,s);if(void 0===c)throw"module ["+t+"] returned undefined";n.instance=c},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},i=function(e,t){for(var n=e.length,i=new Array(n),o=0;n>o;++o)i.push(r(e[o]));t.apply(null,t)},o={};o.bolt={module:{api:{define:n,require:i,demand:r}}};var a=n,s=function(e,t){a(e,[],function(){return t})};s("1",tinymce.PluginManager),s("2",tinymce.util.Delay),a("4",[],function(){var e={aletter:"[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]",midnumlet:"['\\.]",midletter:"[:]",midnum:"[,;;]",numeric:"[0-9---------------------------------]",cr:"\\r",lf:"\\n",newline:"[\f\u2028\u2029]",extend:"[------------------------------------------------------------------------------------------------------]",format:"[----\ufeff-]",katakana:"[-------]",extendnumlet:"[_-]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]"},t={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},n=[new RegExp(e.aletter),new RegExp(e.midnumlet),new RegExp(e.midletter),new RegExp(e.midnum),new RegExp(e.numeric),new RegExp(e.cr),new RegExp(e.lf),new RegExp(e.newline),new RegExp(e.extend),new RegExp(e.format),new RegExp(e.katakana),new RegExp(e.extendnumlet),new RegExp("@")],r="",i=new RegExp("^"+e.punctuation+"$"),o=/\s/;return{characterIndices:t,SETS:n,EMPTY_STRING:r,PUNCTUATION:i,WHITESPACE:o}}),a("7",[],function(){var e=function(e,t,n){var r,i;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,i=e.length;i>r;r++)if(t.call(n,e[r],r,e)===!1)return 0}else for(r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e)===!1)return 0;return 1},t=function(t,n){var r=[];return e(t,function(e,i){r.push(n(e,i,t))}),r};return{each:e,map:t}}),a("5",["4","7"],function(e,t){var n=e.SETS,r=e.characterIndices.OTHER,i=function(e){var t,i,o=r,a=n.length;for(t=0;a>t;++t)if(i=n[t],i&&i.test(e)){o=t;break}return o},o=function(e){var t={};return function(n){if(t[n])return t[n];var r=e(n);return t[n]=r,r}},a=function(e){var n=o(i);return t.map(e.split(""),n)};return{classify:a}}),a("6",["4"],function(e){var t=e.characterIndices,n=function(e,n){var r,i,o=e[n],a=e[n+1];return!(0>n||n>e.length-1&&0!==n||o===t.ALETTER&&a===t.ALETTER||(i=e[n+2],o===t.ALETTER&&(a===t.MIDLETTER||a===t.MIDNUMLET||a===t.AT)&&i===t.ALETTER||(r=e[n-1],(o===t.MIDLETTER||o===t.MIDNUMLET||a===t.AT)&&a===t.ALETTER&&r===t.ALETTER||!(o!==t.NUMERIC&&o!==t.ALETTER||a!==t.NUMERIC&&a!==t.ALETTER)||(o===t.MIDNUM||o===t.MIDNUMLET)&&a===t.NUMERIC&&r===t.NUMERIC||o===t.NUMERIC&&(a===t.MIDNUM||a===t.MIDNUMLET)&&i===t.NUMERIC||o===t.EXTEND||o===t.FORMAT||r===t.EXTEND||r===t.FORMAT||a===t.EXTEND||a===t.FORMAT||o===t.CR&&a===t.LF||o!==t.NEWLINE&&o!==t.CR&&o!==t.LF&&a!==t.NEWLINE&&a!==t.CR&&a!==t.LF&&(o===t.KATAKANA&&a===t.KATAKANA||a===t.EXTENDNUMLET&&(o===t.ALETTER||o===t.NUMERIC||o===t.KATAKANA||o===t.EXTENDNUMLET)||o===t.EXTENDNUMLET&&(a===t.ALETTER||a===t.NUMERIC||a===t.KATAKANA)||o===t.AT))))};return{isWordBoundary:n}}),a("3",["4","5","6"],function(e,t,n){var r=e.EMPTY_STRING,i=e.WHITESPACE,o=e.PUNCTUATION,a=function(e){return"http"===e||"https"===e},s=function(e,t){var n;for(n=t;n<e.length;++n){var r=e.charAt(n);if(i.test(r))break}return n},l=function(e,t,n){var r=s(t,n+1),i=t.substring(n+1,r);return"://"===i.substr(0,3)?{word:e+i,index:r}:{word:e,index:n}},c=function(e,s){var c,u,d,f=0,m=t.classify(e),g=m.length,p=[],h=[];for(s||(s={}),s.ignoreCase&&(e=e.toLowerCase()),u=s.includePunctuation,d=s.includeWhitespace;g>f;++f)if(c=e.charAt(f),p.push(c),n.isWordBoundary(m,f)){if(p=p.join(r),p&&(d||!i.test(p))&&(u||!o.test(p)))if(a(p)){var v=l(p,e,f);h.push(v.word),f=v.index}else h.push(p);p=[]}return h};return{getWords:c}}),a("0",["1","2","3"],function(e,t,n){return e.add("wordcount",function(e){var r=function(e){return e.removed?"":e.getBody().innerText},i=function(){return n.getWords(r(e)).length},o=function(){e.theme.panel.find("#wordcount").text(["Words: {0}",i()])};return e.on("init",function(){var n=e.theme.panel&&e.theme.panel.find("#statusbar")[0],r=t.debounce(o,300);n&&t.setEditorTimeout(e,function(){n.insert({type:"label",name:"wordcount",text:["Words: {0}",i()],classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo undo redo keyup",r)},0)}),{getCount:i}}),function(){}}),r("0")()}()}.call(this),function(){tinymce.PluginManager.add("autolink",function(e){function t(e){i(e,-1,"(",!0)}function n(e){i(e,0,"",!0)}function r(e){i(e,-1,"",!1)}function i(e,t,n){function r(e,t){if(0>t&&(t=0),3==e.nodeType){var n=e.data.length;t>n&&(t=n)}return t}function i(e,t){1!=e.nodeType||e.hasChildNodes()?s.setStart(e,r(e,t)):s.setStartBefore(e)}function o(e,t){1!=e.nodeType||e.hasChildNodes()?s.setEnd(e,r(e,t)):s.setEndAfter(e)}var s,l,c,u,d,f,m,g,p,h;if("A"!=e.selection.getNode().tagName){if(s=e.selection.getRng(!0).cloneRange(),s.startOffset<5){if(g=s.endContainer.previousSibling,!g){if(!s.endContainer.firstChild||!s.endContainer.firstChild.nextSibling)return;g=s.endContainer.firstChild.nextSibling}if(p=g.length,i(g,p),o(g,p),s.endOffset<5)return;l=s.endOffset,u=g}else{if(u=s.endContainer,3!=u.nodeType&&u.firstChild){for(;3!=u.nodeType&&u.firstChild;)u=u.firstChild;3==u.nodeType&&(i(u,0),o(u,u.nodeValue.length))}l=1==s.endOffset?2:s.endOffset-1-t}c=l;do i(u,l>=2?l-2:0),o(u,l>=1?l-1:0),l-=1,h=s.toString();while(" "!=h&&""!==h&&160!=h.charCodeAt(0)&&l-2>=0&&h!=n);s.toString()==n||160==s.toString().charCodeAt(0)?(i(u,l),o(u,c),l+=1):0===s.startOffset?(i(u,0),o(u,c)):(i(u,l),o(u,c)),f=s.toString(),"."==f.charAt(f.length-1)&&o(u,c-1),f=s.toString(),m=f.match(a),m&&("www."==m[1]?m[1]="http://www.":/@$/.test(m[1])&&!/^mailto:/.test(m[1])&&(m[1]="mailto:"+m[1]),d=e.selection.getBookmark(),e.selection.setRng(s),e.execCommand("createlink",!1,m[1]+m[2]),e.settings.default_link_target&&e.dom.setAttrib(e.selection.getNode(),"target",e.settings.default_link_target),e.selection.moveToBookmark(d),e.nodeChanged())}}var o,a=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i;return e.settings.autolink_pattern&&(a=e.settings.autolink_pattern),e.on("keydown",function(t){return 13==t.keyCode?r(e):void 0}),tinymce.Env.ie?void e.on("focus",function(){if(!o){o=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(e.on("keypress",function(n){return 41==n.keyCode?t(e):void 0}),void e.on("keyup",function(t){return 32==t.keyCode?n(e):void 0}))})}.call(this),function(){!function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(e){var t=this,n=e.getParam("bbcode_dialect","punbb").toLowerCase();e.on("beforeSetContent",function(e){e.content=t["_"+n+"_bbcode2html"](e.content)}),e.on("postProcess",function(e){e.set&&(e.content=t["_"+n+"_bbcode2html"](e.content)),e.get&&(e.content=t["_"+n+"_html2bbcode"](e.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Ephox Corp",authorurl:"http://www.tinymce.com",infourl:"http://www.tinymce.com/wiki.php/Plugin:bbcode"}},_punbb_html2bbcode:function(e){function t(t,n){e=e.replace(t,n)}return e=tinymce.trim(e),t(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),t(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),t(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),t(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),t(/<font>(.*?)<\/font>/gi,"$1"),t(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),t(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),t(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),t(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),t(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),t(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),t(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),t(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),t(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),t(/<\/(strong|b)>/gi,"[/b]"),t(/<(strong|b)>/gi,"[b]"),t(/<\/(em|i)>/gi,"[/i]"),t(/<(em|i)>/gi,"[i]"),t(/<\/u>/gi,"[/u]"),t(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),t(/<u>/gi,"[u]"),t(/<blockquote[^>]*>/gi,"[quote]"),t(/<\/blockquote>/gi,"[/quote]"),t(/<br \/>/gi,"\n"),t(/<br\/>/gi,"\n"),t(/<br>/gi,"\n"),t(/<p>/gi,""),t(/<\/p>/gi,"\n"),t(/&nbsp;|\u00a0/gi," "),t(/&quot;/gi,'"'),t(/&lt;/gi,"<"),t(/&gt;/gi,">"),t(/&amp;/gi,"&"),e},_punbb_bbcode2html:function(e){function t(t,n){e=e.replace(t,n)}return e=tinymce.trim(e),t(/\n/gi,"<br />"),t(/\[b\]/gi,"<strong>"),t(/\[\/b\]/gi,"</strong>"),t(/\[i\]/gi,"<em>"),t(/\[\/i\]/gi,"</em>"),t(/\[u\]/gi,"<u>"),t(/\[\/u\]/gi,"</u>"),t(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),t(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),t(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),t(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),t(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),t(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),e}}),tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin)}()}.call(this),function(){!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){var r,i,o,s,l;for(r=0;r<n.length;r++){i=e,o=n[r],s=o.split(/[.\/]/);for(var c=0;c<s.length-1;++c)i[s[c]]===t&&(i[s[c]]={}),i=i[s[c]];i[s[s.length-1]]=a[o]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(o in a)l[o]=a[o];for(r=0;r<n.length;r++)delete l[n[r]];e.privateModules=l}}var a={};r("tinymce/codesampleplugin/Prism",[],function(){var e={},t="undefined"!=typeof e?e:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},n=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,n=t.Prism={util:{encode:function(e){return e instanceof r?new r(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var t=n.util.type(e);switch(t){case"Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=n.util.clone(e[i]));return r;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var i in t)r[i]=t[i];return r},insertBefore:function(e,t,r,i){i=i||n.languages;var o=i[e];if(2==arguments.length){r=arguments[1];for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);return o}var s={};for(var l in o)if(o.hasOwnProperty(l)){if(l==t)for(var a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);s[l]=o[l]}return n.languages.DFS(n.languages,function(t,n){n===i[e]&&t!=e&&(this[t]=s)}),i[e]=s},DFS:function(e,t,r){for(var i in e)e.hasOwnProperty(i)&&(t.call(e,i,e[i],r||i),"Object"===n.util.type(e[i])?n.languages.DFS(e[i],t):"Array"===n.util.type(e[i])&&n.languages.DFS(e[i],t,i))}},plugins:{},highlightAll:function(e,t){for(var r,i=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),o=0;r=i[o++];)n.highlightElement(r,e===!0,t)},highlightElement:function(r,i,o){for(var a,s,l=r;l&&!e.test(l.className);)l=l.parentNode;l&&(a=(l.className.match(e)||[,""])[1],s=n.languages[a]),r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+a,l=r.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+a);var c=r.textContent,u={element:r,language:a,grammar:s,code:c};if(!c||!s)return void n.hooks.run("complete",u);if(n.hooks.run("before-highlight",u),i&&t.Worker){var d=new Worker(n.filename);d.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,o&&o.call(u.element),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},d.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,o&&o.call(r),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},highlight:function(e,t,i){var o=n.tokenize(e,t);return r.stringify(n.util.encode(o),i)},tokenize:function(e,t,r){var i=n.Token,o=[e],a=t.rest;if(a){for(var s in a)t[s]=a[s];delete t.rest}e:for(var s in t)if(t.hasOwnProperty(s)&&t[s]){var l=t[s];l="Array"===n.util.type(l)?l:[l];for(var c=0;c<l.length;++c){var u=l[c],d=u.inside,f=!!u.lookbehind,m=0,g=u.alias;u=u.pattern||u;for(var p=0;p<o.length;p++){var h=o[p];if(o.length>e.length)break e;if(!(h instanceof i)){u.lastIndex=0;var v=u.exec(h);if(v){f&&(m=v[1].length);var y=v.index-1+m,v=v[0].slice(m),b=v.length,x=y+b,w=h.slice(0,y+1),C=h.slice(x+1),k=[p,1];w&&k.push(w);var N=new i(s,d?n.tokenize(v,d):v,g);k.push(N),C&&k.push(C),Array.prototype.splice.apply(o,k)}}}}}return o},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var i,o=0;i=r[o++];)i(t)}}},r=n.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};return r.stringify=function(e,t,i){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return r.stringify(n,t,e)}).join("");var o={type:e.type,content:r.stringify(e.content,t,i),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:i};if("comment"==o.type&&(o.attributes.spellcheck="true"),e.alias){var a="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(o.classes,a)}n.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=(s?" ":"")+l+'="'+(o.attributes[l]||"")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'" '+s+">"+o.content+"</"+o.tag+">"},t.document?void 0:t.addEventListener?(t.addEventListener("message",function(e){var r=JSON.parse(e.data),i=r.language,o=r.code,a=r.immediateClose;t.postMessage(n.highlight(o,n.languages[i],i)),a&&t.close()},!1),t.Prism):t.Prism}();return"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof global&&(global.Prism=n),n.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},n.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),n.languages.xml=n.languages.markup,n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},n.languages.css.atrule.inside.rest=n.util.clone(n.languages.css),n.languages.markup&&(n.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:n.languages.markup.tag.inside},rest:n.languages.css},alias:"language-css"}}),n.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:n.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:n.languages.css}},alias:"language-css"}},n.languages.markup.tag)),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),n.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),n.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}}}),n.languages.markup&&n.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:n.languages.markup.tag.inside},rest:n.languages.javascript},alias:"language-javascript"}}),n.languages.js=n.languages.javascript,n.languages.c=n.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),n.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0}}}}),delete n.languages.c["class-name"],delete n.languages.c["boolean"],n.languages.csharp=n.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),n.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0}}),n.languages.cpp=n.languages.extend("c",{
keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,"boolean":/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),n.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}}),n.languages.java=n.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),n.languages.php=n.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}}),n.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),n.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,"package":{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),n.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),n.languages.markup&&(n.hooks.add("before-highlight",function(e){"php"===e.language&&(e.tokenStack=[],e.backupCode=e.code,e.code=e.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(t){return e.tokenStack.push(t),"{{{PHP"+e.tokenStack.length+"}}}"}))}),n.hooks.add("before-insert",function(e){"php"===e.language&&(e.code=e.backupCode,delete e.backupCode)}),n.hooks.add("after-highlight",function(e){if("php"===e.language){for(var t,r=0;t=e.tokenStack[r];r++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(r+1)+"}}}",n.highlight(t,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}}),n.hooks.add("wrap",function(e){"php"===e.language&&"markup"===e.type&&(e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),n.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:n.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),n.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,"function":{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,"boolean":/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(n),n}),r("tinymce/codesampleplugin/Utils",[],function(){function e(e){return e&&"PRE"==e.nodeName&&-1!==e.className.indexOf("language-")}function t(e){return function(t,n){return e(n)}}return{isCodeSample:e,trimArg:t}}),r("tinymce/codesampleplugin/Dialog",["tinymce/dom/DOMUtils","tinymce/codesampleplugin/Utils","tinymce/codesampleplugin/Prism"],function(e,t,n){function r(e){var t=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],n=e.settings.codesample_languages;return n?n:t}function i(e,t,r){e.undoManager.transact(function(){var i=o(e);r=l.encode(r),i?(e.dom.setAttrib(i,"class","language-"+t),i.innerHTML=r,n.highlightElement(i),e.selection.select(i)):(e.insertContent('<pre id="__new" class="language-'+t+'">'+r+"</pre>"),e.selection.select(e.$("#__new").removeAttr("id")[0]))})}function o(e){var n=e.selection.getNode();return t.isCodeSample(n)?n:null}function a(e){var t=o(e);return t?t.textContent:""}function s(e){var t,n=o(e);return n?(t=n.className.match(/language-(\w+)/),t?t[1]:""):""}var l=e.DOM;return{open:function(e){e.windowManager.open({title:"Insert/Edit code sample",minWidth:Math.min(l.getViewPort().w,e.getParam("codesample_dialog_width",800)),minHeight:Math.min(l.getViewPort().h,e.getParam("codesample_dialog_height",650)),layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:s(e),values:r(e)},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:a(e),autofocus:!0}],onSubmit:function(t){i(e,t.data.language,t.data.code)}})}}}),r("tinymce/codesampleplugin/Plugin",["tinymce/Env","tinymce/PluginManager","tinymce/codesampleplugin/Prism","tinymce/codesampleplugin/Dialog","tinymce/codesampleplugin/Utils"],function(e,t,n,r,i){var o,a=i.trimArg;t.add("codesample",function(t,s){function l(){var e,n=t.settings.codesample_content_css;t.inline&&o||!t.inline&&c||(t.inline?o=!0:c=!0,n!==!1&&(e=t.dom.create("link",{rel:"stylesheet",href:n?n:s+"/css/prism.css"}),t.getDoc().getElementsByTagName("head")[0].appendChild(e)))}var c,u=t.$;e.ceFalse&&(t.on("PreProcess",function(e){u("pre[contenteditable=false]",e.node).filter(a(i.isCodeSample)).each(function(e,t){var n=u(t),r=t.textContent;n.attr("class",u.trim(n.attr("class"))),n.removeAttr("contentEditable"),n.empty().append(u("<code></code>").each(function(){this.textContent=r}))})}),t.on("SetContent",function(){var e=u("pre").filter(a(i.isCodeSample)).filter(function(e,t){return"false"!==t.contentEditable});e.length&&t.undoManager.transact(function(){e.each(function(e,r){u(r).find("br").each(function(e,n){n.parentNode.replaceChild(t.getDoc().createTextNode("\n"),n)}),r.contentEditable=!1,r.innerHTML=t.dom.encode(r.textContent),n.highlightElement(r),r.className=u.trim(r.className)})})}),t.addCommand("codesample",function(){var e=t.selection.getNode();t.selection.isCollapsed()||i.isCodeSample(e)?r.open(t):t.formatter.toggle("code")}),t.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),t.on("init",l))})}),o(["tinymce/codesampleplugin/Prism","tinymce/codesampleplugin/Utils","tinymce/codesampleplugin/Dialog","tinymce/codesampleplugin/Plugin"])}(window)}.call(this),function(){tinymce.PluginManager.add("directionality",function(e){function t(t){var n,r=e.dom,i=e.selection.getSelectedBlocks();i.length&&(n=r.getAttrib(i[0],"dir"),tinymce.each(i,function(e){r.getParent(e.parentNode,"*[dir='"+t+"']",r.getRoot())||(n!=t?r.setAttrib(e,"dir",t):r.setAttrib(e,"dir",null))}),e.nodeChanged())}function n(e){var t=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(n){t.push(n+"[dir="+e+"]")}),t.join(",")}e.addCommand("mceDirectionLTR",function(){t("ltr")}),e.addCommand("mceDirectionRTL",function(){t("rtl")}),e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:n("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:n("rtl")})})}.call(this),function(){tinymce.PluginManager.add("hr",function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")}),e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})})}.call(this),function(){tinymce.PluginManager.add("importcss",function(e){function t(e){var t=tinymce.Env.cacheSuffix;return"string"==typeof e&&(e=e.replace("?"+t,"").replace("&"+t,"")),e}function n(t){var n=e.settings,r=n.skin!==!1&&(n.skin||"lightgray");if(r){var i=n.skin_url;return i=i?e.documentBaseURI.toAbsolute(i):tinymce.baseURL+"/skins/"+r,t===i+"/content"+(e.inline?".inline":"")+".min.css"}return!1}function r(e){return"string"==typeof e?function(t){return-1!==t.indexOf(e)}:e instanceof RegExp?function(t){return e.test(t)}:e}function i(r,i){function o(e,r){var s,l=e.href;if(l=t(l),l&&i(l,r)&&!n(l)){m(e.imports,function(e){o(e,!0)});try{s=e.cssRules||e.rules}catch(e){}m(s,function(e){e.styleSheet?o(e.styleSheet,!0):e.selectorText&&m(e.selectorText.split(","),function(e){a.push(tinymce.trim(e))})})}}var a=[],s={};m(e.contentCSS,function(e){s[e]=!0}),i||(i=function(e,t){return t||s[e]});try{m(r.styleSheets,function(e){o(e)})}finally{}return a}function o(t){var n,r=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(r){var i=r[1],o=r[2].substr(1).split(".").join(" "),a=tinymce.makeMap("a,img");return r[1]?(n={title:t},e.schema.getTextBlockElements()[i]?n.block=i:e.schema.getBlockElements()[i]||a[i.toLowerCase()]?n.selector=i:n.inline=i):r[2]&&(n={inline:"span",title:t.substr(1),classes:o}),e.settings.importcss_merge_classes!==!1?n.classes=o:n.attributes={"class":o},n}}function a(e,t){return tinymce.util.Tools.grep(e,function(e){return!e.filter||e.filter(t)})}function s(e){return tinymce.util.Tools.map(e,function(e){return tinymce.util.Tools.extend({},e,{original:e,selectors:{},filter:r(e.filter),item:{text:e.title,menu:[]}})})}function l(e,t){return null===t||e.settings.importcss_exclusive!==!1}function c(t,n,r){return!(l(e,n)?t in r:t in n.selectors)}function u(t,n,r){l(e,n)?r[t]=!0:n.selectors[t]=!0}function d(t,n,r){var i,a=e.settings;return i=r&&r.selector_converter?r.selector_converter:a.importcss_selector_converter?a.importcss_selector_converter:o,i.call(t,n,r)}var f=this,m=tinymce.each;e.on("renderFormatsMenu",function(t){var n=e.settings,o={},l=r(n.importcss_selector_filter),g=t.control,p=s(n.importcss_groups),h=function(t,n){if(c(t,n,o)){u(t,n,o);var r=d(f,t,n);if(r){var i=r.name||tinymce.DOM.uniqueId();return e.formatter.register(i,r),tinymce.extend({},g.settings.itemDefaults,{text:r.title,format:i})}}return null};e.settings.importcss_append||g.items().remove(),m(i(t.doc||e.getDoc(),r(n.importcss_file_filter)),function(e){if(-1===e.indexOf(".mce-")&&(!l||l(e))){var t=a(p,e);if(t.length>0)tinymce.util.Tools.each(t,function(t){var n=h(e,t);n&&t.item.menu.push(n)});else{var n=h(e,null);n&&g.add(n)}}}),m(p,function(e){e.item.menu.length>0&&g.add(e.item)}),t.control.renderNew()}),f.convertSelectorToFormat=o})}.call(this),function(){tinymce.PluginManager.add("link",function(e){function t(e){return e&&"A"===e.nodeName&&e.href}function n(e){return tinymce.util.Tools.grep(e,t).length>0}function r(t){return e.dom.getParent(t,"a[href]")}function i(){return r(e.selection.getStart())}function o(e){var t=e.getAttribute("data-mce-href");return t?t:e.getAttribute("href")}function a(){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()}function s(n){var r,i,o;return!!(e.settings.link_context_toolbar&&!a()&&t(n)&&(r=e.selection,i=r.getRng(),o=i.startContainer,3==o.nodeType&&r.isCollapsed()&&i.startOffset>0&&i.startOffset<o.data.length))}function l(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)}function c(e){if(!tinymce.Env.ie||tinymce.Env.ie>10){var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),l(t,n)}else{var r=window.open("","_blank");if(r){r.opener=null;var i=r.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+tinymce.DOM.encode(e)+'">'),i.close()}}}function u(t){if(t){var n=o(t);if(/^#/.test(n)){var r=e.$(n);r.length&&e.selection.scrollIntoView(r[0],!0)}else c(t.href)}}function d(){u(i())}function f(){var t=this,r=function(e){n(e.parents)?t.show():t.hide()};n(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",r),t.on("remove",function(){e.off("nodechange",r)})}function m(t){return function(){var n=e.settings.link_list;"string"==typeof n?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):"function"==typeof n?n(t):t(n)}}function g(e,t,n){function r(e,n){return n=n||[],tinymce.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t&&t(i)),n.push(i)}),n}return r(e,n||[])}function p(t){function n(e){var t=d.find("#text");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),d.find("#href").value(e.control.value())}function r(t){var r=[];return tinymce.each(e.dom.select("a:not([href])"),function(e){var n=e.name||e.id;n&&r.push({text:n,value:"#"+n,selected:-1!=t.indexOf("#"+n)})}),r.length?(r.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:r,onselect:n}):void 0}function i(){!u&&0===C.text.length&&f&&this.parent().parent().find("#text")[0].value(this.value())}function o(t){var n=t.meta||{};p&&p.value(e.convertURL(this.value(),"href")),tinymce.each(t.meta,function(e,t){var n=d.find("#"+t);"text"===t?0===u.length&&(n.value(e),C.text=e):n.value(e)}),n.attach&&(h={href:this.value(),attach:n.attach}),n.text||i.call(this)}function a(e){var t=k.getContent();if(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1==t.indexOf("href=")))return!1;if(e){var n,r=e.childNodes;if(0===r.length)return!1;for(n=r.length-1;n>=0;n--)if(3!=r[n].nodeType)return!1}return!0}function s(e){e.meta=d.toJSON()}var l,c,u,d,f,m,p,v,y,b,x,w,C={},k=e.selection,N=e.dom;l=k.getNode(),c=N.getParent(l,"a[href]"),f=a(),C.text=u=c?c.innerText||c.textContent:k.getContent({format:"text"}),C.href=c?N.getAttrib(c,"href"):"",c?C.target=N.getAttrib(c,"target"):e.settings.default_link_target&&(C.target=e.settings.default_link_target),(w=N.getAttrib(c,"rel"))&&(C.rel=w),(w=N.getAttrib(c,"class"))&&(C["class"]=w),(w=N.getAttrib(c,"title"))&&(C.title=w),f&&(m={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){C.text=this.value()}}),t&&(p={type:"listbox",label:"Link list",values:g(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:n,value:e.convertURL(C.href,"href"),onPostRender:function(){p=this}}),e.settings.target_list!==!1&&(e.settings.target_list||(e.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),y={name:"target",type:"listbox",label:"Target",values:g(e.settings.target_list)}),e.settings.rel_list&&(v={name:"rel",type:"listbox",label:"Rel",values:g(e.settings.rel_list)}),e.settings.link_class_list&&(b={name:"class",type:"listbox",label:"Class",values:g(e.settings.link_class_list,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),e.settings.link_title!==!1&&(x={name:"title",type:"textbox",label:"Title",value:C.title}),d=e.windowManager.open({title:"Insert link",data:C,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:o,onkeyup:i,onbeforecall:s},m,x,r(C.href),p,v,y,b],onSubmit:function(t){function n(t,n){var r=e.selection.getRng();tinymce.util.Delay.setEditorTimeout(e,function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r),n(t)})})}function r(e,t){function n(e){return e=r(e),e?[e,i].join(" "):i}function r(e){var t=new RegExp("("+i.replace(" ","|")+")","g");return e&&(e=tinymce.trim(e.replace(t,""))),e?e:null}var i="noopener noreferrer";return t?n(e):r(e)}function i(){var t={href:a,target:C.target?C.target:null,rel:C.rel?C.rel:null,"class":C["class"]?C["class"]:null,title:C.title?C.title:null};e.settings.allow_unsafe_link_target||(t.rel=r(t.rel,"_blank"==t.target)),a===h.href&&(h.attach(),h={}),c?(e.focus(),f&&C.text!=u&&("innerText"in c?c.innerText=C.text:c.textContent=C.text),N.setAttribs(c,t),k.select(c),e.undoManager.add()):f?e.insertContent(N.createHTML("a",t,N.encode(C.text))):e.execCommand("mceInsertLink",!1,t)}function o(){e.undoManager.transact(i)}var a;return C=tinymce.extend(C,t.data),(a=C.href)?a.indexOf("@")>0&&-1==a.indexOf("//")&&-1==a.indexOf("mailto:")?void n("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(a="mailto:"+a),o()}):e.settings.link_assume_external_targets&&!/^\w+:/i.test(a)||!e.settings.link_assume_external_targets&&/^\s*www[\.|\d\.]/i.test(a)?void n("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(a="http://"+a),o()}):void o():void e.execCommand("unlink")}})}var h={},v=function(e){return e.altKey===!0&&e.shiftKey===!1&&e.ctrlKey===!1&&e.metaKey===!1};e.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:m(p),stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),e.addContextToolbar&&(e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:d}),e.addContextToolbar(s,"openlink | link unlink")),e.addShortcut("Meta+K","",m(p)),e.addCommand("mceLink",m(p)),e.on("click",function(e){var t=r(e.target);t&&tinymce.util.VK.metaKeyPressed(e)&&(e.preventDefault(),u(t))}),e.on("keydown",function(e){var t=i();t&&13===e.keyCode&&v(e)&&(e.preventDefault(),u(t))}),this.showDialog=p,e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:d,onPostRender:f,prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:m(p),stateSelector:"a[href]",context:"insert",prependToContext:!0})})}.call(this),function(){tinymce.PluginManager.add("nonbreaking",function(e){var t=e.getParam("nonbreaking_force_tab");if(e.addCommand("mceNonBreaking",function(){e.insertContent(e.plugins.visualchars&&e.plugins.visualchars.state?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;"),e.dom.setAttrib(e.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}),e.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"}),t){var n=+t>1?+t:3;e.on("keydown",function(t){if(9==t.keyCode){if(t.shiftKey)return;t.preventDefault();for(var r=0;n>r;r++)e.execCommand("mceNonBreaking")}})}})}.call(this),function(){!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){var r,i,o,s,l;for(r=0;r<n.length;r++){i=e,o=n[r],s=o.split(/[.\/]/);for(var c=0;c<s.length-1;++c)i[s[c]]===t&&(i[s[c]]={}),i=i[s[c]];i[s[s.length-1]]=a[o]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(o in a)l[o]=a[o];for(r=0;r<n.length;r++)delete l[n[r]];e.privateModules=l}}var a={};r("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(e,t,n){function r(t,n){return e.each(n,function(e){t=e.constructor==RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}function i(i){function o(e){var t=e.name,n=e;if("br"===t)return void(l+="\n");if(c[t]&&(l+=" "),u[t])return void(l+=" ");if(3==e.type&&(l+=e.value),!e.shortEnded&&(e=e.firstChild))do o(e);while(e=e.next);d[t]&&n.next&&(l+="\n","p"==t&&(l+="\n"))}var a=new n,s=new t({},a),l="",c=a.getShortEndedElements(),u=e.makeMap("script noscript style textarea video audio iframe object"," "),d=a.getBlockElements();return i=r(i,[/<!\[[^\]]+\]>/g]),o(s.parse(i)),l}function o(e){function t(e,t,n){return t||n?"":" "}return e=r(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function a(e){var t=0;return function(){return e+t++}}return{filter:r,innerText:i,trimHtml:o,createIdGenerator:a}}),r("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],function(e){var t=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},n=function(e){return t(e)&&/.(gif|jpe?g|png)$/.test(e)},r=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},i=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},o=function(e,n,r){return!(e.selection.isCollapsed()!==!1||!t(n))&&i(e,n,r)},a=function(e,t,i){return!!n(t)&&r(e,t,i)},s=function(e,t){return e.insertContent(t,{merge:e.settings.paste_merge_formats!==!1,paste:!0}),!0},l=function(t,n){e.each([o,a,s],function(e){return e(t,n,s)!==!0})},c=function(e,t){e.settings.smart_paste===!1?s(e,t):l(e,t)};return{isImageUrl:n,isAbsoluteUrl:t,insertContent:c}}),r("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],function(e,t,n,r,i,o){return function(a){function s(e){var t,n=a.dom;if(t=a.fire("BeforePastePreProcess",{content:e}),t=a.fire("PastePreProcess",t),e=t.content,!t.isDefaultPrevented()){if(a.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()){var r=n.add(a.getBody(),"div",{style:"display:none"},e);t=a.fire("PastePostProcess",{node:r}),n.remove(r),e=t.node.innerHTML}t.isDefaultPrevented()||i.insertContent(a,e)}}function l(e){e=a.dom.encode(e).replace(/\r\n/g,"\n");var t,n=a.dom.getParent(a.selection.getStart(),a.dom.isBlock),i=a.settings.forced_root_block;i&&(t=a.dom.createHTML(i,a.settings.forced_root_block_attrs),t=t.substr(0,t.length-3)+">"),n&&/^(PRE|DIV)$/.test(n.nodeName)||!i?e=r.filter(e,[[/\n/g,"<br>"]]):(e=r.filter(e,[[/\n\n/g,"</p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]]),-1!=e.indexOf("<p>")&&(e=t+e)),s(e)}function c(){function t(e){var t,n,i,o=e.startContainer;if(t=e.getClientRects(),t.length)return t[0];if(e.collapsed&&1==o.nodeType){for(i=o.childNodes[S.startOffset];i&&3==i.nodeType&&!i.data.length;)i=i.nextSibling;if(i)return"BR"==i.tagName&&(n=r.doc.createTextNode("\ufeff"),i.parentNode.insertBefore(n,i),e=r.createRng(),e.setStartBefore(n),e.setEndAfter(n),t=e.getClientRects(),r.remove(n)),t.length?t[0]:void 0}}var n,r=a.dom,i=a.getBody(),o=a.dom.getViewPort(a.getWin()),s=o.y,l=20;if(S=a.selection.getRng(),a.inline&&(n=a.selection.getScrollContainer(),n&&n.scrollTop>0&&(s=n.scrollTop)),S.getClientRects){var c=t(S);if(c)l=s+(c.top-r.getPos(i).y);else{l=s;var u=S.startContainer;u&&(3==u.nodeType&&u.parentNode!=i&&(u=u.parentNode),1==u.nodeType&&(l=r.getPos(u,n||i).y))}}N=r.add(a.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+l+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},A),(e.ie||e.gecko)&&r.setStyle(N,"left","rtl"==r.getStyle(i,"direction",!0)?65535:-65535),r.bind(N,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),N.focus(),a.selection.select(N,!0)}function u(){if(N){for(var e;e=a.dom.get("mcepastebin");)a.dom.remove(e),a.dom.unbind(e);S&&a.selection.setRng(S)}N=S=null}function d(){var e,t,n,r,i="";for(e=a.dom.select("div[id=mcepastebin]"),t=0;t<e.length;t++)n=e[t],n.firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),r=n.innerHTML,i!=A&&(i+=r);return i}function f(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1==n.indexOf(B)&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var i=e.types[r];t[i]=e.getData(i)}}return t}function m(e){return f(e.clipboardData||a.getDoc().dataTransfer)}function g(e){return w(e,"text/html")||w(e,"text/plain")}function p(e){var t;return t=e.indexOf(","),-1!==t?e.substr(t+1):null}function h(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)}function v(e,t,n){e&&(a.selection.setRng(e),e=null);var r=t.result,i=p(r),o=new Image;if(o.src=r,h(a.settings,o)){var l,c,u=a.editorUpload.blobCache;c=u.findFirst(function(e){return e.base64()===i}),c?l=c:(l=u.create(P(),n,i),u.add(l)),s('<img src="'+l.blobUri()+'">')}else s('<img src="'+r+'">')}function y(e,t){function n(n){var r,i,o,a=!1;if(n)for(r=0;r<n.length;r++)if(i=n[r],/^image\/(jpeg|png|gif|bmp)$/.test(i.type)){var s=i.getAsFile?i.getAsFile():i;o=new FileReader,o.onload=v.bind(null,t,o,s),o.readAsDataURL(s),e.preventDefault(),a=!0}return a}var r=e.clipboardData||e.dataTransfer;return a.settings.paste_data_images&&r?n(r.items)||n(r.files):void 0}function b(e){var t=e.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}function x(e){return t.getCaretRangeFromPoint(e.clientX,e.clientY,a.getDoc())}function w(e,t){return t in e&&e[t].length>0}function C(e){return n.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function k(){function t(e,t,n){var i;return w(e,"text/html")?i=e["text/html"]:(i=d(),i==A&&(n=!0)),i=r.trimHtml(i),N&&N.firstChild&&"mcepastebin"===N.firstChild.id&&(n=!0),u(),i.length||(n=!0),n&&(i=w(e,"text/plain")&&-1==i.indexOf("</p>")?e["text/plain"]:r.innerText(i)),i==A?void(t||a.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(n?l(i):s(i))}function n(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")}a.on("keydown",function(t){function n(e){C(e)&&!e.isDefaultPrevented()&&u()}if(C(t)&&!t.isDefaultPrevented()){if(_=t.shiftKey&&86==t.keyCode,_&&e.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),E=(new Date).getTime(),e.ie&&_)return t.preventDefault(),void a.fire("paste",{ieFake:!0});u(),c(),a.once("keyup",n),a.once("paste",function(){a.off("keyup",n)})}});var i=function(){return S||a.selection.getRng()};a.on("paste",function(n){var r=(new Date).getTime(),s=m(n),l=(new Date).getTime()-r,f=(new Date).getTime()-E-l<1e3,p="text"==T.pasteFormat||_;return _=!1,n.isDefaultPrevented()||b(n)?void u():!g(s)&&y(n,i())?void u():(f||n.preventDefault(),!e.ie||f&&!n.ieFake||(c(),a.dom.bind(N,"paste",function(e){e.stopPropagation()}),a.getDoc().execCommand("Paste",!1,null),s["text/html"]=d()),void(w(s,"text/html")?(n.preventDefault(),t(s,f,p)):o.setEditorTimeout(a,function(){t(s,f,p)},0)))}),a.on("dragstart dragend",function(e){R="dragstart"==e.type}),a.on("drop",function(e){var t,i;if(i=x(e),!e.isDefaultPrevented()&&!R&&(t=f(e.dataTransfer),(g(t)&&!n(t)||!y(e,i))&&i&&a.settings.paste_filter_drop!==!1)){var c=t["mce-internal"]||t["text/html"]||t["text/plain"];c&&(e.preventDefault(),o.setEditorTimeout(a,function(){a.undoManager.transact(function(){t["mce-internal"]&&a.execCommand("Delete"),a.selection.setRng(i),c=r.trimHtml(c),t["text/html"]?s(c):l(c)})}))}}),a.on("dragover dragend",function(e){a.settings.paste_data_images&&e.preventDefault()})}var N,S,_,T=this,E=0,R=!1,A="%MCEPASTEBIN%",B="data:text/mce-internal,",P=r.createIdGenerator("mceclip");T.pasteHtml=s,T.pasteText=l,T.pasteImageData=y,a.on("preInit",function(){k(),a.parser.addNodeFilter("img",function(t,n,r){function i(e){return e.data&&e.data.paste===!0}function o(t){t.attr("data-mce-object")||u===e.transparentSrc||t.remove()}function s(e){return 0===e.indexOf("webkit-fake-url")}function l(e){return 0===e.indexOf("data:")}if(!a.settings.paste_data_images&&i(r))for(var c=t.length;c--;){var u=t[c].attributes.map.src;u&&(s(u)?o(t[c]):!a.settings.allow_html_data_urls&&l(u)&&o(t[c]))}})})}}),r("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(e,t,n,r,i,o){function a(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function s(t){var n,r;return r=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),e.each(r,function(e){return e.test(t)?(n=!0,!1):void 0}),n}function l(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function c(c){var u=c.settings;c.on("BeforePastePreProcess",function(d){function f(e){function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do n+=t(e);while(e=e.next);return n}function n(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do if(!n(e,t))return!1;while(e=e.next);return!0}function r(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do r(e);while(e=e.next)}function o(e,t,o){var s=e._listLevel||u;s!=u&&(u>s?a&&(a=a.parent.parent):(c=a,a=null)),a&&a.name==t?a.append(e):(c=c||a,a=new i(t,1),o>1&&a.attr("start",""+o),e.wrap(a)),e.name="li",s>u&&c&&c.lastChild.append(a),u=s,r(e),n(e,/^\u00a0+/),n(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),
n(e,/^\u00a0+/)}for(var a,c,u=1,d=[],f=e.firstChild;"undefined"!=typeof f&&null!==f;)if(d.push(f),f=f.walk(),null!==f)for(;"undefined"!=typeof f&&f.parent!==e;)f=f.walk();for(var m=0;m<d.length;m++)if(e=d[m],"p"==e.name&&e.firstChild){var g=t(e);if(l(g)){o(e,"ul");continue}if(s(g)){var p=/([0-9]+)\./.exec(g),h=1;p&&(h=parseInt(p[1],10)),o(e,"ol",h);continue}if(e._listLevel){o(e,"ul",1);continue}a=null}else c=a,a=null}function m(t,n){var r,o={},a=c.dom.parseStyle(n);return e.each(a,function(e,i){switch(i){case"mso-list":r=/\w+ \w+([0-9]+)/i.exec(n),r&&(t._listLevel=parseInt(r[1],10)),/Ignore/i.test(e)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":i="text-align";break;case"vert-align":i="vertical-align";break;case"font-color":case"mso-foreground":i="color";break;case"mso-background":case"mso-highlight":i="background";break;case"font-weight":case"font-style":return void("normal"!=e&&(o[i]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void t.remove()}return 0===i.indexOf("mso-comment")?void t.remove():void(0!==i.indexOf("mso-")&&("all"==g||p&&p[i])&&(o[i]=e))}),/(bold)/i.test(o["font-weight"])&&(delete o["font-weight"],t.wrap(new i("b",1))),/(italic)/i.test(o["font-style"])&&(delete o["font-style"],t.wrap(new i("i",1))),o=c.dom.serializeStyle(o,t.name),o?o:null}var g,p,h=d.content;if(h=h.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,""),h=h.replace(/<br class="?Apple-interchange-newline"?>/gi,""),g=u.paste_retain_style_properties,g&&(p=e.makeMap(g.split(/[, ]/))),u.paste_enable_default_filters!==!1&&a(d.content)){d.wordContent=!0,h=o.filter(h,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,""],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(""):""}]]);var v=u.paste_word_valid_elements;v||(v="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var y=new n({valid_elements:v,valid_children:"-li[p]"});e.each(y.elements,function(e){e.attributes["class"]||(e.attributes["class"]={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var b=new t({},y);b.addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("style",m(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),b.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),b.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),b.addNodeFilter("a",function(e){for(var t,n,r,i=e.length;i--;)if(t=e[i],n=t.attr("href"),r=t.attr("name"),n&&-1!=n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1],n&&(n="#"+n)),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var x=b.parse(h);u.paste_convert_word_fake_lists!==!1&&f(x),d.content=new r({validate:u.validate},y).serialize(x)}})}return c.isWordContent=a,c}),r("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(e,t,n,r){return function(i){function o(e){i.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}function a(e){i.on("PastePostProcess",function(t){e(t.node)})}function s(e){if(!n.isWordContent(e))return e;var o=[];t.each(i.schema.getBlockElements(),function(e,t){o.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+o.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=r.filter(e,[[a,"$1"]]),e=r.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function l(e){if(n.isWordContent(e))return e;var t=i.settings.paste_webkit_styles;if(i.settings.paste_remove_styles_if_webkit===!1||"all"==t)return e;if(t&&(t=t.split(/[, ]/)),t){var r=i.dom,o=i.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,n,i,a){var s=r.parseStyle(i,"span"),l={};if("none"===t)return n+a;for(var c=0;c<t.length;c++){var u=s[t[c]],d=r.getStyle(o,t[c],!0);/color/.test(t[c])&&(u=r.toHex(u),d=r.toHex(d)),d!=u&&(l[t[c]]=u)}return l=r.serializeStyle(l,"span"),l?n+' style="'+l+'"'+a:n+a})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function c(e){i.$("a",e).find("font,u").each(function(e,t){i.dom.remove(t,!0)})}e.webkit&&o(l),e.ie&&(o(s),a(c))}}),r("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(e,t,n,r){var i;e.add("paste",function(o){function a(){return i||o.settings.paste_plaintext_inform===!1}function s(){if("text"==c.pasteFormat)c.pasteFormat="html",o.fire("PastePlainTextToggle",{state:!1});else if(c.pasteFormat="text",o.fire("PastePlainTextToggle",{state:!0}),!a()){var e=o.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");o.notificationManager.open({text:e,type:"info"}),i=!0}o.focus()}function l(){var e=this;e.active("text"===c.pasteFormat),o.on("PastePlainTextToggle",function(t){e.active(t.state)})}var c,u=this,d=o.settings;return/(^|[ ,])powerpaste([, ]|$)/.test(d.plugins)&&e.get("powerpaste")?void("undefined"!=typeof console&&console.log&&console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")):(u.clipboard=c=new t(o),u.quirks=new r(o),u.wordFilter=new n(o),o.settings.paste_as_text&&(u.clipboard.pasteFormat="text"),d.paste_preprocess&&o.on("PastePreProcess",function(e){d.paste_preprocess.call(u,u,e)}),d.paste_postprocess&&o.on("PastePostProcess",function(e){d.paste_postprocess.call(u,u,e)}),o.addCommand("mceInsertClipboardContent",function(e,t){t.content&&u.clipboard.pasteHtml(t.content),t.text&&u.clipboard.pasteText(t.text)}),o.settings.paste_block_drop&&o.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),o.settings.paste_data_images||o.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),o.addCommand("mceTogglePlainTextPaste",s),o.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:s,onPostRender:l}),void o.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:c.pasteFormat,onclick:s,onPostRender:l}))})}),o(["tinymce/pasteplugin/Utils"])}(window)}.call(this),function(){tinymce.PluginManager.add("save",function(e){function t(){var t;return t=tinymce.DOM.getParent(e.id,"form"),!e.getParam("save_enablewhendirty",!0)||e.isDirty()?(tinymce.triggerSave(),e.getParam("save_onsavecallback")?(e.execCallback("save_onsavecallback",e),void e.nodeChanged()):void(t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():n(e.translate("Error: Form submit field collision."))),e.nodeChanged()):n(e.translate("Error: No form element found.")))):void 0}function n(t){e.notificationManager.open({text:t,type:"error"})}function r(){var t=tinymce.trim(e.startContent);return e.getParam("save_oncancelcallback")?void e.execCallback("save_oncancelcallback",e):(e.setContent(t),e.undoManager.clear(),void e.nodeChanged())}function i(){var t=this;e.on("nodeChange dirty",function(){t.disabled(e.getParam("save_enablewhendirty",!0)&&!e.isDirty())})}e.addCommand("mceSave",t),e.addCommand("mceCancel",r),e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:i}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:i}),e.addShortcut("Meta+S","","mceSave")})}.call(this),function(){tinymce.PluginManager.add("tabfocus",function(e){function t(e){9!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()}function n(t){function n(n){function o(e){return"BODY"===e.nodeName||"hidden"!=e.type&&"none"!=e.style.display&&"hidden"!=e.style.visibility&&o(e.parentNode)}function l(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&tinymce.get(t.id)&&-1!=e.tabIndex&&o(e)}if(s=r.select(":input:enabled,*[tabindex]:not(iframe)"),i(s,function(t,n){return t.id==e.id?(a=n,!1):void 0}),n>0){for(c=a+1;c<s.length;c++)if(l(s[c]))return s[c]}else for(c=a-1;c>=0;c--)if(l(s[c]))return s[c];return null}var a,s,l,c;if(!(9!==t.keyCode||t.ctrlKey||t.altKey||t.metaKey||t.isDefaultPrevented())&&(l=o(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),1==l.length&&(l[1]=l[0],l[0]=":prev"),s=t.shiftKey?":prev"==l[0]?n(-1):r.get(l[0]):":next"==l[1]?n(1):r.get(l[1]))){var u=tinymce.get(s.id||s.name);s.id&&u?u.focus():tinymce.util.Delay.setTimeout(function(){tinymce.Env.webkit||window.focus(),s.focus()},10),t.preventDefault()}}var r=tinymce.DOM,i=tinymce.each,o=tinymce.explode;e.on("init",function(){e.inline&&tinymce.DOM.setAttrib(e.getBody(),"tabIndex",null),e.on("keyup",t),tinymce.Env.gecko?e.on("keypress keydown",n):e.on("keydown",n)})})}.call(this),function(){tinymce.PluginManager.add("textcolor",function(e){function t(t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"==t?"color":"background-color"])&&(n=r)}),n}function n(t){var n,r,i=[];for(r=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],r=e.settings.textcolor_map||r,r=e.settings[t+"_map"]||r,n=0;n<r.length;n+=2)i.push({text:r[n+1],color:"#"+r[n]});return i}function r(){function t(e,t){var n="transparent"==e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+g+"-"+p++ +'" data-mce-color="'+(e?e:"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+tinymce.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"}var r,i,o,a,s,u,d,f,m=this,g=m._id,p=0;for(f=m.settings.origin,r=n(f),r.push({text:tinymce.translate("No color"),color:"transparent"}),o='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=r.length-1,u=0;u<c[f];u++){for(o+="<tr>",s=0;s<l[f];s++)d=u*l[f]+s,d>a?o+="<td></td>":(i=r[d],o+=t(i.color,i.text));o+="</tr>"}if(e.settings.color_picker_callback){for(o+='<tr><td colspan="'+l[f]+'" class="mce-custom-color-btn"><div id="'+g+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+g+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"</button></div></td></tr>",o+="<tr>",s=0;s<l[f];s++)o+=t("","Custom color");o+="</tr>"}return o+="</tbody></table>"}function i(t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})}function o(t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})}function a(n){function r(e){d.hidePanel(),d.color(e),i(d.settings.format,e)}function a(){d.hidePanel(),d.resetColor(),o(d.settings.format)}function s(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)}var c,u,d=this.parent();u=d.settings.origin,tinymce.DOM.getParent(n.target,".mce-custom-color-btn")&&(d.hidePanel(),e.settings.color_picker_callback.call(e,function(e){var t,n,i,o=d.panel.getEl().getElementsByTagName("table")[0];for(t=tinymce.map(o.rows[o.rows.length-1].childNodes,function(e){return e.firstChild}),i=0;i<t.length&&(n=t[i],n.getAttribute("data-mce-color"));i++);if(i==l[u])for(i=0;i<l[u]-1;i++)s(t[i],t[i+1].getAttribute("data-mce-color"));s(n,e),r(e)},t(d.settings.format))),c=n.target.getAttribute("data-mce-color"),c?(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),n.target.setAttribute("aria-selected",!0),this.lastId=n.target.id,"transparent"==c?a():r(c)):null!==c&&d.hidePanel()}function s(){var e=this;e._color?i(e.settings.format,e._color):o(e.settings.format)}var l,c;c={forecolor:e.settings.forecolor_rows||e.settings.textcolor_rows||5,backcolor:e.settings.backcolor_rows||e.settings.textcolor_rows||5},l={forecolor:e.settings.forecolor_cols||e.settings.textcolor_cols||8,backcolor:e.settings.backcolor_cols||e.settings.textcolor_cols||8},e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{origin:"forecolor",role:"application",ariaRemember:!0,html:r,onclick:a},onclick:s}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{origin:"backcolor",role:"application",ariaRemember:!0,html:r,onclick:a},onclick:s})})}.call(this),function(){tinymce.PluginManager.add("visualblocks",function(e,t){function n(){var t=this;t.active(o),e.on("VisualBlocks",function(){t.active(e.dom.hasClass(e.getBody(),"mce-visualblocks"))})}var r,i,o;window.NodeList&&(e.addCommand("mceVisualBlocks",function(){var n,a=e.dom;r||(r=a.uniqueId(),n=a.create("link",{id:r,rel:"stylesheet",href:t+"/css/visualblocks.css"}),e.getDoc().getElementsByTagName("head")[0].appendChild(n)),e.on("PreviewFormats AfterPreviewFormats",function(t){o&&a.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"==t.type)}),a.toggleClass(e.getBody(),"mce-visualblocks"),o=e.dom.hasClass(e.getBody(),"mce-visualblocks"),i&&i.active(a.hasClass(e.getBody(),"mce-visualblocks")),e.fire("VisualBlocks")}),e.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n,selectable:!0,context:"view",prependToContext:!0}),e.on("init",function(){e.settings.visualblocks_default_state&&e.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),e.on("remove",function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")}))})}.call(this),function(){!function(){var e={},t=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),l=0;a>l;++l)s[l]=r(i[l]);var c=o.apply(null,s);if(void 0===c)throw"module ["+t+"] returned undefined";n.instance=c},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},i=function(e,t){for(var n=e.length,i=new Array(n),o=0;n>o;++o)i.push(r(e[o]));t.apply(null,t)},o={};o.bolt={module:{api:{define:n,require:i,demand:r}}};var a=n,s=function(e,t){a(e,[],function(){return t})};s("1",tinymce.Env),s("2",tinymce.EditorManager),s("3",tinymce.ThemeManager),s("8",tinymce.util.Tools),s("9",tinymce.ui.Factory),s("a",tinymce.DOM),a("b",["8","9"],function(e,t){var n="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",r=function(n,r,i){var o,a=[];return r?(e.each(r.split(/[ ,]/),function(e){var r,s=function(){var t=n.selection;e.settings.stateSelector&&t.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},!0),e.settings.disabledStateSelector&&t.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};"|"==e?o=null:t.has(e)?(e={type:e,size:i},a.push(e),o=null):(o||(o={type:"buttongroup",items:[]},a.push(o)),n.buttons[e]&&(r=e,e=n.buttons[r],"function"==typeof e&&(e=e()),e.type=e.type||"button",e.size=i,e=t.create(e),o.items.push(e),n.initialized?s():n.on("init",s)))}),{type:"toolbar",layout:"flow",items:a}):void 0},i=function(t,i){var o=[],a=t.settings,s=function(e){return e?(o.push(r(t,e,i)),!0):void 0};if(e.isArray(a.toolbar)){if(0===a.toolbar.length)return;e.each(a.toolbar,function(e,t){a["toolbar"+(t+1)]=e}),delete a.toolbar}for(var l=1;10>l&&s(a["toolbar"+l]);l++);return o.length||a.toolbar===!1||s(a.toolbar||n),o.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:o}:void 0};return{createToolbar:r,createToolbars:i}}),a("c",["8"],function(e){var t={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},n=function(e,t){var n;return"|"==t?{text:"|"}:n=e[t]},r=function(r,i,o){var a,s,l,c,u;if(u=e.makeMap((i.removed_menuitems||"").split(/[ ,]/)),i.menu?(s=i.menu[o],c=!0):s=t[o],s){a={text:s.title},l=[],e.each((s.items||"").split(/[ ,]/),function(e){var t=n(r,e);t&&!u[e]&&l.push(n(r,e))}),c||e.each(r,function(e){e.context==o&&("before"==e.separator&&l.push({text:"|"}),e.prependToContext?l.unshift(e):l.push(e),"after"==e.separator&&l.push({text:"|"}))});for(var d=0;d<l.length;d++)"|"==l[d].text&&(0!==d&&d!=l.length-1||l.splice(d,1));if(a.menu=l,!a.menu.length)return null}return a},i=function(e){var n,i=[],o=e.settings,a=[];if(o.menu)for(n in o.menu)a.push(n);else for(n in t)a.push(n);for(var s="string"==typeof o.menubar?o.menubar.split(/[ ,]/):a,l=0;l<s.length;l++){var c=s[l];c=r(e.menuItems,e.settings,c),c&&i.push(c)}return i};return{createMenuButtons:i}}),s("j",tinymce.util.Delay),s("k",tinymce.geom.Rect),a("d",["a","8","j","b","9","k"],function(e,t,n,r,i,o){var a=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},s=function(e){t.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},l=function(e,t){e.moveTo(t.left,t.top)},c=function(e,n,r){n=n?n.substr(0,2):"",t.each({t:"down",b:"up"},function(t,i){e.classes.toggle("arrow-"+t,r(i,n.substr(0,1)))}),t.each({l:"left",r:"right"},function(t,i){e.classes.toggle("arrow-"+t,r(i,n.substr(1,1)))})},u=function(e,t,n,r,i,o){return o=a({x:t,y:n,w:o.w,h:o.h}),e&&(o=e({elementRect:a(r),contentAreaRect:a(i),panelRect:o})),o},d=function(a){var d,f=a.settings,m=function(){return a.contextToolbars||[]},g=function(t){var n,r,i;return n=e.getPos(a.getContentAreaContainer()),r=a.dom.getRect(t),i=a.dom.getRoot(),"BODY"===i.nodeName&&(r.x-=i.ownerDocument.documentElement.scrollLeft||i.scrollLeft,r.y-=i.ownerDocument.documentElement.scrollTop||i.scrollTop),r.x+=n.x,r.y+=n.y,r},p=function(t,n){var r,i,d,m,p,h,v,y,b=f.inline_toolbar_position_handler;if(!a.removed){if(!t||!t.toolbar.panel)return void s(a);v=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],p=t.toolbar.panel,n&&p.show(),d=g(t.element),i=e.getRect(p.getEl()),m=e.getRect(a.getContentAreaContainer()||a.getBody()),y=25,"inline"!==e.getStyle(t.element,"display",!0)&&(d.w=t.element.clientWidth,d.h=t.element.clientHeight),a.inline||(m.w=a.getDoc().documentElement.offsetWidth),a.selection.controlSelection.isResizable(t.element)&&d.w<y&&(d=o.inflate(d,0,8)),r=o.findBestRelativePosition(i,d,m,v),d=o.clamp(d,m),r?(h=o.relativePosition(i,d,r),l(p,u(b,h.x,h.y,d,m,i))):(m.h+=i.h,d=o.intersect(m,d),d?(r=o.findBestRelativePosition(i,d,m,["bc-tc","bl-tl","br-tr"]),r?(h=o.relativePosition(i,d,r),l(p,u(b,h.x,h.y,d,m,i))):l(p,u(b,d.x,d.y,d,m,i))):p.hide()),c(p,r,function(e,t){return e===t})}},h=function(e){return function(){var t=function(){a.selection&&p(x(a.selection.getNode()),e)};n.requestAnimationFrame(t)}},v=function(){d||(d=a.selection.getScrollContainer()||a.getWin(),e.bind(d,"scroll",h(!0)),a.on("remove",function(){e.unbind(d,"scroll")}))},y=function(e){var t;return e.toolbar.panel?(e.toolbar.panel.show(),void p(e)):(v(),t=i.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:r.createToolbar(a,e.toolbar.items),oncancel:function(){a.focus()}}),e.toolbar.panel=t,t.renderTo(document.body).reflow(),void p(e))},b=function(){t.each(m(),function(e){e.panel&&e.panel.hide()})},x=function(e){var t,n,r,i=m();for(r=a.$(e).parents().add(e),t=r.length-1;t>=0;t--)for(n=i.length-1;n>=0;n--)if(i[n].predicate(r[t]))return{toolbar:i[n],element:r[t]};return null};a.on("click keyup setContent ObjectResized",function(e){("setcontent"!==e.type||e.selection)&&n.setEditorTimeout(a,function(){var e;e=x(a.selection.getNode()),e?(b(),y(e)):b()})}),a.on("blur hide contextmenu",b),a.on("ObjectResizeStart",function(){var e=x(a.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),a.on("ResizeEditor ResizeWindow",h(!0)),a.on("nodeChange",h(!1)),a.on("remove",function(){t.each(m(),function(e){e.panel&&e.panel.remove()}),a.contextToolbars={}}),a.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var e=x(a.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})};return{addContextualToolbars:d}}),a("e",[],function(){var e=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},t=function(t,n){t.shortcuts.add("Alt+F9","",e(n,"menubar")),t.shortcuts.add("Alt+F10,F10","",e(n,"toolbar")),t.shortcuts.add("Alt+F11","",e(n,"elementpath")),n.on("cancel",function(){t.focus()})};return{addKeys:t}}),a("f",["8","9","1"],function(e,t,n){var r=function(e){return{element:function(){return e}}},i=function(e,t,n){var i=e.settings[n];i&&i(r(t.getEl("body")))},o=function(t,n,r){e.each(r,function(e){var r=n.items().filter("#"+e.name)[0];r&&r.visible()&&e.name!==t&&(i(e,r,"onhide"),r.visible(!1))})},a=function(e){e.items().each(function(e){e.active(!1)})},s=function(t,n){return e.grep(t,function(e){return e.name===n})[0]},l=function(e,n,r){return function(l){var c=l.control,u=c.parents().filter("panel")[0],d=u.find("#"+n)[0],f=s(r,n);o(n,u,r),a(c.parent()),d&&d.visible()?(i(f,d,"onhide"),d.hide(),c.active(!1)):(d?(d.show(),i(f,d,"onshow")):(d=t.create({type:"container",name:n,layout:"stack",classes:"sidebar-panel",html:""}),u.prepend(d),i(f,d,"onrender"),i(f,d,"onshow")),c.active(!0)),e.fire("ResizeEditor")}},c=function(){return!n.ie||n.ie>=11},u=function(e){return!(!c()||!e.sidebars)&&e.sidebars.length>0},d=function(t){var n=e.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:l(t,e.name,t.sidebars)}});return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:n}]}};return{hasSidebar:u,createSidebar:d}}),a("g",[],function(){var e=function(e){var t=function(){e._skinLoaded=!0,e.fire("SkinLoaded")};return function(){e.initialized?t():e.on("init",t)}};return{fireSkinLoaded:e}}),a("6",["a"],function(e){var t=function(e){return{width:e.clientWidth,height:e.clientHeight}},n=function(n,r,i){var o,a,s,l,c=n.settings;o=n.getContainer(),a=n.getContentAreaContainer().firstChild,s=t(o),l=t(a),null!==r&&(r=Math.max(c.min_width||100,r),r=Math.min(c.max_width||65535,r),e.setStyle(o,"width",r+(s.width-l.width)),e.setStyle(a,"width",r)),i=Math.max(c.min_height||100,i),i=Math.min(c.max_height||65535,i),e.setStyle(a,"height",i),n.fire("ResizeEditor")},r=function(e,t,r){var i=e.getContentAreaContainer();n(e,i.clientWidth+t,i.clientHeight+r)};return{resizeTo:n,resizeBy:r}}),a("4",["8","9","a","b","c","d","e","f","g","6"],function(e,t,n,r,i,o,a,s,l,c){var u=function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}},d=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},f=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[d("0"),s.createSidebar(e)]}},m=function(e,m,g){var p,h,v,y=e.settings;return g.skinUiCss&&n.styleSheetLoader.load(g.skinUiCss,l.fireSkinLoaded(e)),p=m.panel=t.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[y.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:i.createMenuButtons(e)},r.createToolbars(e,y.toolbar_items_size),s.hasSidebar(e)?f(e):d("1 0 0 0")]}),y.resize!==!1&&(h={type:"resizehandle",direction:y.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;v={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===y.resize?c.resizeTo(e,v.width+t.deltaX,v.height+t.deltaY):c.resizeTo(e,null,v.height+t.deltaY)}}),y.statusbar!==!1&&p.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},h]}),e.fire("BeforeRenderUI"),e.on("SwitchMode",u(p)),p.renderBefore(g.targetNode).reflow(),y.readonly&&e.setMode("readonly"),y.width&&n.setStyle(p.getEl(),"width",y.width),e.on("remove",function(){p.remove(),p=null}),a.addKeys(e,p),o.addContextualToolbars(e),{iframeContainer:p.find("#iframe")[0].getEl(),editorContainer:p.getEl()}};return{render:m}}),s("h",tinymce.ui.FloatPanel),a("5",["8","9","a","h","b","c","d","e","g"],function(e,t,n,r,i,o,a,s,l){var c=function(e,c,u){var d,f,m=e.settings;m.fixed_toolbar_container&&(f=n.select(m.fixed_toolbar_container)[0]);var g=function(){if(d&&d.moveRel&&d.visible()&&!d._fixed){var t=e.selection.getScrollContainer(),r=e.getBody(),i=0,o=0;if(t){var a=n.getPos(r),s=n.getPos(t);i=Math.max(0,s.x-a.x),o=Math.max(0,s.y-a.y)}d.fixed(!1).moveRel(r,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,o)}},p=function(){d&&(d.show(),g(),n.addClass(e.getBody(),"mce-edit-focus"))},h=function(){d&&(d.hide(),r.hideAll(),n.removeClass(e.getBody(),"mce-edit-focus"))},v=function(){return d?void(d.visible()||p()):(d=c.panel=t.create({type:f?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!f,border:1,items:[m.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:o.createMenuButtons(e)},i.createToolbars(e,m.toolbar_items_size)]}),e.fire("BeforeRenderUI"),d.renderTo(f||document.body).reflow(),s.addKeys(e,d),p(),a.addContextualToolbars(e),e.on("nodeChange",g),e.on("activate",p),e.on("deactivate",h),void e.nodeChanged())};return m.content_editable=!0,e.on("focus",function(){u.skinUiCss?n.styleSheetLoader.load(u.skinUiCss,v,v):v()}),e.on("blur hide",h),e.on("remove",function(){d&&(d.remove(),d=null)}),u.skinUiCss&&n.styleSheetLoader.load(u.skinUiCss,l.fireSkinLoaded(e)),{}};return{render:c}}),s("i",tinymce.ui.Throbber),a("7",["i"],function(e){var t=function(t,n){var r;t.on("ProgressState",function(t){r=r||new e(n.panel.getEl("body")),t.state?r.show(t.time):r.hide()})};return{setup:t}}),a("0",["1","2","3","4","5","6","7"],function(e,t,n,r,i,o,a){var s=function(n,o,s){var l=n.settings,c=l.skin!==!1&&(l.skin||"lightgray");if(c){var u=l.skin_url;u=u?n.documentBaseURI.toAbsolute(u):t.baseURL+"/skins/"+c,e.documentMode<=7?s.skinUiCss=u+"/skin.ie7.min.css":s.skinUiCss=u+"/skin.min.css",n.contentCSS.push(u+"/content"+(n.inline?".inline":"")+".min.css")}return a.setup(n,o),l.inline?i.render(n,o,s):r.render(n,o,s)};return n.add("modern",function(e){return{renderUI:function(t){return s(e,this,t)},resizeTo:function(t,n){return o.resizeTo(e,t,n)},resizeBy:function(t,n){return o.resizeBy(e,t,n)}}}),function(){}}),r("0")()}()}.call(this),function(){!function(){var e={},t=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),l=0;a>l;++l)s[l]=r(i[l]);var c=o.apply(null,s);if(void 0===c)throw"module ["+t+"] returned undefined";n.instance=c},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},i=function(e,t){for(var n=e.length,i=new Array(n),o=0;n>o;++o)i.push(r(e[o]));t.apply(null,t)},o={};o.bolt={module:{api:{define:n,require:i,demand:r}}};var a=n,s=function(e,t){a(e,[],function(){return t})};s("1",tinymce.ThemeManager),s("2",tinymce.util.Delay),s("c",tinymce.util.Tools),s("d",tinymce.ui.Factory),s("e",tinymce.DOM),a("j",[],function(){var e=function(e){return function(t){return typeof t===e}},t=function(e){return Array.isArray(e)},n=function(e){return null===e},r=function(e){return function(r){return!n(r)&&!t(r)&&e(r)}};return{isString:e("string"),isNumber:e("number"),isBoolean:e("boolean"),isFunction:e("function"),isObject:r(e("object")),isNull:n,isArray:t}}),a("f",["c","d","j"],function(e,t,n){var r=function(e,t){var n=function(e,t){return{selector:e,handler:t}},r=function(e){t.active(e)},i=function(e){t.disabled(e)};return t.settings.stateSelector?n(t.settings.stateSelector,r):t.settings.disabledStateSelector?n(t.settings.disabledStateSelector,i):null},i=function(e,t,n){return function(){var i=r(t,n);null!==i&&e.selection.selectorChanged(i.selector,i.handler)}},o=function(e){return n.isArray(e)?e:n.isString(e)?e.split(/[ ,]/):[]},a=function(n,r,a){var s,l=[];return a?(e.each(o(a),function(e){var r;"|"==e?s=null:t.has(e)?(e={type:e},l.push(e),s=null):n.buttons[e]&&(s||(s={type:"buttongroup",items:[]},l.push(s)),r=e,e=n.buttons[r],"function"==typeof e&&(e=e()),e.type=e.type||"button",e=t.create(e),e.on("postRender",i(n,r,e)),s.items.push(e))}),t.create({type:"toolbar",layout:"flow",name:r,items:l})):void 0};return{create:a}}),s("o",tinymce.util.Promise),a("p",[],function(){var e=0,t=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+Date.now().toString(36)+e()+e()+e()},n=function(n){return n+e++ +t()};return{uuid:n}}),a("u",[],function(){var e=function(e,t){function n(n){var i,o,a;o=t[n?"startContainer":"endContainer"],a=t[n?"startOffset":"endOffset"],1==o.nodeType&&(i=e.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(a=Math.min(a,o.childNodes.length-1),n?o.insertBefore(i,o.childNodes[a]):e.insertAfter(i,o.childNodes[a])):o.appendChild(i),o=i,a=0),r[n?"startContainer":"endContainer"]=o,r[n?"startOffset":"endOffset"]=a}var r={};return n(!0),t.collapsed||n(),r},t=function(e,t){function n(n){function r(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t==e)return n;1==t.nodeType&&"bookmark"==t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}var i,o,a;i=a=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],i&&(1==i.nodeType&&(o=r(i),i=i.parentNode,e.remove(a)),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=o)}n(!0),n();var r=e.createRng();return r.setStart(t.startContainer,t.startOffset),t.endContainer&&r.setEnd(t.endContainer,t.endOffset),r};return{create:e,resolve:t}}),s("v",tinymce.dom.TreeWalker),s("w",tinymce.dom.RangeUtils),a("q",["u","c","v","w"],function(e,t,n,r){var i=function(e,t,r){var i,o,a=[];for(i=new n(t,e),o=t;o&&(1===o.nodeType&&a.push(o),o!==r);o=i.next());return a},o=function(n,r){var i,o,a;o=n.dom,a=n.selection,i=e.create(o,a.getRng()),t.each(r,function(e){n.dom.remove(e,!0)}),a.setRng(e.resolve(o,i))},a=function(e){return"A"===e.nodeName&&e.hasAttribute("href")},s=function(e,t){var n=e.getParent(t,a);return n?n:t},l=function(e){var n,o,l,c,u,d,f;return u=e.selection,d=e.dom,f=u.getRng(),n=s(d,r.getNode(f.startContainer,f.startOffset)),o=r.getNode(f.endContainer,f.endOffset),l=e.getBody(),c=t.grep(i(l,n,o),a)},c=function(e){o(e,l(e))};return{unlinkSelection:c
}}),a("m",["p","q"],function(e,t){var n=function(e,t){var n,r,i;for(i='<table data-mce-id="mce" style="width: 100%">',i+="<tbody>",r=0;t>r;r++){for(i+="<tr>",n=0;e>n;n++)i+="<td><br></td>";i+="</tr>"}return i+="</tbody>",i+="</table>"},r=function(e){var t=e.dom.select("*[data-mce-id]");return t[0]},i=function(e,t,i){e.undoManager.transact(function(){var o,a;e.insertContent(n(t,i)),o=r(e),o.removeAttribute("data-mce-id"),a=e.dom.select("td,th",o),e.selection.setCursorLocation(a[0],0)})},o=function(e,t){e.execCommand("FormatBlock",!1,t)},a=function(t,n,r){var i,o;i=t.editorUpload.blobCache,o=i.create(e.uuid("mceu"),r,n),i.add(o),t.insertContent(t.dom.createHTML("img",{src:o.blobUri()}))},s=function(e){e.selection.collapse(!1)},l=function(e){e.focus(),t.unlinkSelection(e),s(e)},c=function(e,t,n){e.focus(),e.dom.setAttrib(t,"href",n),s(e)},u=function(e,t){e.execCommand("mceInsertLink",!1,{href:t}),s(e)},d=function(e,t){var n=e.dom.getParent(e.selection.getStart(),"a[href]");n?c(e,n,t):u(e,t)},f=function(e,t){0===t.trim().length?l(e):d(e,t)};return{insertTable:i,formatBlock:o,insertBlob:a,createLink:f,unlink:l}}),a("r",[],function(){var e=function(e){return/^www\.|\.(com|org|edu|gov|uk|net|ca|de|jp|fr|au|us|ru|ch|it|nl|se|no|es|mil)$/i.test(e.trim())},t=function(e){return/^https?:\/\//.test(e.trim())};return{isDomainLike:e,isAbsolute:t}}),a("g",["c","d","o","m","r"],function(e,t,n,r,i){var o=function(e){e.find("textbox").eq(0).each(function(e){e.focus()})},a=function(n,r){var i=t.create(e.extend({type:"form",layout:"flex",direction:"row",padding:5,name:n,spacing:3},r));return i.on("show",function(){o(i)}),i},s=function(e,t){return t?e.show():e.hide()},l=function(e,t){return new n(function(n){e.windowManager.confirm("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){var r=e===!0?"http://"+t:t;n(r)})})},c=function(e,t){return!i.isAbsolute(t)&&i.isDomainLike(t)?l(e,t):n.resolve(t)},u=function(e,t){var n={},i=function(){e.focus(),r.unlink(e),t()},o=function(e){var t=e.meta;t&&t.attach&&(n={href:this.value(),attach:t.attach})},l=function(t){if(t.control===this){var n,r="";n=e.dom.getParent(e.selection.getStart(),"a[href]"),n&&(r=e.dom.getAttrib(n,"href")),this.fromJSON({linkurl:r}),s(this.find("#unlink"),n),this.find("#linkurl")[0].focus()}};return a("quicklink",{items:[{type:"button",name:"unlink",icon:"unlink",onclick:i,tooltip:"Remove link"},{type:"filepicker",name:"linkurl",placeholder:"Paste or type a link",filetype:"file",onchange:o},{type:"button",icon:"checkmark",subtype:"primary",tooltip:"Ok",onclick:"submit"}],onshow:l,onsubmit:function(i){c(e,i.data.linkurl).then(function(i){e.undoManager.transact(function(){i===n.href&&(n.attach(),n={}),r.createLink(e,i)}),t()})}})};return{createQuickLinkForm:u}}),s("s",tinymce.geom.Rect),a("t",[],function(){var e=function(e){return{x:e.left,y:e.top,w:e.width,h:e.height}},t=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}};return{fromClientRect:e,toClientRect:t}}),a("h",["e","s","t"],function(e,t,n){var r=function(t){var n=e.getViewPort();return{x:t.x+n.x,y:t.y+n.y,w:t.w,h:t.h}},i=function(e){var t=e.getBoundingClientRect();return r({x:t.left,y:t.top,w:Math.max(e.clientWidth,e.offsetWidth),h:Math.max(e.clientHeight,e.offsetHeight)})},o=function(e,t){return i(t)},a=function(e){return i(e.getElement().ownerDocument.body)},s=function(e){return i(e.getContentAreaContainer()||e.getBody())},l=function(e){var t=e.selection.getBoundingClientRect();return t?r(n.fromClientRect(t)):null};return{getElementRect:o,getPageAreaRect:a,getContentAreaRect:s,getSelectionRect:l}}),a("i",["s","t"],function(e,t){var n=function(e,t){return{rect:e,position:t}},r=function(e,t){return{x:t.x,y:t.y,w:e.w,h:e.h}},i=function(t,i,o,a,s){var l,c,u;return l=e.findBestRelativePosition(s,o,a,t),o=e.clamp(o,a),l?(c=e.relativePosition(s,o,l),u=r(s,c),n(u,l)):(o=e.intersect(a,o),o?(l=e.findBestRelativePosition(s,o,a,i))?(c=e.relativePosition(s,o,l),u=r(s,c),n(u,l)):(u=r(s,o),n(u,l)):null)},o=function(e,t,n){return i(["cr-cl","cl-cr"],["bc-tc","bl-tl","br-tr"],e,t,n)},a=function(e,t,n){return i(["tc-bc","bc-tc","tl-bl","bl-tl","tr-br","br-tr"],["bc-tc","bl-tl","br-tr"],e,t,n)},s=function(e,n,r,i){var o;return"function"==typeof e?(o=e({elementRect:t.toClientRect(n),contentAreaRect:t.toClientRect(r),panelRect:t.toClientRect(i)}),t.fromClientRect(o)):i},l=function(e){return e.panelRect};return{calcInsert:o,calc:a,userConstrain:s,defaultHandler:l}}),a("a",["j"],function(e){var t=function(e,t){if(t(e))return!0;throw new Error("Default value doesn't match requested type.")},n=function(e){return function(n,r,i){var o=n.settings;return t(i,e),r in o&&e(o[r])?o[r]:i}},r=function(e,t){return e.split(t).filter(function(e){return e.length>0})},i=function(t,n){var i=function(e){return"string"==typeof e?r(e,/[ ,]/):e},o=function(e,t){return e===!1?[]:t};return e.isArray(t)?t:e.isString(t)?i(t):e.isBoolean(t)?o(t,n):n},o=function(e){return function(n,r,o){var a=r in n.settings?n.settings[r]:o;return t(o,e),i(a,o)}};return{getStringOr:n(e.isString),getBoolOr:n(e.isBoolean),getNumberOr:n(e.isNumber),getHandlerOr:n(e.isFunction),getToolbarItemsOr:o(e.isArray)}}),a("3",["c","d","e","f","g","h","i","a"],function(e,t,n,r,i,o,a,s){return function(){var l,c,u=["bold","italic","|","quicklink","h2","h3","blockquote"],d=["quickimage","quicktable"],f=function(t,n){return e.map(n,function(e){return r.create(t,e.id,e.items)})},m=function(e){return s.getToolbarItemsOr(e,"selection_toolbar",u)},g=function(e){return s.getToolbarItemsOr(e,"insert_toolbar",d)},p=function(e){return e.items().length>0},h=function(n,o){var a=f(n,o).concat([r.create(n,"text",m(n)),r.create(n,"insert",g(n)),i.createQuickLinkForm(n,T)]);return t.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:e.grep(a,p),oncancel:function(){n.focus()}})},v=function(e){e&&e.show()},y=function(e,t){e.moveTo(t.x,t.y)},b=function(t,n){n=n?n.substr(0,2):"",e.each({t:"down",b:"up",c:"center"},function(e,r){t.classes.toggle("arrow-"+e,r===n.substr(0,1))}),"cr"===n?(t.classes.toggle("arrow-left",!0),t.classes.toggle("arrow-right",!1)):"cl"===n?(t.classes.toggle("arrow-left",!0),t.classes.toggle("arrow-right",!0)):e.each({l:"left",r:"right"},function(e,r){t.classes.toggle("arrow-"+e,r===n.substr(1,1))})},x=function(e,t){var n=e.items().filter("#"+t);return n.length>0&&(n[0].show(),e.reflow(),!0)},w=function(e,t,r,i){var l,u,d,f;return f=s.getHandlerOr(r,"inline_toolbar_position_handler",a.defaultHandler),l=o.getContentAreaRect(r),u=n.getRect(e.getEl()),d="insert"===t?a.calcInsert(i,l,u):a.calc(i,l,u),!!d&&(u=d.rect,c=i,y(e,a.userConstrain(f,i,l,u)),b(e,d.position),!0)},C=function(e,t,n,r){return v(e),e.items().hide(),x(e,t)?void(w(e,t,n,r)===!1&&T(e)):void T(e)},k=function(){return l.items().filter("form:visible").length>0},N=function(e,t){if(l){if(l.items().hide(),!x(l,t))return void T(l);var r,i,u,d;v(l),l.items().hide(),x(l,t),d=s.getHandlerOr(e,"inline_toolbar_position_handler",a.defaultHandler),r=o.getContentAreaRect(e),i=n.getRect(l.getEl()),u=a.calc(c,r,i),u&&(i=u.rect,y(l,a.userConstrain(d,c,r,i)),b(l,u.position))}},S=function(e,t,n,r){l||(l=h(e,r),l.renderTo(document.body).reflow().moveTo(n.x,n.y),e.nodeChanged()),C(l,t,e,n)},_=function(e,t,n){l&&w(l,t,e,n)},T=function(){l&&l.hide()},E=function(){l&&l.find("toolbar:visible").eq(0).each(function(e){e.focus(!0)})},R=function(){l&&(l.remove(),l=null)},A=function(){return l&&l.visible()&&k()};return{show:S,showForm:N,reposition:_,inForm:A,hide:T,focus:E,remove:R}}}),a("k",["o"],function(e){var t=function(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result.split(",")[1])},n.readAsDataURL(t)})};return{blobToBase64:t}}),a("l",["o"],function(e){var t=function(){return new e(function(e){var t;t=document.createElement("input"),t.type="file",t.style.position="fixed",t.style.left=0,t.style.top=0,t.style.opacity=.001,document.body.appendChild(t),t.onchange=function(t){e(Array.prototype.slice.call(t.target.files))},t.click(),t.parentNode.removeChild(t)})};return{pickFile:t}}),a("4",["3","k","l","m"],function(e,t,n,r){var i=function(e){for(var t=function(t){return function(){r.formatBlock(e,t)}},n=1;6>n;n++){var i="h"+n;e.addButton(i,{text:i.toUpperCase(),tooltip:"Heading "+n,stateSelector:i,onclick:t(i),onPostRender:function(){var e=this.getEl().firstChild.firstChild;e.style.fontWeight="bold"}})}},o=function(e,o){e.addButton("quicklink",{icon:"link",tooltip:"Insert/Edit link",stateSelector:"a[href]",onclick:function(){o.showForm(e,"quicklink")}}),e.addButton("quickimage",{icon:"image",tooltip:"Insert image",onclick:function(){n.pickFile().then(function(n){var i=n[0];t.blobToBase64(i).then(function(t){r.insertBlob(e,t,i)})})}}),e.addButton("quicktable",{icon:"table",tooltip:"Insert table",onclick:function(){o.hide(),r.insertTable(e,2,2)}}),i(e)};return{addToEditor:o}}),s("n",tinymce.EditorManager),a("5",["n","e"],function(e,t){var n=function(e,t){var n=function(){e._skinLoaded=!0,e.fire("SkinLoaded"),t()};e.initialized?n():e.on("init",n)},r=function(t){var n=e.baseURL+"/skins/";return t?n+t:n+"lightgray"},i=function(e,t){return e.documentBaseURI.toAbsolute(t)},o=function(e,o){var a=e.settings,s=a.skin_url?i(e,a.skin_url):r(a.skin),l=function(){n(e,o)};t.styleSheetLoader.load(s+"/skin.min.css",l),e.contentCSS.push(s+"/content.inline.min.css")};return{load:o}}),a("8",[],function(){var e=function(e,t){return{id:e,rect:t}},t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r(e);if(i)return i}return null};return{match:t,result:e}}),a("6",["8","h"],function(e,t){var n=function(n){return function(r){return r.selection.isCollapsed()?null:e.result(n,t.getSelectionRect(r))}},r=function(n,r){return function(i){var o,a=i.schema.getTextBlockElements();for(o=0;o<n.length;o++)if("TABLE"===n[o].nodeName)return null;for(o=0;o<n.length;o++)if(n[o].nodeName in a)return i.dom.isEmpty(n[o])?e.result(r,t.getSelectionRect(i)):null;return null}};return{textSelection:n,emptyTextBlock:r}}),a("7",["8","h"],function(e,t){var n=function(n,r){return function(i){for(var o=0;o<r.length;o++)if(r[o].predicate(n))return e.result(r[o].id,t.getElementRect(i,n));return null}},r=function(n,r){return function(i){for(var o=0;o<n.length;o++)for(var a=0;a<r.length;a++)if(r[a].predicate(n[o]))return e.result(r[a].id,t.getElementRect(i,n[o]));return null}};return{element:n,parent:r}}),a("9",[],function(){var e=function(t){return t.reduce(function(t,n){return t.concat(Array.isArray(n)?e(n):n)},[])};return{flatten:e}}),a("b",["c"],function(e){var t=function(e,t){return{id:e,predicate:t}},n=function(n){return e.map(n,function(e){return t(e.id,e.predicate)})};return{create:t,fromContextToolbars:n}}),a("0",["1","2","3","4","5","6","7","8","9","a","b"],function(e,t,n,r,i,o,a,s,l,c,u){var d=function(e){var t=e.selection.getNode(),n=e.dom.getParents(t);return n},f=function(e,t,n,r){var i=function(n){return e.dom.is(n,t)};return{predicate:i,id:n,items:r}},m=function(e){var t=e.contextToolbars;return l.flatten([t?t:[],f(e,"img","image","alignleft aligncenter alignright")])},g=function(e,t){var n,r,i;return r=d(e),i=u.fromContextToolbars(t),n=s.match(e,[a.element(r[0],i),o.textSelection("text"),o.emptyTextBlock(r,"insert"),a.parent(r,i)]),n&&n.rect?n:null},p=function(e,t){var n=function(){var n=m(e),r=g(e,n);r?t.show(e,r.id,r.rect,n):t.hide()};return function(){e.removed||n()}},h=function(e,t){return function(){var n=m(e),r=g(e,n);r&&t.reposition(e,r.id,r.rect)}},v=function(e,t){return function(){e.inForm()||t()}},y=function(e,n){var r=t.throttle(p(e,n),0),i=t.throttle(v(n,p(e,n)),0);e.on("blur hide ObjectResizeStart",n.hide),e.on("click",r),e.on("nodeChange mouseup",i),e.on("ResizeEditor keyup",r),e.on("ResizeWindow",h(e,n)),e.on("remove",n.remove),e.shortcuts.add("Alt+F10","",n.focus)},b=function(e,t){e.shortcuts.remove("meta+k"),e.shortcuts.add("meta+k","",function(){var n=m(e),r=r=s.match(e,[o.textSelection("quicklink")]);r&&t.show(e,r.id,r.rect,n)})},x=function(e,t){return i.load(e,function(){y(e,t),b(e,t)}),{}},w=function(e){throw new Error(e)};return e.add("inlite",function(e){var t=new n;r.addToEditor(e,t);var i=function(){return e.inline?x(e,t):w("inlite theme only supports inline mode.")};return{renderUI:i}}),function(){}}),r("0")()}()}.call(this),"undefined"==typeof Package&&(Package={}),Package["teamon:tinymce"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package["reactive-var"].ReactiveVar,n=Package.templating.Template,o=Package.blaze.Blaze,i=Package.blaze.UI,r=Package.blaze.Handlebars,a=Package.spacebars.Spacebars,s=Package.htmljs.HTML,l,u;(function(){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;e.cleanData=function(t){return function(n){var o,i,r;for(r=0;null!=(i=n[r]);r++)try{o=e._data(i,"events"),o&&o.remove&&e(i).triggerHandler("remove")}catch(a){}t(n)}}(e.cleanData),e.widget=function(t,n,o){var i,r,a,s,l={},u=t.split(".")[0];return t=t.split(".")[1],i=u+"-"+t,o||(o=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[u]=e[u]||{},r=e[u][t],a=e[u][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,r,{version:o.version,_proto:e.extend({},o),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(o,function(t,o){return e.isFunction(o)?void(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,r;return this._super=e,this._superApply=i,r=o.apply(this,arguments),this._super=t,this._superApply=n,r}}()):void(l[t]=o)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix||t:t},l,{constructor:a,namespace:u,widgetName:t,widgetFullName:i}),r?(e.each(r._childConstructors,function(t,n){var o=n.prototype;e.widget(o.namespace+"."+o.widgetName,a,n._proto)}),delete r._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var o=n.call(arguments,1),i=0,r=o.length,a,s;r>i;i++)for(a in o[i])s=o[i][a],o[i].hasOwnProperty(a)&&void 0!==s&&(e.isPlainObject(s)?t[a]=e.isPlainObject(t[a])?e.widget.extend({},t[a],s):e.widget.extend({},s):t[a]=s);return t},e.widget.bridge=function(t,o){var i=o.prototype.widgetFullName||t;e.fn[t]=function(r){var a="string"==typeof r,s=n.call(arguments,1),l=this;return r=!a&&s.length?e.widget.extend.apply(null,[r].concat(s)):r,this.each(a?function(){var n,o=e.data(this,i);return"instance"===r?(l=o,!1):o?e.isFunction(o[r])&&"_"!==r.charAt(0)?(n=o[r].apply(o,s),n!==o&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}:function(){var t=e.data(this,i);t?(t.option(r||{}),t._init&&t._init()):e.data(this,i,new o(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,o){o=e(o||this.defaultElement||this)[0],this.element=e(o),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this.bindings=e(),this.hoverable=e(),this.focusable=e(),o!==this&&(e.data(o,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===o&&this.destroy()}}),this.document=e(o.style?o.ownerDocument:o.document||o),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var o=t,i,r,a;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},i=t.split("."),t=i.shift(),i.length){for(r=o[t]=e.widget.extend({},this.options[t]),a=0;a<i.length-1;a++)r[i[a]]=r[i[a]]||{},r=r[i[a]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,o){var i,r=this;"boolean"!=typeof t&&(o=n,n=t,t=!1),o?(n=i=e(n),this.bindings=this.bindings.add(n)):(o=n,n=this.element,i=this.widget()),e.each(o,function(o,a){function s(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=o.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+r.eventNamespace,p=l[2];p?i.delegate(p,u,s):n.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?o[e]:e).apply(o,arguments)}var o=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,o){var i,r,a=this.options[t];if(o=o||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(i in r)i in n||(n[i]=r[i]);return this.element.trigger(n,o),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(o))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(o,i,r){"string"==typeof i&&(i={effect:i});var a,s=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),a=!e.isEmptyObject(i),i.complete=r,i.delay&&o.delay(i.delay),a&&e.effects&&e.effects.effect[s]?o[t](i):s!==t&&o[s]?o[s](i.duration,i.easing,r):o.queue(function(n){e(this)[t](),r&&r.call(o[0]),n()})}});var o=e.widget})}).call(this),function(){!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var o=n.initialIframeSrc||"javascript:false;",i,r,a;return{send:function(s,l){i=e('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),a=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+a+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+a+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+a+"_method=PATCH",n.type="POST"),t+=1,r=e('<iframe src="'+o+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,a=e.isArray(n.paramName)?n.paramName:[n.paramName];r.unbind("load").bind("load",function(){var t;try{if(t=r.contents(),!t.length||!t[0].firstChild)throw new Error}catch(n){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+o+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",r.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",a[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),t&&t.length&&n.fileInput.each(function(n,o){var i=e(t[n]);e(o).prop("name",i.prop("name")).attr("form",i.attr("form")),i.replaceWith(o)})}),i.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",o),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})})}.call(this),function(){!function(e){"use strict";window||(window={}),"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";function t(t){var n="dragover"===t;return function(o){o.dataTransfer=o.originalEvent&&o.originalEvent.dataTransfer;var i=o.dataTransfer;i&&-1!==e.inArray("Files",i.types)&&this._trigger(t,e.Event(t,{delegatedEvent:o}))!==!1&&(o.preventDefault(),n&&(i.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){return t.isDefaultPrevented()?!1:void((n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var o=e-this.timestamp;return(!this.bitrate||!n||o>n)&&(this.bitrate=(t-this.loaded)*(1e3/o)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var o=Date.now?Date.now():(new Date).getTime(),i;if(n._time&&n.progressInterval&&o-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=o,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(o,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(o,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,o=t.xhr?t.xhr():e.ajaxSettings.xhr();o.upload&&(e(o.upload).bind("progress",function(e){var o=e.originalEvent;e.lengthComputable=o.lengthComputable,e.loaded=o.loaded,e.total=o.total,n._onProgress(e,t)}),t.xhr=function(){return o})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n=this,o,i=t.files[0],r=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),r&&!t.blob&&this._isInstanceOf("File",i)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"'),r?e.support.xhrFormDataFileUpload&&(t.postMessage?(o=this._getFormData(t),t.blob?o.push({name:a,value:t.blob}):e.each(t.files,function(n,i){o.push({name:"array"===e.type(t.paramName)&&t.paramName[n]||a,value:i})})):(n._isInstanceOf("FormData",t.formData)?o=t.formData:(o=new FormData,e.each(this._getFormData(t),function(e,t){o.append(t.name,t.value)})),t.blob?o.append(a,t.blob,i.name):e.each(t.files,function(i,r){(n._isInstanceOf("File",r)||n._isInstanceOf("Blob",r))&&o.append("array"===e.type(t.paramName)&&t.paramName[i]||a,r,r.uploadName||r.name)})),t.data=o):(t.contentType=i.type||"application/octet-stream",t.data=t.blob||i),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),o=t.paramName;return o?e.isArray(o)||(o=[o]):(o=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",i=(t.prop("files")||[1]).length;i;)o.push(n),i-=1}),o.length||(o=[n.prop("name")||"files[]"])),o},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,o){var i=e.Deferred(),r=i.promise();return n=n||this.options.context||r,t===!0?i.resolveWith(n,o):t===!1&&i.rejectWith(n,o),r.abort=i.promise,this._enhancePromise(r)},_addConvenienceMethods:function(t,n){var o=this,i=function(t){return e.Deferred().resolveWith(o,t).promise()};n.process=function(t,r){return(t||r)&&(n._processQueue=this._processQueue=(this._processQueue||i([this])).pipe(function(){return n.errorThrown?e.Deferred().rejectWith(o,[n]).promise():i(arguments)}).pipe(t,r)),this._processQueue||i([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=o._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&o._onSend(t,this)),this.jqXHR||o._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",o._trigger("fail",null,this),o._getXHRPromise(!1))},n.state=function(){return this.jqXHR?o._getDeferredState(this.jqXHR):this._processQueue?o._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===o._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),o=n&&n.length>1&&parseInt(n[1],10);return o&&o+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var o=this,i=t.files[0],r=i.size,a=t.uploadedBytes,s=t.maxChunkSize||r,l=this._blobSlice,u=e.Deferred(),p=u.promise(),c,d;return this._isXHRUpload(t)&&l&&(a||r>s)&&!t.data?n?!0:a>=r?(i.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",i.error])):(d=function(){var n=e.extend({},t),p=n._progress.loaded;n.blob=l.call(i,a,a+s,i.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+a+"-"+(a+n.chunkSize-1)+"/"+r,o._initXHRData(n),o._initProgressListener(n),c=(o._trigger("chunksend",null,n)!==!1&&e.ajax(n)||o._getXHRPromise(!1,n.context)).done(function(i,s,l){a=o._getUploadedBytes(l)||a+n.chunkSize,p+n.chunkSize-n._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:a-n.uploadedBytes,total:a-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=a,n.result=i,n.textStatus=s,n.jqXHR=l,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),r>a?d():u.resolveWith(n.context,[i,s,l])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),u.rejectWith(n.context,[e,t,i])})},this._enhancePromise(p),p.abort=function(){return c.abort()},d(),p):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,o,i){var r=i._progress.total,a=i._response;i._progress.loaded<r&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r,total:r}),i),a.result=i.result=t,a.textStatus=i.textStatus=n,a.jqXHR=i.jqXHR=o,this._trigger("done",null,i)},_onFail:function(e,t,n,o){var i=o._response;o.recalculateProgress&&(this._progress.loaded-=o._progress.loaded,this._progress.total-=o._progress.total),i.jqXHR=o.jqXHR=e,i.textStatus=o.textStatus=t,i.errorThrown=o.errorThrown=n,this._trigger("fail",null,o)},_onAlways:function(e,t,n,o){this._trigger("always",null,o)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var o=this,i,r,a,s,l=o._getAJAXSettings(n),u=function(){return o._sending+=1,l._bitrateTimer=new o._BitrateTimer,i=i||((r||o._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&o._getXHRPromise(!1,l.context,r)||o._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){o._onDone(e,t,n,l)}).fail(function(e,t,n){o._onFail(e,t,n,l)}).always(function(e,t,n){if(o._onAlways(e,t,n,l),o._sending-=1,o._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>o._sending)for(var i=o._slots.shift();i;){if("pending"===o._getDeferredState(i)){i.resolve();break}i=o._slots.shift()}0===o._active&&o._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(a=e.Deferred(),this._slots.push(a),s=a.pipe(u)):(this._sequence=this._sequence.pipe(u,u),s=this._sequence),s.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(a&&a.rejectWith(l.context,r),u())},this._enhancePromise(s)):u()},_onAdd:function(t,n){var o=this,i=!0,r=e.extend({},this.options,n),a=n.files,s=a.length,l=r.limitMultiFileUploads,u=r.limitMultiFileUploadSize,p=r.limitMultiFileUploadSizeOverhead,c=0,d=this._getParamName(r),f,h,g,m,v=0;if(!u||s&&void 0!==a[0].size||(u=void 0),(r.singleFileUploads||l||u)&&this._isXHRUpload(r))if(r.singleFileUploads||u||!l)if(!r.singleFileUploads&&u)for(g=[],f=[],m=0;s>m;m+=1)c+=a[m].size+p,(m+1===s||c+a[m+1].size+p>u||l&&m+1-v>=l)&&(g.push(a.slice(v,m+1)),h=d.slice(v,m+1),h.length||(h=d),f.push(h),v=m+1,c=0);else f=d;else for(g=[],f=[],m=0;s>m;m+=l)g.push(a.slice(m,m+l)),h=d.slice(m,m+l),h.length||(h=d),f.push(h);else g=[a],f=[d];return n.originalFiles=a,e.each(g||a,function(r,a){var s=e.extend({},n);return s.files=g?a:[a],s.paramName=f[r],o._initResponseObject(s),o._initProgressObject(s),o._addConvenienceMethods(t,s),i=o._trigger("add",e.Event("add",{delegatedEvent:t}),s)}),i},_replaceFileInput:function(t){var n=t.fileInput,o=n.clone(!0);t.fileInputClone=o,e("<form></form>").append(o)[0].reset(),n.after(o).detach(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===n[0]?o[0]:t}),n[0]===this.element[0]&&(this.element=o)},_handleFileTreeEntry:function(t,n){var o=this,i=e.Deferred(),r=function(e){e&&!e.entry&&(e.entry=t),i.resolve([e])},a=function(e){o._handleFileTreeEntries(e,n+t.name+"/").done(function(e){i.resolve(e)}).fail(r)},s=function(){l.readEntries(function(e){e.length?(u=u.concat(e),s()):a(u)},r)},l,u=[];return n=n||"",t.isFile?t._file?(t._file.relativePath=n,i.resolve(t._file)):t.file(function(e){e.relativePath=n,i.resolve(e)},r):t.isDirectory?(l=t.createReader(),s()):i.resolve([]),i.promise()},_handleFileTreeEntries:function(t,n){var o=this;return e.when.apply(e,e.map(t,function(e){return o._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n=t.prop("webkitEntries")||t.prop("entries"),o,i;if(n&&n.length)return this._handleFileTreeEntries(n);if(o=e.makeArray(t.prop("files")),o.length)void 0===o[0].name&&o[0].fileName&&e.each(o,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();o=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(o).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,o={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(o.fileInput).always(function(i){o.files=i,n.options.replaceFileInput&&n._replaceFileInput(o),n._trigger("change",e.Event("change",{delegatedEvent:t}),o)!==!1&&n._onAdd(t,o)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,o={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&o.files.push(n)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),o)!==!1&&this._onAdd(t,o))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,o=t.dataTransfer,i={};o&&o.files&&o.files.length&&(t.preventDefault(),this._getDroppedFiles(o).always(function(o){i.files=o,n._trigger("drop",e.Event("drop",{delegatedEvent:t}),i)!==!1&&n._onAdd(t,i)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var o=-1!==e.inArray(t,this._specialOptions);o&&this._destroyEventHandlers(),this._super(t,n),o&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,o=e(this.element[0].cloneNode(!1));e.each(o.data(),function(e,i){var r="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();o.attr(r)&&(t._isRegExpOption(e,i)&&(i=t._getRegExp(i)),n[e]=i)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n=this,o=e.Deferred(),i=o.promise(),r,a;return i.abort=function(){return a=!0,r?r.abort():(o.reject(null,"abort","abort"),i)},this._getFileInputFiles(t.fileInput).always(function(e){if(!a){if(!e.length)return void o.reject();t.files=e,r=n._onSend(null,t),r.then(function(e,t,n){o.resolve(e,t,n)},function(e,t,n){o.reject(e,t,n)})}}),this._enhancePromise(i)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})})}.call(this),function(){n.__checkName("queueItem"),n.queueItem=new n("Template.queueItem",function(){var e=this;return s.DIV({"class":"uploadPanel",style:"margin-top: 6px"},"\n        ",s.DIV({"class":function(){return a.mustache(e.lookup("class"),"progressOuter")}},"\n            ",s.DIV({"class":function(){return a.mustache(e.lookup("class"),"progressInner")}},"\n                ",s.DIV({"class":function(){return a.mustache(e.lookup("class"),"progressBar")},role:"progressbar","aria-valuemin":"0","aria-valuemax":"100",style:function(){return a.mustache(e.lookup("progress"))}},"\n                    ",s.Raw("&nbsp;"),"\n                "),"\n                ",s.DIV({"class":"progress-label"},"\n                    ",o.View("lookup:infoLabel",function(){return a.makeRaw(a.mustache(e.lookup("infoLabel")))}),"\n                "),"\n            "),"\n        "),"\n\n        ",o._TemplateWith(function(){return{state:a.call(e.lookup("buttonState")),type:a.call(e.lookup("type")),uploadContext:a.call(e.lookup("uploadContext")),name:a.call(a.dot(e.lookup("."),"item","name"))}},function(){return a.include(e.lookupTemplate("buttons"))}),"\n    ")})}.call(this),function(){n.queueItem.helpers({"class":function(e){return l.UI[this.type][e]},infoLabel:function(){var e=this.uploadContext.queue[this.item.name].get();return e.running?l.formatProgress(this.item.name,e.progress,e.bitrate):this.item.name+'&nbsp;<span style="font-size: smaller; color: grey">'+u(this.item.size)+"</span>"},buttonState:function(){var e=this;return{idle:function(){return!e.uploadContext.queue[e.item.name].get().running||100===e.uploadContext.queue[e.item.name].get().progress},cancelled:function(){return e.uploadContext.queue[e.item.name].get().cancelled},waiting:function(){return 100!==e.uploadContext.queue[e.item.name].get().progress},removeFromQueue:function(){return!0}}},progress:function(){return"width:"+this.uploadContext.queue[this.item.name].get().progress+"%"}})}.call(this),function(){n.__checkName("upload_bootstrap"),n.upload_bootstrap=new n("Template.upload_bootstrap",function(){var e=this;return o._TemplateWith(function(){return{type:a.call("bootstrap"),formData:a.call(e.lookup("formData")),fileTypes:a.call(e.lookup("fileTypes")),multiple:a.call(e.lookup("multiple")),callbacks:a.call(e.lookup("callbacks")),autoStart:a.call(e.lookup("autoStart")),contentType:a.call(e.lookup("contentType"))}},function(){return a.include(e.lookupTemplate("upload"))})}),n.__checkName("upload_semanticUI"),n.upload_semanticUI=new n("Template.upload_semanticUI",function(){var e=this;return o._TemplateWith(function(){return{type:a.call("semanticUI"),formData:a.call(e.lookup("formData")),fileTypes:a.call(e.lookup("fileTypes")),multiple:a.call(e.lookup("multiple")),callbacks:a.call(e.lookup("callbacks")),autoStart:a.call(e.lookup("autoStart")),contentType:a.call(e.lookup("contentType"))}},function(){return a.include(e.lookupTemplate("upload"))})}),n.__checkName("upload"),n.upload=new n("Template.upload",function(){var e=this;return s.FORM({method:"POST",enctype:"multipart/form-data"},"\n\n        ",s.DIV({"class":"uploadPanel"},"\n            ",s.Raw("<!-- The fileinput-button span is used to style the file input field as button -->"),"\n\n            ",s.DIV({"class":function(){return a.mustache(e.lookup("class"),"upload")}},"\n                ",o.View("lookup:ut9n",function(){return a.mustache(e.lookup("ut9n"),"browse")}),s.Raw("&hellip;")," ",s.INPUT({type:"file","class":"jqUploadclass",multiple:function(){return a.mustache(e.lookup("multiple"))},"data-form-data":function(){return a.mustache(e.lookup("submitData"))},accept:function(){return a.mustache(e.lookup("fileTypes"))}}),"\n            "),"\n\n            ",s.DIV({"class":function(){return a.mustache(e.lookup("class"),"progressOuter")}},"\n                ",s.DIV({"class":function(){return a.mustache(e.lookup("class"),"progressInner")}},"\n                    ",s.DIV({"class":function(){return a.mustache(e.lookup("class"),"progressBar")},role:"progressbar","aria-valuemin":"0","aria-valuemax":"100",style:function(){return a.mustache(e.lookup("progress"))}},"\n                        ",s.Raw("&nbsp;"),"\n                    "),"\n                    ",s.DIV({"class":"progress-label"},"\n                        ",o.View("lookup:infoLabel",function(){return a.makeRaw(a.mustache(e.lookup("infoLabel")))}),"\n                    "),"\n                "),"\n            "),"\n\n            ",o._TemplateWith(function(){return{type:a.call(e.lookup("type")),state:a.call(e.lookup("buttonState")),uploadContext:a.call(e.lookup("uploadContext")),autoStart:a.call(e.lookup("autoStart"))}},function(){return a.include(e.lookupTemplate("buttons"))}),"\n        "),"\n        ",o.If(function(){return a.call(e.lookup("showQueue"))},function(){return["\n            ",s.DIV({"class":"panel panel-default",style:"margin-top: 1px; background: #efefef"},"\n                ",s.DIV({"class":"panel-body"},"\n                    ",o.Each(function(){return a.call(e.lookup("queueItems"))},function(){return["\n                        ",o._TemplateWith(function(){return{type:a.call(a.dot(e.lookup(".."),"type")),uploadContext:a.call(e.lookup("uploadContext")),
item:a.call(e.lookup("."))}},function(){return a.include(e.lookupTemplate("queueItem"))}),"\n                    "]}),"\n                "),"\n            "),"\n        "]}),"\n    ")})}.call(this),function(){n.registerHelper("ut9n",function(e){return l.localisation[e]}),n.upload.created=function(){l.init(this),this.data&&(this.autoStart=this.data.autoStart)},n.upload.helpers({"class":function(e){return l.UI[this.type][e]},uploadContext:function(){return n.instance()},submitData:function(){return this.formData?this.formData.contentType=this.contentType:this.formData={contentType:this.contentType},"string"==typeof this.formData?this.formData:JSON.stringify(this.formData)},infoLabel:function(){var e=n.instance(),t=e.globalInfo.get(),o=e.info.get();return e.info.get()?t.running?l.formatProgress(o.name,t.progress,t.bitrate):o.name+'&nbsp;<span style="font-size: smaller; color: #333">'+u(o.size)+"</span>":""},progress:function(){return"width:"+n.instance().globalInfo.get().progress+"%"},buttonState:function(){var e=n.instance();return{idle:function(){return!e.globalInfo.get().running},cancelled:function(){return e.globalInfo.get().cancelled},waiting:function(){return 100!==e.globalInfo.get().progress},removeFromQueue:function(){return!1}}},queueItems:function(){return n.instance().queueView.get()},showQueue:function(){return n.instance().queueView.get().length>1}}),n.upload.rendered=function(){l.render.call(this)}}.call(this),function(){n.__checkName("buttons"),n.buttons=new n("Template.buttons",function(){var e=this;return o.If(function(){return a.call(e.lookup("idle"))},function(){return["\n        ",o.If(function(){return a.call(e.lookup("cancelled"))},function(){return["\n            ",s.DIV({"class":function(){return a.mustache(e.lookup("class"),"cancelledButton")}},"\n                ",s.I({"class":function(){return a.mustache(e.lookup("class"),"cancelledButtonIcon")}}),"\n                ",s.SPAN(o.View("lookup:ut9n",function(){return a.mustache(e.lookup("ut9n"),"cancelled")})),"\n            "),"\n        "]},function(){return["\n            ",o.If(function(){return a.call(e.lookup("waiting"))},function(){return["\n                ",o.If(function(){return a.call(e.lookup("removeFromQueue"))},function(){return["\n                    ",s.DIV({type:"submit","class":function(){return a.mustache(e.lookup("class"),"removeButton")}},"\n                        ",s.I({"class":function(){return a.mustache(e.lookup("class"),"removeButtonIcon")}}),"\n                        ",s.SPAN(o.View("lookup:ut9n",function(){return a.mustache(e.lookup("ut9n"),"remove")})),"\n                    "),"\n                "]},function(){return["\n                    ",o.Unless(function(){return a.call(e.lookup("autoStart"))},function(){return["\n                        ",s.DIV({type:"submit","class":function(){return a.mustache(e.lookup("class"),"startButton")}},"\n                            ",s.I({"class":function(){return a.mustache(e.lookup("class"),"startButtonIcon")}}),"\n                            ",s.SPAN(o.View("lookup:ut9n",function(){return a.mustache(e.lookup("ut9n"),"upload")})),"\n                        "),"\n                    "]}),"\n                "]}),"\n            "]},function(){return["\n                ",s.DIV({"class":function(){return a.mustache(e.lookup("class"),"doneButton")}},"\n                    ",s.I({"class":function(){return a.mustache(e.lookup("class"),"doneButtonIcon")}}),"\n                    ",o.View("lookup:ut9n",function(){return a.mustache(e.lookup("ut9n"),"done")}),"\n                "),"\n            "]}),"\n        "]}),"\n    "]},function(){return["\n        ",s.DIV({"class":function(){return a.mustache(e.lookup("class"),"cancelButton")}},"\n            ",s.I({"class":function(){return a.mustache(e.lookup("class"),"cancelButtonIcon")}}),"\n            ",s.SPAN(o.View("lookup:ut9n",function(){return a.mustache(e.lookup("ut9n"),"cancel")})),"\n        "),"\n    "]})})}.call(this),function(){n.buttons.helpers({"class":function(e){return l.UI[this.type][e]},idle:function(){return this.state.idle()},cancelled:function(){return this.state.cancelled()},waiting:function(){return this.state.waiting()},removeFromQueue:function(){return this.state.removeFromQueue()}}),n.buttons.events({"click .cancel":function(e){l.cancelUpload.call(this.uploadContext,e,this.name)},"click .start":function(e){l.startUpload.call(this.uploadContext,e,this.name)},"click .remove":function(e){l.removeFromQueue.call(this.uploadContext,e,this.name)},"click .done":function(e){l.reset.call(this.uploadContext,e)}})}.call(this),function(){n.__checkName("dropzone"),n.dropzone=new n("Template.dropzone",function(){var e=this;return s.FORM({method:"POST",enctype:"multipart/form-data"},"\n        ",s.INPUT({type:"file","class":"jqUploadclass",multiple:"true","data-content-category":function(){return a.mustache(e.lookup("contentType"))},"data-form-data":function(){return a.mustache(e.lookup("submitData"))},accept:function(){return a.mustache(e.lookup("fileTypes"))},style:"display: none"}),"\n        ",s.DIV({"class":"jqDropZone fade"},o.View("lookup:infoLabel",function(){return a.makeRaw(a.mustache(e.lookup("infoLabel")))})),"\n    ")})}.call(this),function(){n.dropzone.created=function(){n.instance().autoStart=!0,l.init(this)},n.dropzone.helpers({infoLabel:function(){var e=n.instance().globalInfo.get();return 0==e.progress||100==e.progress?l.localisation.dropFiles:e.progress+"%"},submitData:function(){return this.formData?this.formData.contentType=this.contentType:this.formData={contentType:this.contentType},"string"==typeof this.formData?this.formData:JSON.stringify(this.formData)}}),n.dropzone.rendered=function(){l.render.call(this),$(document).bind("dragover",function(e){var t=$(".jqDropZone"),n,o=window.dropZoneTimeout;o?clearTimeout(o):t.addClass("in");var i=!1,r=e.target;do{if($(r).hasClass("jqDropZone")){i=!0,n=$(r);break}r=r.parentNode}while(null!=r);t.removeClass("in hover"),i&&n.addClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,t.removeClass("in hover")},100)})}}.call(this),function(){l={logLevels:{debug:0,error:1},logLevel:1,log:function(e,t){e>=l.logLevel&&console.log(t)},localisation:{browse:"Browse",cancelled:"Cancelled",remove:"Remove",upload:"Upload",done:"Done",cancel:"Cancel",dropFiles:"Drop files here"},UI:{bootstrap:{upload:"btn btn-primary btn-file upload-control",progressOuter:"form-control upload-control",progressInner:"progressInner",progressBar:"progress-bar progress-bar-success progress-bar-striped",removeButton:"btn btn-default upload-control remove",removeButtonIcon:"glyphicon glyphicon-remove",startButton:"btn btn-info upload-control start",startButtonIcon:"glyphicon glyphicon-upload",doneButton:"btn btn-default upload-control done",doneButtonIcon:"glyphicon glyphicon-ok",cancelButton:"btn btn-danger upload-control cancel",cancelButtonIcon:"glyphicon glyphicon-stop",cancelledButton:"btn btn-warning upload-control",cancelledButtonIcon:"glyphicon glyphicon-cross"},semanticUI:{upload:"ui icon button btn-file leftButton upload-control",progressOuter:"progressOuter",progressInner:"semantic progressInner",progressBar:"bar progress-bar",removeButton:"ui red button upload-control remove rightButton",removeButtonIcon:"trash icon",startButton:"ui button primary upload-control start rightButton",startButtonIcon:"upload icon",doneButton:"ui green button upload-control rightButton done",doneButtonIcon:"icon thumbs up",cancelButton:"ui yellow button upload-control cancel rightButton",cancelButtonIcon:"icon stop",cancelledButton:"ui yellow button upload-control rightButton"}},uploadUrl:"/upload",createName:function(e){if(1==e.queue.length){var t=e.queue[0];e.info.set(t)}else{var t={name:e.queue.length+" files",size:e.queue.size};e.info.set(t)}},startUpload:function(e,t){if(e&&e.preventDefault(),0!=this.queue.length){var n=this;$.each(this.queue,function(e,o){var i=o.data;return t&&i.files[0].name!==t?!0:void(i.jqXHR=i.submit().done(function(e,t,i){n.queue.splice(n.queue.indexOf(o),1),l.log(l.logLevels.debug,"data.sumbit.done: textStatus= "+t),l.status&&l.status(!1,e,t,i)}).fail(function(e,t,r){n.queue.splice(n.queue.indexOf(o),1),n.info.set("abort"===e.statusText?{name:"Aborted",size:0}:{name:"Failed: "+e.responseText+" "+e.status+" "+e.statusText,size:0}),l.status&&l.status(!0,i,t,e),l.log(l.logLevels.debug,"data.sumbit.fail: "+e.responseText+" "+e.status+" "+e.statusText)}).always(function(e,t,n){l.log(l.logLevels.debug,"data.sumbit.always:  textStatus= "+t)}))})}},formatProgress:function(e,t,n){return t+"%&nbsp;of&nbsp;"+e+"&nbsp;<span style='font-size:smaller'>@&nbsp;"+u(n)+"&nbsp;/&nbsp;sec</span>"},removeFromQueue:function(e,t){e.preventDefault();var n=this;$.each(this.queue,function(e,o){return o.name===t?(n.queue.splice(e,1),!1):void 0}),this.queueView.set(this.queue),l.createName(this)},reset:function(e){e.preventDefault(),this.globalInfo.set({running:!1,cancelled:!1,progress:0,bitrate:0}),this.info.set("")},cancelUpload:function(e,t){e.preventDefault();var n=this;$.each(this.queue,function(e,o){return t&&o.name!==t?!0:void(100!==n.queue[o.name].get().progress&&(o.data.jqXHR.abort(),n.queue[o.name].set({running:!1,cancelled:!0,progress:0,bitrate:0})))}),t||this.globalInfo.set({running:!1,cancelled:!0,progress:0,bitrate:0})},init:function(e){e.queueView=new t([]),e.queue=[],e.info=new t,e.globalInfo=new t({running:!1,progress:0,bitrate:0})},render:function(){var e=this;e.progressBar=this.$(".progress-bar"),e.progressLabel=this.$(".progress-label"),e.uploadControl=this.$(".jqUploadclass"),e.dropZone=this.$(".jqDropZone");var n=this.data;this.find("form").uploadContext=e,e.uploadControl.fileupload({url:l.uploadUrl,dataType:"json",dropZone:e.dropZone,add:function(o,i){l.log(l.logLevels.debug,"render.add "),(null==n||null==n.callbacks||(null!=n.callbacks.formData&&(i.formData=n.callbacks.formData()),null==n.callbacks.validate||n.callbacks.validate(i.files)))&&(null!=n&&n.multiple||(e.queue=[],e.queueView.set([])),$.each(i.files,function(n,o){var r=o;r.data=i,e.queue[o.name]=new t({running:!1,progress:0}),e.queue.push(r),e.queue.size+=parseInt(o.size)}),l.createName(e),e.queueView.set(e.queue),e.autoStart&&l.startUpload.call(e))},done:function(t,o){l.log(l.logLevels.debug,"render.done "),e.globalInfo.set({running:!1,progress:100}),$.each(o.result.files,function(t,o){l.finished(t,o,e),null!=n&&null!=n.callbacks&&null!=n.callbacks.finished&&n.callbacks.finished(t,o,e)})},fail:function(e,t){l.log(l.logLevels.debug,"render.fail ")},progress:function(t,n){var o=e.queue[n.files[0].name];o&&o.set({running:!0,progress:parseInt(n.loaded/n.total*100,10),bitrate:n.bitrate})},progressall:function(t,n){e.globalInfo.set({running:!0,progress:parseInt(n.loaded/n.total*100,10),bitrate:n.bitrate})},drop:function(e,t){$.each(t.files,function(e,t){l.log(l.logLevels.debug,"render.drop file: "+t.name)})},change:function(t,n){e.queue=[],e.queue.size=0,e.progressBar.css("width","0%"),e.globalInfo.set({running:!1,progress:0}),$.each(n.files,function(e,t){l.log(l.logLevels.debug,"render.change file: "+t.name)})}}).prop("disabled",null!=$.support&&null!=$.support.fileInput?!$.support.fileInput:!1).parent().addClass(null==$.support||null==$.support.fileInput||$.support.fileInput?void 0:"disabled")},finished:function(){}},u=function(e){if(0==e)return"0 Byte";var t=1e3,n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(t));return(e/Math.pow(t,o)).toPrecision(3)+"&nbsp;"+n[o]}}.call(this),"undefined"==typeof Package&&(Package={}),Package["tomi:upload-jquery"]={Uploader:l}}();

!function(){var e=Package.meteor.Meteor;(function(){}).call(this),"undefined"==typeof Package&&(Package={}),Package["tomi:upload-server"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.jquery.$,n=Package.jquery.jQuery;(function(){(function(){!function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return g({type:T.error,iconClass:m().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=m()),v=e("#"+t.containerId),v.length?v:(n&&(v=l(t)),v)}function i(e,t,n){return g({type:T.info,iconClass:m().iconClasses.info,message:e,optionsOverride:n,title:t})}function o(e){w=e}function s(e,t,n){return g({type:T.success,iconClass:m().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return g({type:T.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e,t){var i=m();v||n(i),d(e,i,t)||u(i)}function c(t){var i=m();return v||n(i),t&&0===e(":focus",t).length?void h(t):void(v.children().length&&v.remove())}function u(t){for(var n=v.children(),i=n.length-1;i>=0;i--)d(e(n[i]),t)}function d(t,n,i){var o=i&&i.force?i.force:!1;return t&&(o||0===e(":focus",t).length)?(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t)}}),!0):!1}function l(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function f(e){w&&w(e)}function g(t){function i(e){return null==e&&(e=""),new String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(){r(),u(),d(),l(),p(),c()}function s(){H.hover(b,T),!y.onclick&&y.tapToDismiss&&H.click(w),y.closeButton&&B&&B.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),w(!0)}),y.onclick&&H.click(function(e){y.onclick(e),w()})}function a(){H.hide(),H[y.showMethod]({duration:y.showDuration,easing:y.showEasing,complete:y.onShown}),y.timeOut>0&&(E=setTimeout(w,y.timeOut),P.maxHideTime=parseFloat(y.timeOut),P.hideEta=(new Date).getTime()+P.maxHideTime,y.progressBar&&(P.intervalId=setInterval(D,10)))}function r(){t.iconClass&&H.addClass(y.toastClass).addClass(x)}function c(){y.newestOnTop?v.prepend(H):v.append(H)}function u(){t.title&&(k.append(y.escapeHtml?i(t.title):t.title).addClass(y.titleClass),H.append(k))}function d(){t.message&&(M.append(y.escapeHtml?i(t.message):t.message).addClass(y.messageClass),H.append(M))}function l(){y.closeButton&&(B.addClass("toast-close-button").attr("role","button"),H.prepend(B))}function p(){y.progressBar&&(I.addClass("toast-progress"),H.prepend(I))}function g(e,t){if(e.preventDuplicates){if(t.message===O)return!0;O=t.message}return!1}function w(t){var n=t&&y.closeMethod!==!1?y.closeMethod:y.hideMethod,i=t&&y.closeDuration!==!1?y.closeDuration:y.hideDuration,o=t&&y.closeEasing!==!1?y.closeEasing:y.hideEasing;return!e(":focus",H).length||t?(clearTimeout(P.intervalId),H[n]({duration:i,easing:o,complete:function(){h(H),y.onHidden&&"hidden"!==j.state&&y.onHidden(),j.state="hidden",j.endTime=new Date,f(j)}})):void 0}function T(){(y.timeOut>0||y.extendedTimeOut>0)&&(E=setTimeout(w,y.extendedTimeOut),P.maxHideTime=parseFloat(y.extendedTimeOut),P.hideEta=(new Date).getTime()+P.maxHideTime)}function b(){clearTimeout(E),P.hideEta=0,H.stop(!0,!0)[y.showMethod]({duration:y.showDuration,easing:y.showEasing})}function D(){var e=(P.hideEta-(new Date).getTime())/P.maxHideTime*100;I.width(e+"%")}var y=m(),x=t.iconClass||y.iconClass;if("undefined"!=typeof t.optionsOverride&&(y=e.extend(y,t.optionsOverride),x=t.optionsOverride.iconClass||x),!g(y,t)){C++,v=n(y,!0);var E=null,H=e("<div/>"),k=e("<div/>"),M=e("<div/>"),I=e("<div/>"),B=e(y.closeHtml),P={intervalId:null,hideEta:null,maxHideTime:null},j={toastId:C,state:"visible",startTime:new Date,options:y,map:t};return o(),a(),s(),f(j),y.debug&&console&&console.log(j),H}}function m(){return e.extend({},p(),b.options)}function h(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),O=void 0))}var v,w,C=0,T={error:"error",info:"info",success:"success",warning:"warning"},b={clear:r,remove:c,error:t,getContainer:n,info:i,options:{},subscribe:o,success:s,version:"2.1.2",warning:a},O;return b}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)})}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package["chrismbeckett:toastr"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.underscore._,n;(function(){n={_isCssLoaded:function(){return 0===document.styleSheets.length?!0:t.find(document.styleSheets,function(e){return e.cssText&&!e.cssRules?!e.cssText.match(/meteor-css-not-found-error/):!t.find(e.cssRules,function(e){return".meteor-css-not-found-error"===e.selectorText})})}}}).call(this),"undefined"==typeof Package&&(Package={}),Package.webapp={WebApp:n}}();

!function(){var e=Package.meteor.Meteor,a=Package["ddp-client"].DDP,a,t;"undefined"==typeof Package&&(Package={}),Package.livedata={DDP:a,LivedataTest:t}}();

!function(){var e=Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["hot-code-push"]={}}();

!function(){var e=Package.meteor.Meteor,n;(function(){var a=0,r=!1;n={hold:function(){if(!e.isCordova)return{release:function(){}};if(r)throw new Error("Can't show launch screen once it's hidden");a++;var n=!1,t=function(){e.isCordova&&(n||(a--,0===a&&"undefined"!=typeof navigator&&navigator.splashscreen&&(r=!0,navigator.splashscreen.hide())))};return{release:t}}}}).call(this),function(){var a=n.hold(),r=Package.templating&&Package.templating.Template;e.startup(function(){r?Package["iron:router"]?Package["iron:router"].Router.onAfterAction(function(){a.release()}):(r.body.onRendered(function(){a.release()}),setTimeout(function(){a.release()},6e3)):a.release()})}.call(this),"undefined"==typeof Package&&(Package={}),Package["launch-screen"]={LaunchScreen:n}}();

!function(){var e=Package.meteor.Meteor,t=Package.tracker.Tracker,n=Package.tracker.Deps,a=Package.retry.Retry,r=Package["ddp-client"].DDP,o=Package.mongo.Mongo,i=Package.underscore._,s,c;(function(){var t=__meteor_runtime_config__.autoupdateVersion||"unknown",n=__meteor_runtime_config__.autoupdateVersionRefreshable||"unknown";s=new o.Collection("meteor_autoupdate_clientVersions"),c={},c.newClientAvailable=function(){return!!s.findOne({_id:"version",version:{$ne:t}})||!!s.findOne({_id:"version-refreshable",version:{$ne:n}})},c._ClientVersions=s;var r=!1,u=new a({minCount:0,baseTimeout:3e4}),l=0;c._retrySubscription=function(){e.subscribe("meteor_autoupdate_clientVersions",{onError:function(t){e._debug("autoupdate subscription failed:",t),l++,u.retryLater(l,function(){c._retrySubscription()})},onReady:function(){if(Package.reload)var a=function(a){var s=this;if("version-refreshable"===a._id&&a.version!==n){n=a.version;var c=a.assets&&a.assets.allCss||[],u=[];i.each(document.getElementsByTagName("link"),function(e){"__meteor-css__"===e.className&&u.push(e)});var l=function(t,n){var a=i.once(n);if(t.onload=function(){r=!0,a()},!r)var o=e.setInterval(function(){t.sheet&&(a(),e.clearInterval(o))},50)},d=i.after(c.length,function(){i.each(u,function(e){e.parentNode.removeChild(e)})}),_=function(t){document.getElementsByTagName("head").item(0).appendChild(t),l(t,function(){e.setTimeout(d,200)})};0!==c.length?i.each(c,function(t){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("class","__meteor-css__"),n.setAttribute("href",e._relativeToSiteRootUrl(t.url)),_(n)}):d()}else"version"===a._id&&a.version!==t&&(o&&o.stop(),Package.reload&&Package.reload.Reload._reload())},o=s.find().observe({added:a,changed:a})}})},c._retrySubscription()}).call(this),"undefined"==typeof Package&&(Package={}),Package.autoupdate={Autoupdate:c}}();

_=Package.underscore._,Router=Package["iron:router"].Router,RouteController=Package["iron:router"].RouteController,gm=Package["cfs:graphicsmagick"].gm,$=Package.jquery.$,jQuery=Package.jquery.jQuery,livestamp=Package["copleykj:livestamp"].livestamp,Roles=Package["alanning:roles"].Roles,CollectionHooks=Package["matb33:collection-hooks"].CollectionHooks,T9n=Package["softwarerero:accounts-t9n"].T9n,Mongo=Package.mongo.Mongo,Session=Package.session.Session,Tracker=Package.tracker.Tracker,Deps=Package.tracker.Deps,Log=Package.logging.Log,Reload=Package.reload.Reload,Random=Package.random.Random,EJSON=Package.ejson.EJSON,Spacebars=Package.spacebars.Spacebars,check=Package.check.check,Match=Package.check.Match,Cookie=Package["chuangbo:cookie"].Cookie,FastRender=Package["meteorhacks:fast-render"].FastRender,__init_fast_render=Package["meteorhacks:fast-render"].__init_fast_render,PersistentSession=Package["u2622:persistent-session"].PersistentSession,UserStatus=Package["mizzao:user-status"].UserStatus,HTTP=Package.http.HTTP,Injected=Package["meteorhacks:inject-initial"].Injected,Inject=Package["meteorhacks:inject-initial"].Inject,ReactiveVar=Package["reactive-var"].ReactiveVar,TAPi18next=Package["tap:i18n"].TAPi18next,TAPi18n=Package["tap:i18n"].TAPi18n,ECMAScript=Package.ecmascript.ECMAScript,latinize=Package["fds:latinize"].latinize,Autolinker=Package["konecty:autolinker"].Autolinker,Uploader=Package["tomi:upload-jquery"].Uploader,Iron=Package["iron:core"].Iron,Accounts=Package["accounts-base"].Accounts,AccountsClient=Package["accounts-base"].AccountsClient,moment=Package["momentjs:moment"].moment,Meteor=Package.meteor.Meteor,WebApp=Package.webapp.WebApp,DDP=Package["ddp-client"].DDP,LaunchScreen=Package["launch-screen"].LaunchScreen,Blaze=Package.ui.Blaze,UI=Package.ui.UI,Handlebars=Package.ui.Handlebars,Template=Package.templating.Template,babelHelpers=Package["babel-runtime"].babelHelpers,Symbol=Package["ecmascript-runtime"].Symbol,Map=Package["ecmascript-runtime"].Map,Set=Package["ecmascript-runtime"].Set,Promise=Package.promise.Promise,Autoupdate=Package.autoupdate.Autoupdate,HTML=Package.htmljs.HTML;

(function(){Template.__checkName("home"),Template.home=new Template("Template.home",function(){var e=this;return[Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n		",HTML.DIV({"class":"float-right"},"\n			",HTML.A({href:"#","class":"home--submit"},"\n				",HTML.I({"class":"fas fa-plus"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"home--submit-button")}),"\n			"),"\n		"),"\n	"]}),"\n	",HTML.H5({"class":"mb-4"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"home--title")})),"\n	",Blaze.Unless(function(){return Spacebars.call(Spacebars.dot(e.lookup("space"),"permissions","public"))},function(){return["\n		",Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n			",Blaze.If(function(){return Spacebars.call(e.lookup("codePanel"))},function(){return["\n				",HTML.DIV({"class":"alert alert-warning alert-dismissible fade show",role:"alert"},Blaze.View("lookup:_",function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("_"),"home--space-code-message"))})," ",HTML.SPAN({style:"font-size:1.1em","class":"badge badge-secondary"},Blaze.View("lookup:space.spaceCode",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("space"),"spaceCode"))})),"\n			  		",HTML.BUTTON({type:"button","class":"close home--hide-code-panel"},"\n			    		",HTML.SPAN({"aria-hidden":"true"},HTML.CharRef({html:"&times;",str:""})),"\n			  		"),"\n				"),"\n			"]}),"\n		"]}),"\n	"]}),"\n	",Blaze.Each(function(){return Spacebars.call(e.lookup("homePosts"))},function(){return["\n		",Spacebars.include(e.lookupTemplate("homePost")),"\n	"]}),"\n	",Spacebars.include(e.lookupTemplate("homePostSubmit")),"\n	",Spacebars.include(e.lookupTemplate("homePostEdit")),"\n	",Spacebars.include(e.lookupTemplate("homePostDelete"))]})}).call(this);

(function(){Template.__checkName("homePost"),Template.homePost=new Template("Template.homePost",function(){var e=this;return HTML.DIV({"class":"card mb-4"},"\n		",HTML.DIV({"class":"card-header d-flex"},Blaze.View("lookup:title",function(){return Spacebars.mustache(e.lookup("title"))}),"\n			",Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n				",HTML.SPAN({"class":"align-baseline ml-auto",id:"dropdownMenuLink","data-toggle":"dropdown"},HTML.I({"class":"fa fa-ellipsis-v fa-fw btn-icon align-baseline"})),"\n				",HTML.DIV({"class":"dropdown-menu","aria-labelledby":"dropdownMenuLink"},"\n					",HTML.A({"class":"dropdown-item home-post--order-up",href:"#"},HTML.I({"class":"fas fa-arrow-up"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"home-post--order-up")})),"\n					",HTML.A({"class":"dropdown-item home-post--order-down",href:"#"},HTML.I({"class":"fas fa-arrow-down"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"home-post--order-down")})),"\n\n					",HTML.A({"class":"dropdown-item home-post--edit",href:"#"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post--edit")})),"\n					",HTML.A({"class":"dropdown-item text-danger home-post--delete",href:"#"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post--delete")})),"\n				"),"\n			"]}),"\n		"),"\n		",HTML.DIV({"class":"card-body"},"\n			",HTML.P({"class":"card-text home-post--text"},Blaze.View("lookup:body",function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("body")))})),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("homePostDelete"),Template.homePostDelete=new Template("Template.homePostDelete",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"homePostDelete",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n		",HTML.DIV({"class":"modal-dialog",role:"document"},"\n			",HTML.DIV({"class":"modal-content"},"\n				",HTML.DIV({"class":"modal-header"},"\n					",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"home-post-delete--title")})),"\n					",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>'),"\n				"),"\n				",HTML.DIV({"class":"modal-body"},"\n					",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"home-post-delete--confirm")}),"\n				"),"\n				",HTML.DIV({"class":"modal-footer"},"\n					",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-danger home-post-delete--confirm"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--delete")})),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("homePostEdit"),Template.homePostEdit=new Template("Template.homePostEdit",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"homePostEdit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n  ",HTML.DIV({"class":"modal-dialog",role:"document"},"\n    ",HTML.DIV({"class":"modal-content"},"\n      ",HTML.DIV({"class":"modal-header"},"\n        ",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"home-post-edit--title")})),"\n        ",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>'),"\n      "),"\n      ",HTML.DIV({"class":"modal-body"},"\n      	",HTML.FORM({name:"home-post-edit--form",id:"home-post-edit--form"},"\n\n       	",HTML.DIV({"class":"form-group"},"\n       		    ",HTML.INPUT({type:"text","class":"form-control",name:"title",id:"title","aria-describedby":"title",placeholder:"Title of the section",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("post"),"title"))}})),"\n       		           	",HTML.DIV({"class":"form-group"},"\n\n				",HTML.TEXTAREA({name:"body",id:"body-edit-tinymce","class":"form-control home-post-edit--textarea",placeholder:"","aria-label":"","aria-describedby":"basic-addon2",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("post"),"body"))}}),"\n				"),"\n			"),"\n      "),"\n      ",HTML.DIV({"class":"modal-footer"},"\n        ",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n        ",HTML.BUTTON({type:"button","class":"btn btn-primary home-post-edit--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--save")})),"\n      "),"\n    "),"\n  "),"\n")})}).call(this);

(function(){Template.__checkName("homePostSubmit"),Template.homePostSubmit=new Template("Template.homePostSubmit",function(){var a=this;return HTML.DIV({"class":"modal fade",id:"homePostSubmit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n  ",HTML.DIV({"class":"modal-dialog",role:"document"},"\n    ",HTML.DIV({"class":"modal-content"},"\n      ",HTML.DIV({"class":"modal-header"},"\n        ",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(a.lookup("_"),"home-post-submit--title")})),"\n        ",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>'),"\n      "),"\n      ",HTML.DIV({"class":"modal-body"},"\n      	",HTML.FORM({name:"home-post-submit--form",id:"home-post-submit--form"},"\n\n       	",HTML.DIV({"class":"form-group"},"\n       		    ",HTML.INPUT({type:"text","class":"form-control",name:"title",id:"title","aria-describedby":"title",placeholder:function(){return Spacebars.mustache(a.lookup("_"),"home-post-submit--placeholder")}})),"\n       		           	",HTML.DIV({"class":"form-group"},"\n\n				",HTML.TEXTAREA({name:"body",id:"body-submit-tinymce","class":"form-control home-post-submit--textarea",placeholder:"","aria-label":"","aria-describedby":"basic-addon2"}),"\n				"),"\n			"),"\n      "),"\n      ",HTML.DIV({"class":"modal-footer"},"\n        ",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(a.lookup("_"),"modal--close")})),"\n        ",HTML.BUTTON({type:"button","class":"btn btn-primary home-post-submit--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(a.lookup("_"),"modal--submit")})),"\n      "),"\n    "),"\n  "),"\n")})}).call(this);

(function(){Template.__checkName("lessons"),Template.lessons=new Template("Template.lessons",function(){var e=this;return[Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n		",HTML.DIV({"class":"float-right"},"\n			",HTML.A({href:"#","class":"","data-toggle":"modal","data-target":"#lessonsPostSubmit"},"\n				",HTML.I({"class":"fas fa-plus"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"lessons--submit-button")}),"\n			"),"\n		"),"\n	"]}),"\n	",HTML.H5({"class":""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"lessons--title")})),"\n	",HTML.DIV({"class":"text-secondary small mb-4"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"lessons--subtitle")})),"\n	",Blaze.Each(function(){return Spacebars.call(e.lookup("lessonsPosts"))},function(){return["\n		",Spacebars.include(e.lookupTemplate("lessonsPost")),"\n	"]}),"\n	",Spacebars.include(e.lookupTemplate("lessonsPostSubmit")),"\n	",Spacebars.include(e.lookupTemplate("lessonsPostEdit")),"\n	",Spacebars.include(e.lookupTemplate("lessonsPostDelete"))]})}).call(this);

(function(){Template.__checkName("lessonsFrame"),Template.lessonsFrame=new Template("Template.lessonsFrame",function(){var e=this;return[Spacebars.include(e.lookupTemplate("backHeader")),"\n	 ",HTML.IFRAME({seamless:"seamless",style:"margin-top:-52px;padding-top:52px;border:none;width:100%;height:100%",src:function(){return Spacebars.mustache(e.lookup("lessonURL"))}})]})}).call(this);

(function(){Template.__checkName("lessonsPost"),Template.lessonsPost=new Template("Template.lessonsPost",function(){var e=this;return HTML.DIV({"class":"card mb-4"},"\n		",HTML.DIV({"class":"card-header d-flex"},Blaze.View("lookup:title",function(){return Spacebars.mustache(e.lookup("title"))}),"\n			",Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n				",HTML.SPAN({"class":"align-baseline ml-auto",id:"dropdownMenuLink","data-toggle":"dropdown"},HTML.I({"class":"fa fa-ellipsis-v fa-fw btn-icon align-baseline"})),"\n				",HTML.DIV({"class":"dropdown-menu","aria-labelledby":"dropdownMenuLink"},"\n					",HTML.A({"class":"dropdown-item lessons-post--edit",href:"#"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post--edit")})),"\n					",HTML.A({"class":"dropdown-item text-danger lessons-post--delete",href:"#"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post--delete")})),"\n				"),"\n			"]}),"\n		"),"\n		",HTML.DIV({"class":"card-body"},"\n			",HTML.P({"class":"card-text post-item--text2"},Blaze.View("lookup:body",function(){return Spacebars.mustache(e.lookup("body"))})),"\n			",HTML.A({role:"button",href:function(){return Spacebars.mustache(e.lookup("pathFor"),"lessonsFrame",Spacebars.kw({_id:e.lookup("_id")}))},"class":"btn btn-primary text-white"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"lessons-post--start-lesson")})),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("lessonsPostDelete"),Template.lessonsPostDelete=new Template("Template.lessonsPostDelete",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"lessonsPostDelete",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n		",HTML.DIV({"class":"modal-dialog",role:"document"},"\n			",HTML.DIV({"class":"modal-content"},"\n				",HTML.DIV({"class":"modal-header"},"\n					",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"lessons-post-delete--title")})),"\n					",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>'),"\n				"),"\n				",HTML.DIV({"class":"modal-body"},"\n					",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"lessons-post-delete--confirm")}),"\n				"),"\n				",HTML.DIV({"class":"modal-footer"},"\n					",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-danger lessons-post-delete--confirm"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--delete")})),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("lessonsPostEdit"),Template.lessonsPostEdit=new Template("Template.lessonsPostEdit",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"lessonsPostEdit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n  ",HTML.DIV({"class":"modal-dialog",role:"document"},"\n    ",HTML.DIV({"class":"modal-content"},"\n      ",HTML.DIV({"class":"modal-header"},"\n        ",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"lessons-post-edit--title")})),"\n        ",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>'),"\n      "),"\n      ",HTML.DIV({"class":"modal-body"},"\n        ",HTML.FORM({name:"lessons-post-edit--form",id:"lessons-post-edit--form"},"\n                ",HTML.DIV({"class":"form-group"},"\n              ",HTML.INPUT({type:"text","class":"form-control",name:"title",id:"title","aria-describedby":"title",placeholder:"Title of the lesson",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("post"),"title"))}})),"\n          ",HTML.DIV({"class":"form-group"},"\n        ",HTML.TEXTAREA({name:"body",id:"body","class":"form-control lessons-post-edit--textarea",placeholder:"","aria-label":"","aria-describedby":"basic-addon2",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("post"),"body"))}}),"\n      "),"\n      "),"\n      ",Blaze.Unless(function(){return Spacebars.call(e.lookup("lessonUploaded"))},function(){return["\n            ",Blaze._TemplateWith(function(){return{formData:Spacebars.call(e.lookup("formData")),autoStart:Spacebars.call(!0)}},function(){return Spacebars.include(e.lookupTemplate("lessonsUpload"))}),"\n        "]}),"\n        ",Blaze.If(function(){return Spacebars.call(e.lookup("lessonUploaded"))},function(){return["\n          ",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("lessonUploaded"),"error"))},function(){return["\n            ",HTML.DIV({"class":""},HTML.SPAN({"class":"text-danger"},Blaze.View("lookup:lessonUploaded.error",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("lessonUploaded"),"error"))}))," (",HTML.A({href:"#","class":"lessons-post-submit--retry"},"retry"),")"),"\n          "]},function(){return["\n            ",HTML.DIV({"class":"p-2"},"\n              ",HTML.I({"class":"fa fa-file-o","aria-hidden":"true"})," ",Blaze.View("lookup:lessonUploaded.fileName",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("lessonUploaded"),"fileName"))}),"\n              ",HTML.A({href:"#","class":"post-submit--button-delete-file"},"\n                ",HTML.I({"class":"fa fa-trash","aria-hidden":"true"}),"\n              "),"\n            "),"\n          "]}),"\n        "]}),"\n      "),"\n      ",HTML.DIV({"class":"modal-footer"},"\n        ",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n        ",HTML.BUTTON({type:"button","class":"btn btn-primary lessons-post-edit--submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--save")})),"\n      "),"\n    "),"\n  "),"\n")})}).call(this);

(function(){Template.__checkName("lessonsPostSubmit"),Template.lessonsPostSubmit=new Template("Template.lessonsPostSubmit",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"lessonsPostSubmit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n  ",HTML.DIV({"class":"modal-dialog",role:"document"},"\n    ",HTML.DIV({"class":"modal-content"},"\n      ",HTML.DIV({"class":"modal-header"},"\n        ",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"lessons-post-submit--title")})),"\n        ",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>'),"\n      "),"\n      ",HTML.DIV({"class":"modal-body"},"\n        ",HTML.FORM({name:"lessons-post-submit--form","class":"lessons-post-submit--form",id:"lessons-post-submit--form"},"\n        	",HTML.DIV({"class":"form-group"},"\n              ",HTML.INPUT({type:"text","class":"form-control",name:"title",id:"title","aria-describedby":"title",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"lessons-post-submit--title-placeholder")}}),"\n          	"),"\n            ",HTML.DIV({"class":"form-group"},"\n        		",HTML.TEXTAREA({name:"body",id:"body","class":"form-control lessons-post-submit--textarea",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"lessons-post-submit--description-placeholder")},"aria-label":"","aria-describedby":"basic-addon2"}),"\n        	"),"\n      	"),"\n      	",HTML.DIV({"class":"text-center"},"\n          ",HTML.DIV({"class":"small text-secondary mb-2"},Blaze.View("lookup:_",function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("_"),"lessons-post-submit--help"))})),"\n	      ",Blaze.Unless(function(){return Spacebars.call(e.lookup("lessonUploaded"))},function(){return["\n            ",Blaze._TemplateWith(function(){return{formData:Spacebars.call(e.lookup("formData")),autoStart:Spacebars.call(!0)}},function(){return Spacebars.include(e.lookupTemplate("lessonsUpload"))}),"\n	        "]}),"\n	    "),"\n	        ",Blaze.If(function(){return Spacebars.call(e.lookup("lessonUploaded"))},function(){return["\n            ",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("lessonUploaded"),"error"))},function(){return["\n                  ",HTML.DIV({"class":""},HTML.SPAN({"class":"text-danger"},Blaze.View("lookup:lessonUploaded.error",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("lessonUploaded"),"error"))}))," (",HTML.A({href:"#","class":"lessons-post-submit--retry"},"retry"),")"),"\n            "]},function(){return["\n              ",HTML.DIV({"class":"p-2"},"\n                ",HTML.I({"class":"fa fa-file-o","aria-hidden":"true"})," ",Blaze.View("lookup:lessonUploaded.fileName",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("lessonUploaded"),"fileName"))}),"\n                ",HTML.A({href:"#","class":"post-submit--button-delete-file"},"\n                  ",HTML.I({"class":"fa fa-trash","aria-hidden":"true"}),"\n                "),"\n              "),"\n            "]}),"\n        "]}),"\n      "),"\n      ",HTML.DIV({"class":"modal-footer"},"\n        ",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n        ",HTML.BUTTON({type:"button","class":"btn btn-primary lessons-post-submit--button-submit",disabled:""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--submit")})),"\n      "),"\n    "),"\n  "),"\n")})}).call(this);

(function(){Template.__checkName("lessonsUpload"),Template.lessonsUpload=new Template("Template.lessonsUpload",function(){var a=this;return HTML.FORM({method:"POST",enctype:"multipart/form-data"},"\n		",Blaze.Unless(function(){return Spacebars.call(a.lookup("infoLabel"))},function(){return["\n			",HTML.LABEL({"class":"text-center"},"\n				",HTML.INPUT({type:"file",accept:"*/*","class":"file-upload--input-file jqUploadclass","data-form-data":function(){return Spacebars.mustache(a.lookup("submitData"))}}),"\n				",HTML.SPAN({"class":"btn btn-primary text-center"},Blaze.View("lookup:_",function(){return Spacebars.mustache(a.lookup("_"),"lessons-upload--button")})," ",HTML.I({"class":"fas fa-upload"})),"\n			"),"\n		"]}),"\n		",Spacebars.With(function(){return Spacebars.call(a.lookup("infoLabel"))},function(){return[" 	\n			",HTML.DIV({"class":"progress"},"\n 	  			",HTML.DIV({"class":"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:function(){return["width: ",Spacebars.mustache(a.lookup("progress"))]},"aria-valuenow":function(){return Spacebars.mustache(a.lookup("progress"))},"aria-valuemin":"0","aria-valuemax":"100"}),"\n			"),"\n		"]}),"\n	")})}).call(this);

(function(){Template.__checkName("liveFeed"),Template.liveFeed=new Template("Template.liveFeed",function(){var e=this;return[Blaze.If(function(){return Spacebars.call(e.lookup("liveFeedAddPost"))},function(){return["\n		",Spacebars.include(e.lookupTemplate("liveFeedPostSubmit")),"\n	"]}),"\n		",Blaze.If(function(){return Spacebars.call(e.lookup("newMessages"))},function(){return["\n			",HTML.DIV({"class":"text-center mb-2"},"\n				",HTML.BUTTON({type:"button","class":"btn btn-outline-primary live-feed--refresh"},Blaze.View("lookup:newMessages",function(){return Spacebars.mustache(e.lookup("newMessages"))})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed--notification-panel")})),"\n			"),"\n		"]}),"\n	",Blaze.Each(function(){return Spacebars.call(e.lookup("liveFeedPosts"))},function(){return["\n		",Spacebars.include(e.lookupTemplate("liveFeedPost")),"\n	"]}),"\n	",Blaze.If(function(){return Spacebars.call(e.lookup("loadMore"))},function(){return["\n		",HTML.DIV({"class":"text-center mb-2"},"\n			",HTML.BUTTON({type:"button","class":"btn btn-primary live-feed--load-more"},HTML.I({"class":"fas fa-arrow-circle-down"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed--load-more")})),"\n		"),"\n	"]}),"\n	",Spacebars.include(e.lookupTemplate("liveFeedPostEdit")),"\n	",Spacebars.include(e.lookupTemplate("liveFeedPostDelete")),"\n	",Spacebars.include(e.lookupTemplate("liveFeedCategorySubmit")),"\n	",Spacebars.include(e.lookupTemplate("liveFeedCategoryEdit"))]})}).call(this);

(function(){Template.__checkName("liveFeedCategoryEdit"),Template.liveFeedCategoryEdit=new Template("Template.liveFeedCategoryEdit",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"liveFeedCategoryEdit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n		",HTML.DIV({"class":"modal-dialog",role:"document"},"\n			",HTML.DIV({"class":"modal-content"},"\n				",HTML.DIV({"class":"modal-header"},"\n					",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-category-edit--title")})),"\n					",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>'),"\n				"),"\n				",HTML.DIV({"class":"modal-body"},"\n					",HTML.FORM({name:"live-feed-category-edit--form","class":"live-feed-category-edit--form",id:"live-feed-category-edit--form"},"\n						",HTML.DIV({"class":"form-group"},"\n							",HTML.INPUT({type:"text","class":"form-control",name:"editCategoryName",id:"editCategoryName","aria-describedby":"editCategoryName",placeholder:"Category name",value:function(){return Spacebars.mustache(e.lookup("categoryName"))}}),"\n							",HTML.DIV({"class":"text-secondary"},Blaze.View("lookup:numChars",function(){return Spacebars.mustache(e.lookup("numChars"))}),"/20"),"\n						"),"\n					"),"\n				"),"\n				",HTML.DIV({"class":"modal-footer"},"\n					",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-danger live-feed-category-edit--button-delete"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--delete")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-primary live-feed-category-edit--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--save")})),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("liveFeedCategorySubmit"),Template.liveFeedCategorySubmit=new Template("Template.liveFeedCategorySubmit",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"liveFeedCategorySubmit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n		",HTML.DIV({"class":"modal-dialog",role:"document"},"\n			",HTML.DIV({"class":"modal-content"},"\n				",HTML.DIV({"class":"modal-header"},"\n					",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-category-submit--title")})),"\n					",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>'),"\n				"),"\n				",HTML.DIV({"class":"modal-body"},"\n					",HTML.FORM({name:"live-feed-category-submit--form","class":"live-feed-category-submit--form",id:"live-feed-category-submit--form"},"\n						",HTML.DIV({"class":"form-group"},"\n							",HTML.INPUT({type:"text","class":"form-control",name:"categoryName",id:"categoryName","aria-describedby":"categoryName",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"live-feed-category-submit--placeholder")},autofocus:""}),"\n							",HTML.DIV({"class":"text-secondary"},Blaze.View("lookup:numChars",function(){return Spacebars.mustache(e.lookup("numChars"))}),"/20"),"\n						"),"\n					"),"\n				"),"\n				",HTML.DIV({"class":"modal-footer"},"\n					",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-primary live-feed-category-submit--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--submit")})),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("liveFeedDeleteComment"),Template.liveFeedDeleteComment=new Template("Template.liveFeedDeleteComment",function(){var e=this;return HTML.DIV({"class":"modal fade",id:function(){return["live-feed-post--delete-comment-",Spacebars.mustache(Spacebars.dot(e.lookup("."),"id"))]},tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},HTML.Raw('\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="exampleModalLabel">Delete comment</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        Delete this comment?\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-danger live-feed--delete-comment--confirm">Delete</button>\n      </div>\n    </div>\n  </div>\n'))})}).call(this);

(function(){Template.__checkName("liveFeedPost"),Template.liveFeedPost=new Template("Template.liveFeedPost",function(){var e=this;return[HTML.DIV({"class":"card rounded-0",style:"border-radius: 0.25rem 0.25rem 0 0 !important;"},"\n		",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"fileId"))},function(){return["\n			",Blaze.If(function(){return Spacebars.call(e.lookup("image"))},function(){return["\n				",HTML.DIV({"class":"life-feed-post--image-wrapper"},"\n					",HTML.A({"class":"life-feed-post--image-link",href:function(){return["/upload",Spacebars.mustache(e.lookup("filePath"))]},target:"_blank"},"\n						",HTML.IMG({"class":"card-img-top",src:function(){return["/upload",Spacebars.mustache(e.lookup("filePath"))]},alt:"Card image cap"}),"\n					"),"\n			"),"\n			"]}),"\n		"]}),"\n		",HTML.DIV({"class":"card-body"},"\n			",Blaze.If(function(){return Spacebars.call(e.lookup("ownPost"))},function(){return["\n				",HTML.I({"class":"fa fa-ellipsis-v fa-fw float-right btn-icon",id:"dropdownMenuLink","data-toggle":"dropdown"})," \n				",HTML.DIV({"class":"dropdown-menu","aria-labelledby":"dropdownMenuLink"},"\n					",HTML.A({"class":"dropdown-item live-feed-post--edit",href:"#"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post--edit")})),"\n					",HTML.A({"class":"dropdown-item text-danger live-feed-post--delete",href:"#"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post--delete")})),"\n				"),"\n			"]}),"\n			",HTML.H6({"class":"card-title"},Blaze.View("lookup:author",function(){return Spacebars.mustache(e.lookup("author"))}),HTML.Raw('<!-- <small class="text-muted ml-1"> {{livestamp submitted}}</small> -->')),"\n			",HTML.P({"class":"card-text"},Spacebars.include(e.lookupTemplate("autolink"),function(){return Blaze.View("lookup:body",function(){return Spacebars.mustache(e.lookup("body"))})})),"\n			",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"fileId"))},function(){return["\n				",Blaze.Unless(function(){return Spacebars.call(e.lookup("image"))},function(){return["\n					",HTML.DIV({"class":"mt-3"},"\n						",HTML.I({"class":"fas fa-paperclip"}),"\n						",HTML.A({"class":"",href:function(){return["/upload",Spacebars.mustache(e.lookup("filePath"))]},target:"_blank"},Blaze.View("lookup:..fileName",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"fileName"))}),".",Blaze.View("lookup:..fileExt",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"fileExt"))})),"\n					"),"\n				"]}),"\n			"]}),"\n			",Blaze.If(function(){return Spacebars.call(e.lookup("category"))},function(){return["\n				",HTML.DIV({"class":"small text-secondary float-right"},HTML.I({"class":"fas fa-tag"})," ",Blaze.View("lookup:category",function(){return Spacebars.mustache(e.lookup("category"))})),"\n			"]}),"\n			",Blaze.If(function(){return Spacebars.call(e.lookup("likeAlready"))},function(){return["\n				",HTML.A({href:"#","class":"btn-link-black live-feed-post--remove-like text-primary"},HTML.I({"class":"fas fa-thumbs-up"})),"\n				",Blaze.If(function(){return Spacebars.call(e.lookup("othersLikes"))},function(){return["\n					",HTML.SPAN({"class":"small"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-post--nb-likes-with-me",e.lookup("likesWithoutMe"))})),"\n				"]},function(){return["\n					",HTML.SPAN({"class":"small"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-post--like")})),"\n				"]}),"\n			"]},function(){return["\n				",HTML.A({href:"#","class":"btn-link-black live-feed-post--add-like"},HTML.I({"class":"far fa-thumbs-up"})),"\n				",Blaze.If(function(){return Spacebars.call(e.lookup("likes"))},function(){return["\n					",HTML.SPAN({"class":"small"},Blaze.View("lookup:likes",function(){return Spacebars.mustache(e.lookup("likes"))})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-post--nb-likes")})),"\n				"]}),"\n			"]}),"\n		"),"\n	"),"\n	",HTML.DIV({"class":"border border-top-0 rounded-bottom mb-4 p-2 bg-light small"},"\n		",Blaze.Each(function(){return Spacebars.call(e.lookup("comments"))},function(){return["\n			",HTML.DIV({"class":"border-bottom mb-2 p-1"},"\n				",Blaze.If(function(){return Spacebars.call(e.lookup("ownComment"))},function(){return["\n					",HTML.A({href:"#","class":"float-right text-secondary","data-toggle":"modal","data-target":function(){return["#live-feed-post--delete-comment-",Spacebars.mustache(Spacebars.dot(e.lookup("."),"id"))]}},"x"),"\n					",Spacebars.include(e.lookupTemplate("liveFeedDeleteComment")),"\n				"]}),"\n				",HTML.DIV({"class":"small"},Blaze.View("lookup:..author",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"author"))}),HTML.Comment("   {{livestamp this.submitted}} ")),"\n				",HTML.DIV({"class":"mt-1"},Spacebars.include(e.lookupTemplate("autolink"),function(){return Blaze.View("lookup:..text",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"text"))})})),"\n				",Blaze.If(function(){return Spacebars.call(e.lookup("likeAlreadyComment"))},function(){return["\n					",HTML.DIV({"class":"mt-2 small"},"\n						",HTML.A({href:"#","class":"btn-link-black live-feed-post--comment-remove-like text-primary","data-postid":function(){return Spacebars.mustache(Spacebars.dot(e.lookup(".."),"_id"))}},HTML.I({"class":"fas fa-thumbs-up","data-postid":function(){return Spacebars.mustache(Spacebars.dot(e.lookup(".."),"_id"))}})),"\n						",Blaze.If(function(){return Spacebars.call(e.lookup("othersLikesComment"))},function(){return["\n							",HTML.SPAN(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-post--nb-likes-with-me",e.lookup("likesWithoutMeComment"))})),"\n						"]},function(){return["\n							",HTML.SPAN(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-post--like")})),"\n						"]}),"\n					"),"\n				"]},function(){return["\n					",HTML.DIV({"class":"mt-2 small"},"\n						",HTML.A({href:"#","class":"btn-link-black live-feed-post--comment-add-like","data-postid":function(){return Spacebars.mustache(Spacebars.dot(e.lookup(".."),"_id"))}},HTML.I({"class":"far fa-thumbs-up","data-postid":function(){return Spacebars.mustache(Spacebars.dot(e.lookup(".."),"_id"))}})),"\n						",Blaze.If(function(){return Spacebars.call(e.lookup("likesComment"))},function(){return["\n							",HTML.SPAN(Blaze.View("lookup:likesComment",function(){return Spacebars.mustache(e.lookup("likesComment"))})),"\n						"]}),"\n					"),"\n				"]}),"\n			"),"\n		"]}),"\n		",Blaze.If(function(){return Spacebars.call(e.lookup("addComment"))},function(){return["\n			",HTML.DIV({"class":"form-group mb-0"},"\n				",HTML.TEXTAREA({"class":"form-control live-feed-post--add-comment-textarea",id:"comment",rows:"1",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"live-feed-post--add-comment")}}),"\n			"),"\n		"]}),"\n	")]})}).call(this);

(function(){Template.__checkName("liveFeedPostDelete"),Template.liveFeedPostDelete=new Template("Template.liveFeedPostDelete",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"liveFeedPostDelete",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n		",HTML.DIV({"class":"modal-dialog",role:"document"},"\n			",HTML.DIV({"class":"modal-content"},"\n				",HTML.DIV({"class":"modal-header"},"\n					",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-post-delete--title")})),"\n					",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>'),"\n				"),"\n				",HTML.DIV({"class":"modal-body"},"\n					",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-post-delete--delete-confirm")}),"\n				"),"\n				",HTML.DIV({"class":"modal-footer"},"\n					",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-danger live-feed-post-delete--confirm"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--delete")})),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("liveFeedPostEdit"),Template.liveFeedPostEdit=new Template("Template.liveFeedPostEdit",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"liveFeedPostEdit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n		",HTML.DIV({"class":"modal-dialog",role:"document"},"\n			",HTML.DIV({"class":"modal-content"},"\n			 	",HTML.DIV({"class":"modal-header"},"\n					",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-post-edit--title")})),"\n					",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n				 		<span aria-hidden="true">&times;</span>\n					</button>'),"\n			  	"),"\n			",HTML.DIV({"class":"modal-body"},"\n				",Blaze.If(function(){return Spacebars.call(e.lookup("fileUploaded"))},function(){return["\n					",Blaze.If(function(){return Spacebars.call(e.lookup("image"))},function(){return["\n						",HTML.DIV({"class":"mt-2 mb-4 text-center"},"\n							",HTML.IMG({"class":"card-img-top",src:function(){return["/upload",Spacebars.mustache(e.lookup("filePath"))]},alt:""}),"\n							",HTML.A({href:"#","class":"post-submit--button-delete-image"},HTML.I({"class":"fa fa-trash","aria-hidden":"true"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post-submit--delete-image")})),"\n						"),"\n					"]}),"\n				"]}),"\n				",HTML.FORM({name:"live-feed-post-edit--form",id:"live-feed-post-edit--form"},"\n					",HTML.DIV({"class":"form-group"},"\n						",HTML.TEXTAREA({name:"body",id:"body","class":"form-control live-feed-post-edit--textarea",placeholder:"","aria-label":"","aria-describedby":"basic-addon2",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("post"),"body"))}}),"\n					"),"\n			      ",HTML.DIV({"class":"input-group mb-3"},"\n			        ",HTML.Raw('<div class="input-group-prepend">\n			          <label class="input-group-text" for="inputGroupSelect01"><i class="fas fa-tag"></i></label>\n			        </div>'),"\n			        ",HTML.SELECT({"class":"custom-select",name:"categorySelect",id:"categorySelect"},"\n			          ",HTML.OPTION({val:"",disabled:"",selected:""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post-submit--select-category")})),"\n			          ",HTML.OPTION({val:""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post-submit--no-category")})),"\n			          ",Blaze.Each(function(){return Spacebars.call(e.lookup("categories"))},function(){return["\n			            ",HTML.OPTION({selected:function(){return Spacebars.mustache(e.lookup("selectedCategory"))},name:function(){return Spacebars.mustache(e.lookup("name"))}},Blaze.View("lookup:name",function(){return Spacebars.mustache(e.lookup("name"))})),"\n			          "]}),"\n			          "),"\n			        "),"\n				"),"\n				",Blaze.Unless(function(){return Spacebars.call(e.lookup("fileUploaded"))},function(){return["\n          			",Blaze._TemplateWith(function(){return{formData:Spacebars.call(e.lookup("formData")),autoStart:Spacebars.call(!0)}},function(){return Spacebars.include(e.lookupTemplate("fileUpload"))}),"\n				"]}),"\n				",Blaze.If(function(){return Spacebars.call(e.lookup("fileUploaded"))},function(){return["\n					",Blaze.Unless(function(){return Spacebars.call(e.lookup("image"))},function(){return["\n						",HTML.DIV({"class":"p-2"},"\n							",HTML.I({"class":"fa fa-file-o","aria-hidden":"true"})," ",Blaze.View("lookup:fileUploaded.fileName",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"fileName"))}),".",Blaze.View("lookup:fileUploaded.fileExt",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"fileExt"))}),"\n							",HTML.A({href:"#","class":"post-submit--button-delete-file"},"\n								",HTML.I({"class":"fa fa-trash","aria-hidden":"true"}),"\n							"),"\n						"),"\n					"]}),"\n				"]}),"\n			  	"),"\n			  	",HTML.DIV({"class":"modal-footer"},"\n					",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-primary live-feed-post-edit--submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--save")})),"\n			  	"),"\n			"),"\n	  	"),"\n	")})}).call(this);

(function(){Template.__checkName("liveFeedPostSubmit"),Template.liveFeedPostSubmit=new Template("Template.liveFeedPostSubmit",function(){var e=this;return HTML.DIV({"class":"card mb-5 bg-light"},"\n		",HTML.DIV({"class":"card-body"},"\n			",HTML.FORM({name:"live-feed-post-submit--form",id:"live-feed-post-submit--form"},"\n				",Blaze.If(function(){return Spacebars.call(e.lookup("fileUploaded"))},function(){return["\n					",Blaze.Unless(function(){return Spacebars.call(Spacebars.dot(e.lookup("fileUploaded"),"error"))},function(){return["\n						",Blaze.If(function(){return Spacebars.call(e.lookup("image"))},function(){return["\n							",HTML.DIV({"class":"mt-2 mb-4 text-center"},"\n								",HTML.IMG({"class":"card-img-top",src:function(){return["/upload",Spacebars.mustache(e.lookup("filePath"))]},alt:""}),"\n			 					",HTML.A({href:"#","class":"post-submit--button-delete-image"},HTML.I({"class":"fa fa-trash","aria-hidden":"true"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post-submit--delete-image")})),"\n			 				"),"\n		 				"]}),"\n		 			"]}),"\n				"]}),"\n				",HTML.DIV({"class":"form-group"},"\n					",HTML.TEXTAREA({rows:"1",name:"body",id:"body","class":"form-control post-submit--textarea",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"post-submit--body-placeholder")},"aria-label":function(){return Spacebars.mustache(e.lookup("_"),"post-submit--body-placeholder")}}),"\n				"),"\n				",HTML.DIV({"class":"form-group d-none d-lg-block float-right mb-0"},"\n					",HTML.BUTTON({"class":"btn btn-outline-secondary bg-primary text-white border-0 live-feed-post-submit--button-submit",type:"button"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--submit")})),"\n				"),"	\n				",HTML.DIV({"class":"form-group float-lg-right mb-lg-2 mr-4"},"\n					",HTML.DIV({"class":"input-group float-lg-right mb-lg-2 mr-4"},"\n						",HTML.Raw('<div class="input-group-prepend">\n					    	<label class="input-group-text" for="inputGroupSelect01"><i class="fas fa-tag"></i></label>\n					  	</div>'),"\n						",HTML.SELECT({"class":"custom-select",name:"categorySelect",id:"categorySelect"},"\n		    				",HTML.OPTION({val:"",disabled:"",selected:""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post-submit--select-category")})),"\n		    	      		",HTML.OPTION({val:""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post-submit--no-category")})),"\n		    				",Blaze.Each(function(){return Spacebars.call(e.lookup("categories"))},function(){return["\n		      					",HTML.OPTION(HTML.Attrs(function(){return Spacebars.attrMustache(e.lookup("selectedOption"),e.lookup("name"))}),Blaze.View("lookup:name",function(){return Spacebars.mustache(e.lookup("name"))})),"\n		      				"]}),"\n		      				",Blaze.If(function(){return Spacebars.call(e.lookup("liveFeedAddCategory"))},function(){return["\n		      					",HTML.OPTION({style:"color:red",value:"add-category"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"live-feed-post-submit--add-category")})),"\n		      				"]}),"\n						"),"\n					"),"	\n				"),"\n	  			",HTML.DIV({"class":"form-group d-lg-none float-right mb-0"},"\n					",HTML.BUTTON({"class":"btn btn-outline-secondary bg-primary text-white border-0 live-feed-post-submit--button-submit",type:"button"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--submit")})),"\n				"),"				  \n				",Blaze.Unless(function(){return Spacebars.call(e.lookup("fileUploaded"))},function(){return["\n          			",Blaze._TemplateWith(function(){return{formData:Spacebars.call(e.lookup("formData")),autoStart:Spacebars.call(!0)}},function(){return Spacebars.include(e.lookupTemplate("fileUpload"))}),"\n				"]}),"\n				",Blaze.If(function(){return Spacebars.call(e.lookup("fileUploaded"))},function(){return["\n					",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("fileUploaded"),"error"))},function(){return["\n          				",HTML.DIV({"class":""},HTML.SPAN({"class":"text-danger"},Blaze.View("lookup:fileUploaded.error",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"error"))}))," (",HTML.A({href:"#","class":"live-feed-post-submit--retry"},"retry"),")"),"\n          			"]},function(){return["\n						",Blaze.Unless(function(){return Spacebars.call(e.lookup("image"))},function(){return["\n							",HTML.DIV({"class":"p-2"},"\n								",HTML.I({"class":"fa fa-file-o","aria-hidden":"true"})," ",Blaze.View("lookup:fileUploaded.fileName",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"fileName"))}),".",Blaze.View("lookup:fileUploaded.fileExt",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"fileExt"))}),"\n								",HTML.A({href:"#","class":"post-submit--button-delete-file"},"\n									",HTML.I({"class":"fa fa-trash","aria-hidden":"true"}),"\n								"),"\n							"),"\n						"]}),"\n					"]}),"\n				"]}),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("resources"),Template.resources=new Template("Template.resources",function(){var e=this;return[Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n		",HTML.DIV({"class":"float-right"},"\n			",HTML.A({href:"#","class":"","data-toggle":"modal","data-target":"#resourcesPostSubmit"},"\n				",HTML.I({"class":"fas fa-plus"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"resources--submit-button")}),"\n			"),"\n		"),"\n	"]}),"\n	",HTML.H5({"class":"mb-4"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"resources--title")})),"\n	",Blaze.Each(function(){return Spacebars.call(e.lookup("resourcesPosts"))},function(){return["\n		",Spacebars.include(e.lookupTemplate("resourcesPost")),"\n	"]}),"\n	",Spacebars.include(e.lookupTemplate("resourcesPostSubmit")),"\n	",Spacebars.include(e.lookupTemplate("resourcesPostEdit")),"\n	",Spacebars.include(e.lookupTemplate("resourcesPostDelete")),"\n	",Spacebars.include(e.lookupTemplate("resourcesCategorySubmit")),"\n	",Spacebars.include(e.lookupTemplate("resourcesCategoryEdit"))]})}).call(this);

(function(){Template.__checkName("resourcesCategoryEdit"),Template.resourcesCategoryEdit=new Template("Template.resourcesCategoryEdit",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"resourcesCategoryEdit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n		",HTML.DIV({"class":"modal-dialog",role:"document"},"\n			",HTML.DIV({"class":"modal-content"},"\n				",HTML.DIV({"class":"modal-header"},"\n					",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"resources-category-edit--title")})),"\n					",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>'),"\n				"),"\n				",HTML.DIV({"class":"modal-body"},"\n					",HTML.FORM({name:"resources-category-edit--form","class":"resources-category-edit--form",id:"resources-category-edit--form"},"\n						",HTML.DIV({"class":"form-group"},"\n							",HTML.INPUT({type:"text","class":"form-control",name:"editCategoryName",id:"editCategoryName","aria-describedby":"editCategoryName",placeholder:"Category name",value:function(){return Spacebars.mustache(e.lookup("categoryName"))}}),"\n							",HTML.DIV({"class":"text-secondary"},Blaze.View("lookup:numChars",function(){return Spacebars.mustache(e.lookup("numChars"))}),"/20"),"\n						"),"\n					"),"\n				"),"\n				",HTML.DIV({"class":"modal-footer"},"\n					",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-danger resources-category-edit--button-delete"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--delete")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-primary resources-category-edit--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--save")})),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("resourcesCategorySubmit"),Template.resourcesCategorySubmit=new Template("Template.resourcesCategorySubmit",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"resourcesCategorySubmit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n		",HTML.DIV({"class":"modal-dialog",role:"document"},"\n			",HTML.DIV({"class":"modal-content"},"\n				",HTML.DIV({"class":"modal-header"},"\n					",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"resources-category-submit--title")})),"\n					",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>'),"\n				"),"\n				",HTML.DIV({"class":"modal-body"},"\n					",HTML.FORM({name:"resources-category-submit--form","class":"resources-category-submit--form",id:"resources-category-submit--form"},"\n						",HTML.DIV({"class":"form-group"},"\n							",HTML.INPUT({type:"text","class":"form-control",name:"categoryName",id:"categoryName","aria-describedby":"categoryName",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"resources-category-submit--placeholder")},autofocus:""}),"\n							",HTML.DIV({"class":"text-secondary"},Blaze.View("lookup:numChars",function(){return Spacebars.mustache(e.lookup("numChars"))}),"/20"),"\n						"),"\n					"),"\n				"),"\n				",HTML.DIV({"class":"modal-footer"},"\n					",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-primary resources-category-submit--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--submit")})),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("resourcesPost"),Template.resourcesPost=new Template("Template.resourcesPost",function(){var e=this;return HTML.DIV({"class":"card mb-4"},"\n		",HTML.DIV({"class":"card-header d-flex"},Blaze.View("lookup:title",function(){return Spacebars.mustache(e.lookup("title"))}),"\n			",Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n				",HTML.SPAN({"class":"align-baseline ml-auto",id:"dropdownMenuLink","data-toggle":"dropdown"},HTML.I({"class":"fa fa-ellipsis-v fa-fw align-baseline btn-icon"}),"\n				"),"\n				",HTML.DIV({"class":"dropdown-menu","aria-labelledby":"dropdownMenuLink"},"\n					",HTML.A({"class":"dropdown-item resources-post--edit",href:"#"},"Edit"),"\n					",HTML.A({"class":"dropdown-item text-danger resources-post--delete",href:"#"},"Delete"),"\n				"),"\n			"]}),"\n		"),"\n		",HTML.DIV({"class":"card-body"},"\n			",HTML.P({"class":"card-text post-item--text2"},Blaze.View("lookup:body",function(){return Spacebars.mustache(e.lookup("body"))})),"\n			",Blaze.If(function(){return Spacebars.call(e.lookup("category"))},function(){return["\n				",HTML.DIV({"class":"small text-secondary float-right"},HTML.I({"class":"fas fa-tag"})," ",Blaze.View("lookup:category",function(){return Spacebars.mustache(e.lookup("category"))})),"\n			"]}),"\n			",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"fileId"))},function(){return["\n				",HTML.DIV({"class":"mt-3"},"\n					",HTML.I({"class":"fas fa-paperclip"}),"\n					",HTML.A({"class":"",href:function(){return["/upload",Spacebars.mustache(e.lookup("filePath"))]},target:"_blank"},Blaze.View("lookup:..fileName",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"fileName"))}),".",Blaze.View("lookup:..fileExt",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"fileExt"))})),"\n				"),"\n			"]}),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("resourcesPostDelete"),Template.resourcesPostDelete=new Template("Template.resourcesPostDelete",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"resourcesPostDelete",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n		",HTML.DIV({"class":"modal-dialog",role:"document"},"\n			",HTML.DIV({"class":"modal-content"},"\n				",HTML.Raw('<div class="modal-header">\n					<h5 class="modal-title" id="exampleModalLabel">Delete this resource</h5>\n					<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n				</div>'),"\n				",HTML.Raw('<div class="modal-body">\n					Do you want to delete this resource ?\n				</div>'),"\n				",HTML.DIV({"class":"modal-footer"},"\n					",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n					",HTML.BUTTON({type:"button","class":"btn btn-danger resources-post-delete--confirm"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--delete")})),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("resourcesPostEdit"),Template.resourcesPostEdit=new Template("Template.resourcesPostEdit",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"resourcesPostEdit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n  ",HTML.DIV({"class":"modal-dialog",role:"document"},"\n    ",HTML.DIV({"class":"modal-content"},"\n      ",HTML.DIV({"class":"modal-header"},"\n        ",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"resources-post-edit--title")})),"\n        ",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>'),"\n      "),"\n      ",HTML.DIV({"class":"modal-body"},"\n      	",HTML.FORM({name:"resources-post-edit--form",id:"resources-post-edit--form"},"\n      		      ",HTML.DIV({"class":"form-group"},"\n       		    ",HTML.INPUT({type:"text","class":"form-control",name:"title",id:"title","aria-describedby":"title",placeholder:"Title of the resource",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("post"),"title"))}})),"\n       		",HTML.DIV({"class":"form-group"},"\n				",HTML.TEXTAREA({name:"body",id:"body","class":"form-control resources-post-edit--textarea",placeholder:"","aria-label":"","aria-describedby":"basic-addon2",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("post"),"body"))}}),"\n			"),"\n        ",HTML.DIV({"class":"input-group mb-3"},"\n          ",HTML.Raw('<div class="input-group-prepend">\n            <label class="input-group-text" for="inputGroupSelect01"><i class="fas fa-tag"></i></label>\n          </div>'),"\n          ",HTML.SELECT({"class":"custom-select",name:"categorySelect",id:"categorySelect"},"\n            ",HTML.OPTION({val:"",disabled:"",selected:""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post-submit--select-category")})),"\n            ",HTML.OPTION({val:""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post-submit--no-category")})),"\n            ",Blaze.Each(function(){return Spacebars.call(e.lookup("categories"))},function(){return["\n              ",HTML.OPTION({selected:function(){return Spacebars.mustache(e.lookup("selectedCategory"))},name:function(){return Spacebars.mustache(e.lookup("name"))}},Blaze.View("lookup:name",function(){return Spacebars.mustache(e.lookup("name"))})),"\n            "]}),"\n            "),"\n          "),"\n			"),"\n			",Blaze.Unless(function(){return Spacebars.call(e.lookup("fileUploaded"))},function(){return["\n					",Blaze._TemplateWith(function(){return{formData:Spacebars.call(e.lookup("formData")),autoStart:Spacebars.call(!0)}},function(){return Spacebars.include(e.lookupTemplate("fileUpload"))}),"\n				"]}),"\n				",Blaze.If(function(){return Spacebars.call(e.lookup("fileUploaded"))},function(){return["\n          ",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("fileUploaded"),"error"))},function(){return["\n            ",HTML.DIV({"class":""},HTML.SPAN({"class":"text-danger"},Blaze.View("lookup:fileUploaded.error",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"error"))}))," (",HTML.A({href:"#","class":"resources-post-edit--retry"},"retry"),")"),"\n          "]},function(){return["\n  					",HTML.DIV({"class":"p-2"},"\n  						",HTML.I({"class":"fa fa-file-o","aria-hidden":"true"})," ",Blaze.View("lookup:fileUploaded.fileName",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"fileName"))}),".",Blaze.View("lookup:fileUploaded.fileExt",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"fileExt"))}),"\n  						",HTML.A({href:"#","class":"post-submit--button-delete-file"},"\n  							",HTML.I({"class":"fa fa-trash","aria-hidden":"true"}),"\n  						"),"\n  					"),"\n          "]}),"\n				"]}),"\n      "),"\n      ",HTML.DIV({"class":"modal-footer"},"\n        ",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n        ",HTML.BUTTON({type:"button","class":"btn btn-primary resources-post-edit--submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--save")})),"\n      "),"\n    "),"\n  "),"\n")})}).call(this);

(function(){Template.__checkName("resourcesPostSubmit"),Template.resourcesPostSubmit=new Template("Template.resourcesPostSubmit",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"resourcesPostSubmit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n	",HTML.DIV({"class":"modal-dialog",role:"document"},"\n		",HTML.DIV({"class":"modal-content"},"\n			",HTML.DIV({"class":"modal-header"},"\n				",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"resources-post-submit--title")})),"\n				",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n					<span aria-hidden="true">&times;</span>\n				</button>'),"\n			"),"\n			",HTML.DIV({"class":"modal-body"},"\n				",HTML.FORM({name:"resources-post-submit--form",id:"resources-post-submit--form"},"\n					 ",HTML.DIV({"class":"form-group"},"\n						",HTML.INPUT({type:"text","class":"form-control",name:"title",id:"title","aria-describedby":"title",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"resources-post-submit--title-placeholder")}}),"\n					"),"\n					",HTML.DIV({"class":"form-group"},"\n						",HTML.TEXTAREA({name:"body",id:"body","class":"form-control resources-post-submit--textarea",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"resources-post-submit--description-placeholder")},"aria-label":"","aria-describedby":"basic-addon2"}),"\n					"),"\n					",HTML.DIV({"class":"input-group mb-3"},"\n					  ",HTML.Raw('<div class="input-group-prepend">\n					    <label class="input-group-text" for="inputGroupSelect01"><i class="fas fa-tag"></i></label>\n					  </div>'),"\n					  ",HTML.SELECT({"class":"custom-select",name:"categorySelect",id:"categorySelect"},"\n	    					",HTML.OPTION({val:"",disabled:"",selected:""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post-submit--select-category")})),"\n	    	      			",HTML.OPTION({val:""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"post-submit--no-category")})),"\n	    					",Blaze.Each(function(){return Spacebars.call(e.lookup("categories"))},function(){return["\n	      						",HTML.OPTION(HTML.Attrs(function(){return Spacebars.attrMustache(e.lookup("selectedOption"),e.lookup("name"))}),Blaze.View("lookup:name",function(){return Spacebars.mustache(e.lookup("name"))})),"\n	      					"]}),"\n					  "),"\n					"),"	\n				"),"\n			",Blaze.Unless(function(){return Spacebars.call(e.lookup("fileUploaded"))},function(){return["\n					",Blaze._TemplateWith(function(){return{formData:Spacebars.call(e.lookup("formData")),autoStart:Spacebars.call(!0)}},function(){return Spacebars.include(e.lookupTemplate("fileUpload"))}),"\n				"]}),"\n				",Blaze.If(function(){return Spacebars.call(e.lookup("fileUploaded"))},function(){return["\n					",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("fileUploaded"),"error"))},function(){return["\n						",HTML.DIV({"class":""},HTML.SPAN({"class":"text-danger"},Blaze.View("lookup:fileUploaded.error",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"error"))}))," (",HTML.A({href:"#","class":"resources-post-submit--retry"},"retry"),")"),"\n					"]},function(){return["\n						",HTML.DIV({"class":"p-2"},"\n							",HTML.I({"class":"fa fa-file-o","aria-hidden":"true"})," ",Blaze.View("lookup:fileUploaded.fileName",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"fileName"))}),".",Blaze.View("lookup:fileUploaded.fileExt",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("fileUploaded"),"fileExt"))}),"\n							",HTML.A({href:"#","class":"post-submit--button-delete-file"},"\n								",HTML.I({"class":"fa fa-trash","aria-hidden":"true"}),"\n							"),"\n						"),"\n					"]}),"\n				"]}),"\n			"),"\n			",HTML.DIV({"class":"modal-footer"},"\n				",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n				",HTML.BUTTON({type:"button","class":"btn btn-primary resources-post-submit--button-submit",disabled:""},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--submit")})),"\n			"),"\n		"),"\n	"),"\n")})}).call(this);

(function(){Template.__checkName("generalSettings"),Template.generalSettings=new Template("Template.generalSettings",function(){var e=this;return HTML.Raw('<h6 class="mb-3">General</h6>\n	<div class="list-group w-100">\n  		<a href="#" class="list-group-item list-group-item-action list-group-item-danger general-settings--delete-button"><span>Reset this space</span></a>\n  	</div>')})}).call(this);

(function(){Template.__checkName("modulesSettings"),Template.modulesSettings=new Template("Template.modulesSettings",function(){var s=this;return[HTML.Raw('<h6 class="mb-3 mt-4">Modules</h6>\n	'),HTML.DIV({"class":"list-group w-100"},"\n  		",HTML.A({href:"#","class":"list-group-item list-group-item-action d-flex modules-settings--live-feed align-middle"},HTML.Raw('<span><i class="fa fa-bolt fa-fw"></i> Live Feed<p class="small text-secondary">Real-time interactions feed. Everyone can share and interact using pictures, files, and messages.</p></span>'),HTML.SPAN({"class":"ml-auto"},Blaze.If(function(){return Spacebars.call(Spacebars.dot(s.lookup("space"),"liveFeed"))},function(){return HTML.I({"class":"far fa-check-square"})},function(){return HTML.I({"class":"far fa-square"})})),"\n  			"),"\n  		",HTML.A({href:"#","class":"list-group-item list-group-item-action d-flex modules-settings--lessons align-middle"},HTML.Raw('<span><i class="fa fa-chalkboard-teacher fa-fw"></i> Lessons<p class="small text-secondary">Allows to import and serve E-learning packages (currently supports Articulate Storyline only).</p></span>'),HTML.SPAN({"class":"ml-auto"},Blaze.If(function(){return Spacebars.call(Spacebars.dot(s.lookup("space"),"lessons"))},function(){return HTML.I({"class":"far fa-check-square"})},function(){return HTML.I({"class":"far fa-square"})}))),"\n  		",HTML.A({href:"#","class":"list-group-item list-group-item-action d-flex modules-settings--resources align-middle"},HTML.Raw('<span><i class="far fa-copy fa-fw"></i> Resources<p class="small text-secondary">Distribute files to your learners.</p></span>'),HTML.SPAN({"class":"ml-auto"},Blaze.If(function(){return Spacebars.call(Spacebars.dot(s.lookup("space"),"resources"))},function(){return HTML.I({"class":"far fa-check-square"})},function(){return HTML.I({"class":"far fa-square"})}))),"\n  	")]})}).call(this);

(function(){Template.__checkName("permissionsSettings"),Template.permissionsSettings=new Template("Template.permissionsSettings",function(){var s=this;return[HTML.Raw('<h6 class="mb-3 mt-4">Permissions</h6>\n	'),HTML.DIV({"class":"list-group w-100"},"\n  		",HTML.A({href:"#","class":"list-group-item list-group-item-action d-flex permissions-settings--liveFeedAddCategory"},HTML.Raw("<span>Users can add categories in Live Feed</span>"),HTML.SPAN({"class":"ml-auto"},Blaze.If(function(){return Spacebars.call(Spacebars.dot(s.lookup("space"),"permissions","liveFeedAddCategory"))},function(){return HTML.I({"class":"far fa-check-square"})},function(){return HTML.I({"class":"far fa-square"})}))),"\n  		",HTML.A({href:"#","class":"list-group-item list-group-item-action d-flex permissions-settings--liveFeedAddPost"},HTML.Raw("<span>Users can add posts in Live Feed</span>"),HTML.SPAN({"class":"ml-auto"},Blaze.If(function(){return Spacebars.call(Spacebars.dot(s.lookup("space"),"permissions","liveFeedAddPost"))},function(){return HTML.I({"class":"far fa-check-square"})},function(){return HTML.I({"class":"far fa-square"})}))),"\n  	")]})}).call(this);

(function(){Template.__checkName("settings"),Template.settings=new Template("Template.settings",function(){var e=this;return[Spacebars.include(e.lookupTemplate("backHeader")),"\n	",HTML.DIV({"class":"container h-100"},"\n		",HTML.DIV({"class":"row justify-content-center min-h-100"},"\n    		",HTML.DIV({"class":"col-sm-12 col-lg-8 bg-white border-left border-right min-h-100 pt-4 pl-4 pr-4"},"\n                ",HTML.H3({"class":"mb-4"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-edit--page-title")})),"\n    			",Spacebars.include(e.lookupTemplate("generalSettings")),"\n    			",Spacebars.include(e.lookupTemplate("permissionsSettings")),"\n    		"),"\n  		"),"\n	")]})}).call(this);

(function(){Template.__checkName("login"),Template.login=new Template("Template.login",function(){var n=this;return[Spacebars.include(n.lookupTemplate("loginHeader")),"\n	",HTML.DIV({"class":"container"},"\n  		",HTML.DIV({"class":"row justify-content-center mt-5"},"\n  			",HTML.DIV({"class":"col-12 col-lg-5"},"\n  				",HTML.Raw('<h4 class="text-center mb-4">Admin login</h4>'),"\n				",HTML.DIV({"class":"card text-center"},"\n					",HTML.DIV({"class":"card-body"},"\n						",HTML.FORM({id:"login--form",name:"login--form"},"\n	 						",HTML.DIV({"class":"form-group"},"\n	    						",HTML.INPUT({type:"text",name:"email","class":"form-control",id:"email","aria-describedby":"emailHelp",placeholder:function(){return Spacebars.mustache(n.lookup("_"),"login--mail")},autofocus:""}),"\n	  						"),"\n	  						",HTML.DIV({"class":"form-group"},"\n	  							",HTML.INPUT({type:"password",name:"password","class":"form-control",id:"password",value:"",placeholder:function(){return Spacebars.mustache(n.lookup("_"),"login--password")}}),"\n	  						"),"\n							",Blaze.If(function(){return Spacebars.call(n.lookup("errorMessage"))},function(){return["\n								",HTML.DIV({"class":"alert alert-danger",role:"alert"},"\n									",Blaze.View("lookup:t9n",function(){return Spacebars.mustache(n.lookup("t9n"),n.lookup("errorMessage"))}),"\n								"),"\n								",Blaze.Unless(function(){return Spacebars.call(n.lookup("isBox"))},function(){return["\n									",Blaze.If(function(){return Spacebars.call(n.lookup("passwordRecovery"))},function(){return["\n										",HTML.BR(),HTML.A({href:"#","class":"login--send-mail-forgot-password"},Blaze.View("lookup:_",function(){return Spacebars.mustache(n.lookup("_"),"login--send-mail-forgot-password-link")})),"\n									"]}),"\n								"]}),"\n							"]})," \n	  	    	  			",HTML.BUTTON({type:"button","class":"btn btn-primary w-100 login--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(n.lookup("_"),"login--button-submit")})),"\n						"),"\n					"),"\n				"),"\n			"),"\n  		"),"\n	")]})}).call(this);

(function(){Template.__checkName("register"),Template.register=new Template("Template.register",function(){var e=this;return[Spacebars.include(e.lookupTemplate("backHeader")),"\n    ",HTML.DIV({"class":"container"},"\n        ",HTML.DIV({"class":"row justify-content-center mt-5"},"\n            ",HTML.DIV({"class":"col-12 col-lg-5"},"\n                ",HTML.H4({"class":"text-center mb-4"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"register--page-title")})),"\n                ",HTML.DIV({"class":"card text-center"},"\n                    ",HTML.DIV({"class":"card-body"},"\n                        ",HTML.FORM({id:"register--form","class":"register--form",name:"register--form"},"\n                            ",HTML.DIV({"class":"form-group"},"\n                                ",HTML.INPUT({type:"email",name:"email","class":"form-control",id:"email","aria-describedby":"emailHelp",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"register--mail")},autofocus:""}),"\n                                ",HTML.Raw('<small id="passwordHelp" class="form-text text-muted">We\'ll never share your email with anyone else.</small>'),"\n                            "),"\n                            ",HTML.DIV({"class":"form-group"},"\n                                ",HTML.INPUT({type:"text",name:"name","class":"form-control",id:"name","aria-describedby":"nameHelp",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"register--name")}}),"\n                            "),"\n                            ",HTML.DIV({"class":"form-group"},"\n                                ",HTML.INPUT({type:"password",name:"password","class":"form-control",id:"password",value:"",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"register--password")}}),"\n                                ",HTML.Raw('<small id="passwordHelp" class="form-text text-muted">Please choose a password with at least 5 characters.</small>'),"\n                            "),"\n                            ",HTML.DIV({"class":"form-group"},"\n                                ",HTML.INPUT({type:"password",name:"password_confirm","class":"form-control password_confirm",id:"password_confirm",value:"",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"register--password-confirm")}}),"\n                            "),"\n                            ",Blaze.If(function(){return Spacebars.call(e.lookup("errorMessage"))},function(){return["\n                                ",HTML.DIV({"class":"alert alert-danger",role:"alert"},"\n                                    ",Blaze.View("lookup:t9n",function(){return Spacebars.mustache(e.lookup("t9n"),e.lookup("errorMessage"))}),"\n                                "),"\n                            "]})," \n                            ",HTML.BUTTON({type:"button","class":"btn btn-primary w-100 register--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"register--button-submit")})),"\n                        "),"\n                    "),"\n                "),"\n            "),"\n        "),"\n    ")]})}).call(this);

(function(){Template.__checkName("resetPassword"),Template.resetPassword=new Template("Template.resetPassword",function(){var e=this;return HTML.DIV({"class":"reset-password"},"\n        ",HTML.DIV({"class":"page-title"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"reset-password--page-title")})),"\n        ",HTML.FORM({id:"login--form","class":"login--form"},"        \n            ",HTML.DIV({"class":"login--wrapper"},"\n                ",HTML.LABEL(HTML.B(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"reset-password--new-password")}))),HTML.Raw("<br>"),"\n                ",HTML.Raw('<input type="password" name="" class="form-control" id="password" value="">'),HTML.Raw("<br>"),"\n            ")," \n            ",HTML.DIV({"class":"login--button-wrapper"},"\n                ",HTML.BUTTON({type:"submit","class":"button button-primary reset-password--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"reset-password--button-submit")})),"\n            "),"   \n        "),"\n        ",HTML.DIV({"class":"login--register-link-wrapper"},"\n            ",HTML.SPAN(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"login--register")}),HTML.Raw("<br>"),HTML.Raw("<br>"),"\n                ",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"register")}}," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"login--register-link")}))," !\n            "),"\n        "),"\n    ")})}).call(this);

(function(){Template.__checkName("userSettings"),Template.userSettings=new Template("Template.userSettings",function(){var e=this;return[Spacebars.include(e.lookupTemplate("backHeader")),"\n	",HTML.DIV({"class":"container h-100"},"\n		",HTML.DIV({"class":"row justify-content-center min-h-100"},"\n    		",HTML.DIV({"class":"col-sm-12 col-lg-8 bg-white border-left border-right min-h-100 pt-4 pl-4 pr-4"},"\n                ",HTML.H5({"class":"text-center mb-5"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"user-settings--page-title")})),"\n                ",HTML.DIV({"class":"list-group w-100"},"\n                	",HTML.A({href:"#","class":"list-group-item list-group-item-action d-flex user-settings--change-password"},HTML.SPAN(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"user-settings--change-password")})),HTML.Raw('<span class="ml-auto"></span>')),"\n  					",HTML.A({href:"#","class":"list-group-item list-group-item-action list-group-item-danger d-flex user-settings--logout"},HTML.SPAN(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"user-settings--logout")})),HTML.Raw('<span class="ml-auto"></span>')),"\n  				"),"\n    		"),"\n  		"),"\n	")]})}).call(this);

(function(){Template.__checkName("admin"),Template.admin=new Template("Template.admin",function(){var e=this;return[Spacebars.include(e.lookupTemplate("indexTeacherHeader")),"\n	",HTML.DIV({"class":"container h-100"},"\n		",HTML.DIV({"class":"row justify-content-center mt-4"},"\n			",HTML.DIV({"class":"col-sm-12 col-lg-8"},"\n				",HTML.H3(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--page-title")})),"\n			"),"\n		"),"\n		",HTML.DIV({"class":"row justify-content-center mt-4 mb-4"},"\n			",HTML.DIV({"class":"col-sm-12 col-lg-8"},"\n				",HTML.DIV({"class":"card"},"\n					",HTML.Raw('<div class="card-header">System informations</div>'),"			\n 					",HTML.DIV({"class":"card-body p-0"},"\n 						",HTML.UL({"class":"list-group"},"\n  							",HTML.LI({"class":"list-group-item rounded-0 border-left-0 border-right-0 border-top-0 d-flex"},HTML.Raw("<span>Beekee version</span>"),HTML.SPAN({"class":"ml-auto text-secondary"},Blaze.View("lookup:beekeeVersion",function(){return Spacebars.mustache(e.lookup("beekeeVersion"))})," (",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"update")}},"update"),")")),"\n  							",Blaze.If(function(){return Spacebars.call(e.lookup("isBox"))},function(){return"\n  							"}),"\n						"),"\n					"),"\n				"),"\n			"),"\n		"),"\n		",HTML.DIV({"class":"row justify-content-center mb-4"},"\n			",HTML.DIV({"class":"col-sm-12 col-lg-8"},"\n				",HTML.DIV({"class":"card"},"\n					",HTML.Raw('<div class="card-header">Used space</div>'),"\n					",HTML.DIV({"class":"card-body"},"\n						",HTML.DIV(Blaze.View("lookup:usedSpace",function(){return Spacebars.mustache(e.lookup("usedSpace"))})),"\n					"),"\n				"),"\n			"),"\n		"),"\n		",HTML.DIV({"class":"row justify-content-center mt-4 mb-4"},"\n			",HTML.DIV({"class":"col-sm-12 col-lg-8"},"\n				",HTML.DIV({"class":"card"},"\n					",HTML.Raw('<div class="card-header">Network</div>'),"			\n 					",HTML.DIV({"class":"card-body p-0"},"\n 						",HTML.UL({"class":"list-group"},"\n  							",HTML.LI({"class":"list-group-item rounded-0 border-left-0 border-right-0 border-top-0 d-flex"},HTML.Raw("<span>IP address</span>"),HTML.SPAN({"class":"ml-auto text-secondary"},Blaze.View("lookup:ipAddress",function(){return Spacebars.mustache(e.lookup("ipAddress"))}))),"\n						"),"\n					"),"\n				"),"\n			"),"\n		"),"\n		",HTML.DIV({"class":"row justify-content-center mb-4"},"\n			",HTML.DIV({"class":"col-sm-12 col-lg-8"},"\n				",HTML.DIV({"class":"card"},"\n					",HTML.Raw('<div class="card-header">List of LiveFeeds</div>'),"\n					",HTML.DIV({"class":"card-body"},"\n						",HTML.TABLE({"class":"table table-striped table-sm mt-3"},"\n							",HTML.THEAD({"class":"thead-dark"},"\n								",HTML.TR("\n									",HTML.TH({scope:"col"},"Course id"),"\n									",HTML.TH({scope:"col"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--spaces-creation")})),"\n									",HTML.TH({scope:"col"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--spaces-owner")})),"\n									",HTML.TH({scope:"col"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--spaces-actions")})),"\n								"),"\n							"),"\n							",HTML.TBODY("\n								",Blaze.Each(function(){return Spacebars.call(e.lookup("spaces"))},function(){return["\n									",HTML.TR("\n										",HTML.TH({scope:"row"},HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"space",Spacebars.kw({_id:Spacebars.dot(e.lookup("."),"_id")}))}},Blaze.View("lookup:title",function(){return Spacebars.mustache(e.lookup("title"))}))),"\n										",HTML.TD(Blaze.View("lookup:spaceCreatedAt",function(){return Spacebars.mustache(e.lookup("spaceCreatedAt"))})),"\n										",HTML.TD(Blaze.View("lookup:spaceOwner",function(){return Spacebars.mustache(e.lookup("spaceOwner"))})),"\n										",HTML.TD(HTML.A({href:"#","class":"text-danger small admin--space-delete"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--spaces-delete")}))),"\n									"),"\n								"]}),"\n							"),"\n						"),"\n					"),"\n				"),"\n			"),"\n		"),"\n		",HTML.DIV({"class":"row justify-content-center mb-4"},"\n			",HTML.DIV({"class":"col-sm-12 col-lg-8"},"\n				",HTML.DIV({"class":"card"},"\n					",HTML.Raw('<div class="card-header">Admin user</div>'),"\n					",HTML.DIV({"class":"card-body"},"\n						",HTML.TABLE({"class":"table table-striped table-sm mt-3"},"\n							",HTML.THEAD({"class":"thead-dark"},"\n								",HTML.TR("\n									",HTML.TH({scope:"col"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--users-logins")})),"\n										",HTML.TH({scope:"col"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--users-creation")})),"\n										",HTML.TH({scope:"col"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--users-last-connexion")})),"\n										",HTML.TH({scope:"col"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--users-actions")})),"\n								"),"\n							"),"\n							",HTML.TBODY("\n								",Blaze.Each(function(){return Spacebars.call(e.lookup("user"))},function(){return["\n									",HTML.TR("\n										",HTML.TH({scope:"row"},Blaze.View("lookup:emails.0.address",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("emails"),"0","address"))})," ",Blaze.If(function(){return Spacebars.call(e.lookup("isOnline"))},function(){return HTML.I({"class":"fas fa-circle text-success small"})},function(){return HTML.I({"class":"far fa-circle small"})})),"\n										",HTML.TD(Blaze.View("lookup:userCreatedAt",function(){return Spacebars.mustache(e.lookup("userCreatedAt"))})),"\n										",HTML.TD(Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"status","lastLogin","date"))},function(){return Blaze.View("lookup:livestamp",function(){return Spacebars.mustache(e.lookup("livestamp"),Spacebars.dot(e.lookup("."),"status","lastLogin","date"))})})),"\n										",HTML.TD("\n											",HTML.A({href:"#","data-userid":function(){return Spacebars.mustache(e.lookup("_id"))},"class":"admin--user-change-password small"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--users-change-password")})),"\n													",Blaze.Unless(function(){return Spacebars.call(e.lookup("admin"))},function(){return["\n												",HTML.A({href:"#","class":"ml-3 small admin--user-delete text-danger"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"admin--users-delete")})),"\n													"]}),"\n										"),"\n									"),"\n								"]}),"\n							"),"\n						"),"\n					"),"\n				"),"\n			"),"\n		"),"\n	")]})}).call(this);

(function(){Template.__checkName("adminCreateAccount"),Template.adminCreateAccount=new Template("Template.adminCreateAccount",function(){var a=this;return HTML.DIV({"class":"modal fade",id:"adminCreateAccount",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n		",HTML.DIV({"class":"modal-dialog",role:"document"},"\n			",HTML.DIV({"class":"modal-content"},"\n				",HTML.Raw('<div class="modal-header">\n					<h5 class="modal-title" id="exampleModalLabel">Create a teacher account</h5>\n					<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n				</div>'),"\n				",HTML.DIV({"class":"modal-body"},"\n					",HTML.FORM({id:"admin-create-account--form","class":"admin-create-account--form",name:"admin-create-account--form"},"\n						",HTML.DIV({"class":"form-group"},"\n							",HTML.INPUT({type:"email",name:"email","class":"form-control",id:"email","aria-describedby":"emailHelp",placeholder:function(){return Spacebars.mustache(a.lookup("_"),"register--mail")},autofocus:""}),"\n							",HTML.Raw('<small id="passwordHelp" class="form-text text-muted">We\'ll never share this email with anyone else.</small>'),"\n						"),"\n						",HTML.DIV({"class":"form-group"},"\n							",HTML.INPUT({type:"text",name:"name","class":"form-control",id:"name","aria-describedby":"nameHelp",placeholder:function(){return Spacebars.mustache(a.lookup("_"),"register--name")}}),"\n						"),"\n						",HTML.DIV({"class":"form-group"},"\n							",HTML.INPUT({type:"password",name:"password","class":"form-control",id:"password",value:"",placeholder:function(){return Spacebars.mustache(a.lookup("_"),"register--password")}}),"\n							",HTML.Raw('<small id="passwordHelp" class="form-text text-muted">Please choose a password with at least 5 characters.</small>'),"\n						"),"\n						",HTML.DIV({"class":"form-group"},"\n							",HTML.INPUT({type:"password",name:"password_confirm","class":"form-control password_confirm",id:"password_confirm",value:"",placeholder:function(){return Spacebars.mustache(a.lookup("_"),"register--password-confirm")}}),"\n						"),"\n						",Blaze.If(function(){return Spacebars.call(a.lookup("errorMessage"))},function(){return["\n							",HTML.DIV({"class":"alert alert-danger",role:"alert"},"\n								",Blaze.View("lookup:t9n",function(){return Spacebars.mustache(a.lookup("t9n"),a.lookup("errorMessage"))}),"\n							"),"\n						"]})," \n					"),"\n						",HTML.Raw('<div class="text-center">\n							<div class="small text-secondary col-8 offset-2"></div>\n						</div>'),"\n						",HTML.Raw('<div class="modal-footer">\n							<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n							<button type="button" class="btn btn-primary admin-create-account--button-submit">Create</button>\n						</div>'),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("adminSpaceSubmit"),Template.adminSpaceSubmit=new Template("Template.adminSpaceSubmit",function(){var a=this;return HTML.DIV({"class":"modal fade",id:"adminSpaceSubmit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n  ",HTML.DIV({"class":"modal-dialog",role:"document"},"\n    ",HTML.DIV({"class":"modal-content"},"\n      ",HTML.Raw('<div class="modal-header">\n        <h5 class="modal-title" id="exampleModalLabel">Create a new space</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>'),"\n      ",HTML.DIV({"class":"modal-body"},"\n      	",HTML.FORM({name:"admin-space-submit--form","class":"admin-space-submit--form",id:"admin-space-submit--form"},"\n\n       	",HTML.DIV({"class":"form-group"},"\n       		    ",HTML.Raw('<input type="text" class="form-control" name="spaceName" id="spaceName" aria-describedby="spaceName" placeholder="Space name" autofocus="">'),"\n              ",HTML.DIV({"class":"text-secondary"},Blaze.View("lookup:numChars",function(){return Spacebars.mustache(a.lookup("numChars"))}),"/20"),"\n        "),"\n			"),"\n      "),"\n      ",HTML.Raw('<div class="modal-footer">\n        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-primary admin-space-submit--button-submit">Create</button>\n      </div>'),"\n    "),"\n  "),"\n")})}).call(this);

(function(){Template.__checkName("update"),Template.update=new Template("Template.update",function(){var e=this;return[Spacebars.include(e.lookupTemplate("backHeader")),"    \n	",HTML.DIV({"class":"container"},"\n		",HTML.DIV({"class":"row justify-content-center mt-4"},"\n			",HTML.DIV({"class":"col-sm-12 col-lg-8"},"\n				",HTML.Raw("<h3>Update</h3>"),"\n				",HTML.DIV({"class":"row justify-content-center mt-4 mb-4"},"\n					",HTML.DIV({"class":"col-12"},"\n						",HTML.DIV({"class":"card"},"\n							",HTML.Raw('<div class="card-header">Manual update</div>'),"			\n 							",HTML.DIV({"class":"card-body p-0"},"\n								",HTML.DIV({"class":"text-center mt-3 mb-3"},"\n									",Blaze.Unless(function(){return Spacebars.call(e.lookup("updateUploaded"))},function(){return["\n										",Blaze._TemplateWith(function(){return{formData:Spacebars.call('{"type":"update"}'),autoStart:Spacebars.call(!0)}},function(){return Spacebars.include(e.lookupTemplate("updateUpload"))}),"\n									"]}),"\n									",Blaze.If(function(){return Spacebars.call(e.lookup("updateUploaded"))},function(){return["\n										",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("updateUploaded"),"error"))},function(){return["\n          									",HTML.DIV({"class":""},HTML.SPAN({"class":"text-danger"},Blaze.View("lookup:updateUploaded.error",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("updateUploaded"),"error"))}))," (",HTML.A({href:"#","class":"update--retry"},"retry"),")"),"\n          								"]},function(){return["\n											",HTML.DIV({"class":"text-success"},"Beekee has been updated.",HTML.BR(),HTML.A({href:"#",role:"button","class":"btn btn-danger update--reboot mt-3"},"Reboot the box")),"\n										"]}),"\n									"]}),"\n								"),"\n							"),"\n						"),"\n					"),"\n				"),"\n			"),"\n		"),"\n	")]})}).call(this);

(function(){Template.__checkName("updateUpload"),Template.updateUpload=new Template("Template.updateUpload",function(){var a=this;return HTML.FORM({method:"POST",enctype:"multipart/form-data"},"\n		",Blaze.Unless(function(){return Spacebars.call(a.lookup("infoLabel"))},function(){return["\n			",HTML.LABEL({"class":"text-center"},"\n				",HTML.INPUT({type:"file",accept:"*/*","class":"file-upload--input-file jqUploadclass","data-form-data":function(){return Spacebars.mustache(a.lookup("submitData"))}}),"\n				",HTML.SPAN({"class":"btn btn-primary text-center"},"Select update file ",HTML.I({"class":"fas fa-upload"})),"\n			"),"\n		"]}),"\n		",Spacebars.With(function(){return Spacebars.call(a.lookup("infoLabel"))},function(){return[" 	\n			",HTML.DIV({"class":"progress"},"\n 	  			",HTML.DIV({"class":"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:function(){return["width: ",Spacebars.mustache(a.lookup("progress"))]},"aria-valuenow":function(){return Spacebars.mustache(a.lookup("progress"))},"aria-valuemin":"0","aria-valuemax":"100"}),"\n			"),"\n		"]}),"\n	")})}).call(this);

(function(){Template.__checkName("backHeader"),Template.backHeader=new Template("Template.backHeader",function(){var e=this;return HTML.NAV({"class":"bg-dark text-white",style:"z-index:500;height:52px;line-height:52px;"},"\n		",HTML.DIV({"class":"container h-100"},"\n			",HTML.DIV({"class":"row justify-content-center h-100"},"\n				",HTML.DIV({"class":"col-4 col-lg-3",style:""},"\n					",HTML.A({href:"#","class":"btn-link back-header--button-back"},HTML.Raw('<i class="fas fa-chevron-left fa-lg"></i>'),HTML.SPAN(" ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"header--back")}))),"\n				"),"\n				",HTML.Raw('<div class="col-8">\n				</div>'),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("header"),Template.header=new Template("Template.header",function(){var e=this;return HTML.NAV({"class":"bg-dark text-white",style:"z-index:500;height:52px;line-height:52px;"},"\n		",HTML.DIV({"class":"container h-100"},"\n			",HTML.DIV({"class":"row justify-content-center h-100"},"\n				",HTML.DIV({"class":"col-4 col-lg-3",style:""},"\n					",HTML.Raw('<a class="menu-item d-none d-sm-none d-lg-inline h-100" data-id="1" href="http://box.beekee.ch">\n						<img style="height: 35px; padding: 0px 10px 5px 0;" alt="logo" src="/img/logo_header.png">\n					</a>'),"\n					",HTML.Raw('<a role="button" id="sidebarCollapse" class="btn-icon d-inline d-lg-none">\n                    	<i class="fas fa-bars fa-lg d-inline"></i>\n                	</a>'),"\n					",HTML.A({href:function(){return["http://box.beekee.ch/course/view.php?id=",Spacebars.mustache(e.lookup("courseId"))]},"class":"btn-link back-header--button-back"},HTML.Raw('<i class="fas fa-chevron-left fa-lg"></i>'),HTML.SPAN(" ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"header--back")}))),"\n				"),"\n				",HTML.DIV({"class":"col-8 text-right"},"\n					",HTML.A({href:"#","class":"beekee-header--change-author text-white px-3 mr-4"},"\n						",HTML.Raw('<i class="fa fa-user fa-fw"></i>')," \n							",HTML.SPAN(Blaze.View("lookup:authorName",function(){return Spacebars.mustache(e.lookup("authorName"))})),"\n					"),"\n					",Blaze.If(function(){return Spacebars.call(e.lookup("admin"))},function(){return["\n					",HTML.A({"class":"btn-icon",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown"},HTML.I({"class":"fa fa-ellipsis-v fa-lg"})),"\n					",HTML.DIV({"class":"dropdown-menu",style:"line-height:1.5","aria-labelledby":"dropdownMenuLink"},"\n						",HTML.A({"class":"dropdown-item",href:function(){return Spacebars.mustache(e.lookup("pathFor"),"settings",Spacebars.kw({_id:Spacebars.dot(e.lookup("."),"space","_id"),isadmin:e.lookup("adminCode"),userUsername:e.lookup("user")}))}},HTML.I({"class":"fas fa-cog"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-header--settings")})),"\n					"),"\n					"]}),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("indexStudentHeader"),Template.indexStudentHeader=new Template("Template.indexStudentHeader",function(){var e=this;return HTML.NAV({"class":"bg-dark text-white",style:"z-index:500;height:52px;line-height:52px;"},"\n		",HTML.DIV({"class":"container h-100"},"\n			",HTML.DIV({"class":"row justify-content-center h-100"},"\n				",HTML.Raw('<div class="col-4 col-lg-3" style="">\n                	<a class="menu-item h-100" href="#">\n						<img style="height: 35px; padding: 0px 10px 5px 0;" alt="logo" src="/img/logo_header.png">\n					</a>\n				</div>'),"\n				",HTML.DIV({"class":"col-8 text-right"},"\n					",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"indexTeacher")},"class":"btn-link"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"header--admin-access")})),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("indexTeacherHeader"),Template.indexTeacherHeader=new Template("Template.indexTeacherHeader",function(){var e=this;return HTML.NAV({"class":"bg-dark text-white",style:"z-index:500;height:52px;line-height:52px;"},"\n		",HTML.DIV({"class":"container h-100"},"\n			",HTML.DIV({"class":"row justify-content-center h-100"},"\n				",HTML.DIV({"class":"col-4 col-lg-3",style:""},"\n                	",HTML.Raw('<a class="menu-item d-none d-sm-none d-lg-inline h-100" data-id="1" href="#">\n						<img style="height: 35px; padding: 0px 10px 5px 0;" alt="logo" src="/img/logo_header.png">\n					</a>'),"\n					",HTML.SPAN({"class":"d-none d-sm-none d-lg-inline"},Blaze.View("lookup:space.title",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("space"),"title"))})),"\n				"),"\n				",HTML.DIV({"class":"col-8 text-right"},"\n					",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"userSettings")},"class":"text-white px-3 mr-4"},"\n						",HTML.Raw('<i class="fa fa-user fa-fw"></i>')," \n						",HTML.SPAN(Blaze.View("lookup:adminName",function(){return Spacebars.mustache(e.lookup("adminName"))})),"\n					"),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("loginHeader"),Template.loginHeader=new Template("Template.loginHeader",function(){var e=this;return HTML.NAV({"class":"bg-dark text-white",style:"z-index:500;height:52px;line-height:52px;"},"\n		",HTML.DIV({"class":"container h-100"},"\n			",HTML.DIV({"class":"row justify-content-center h-100"},"\n				",HTML.DIV({"class":"col-4 col-lg-3",style:""},"\n					",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"indexStudent")},"class":"btn-link"},HTML.Raw('<i class="fas fa-chevron-left fa-lg"></i>'),HTML.Raw("<span> Back</span>")),"\n				"),"\n				",HTML.Raw('<div class="col-8">\n				</div>'),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("simpleHeader"),Template.simpleHeader=new Template("Template.simpleHeader",function(){var e=this;return HTML.Raw('<nav class="bg-dark text-white" style="z-index:500;height:52px;line-height:52px;">\n		<div class="container h-100">\n			<div class="row justify-content-center h-100">\n			</div>\n		</div>\n	</nav>')})}).call(this);

(function(){Template.__checkName("spaceHeader"),Template.spaceHeader=new Template("Template.spaceHeader",function(){var e=this;return HTML.NAV({"class":"bg-dark text-white",style:"z-index:500;height:52px;line-height:52px;"},"\n		",HTML.DIV({"class":"container h-100"},"\n			",HTML.DIV({"class":"row justify-content-center h-100"},"\n				",HTML.DIV({"class":"col-4 col-lg-3",style:""},"\n					",HTML.Raw('<a role="button" id="sidebarCollapse" class="btn-icon d-inline d-lg-none">\n                    	<i class="fas fa-bars fa-lg d-inline"></i>\n                	</a>'),"\n                	",HTML.Raw('<a class="menu-item d-none d-sm-none d-lg-inline h-100" data-id="1" href="#">\n						<img style="height: 35px; padding: 0px 10px 5px 0;" alt="logo" src="/img/logo_header.png">\n					</a>'),"\n					",HTML.SPAN({"class":"d-none d-sm-none d-lg-inline"},Blaze.View("lookup:space.title",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("space"),"title"))})),"\n				"),"\n				",HTML.DIV({"class":"col-8 text-right"},"\n					",Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n						",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"userSettings")},"class":"text-white px-3 mr-4"},"\n							",HTML.I({"class":"fa fa-user fa-fw"})," \n							",HTML.SPAN(Blaze.View("lookup:adminName",function(){return Spacebars.mustache(e.lookup("adminName"))})),"\n						"),"\n					"]},function(){return["\n						",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"spaceUsers",Spacebars.kw({_id:Spacebars.dot(e.lookup("."),"space","_id")}))},"class":"text-white px-3 mr-4"},"\n							",HTML.I({"class":"fa fa-user fa-fw"})," \n							",HTML.SPAN(Blaze.View("lookup:authorName",function(){return Spacebars.mustache(e.lookup("authorName"))})),"\n						"),"\n					"]}),"\n					",HTML.Raw('<a class="btn-icon" role="button" id="dropdownMenuLink" data-toggle="dropdown"><i class="fa fa-ellipsis-v fa-lg"></i></a>'),"\n					",HTML.DIV({"class":"dropdown-menu",style:"line-height:1.5","aria-labelledby":"dropdownMenuLink"},"\n						",HTML.SPAN({"class":"dropdown-item"},HTML.Raw('<i class="fas fa-key"></i>')," Code : ",Blaze.View("lookup:space.spaceCode",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("space"),"spaceCode"))})),"\n						",Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n							",HTML.A({"class":"dropdown-item",href:function(){return Spacebars.mustache(e.lookup("pathFor"),"settings",Spacebars.kw({_id:Spacebars.dot(e.lookup("."),"space","_id")}))}},HTML.I({"class":"fas fa-cog"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-header--settings")})),"\n							",HTML.DIV({"class":"dropdown-divider"}),"\n							",HTML.A({"class":"dropdown-item text-danger",href:function(){return Spacebars.mustache(e.lookup("pathFor"),"indexTeacher")}},HTML.I({"class":"fas fa-sign-out-alt"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-header--leave")})),"\n						"]},function(){return["\n							",HTML.DIV({"class":"dropdown-divider"}),"\n							",HTML.A({"class":"dropdown-item text-danger",href:function(){return Spacebars.mustache(e.lookup("pathFor"),"indexStudent")}},HTML.I({"class":"fas fa-sign-out-alt"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-header--leave")})),"\n						"]}),"\n					"),"\n				"),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("usersHeader"),Template.usersHeader=new Template("Template.usersHeader",function(){var e=this;return HTML.NAV({"class":"bg-dark text-white",style:"z-index:500;height:45px"},"\n		",HTML.DIV({"class":"container h-100"},"\n			",HTML.DIV({"class":"row justify-content-center"},"\n				",HTML.DIV({"class":"col-6",style:""},"\n					",HTML.Raw('<a class="navbar-brand menu-item" data-id="1" href="#">\n						<img alt="logo" height="28" src="/img/logo_header.png">\n					</a>'),"\n					",HTML.SPAN(Blaze.View("lookup:space.title",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("space"),"title"))})),"\n				"),"\n				",HTML.Raw('<div class="nav-link col-5 text-right align-middle">\n				</div>'),"\n			"),"\n		"),"\n	")})}).call(this);

(function(){Template.__checkName("indexStudent"),Template.indexStudent=new Template("Template.indexStudent",function(){var e=this;return[Spacebars.include(e.lookupTemplate("indexStudentHeader")),"\n	",HTML.DIV({"class":"container"},"\n		",HTML.Raw('<div class="row justify-content-center mt-5">\n			<div class=""><img src="/img/logo.png"></div>\n  		</div>'),"\n  		",Blaze.If(function(){return Spacebars.call(e.lookup("isBox"))},function(){return["\n	  		",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("publicSpaces"),"count"))},function(){return["\n				",HTML.DIV({"class":"row justify-content-center mt-5 mb-5 text-center"},"\n		  			",HTML.DIV({"class":"col-12 col-lg-5 text-center"},"\n						",HTML.DIV({"class":""},"\n					 		",HTML.H5(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"index-student--public-spaces-title")})),"\n					 		",HTML.DIV({"class":"list-group w-100"},"\n					 			",Blaze.Each(function(){return Spacebars.call(e.lookup("publicSpaces"))},function(){return["\n									",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"space",Spacebars.kw({_id:Spacebars.dot(e.lookup("."),"_id")}))},"class":"list-group-item list-group-item-action d-flex"},HTML.SPAN(Blaze.View("lookup:title",function(){return Spacebars.mustache(e.lookup("title"))}))),"\n								"]}),"\n							"),"\n						"),"\n					"),"\n				"),"\n			"]}),"\n		"]}),"\n  		",HTML.DIV({"class":"row justify-content-center mt-5 text-center"},"\n  			",HTML.DIV({"class":"col-12 col-lg-5"},"\n  				",HTML.H5(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"index-student--code")})),"\n				",HTML.DIV({"class":"card"},"\n					",HTML.DIV({"class":"card-body"},"\n						",HTML.FORM({id:"index-student--code-link-form",name:"index-student--code-link-form"},"\n	 						",HTML.DIV({"class":"form-group"},"\n	    						",HTML.INPUT({type:"text","class":"form-control",id:"code","aria-describedby":"emailHelp",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"index-student--code-input-placeholder")}}),"\n	  						"),"\n	  	    	  			",HTML.A({href:"#",role:"button","class":"btn btn-primary w-100 index-student--button-code-link"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"index-student--button-code-link")})),"\n						"),"\n					"),"\n				"),"\n			"),"\n  		"),"\n		",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("spacesVisited"),"count"))},function(){return["\n	  		",HTML.DIV({"class":"row justify-content-center mt-5 text-center"},"\n	  			",HTML.DIV({"class":"col-12 col-lg-5 text-center"},"\n					",HTML.DIV({"class":"index-student--visited-spaces"},"\n				 		",HTML.H5(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"index-student--visited-title")})),"\n				 		",HTML.A({href:"#","class":"small index-student--delete-recent"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"index-student--delete-recent")})),"\n				 		",HTML.DIV({"class":"list-group w-100"},"\n				 			",Blaze.Each(function(){return Spacebars.call(e.lookup("spacesVisited"))},function(){return["\n								",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"space",Spacebars.kw({_id:Spacebars.dot(e.lookup("."),"_id")}))},"class":"list-group-item list-group-item-action d-flex"},HTML.SPAN(Blaze.View("lookup:title",function(){return Spacebars.mustache(e.lookup("title"))})),HTML.SPAN({"class":"ml-auto"},Blaze.View("lookup:spaceCode",function(){return Spacebars.mustache(e.lookup("spaceCode"))}))),"\n							"]}),"\n						"),"\n					"),"\n				"),"\n			"),"\n		"]}),"\n		",HTML.DIV({"class":"row justify-content-center mt-5"},"\n			",HTML.DIV({"class":"col-5 col-lg-2 text-center"},"\n				",HTML.SELECT({id:"langSelect","class":"custom-select custom-select-sm border-0",style:"width:auto; background-color: #fafafa;"},"\n				  ",HTML.OPTION(HTML.Attrs({value:"en"},function(){return Spacebars.attrMustache(e.lookup("langIsSelected"),"en")}),"English"),"\n				  ",HTML.OPTION(HTML.Attrs({value:"fr-FR"},function(){return Spacebars.attrMustache(e.lookup("langIsSelected"),"fr-FR")}),"Franais"),"\n				"),"\n			"),"\n  		"),"\n	")]})}).call(this);

(function(){Template.__checkName("indexTeacher"),Template.indexTeacher=new Template("Template.indexTeacher",function(){var e=this;return[Spacebars.include(e.lookupTemplate("indexTeacherHeader")),"\n	",HTML.DIV({"class":"container"},"\n		",HTML.Raw('<div class="row justify-content-center mt-5">\n			<div class=""><img src="/img/logo.png"></div>\n  		</div>'),"\n  		",HTML.DIV({"class":"row justify-content-center mt-5"},"\n  			",HTML.DIV({"class":"col-12 col-lg-5 text-center"},"\n				",HTML.H5({"class":"mb-3"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"index-teacher--spaces-title")})),"\n				",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("ownSpaces"),"count"))},function(){return["\n					",HTML.DIV({"class":"list-group"},"\n						",Blaze.Each(function(){return Spacebars.call(e.lookup("ownSpaces"))},function(){return["\n						  	",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"space")},"class":"list-group-item list-group-item-action d-flex"},HTML.SPAN(Blaze.View("lookup:title",function(){return Spacebars.mustache(e.lookup("title"))})),HTML.SPAN({"class":"ml-auto"},Blaze.View("lookup:spaceCode",function(){return Spacebars.mustache(e.lookup("spaceCode"))}))),"\n						"]}),"\n					"),"\n				"]},function(){return["\n					",HTML.P({"class":"text-center"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"index-teacher--no-space")})),"\n				"]}),"\n			"),"\n		"),"	\n		",HTML.DIV({"class":"row justify-content-center mt-4 bt-5 text-center"},"\n  			",HTML.DIV({"class":"col-12 col-lg-6 text-center"},"\n				",HTML.BUTTON({"class":"btn btn-primary","data-toggle":"modal","data-target":"#spaceSubmit"},HTML.Raw('<i class="fa fa-plus"></i>')," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"index-teacher--button-submit-space")})),"\n			"),"\n		"),"\n		",Blaze.If(function(){return Spacebars.call(Spacebars.dot(e.lookup("publicSpaces"),"count"))},function(){return["\n			",HTML.DIV({"class":"row justify-content-center mt-5 mb-5 text-center"},"\n  				",HTML.DIV({"class":"col-12 col-lg-5 text-center"},"\n					",HTML.DIV({"class":"index-teacher--visited-spaces"},"\n			 			",HTML.H5({"class":"mb-3"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"index-student--public-spaces-title")})),"\n			 			",HTML.DIV({"class":"list-group w-100"},"\n			 				",Blaze.Each(function(){return Spacebars.call(e.lookup("publicSpaces"))},function(){return["\n								",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"space",Spacebars.kw({_id:Spacebars.dot(e.lookup("."),"_id")}))},"class":"list-group-item list-group-item-action d-flex"},HTML.SPAN(Blaze.View("lookup:title",function(){return Spacebars.mustache(e.lookup("title"))}))),"\n							"]}),"\n						"),"\n					"),"\n				"),"\n  			"),"\n  		"]}),"\n  		",Blaze.If(function(){return Spacebars.call(e.lookup("isBox"))},function(){return["\n	  		",HTML.DIV({"class":"row justify-content-center mt-5 text-center"},"\n	  			",HTML.DIV({"class":"col-12 col-lg-6 text-center mt-3 mb-3"},"\n					",Blaze.If(function(){return Spacebars.call(e.lookup("isBox"))},function(){return["\n						",HTML.BUTTON({type:"button","class":"btn btn-outline-secondary index-teacher--shutdown"},HTML.I({"class":"fa fa-power-off"}),HTML.BR(),HTML.SPAN(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"index-teacher--shutdown")}))),"\n					"]}),"\n				"),"\n			"),"\n		"]}),"\n		",HTML.DIV({"class":"row justify-content-center mt-5"},"\n			",HTML.DIV({"class":"col-5 col-lg-2 text-center"},"\n				",HTML.SELECT({id:"langSelect","class":"custom-select custom-select-sm border-0",style:"width:auto; background-color: #fafafa;"},"\n				  ",HTML.OPTION(HTML.Attrs({value:"en"},function(){return Spacebars.attrMustache(e.lookup("langIsSelected"),"en")}),"English"),"\n				  ",HTML.OPTION(HTML.Attrs({value:"fr"},function(){return Spacebars.attrMustache(e.lookup("langIsSelected"),"fr")}),"Franais"),"\n				"),"\n			"),"\n  		"),"\n	"),"\n	",Spacebars.include(e.lookupTemplate("spaceSubmit"))]})}).call(this);

(function(){Template.__checkName("accessDenied"),Template.accessDenied=new Template("Template.accessDenied",function(){var e=this;return[Spacebars.include(e.lookupTemplate("simpleHeader")),"\n	",HTML.DIV({"class":"container"},"\n		",HTML.DIV({"class":"row justify-content-center"},"\n    		",HTML.DIV({"class":"col-sm-12 col-lg-8 pt-4 pl-4 pr-4 text-center"},"\n                ",HTML.H3({"class":"mb-4"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"access-denied--page-title")})),"\n                ",HTML.DIV(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"access-denied--login-needed")})),"\n               	",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"login")},role:"button","class":"btn btn-primary mt-4"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"access-denied--login")})),"\n    		"),"\n  		"),"\n	")]})}).call(this);

(function(){Template.__checkName("fileUpload"),Template.fileUpload=new Template("Template.fileUpload",function(){var a=this;return HTML.FORM({method:"POST",enctype:"multipart/form-data"},"\n		",Blaze.Unless(function(){return Spacebars.call(a.lookup("infoLabel"))},function(){return["\n			",HTML.LABEL({"class":""},"\n				",HTML.INPUT({type:"file",accept:"image/*","class":"file-upload--input-file jqUploadclass","data-form-data":function(){return Spacebars.mustache(a.lookup("submitData"))}}),"\n					",HTML.SPAN({"class":"file-upload--input-file-icon"},HTML.I({"class":"fas fa-image fa-lg"})),"\n			"),"\n			",HTML.LABEL({"class":""},"\n				",HTML.INPUT({type:"file",accept:"*/*","class":"file-upload--input-file jqUploadclass","data-form-data":function(){return Spacebars.mustache(a.lookup("submitData"))}}),"\n					",HTML.SPAN({"class":"file-upload--input-file-icon ml-2"},HTML.I({"class":"fas fa-paperclip fa-lg"})),"\n			"),"\n		"]}),"\n		",Spacebars.With(function(){return Spacebars.call(a.lookup("infoLabel"))},function(){return[" 	\n			",HTML.DIV({"class":"progress"},"\n 	  			",HTML.DIV({"class":"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:function(){return["width: ",Spacebars.mustache(a.lookup("progress"))]},"aria-valuenow":function(){return Spacebars.mustache(a.lookup("progress"))},"aria-valuemin":"0","aria-valuemax":"100"}),"\n			"),"\n		"]}),"\n	")})}).call(this);

(function(){Template.__checkName("loading"),Template.loading=new Template("Template.loading",function(){var a=this;return HTML.Raw('<div class="container mt-5">\n		<div class="text-center">\n			<i class="fa fa-lg fa-spinner fa-spin fa-3x"></i>\n		</div>\n	</div>')})}).call(this);

(function(){Template.__checkName("notFound"),Template.notFound=new Template("Template.notFound",function(){var n=this;return[Spacebars.include(n.lookupTemplate("backHeader")),"\n	",HTML.DIV({"class":"container"},"\n		",HTML.DIV({"class":"row justify-content-center"},"\n    		",HTML.DIV({"class":"col-sm-12 col-lg-8 pt-4 pl-4 pr-4 text-center"},"\n                ",HTML.H3({"class":"mb-4"},Blaze.View("lookup:_",function(){return Spacebars.mustache(n.lookup("_"),"not-found--page-title")})),"\n                ",HTML.DIV(Blaze.View("lookup:_",function(){return Spacebars.mustache(n.lookup("_"),"not-found--page-description")})),"\n               	",HTML.A({href:function(){return Spacebars.mustache(n.lookup("pathFor"),"indexStudent")},role:"button","class":"btn btn-primary mt-4"},Blaze.View("lookup:_",function(){return Spacebars.mustache(n.lookup("_"),"not-found--go-back")})),"\n    		"),"\n  		"),"\n	")]})}).call(this);

(function(){Template.__checkName("privacy"),Template.privacy=new Template("Template.privacy",function(){var a=this;return HTML.DIV({"class":"privacy"},"\n		",HTML.DIV({"class":"page-title"},Blaze.View("lookup:_",function(){return Spacebars.mustache(a.lookup("_"),"privacy--page-title")})),"\n		",Blaze.View("lookup:_",function(){return Spacebars.makeRaw(Spacebars.mustache(a.lookup("_"),"privacy--content"))}),"\n	")})}).call(this);

(function(){Template.__checkName("guestUsername"),Template.guestUsername=new Template("Template.guestUsername",function(){var e=this;return HTML.DIV({"class":"modal fade",id:"guestUsername",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n  ",HTML.DIV({"class":"modal-dialog",role:"document"},"\n    ",HTML.DIV({"class":"modal-content"},"\n      ",HTML.Raw('<div class="modal-header">\n        <h5 class="modal-title" id="exampleModalLabel">What is your name?</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>'),"\n      ",HTML.DIV({"class":"modal-body"},"\n        ",HTML.Raw("<p>Please choose a name to identify yourself.</p>"),"\n      	",HTML.FORM({name:"guest-username--form",id:"guest-username--form"},"\n       	  ",HTML.DIV({"class":"form-group"},"\n       		    ",HTML.INPUT({type:"text","class":"form-control",name:"authorName",id:"authorName","aria-describedby":"title",value:function(){return Spacebars.mustache(e.lookup("user"))},placeholder:"Your name"}),"\n            "),"  	\n			"),"\n      "),"\n      ",HTML.DIV({"class":"modal-footer"},"\n        ",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--close")})),"\n        ",HTML.BUTTON({type:"button","class":"btn btn-primary guest-username--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"modal--submit")})),"\n      "),"\n    "),"\n  "),"\n")})}).call(this);

(function(){Template.__checkName("space"),Template.space=new Template("Template.space",function(){var e=this;return[HTML.DIV({"class":"wrapper h-100"},"\n        ",HTML.NAV({id:"sidebar","class":"align-middle"},Spacebars.include(e.lookupTemplate("spaceSidebar"))),"\n        ",Spacebars.include(e.lookupTemplate("header")),"    \n        ",HTML.DIV({"class":"content container h-100",style:"margin-top:-52px;padding-top:52px;"},"\n        	",HTML.DIV({"class":"row justify-content-center min-h-100"},"\n                ",HTML.DIV({"class":"d-none d-sm-none d-lg-block col-3 mt-4 sidebar-sticky"},"\n        		  ",Spacebars.include(e.lookupTemplate("spaceSidebar")),"\n                "),"\n            	",HTML.DIV({"class":"col-sm-12 col-lg-8 bg-white border-left border-right min-h-100 pt-4 pl-4 pr-4"},"\n            			",Spacebars.include(e.lookupTemplate("liveFeed")),"\n            	"),"\n          	"),"\n        "),"\n     "),HTML.Raw('\n    <div class="overlay"></div> \n    '),Spacebars.include(e.lookupTemplate("guestUsername"))]})}).call(this);

(function(){Template.__checkName("spaceSidebar"),Template.spaceSidebar=new Template("Template.spaceSidebar",function(){var e=this;return[HTML.Raw('<div class="bg-beekee pt-5 d-lg-none">\n		<img style="height: 50px;" class="pl-3 pb-3 mt-3" alt="logo" src="/img/logo_sidebar.png">\n	</div>\n	'),HTML.UL({"class":"sidebar nav flex-column align-items-start justify-content-between"},"\n			",HTML.LI({"class":function(){return["nav-item sidebar-item w-100 ",Spacebars.mustache(e.lookup("selectedShowAllBg"))]}},"\n				",HTML.A({"class":function(){return["nav-link pl-1 text-nowrap text-dark menu-item filter-live-feed-all ",Spacebars.mustache(e.lookup("selectedShowAllTxt"))," pl-3 pl-lg-0 py-3 py-lg-2"]},"data-id":"2",href:"#"},"\n					",HTML.Raw('<span class="pl-1">Show all</span>'),"\n					",HTML.SPAN({"class":"badge badge-secondary-2 ml-2"},Blaze.View("lookup:liveFeedCount",function(){return Spacebars.mustache(e.lookup("liveFeedCount"))})),"\n				"),"\n			"),"\n			",HTML.A({"class":"small pl-4 pt-3 text-secondary mb-1 space-sidebar--menu-collapse","data-toggle":"collapse","aria-expanded":"true",href:".categories-list"},HTML.Raw('<i class="fas fa-tags"></i>')," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-sidebar--categories")})," ",HTML.Raw('<i class="fa ml-1" aria-hidden="true"></i>')),"\n			",HTML.DIV({"class":"collapse categories-list show w-100"},"\n				",Blaze.Each(function(){return Spacebars.call(e.lookup("liveFeedCategories"))},function(){return["\n					",HTML.LI({"class":"align-middle nav-item sidebar-item w-100 small"},"\n						",HTML.A({"class":function(){return["align-bottom nav-link space-sidebar--filter-live-feed-category pl-1 py-1 text-nowrap text-dark filter-live-feed-category ",Spacebars.mustache(e.lookup("selectedLiveFeedCategory")),"  pl-4 py-2 py-lg-2"]},"data-category":function(){return Spacebars.mustache(e.lookup("name"))},href:"#"},HTML.SPAN({"class":"align-bottom pl-1","data-category":function(){return Spacebars.mustache(e.lookup("name"))}},Blaze.View("lookup:name",function(){return Spacebars.mustache(e.lookup("name"))})),"\n							",HTML.SPAN({"class":"align-baseline text-secondary small ml-1","data-category":function(){return Spacebars.mustache(e.lookup("name"))}},Blaze.View("lookup:nRefs",function(){return Spacebars.mustache(e.lookup("nRefs"))})),"\n							",Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n								",HTML.A({"class":"align-middle space-sidebar--live-feed-category-edit small ml-2","data-category":function(){return Spacebars.mustache(e.lookup("name"))}},"\n									",HTML.I({"class":"align-middle fas fa-pencil-alt","data-category":function(){return Spacebars.mustache(e.lookup("name"))}}),"\n								"),"\n							"]}),"\n						"),"\n					"),"\n				"]}),"\n				",HTML.DIV({"class":"pl-3 ml-2 mt-1"},"\n					",Blaze.If(function(){return Spacebars.call(e.lookup("liveFeedAddCategory"))},function(){return["\n						",HTML.A({href:"#","class":"small pt-1 pl-1 font-weight-light","data-toggle":"modal","data-target":"#liveFeedCategorySubmit"},"\n							",HTML.SPAN({"class":"pl-1"},HTML.I({"class":"fas fa-plus"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-sidebar--add-category")})),"\n						"),"\n					"]}),"\n				"),"\n			"),"\n			",HTML.A({"class":"small pl-4 pt-3 text-secondary mb-1 space-sidebar--menu-collapse","data-toggle":"collapse","aria-expanded":"false",href:".authors-list"},HTML.Raw('<i class="fas fa-users"></i>')," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-sidebar--authors")})," ",HTML.Raw('<i class="fa ml-1" aria-hidden="true"></i>')),"\n			",HTML.DIV({"class":"collapse authors-list w-100"},"\n				",Blaze.Each(function(){return Spacebars.call(e.lookup("authors"))},function(){return["\n				",HTML.LI({"class":"align-middle nav-item sidebar-item w-100 small w-100"},"\n					",HTML.A({"class":function(){return["align-bottom nav-link text-nowrap text-dark filter-author ",Spacebars.mustache(e.lookup("selectedAuthor"))," pl-4 py-2 py-lg-2"]},"data-author":function(){return Spacebars.mustache(e.lookup("name"))},href:"#"},"\n						",HTML.SPAN({"class":"pl-1","data-author":function(){return Spacebars.mustache(e.lookup("name"))}},Blaze.View("lookup:name",function(){return Spacebars.mustache(e.lookup("name"))})),"\n						",HTML.SPAN({"class":"align-baseline text-secondary small ml-1","data-author":function(){return Spacebars.mustache(e.lookup("name"))}},Blaze.View("lookup:nRefs",function(){return Spacebars.mustache(e.lookup("nRefs"))})),"\n					"),"\n				"),"\n				"]}),"\n			"),"\n		",Blaze.If(function(){return Spacebars.call(e.lookup("lessons"))},function(){return["						\n			",HTML.LI({"class":function(){return["nav-item sidebar-item w-100 ",Spacebars.mustache(e.lookup("selectedMenuItemBg"),3)]}},"\n				",HTML.A({"class":function(){return["nav-link pl-1 text-nowrap text-dark menu-item ",Spacebars.mustache(e.lookup("selectedMenuItemTxt"),3)," pl-3 pl-lg-0 py-3 py-lg-2"]},"data-id":"3",href:"#"},"\n					",HTML.I({"class":"fa fa-chalkboard-teacher fa-fw"})," \n					",HTML.SPAN({"class":"pl-1"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-sidebar--lessons")})),"\n				"),"\n			"),"\n		"]}),"\n		",Blaze.If(function(){return Spacebars.call(e.lookup("resources"))},function(){return["	\n			",HTML.LI({"class":function(){return["nav-item sidebar-item w-100 ",Spacebars.mustache(e.lookup("selectedMenuItemBg"),4)]}},"\n				",HTML.A({"class":function(){return["nav-link pl-1 text-nowrap text-dark menu-item filter-resources-all ",Spacebars.mustache(e.lookup("selectedMenuItemTxt"),4)," pl-3 pl-lg-0 py-3 py-lg-2"]},"data-id":"4",href:"#"},"\n					",HTML.I({"class":"far fa-copy fa-fw"})," \n					",HTML.SPAN({"class":"pl-1"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-sidebar--resources")})),"\n				"),"\n			"),"\n		"]}),"			\n		",Blaze.If(function(){return Spacebars.dataMustache(e.lookup("selectedMenuItem"),4)},function(){return["\n		",HTML.A({"class":"small pl-4 pt-3 text-secondary mb-1 space-sidebar--menu-collapse","data-toggle":"collapse","aria-expanded":"true",href:".categories-list"},HTML.I({"class":"fas fa-tags"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-sidebar--categories")})," ",HTML.I({"class":"fa ml-1","aria-hidden":"true"})),"\n			",HTML.DIV({"class":"collapse categories-list show w-100"},"\n				",Blaze.Each(function(){return Spacebars.call(e.lookup("resourcesCategories"))},function(){return["\n					",HTML.LI({"class":"align-middle nav-item sidebar-item w-100 small"},"\n						",HTML.A({"class":function(){return["align-bottom nav-link space-sidebar--filter-resources-category pl-1 py-1 text-nowrap text-dark filter-resources-category ",Spacebars.mustache(e.lookup("selectedResourcesCategory")),"  pl-4 py-2 py-lg-2"]},"data-category":function(){return Spacebars.mustache(e.lookup("name"))},href:"#"},HTML.SPAN({"class":"align-bottom pl-1","data-category":function(){return Spacebars.mustache(e.lookup("name"))}},Blaze.View("lookup:name",function(){return Spacebars.mustache(e.lookup("name"))})),"\n							",HTML.SPAN({"class":"align-baseline text-secondary small ml-1","data-category":function(){return Spacebars.mustache(e.lookup("name"))}},Blaze.View("lookup:nRefs",function(){return Spacebars.mustache(e.lookup("nRefs"))})),"\n							",Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n								",HTML.A({"class":"align-middle space-sidebar--resources-category-edit small ml-2","data-category":function(){return Spacebars.mustache(e.lookup("name"))}},"\n									",HTML.I({"class":"align-middle fas fa-pencil-alt","data-category":function(){return Spacebars.mustache(e.lookup("name"))}}),"\n								"),"\n							"]}),"\n						"),"\n					"),"\n				"]}),"\n				",HTML.DIV({"class":"pl-3 ml-2 mt-1"},"\n					",Blaze.If(function(){return Spacebars.call(e.lookup("ownSpace"))},function(){return["\n						",HTML.A({href:"#","class":"small pt-1 pl-1 font-weight-light","data-toggle":"modal","data-target":"#resourcesCategorySubmit"},"\n							",HTML.SPAN({"class":"pl-1"},HTML.I({"class":"fas fa-plus"})," ",Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-sidebar--add-category")})),"\n						"),"\n					"]}),"\n				"),"\n			"),"	\n		"]}),"\n	")]})}).call(this);

(function(){Template.__checkName("spaceSubmit"),Template.spaceSubmit=new Template("Template.spaceSubmit",function(){var a=this;return HTML.DIV({"class":"modal fade",id:"spaceSubmit",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},"\n  ",HTML.DIV({"class":"modal-dialog",role:"document"},"\n    ",HTML.DIV({"class":"modal-content"},"\n      ",HTML.DIV({"class":"modal-header"},"\n        ",HTML.H5({"class":"modal-title",id:"exampleModalLabel"},Blaze.View("lookup:_",function(){return Spacebars.mustache(a.lookup("_"),"space-submit--create-space")})),"\n        ",HTML.Raw('<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>'),"\n      "),"\n      ",HTML.DIV({"class":"modal-body"},"\n      	",HTML.FORM({name:"space-submit--form","class":"space-submit--form",id:"space-submit--form"},"\n\n       	",HTML.DIV({"class":"form-group"},"\n       		    ",HTML.INPUT({type:"text","class":"form-control",name:"spaceName",id:"spaceName","aria-describedby":"spaceName",placeholder:function(){return Spacebars.mustache(a.lookup("_"),"space-submit--create-space-placeholer")},autofocus:""}),"\n              ",HTML.DIV({"class":"text-secondary"},Blaze.View("lookup:numChars",function(){return Spacebars.mustache(a.lookup("numChars"))}),"/20"),"\n        "),"\n			"),"\n      "),"\n      ",HTML.DIV({"class":"modal-footer"},"\n        ",HTML.BUTTON({type:"button","class":"btn btn-secondary","data-dismiss":"modal"},Blaze.View("lookup:_",function(){return Spacebars.mustache(a.lookup("_"),"modal--close")})),"\n        ",HTML.BUTTON({type:"button","class":"btn btn-primary space-submit--button-submit"},Blaze.View("lookup:_",function(){return Spacebars.mustache(a.lookup("_"),"modal--submit")})),"\n      "),"\n    "),"\n  "),"\n")})}).call(this);

(function(){Template.__checkName("spaceUsers"),Template.spaceUsers=new Template("Template.spaceUsers",function(){var e=this;return[Spacebars.include(e.lookupTemplate("usersHeader")),"\n	",HTML.DIV({"class":"container pt-4"},"\n		",HTML.DIV({"class":"row justify-content-center"},"\n			",HTML.DIV({"class":"col-12 col-lg-6"},"\n				",HTML.DIV({"class":"card text-center"},"\n					",HTML.DIV({"class":"card-body"},"\n						",HTML.H4(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-users--page-title")})),"\n						",HTML.P({"class":"text-secondary"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-users--page-description")})),"\n						",HTML.FORM({id:"space-users--form","class":"space-users--form",name:"space-users--form"},"\n	 						",HTML.DIV({"class":"form-group"},"\n	    						",HTML.INPUT({type:"text","class":"form-control",name:"userName",id:"userName","aria-describedby":"userName",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"space-users--input-choose-author-placeholder")}}),"\n	    						",HTML.DIV({"class":"text-secondary"},Blaze.View("lookup:numChars",function(){return Spacebars.mustache(e.lookup("numChars"))}),"/15"),"\n	  						"),"\n	  						",HTML.DIV({"class":"text-right"},"\n	  	    	    			",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"space",Spacebars.kw({_id:Spacebars.dot(e.lookup("."),"space","_id")}))},role:"button","class":"btn btn-secondary"},"Cancel"),"\n	  	    	  				",HTML.Raw('<a href="#" role="button" class="btn btn-primary space-users--button-submit-author">Change</a>'),"\n							"),"\n						"),"\n					"),"\n				"),"\n			"),"\n		"),"\n	")]})}).call(this);

(function(){Template.__checkName("spaceUsersFirstConnection"),Template.spaceUsersFirstConnection=new Template("Template.spaceUsersFirstConnection",function(){var e=this;return[Spacebars.include(e.lookupTemplate("usersHeader")),"\n	",HTML.DIV({"class":"container pt-4"},"\n		",HTML.DIV({"class":"row justify-content-center"},"\n			",HTML.DIV({"class":"col-12 col-lg-6"},"\n				",HTML.DIV({"class":"card text-center"},"\n					",HTML.DIV({"class":"card-body"},"\n						",HTML.H4(Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-users-first-connection--page-title")})),"\n						",HTML.P({"class":"text-secondary"},Blaze.View("lookup:_",function(){return Spacebars.mustache(e.lookup("_"),"space-users--page-description")})),"\n						",HTML.FORM({id:"space-users--form",name:"space-users--form"},"\n	 						",HTML.DIV({"class":"form-group"},"\n	    						",HTML.INPUT({type:"text","class":"form-control",id:"space-users--input","aria-describedby":"emailHelp",placeholder:function(){return Spacebars.mustache(e.lookup("_"),"space-users--input-choose-author-placeholder")}}),"\n	  						"),"\n	  						",HTML.DIV({"class":"text-right"},"\n	  	    	    			",HTML.A({href:function(){return Spacebars.mustache(e.lookup("pathFor"),"indexStudent")},role:"button","class":"btn btn-secondary"},"Cancel"),"\n	  	    	  				",HTML.Raw('<a href="#" role="button" class="btn btn-primary space-users--button-submit-author">Submit</a>'),"\n							"),"\n						"),"\n					"),"\n				"),"\n			"),"\n		"),"\n	")]})}).call(this);

(function(){Authors=new Mongo.Collection("authors"),Authors.allow({insert:function(){return!0},remove:function(){return!0},update:function(){return!0}}),Meteor.methods({authorInsert:function(t,n){Authors.insert({name:t,spaceId:n,nRefs:0})},authorEdit:function(t,n,e){var o=Authors.findOne({name:n,spaceId:t});Authors.update(o._id,{$set:{name:e}},function(o){o?console.log("Error when changing author name : "+o.message):Posts.update({spaceId:t,author:n},{$set:{author:e}},{multi:!0})})}})}).call(this);

(function(){Categories=new Mongo.Collection("categories"),Categories.allow({insert:function(){return!0},remove:function(){return!0},update:function(){return!0}}),Meteor.methods({categoryInsert:function(e,t,n){Categories.insert({type:e,name:t,spaceId:n,nRefs:0})},categoryEdit:function(e,t,n,o){var a=Categories.findOne({type:t,name:n,spaceId:e});Categories.update(a._id,{$set:{name:o}},function(a){a?console.log("Error when changing category name : "+a.message):Posts.update({spaceId:e,type:t,category:n},{$set:{category:o}},{multi:!0})})},categoryDelete:function(e,t,n){var o=Categories.findOne({type:e,name:t,spaceId:n});Categories.remove(o._id,function(o){o?console.log("Error when deleting category : "+o.message):Posts.update({type:e,spaceId:n,category:t},{$unset:{category:""}},{multi:!0})})}})}).call(this);

(function(){Codes=new Mongo.Collection("codes"),Codes.allow({insert:function(){return!0},remove:function(){return!0},update:function(){return!0}})}).call(this);

(function(){if(Files=new Mongo.Collection("files"),Files.allow({insert:function(){return!0},remove:function(){return!0},update:function(){return!0}}),Meteor.isServer){var e=Npm.require("fs"),n=Npm.require("rimraf"),o=Meteor.settings.uploadDir;Meteor.methods({deleteFile:function(i){"lesson"==i.type?n(o+"/"+i.spaceId+"/"+i.type+"/"+i.fileId,function(e){console.log(e)}):e.unlinkSync(o+"/"+i.filePath,function(e){console.log(e)})}})}}).call(this);

(function(){Posts=new Mongo.Collection("posts"),Posts.allow({insert:function(){return!0},remove:function(){return!0},update:function(){return!0}}),Meteor.isClient&&(Counts=new Mongo.Collection("counts"),PinnedCounts=new Mongo.Collection("pinnedCounts"),FilesCounts=new Mongo.Collection("filesCounts"),ImagesCounts=new Mongo.Collection("imagesCounts"),LiveFeedCounts=new Mongo.Collection("liveFeedCounts")),Meteor.isServer&&(Posts.before.insert(function(e,t){Spaces.update(t.spaceId,{$set:{modified:Date.now()}}),t.version=1}),Posts.before.update(function(e,t,o,n,s){}),Posts.before.remove(function(e,t){var o=t.fileId,n=t.fileExt;if(o&&(Files.remove({fileId:o}),Meteor.call("deleteFile",t)),"home"==t.type)for(var s=t,i=Posts.find({spaceId:t.spaceId,type:"home",order:{$gt:s.order}}).fetch(),d=0;d<i.length;d++){console.log("id : "+i[d]._id);var r=i[d];Posts.update({_id:r._id},{$set:{order:r.order-1}})}if("liveFeed"==t.type){var a=Authors.findOne({spaceId:t.spaceId,name:t.author});if(Authors.update(a._id,{$inc:{nRefs:-1}}),t.category){var c=Categories.findOne({spaceId:t.spaceId,type:"liveFeed",name:t.category});c&&Categories.update(c._id,{$inc:{nRefs:-1}})}}if("resource"==t.type&&t.category){var c=Categories.findOne({spaceId:t.spaceId,type:"resource",name:t.category});c&&Categories.update(c._id,{$inc:{nRefs:-1}})}})),Meteor.methods({addLikeComment:function(e){Posts.update({_id:e.currentPostId,"comments.id":e.currentCommentId},{$push:{"comments.$.likes":e.author}})},removeLikeComment:function(e){Posts.update({_id:e.currentPostId,"comments.id":e.currentCommentId},{$pull:{"comments.$.likes":e.author}})},homePostInsert:function(e){check(e.spaceId,String),post=_.extend(e,{submitted:Date.now(),order:Posts.find({spaceId:e.spaceId,type:e.type}).count()});var t=Spaces.findOne(e.spaceId);return post._id=Posts.insert(post),post._id},postInsert:function(e){check(e.spaceId,String),item=Authors.findOne({spaceId:e.spaceId,name:e.author}),Authors.update(item,{$inc:{nRefs:1}}),post=_.extend(e,{authorId:Authors.findOne({spaceId:e.spaceId,name:e.author})._id,submitted:Date.now(),nb:Posts.find({spaceId:e.spaceId}).count()+1,pinned:!1});var t=Spaces.findOne(e.spaceId);return category=Categories.findOne({spaceId:e.spaceId,name:e.category}),Categories.update(category,{$inc:{nRefs:1}}),post._id=Posts.insert(post),post._id}})}).call(this);

(function(){function e(e){for(var t="",n="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz123456789",s=0;e>s;s++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}Spaces=new Mongo.Collection("spaces"),Spaces.allow({insert:function(e,t){return!0},update:function(e,t){return!0},remove:function(e,t){return!0}}),Meteor.isServer&&(Spaces.before.update(function(e,t,n,s,o){s.$set=s.$set||{},s.$set.modified=Date.now(),t.version=t.version++,t.modified=Date.now()}),Spaces.before.insert(function(e,t){t.submitted=Date.now()}),Spaces.before.remove(function(e,t){var n=t._id;Posts.remove({spaceId:n})}),Meteor.methods({getSpaceId:function(e){return Spaces.findOne({spaceCode:e})?Spaces.findOne({spaceCode:e})._id:null},updateCode:function(e,t){var n=Codes.findOne({code:e})._id;Codes.update(n,{code:t},function(e){console.log(e?"Error when changing code : "+e.message:"Code has been changed.")})},deleteSpace:function(e){Spaces.remove(e)},deleteSpaces:function(e){Spaces.remove({userId:e})},spaceInsert:function(t){check(t,{title:String,_id:String});var n=Codes.find().count(),s=Meteor.settings["public"].prefix,o=4;1e3>=n?o=2:n>1e3&&1e5>=n?o=3:n>1e5&&1e7>=n&&(o=4);for(var r=s+e(o);"undefined"!=typeof Codes.findOne({code:r});)r=s+e(o);Codes.insert({code:r,userId:Meteor.userId()});var i=Meteor.user(),a=_.extend(t,{spaceCode:r,submitted:new Date,visible:!0,codePanel:!0,createUserAllowed:!0,liveFeed:!0,lessons:!1,resources:!0,liveFeedComments:!0,permissions:{"public":!1,liveFeedAddPost:!0,liveFeedAddCategory:!1}}),d=Spaces.insert(a);return Meteor.call("authorInsert","Invit",d),Posts.insert({spaceId:d,type:"home",order:0,submitted:Date.now(),title:"Welcome!",body:"<p><em>Spaces</em> in Beekee are ideal for real-time interactions using the <strong>Live Feed</strong>, hosting training content in <strong>Lessons</strong> (if enabled) and sharing files with your learners in <strong>Resources</strong>.</p>\n<p>This is the Home page of your space. Right now it is empty but feel free to edit (or delete) this post to start.</p>\n<p>----------------------</p>\n<p>Les <em>Espaces</em>&nbsp;dans Beekee sont le lieu id&eacute;al pour&nbsp;interagir en temps r&eacute;el en utilisant&nbsp;<strong>Direct</strong>,&nbsp;proposer du contenu d'apprentissage dans&nbsp;<strong>Le&ccedil;ons</strong> (si activ&eacute;) et partager des fichiers avec vos apprenants dans&nbsp;<strong>Ressources</strong>.</p>\n<p>Ceci est la page d'accueil de votre espace. Pour l'instant, elle est vide, mais sentez-vous libre de modifier (ou de supprimer) ce post pour d&eacute;buter.</p>"}),{_id:d}}}))}).call(this);

(function(){LessonsFrameController=RouteController.extend({waitOn:function(){return[Meteor.subscribe("post",this.params._id)]},data:function(){return{post:Posts.findOne(this.params._id)}},action:function(){this.render()},fastRender:!0})}).call(this);

(function(){AdminController=RouteController.extend({waitOn:function(){return[Meteor.subscribe("allSpaces"),Meteor.subscribe("allUsers")]},action:function(){this.render("header",{to:"layout--header"}),this.render()},fastRender:!0})}).call(this);

(function(){IndexStudentController=RouteController.extend({onBeforeAction:function(){Roles.userIsInRole(Meteor.user(),"admin")&&Router.go("admin"),this.next()},waitOn:function(){Meteor.subscribe("publicSpaces")},action:function(){this.render()},fastRender:!0})}).call(this);

(function(){IndexTeacherController=RouteController.extend({onBeforeAction:function(){Meteor.userId()?Roles.userIsInRole(Meteor.user(),"admin")&&Router.go("admin"):Router.go("login"),this.next()},waitOn:function(){Meteor.subscribe("ownSpaces",Meteor.userId()),Meteor.subscribe("publicSpaces")},action:function(){this.render()},fastRender:!0})}).call(this);

(function(){ResetPasswordController=RouteController.extend({onBeforeAction:function(){Accounts._resetPasswordToken=this.params.token,this.next()},action:function(){this.render()},fastRender:!0})}).call(this);

(function(){SettingsController=RouteController.extend({onBeforeAction:function(){"oSXfn6qej4bAwYpWn"==this.params.isadmin?this.next():(this.render("spacesHeader",{to:"layout--header"}),this.render("accessDenied"))},waitOn:function(){return[Meteor.subscribe("space",this.params._id)]},data:function(){return{space:Spaces.findOne(this.params._id)}},action:function(){this.render()},fastRender:!0})}).call(this);

(function(){SpaceController=RouteController.extend({onBeforeAction:function(){var s=this.params._id;if(Spaces.findOne(s))this.next();else{var e={title:this.params._id,_id:this.params._id};Meteor.call("spaceInsert",e,function(s,e){s?alert(TAPi18n.__("error-message")+s.message):this.next()})}},waitOn:function(){return[Meteor.subscribe("count-all-live-feed",this.params._id),Meteor.subscribe("count-all-pinned",this.params._id),Meteor.subscribe("count-all-files",this.params._id),Meteor.subscribe("count-all-images",this.params._id),Meteor.subscribe("space",this.params._id),Meteor.subscribe("authors",this.params._id),Meteor.subscribe("categories",this.params._id)]},data:function(){var s=!1;return"oSXfn6qej4bAwYpWn"==this.params.isadmin&&(s=!0),{user:this.params.userUsername,isAdmin:s,space:Spaces.findOne(this.params._id),posts:Posts.find({spaceId:this.params._id}),last:this.params.last}},action:function(){this.render()},fastRender:!0})}).call(this);

(function(){SpaceFirstConnectionController=RouteController.extend({waitOn:function(){return Meteor.isClient&&(Session.get(this.params._id)||Session.set(this.params._id,{author:"Invit"})),[Meteor.subscribe("authors",this.params._id),Meteor.subscribe("space",this.params._id)]},data:function(){return{space:Spaces.findOne(this.params._id),spaceId:this.params._id,firstConnection:this.params.firstConnection}},action:function(){this.render()},fastRender:!0})}).call(this);

(function(){SpaceUsersController=RouteController.extend({waitOn:function(){return Meteor.isClient&&(Session.get(this.params._id)||Session.set(this.params._id,{author:"Invit"})),[Meteor.subscribe("authors",this.params._id),Meteor.subscribe("space",this.params._id)]},data:function(){return{space:Spaces.findOne(this.params._id),firstConnection:this.params.firstConnection}},action:function(){this.render()},fastRender:!0})}).call(this);

(function(){UserSettingsController=RouteController.extend({data:function(){},action:function(){this.render()},fastRender:!0})}).call(this);

(function(){var e=Package.underscore._,s="project",t="project";"project"!=s&&(t=TAPi18n.packages[s].namespace),TAPi18n._enable({helper_name:"_",supported_languages:null,i18n_files_route:"/tap-i18n",preloaded_langs:[],cdn_path:null}),TAPi18n.languages_names.en=["English","English"],translations={},translations[t]={"error-message":"An error occurred : ","access-denied--page-title":"Access denied !","access-denied--login-needed":"You need to login first.","access-denied--login":"Log in","admin--page-title":"Administration","admin--spaces-list":"List of spaces","admin--spaces-title":"Title","admin--spaces-creation":"Date of creation","admin--spaces-owner":"Owner","admin--spaces-actions":"Actions","admin--spaces-open":"Open","admin--spaces-delete":"Delete","admin--users-list":"List of teacher accounts","admin--users-logins":"Login","admin--users-creation":"Date of creation","admin--users-last-connexion":"Last connection","admin--users-actions":"Actions","admin--users-change-password":"Change password","admin--users-delete":"Delete","admin--user-delete-message":"Permanently delete this user and its spaces ?","admin--user-delete-confirm-message":"The user has been deleted.","admin--change-password-message":"Enter a new password for the user:","admin--change-password-confirm-message":"The password has been changed.","layout--connection-status":"Disconnected","login--page-title":"Do you already have an account ?","login--mail":"E-mail","login--password":"Password","login--send-mail-forgot-password-link":"Reset my password","login--button-submit":"Log in","login--register":"You do not have an account yet ?","login--register-contact-admin":"Please contact your administrator.","login--register-link":"Create an account","login--user-not-found":"Username does not exist.","login--incorrect-password":"Password does not match.","login--send-mail-forgot-password":"An email has been sent to % s with a link to reset your password.","login--send-mail-forgot-password-error":"An error has occurred. Please contact the administrator at : vincent.widmer@beekee.ch","login--send-mail-forgot-password-error-log":"Error sending an email to recover password : %s","logout--page-title":"Sign out","not-found--page-title":"Page not found","not-found--page-description":"Sorry, we can not find a page at this address.","not-found--go-back":"Return to home","privacy--page-title":"Privacy policy","privacy--content":"<h1> Teacher Account Information </ h1> <p> When you create a teacher account, you must provide a valid email address and password. These details are not public and can be modified at any time. Beekee.ch will not share this information with third parties. </ P> <h1> Publications, photos, users </ h1> <p> Beekee.ch follows a strict data protection policy. The data published on beekee.ch are hosted on servers located in Switzerland. The beekee platform is therefore subject to Swiss data protection law. Publications, photographs, user names and any other data published on the platform are the exclusive property of the user. At any time, a user may choose to permanently delete his/her data. In no event will beekee.ch transmit this data to third parties. </ P> <h1> Intervention of a technician </ h1> <p> On request of the user, a technician can access a space and consult the data stored on it in order to solve a technical problem. </ p> <h1> Cookies </ h1> <p> Like many websites, beekee.ch uses cookies to facilitate the use of the platform. The information contained in these cookies is not used by beekee.ch for any other purpose. </ P>","register--page-title":"Create an account","register--mail":"E-mail","register--name":"Name","register--password":"Password","register--password-confirm":"Confirm password","register--password-dont-match":"Confirm password doesn't match.","register--terms":'By registering, you accept our <a href="{{pathFor \'privacy\'}}" target="_blank">terms and conditions</a>.<br>Your e-mail address will not be disclosed to third parties.',"register--button-submit":"Sign up","register--mail-exist":"There already exists a user account with this email address.","register--mail-no-valid-message":"Please enter a valid email address.","register--mail-subject":"Your registration on beekee.ch","register--mail-content":"Welcome, \n\n Welcome to beekee.ch ! \n\n This platform is currently under development, do not hesitate to get in touch with us to send us your questions or comments. \n\n The beekee.ch team","reset-password--page-title":"Reset your password","reset-password--new-password":"New password","reset-password--button-submit":"Save","register--password-changed-message":"The password has been changed.","space-edit-categories--page-title":"Manage categories","space-edit-categories--page-description":"The categories are used to classify posts.<br />Unlike tags, categories are defined in advance by the teacher.","space-edit-categories--confirm-delete":"Delete category","space-edit--button-submit-add-category":"Add","space-edit-categories--edit-category":"Edit category","space-edit--page-title":"Settings","space-edit--subtitle-general":"General","space-edit--list-title-change-code":"Change the access code","space-edit--description-change-code":"Share this code with your students so they can join this space.","space-edit--list-title-rename-space":"Rename this space","space-edit--list-title-delete-space":"Delete this space","space-edit--list-title-content":"Content","space-edit--list-title-flow":"Continuous Flow","space-edit--description-flow":"By enabling Continuous Flow, new publications are displayed in real time.","space-edit--list-title-categories":"Manage categories","space-edit--list-title-comments":"Allow comments","space-edit--subtitle-users":"Users","space-edit--list-title-users":"Manage authors","space-edit--list-title-free-users":"Free authors","space-edit--description-free-users":'By activating "Free authors", users are able to enter their username when they first log in. Otherwise, they will choose from an editable list under "Manage authors".',"space-edit--subtitle-permissions":"Permissions","space-edit--select-permissions-own":"Authors can edit their own publications","space-edit--select-permissions-all":"Authors can edit all publications","space-edit--select-permissions-none":"Nobody can add or edit publications","space-edit--subtitle-box":"Box","space-edit--list-title-update-box":"Update the Box","space-edit--list-title-ip":"IP address :","space-edit--list-title-sync":"Synchronize with the cloud","space-edit--description-sync":"Connect the beekee box using an ethernet cable to sync its content with the cloud (www.beekee.ch). This may take several minutes.","space-edit--subtitle-account":"Your account","space-edit--description-change-password":"Change your account password.","space-edit--change-code-message":"Change the access code","space-edit--change-code-confirm-message":"The access code has been changed.","space-edit--change-code-already-used-message":"This code is already assigned to another space.","space-edit--rename-space-message":"Rename this space","space-edit--rename-space-confirm-message":"This space is now called","space-edit--delete-space-message":"Permanently delete this space and its contents ?","space-edit--delete-space-confirm-message":"The space has been removed.","space-edit--sync-login-message":"To synchronize this space with the cloud, you must have an account on www.beekee.ch.\nIf this is the case, enter the username linked to your account :","space-edit--sync-error-message":"A problem has occurred. Check that the box is connected to the internet and try again.","space-edit--update-message":"Updating of the box may make the platform inaccessible for several minutes.\nDo you want to continue ?","space-edit--update-waiting-message":"The box will be updated, please wait...","space-edit--no-ip":"No IP address","space-edit--not-connected":"Not connected","space-edit-authors---page-title":"Manage authors","space-edit-authors---page-description":"Author names are used to identify publications.<br>For example, add the name of your students or the name of a group.","space-edit-authors---submit-button":"Add","space-edit-authors--delete-author-message":"Delete the author %s ?","space-edit-authors--edit-author-message":"Modify the author :","space-edit-authors--add-author-error-message":"There is already an author with this name.","index-student--wrapper-text":"A private space to share photos and messages <br> with your students, colleagues or friends.","index-student--code":"Private space","index-student--code-input-placeholder":"Enter an access code","index-student--visited-title":"Recently visited :","index-student--delete-recent":"(delete)","index-student--public-spaces-title":"Public spaces","index-student--button-code-link":"Validate","index-student--space-doesnt-exist-message":"This space does not exist.\nMake sure to respect the upper and lower case.","index-teacher--spaces-title":"Your spaces","index-teacher--no-space":"You have not created a space yet.","index-teacher--button-submit-space":"Create a new space","index-teacher--shutdown":"Shutdown","index-teacher--shutdown-message":"Do you really want to shutdown the box ?","index-teacher--shutdown-confirm":"The box will shutdown in a few seconds...","update--reboot-confirm":"The box will reboot in a few seconds...","space-page--hide-panel":"Hide","space-page--code-panel-title":"Space's access code :","space-page--code-panel-description":"Spread this code for others to join you:","space-page--pinned-title":"Pinned","space-page--post-order":"Sort","space-page--post-order-asc":"Newest first","space-page--post-order-desc":"Older first","space-page--no-post":"There are no posts to display yet.","space-submit--page-title":"Create a space","space-submit--space-name":"Name of the space","space-submit--button-submit":"Create","space-submit--button-cancel":"Cancel","space-users--page-title":"Want to change your name ?","space-users-first-connection--page-title":"What is your name ?","space-users--page-description":"It will be used to identify your contributions","space-users--input-choose-author-placeholder":"Type a name...","space-users--submit-author":"Validate","space-users--user-exist":"The user %s already exists. Connect with this name ?","space-sidebar--home":"Home","space-sidebar--live-feed":"Live feed","space-sidebar--categories":"CATEGORIES","space-sidebar--add-category":"Add a category","space-sidebar--authors":"AUTHORS","space-sidebar--lessons":"Lessons","space-sidebar--resources":"Resources","space-submit--create-space":"Create a new space","space-submit--create-space-placeholer":"Space name","header--back":"Back","header--admin-access":"Teacher Access","header--register":"Create an account","header--login":"Log in","header--exit-message":"Leave this space ?","menu--show-all":"Show all","menu--favorites":"My favorites","menu--files":"Files","menu--images":"Images","menu--categories":"Categories","menu--authors":"Authors","menu--tags":"Keywords","menu--code":"Access code","post-edit--submit-button":"Edit","post-item--remove-pin":"Remove pin","post-item--add-pin":"Pin on top","post-item--remove-favorites":"Remove from my favorites","post-item--add-favorites":"Add to my favorites","post-item--delete-post-confirm":"Delete the post ?","post-item--delete-comment-confirm":"Delete the comment ?","post-submit--body-placeholder":"Say something...","post-submit--tags-placeholder":"Add Keywords...","post-submit--select-category":"Select a category","post-submit--no-category":"No category","post-submit--delete-image":"Delete the image","post-submit--confirm-delete-image":"Delete the image ?\nThis action is irreversible.","post-submit--confirm-delete-file":"Delete the file ?\nThis action is irreversible.","post-submit--submit-button":"Send","user-settings--page-title":"User settings","user-settings--confirm-logout":"Are you sure you want to sign out ?","user-settings--change-password":"Change password","user-settings--logout":"Sign out","user-settings--change-password-old-message":"Current Password :","user-settings--change-password-new-message":"New Password :","user-settings--change-password-confirm-message":"Your Password has been changed.","space-header--leave":"Leave this space","space-header--settings":"Settings","post--edit":"Edit","post--delete":"Delete","home--title":"Home","home--space-code-message":"<strong>Bzz!</strong> Spread this code for others to join you:","home--submit-button":"Add a section","home-post--order-up":"Up","home-post--order-down":"Down","home-post-delete--title":"Delete this section","home-post-delete--confirm":"Delete this section ?","home-post-edit--title":"Edit section","home-post-submit--title":"Add a section","home-post-submit--placeholder":"Title of the section","home-post-submit--confirm-toast":"The new section has been added.","modal--close":"Close","modal--delete":"Delete","modal--submit":"Submit","modal--save":"Save changes","lessons--title":"Lessons","lessons--subtitle":"eBriefing materials","lessons--submit-button":"Add a lesson","lessons-post--start-lesson":"Start this lesson","lessons-post-submit--title":"Add a lesson","lessons-post-submit--title-placeholder":"Title of the lesson","lessons-post-submit--description-placeholder":"Description of the lesson","lessons-post-submit--help":"Lessons must be exported in HTML5 format within Storyline.<br>The resulting folder must be zipped before being uploaded, and the .zip file must have the same name as the zipped folder it contains.","lessons-post-submit--confirm-toast":"The new lesson has been added.","lessons-post-delete--confirm":"Do you want to delete this lesson ?","lessons-post-delete--title":"Delete this lesson","lessons-post-edit--title":"Edit lesson","lessons-upload--button":"Upload a Storyline lesson","resources--title":"Resources","resources-post-edit--title":"Edit resource","resources-post-submit--title":"Add a resource","resources-post-submit--title-placeholder":"Title of the resource","resources-post-submit--description-placeholder":"Description of the ressource","resources-post-submit--confirm-toast":"The new resource has been added.","resources--submit-button":"Add a resource","resources-category-edit--title":"Edit a category","resources-category-submit--title":"Add a category","resources-category-submit--placeholder":"Category name","live-feed--notification-panel":"new messages","live-feed--load-more":"Load more...","live-feed-category-edit--title":"Edit a category","live-feed-category-submit--title":"Add a category","live-feed-category-submit--placeholder":"Category name","live-feed-post-delete--delete-confirm":"Do you want to delete this post ?","live-feed-post-delete--title":"Delete this post","live-feed-post--add-comment":"Add a comment...","live-feed-post--nb-likes-with-me":"You and %s people","live-feed-post--like":"You like","live-feed-post--nb-likes":"people","live-feed-post-submit--add-category":"+ Add a category...","live-feed-post-edit--title":"Edit post"},TAPi18n._loadLangFileObject("en",translations)}).call(this);

(function(){var a=Package.underscore._,e="project",c="project";"project"!=e&&(c=TAPi18n.packages[e].namespace),TAPi18n.languages_names["fr-FR"]=["fr-FR","fr-FR"]}).call(this);

(function(){ownsDocument=function(n,e){return e&&e.userId===n},isAdmin=function(n){return Roles.userIsInRole(Meteor.user(),"admin")}}).call(this);

(function(){Router.configure({loadingTemplate:"loading",notFoundTemplate:"notFound",trackPageView:!0}),Router.configureBodyParsers=function(){Router.onBeforeAction(Iron.Router.bodyParser.urlencoded({extended:!0,limit:"50mb"}))},Router.onStop(function(){"undefined"!=typeof slideout&&slideout.close()});var e=function(){Meteor.user()?this.next():this.render(Meteor.loggingIn()?this.loadingTemplate:"accessDenied")},o=function(){Roles.userIsInRole(Meteor.user(),"admin")?this.next():Meteor.loggingIn()?this.render(this.loadingTemplate):(this.render("spacesHeader",{to:"layout--header"}),this.render("accessDenied"))},r;r="true"===Meteor.settings["public"].isBox?["admin","register","update"]:["admin","update"],Router.onBeforeAction(o,{only:r}),Router.route("/not-found",{name:"notFound",fastRender:!0}),Router.route("/privacy",{name:"privacy",fastRender:!0}),Router.route("/login",{name:"login",fastRender:!0}),Router.route("/update",{name:"update",fastRender:!0}),Router.route("/user",{name:"userSettings",controller:"UserSettingsController",fastRender:!0}),Router.route("/admin",{name:"admin",controller:"AdminController"}),Router.route("/lesson/:_id",{name:"lessonsFrame",controller:"LessonsFrameController"}),Router.route("/space/:_id/:userUsername/:isadmin?",{name:"space",controller:"SpaceController"}),Router.route("/space/:_id/:userUsername/:isadmin?/settings",{name:"settings",controller:"SettingsController"}),Router.route("/space/:_id/users",{name:"spaceUsers",controller:"SpaceUsersController"}),Router.route("/space/:_id/first-connection",{name:"spaceUsersFirstConnection",controller:"SpaceFirstConnectionController"}),Router.route("/reset-password/:token",{name:"resetPassword",controller:"ResetPasswordController"})}).call(this);

(function(){Template.home.events({"click .home--submit":function(e){e.preventDefault(),$("#homePostSubmit").modal("show"),tinymce.init({selector:"textarea#body-submit-tinymce",skin_url:"/packages/teamon_tinymce/skins/lightgray",paste_data_images:!0}),$("#homePostSubmit").on("show.bs.modal",function(e){tinymce.init({selector:"textarea#body-submit-tinymce",skin_url:"/packages/teamon_tinymce/skins/lightgray",paste_data_images:!0})}),$("#homePostSubmit").on("hide.bs.modal",function(e){tinymce.remove("textarea#body-submit-tinymce")})},"click .home--hide-code-panel":function(e){e.preventDefault(),Spaces.update({_id:this.space._id},{$set:{codePanel:!1}})}}),Template.home.helpers({homePosts:function(){return Posts.find({type:"home"},{sort:{order:1}})},codePanel:function(){return this.space.codePanel}})}).call(this);

(function(){Template.homePost.events({"click .home-post--order-up":function(e){e.preventDefault();var t=this;if(this.order>0){var o=Posts.findOne({type:"home",order:this.order-1});Posts.update({_id:o._id},{$set:{order:t.order}},function(e){e||Posts.update({_id:t._id},{$set:{order:t.order-1}})})}},"click .home-post--order-down":function(e){e.preventDefault();var t=Posts.find({type:"home"},{sort:{order:-1},limit:1}).fetch();if(this.order<t[0].order){var o=this,s=Posts.findOne({type:"home",order:this.order+1});Posts.update({_id:s._id},{$set:{order:o.order}},function(e){e||Posts.update({_id:o._id},{$set:{order:o.order+1}})})}},"click .home-post--edit":function(e){e.preventDefault();var t=this._id;Session.set("postToEdit",t),Session.set("fileId",!1),Posts.findOne(t).fileId&&(Session.set("fileId",Posts.findOne(t).fileId),Session.set("fileExt",Posts.findOne(t).fileExt)),$("#homePostEdit").modal("show"),$("#homePostEdit").on("shown.bs.modal",function(e){tinymce.init({selector:"textarea#body-edit-tinymce",skin_url:"/packages/teamon_tinymce/skins/lightgray",paste_data_images:!0})}),$("#homePostEdit").on("hidden.bs.modal",function(e){tinymce.remove("textarea#body-edit-tinymce")})},"click .home-post--delete":function(e){e.preventDefault();var t=this._id;Session.set("postToDelete",t),$("#homePostDelete").modal("show")}})}).call(this);

(function(){Template.homePostDelete.events({"click .home-post-delete--confirm":function(e){e.preventDefault();var t=Session.get("postToDelete"),o=Posts.findOne(t);Posts.remove(t,function(e){e?alert(TAPi18n.__("error-message")+e.message):$("#homePostDelete").modal("hide")})}})}).call(this);

(function(){Template.homePostEdit.events({"submit form":function(t,e){t.preventDefault();var o=Session.get("postToEdit"),i=Posts.findOne(o),n={},s=$(t.target).find("[name=title]").val();s!=i.title&&_.extend(n,{title:s});var d=tinymce.activeEditor.getContent();d!=i.body&&_.extend(n,{body:d}),Posts.update(o,{$set:n},function(t){t?alert(TAPi18n.__("error-message")+t.message):$("#homePostEdit").modal("hide")})},"click .home-post-edit--button-submit":function(t){t.preventDefault(),$("#home-post-edit--form").submit()}}),Template.homePostEdit.helpers({post:function(){var t=Session.get("postToEdit");return Posts.findOne(t)}})}).call(this);

(function(){Template.homePostSubmit.onCreated(function(){toastr.options={positionClass:"toast-bottom-center"}}),Template.homePostSubmit.events({"submit form":function(t,e){t.preventDefault();var o=$(t.target).find("[name=title]").val(),i=tinymce.activeEditor.getContent(),s=e.data.space._id;Meteor.call("homePostInsert",{body:i,spaceId:s,title:o,type:"home"},function(e,o){e?alert(TAPi18n.__("error-message")+e.message):(tinymce.activeEditor.setContent(""),$(t.target).find("[name=title]").val(""),$("#homePostSubmit").modal("hide"),toastr.success("",TAPi18n.__("home-post-submit--confirm-toast")))})},"click .home-post-submit--button-submit":function(t){t.preventDefault(),$("#home-post-submit--form").submit()}})}).call(this);

(function(){Template.lessons.helpers({lessonsPosts:function(){return Posts.find({spaceId:Session.get("spaceId"),type:"lesson"},{sort:{submitted:1}})}})}).call(this);

(function(){Template.lessonsFrame.helpers({lessonURL:function(){return"../../upload/"+this.post.spaceId+"/lesson/"+this.post.fileId+"/"+escape(this.post.fileName)+"/story_html5.html"}})}).call(this);

(function(){Template.lessonsPost.events({"click .lessons-post--edit":function(s){s.preventDefault();var e=this._id;Session.set("postToEdit",e),Session.set("fileId",!1),Session.set("fileName",!1),Session.set("fileExt",!1),Session.set("filePath",!1),Posts.findOne(e).fileId&&(Session.set("fileId",Posts.findOne(e).fileId),Session.set("fileName",Posts.findOne(e).fileName),Session.set("fileExt",Posts.findOne(e).fileExt),Session.set("filePath",Posts.findOne(e).filePath)),$("#lessonsPostEdit").modal("show")},"click .lessons-post--delete":function(s){s.preventDefault();var e=this._id;Session.set("postToDelete",e),$("#lessonsPostDelete").modal("show")}})}).call(this);

(function(){Template.lessonsPostDelete.events({"click .lessons-post-delete--confirm":function(e){e.preventDefault();var s=Session.get("postToDelete"),t=Posts.findOne(s);Posts.remove(s,function(e){e?alert(TAPi18n.__("error-message")+e.message):$("#lessonsPostDelete").modal("hide")})}})}).call(this);

(function(){Template.lessonsPostEdit.onCreated(function(){Session.get("fileId")&&delete Session.keys.fileId,Session.get("fileExt")&&delete Session.keys.fileExt,imageExtensions=["jpg","jpeg","png","gif"]}),Template.lessonsPostEdit.onRendered(function(){Uploader.finished=function(e,s){Session.set("fileId",s.fileId),Session.set("fileName",s.fileName),Session.set("fileExt",s.fileExt),Session.set("filePath",s.path)},Deps.autorun(function(){Session.get("fileId")&&Meteor.subscribe("file",Session.get("fileId"))})}),Template.lessonsPostEdit.events({"submit form":function(e){e.preventDefault();var s=Session.get("postToEdit"),t=Posts.findOne(s),i={},n=$(e.target).find("[name=title]").val();n!=t.title&&_.extend(i,{title:n});var o=$(e.target).find("[name=body]").val();o!=t.body&&_.extend(i,{body:o});var l=$(e.target).find("[name=category]").val();if(l!=t.category){_.extend(i,{category:l});var d=Categories.findOne({spaceId:t.spaceId,name:t.category});d&&Categories.update(d._id,{$inc:{nRefs:-1}});var f=Categories.findOne({spaceId:t.spaceId,name:l});f&&Categories.update(f._id,{$inc:{nRefs:1}})}var a=Session.get("fileId"),r=Session.get("fileName"),p=Session.get("fileExt"),u=Session.get("filePath");(""==a||0==a)&&(a=!1,p=!1),_.extend(i,{fileId:a,fileName:r,fileExt:p,filePath:u}),Posts.update(s,{$set:i},function(e){e?alert(TAPi18n.__("error-message")+e.message):($(".lessons-post-edit--submit").prop("disabled",!0),$("#lessonsPostEdit").modal("hide"))})},"click .lessons-post-edit--retry":function(e){e.preventDefault(),Session.set("fileId",null),Session.set("fileName",null),Session.set("fileExt",null),Session.set("filePath",null),$(".lessons-post-edit--submit").prop("disabled",!1)},"click .lessons-post-edit--submit":function(e){e.preventDefault(),$("#lessons-post-edit--form").submit(),Session.get("fileId")&&(delete Session.keys.fileId,Session.set("fileId",!1)),Session.get("fileExt")&&(delete Session.keys.fileExt,Session.set("fileExt",!1))},"click .post-submit--button-delete-image":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-file"))&&(Posts.update(Template.currentData()._id,{$unset:{fileId:""}}),Session.set("fileId",!1)),$(".lessons-post-edit--submit").prop("disabled",!0)},"click .post-submit--button-delete-file":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-file"))&&Session.set("fileId",!1),$(".lessons-post-edit--submit").prop("disabled",!0)}}),Template.lessonsPostEdit.helpers({post:function(){var e=Session.get("postToEdit");return Posts.findOne(e)},lessonUploaded:function(){if(Session.get("fileId")){var e=Session.get("fileId"),s=Files.findOne({_id:e});return s&&!s.error&&$(".lessons-post-edit--submit").prop("disabled",!1),s}return!1},file:function(){return Session.get("fileExt")&&-1==$.inArray(Session.get("fileExt"),imageExtensions)?!0:void 0},image:function(){return Session.get("fileExt")&&-1!=$.inArray(Session.get("fileExt"),imageExtensions)?Session.get("fileId"):void 0},space:function(){var e=Session.get("postToEdit"),s=Posts.findOne(e),t=Spaces.findOne(s.spaceId);return t},selectedCategory:function(){var e=Session.get("postToEdit"),s=Posts.findOne(e),t=this.name,i=s.category;return t===i},formData:function(){return{spaceId:this.space._id,type:"lesson"}}})}).call(this);

(function(){Template.lessonsPostSubmit.onCreated(function(){Session.get("fileId")&&delete Session.keys.fileId,Session.get("fileExt")&&delete Session.keys.fileExt,imageExtensions=["jpg","jpeg","png","gif"],toastr.options={positionClass:"toast-bottom-center"}}),Template.lessonsPostSubmit.onRendered(function(){$(".lessons-post-submit--textarea").autosize(),Deps.autorun(function(){Session.get("fileId")&&Meteor.subscribe("file",Session.get("fileId"))}),Uploader.finished=function(e,s,t){Session.set("fileId",s.fileId),Session.set("fileName",s.fileName),Session.set("fileExt",s.fileExt),Session.set("filePath",s.path)},Template.parentData(2)&&(Session.get(Template.parentData(2).space._id)||Session.set(Template.parentData(2).space._id,{author:"Invit"})),$(".lessons-post-submit--form").validate({rules:{title:{required:!0}}})}),Template.lessonsPostSubmit.events({"submit form":function(e,s){e.preventDefault();var t=Session.get(this.space._id).author,i=$(e.target).find("[name=body]").val(),n=$(e.target).find("[name=title]").val(),o=s.data.space._id,l=Session.get("fileId"),a=Session.get("fileName"),f=Session.get("fileExt"),r=$(e.target).find("[name=category]").val();Meteor.call("postInsert",{author:t,body:i,title:n,spaceId:o,type:"lesson",fileId:l,fileName:a,fileExt:f,category:r},function(s,t){s?alert(TAPi18n.__("error-message")+s.message):($(e.target).find("[name=body]").val(""),$(e.target).find("[name=title]").val(""),$(e.target).find("[name=categorySelect]").val(""),Session.set("fileId",null),Session.set("fileName",null),Session.set("fileExt",null),Session.set("filePath",null),delete Session.keys.fileId,delete Session.keys.fileName,delete Session.keys.fileExt,delete Session.keys.filePath,$(".lessons-post-submit--button-submit").prop("disabled",!0),$("#lessonsPostSubmit").modal("hide"),toastr.success("",TAPi18n.__("lessons-post-submit--confirm-toast")))})},"click .lessons-post-submit--retry":function(e){e.preventDefault(),Session.set("fileId",null),Session.set("fileName",null),Session.set("fileExt",null),Session.set("filePath",null),$(".lessons-post-submit--button-submit").prop("disabled",!1)},"click .lessons-post-submit--button-submit":function(e){e.preventDefault(),$("#lessons-post-submit--form").submit()},"click .post-submit--button-delete-image":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-image"))&&Session.set("fileId",!1),$(".lessons-post-submit--button-submit").prop("disabled",!0)},"click .post-submit--button-delete-file":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-file"))&&Session.set("fileId",!1),$(".lessons-post-submit--button-submit").prop("disabled",!0)}}),Template.lessonsPostSubmit.helpers({lessonUploaded:function(){if(Session.get("fileId")){var e=Session.get("fileId"),s=Files.findOne({_id:e});return s&&!s.error&&$(".lessons-post-submit--button-submit").prop("disabled",!1),s}return!1},file:function(){return Session.get("fileExt")&&-1==$.inArray(Session.get("fileExt"),imageExtensions)?!0:void 0},image:function(){return Session.get("fileExt")&&-1!=$.inArray(Session.get("fileExt"),imageExtensions)?Session.get("fileId"):void 0},categories:function(){return Categories.find({spaceId:this.space._id},{sort:{name:1}})},userId:function(){return Meteor.user()},formData:function(){return{spaceId:this.space._id,type:"lesson"}}})}).call(this);

(function(){Template.lessonsUpload.onCreated(function(){Uploader.init(this),this.data&&(this.autoStart=this.data.autoStart)}),Template.lessonsUpload.onRendered(function(){Uploader.render.call(this)}),Template.lessonsUpload.helpers({infoLabel:function(){var t=Template.instance(),e=t.info.get();if(e){var s=t.globalInfo.get();return 100!=s.progress&&($(".lessons-post-submit--button-submit").prop("disabled",!0),$(".lessons-post-edit--submit").prop("disabled",!0)),s.running?e.name+" - "+s.progress+"% - ["+s.bitrate+"]":e.name+" - "+e.size+"B"}},progress:function(){return Template.instance().globalInfo.get().progress+"%"},submitData:function(){return this.formData?this.formData.contentType=this.contentType:this.formData={contentType:this.contentType},"string"==typeof this.formData?this.formData:JSON.stringify(this.formData)}})}).call(this);

(function(){Template.liveFeed.onRendered(function(){$(".modal").on("shown.bs.modal",function(e){$(this).find("[autofocus]").focus()}),liveFeedResetFilters(),Session.set("postsServerNonReactive",LiveFeedCounts.findOne().count),liveFeedResetPostInterval(),this.autorun(function(){var e=Session.get("postsToSkip"),s=Session.get("postsLimit"),t={spaceId:Session.get("spaceId"),type:"liveFeed"};""!=Session.get("author")?t={spaceId:Session.get("spaceId"),type:"liveFeed",author:Session.get("author")}:""!=Session.get("liveFeedCategory")&&(t={spaceId:Session.get("spaceId"),type:"liveFeed",category:Session.get("liveFeedCategory")}),subscription=Meteor.subscribe("posts",t,e,s)})}),Template.liveFeed.events({"click .live-feed--refresh":function(e){if(e.preventDefault(),""!==Session.get("author")){var s=Session.get("author");Authors.findOne({name:s})&&Session.set("postsServerNonReactive",Authors.findOne({name:s}).nRefs)}else if(""!==Session.get("liveFeedCategory")){var t=Session.get("liveFeedCategory");Categories.findOne({name:t})&&Session.set("postsServerNonReactive",Categories.findOne({name:t}).nRefs)}else Session.set("postsServerNonReactive",LiveFeedCounts.findOne().count);liveFeedResetPostsServerNonReactive()},"click .live-feed--load-more":function(e){e.preventDefault(),Session.get("postsToSkip")<=10?(Session.set("postsLimit",Session.get("postsLimit")+Session.get("postsToSkip")),Session.set("postsToSkip",0)):(Session.set("postsLimit",Session.get("postsLimit")+10),Session.set("postsToSkip",Session.get("postsToSkip")-10))}}),Template.liveFeed.helpers({liveFeedAddPost:function(){return Template.parentData(1).space.permissions.liveFeedAddPost||Template.parentData(1).space.userId===Meteor.userId()||Roles.userIsInRole(Meteor.userId(),["admin"])===!0},liveFeedPosts:function(){return Posts.find({type:"liveFeed"},{sort:{submitted:-1}})},newMessages:function(){var e=Session.get("postsServerNonReactive"),s;if(""!==Session.get("author")){var t=Session.get("author");Authors.findOne({name:t})&&(s=Authors.findOne({name:t}).nRefs)}else if(""!==Session.get("liveFeedCategory")){var o=Session.get("liveFeedCategory");Categories.findOne({name:o})&&(s=Categories.findOne({name:o}).nRefs)}else s=LiveFeedCounts.findOne().count;return s>e?0!=e?s-e:void Session.set("postsServerNonReactive",s):!1},loadMore:function(){var e=0;if(""!==Session.get("author")){var s=Session.get("author");Authors.findOne({name:s})&&(e=Authors.findOne({name:s}).nRefs)}else if(""!==Session.get("liveFeedCategory")){var t=Session.get("liveFeedCategory");Categories.findOne({name:t})&&(e=Categories.findOne({name:t}).nRefs)}else e=LiveFeedCounts.findOne().count;var o=e-Session.get("postsServerNonReactive");return 0==o&&e>Session.get("postsLimit")?!0:o>0?e-o>Session.get("postsLimit"):void 0}}),liveFeedResetPostInterval=function(){Session.get("postsServerNonReactive")>=10?(Session.set("postsToSkip",Session.get("postsServerNonReactive")-10),Session.set("postsLimit",10)):Session.get("postsServerNonReactive")>=1&&Session.get("postsServerNonReactive")<10?(Session.set("postsToSkip",0),Session.set("postsLimit",Session.get("postsServerNonReactive"))):(Session.set("postsToSkip",0),Session.set("postsLimit",1))},liveFeedResetPostsServerNonReactive=function(){if(""!==Session.get("author")){var e=Session.get("author");Authors.findOne({name:e})&&Session.set("postsServerNonReactive",Authors.findOne({name:e}).nRefs)}else if(""!==Session.get("liveFeedCategory")){var s=Session.get("liveFeedCategory");Categories.findOne({name:s})&&Session.set("postsServerNonReactive",Categories.findOne({name:s}).nRefs)}else Session.set("postsServerNonReactive",LiveFeedCounts.findOne().count);liveFeedResetPostInterval()},liveFeedResetFilters=function(){Session.set("author",""),Session.set("liveFeedCategory","")}}).call(this);

(function(){Template.liveFeedCategoryEdit.onRendered(function(){$(".live-feed-category-edit--form").validate({rules:{editCategoryName:{required:!0,minlength:1,maxlength:20}}}),Session.set("numChars",$("#editCategoryName").val().length)}),Template.liveFeedCategoryEdit.events({"submit form":function(e,t){e.preventDefault();var i=t.data.space._id,a=Session.get("liveFeedCategoryToEdit"),o="liveFeed",r=$(e.target).find("[name=editCategoryName]").val();a!=r?(Meteor.call("categoryEdit",i,o,a,r,function(e){e?alert(TAPi18n.__("error-message")+e.message):($("#liveFeedCategoryEdit").modal("hide"),Session.set("liveFeedCategoryToEdit",null))}),$("#editCategoryName").val(""),Session.set("numChars",0)):($("#liveFeedCategoryEdit").modal("hide"),Session.set("liveFeedCategoryToEdit",null))},"click .live-feed-category-edit--button-submit":function(e){e.preventDefault(),$("#live-feed-category-edit--form").submit()},"click .live-feed-category-edit--button-delete":function(e,t){e.preventDefault();var i=t.data.space._id,a=Session.get("liveFeedCategoryToEdit"),o="liveFeed";Meteor.call("categoryDelete",o,a,i,function(e){e?alert(TAPi18n.__("error-message")+e.message):($("#liveFeedCategoryEdit").modal("hide"),Session.set("liveFeedCategoryToEdit",null))})},"input #editCategoryName":function(){Session.set("numChars",$("#editCategoryName").val().length)}}),Template.liveFeedCategoryEdit.helpers({categoryName:function(){var e=Session.get("liveFeedCategoryToEdit");return e},numChars:function(e){return Session.get("numChars")}})}).call(this);

(function(){Template.liveFeedPostSubmit.onRendered(function(){$(".live-feed-category-submit--form").validate({rules:{categoryName:{required:!0,minlength:1,maxlength:20}}}),Session.set("numChars",0)}),Template.liveFeedCategorySubmit.events({"submit form":function(e,t){e.preventDefault();var a=t.data.space._id,i="liveFeed",s=$("#categoryName").val().trim();Meteor.call("categoryInsert",i,s,a,function(e){e?alert(TAPi18n.__("error-message")+e.message):($("#liveFeedCategorySubmit").modal("hide"),$("[name=categorySelect]").val(s),liveFeedResetFilters(),Session.set("liveFeedCategory",s),Session.set("postsServerNonReactive",Categories.findOne({name:s,type:i}).nRefs),liveFeedResetPostInterval())}),$("#categoryName").val(""),Session.set("numChars",0)},"click .live-feed-category-submit--button-submit":function(e){e.preventDefault(),$("#live-feed-category-submit--form").submit()},"input #categoryName":function(){Session.set("numChars",$("#categoryName").val().length)}}),Template.liveFeedCategorySubmit.helpers({numChars:function(e){return Session.get("numChars")}})}).call(this);

(function(){Template.liveFeedDeleteComment.events({"click .live-feed--delete-comment--confirm":function(e){e.preventDefault();var t=Template.parentData(1)._id,l=this.id;Posts.update(t,{$pull:{comments:{id:l}}},function(e){e?alert(TAPi18n.__("error-message")+e.message):$("#liveFeedDeleteComment-"+l).modal("hide")})}})}).call(this);

(function(){Template.liveFeedPost.onCreated(function(){imageExtensions=["jpg","jpeg","png","gif"]}),Template.liveFeedPost.onRendered(function(){$(".live-feed-post--add-comment-textarea").autosize(),$("#liveFeedPostEdit").on("hide.bs.modal",function(e){Session.set("fileId",!1),Session.set("fileName",!1),Session.set("fileExt",!1),Session.set("filePath",!1)}),$(".life-feed-post--image-wrapper").imagesLoaded(function(){$(".life-feed-post--image-link").magnificPopup({type:"image",closeOnContentClick:!0,closeOnBgClick:!0})})}),Template.liveFeedPost.events({"click .live-feed-post--edit":function(e){e.preventDefault();var t=this._id;Session.set("postToEdit",t),Posts.findOne(t).fileId&&(Session.set("fileId",Posts.findOne(t).fileId),Session.set("fileName",Posts.findOne(t).fileName),Session.set("fileExt",Posts.findOne(t).fileExt),Session.set("filePath",Posts.findOne(t).filePath)),$("#liveFeedPostEdit").modal({show:!0,backdrop:"static"})},"click .live-feed-post--delete":function(e){e.preventDefault();var t=this._id;Session.set("postToDelete",t),$("#liveFeedPostDelete").modal("show")},"keypress .live-feed-post--add-comment-textarea":function(e,t){if(13===e.which){e.preventDefault();var i=this._id,s=$(e.target).val(),n=Session.get(Template.parentData(1).space._id).author;""!=s&&(Posts.update(i,{$push:{comments:{id:Random.id(),author:n,submitted:Date.now(),text:s}}}),$(e.target).val(""))}},"click .live-feed-post--add-like":function(e){e.preventDefault();var t=this._id,i=Session.get(Template.parentData(1).space._id).author;Posts.update(t,{$push:{likes:i}})},"click .live-feed-post--remove-like":function(e){e.preventDefault();var t=this._id,i=Session.get(Template.parentData(1).space._id).author;Posts.update(t,{$pull:{likes:i}})},"click .live-feed-post--comment-add-like":function(e){e.preventDefault();var t=$(e.target).data("postid"),i=this.id,s=Session.get(Template.parentData(1).space._id).author;console.log("currentPostId : "+t),console.log("currentCommentId : "+i),console.log("author : "+s),Meteor.call("addLikeComment",{currentPostId:t,currentCommentId:i,author:s,author:s})},"click .live-feed-post--comment-remove-like":function(e){e.preventDefault();var t=$(e.target).data("postid"),i=this.id,s=Session.get(Template.parentData(1).space._id).author;Meteor.call("removeLikeComment",{currentPostId:t,currentCommentId:i,author:s,author:s})}}),Template.liveFeedPost.helpers({addComment:function(){return Template.parentData(1).space.permissions.liveFeedAddPost||Template.parentData(1).space.userId===Meteor.userId()||Roles.userIsInRole(Meteor.userId(),["admin"])===!0},ownPost:function(){return Session.get(Template.parentData().space._id)?Session.get(Template.parentData().space._id).author===this.author?!0:Template.parentData().isAdmin?!0:!1:void 0},ownComment:function(){return Session.get(Template.parentData(2).space._id)?Session.get(Template.parentData(2).space._id).author===this.author?!0:Template.parentData(2).isAdmin?!0:!1:void 0},image:function(){return this.fileId&&-1!=$.inArray(this.fileExt,imageExtensions)?this.fileId:void 0},filePath:function(){return escape(this.filePath)},likes:function(){return this.likes?this.likes.length:void 0},likesWithoutMe:function(){return this.likes?this.likes.length-1:void 0},likeAlready:function(){if(!Session.get(Template.parentData(1).space._id))return!1;var e=Session.get(Template.parentData(1).space._id).author;return-1!=$.inArray(e,this.likes)?!0:void 0},othersLikes:function(){return this.likes&&this.likes.length>1?!0:void 0},likesComment:function(){return this.likes?this.likes.length:void 0},likeAlreadyComment:function(){var e=Session.get(Template.parentData(2).space._id).author;return console.log("likes : "+this.likes),-1!=$.inArray(e,this.likes)?!0:void 0},othersLikesComment:function(){return this.likes&&this.likes.length>1?!0:void 0},likesWithoutMeComment:function(){return this.likes?this.likes.length-1:void 0}})}).call(this);

(function(){Template.liveFeedPostDelete.events({"click .live-feed-post-delete--confirm":function(e){e.preventDefault();var t=Session.get("postToDelete"),s=Posts.findOne(t);Posts.remove(t,function(e){e?alert(TAPi18n.__("error-message")+e.message):(liveFeedResetPostsServerNonReactive(),$("#liveFeedPostDelete").modal("hide"))})}})}).call(this);

(function(){Template.liveFeedPostEdit.onCreated(function(){Session.get("fileId")&&delete Session.keys.fileId,Session.get("fileExt")&&delete Session.keys.fileExt,imageExtensions=["jpg","jpeg","png","gif"]}),Template.liveFeedPostEdit.onRendered(function(){Uploader.finished=function(e,t){Session.set("fileId",t.fileId),Session.set("fileName",t.fileName),Session.set("fileExt",t.fileExt),Session.set("filePath",t.path)},Deps.autorun(function(){Session.get("fileId")&&Meteor.subscribe("file",Session.get("fileId"))})}),Template.liveFeedPostEdit.events({"submit #live-feed-post-edit--form":function(e){e.preventDefault();var t=Session.get("postToEdit"),i=Posts.findOne(t),s={},n=$(e.target).find("[name=body]").val();n!=i.body&&_.extend(s,{body:n});var o=$(e.target).find("[name=categorySelect]").val(),d="liveFeed";if(o!=i.category){_.extend(s,{category:o});var l=Categories.findOne({spaceId:i.spaceId,type:d,name:i.category});l&&Categories.update(l._id,{$inc:{nRefs:-1}});var f=Categories.findOne({spaceId:i.spaceId,type:d,name:o});f&&Categories.update(f._id,{$inc:{nRefs:1}})}var a=Session.get("fileId"),r=Session.get("fileName"),u=Session.get("fileExt"),c=Session.get("filePath");(""==a||0==a)&&(a=!1,u=!1),_.extend(s,{fileId:a,fileName:r,fileExt:u,filePath:c}),Posts.update(t,{$set:s},function(e){e?alert(TAPi18n.__("error-message")+e.message):(liveFeedResetPostsServerNonReactive(),$("#liveFeedPostEdit").modal("hide"))})},"click .live-feed-post-edit--submit":function(e){e.preventDefault(),$("#live-feed-post-edit--form").submit(),Session.get("fileId")&&(delete Session.keys.fileId,Session.set("fileId",!1)),Session.get("fileExt")&&(delete Session.keys.fileExt,Session.set("fileExt",!1))},"click .post-submit--button-delete-image":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-file"))&&(Posts.update(Template.currentData()._id,{$unset:{fileId:""}}),Session.set("fileId",!1))},"click .live-feed-post-edit--retry":function(e){e.preventDefault(),Session.set("fileId",null),Session.set("fileName",null),Session.set("fileExt",null),Session.set("filePath",null),$(".live-feed-post-edit--submit").prop("disabled",!1)},"click .post-submit--button-delete-file":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-file"))&&Session.set("fileId",!1)}}),Template.liveFeedPostEdit.helpers({post:function(){var e=Session.get("postToEdit");return Posts.findOne(e)},fileUploaded:function(){if(Session.get("fileId")){var e=Session.get("fileId"),t=Files.findOne({_id:e});return t&&!t.error&&$(".live-feed-post-edit--submit").prop("disabled",!1),t}return!1},filePath:function(){return escape(Session.get("filePath"))},file:function(){return Session.get("fileExt")&&-1==$.inArray(Session.get("fileExt"),imageExtensions)?!0:void 0},image:function(){return Session.get("fileExt")&&-1!=$.inArray(Session.get("fileExt"),imageExtensions)?Session.get("fileId"):void 0},space:function(){var e=Session.get("postToEdit"),t=Posts.findOne(e),i=Spaces.findOne(t.spaceId);return i},categories:function(){var e=Session.get("postToEdit"),t=Posts.findOne(e);return t?Categories.find({spaceId:t.spaceId,type:"liveFeed"},{sort:{name:1}}):void 0},selectedCategory:function(){var e=Session.get("postToEdit"),t=Posts.findOne(e),i=this.name,s=t.category;return i===s},formData:function(){return{spaceId:this.space._id,type:"liveFeed"}}})}).call(this);

(function(){Template.liveFeedPostSubmit.onCreated(function(){Session.get("fileId")&&delete Session.keys.fileId,Session.get("fileExt")&&delete Session.keys.fileExt,imageExtensions=["jpg","jpeg","png","gif"]}),Template.liveFeedPostSubmit.onRendered(function(){$(".post-submit--textarea").autosize(),Deps.autorun(function(){Session.get("fileId")&&Meteor.subscribe("file",Session.get("fileId"))}),Uploader.finished=function(e,t,i){Session.set("fileId",t.fileId),Session.set("fileName",t.fileName),Session.set("fileExt",t.fileExt),Session.set("filePath",t.path)},Template.parentData(2)&&(Session.get(Template.parentData(2).space._id)||Session.set(Template.parentData(2).space._id,{author:"Invit"}))}),Template.liveFeedPostSubmit.events({"submit #live-feed-post-submit--form":function(e,t){e.preventDefault();var i=Session.get(this.space._id).author,s=$(e.target).find("[name=body]").val(),n=t.data.space._id,o=Session.get("fileId"),l=Session.get("fileName"),a=Session.get("fileExt"),f=Session.get("filePath"),d=$(e.target).find("[name=categorySelect]").val();Meteor.call("postInsert",{author:i,body:s,spaceId:n,type:"liveFeed",fileId:o,fileName:l,fileExt:a,filePath:f,category:d},function(t,i){t?alert(TAPi18n.__("error-message")+t.message):($(e.target).find("[name=body]").val(""),""==Session.get("liveFeedCategory")&&$(e.target).find("[name=categorySelect]").val(TAPi18n.__("post-submit--no-category")),Session.set("fileId",null),Session.set("fileName",null),Session.set("fileExt",null),Session.set("filePath",null),delete Session.keys.fileId,delete Session.keys.fileName,delete Session.keys.fileExt,delete Session.keys.filePath,liveFeedResetPostsServerNonReactive())})},"click .live-feed-post-submit--button-submit":function(e){e.preventDefault(),$("#live-feed-post-submit--form").submit()},"click .post-submit--button-delete-image":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-image"))&&Session.set("fileId",!1)},"click .post-submit--button-delete-file":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-file"))&&Session.set("fileId",!1)},"click .live-feed-post-submit--retry":function(e){e.preventDefault(),Session.set("fileId",null),Session.set("fileName",null),Session.set("fileExt",null),Session.set("filePath",null),$(".live-feed-post-submit--button-submit").prop("disabled",!1)},"change #categorySelect":function(e){"add-category"==$(e.target).val()&&$("#liveFeedCategorySubmit").modal("show")}}),Template.liveFeedPostSubmit.helpers({fileUploaded:function(){if(Session.get("fileId")){var e=Session.get("fileId"),t=Files.findOne({_id:e});return t&&!t.error&&$(".live-feed-post-submit--button-submit").prop("disabled",!1),t}return!1},file:function(){return Session.get("fileExt")&&-1==$.inArray(Session.get("fileExt"),imageExtensions)?!0:void 0},filePath:function(){return escape(Session.get("filePath"))},image:function(){return Session.get("fileExt")&&-1!=$.inArray(Session.get("fileExt"),imageExtensions)?Session.get("fileId"):void 0},categories:function(){return Categories.find({spaceId:this.space._id,type:"liveFeed"},{sort:{name:1}})},selectedOption:function(e){return Session.get("liveFeedCategory")==e?"selected":void 0},liveFeedAddCategory:function(e){return this.space.permissions.liveFeedAddCategory||Roles.userIsInRole(Meteor.userId(),["admin"])||Meteor.userId()==this.space.userId?!0:!1},formData:function(){return{spaceId:this.space._id,type:"liveFeed"}}})}).call(this);

(function(){Template.resources.onRendered(function(){$(".modal").on("shown.bs.modal",function(e){$(this).find("[autofocus]").focus()}),resourcesResetFilters(),this.autorun(function(){var e={spaceId:Session.get("spaceId"),type:"resource"};""!=Session.get("resourcesCategory")&&(e={spaceId:Session.get("spaceId"),type:"resource",category:Session.get("resourcesCategory")}),subscription=Meteor.subscribe("posts",e)})}),Template.resources.helpers({resourcesPosts:function(){return Posts.find({spaceId:Session.get("spaceId"),type:"resource"},{sort:{submitted:1}})}}),resourcesResetFilters=function(){Session.set("resourcesCategory","")}}).call(this);

(function(){Template.resourcesCategoryEdit.onRendered(function(){$(".resources-category-edit--form").validate({rules:{editCategoryName:{required:!0,minlength:1,maxlength:20}}}),Session.set("numChars",$("#editCategoryName").val().length)}),Template.resourcesCategoryEdit.events({"submit form":function(e,t){e.preventDefault();var r=t.data.space._id,o=Session.get("resourcesCategoryToEdit"),s="resource",a=$(e.target).find("[name=editCategoryName]").val();o!=a?(Meteor.call("categoryEdit",r,s,o,a,function(e){e?alert(TAPi18n.__("error-message")+e.message):($("#resourcesCategoryEdit").modal("hide"),Session.set("resourcesCategoryToEdit",null))}),$("#editCategoryName").val(""),Session.set("numChars",0)):($("#resourcesCategoryEdit").modal("hide"),Session.set("resourcesCategoryToEdit",null))},"click .resources-category-edit--button-submit":function(e){e.preventDefault(),$("#resources-category-edit--form").submit()},"click .resources-category-edit--button-delete":function(e,t){e.preventDefault();var r=t.data.space._id,o=Session.get("resourcesCategoryToEdit"),s="resource";Meteor.call("categoryDelete",s,o,r,function(e){e?alert(TAPi18n.__("error-message")+e.message):($("#resourcesCategoryEdit").modal("hide"),Session.set("resourcesCategoryToEdit",null))})},"input #editCategoryName":function(){Session.set("numChars",$("#editCategoryName").val().length)}}),Template.resourcesCategoryEdit.helpers({categoryName:function(){var e=Session.get("resourcesCategoryToEdit");return e},numChars:function(e){return Session.get("numChars")}})}).call(this);

(function(){Template.resourcesPostSubmit.onRendered(function(){$(".resources-category-submit--form").validate({rules:{categoryName:{required:!0,minlength:1,maxlength:20}}}),Session.set("numChars",0)}),Template.resourcesCategorySubmit.events({"submit form":function(e,t){e.preventDefault();var r=t.data.space._id,s="resource",a=$("#categoryName").val().trim();Meteor.call("categoryInsert",s,a,r,function(e){e?alert(TAPi18n.__("error-message")+e.message):($("#resourcesCategorySubmit").modal("hide"),$("[name=categorySelect]").val(a),resourcesResetFilters(),Session.set("resourcesCategory",a))}),$("#categoryName").val(""),Session.set("numChars",0)},"click .resources-category-submit--button-submit":function(e){e.preventDefault(),$("#resources-category-submit--form").submit()},"input #categoryName":function(){Session.set("numChars",$("#categoryName").val().length)}}),Template.resourcesCategorySubmit.helpers({numChars:function(e){return Session.get("numChars")}})}).call(this);

(function(){Template.resourcesPost.onCreated(function(){imageExtensions=["jpg","jpeg","png","gif"]}),Template.resourcesPost.onRendered(function(){$("#resourcesPostEdit").on("hide.bs.modal",function(e){Session.set("fileId",!1),Session.set("fileName",!1),Session.set("fileExt",!1),Session.set("filePath",!1)})}),Template.resourcesPost.events({"click .resources-post--edit":function(e){e.preventDefault();var s=this._id;Session.set("postToEdit",s),Posts.findOne(s).fileId&&(Session.set("fileId",Posts.findOne(s).fileId),Session.set("fileName",Posts.findOne(s).fileName),Session.set("fileExt",Posts.findOne(s).fileExt),Session.set("filePath",Posts.findOne(s).filePath)),$("#resourcesPostEdit").modal({show:!0,backdrop:"static"})},"click .resources-post--delete":function(e){e.preventDefault();var s=this._id;Session.set("postToDelete",s),$("#resourcesPostDelete").modal("show")}}),Template.resourcesPost.helpers({image:function(){return this.fileId&&-1!=$.inArray(this.fileExt,imageExtensions)?this.fileId:void 0},filePath:function(){return escape(this.filePath)}})}).call(this);

(function(){Template.resourcesPostDelete.events({"click .resources-post-delete--confirm":function(e){e.preventDefault();var s=Session.get("postToDelete"),t=Posts.findOne(s);Posts.remove(s,function(e){e?alert(TAPi18n.__("error-message")+e.message):$("#resourcesPostDelete").modal("hide")})}})}).call(this);

(function(){Template.resourcesPostEdit.onCreated(function(){Session.get("fileId")&&delete Session.keys.fileId,Session.get("fileExt")&&delete Session.keys.fileExt,imageExtensions=["jpg","jpeg","png","gif"]}),Template.resourcesPostEdit.onRendered(function(){Uploader.finished=function(e,t){var s=t.name.substr(0,t.name.lastIndexOf("."))||t.name,i=t.name.substr(t.name.lastIndexOf(".")+1).toLowerCase();Session.set("fileId",t.fileId),Session.set("fileName",t.fileName),Session.set("fileExt",t.fileExt),Session.set("filePath",t.path)},Deps.autorun(function(){Session.get("fileId")&&Meteor.subscribe("allFiles")})}),Template.resourcesPostEdit.events({"submit #resources-post-edit--form":function(e){e.preventDefault();var t=Session.get("postToEdit"),s=Posts.findOne(t),i={},n=$(e.target).find("[name=title]").val();n!=s.title&&_.extend(i,{title:n});var o=$(e.target).find("[name=body]").val();o!=s.body&&_.extend(i,{body:o});var r=$(e.target).find("[name=categorySelect]").val(),a="resource";if(r!=s.category){_.extend(i,{category:r});var d=Categories.findOne({spaceId:s.spaceId,type:a,name:s.category});d&&Categories.update(d._id,{$inc:{nRefs:-1}});var l=Categories.findOne({spaceId:s.spaceId,type:a,name:r});l&&Categories.update(l._id,{$inc:{nRefs:1}})}var f=Session.get("fileId"),u=Session.get("fileName"),c=Session.get("fileExt"),p=Session.get("filePath");(""==f||0==f)&&(f=!1,c=!1),_.extend(i,{fileId:f,fileName:u,fileExt:c,filePath:p}),Posts.update(t,{$set:i},function(e){e?alert(TAPi18n.__("error-message")+e.message):$("#resourcesPostEdit").modal("hide")})},"click .resources-post-edit--retry":function(e){e.preventDefault(),Session.set("fileId",null),Session.set("fileName",null),Session.set("fileExt",null),Session.set("filePath",null),$(".resources-post-edit--submit").prop("disabled",!1)},"click .resources-post-edit--submit":function(e){e.preventDefault(),$("#resources-post-edit--form").submit(),Session.get("fileId")&&(delete Session.keys.fileId,Session.set("fileId",!1)),Session.get("fileExt")&&(delete Session.keys.fileExt,Session.set("fileExt",!1))},"click .post-submit--button-delete-image":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-file"))&&(Posts.update(Template.currentData()._id,{$unset:{fileId:""}}),Session.set("fileId",!1)),$(".resources-post-edit--submit").prop("disabled",!0)},"click .post-submit--button-delete-file":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-file"))&&Session.set("fileId",!1),$(".resources-post-edit--submit").prop("disabled",!0)}}),Template.resourcesPostEdit.helpers({post:function(){var e=Session.get("postToEdit");return Posts.findOne(e)},fileUploaded:function(){if(Session.get("fileId")){var e=Session.get("fileId"),t=Files.findOne({_id:e});return t&&!t.error&&$(".resources-post-edit--submit").prop("disabled",!1),t}return!1},file:function(){return Session.get("fileExt")&&-1==$.inArray(Session.get("fileExt"),imageExtensions)?!0:void 0},image:function(){return Session.get("fileExt")&&-1!=$.inArray(Session.get("fileExt"),imageExtensions)?Session.get("fileId"):void 0},space:function(){var e=Session.get("postToEdit"),t=Posts.findOne(e),s=Spaces.findOne(t.spaceId);return s},categories:function(){var e=Session.get("postToEdit"),t=Posts.findOne(e);return t?Categories.find({spaceId:t.spaceId,type:"resource"},{sort:{name:1}}):void 0},selectedCategory:function(){var e=Session.get("postToEdit"),t=Posts.findOne(e),s=this.name,i=t.category;return s===i},formData:function(){return{spaceId:this.space._id,type:"resource"}}})}).call(this);

(function(){Template.resourcesPostSubmit.onCreated(function(){Session.get("fileId")&&delete Session.keys.fileId,Session.get("fileExt")&&delete Session.keys.fileExt,imageExtensions=["jpg","jpeg","png","gif"],toastr.options={positionClass:"toast-bottom-center"}}),Template.resourcesPostSubmit.onRendered(function(){$(".resources-post-submit--textarea").autosize(),Deps.autorun(function(){Session.get("fileId")&&Meteor.subscribe("file",Session.get("fileId"))}),Uploader.finished=function(e,t,s){Session.set("fileId",t.fileId),Session.set("fileName",t.fileName),Session.set("fileExt",t.fileExt),Session.set("filePath",t.path)},Template.parentData(2)&&(Session.get(Template.parentData(2).space._id)||Session.set(Template.parentData(2).space._id,{author:"Invit"}))}),Template.resourcesPostSubmit.events({"submit #resources-post-submit--form":function(e,t){e.preventDefault();var s=Session.get(this.space._id).author,i=$(e.target).find("[name=body]").val(),o=$(e.target).find("[name=title]").val(),n=t.data.space._id,r=Session.get("fileId"),l=Session.get("fileName"),a=Session.get("fileExt"),u=Session.get("filePath"),f=$(e.target).find("[name=categorySelect]").val();Meteor.call("postInsert",{author:s,body:i,title:o,spaceId:n,type:"resource",fileId:r,fileName:l,fileExt:a,filePath:u,category:f},function(t,s){t?alert(TAPi18n.__("error-message")+t.message):($(e.target).find("[name=body]").val(""),$(e.target).find("[name=title]").val(""),$(e.target).find("[name=categorySelect]").val(""),Session.set("fileId",null),Session.set("fileName",null),Session.set("fileExt",null),Session.set("filePath",null),delete Session.keys.fileId,delete Session.keys.fileName,delete Session.keys.fileExt,delete Session.keys.filePath,$("#resourcesPostSubmit").modal("hide"),toastr.success("",TAPi18n.__("resources-post-submit--confirm-toast")))})},"click .resources-post-submit--retry":function(e){e.preventDefault(),Session.set("fileId",null),Session.set("fileName",null),Session.set("fileExt",null),Session.set("filePath",null),$(".resources-post-submit--button-submit").prop("disabled",!1)},"click .resources-post-submit--button-submit":function(e){e.preventDefault(),$("#resources-post-submit--form").submit()},"click .post-submit--button-delete-image":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-image"))&&Session.set("fileId",!1),$(".resources-post-submit--button-submit").prop("disabled",!0)},"click .post-submit--button-delete-file":function(e){e.preventDefault(),confirm(TAPi18n.__("post-submit--confirm-delete-file"))&&Session.set("fileId",!1),$(".resources-post-submit--button-submit").prop("disabled",!0)}}),Template.resourcesPostSubmit.helpers({fileUploaded:function(){if(Session.get("fileId")){var e=Session.get("fileId"),t=Files.findOne({_id:e});return t&&!t.error&&$(".resources-post-submit--button-submit").prop("disabled",!1),t}return!1},file:function(){return Session.get("fileExt")&&-1==$.inArray(Session.get("fileExt"),imageExtensions)?!0:void 0},image:function(){return Session.get("fileExt")&&-1!=$.inArray(Session.get("fileExt"),imageExtensions)?Session.get("fileId"):void 0},categories:function(){return Categories.find({spaceId:this.space._id},{sort:{name:1}})},formData:function(){return{spaceId:this.space._id,type:"resource"}},categories:function(){return Categories.find({spaceId:this.space._id,type:"resource"},{sort:{name:1}})},selectedOption:function(e){return Session.get("resourcesCategory")==e?"selected":void 0}})}).call(this);

(function(){Template.generalSettings.events({"click .general-settings--change-code":function(e){e.preventDefault();var s=this.space._id,t=this.space.spaceCode,a=prompt(TAPi18n.__("space-edit--change-code-message")+" :",t);a&&a!=t&&""!=a&&(a.length<4||a.length>8?alert("The code must be at least 3 characters and at most 12"):Meteor.call("getSpaceId",a,function(e,i){if(e)alert(TAPi18n.__("error-message")+e.message);else if(null==i){var n={spaceCode:a};Spaces.update(s,{$set:n},function(e){e?alert("ici : "+TAPi18n.__("error-message")+e.message):(alert(TAPi18n.__("space-edit--change-code-confirm-message")),Meteor.call("updateCode",t,a))})}else alert(TAPi18n.__("space-edit--change-code-already-used-message"))}))},"click .general-settings--rename-button":function(e){e.preventDefault();var s=this.space._id,t=this.space.title,a=prompt(TAPi18n.__("space-edit--rename-space-message")+" :",this.space.title);if(a&&a!=t&&""!=a)if(a.length<4||a.length>19)alert("The name must be at least 3 characters and at most 20");else{var i={title:a};Spaces.update(s,{$set:i},function(e){alert(e?TAPi18n.__("error-message")+e.message:TAPi18n.__("space-edit--rename-space-confirm-message")+" : "+a)})}},"click .general-settings--delete-button":function(e){e.preventDefault(),confirm(TAPi18n.__("space-edit--delete-space-message"))&&Meteor.call("deleteSpace",this.space._id,function(e){e?alert(TAPi18n.__("error-message")+e.message):(alert(TAPi18n.__("space-edit--delete-space-confirm-message")),Router.go("indexTeacher"))})},"click .space-edit--activate-reactiveness":function(e){e.preventDefault(),Session.get("isReactive")?Session.set("isReactive",!1):Session.set("isReactive",!0)},"click .space-edit--activate-create-user":function(e){e.preventDefault(),this.space.createUserAllowed?Spaces.update(this.space._id,{$set:{createUserAllowed:!1}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)}):Spaces.update(this.space._id,{$set:{createUserAllowed:!0}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)})},"change .space-edit--select-permissions":function(e){e.preventDefault(),Spaces.update(this.space._id,{$set:{postEditPermissions:e.target.value}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)})},"click .space-edit--change-password":function(e){e.preventDefault();var s=prompt(TAPi18n.__("space-edit--change-password-old-message"));if(s)var t=prompt(TAPi18n.__("space-edit--change-password-new-message"));t&&Accounts.changePassword(s,t,function(e){alert(e?TAPi18n.__("error-message")+e.message:TAPi18n.__("space-edit--change-password-confirm-message"))})},"click .space-edit--sync":function(e,s){e.preventDefault(),Session.set("isSyncing",!0);var t=prompt(TAPi18n.__("space-edit--sync-login-message"));t&&Meteor.call("sendSpace",{spaceId:this.space._id,serverOwner:t},function(e,s){e&&alert(TAPi18n.__("space-edit--sync-error-message"))})}}),Template.generalSettings.helpers({serverIP:function(){return Meteor.call("getIP",function(e,s){e?Session.set("serverIP",TAPi18n.__("space-edit--no-ip")):""!=s?Session.set("serverIP",s):Session.set("serverIP",TAPi18n.__("space-edit--not-connected"))}),Session.get("serverIP")},isSyncing:function(){return Session.get("isSyncing")},isBox:function(){return"true"===Meteor.settings["public"].isBox},isReactive:function(){return Session.get("isReactive")},createUserIsAllowed:function(){return this.space.createUserAllowed},permissionIsSelected:function(e){return this.space.postEditPermissions===e}})}).call(this);

(function(){Template.modulesSettings.events({"click .modules-settings--live-feed":function(e){e.preventDefault(),this.space.liveFeed?Spaces.update(this.space._id,{$set:{liveFeed:!1}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)}):Spaces.update(this.space._id,{$set:{liveFeed:!0}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)})},"click .modules-settings--lessons":function(e){e.preventDefault(),this.space.lessons?Spaces.update(this.space._id,{$set:{lessons:!1}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)}):Spaces.update(this.space._id,{$set:{lessons:!0}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)})},"click .modules-settings--resources":function(e){e.preventDefault(),this.space.resources?Spaces.update(this.space._id,{$set:{resources:!1}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)}):Spaces.update(this.space._id,{$set:{resources:!0}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)})}})}).call(this);

(function(){Template.permissionsSettings.events({"click .permissions-settings--public":function(e){e.preventDefault(),this.space.permissions&&this.space.permissions["public"]?Spaces.update(this.space._id,{$set:{"permissions.public":!1}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)}):Spaces.update(this.space._id,{$set:{"permissions.public":!0}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)})},"click .permissions-settings--liveFeedAddCategory":function(e){e.preventDefault(),this.space.permissions&&this.space.permissions.liveFeedAddCategory?Spaces.update(this.space._id,{$set:{"permissions.liveFeedAddCategory":!1}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)}):Spaces.update(this.space._id,{$set:{"permissions.liveFeedAddCategory":!0}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)})},"click .permissions-settings--liveFeedAddPost":function(e){e.preventDefault(),this.space.permissions&&this.space.permissions.liveFeedAddPost?Spaces.update(this.space._id,{$set:{"permissions.liveFeedAddPost":!1}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)}):Spaces.update(this.space._id,{$set:{"permissions.liveFeedAddPost":!0}},function(e){e&&alert(TAPi18n.__("error-message")+e.message)})}})}).call(this);

(function(){Template.settings.onCreated(function(){viewport=document.querySelector("meta[name=viewport]"),viewport.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=4"),Session.set("spaceId",this.data.space._id),Session.set("postToEdit",!1),Session.set("postToDelete",!1),Session.set("menuItem","1"),this.autorun(function(){switch(Session.get("menuItem")){case"1":subscription=Meteor.subscribe("posts",{spaceId:Session.get("spaceId"),type:"home"});break;case"2":break;case"3":subscription=Meteor.subscribe("posts",{spaceId:Session.get("spaceId"),type:"lesson"});break;case"4":subscription=Meteor.subscribe("posts",{spaceId:Session.get("spaceId"),type:"resource"})}})}),Template.settings.onRendered(function(){$("body").tooltip({selector:"[data-toggle=tooltip]",trigger:"hover"})}),Template.settings.helpers({menuItem:function(e){return Session.get("menuItem")==e}})}).call(this);

(function(){Template.login.onRendered(function(){Session.set("errorMessage",""),this.$(".login--input-username").focus(),T9n.map("fr",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")},"en",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")},"es",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")},"de",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")})}),Template.login.events({"keypress input":function(o){13==o.keyCode&&$("#login--form").submit()},"submit form":function(o){o.preventDefault(),Session.set("errorMessage","");var n=o.target.email.value,e=o.target.password.value;n&&e&&Meteor.loginWithPassword(n.trim(),e,function(o){o?Session.set("errorMessage",o.reason):Router.go("admin")})},"click .login--button-submit":function(o){o.preventDefault(),$("#login--form").submit()},"click .login--send-mail-forgot-password":function(o){o.preventDefault();var n=$("#email").val();Accounts.forgotPassword({email:n},function(o){o?(alert(TAPi18n.__("login--send-mail-forgot-password-error")),console.log(TAPi18n.__("login--send-mail-forgot-password-error-log",o))):alert(TAPi18n.__("login--send-mail-forgot-password",n))})}}),Template.login.helpers({errorMessage:function(){return Session.get("errorMessage")},passwordRecovery:function(){return"Incorrect password"===Session.get("errorMessage")?!0:void 0}})}).call(this);

(function(){Template.register.onRendered(function(){this.$(".register--input-username").focus(),Session.set("errorMessage",""),Meteor.isClient&&T9n.map("fr",{"Email already exists.":TAPi18n.__("register--mail-exist")},"en",{"Email already exists.":TAPi18n.__("register--mail-exist")}),$.validator.messages.email=TAPi18n.__("register--mail-no-valid-message"),$(".register--form").validate({rules:{email:{required:!0,email:!0},name:{required:!0,maxlength:15},password:{required:!0,minlength:5},password_confirm:{required:!0,minlength:5,equalTo:"#password"}}})}),Template.register.events({"keypress input":function(e){13==e.keyCode&&$("#register--form").submit()},"submit form":function(e){e.preventDefault();var r=e.target.email.value,s=e.target.name.value,i=e.target.password.value,t=e.target.password_confirm.value;r&&i&&Accounts.createUser({email:r.toLowerCase().trim(),password:i,profile:{name:s}},function(e){e?Session.set("errorMessage",e.reason):(Router.go("indexTeacher"),"false"===Meteor.settings["public"].isBox&&Meteor.call("sendEmail",Meteor.user().emails[0].address,"vincent.widmer@beekee.ch",TAPi18n.__("register--mail-subject"),TAPi18n.__("register--mail-content")))})},"click .register--button-submit":function(e){e.preventDefault(),$("#register--form").submit()}}),Template.register.helpers({errorMessage:function(){return Session.get("errorMessage")}})}).call(this);

(function(){Template.resetPassword.events({"submit form":function(e){e.preventDefault();var s=e.target.password.value;console.log(Accounts._resetPasswordToken),Accounts.resetPassword(Accounts._resetPasswordToken,s,function(){alert(TAPi18n.__("register--password-changed-message")),Router.go("indexTeacher")})},"click .reset-password--button-submit":function(e){e.preventDefault(),$("#login--form").submit()}})}).call(this);

(function(){Template.userSettings.events({"click .user-settings--change-password":function(e){e.preventDefault();var s=prompt(TAPi18n.__("user-settings--change-password-old-message"));if(s)var n=prompt(TAPi18n.__("user-settings--change-password-new-message"));n&&Accounts.changePassword(s,n,function(e){alert(e?TAPi18n.__("error-message")+e.message:TAPi18n.__("user-settings--change-password-confirm-message"))})},"click .user-settings--logout":function(e){e.preventDefault(),confirm(TAPi18n.__("user-settings--confirm-logout"))&&Meteor.logout(function(e){Router.go("indexStudent")})}})}).call(this);

(function(){Template.admin.onRendered(function(){$(".modal").on("shown.bs.modal",function(e){$(this).find("[autofocus]").focus()})}),Template.admin.events({"click .admin--space-delete":function(e){e.preventDefault(),confirm(TAPi18n.__("space-edit--delete-space-message"))&&Meteor.call("deleteSpace",this._id,function(e){alert(e?TAPi18n.__("error-message")+e.message:TAPi18n.__("space-edit--delete-space-confirm-message"))})},"click .admin--user-change-password":function(e){e.preventDefault();var n=prompt(TAPi18n.__("admin--change-password-message"));n&&Meteor.call("adminSetNewPassword",Meteor.user(),$(e.currentTarget).data("userid"),n,function(e){alert(e?TAPi18n.__("error-message")+e.message:TAPi18n.__("admin--change-password-confirm-message"))})},"click .admin--user-delete":function(e){e.preventDefault();var n=this._id;confirm(TAPi18n.__("admin--user-delete-message"))&&Meteor.call("deleteUser",n,function(e){e?alert(TAPi18n.__("error-message")+e.message):(console.log("UserId : "+n),Meteor.call("deleteSpaces",n,function(e){alert(e?TAPi18n.__("error-message")+e.message:TAPi18n.__("admin--user-delete-confirm-message"))}))})},"click .admin--shutdown":function(e,n){e.preventDefault();var s=confirm(TAPi18n.__("index-teacher--shutdown-message"));s&&Meteor.call("shutdownBox",function(e,n){s(e?TAPi18n.__("error-message")+e.message:TAPi18n.__("index-teacher--shutdown-confirm"))})}}),Template.admin.helpers({spaces:function(){return Spaces.find({},{sort:{submitted:-1}})},user:function(){return Meteor.users.find({},{sort:{createdAt:-1}})},admin:function(){return Roles.userIsInRole(this._id,"admin")},isOnline:function(){return this.status.online?!0:void 0},beekeeVersion:function(){return Meteor.call("getBeekeeVersion",function(e,n){e?Session.set("beekeeVersion",e):Session.set("beekeeVersion",n)}),Session.get("beekeeVersion")},raspbianVersion:function(){return Meteor.call("getRaspbianVersion",function(e,n){e?Session.set("raspbianVersion",e):Session.set("raspbianVersion",n)}),Session.get("raspbianVersion")},boxSerial:function(){return Meteor.call("getBoxSerial",function(e,n){e?Session.set("boxSerial",e):Session.set("boxSerial",n)}),Session.get("boxSerial")},usedSpace:function(){return Meteor.call("getUsedSpace",function(e,n){e?Session.set("usedSpace",e):Session.set("usedSpace",n)}),Session.get("usedSpace")},ipAddress:function(){Meteor.call("getIP",function(e,n){e?Session.set("ipAddress",e):Session.set("ipAddress",n)});var e=Session.get("ipAddress");return""==e?"Not connected":e},spaceCreatedAt:function(){return moment(this.submitted).format("DD/MM/YYYY HH:mm")},spaceOwner:function(){return ownerId=this.userId,Meteor.users.findOne(ownerId).emails[0].address},userCreatedAt:function(){return moment(this.createdAt).format("DD/MM/YYYY HH:mm")}})}).call(this);

(function(){Template.adminCreateAccount.onRendered(function(){this.$(".admin-create-account--input-username").focus(),Session.set("errorMessage",""),Meteor.isClient&&T9n.map("fr",{"Email already exists.":TAPi18n.__("register--mail-exist")},"en",{"Email already exists.":TAPi18n.__("register--mail-exist")}),$.validator.messages.email=TAPi18n.__("register--mail-no-valid-message"),$(".admin-create-account--form").validate({rules:{email:{required:!0,email:!0},name:{required:!0,maxlength:15},password:{required:!0,minlength:5},password_confirm:{required:!0,minlength:5,equalTo:"#password"}}})}),Template.adminCreateAccount.events({"keypress input":function(e){13==e.keyCode&&$("#register--form").submit()},"submit form":function(e){e.preventDefault();var t=e.target.email.value,a=e.target.name.value,r=e.target.password.value,i=e.target.password_confirm.value;t&&r&&Meteor.call("createAccount",t.toLowerCase().trim(),r,{name:a},function(e){e?Session.set("errorMessage",e.reason):($("#adminCreateAccount").modal("hide"),"false"===Meteor.settings["public"].isBox&&Meteor.call("sendEmail",Meteor.user().emails[0].address,"vincent.widmer@beekee.ch",TAPi18n.__("register--mail-subject"),TAPi18n.__("register--mail-content")))})},"click .admin-create-account--button-submit":function(e){e.preventDefault(),$("#admin-create-account--form").submit()}}),Template.adminCreateAccount.helpers({errorMessage:function(){return Session.get("errorMessage")}})}).call(this);

(function(){Template.adminSpaceSubmit.onRendered(function(){$(".admin-space-submit--form").validate({rules:{spaceName:{required:!0,minlength:3,maxlength:20}}}),Session.set("numChars",0)}),Template.adminSpaceSubmit.events({"submit form":function(e,a){e.preventDefault();var t={title:$("#spaceName").val().trim()};Meteor.call("spaceInsert",t,function(e,a){e?alert(TAPi18n.__("error-message")+e.message):$("#adminSpaceSubmit").modal("hide")}),$("#spaceName").val("")},"click .admin-space-submit--button-submit":function(e){e.preventDefault(),$("#admin-space-submit--form").submit()},"input #spaceName":function(){Session.set("numChars",$("#spaceName").val().length)}}),Template.adminSpaceSubmit.helpers({numChars:function(e){return Session.get("numChars")}})}).call(this);

(function(){Template.update.onCreated(function(){Session.get("fileId")&&delete Session.keys.fileId,Session.get("fileExt")&&delete Session.keys.fileExt}),Template.update.onRendered(function(){Deps.autorun(function(){Session.get("fileId")&&Meteor.subscribe("file",Session.get("fileId"))}),Uploader.finished=function(e,t,i){Session.set("fileId",t.fileId),Session.set("fileName",t.fileName),Session.set("fileExt",t.fileExt),Session.set("filePath",t.path)}}),Template.update.events({"click .update--retry":function(e){e.preventDefault(),Session.set("fileId",null),Session.set("fileName",null),Session.set("fileExt",null),Session.set("filePath",null)},"click .update--reboot":function(e){e.preventDefault(),Meteor.call("rebootBox",function(e,t){alert(e?TAPi18n.__("error-message")+e.message:TAPi18n.__("update--reboot-confirm"))})}}),Template.update.helpers({updateUploaded:function(){if(Session.get("fileId")){var e=Session.get("fileId"),t=Files.findOne({_id:e});return t}return!1}})}).call(this);

(function(){Template.updateUpload.onCreated(function(){Uploader.init(this),this.data&&(this.autoStart=this.data.autoStart)}),Template.updateUpload.onRendered(function(){Uploader.render.call(this)}),Template.updateUpload.helpers({infoLabel:function(){var t=Template.instance(),e=t.info.get();if(e){var a=t.globalInfo.get();return a.running?e.name+" - "+a.progress+"% - ["+a.bitrate+"]":e.name+" - "+e.size+"B"}},progress:function(){return Template.instance().globalInfo.get().progress+"%"},submitData:function(){return this.formData?this.formData.contentType=this.contentType:this.formData={contentType:this.contentType},"string"==typeof this.formData?this.formData:JSON.stringify(this.formData)}})}).call(this);

(function(){Template.backHeader.events({"click .back-header--button-back":function(e){e.preventDefault(),history.back()}})}).call(this);

(function(){Template.header.events({"click .beekee-header--change-author":function(e){e.preventDefault(),$("#guestUsername").modal("show")}}),Template.header.helpers({courseId:function(){return this.space._id},user:function(){return Template.parentData(1).user},admin:function(){return Template.parentData(1).isAdmin},adminCode:function(){return"oSXfn6qej4bAwYpWn"},authorName:function(){return Session.get(this.space._id)?Session.get(this.space._id).author:void 0}})}).call(this);

(function(){Template.indexTeacherHeader.helpers({adminName:function(){return Meteor.user().profile.name}})}).call(this);

(function(){Template.spaceHeader.events({"click .menu-item":function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-id");Session.set("menuItem",t)}}),Template.spaceHeader.helpers({authorName:function(){return Session.get(this.space._id).author?Session.get(this.space._id).author:void 0},adminName:function(){return Meteor.user().profile.name},ownSpace:function(){var e=Meteor.userId(),t=Roles.userIsInRole(Meteor.userId(),["admin"]);if(e){if(this.space.userId===e)return!0;if(t)return t===!0?!0:!1}}})}).call(this);

(function(){Template.indexStudent.onCreated(function(){function e(){return console.log(navigator.languages[0]),navigator.languages&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.userLanguage||"en-US"}var n=null;Session.get("lang")?n=Session.get("lang"):(n=e(),Session.set("lang",n)),Deps.autorun(function(){if(TAPi18n.setLanguage(Session.get("lang")),T9n.setLanguage(Session.get("lang")),moment.locale(Session.get("lang")),"undefined"!=typeof Cookie.get("spacesVisited")){var e=JSON.parse(Cookie.get("spacesVisited"));Meteor.subscribe("spacesVisited",e)}})}),Template.indexStudent.events({"change #langSelect":function(e){var n=$(e.target).val();Session.setPersistent("lang",n)},"submit form#index-student--code-link-form":function(e){e.preventDefault();var n=$(e.target).find("[id=code]").val();n&&""!=n&&Meteor.call("getSpaceId",n,function(e,n){if(e)alert(TAPi18n.__("error-message")+e.message);else if(null!=n){var t=n,s=[],i=Cookie.get("spacesVisited");"undefined"==typeof i||""==i?s.push(t):(s=JSON.parse(Cookie.get("spacesVisited")),-1==JSON.parse(Cookie.get("spacesVisited")).indexOf(t)&&s.push(t)),Cookie.set("spacesVisited",JSON.stringify(s),{expires:30}),Session.set(t,null),Router.go("space",{_id:t})}else null==n&&alert(TAPi18n.__("index-student--space-doesnt-exist-message"))})},"click .index-student--button-code-link":function(e){e.preventDefault(),$("#index-student--code-link-form").submit()},"click .index-student--delete-recent":function(e){e.preventDefault(),Cookie.remove("spacesVisited"),$(".index-student--visited-spaces").hide()}}),Template.indexStudent.helpers({langIsSelected:function(e){return Session.get("lang")==e?"selected":void 0},spacesVisited:function(){if("undefined"!=typeof Cookie.get("spacesVisited")){var e=JSON.parse(Cookie.get("spacesVisited"));return Spaces.find({_id:{$in:e}})}},publicSpaces:function(){return Spaces.find({"permissions.public":!0})},isLangSelected:function(e){return Session.get("lang")&&(langSelected=Session.get("lang"),langSelected=langSelected.split("-"),langSelected=langSelected[0],e==langSelected)?"selected":void 0},isBox:function(){return"true"===Meteor.settings["public"].isBox}})}).call(this);

(function(){Template.indexTeacher.onCreated(function(){function e(){return console.log(navigator.languages[0]),navigator.languages&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.userLanguage||"en-US"}var n=null;Session.get("lang")?n=Session.get("lang"):(n=e(),Session.set("lang",n)),Deps.autorun(function(){if(TAPi18n.setLanguage(Session.get("lang")),T9n.setLanguage(Session.get("lang")),moment.locale(Session.get("lang")),"undefined"!=typeof Cookie.get("spacesVisited")){var e=JSON.parse(Cookie.get("spacesVisited"));Meteor.subscribe("spacesVisited",e)}})}),Template.indexTeacher.onRendered(function(){$(".modal").on("shown.bs.modal",function(e){$(this).find("[autofocus]").focus()}),Session.set("errorMessage",""),this.$(".login--input-username").focus(),T9n.map("fr",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")},"en",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")},"es",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")},"de",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")})}),Template.indexTeacher.events({"change #langSelect":function(e){var n=$(e.target).val();Session.setPersistent("lang",n)},"click .login--button-submit":function(e){e.preventDefault(),$("#login--form").submit()},"click .login--send-mail-forgot-password":function(e){e.preventDefault();var n=$("#email").val();Accounts.forgotPassword({email:n},function(e){e?(alert(TAPi18n.__("login--send-mail-forgot-password-error")),console.log(TAPi18n.__("login--send-mail-forgot-password-error-log",e))):alert(TAPi18n.__("login--send-mail-forgot-password",n))})},"click .index-teacher--shutdown":function(e,n){e.preventDefault();var o=confirm(TAPi18n.__("index-teacher--shutdown-message"));if(o){var s=confirm("Shutdown in progress. Please allow the Beekee Box 3 minutes to shut down before unplugging it");s&&Meteor.call("shutdownBox",function(e,n){o(e?TAPi18n.__("error-message")+e.message:TAPi18n.__("index-teacher--shutdown-confirm"))})}}}),Template.indexTeacher.helpers({langIsSelected:function(e){return Session.get("lang")==e?"selected":void 0},ownSpaces:function(){return Spaces.find({userId:Meteor.userId()},{sort:{submitted:-1}})},publicSpaces:function(){return Spaces.find({"permissions.public":!0})},isLangSelected:function(e){return Session.get("lang")&&(langSelected=Session.get("lang"),langSelected=langSelected.split("-"),langSelected=langSelected[0],e==langSelected)?"selected":void 0}})}).call(this);

(function(){Template.accessDenied.onRendered(function(){Session.set("errorMessage",""),this.$(".login--input-username").focus(),T9n.map("fr",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")},"en",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")},"es",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")},"de",{"User not found":TAPi18n.__("login--user-not-found"),"Incorrect password":TAPi18n.__("login--incorrect-password")})}),Template.accessDenied.events({"submit form":function(o){o.preventDefault(),Session.set("errorMessage","");var e=o.target.email.value,n=o.target.password.value;e&&n&&Meteor.loginWithPassword(e.trim(),n,function(o){o?Session.set("errorMessage",o.reason):this.next()})},"click .login--button-submit":function(o){o.preventDefault(),$("#login--form").submit(),console.log("on envoie")},"click .login--send-mail-forgot-password":function(o){o.preventDefault();var e=$("#email").val();Accounts.forgotPassword({email:e},function(o){o?(alert(TAPi18n.__("login--send-mail-forgot-password-error")),console.log(TAPi18n.__("login--send-mail-forgot-password-error-log",o))):alert(TAPi18n.__("login--send-mail-forgot-password",e))})}}),Template.accessDenied.helpers({errorMessage:function(){return Session.get("errorMessage")},passwordRecovery:function(){return"Incorrect password"===Session.get("errorMessage")?!0:void 0}})}).call(this);

(function(){Template.fileUpload.onCreated(function(){Uploader.init(this),this.data&&(this.autoStart=this.data.autoStart)}),Template.fileUpload.onRendered(function(){Uploader.render.call(this)}),Template.fileUpload.helpers({infoLabel:function(){var t=Template.instance(),e=t.info.get();if(e){var i=t.globalInfo.get();return 100!=i.progress&&($(".live-feed-post-submit--button-submit").prop("disabled",!0),$(".live-feed-post-edit--submit").prop("disabled",!0),$(".resources-post-edit--submit").prop("disabled",!0),$(".resources-post-submit--button-submit").prop("disabled",!0)),i.running?e.name+" - "+i.progress+"% - ["+i.bitrate+"]":e.name+" - "+e.size+"B"}},progress:function(){return Template.instance().globalInfo.get().progress+"%"},submitData:function(){return this.formData?this.formData.contentType=this.contentType:this.formData={contentType:this.contentType},"string"==typeof this.formData?this.formData:JSON.stringify(this.formData)}})}).call(this);

(function(){Template.guestUsername.events({"submit form":function(e,t){e.preventDefault();var a=$("#authorName").val().trim();Meteor.call("authorInsert",a,t.data.space._id,function(e){e?alert(TAPi18n.__("error-message")+e.message):(Session.setPersistent(t.data.space._id,{author:a}),$("#guestUsername").modal("hide"),Router.go("space",{_id:t.data.space._id,userUsername:a}))})},"click .guest-username--button-submit":function(e,t){e.preventDefault(),$("#guest-username--form").submit()}})}).call(this);

(function(){Template.space.onCreated(function(){function e(){return navigator.languages&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.userLanguage||"en-US"}var s=null;Session.get("lang")?s=Session.get("lang"):(s=e(),Session.set("lang",s)),Deps.autorun(function(){if(TAPi18n.setLanguage(Session.get("lang")),T9n.setLanguage(Session.get("lang")),moment.locale(Session.get("lang")),"undefined"!=typeof Cookie.get("spacesVisited")){var e=JSON.parse(Cookie.get("spacesVisited"));Meteor.subscribe("spacesVisited",e)}}),viewport=document.querySelector("meta[name=viewport]"),viewport.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=4"),Session.set("spaceId",this.data.space._id),Session.set("postToEdit",!1),Session.set("postToDelete",!1),Session.set("menuItem","1"),this.autorun(function(){switch(Session.get("menuItem")){case"1":subscription=Meteor.subscribe("posts",{spaceId:Session.get("spaceId"),type:"home"});break;case"2":break;case"3":subscription=Meteor.subscribe("posts",{spaceId:Session.get("spaceId"),type:"lesson"});break;case"4":}})}),Template.space.onRendered(function(){$("body").tooltip({selector:"[data-toggle=tooltip]",trigger:"hover"}),document.title="Beekee - "+this.data.space.title;var e=this.data.space._id,s=this.data.user;"guest"==s?Session.get(e)||$("#guestUsername").modal("show"):Authors.findOne({spaceId:e,name:s})?Session.set(this.data.space._id,{author:s}):Meteor.call("authorInsert",s,e,function(t){t?alert(TAPi18n.__("error-message")+t.message):Session.setPersistent(e,{author:s})})}),Template.space.events({"click .overlay":function(e){$("#sidebar").removeClass("active"),$(".overlay").removeClass("active")},"click #dismiss":function(e){$("#sidebar").removeClass("active"),$(".overlay").removeClass("active")},"click #sidebarCollapse":function(e){$("#sidebar").addClass("active"),$(".overlay").addClass("active"),$(".collapse.in").toggleClass("in")}}),Template.space.helpers({menuItem:function(e){return Session.get("menuItem")==e}})}).call(this);

(function(){Template.spaceSidebar.events({"change #langSelect":function(e){var t=$(e.target).val();Session.setPersistent("lang",t)},"click .menu-item":function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-id");Session.set("menuItem",t),"2"!=t&&"4"!=t&&($("#sidebar").removeClass("active"),$(".overlay").removeClass("active"),$(".collapse.in").removeClass("in"))},"click .space-sidebar--live-feed-category-edit":function(e){e.preventDefault();var t=$(e.target).data("category");Session.set("numChars",t.length),Session.set("liveFeedCategoryToEdit",t),$("#liveFeedCategoryEdit").modal("show")},"click .space-sidebar--resources-category-edit":function(e){e.preventDefault();var t=$(e.target).data("category");Session.set("numChars",t.length),Session.set("resourcesCategoryToEdit",t),$("#resourcesCategoryEdit").modal("show")},"click .filter-live-feed-all":function(e){e.preventDefault(),liveFeedResetFilters(),Session.set("postsServerNonReactive",LiveFeedCounts.findOne().count),liveFeedResetPostInterval()},"click .filter-resources-all":function(e){e.preventDefault(),resourcesResetFilters()},"click .filter-live-feed-category":function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target).data("category");liveFeedResetFilters(),Session.set("liveFeedCategory",t),Session.set("postsServerNonReactive",Categories.findOne({name:t}).nRefs),liveFeedResetPostInterval(),$("#sidebar").removeClass("active"),$(".overlay").removeClass("active"),$(".collapse.in").removeClass("in")},"click .filter-resources-category":function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target).data("category");resourcesResetFilters(),Session.set("resourcesCategory",t),$("#sidebar").removeClass("active"),$(".overlay").removeClass("active"),$(".collapse.in").removeClass("in")},"click .filter-author":function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target).data("author");liveFeedResetFilters(),Session.set("author",t),Session.set("postsServerNonReactive",Authors.findOne({name:t}).nRefs),liveFeedResetPostInterval(),$("#sidebar").removeClass("active"),$(".overlay").removeClass("active"),$(".collapse.in").removeClass("in")}}),Template.spaceSidebar.helpers({langIsSelected:function(e){return Session.get("lang")==e?"selected":void 0},selectedMenuItem:function(e){return e==Session.get("menuItem")},selectedShowAllBg:function(e){return""==Session.get("liveFeedCategory")&&""==Session.get("author")?"menu-item--selected":void 0},selectedShowAllTxt:function(e){return""==Session.get("liveFeedCategory")&&""==Session.get("author")?"font-weight-bold selected":"font-weight-light"},selectedLiveFeedCategory:function(){return this.name==Session.get("liveFeedCategory")?"font-weight-bold menu-item--selected selected":"font-weight-light"},selectedResourcesCategory:function(){return this.name==Session.get("resourcesCategory")?"font-weight-bold menu-item--selected selected":"font-weight-light"},selectedAuthor:function(){return this.name==Session.get("author")?"font-weight-bold menu-item--selected selected":"font-weight-light"},liveFeedCount:function(){var e=LiveFeedCounts.findOne();return e&&e.count},liveFeedCategories:function(){return Categories.find({type:"liveFeed"},{sort:{name:1}})},resourcesCategories:function(){return Categories.find({type:"resource"},{sort:{name:1}})},authors:function(){return Authors.find({},{sort:{name:1}})},ownSpace:function(){return Meteor.userId()==Template.parentData(1).space.userId||Roles.userIsInRole(Meteor.userId(),["admin"])?!0:!1},liveFeedAddCategory:function(){return this.space.permissions.liveFeedAddCategory||Roles.userIsInRole(Meteor.userId(),["admin"])||Meteor.userId()==this.space.userId?!0:!1}})}).call(this);

(function(){Template.spaceSubmit.onRendered(function(){$(".space-submit--form").validate({rules:{spaceName:{required:!0,minlength:3,maxlength:20}}}),Session.set("numChars",0)}),Template.spaceSubmit.events({"submit form":function(e,t){e.preventDefault();var a={title:$("#spaceName").val().trim()};Meteor.call("spaceInsert",a,function(e,t){e?alert(TAPi18n.__("error-message")+e.message):$("#spaceSubmit").modal("hide")}),$("#spaceName").val("")},"click .space-submit--button-submit":function(e){e.preventDefault(),$("#space-submit--form").submit()},"input #spaceName":function(){Session.set("numChars",$("#spaceName").val().length)}}),Template.spaceSubmit.helpers({numChars:function(e){return Session.get("numChars")}})}).call(this);

(function(){Template.spaceUsers.onRendered(function(){$(".space-users--form").validate({rules:{userName:{required:!0,minlength:1,maxlength:15}}}),Session.set("numChars",0)}),Template.spaceUsers.events({"submit form":function(e,s){e.preventDefault();var t=$("#userName").val().trim();if(""!=t)if(Authors.findOne({name:t})){if(!confirm(TAPi18n.__("space-users--user-exist",t)))return;Session.setPersistent(s.data.space._id,{author:t}),Router.go("space",{_id:s.data.space._id})}else Meteor.call("authorInsert",t,s.data.space._id,function(e){e?alert(TAPi18n.__("error-message")+e.message):(Session.setPersistent(s.data.space._id,{author:t,favorites:[]}),Router.go("space",{_id:s.data.space._id}))})},"click .space-users--button-submit-author":function(e,s){e.preventDefault(),$("#space-users--form").submit()},"input #userName":function(){Session.set("numChars",$("#userName").val().length)}}),Template.spaceUsers.helpers({numChars:function(e){return Session.get("numChars")}})}).call(this);

(function(){Template.spaceUsersFirstConnection.events({"submit form":function(e,s){e.preventDefault();var t=$("#space-users--input").val().trim();if(""!=t)if(Authors.findOne({name:t})){if(!confirm(TAPi18n.__("space-users--user-exist",t)))return;Session.setPersistent(s.data.spaceId,{author:t}),Router.go("space",{_id:s.data.spaceId})}else Meteor.call("authorInsert",t,s.data.spaceId,function(e){e?alert(TAPi18n.__("error-message")+e.message):(Session.setPersistent(s.data.spaceId,{author:t,favorites:[]}),Router.go("space",{_id:s.data.spaceId}))})},"click .space-users--button-submit-author":function(e,s){e.preventDefault(),$("#space-users--form").submit()}})}).call(this);

(function(){Template.registerHelper("isBox",function(){return"true"===Meteor.settings["public"].isBox}),Template.registerHelper("ownSpace",function(){var e=Session.get("spaceId"),r=Spaces.findOne(e).userId,t=Meteor.userId(),s=Roles.userIsInRole(Meteor.userId(),["admin"]);if(t){if(r===t)return!0;if(s)return s===!0?!0:!1}})}).call(this);

(function(){Meteor.isServer&&(Inject.rawHead("metaLoader",'<meta name="viewport" content="initial-scale=1.0, user-scalable=0, width=device-width, height=device-height"/><meta name="apple-mobile-web-app-capable" content="yes">	<meta name="mobile-web-app-capable" content="yes">'),Inject.rawBody("htmlLoader",Assets.getText("appLoader.html"))),Meteor.isClient&&Meteor.startup(function(){setTimeout(function(){$("#inject-loader-wrapper").fadeOut(500,function(){$(this).remove()})},700)})}).call(this);

